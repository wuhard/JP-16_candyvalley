window.__require=function e(t,n,o){function a(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!c&&p)return p(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return a(t[i][1][e]||e)},l,l.exports,e,t,n,o)}return n[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(){},{}],2:[function(e,t){"use strict";t.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},{}],3:[function(e,t){"use strict";const n=e("is-plain-obj"),{hasOwnProperty:o}=Object.prototype,{propertyIsEnumerable:a}=Object,r=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}),i=this,c={concatArrays:!1,ignoreUndefined:!1},s=e=>{const t=[];for(const n in e)o.call(e,n)&&t.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(e);for(const o of n)a.call(e,o)&&t.push(o)}return t};function p(e){return Array.isArray(e)?l(e):n(e)?m(e):e}function l(e){const t=e.slice(0,0);return s(e).forEach(n=>{r(t,n,p(e[n]))}),t}function m(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return s(e).forEach(n=>{r(t,n,p(e[n]))}),t}const u=(e,t,n,o)=>(n.forEach(n=>{void 0===t[n]&&o.ignoreUndefined||(n in e&&e[n]!==Object.getPrototypeOf(e)?r(e,n,y(e[n],t[n],o)):r(e,n,p(t[n])))}),e),d=(e,t,n)=>{let a=e.slice(0,0),i=0;return[e,t].forEach(t=>{const c=[];for(let n=0;n<t.length;n++)o.call(t,n)&&(c.push(String(n)),r(a,i++,t===e?t[n]:p(t[n])));a=u(a,t,s(t).filter(e=>!c.includes(e)),n)}),a};function y(e,t,o){return o.concatArrays&&Array.isArray(e)&&Array.isArray(t)?d(e,t,o):n(t)&&n(e)?u(e,t,s(t),o):p(t)}t.exports=function(...e){const t=y(p(c),this!==i&&this||{},c);let o={_:{}};for(const a of e)if(void 0!==a){if(!n(a))throw new TypeError("`"+a+"` is not an Option Object");o=y(o,{_:a},t)}return o._}},{"is-plain-obj":2}],4:[function(e,t){var n=e("./lib/alea"),o=e("./lib/xor128"),a=e("./lib/xorwow"),r=e("./lib/xorshift7"),i=e("./lib/xor4096"),c=e("./lib/tychei"),s=e("./seedrandom");s.alea=n,s.xor128=o,s.xorwow=a,s.xorshift7=r,s.xor4096=i,s.tychei=c,t.exports=s},{"./lib/alea":5,"./lib/tychei":6,"./lib/xor128":7,"./lib/xor4096":8,"./lib/xorshift7":9,"./lib/xorwow":10,"./seedrandom":11}],5:[function(e,t){(function(e,t,n){function o(e){var t,n=this,o=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var o=.02519603282416938*(t+=e.charCodeAt(n));o-=t=o>>>0,t=(o*=t)>>>0,t+=4294967296*(o-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=o(" "),n.s1=o(" "),n.s2=o(" "),n.s0-=o(e),n.s0<0&&(n.s0+=1),n.s1-=o(e),n.s1<0&&(n.s1+=1),n.s2-=o(e),n.s2<0&&(n.s2+=1),o=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function r(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.alea=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],6:[function(e,t){(function(e,t,n){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,o=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-o|0,o=o<<24^o>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-o|0,t.d=o<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var o=0;o<n.length+20;o++)t.b^=0|n.charCodeAt(o),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function r(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.tychei=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],7:[function(e,t){(function(e,t,n){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var o=0;o<n.length+64;o++)t.x^=0|n.charCodeAt(o),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function r(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xor128=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],8:[function(e,t){(function(e,t,n){function o(e){var t=this;t.next=function(){var e,n,o=t.w,a=t.X,r=t.i;return t.w=o=o+1640531527|0,n=a[r+34&127],e=a[r=r+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[r]=n^e,t.i=r,n+(o^o>>>16)|0},function(e,t){var n,o,a,r,i,c=[],s=128;for(t===(0|t)?(o=t,t=null):(t+="\0",o=0,s=Math.max(s,t.length)),a=0,r=-32;r<s;++r)t&&(o^=t.charCodeAt((r+32)%t.length)),0===r&&(i=o),o^=o<<10,o^=o>>>15,o^=o<<4,o^=o>>>13,r>=0&&(i=i+1640531527|0,a=0==(n=c[127&r]^=o+i)?a+1:0);for(a>=128&&(c[127&(t&&t.length||0)]=-1),a=127,r=512;r>0;--r)o=c[a+34&127],n=c[a=a+1&127],o^=o<<13,n^=n<<17,o^=o>>>15,n^=n>>>12,c[a]=o^n;e.w=i,e.X=c,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function r(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xor4096=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],9:[function(e,t){(function(e,t,n){function o(e){var t=this;t.next=function(){var e,n,o=t.x,a=t.i;return e=o[a],n=(e^=e>>>7)^e<<24,n^=(e=o[a+1&7])^e>>>10,n^=(e=o[a+3&7])^e>>>3,n^=(e=o[a+4&7])^e<<7,e=o[a+7&7],n^=(e^=e<<13)^e<<9,o[a]=n,t.i=a+1&7,n},function(e,t){var n,o=[];if(t===(0|t))o[0]=t;else for(t=""+t,n=0;n<t.length;++n)o[7&n]=o[7&n]<<15^t.charCodeAt(n)+o[n+1&7]<<13;for(;o.length<8;)o.push(0);for(n=0;n<8&&0===o[n];++n);for(8==n?o[7]=-1:o[n],e.x=o,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function r(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xorshift7=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],10:[function(e,t){(function(e,t,n){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var o=0;o<n.length+64;o++)t.x^=0|n.charCodeAt(o),o==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function r(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}t&&t.exports?t.exports=r:n&&n.amd?n(function(){return r}):this.xorwow=r})(0,"object"==typeof t&&t,"function"==typeof define&&define)},{}],11:[function(e,t){(function(n,o,a){var r,i=256,c=6,s="random",p=a.pow(i,c),l=a.pow(2,52),m=2*l,u=i-1;function d(e,t,n){var r=[],u=g(h((t=1==t?{entropy:!0}:t||{}).entropy?[e,_(o)]:null==e?v():e,3),r),d=new y(r),b=function(){for(var e=d.g(c),t=p,n=0;e<l;)e=(e+n)*i,t*=i,n=d.g(1);for(;e>=m;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,g(_(d.S),o),(t.pass||n||function(e,t,n,o){return o&&(o.S&&f(o,d),e.state=function(){return f(d,{})}),n?(a[s]=e,t):e})(b,u,"global"in t?t.global:this==a,t.state)}function y(e){var t,n=e.length,o=this,a=0,r=o.i=o.j=0,c=o.S=[];for(n||(e=[n++]);a<i;)c[a]=a++;for(a=0;a<i;a++)c[a]=c[r=u&r+e[a%n]+(t=c[a])],c[r]=t;(o.g=function(e){for(var t,n=0,a=o.i,r=o.j,c=o.S;e--;)t=c[a=u&a+1],n=n*i+c[u&(c[a]=c[r=u&r+t])+(c[r]=t)];return o.i=a,o.j=r,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,o=[],a=typeof e;if(t&&"object"==a)for(n in e)try{o.push(h(e[n],t-1))}catch(r){}return o.length?o:"string"==a?e:e+"\0"}function g(e,t){for(var n,o=e+"",a=0;a<o.length;)t[u&a]=u&(n^=19*t[u&a])+o.charCodeAt(a++);return _(t)}function v(){try{var e;return r&&(e=r.randomBytes)?e=e(i):(e=new Uint8Array(i),(n.crypto||n.msCrypto).getRandomValues(e)),_(e)}catch(c){var t=n.navigator,a=t&&t.plugins;return[+new Date,n,a,n.screen,_(o)]}}function _(e){return String.fromCharCode.apply(0,e)}if(g(a.random(),o),"object"==typeof t&&t.exports){t.exports=d;try{r=e("crypto")}catch(b){}}else"function"==typeof define&&define.amd?define(function(){return d}):a["seed"+s]=d})("undefined"!=typeof self?self:this,[],Math)},{crypto:1}],"AbstractFactory (@tapclap.utils-js.abstract-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"3c66cPBc5JN8KoTkcS+aMn9","AbstractFactory (@tapclap.utils-js.abstract-factory)"),n.__esModule=!0,n.AbstractFactory=void 0;var o,a=(o=e("merge-options"))&&o.__esModule?o:{default:o},r=function(){function e(e){void 0===e&&(e={}),this._classConfig=e}var t=e.prototype;return t.create=function(e,t){void 0===t&&(t={});var n=this._classConfig[e];if(n)return new n.class(this._createOptions(n.options,t));throw new Error("Not found class by type: "+e)},t._createOptions=function(e,t){return(0,a.default)({},e,t)},e}();n.AbstractFactory=r,cc._RF.pop()},{"merge-options":3}],"Action (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"3dd5ewGqQhRgL0cZ0L+/xRd","Action (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.Action=void 0;var o=function(){function e(e){void 0===e&&(e={}),this._caller=e.caller}return e.prototype.run=function(){return Promise.resolve()},e}();n.Action=o,cc._RF.pop()},{}],"ActionAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"25ab5Ekv+5bwKL77NpdgePh","ActionAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.ActionAnimation=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===t&&(t=null),void 0===n&&(n=null),(o=e.call(this)||this)._data={},t&&n&&o.addAction(t,n),o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.addAction=function(e,t,n){void 0===n&&(n=0);var o=cc.sequence(e,cc.callFunc(this._resolve));n&&o.setTag(n),this._data={action:o,target:t}},r.run=function(){var t=this._data,n=t.target,o=t.action;return n&&o?n.runAction(o):this._resolve(),e.prototype.run.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.ActionAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"ActionCaller (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"89d885HgndUqZZNDJUp+RGr","ActionCaller (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.ActionCaller=void 0;var o=function(){function e(e){var t=e.actionManager,n=e.actionFactory,o=e.actions,a=void 0===o?{}:o;this._actionManager=t,this._actionFactory=n,this._actions=a}var t=e.prototype;return t._getActionByKey=function(e){return this._actions.find(function(t){var n=t[0];return e===n})},t.run=function(e,t){void 0===t&&(t={});var n=this._getActionByKey(e),o=n[1],a=n[2],r=void 0===a?{}:a;return o?this._actionManager.run(o,Object.assign({},r,t)):Promise.resolve()},t.has=function(e){return!!this._getActionByKey(e)},e}();n.ActionCaller=o,cc._RF.pop()},{}],"ActionCondition (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"a7232Tofj9QY5CoYjm2h9Kf","ActionCondition (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.ActionCondition=void 0;var o=function(){function e(){}return e.prototype.check=function(){},e}();n.ActionCondition=o,cc._RF.pop()},{}],"ActionConditionsConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"ee562gQgMBZoL53RaroRKNt","ActionConditionsConfig (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ActionConditionsConfig=void 0;var o=e("./DI (@tapclap.utils-js.di)"),a=e("./CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),r=e("./OfferIsAvailableActionCondition (scripts.action-conditions)"),i=e("./StorageFlagActionCondition (scripts.action-conditions)"),c=e("./PiggybankRemindActionCondition (scripts.action-conditions)"),s=e("./HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),p=e("./NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)"),l=e("./NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),m=e("./ApplicationConfigShortcuts (scripts.config)"),u=e("./TutorialConfig (scripts.config)"),d=e("./LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),y=e("./AlreadyCompletedLevelActionCondition (scripts.action-conditions)"),f=e("./NeedPiggybankTutorialActionCondition (scripts.action-conditions)"),h=e("./LevelIsHardActionCondition (scripts.action-conditions)"),g=e("./LevelStartCountActionCondition (scripts.action-conditions)"),v=e("./UserItemActionCondition (scripts.action-conditions)"),_=e("./PlatformContextActionCondition (scripts.action-conditions)"),b=e("./FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)"),C=e("./NewUserActionCondition (scripts.action-conditions)"),w=e("./HasAdActionCondition (scripts.action-conditions)"),S=e("./InterstitialAdCondition (scripts.action-conditions)"),E=e("./ActionConstants (scripts.config)"),x=e("./CompareValueActionCondition (scripts.action-conditions)"),A=e("./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)"),O=e("./StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)"),R=e("./CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)"),P=e("./PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)");n.ActionConditionsConfig={SaleShopActionConditionCheck:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleDoubleCoins"}),o.DI.instance(i.StorageFlagActionCondition,{storage:o.DI.cfg("RuntimeStorage"),key:"sale-double-coins",setFlag:!1})]),SaleShopActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleDoubleCoins"}),o.DI.instance(i.StorageFlagActionCondition,{storage:o.DI.cfg("RuntimeStorage"),key:"sale-double-coins",setFlag:!0})]),SaleShopUnlimActionConditionCheck:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleUnlimitedLives"}),o.DI.instance(i.StorageFlagActionCondition,{storage:o.DI.cfg("RuntimeStorage"),key:"sale-unlimited-lives",setFlag:!1})]),SaleShopUnlimActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleUnlimitedLives"}),o.DI.instance(i.StorageFlagActionCondition,{storage:o.DI.cfg("RuntimeStorage"),key:"sale-unlimited-lives",setFlag:!0})]),PiggybankActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(c.PiggybankRemindActionCondition,{piggybankModuleResolver:m.moduleResolver("piggybank","common"),storage:o.DI.cfg("PlatformStorage"),storagePrefixKey:"piggybank"})]),NotificationRequestActionCondition:o.DI.instance(s.HasNotAttemptsActionCondition,{moduleResolvers:{attempts:m.moduleResolver("attempts")}}),CakeRewardActionCondition:o.DI.instance(p.NeedShowCakeRewardWindowActionCondition,{cakeRewardModuleResolver:m.moduleResolver("cakeReward","common"),progressModuleResolver:m.moduleResolver("progress","common")}),HardLevelsTutorialActionCondition:o.DI.instance(l.NeedTutorialForHardLevelActionCondition,{moduleResolvers:{progress:m.moduleResolver("progress"),levels:m.moduleResolver("levels")},userManager:o.DI.cfg("UserManager"),tutorialKey:u.TUTORIALS.HARD_LEVEL,saveState:!0}),SaleDoubleCoinsShopActionCondition:o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleDoubleCoins"}),SaleUnlimitedLivesShopActionCondition:o.DI.instance(r.OfferIsAvailableActionCondition,{offerManager:o.DI.cfg("OfferManager"),strategyKey:"saleUnlimitedLives"}),OpenLastEpisodeActionCondition:o.DI.instance(d.LastLevelInEpisodeActionCondition,{moduleResolvers:{episodes:m.moduleResolver("episodes"),progress:m.moduleResolver("progress")}}),WinMatch3ActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(y.AlreadyCompletedLevelActionCondition,{progressModuleResolver:m.moduleResolver("progress"),levelsModuleResolver:m.moduleResolver("levels","common")})]),WindowPiggybankActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(f.NeedPiggybankTutorialActionCondition,{storage:o.DI.cfg("PlatformStorage"),storagePrefixKey:"piggybank"})]),PiggybankReplenishmentHandleActionCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(h.LevelIsHardActionCondition,{levelsModuleResolver:m.moduleResolver("levels","common")})]),PlatformPromoGiftCondition:o.DI.instance(P.PlatformPromoGiftCondition),FirstLevelPlatformPromoGiftCondition:o.DI.cfg("PlatformPromoGiftCondition"),RegularPlatformPromoGiftCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.cfg("PlatformPromoGiftCondition"),o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(R.CommonProgressCompareValueResolver,{progressModuleResolver:m.moduleResolver("progress")}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:1}),comparer:">"})]),NotNewUserCondition:o.DI.instance(C.NewUserActionCondition,{newUser:!1,userManager:o.DI.cfg("UserManager")}),NotPayerUserCondition:o.DI.instance(v.UserItemActionCondition,{userManager:o.DI.cfg("UserManager"),rules:[{spec:"tags",name:"payer",exists:!1}]}),LevelStartCountCondition:o.DI.instance(g.LevelStartCountActionCondition,{storage:o.DI.cfg("PlatformStorage"),storageKey:"levelStartCount",rules:{count:3}}),PlatformCondition:o.DI.instance(_.PlatformContextActionCondition,{platformLauncher:o.DI.cfg("PlatformLauncher"),rules:{platforms:[b.FacebookInstantLauncher.FBINSTANT_PLATFORM.WEB,b.FacebookInstantLauncher.FBINSTANT_PLATFORM.ANDROID,b.FacebookInstantLauncher.FBINSTANT_PLATFORM.MOBILE_WEB,b.FacebookInstantLauncher.FBINSTANT_PLATFORM.IOS]}}),BannerAdCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.cfg("HasBannerAdCondition"),o.DI.cfg("PlatformCondition"),o.DI.cfg("NotNewUserCondition"),o.DI.cfg("NotPayerUserCondition")]),HasBannerAdCondition:o.DI.instance(w.HasAdActionCondition,{adService:o.DI.cfg("BannerAdService")}),HasInterstitialAdCondition:o.DI.instance(w.HasAdActionCondition,{adService:o.DI.cfg("InterstitialAdService")}),InterstitialAdCondition:o.DI.instance(S.InterstitialAdCondition,{adProvider:o.DI.cfg("InterstitialAdProvider"),contextManager:o.DI.cfg("ContextManager"),actionManager:o.DI.cfg("ActionManager"),commonCondition:o.DI.instance(a.CompositeActionCondition,[o.DI.cfg("HasInterstitialAdCondition"),o.DI.cfg("NotPayerUserCondition"),o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(R.CommonProgressCompareValueResolver,{progressModuleResolver:m.moduleResolver("progress")}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:1}),comparer:">"})]),conditionsByAdProvider:{"yandex-games:interstitial":[{actionKey:E.ACTIONS.START_MATCH3_GAME,condition:o.DI.instance(a.CompositeActionCondition,[o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(R.CommonProgressCompareValueResolver,{progressModuleResolver:m.moduleResolver("progress")}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:8}),comparer:">"}),o.DI.instance(g.LevelStartCountActionCondition,{storage:o.DI.cfg("PlatformStorage"),storageKey:"levelStartCountPerSession",rules:{count:2}}),o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(O.StorageItemCompareValueResolver,{storage:o.DI.cfg("PlatformStorage"),storageKey:"levelStartCountPerSession"}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:28}),comparer:"<="})])},{actionKey:E.ACTIONS.RUN_SCENE_EPISODIC,condition:o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(O.StorageItemCompareValueResolver,{storage:o.DI.cfg("PlatformStorage"),storageKey:"levelStartCountPerSession"}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:0}),comparer:"="})},{actionKey:E.ACTIONS.AVAILABLE_NEW_EPISODE,condition:o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(R.CommonProgressCompareValueResolver,{progressModuleResolver:m.moduleResolver("progress")}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:30}),comparer:">"})},{actionKey:E.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE,condition:o.DI.instance(x.CompareValueActionCondition,{firstCompareValueResolver:o.DI.instance(R.CommonProgressCompareValueResolver,{progressModuleResolver:m.moduleResolver("progress")}),secondCompareValueResolver:o.DI.instance(A.CompareValueResolver,{compareValue:41}),comparer:">"})}],default:[{actionKey:E.ACTIONS.START_MATCH3_GAME,condition:o.DI.instance(a.CompositeActionCondition,[o.DI.cfg("NotNewUserCondition"),o.DI.cfg("LevelStartCountCondition")])}]}})},cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./AlreadyCompletedLevelActionCondition (scripts.action-conditions)":"AlreadyCompletedLevelActionCondition (scripts.action-conditions)","./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)":"CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)","./CompareValueActionCondition (scripts.action-conditions)":"CompareValueActionCondition (scripts.action-conditions)","./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)":"CompareValueResolver (scripts.action-conditions.compare-value-resolvers)","./CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)":"CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)":"FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)","./HasAdActionCondition (scripts.action-conditions)":"HasAdActionCondition (scripts.action-conditions)","./HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)":"HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)","./InterstitialAdCondition (scripts.action-conditions)":"InterstitialAdCondition (scripts.action-conditions)","./LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)":"LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)","./LevelIsHardActionCondition (scripts.action-conditions)":"LevelIsHardActionCondition (scripts.action-conditions)","./LevelStartCountActionCondition (scripts.action-conditions)":"LevelStartCountActionCondition (scripts.action-conditions)","./NeedPiggybankTutorialActionCondition (scripts.action-conditions)":"NeedPiggybankTutorialActionCondition (scripts.action-conditions)","./NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)":"NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)","./NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)":"NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)","./NewUserActionCondition (scripts.action-conditions)":"NewUserActionCondition (scripts.action-conditions)","./OfferIsAvailableActionCondition (scripts.action-conditions)":"OfferIsAvailableActionCondition (scripts.action-conditions)","./PiggybankRemindActionCondition (scripts.action-conditions)":"PiggybankRemindActionCondition (scripts.action-conditions)","./PlatformContextActionCondition (scripts.action-conditions)":"PlatformContextActionCondition (scripts.action-conditions)","./PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)":"PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)","./StorageFlagActionCondition (scripts.action-conditions)":"StorageFlagActionCondition (scripts.action-conditions)","./StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)":"StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)","./TutorialConfig (scripts.config)":"TutorialConfig (scripts.config)","./UserItemActionCondition (scripts.action-conditions)":"UserItemActionCondition (scripts.action-conditions)"}],"ActionConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"c0401DqoeVQNp5yliJ7zrWd","ActionConfig (scripts.config)"),n.__esModule=!0,n.ActionConfig=void 0;var o,a,r,i,c,s=e("./ActionConstants (scripts.config)"),p=e("./ShowMenuWindowAction (scripts.actions)"),l=e("./StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)"),m=e("./ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),u=e("./LogMatch3GameLoseAction (scripts.actions)"),d=e("./ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)"),y=e("./ShowFriendsWindowAction (scripts.actions)"),f=e("./ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)"),h=e("./DI (@tapclap.utils-js.di)"),g=e("./ShowUserIdWindowAction (scripts.actions)"),v=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),_=e("./ApplicationConfigShortcuts (scripts.config)"),b=e("./PrefabResourcesConfig (scripts.config)"),C=e("./MetaTaskAction (@tapclap.game-kit.meta-task-manager)"),w=e("./RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)"),S=e("./CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),E=e("./WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)"),x=e("./CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),A=e("./PublicationAction (@tapclap.game-kit.action-manager.actions.publication)"),O=e("./CheckpointRewardAvailableWindowAction (scripts.actions)"),R=e("./CheckpointRewardUnavailableWindowAction (scripts.actions)"),P=e("./ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),k=e("./ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),T=e("./ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),I=e("./CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)"),M=e("./NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)"),j=e("./PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)"),L=e("./WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)"),F=e("./LockInputAction (@tapclap.game-kit.action-manager.actions.ui)"),D=e("./StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)"),B=e("./CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),G=e("./DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),N=e("./ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)"),W=e("./ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)"),H=e("./StartMatch3GameAction (scripts.actions)"),V=e("./FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)"),K=e("./IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),U=e("./IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)"),Y=e("./ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),z=e("./ShowLoseLevelBombExplodeWindowAction (scripts.actions)"),q=e("./ShowParrotFailWalkWindowAction (scripts.actions)"),Z=e("./UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)"),X=e("./NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)"),J=e("./LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),Q=e("./ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),$=e("./EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),ee=e("./StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),te=e("./LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),ne=e("./ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),oe=e("./ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)"),ae=e("./NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)"),re=e("./QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)"),ie=e("./Match3Game (scripts.common.match3-game)"),ce=e("./NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)"),se=e("./ConditionalAction (@tapclap.game-kit.action-manager)"),pe=e("./TimeDuration (@tapclap.utils-js.time-duration)"),le=e("./EntitySkinConfig (scripts.config)"),me=e("./SkinsWindowAction (scripts.actions)"),ue=e("./TutorialConfig (scripts.config)"),de=e("./MetaTaskConfig (scripts.config)"),ye=e("./UpdateCakeRewardMetaModuleAction (scripts.actions)"),fe=e("./ShowCakeWinLevelWindowAction (scripts.actions)"),he=e("./CakeRewardWindowAction (scripts.actions)"),ge=e("./CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)"),ve=e("./ShowCandyvalleyShopWindowAction (scripts.actions)"),_e=e("./PlaySpineAnimationAction (scripts.actions)"),be=e("./CandyvalleyBarSceneComponent (scripts.scenes)"),Ce=e("./ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)"),we=e("./SpecialLevelEndAction (scripts.actions.special-levels)"),Se=e("./SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)"),Ee=e("./SpecialLevelRewardWindowAction (scripts.actions.special-levels)"),xe=e("./PiggybankReplenishmentAction (scripts.actions)"),Ae=e("./PiggybankWindowAction (scripts.actions)"),Oe=e("./PiggybankTutorialWindowAction (scripts.actions)"),Re=e("./ShowStartLevelWithBoostersWindowAction (scripts.actions)"),Pe=e("./CheckStartBoostersTutorialAction (scripts.actions)"),ke=e("./SpendStartBoostersAction (scripts.actions)"),Te=e("./StorageStartBoostersTutorialAction (scripts.actions)"),Ie=e("./CheckStartBoostersAction (scripts.actions)"),Me=e("./URL (@tapclap.utils-js.url)"),je=e("./OpenCommunityUrlAction (scripts.actions)"),Le=e("./PiggybankMetaModule (scripts.meta.modules.piggybank)"),Fe=e("./GetterToValue (@tapclap.utils-js.getters)"),De=e("./MetaModuleGetter (@tapclap.game-kit.getters)"),Be=e("./MetaEventGetter (scripts.getters)"),Ge=e("./ThousandthsLevelRewardWindowAction (scripts.actions)"),Ne=e("./CompensationStartBoostersAction (scripts.actions)"),We=e("./CheckAttemptsForLevelWithBoostersAction (scripts.actions)"),He=e("./PreloadWindowAction (scripts.actions)"),Ve=e("./CandyvalleyRunMetaGameAction (scripts.actions)"),Ke=e("./IncreaseLevelStartCountAction (scripts.actions)"),Ue=e("./SoundPauseResumeAction (scripts.actions)"),Ye=e("./PiggybankForceEndHandler (scripts.meta.modules.piggybank)"),ze=e("./InterstitialAdConditionAction (scripts.action-conditions)"),qe=e("./DailyRewardWindowAction (scripts.actions)"),Ze=e("./LanguageSettingsWindowAction (scripts.actions)"),Xe=e("./PlatformPromoGiftWindowAction (scripts.actions)"),Je=e("./MessageCenterWindowAction (scripts.actions)"),Qe=e("./DIConfig (scripts.config)"),$e=e("./MessagesScrollAdapter (scripts.windows.scroll-adapters)"),et=e("./FriendsScrollAdapter (scripts.windows.scroll-adapters)"),tt=e("./RequestLivesMessageEventHandler (scripts.message-center.event-handlers)"),nt=e("./ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)"),ot=e("./SendLivesMessageEventHandler (scripts.message-center.event-handlers)"),at=e("./SceneBadgeRefresher (scripts.badges)"),rt=e("./MessageCenterSceneBadgeComponent (scripts.badges)"),it=((c={})[s.ACTIONS.RUN_META_GAME]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.RUN_META_GAME,builders:h.DI.raw([h.DI.instance(Ve.CandyvalleyRunMetaGameAction,{sceneManager:h.DI.cfg("SceneManager"),metaGameManager:h.DI.cfg("MetaGameManager"),sceneResourcesManager:h.DI.cfg("SceneResourcesManager")})])}),c[s.ACTIONS.RUN_SCENE_EPISODIC]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.RUN_SCENE_EPISODIC,builders:h.DI.raw([h.DI.instance(ze.InterstitialAdConditionAction,{actionKey:s.ACTIONS.RUN_SCENE_EPISODIC,condition:h.DI.cfg("InterstitialAdCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.INTERSTITIAL_WATCH_AD]])}),h.DI.instance(w.RewardAction,{moduleResolver:(0,_.moduleResolver)("dailyReward"),caller:(0,_.caller)([[w.RewardAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_DAILY_REWARD]])}),h.DI.instance(w.RewardAction,{moduleResolver:(0,_.moduleResolver)("starsReward"),caller:(0,_.caller)([[w.RewardAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE]])}),h.DI.instance(w.RewardAction,{moduleResolver:(0,_.moduleResolver)("specialLevelsReward"),caller:(0,_.caller)([[w.RewardAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_SPECIAL_LEVELS_REWARD]])}),h.DI.instance(w.RewardAction,{moduleResolver:(0,_.moduleResolver)("thousandthsLevelReward"),caller:(0,_.caller)([[w.RewardAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_THOUSANDTHS_LEVEL_REWARD]])}),h.DI.instance(S.CraftWindowAction,(0,_.windowAction)({moduleResolvers:{episodes:(0,_.moduleResolver)("episodes"),progress:(0,_.moduleResolver)("progress"),craft:(0,_.moduleResolver)("craft")},caller:(0,_.caller)([[S.CraftWindowAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_CRAFT_PART]])})),h.DI.instance(E.WaitCloseWindowsAction,{windowManager:h.DI.cfg("WindowManager")}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("SaleShopActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_SALE_DOUBLE_COINS_SHOP]])}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("SaleShopUnlimActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP]])}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("PiggybankActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_PIGGYBANK]])}),h.DI.instance(E.WaitCloseWindowsAction,{windowManager:h.DI.cfg("WindowManager")}),h.DI.instance(x.CheckNewEpisodeAction,{moduleResolvers:{episodes:(0,_.moduleResolver)("episodes"),progress:(0,_.moduleResolver)("progress")},caller:(0,_.caller)([[x.CheckNewEpisodeAction.CALLER_NEW_EPISODE,s.ACTIONS.AVAILABLE_NEW_EPISODE],[x.CheckNewEpisodeAction.CALLER_BEGIN_GAME,s.ACTIONS.BEGIN_GAME],[x.CheckNewEpisodeAction.CALLER_NO_EPISODE,s.ACTIONS.OPEN_LAST_EPISODE]])}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("NotificationRequestActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.NOTIFICATION_REQUEST,{reason:"attemptsRestore"}]])}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("CakeRewardActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_CAKE_REWARD,{showPrevProgress:!0}]])}),h.DI.instance(E.WaitCloseWindowsAction,{windowManager:h.DI.cfg("WindowManager")}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("HardLevelsTutorialActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.SHOW_HARD_LEVEL_TUTORIAL]])}),h.DI.instance(N.ResetModulesAction,{moduleResolvers:[(0,_.moduleResolver)("progress"),(0,_.moduleResolver)("cakeReward"),(0,_.moduleResolver)("currentLevel")]}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("RegularPlatformPromoGiftCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_PLATFORM_PROMO_GIFT]])})])}),c[s.ACTIONS.FIRST_LEVEL_PLATFORM_PROMO_GIFT]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("FirstLevelPlatformPromoGiftCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_PLATFORM_PROMO_GIFT]])}),c[s.ACTIONS.WINDOW_DAILY_REWARD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_DAILY_REWARD,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["dailyReward"]})),h.DI.instance(qe.DailyRewardWindowAction,(0,_.windowAction)({dailyRewardModuleResolver:(0,_.moduleResolver)("dailyReward"),attemptsModuleResolver:(0,_.moduleResolver)("attempts"),episodes:(0,_.moduleResolver)("episodes"),itemsTypes:(o={},o[6]="final",o[7]="ad",o),window:"dailyReward",queue:!0,caller:(0,_.caller)([[qe.DailyRewardWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.dailyReward"}]]),strategyKey:"dailyReward",actionManager:h.DI.cfg("ActionManager"),userManager:h.DI.cfg("UserManager"),offerManager:h.DI.cfg("OfferManager")})),(0,_.proxyAction)(s.ACTIONS.NOTIFICATION_REQUEST,{queue:!0,reason:"dailyReward"})])}),c[s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["episodesStarsRewardAvailable"]})),h.DI.instance(O.CheckpointRewardAvailableWindowAction,(0,_.windowAction)({window:"episodesStarsRewardAvailable",text:{chooseReward:"chooseReward",cheersYouWon:"cheersYouWon",lookAtAnotherPrizes:"lookAtAnotherPrizes"},caller:(0,_.caller)([[O.CheckpointRewardAvailableWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.episodesStarsReward"}]])})),h.DI.instance(ze.InterstitialAdConditionAction,{actionKey:s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE,condition:h.DI.cfg("InterstitialAdCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.INTERSTITIAL_WATCH_AD]])})])}),c[s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_UNAVAILABLE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_UNAVAILABLE,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["episodesStarsRewardUnavailable"]})),h.DI.instance(R.CheckpointRewardUnavailableWindowAction,(0,_.windowAction)({window:"episodesStarsRewardUnavailable",text:{toOpenYouNeed:"toOpenRewardBoxYouNeed"}}))])}),c[s.ACTIONS.WINDOW_SPECIAL_LEVELS_REWARD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_SPECIAL_LEVELS_REWARD,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["specialLevelsPrize"]})),h.DI.instance(Ee.SpecialLevelRewardWindowAction,(0,_.windowAction)({window:"specialLevelsPrize",storage:h.DI.cfg("PlatformStorage")}))])}),c[s.ACTIONS.WINDOW_THOUSANDTHS_LEVEL_REWARD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_THOUSANDTHS_LEVEL_REWARD,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["thousandthsLevelReward"]})),h.DI.instance(Ge.ThousandthsLevelRewardWindowAction,(0,_.windowAction)({window:"thousandthsLevelReward",moduleResolver:(0,_.moduleResolver)("thousandthsLevelReward"),caller:(0,_.caller)([[Ge.ThousandthsLevelRewardWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.thousandthsLevel"}]])}))])}),c[s.ACTIONS.WINDOW_CRAFT_PART]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_CRAFT_PART,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["craftPart"]})),h.DI.instance(P.ShowCraftPartWindowAction,(0,_.windowAction)({window:"craftPart",queue:!0,gameResolver:(0,_.gameResolver)(),moduleResolver:(0,_.moduleResolver)("craft"),caller:(0,_.caller)([[P.ShowCraftPartWindowAction.CALLER_FINAL_PART,s.ACTIONS.WINDOW_CRAFT],[P.ShowCraftPartWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.craft.found"}]])}))])}),c[s.ACTIONS.WINDOW_CRAFT]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_CRAFT,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["craft"]})),h.DI.instance(k.ShowCraftWindowAction,(0,_.windowAction)({window:"craft",gameResolver:(0,_.gameResolver)(),moduleResolvers:{episodes:(0,_.moduleResolver)("episodes"),craft:(0,_.moduleResolver)("craft")},caller:(0,_.caller)([[k.ShowCraftWindowAction.CALLER_DEFAULT,s.ACTIONS.WINDOW_CRAFT_PART],[k.ShowCraftWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.craft.complete"}]])}))])}),c[s.ACTIONS.WINDOW_EPISODES]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_EPISODES,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["episodes"]})),h.DI.instance(T.ShowEpisodicWindowAction,(0,_.windowAction)({window:"episodes",caller:(0,_.caller)([[T.ShowEpisodicWindowAction.CALLER_COLLECT_ITEM,s.ACTIONS.WINDOW_CRAFT]]),moduleResolvers:{craft:(0,_.moduleResolver)("craft"),progress:(0,_.moduleResolver)("progress"),episodes:(0,_.moduleResolver)("episodes"),stars:(0,_.moduleResolver)("stars"),i18n:(0,_.moduleResolver)("i18n")},gameResolver:(0,_.gameResolver)()}))])}),c[s.ACTIONS.WINDOW_FRIENDS]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_FRIENDS,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["friends"]})),h.DI.instance(y.ShowFriendsWindowAction,(0,_.windowAction)({window:"friends",chartModuleResolver:(0,_.moduleResolver)("chart"),caller:(0,_.caller)([["invite",s.ACTIONS.SHOW_INVITE,{socialRequest:h.DI.from("SocialRequest").addArgs({message:"social.invite.message",button:"social.invite.button",image:"https://static.tapclap.com/static/candyvalley/facebook/publication/v2/bonus.png"})}]])}))])}),c[s.ACTIONS.WINDOW_MESSAGE_CENTER]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_MESSAGE_CENTER,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["message-center"]})),h.DI.instance(Je.MessageCenterWindowAction,(0,_.windowAction)({window:"message-center",currentTabResolvers:{fromAttemptsOffer:h.DI.instance(Je.FromOfferMessageCenterWindowCurrentTabResolver,{messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),messageTypes:["attempts:response"],tabKey:"messages"})},messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),adapters:{friends:h.DI.instance(et.FriendsScrollAdapter,{messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),chartModuleResolver:(0,_.moduleResolver)("chart")}),messages:h.DI.instance($e.MessagesScrollAdapter,{messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),chartModuleResolver:(0,_.moduleResolver)("chart"),attemptsModuleResolver:(0,_.moduleResolver)("attempts")})},eventHandlers:(a={},a["request-lives"]=h.DI.instance(tt.RequestLivesMessageEventHandler,{socialService:h.DI.cfg("SocialService"),socialRequest:h.DI.from("SocialRequest").addArgs({message:"window.messageCenter.socialMessageRequest"}),messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),requestWrapper:h.DI.cfg(Qe.DIConfig.SocialRequestWrapper),userManager:h.DI.cfg("UserManager")}),a["receive-lives"]=h.DI.instance(nt.ReceiveLivesMessageEventHandler,{messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),attemptsModuleResolver:(0,_.moduleResolver)("attempts"),badgeRefresher:h.DI.instance(at.SceneBadgeRefresher,rt.MessageCenterSceneBadgeComponent)}),a["send-lives"]=h.DI.instance(ot.SendLivesMessageEventHandler,{socialService:h.DI.cfg("SocialService"),socialRequest:h.DI.from("SocialRequest").addArgs({message:"window.messageCenter.socialMessageGift"}),requestWrapper:h.DI.cfg(Qe.DIConfig.SocialRequestWrapper),messageCenter:h.DI.cfg(Qe.DIConfig.MessageCenter),badgeRefresher:h.DI.instance(at.SceneBadgeRefresher,rt.MessageCenterSceneBadgeComponent)}),a),badgeRefresher:h.DI.instance(at.SceneBadgeRefresher,rt.MessageCenterSceneBadgeComponent),caller:(0,_.caller)([["invite",s.ACTIONS.SHOW_INVITE,{socialRequest:h.DI.from("SocialRequest").addArgs({message:"social.invite.message",button:"social.invite.button",image:"https://static.tapclap.com/static/candyvalley/facebook/publication/v2/bonus.png"})}]])}))])}),c[s.ACTIONS.WINDOW_MENU]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_MENU,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["menu","userId"]})),h.DI.instance(p.ShowMenuWindowAction,(0,_.windowAction)({window:"menu",settings:{music:"music",sound:"effects"},actions:[{controlKey:"id",event:"open-window-user-id",caller:"showUserId"},{controlKey:"skins",event:"open-window-skins",caller:"skins"},{controlKey:"language",event:"open-window-language",caller:"languageSettings"}],caller:(0,_.caller)([["showUserId",s.ACTIONS.WINDOW_USER_ID],["skins",s.ACTIONS.SKINS],["quit",s.ACTIONS.EXIT_MATCH3_GAME],["languageSettings",s.ACTIONS.WINDOW_LANGUAGE_SETTINGS],[p.ShowMenuWindowAction.CALLER_PRIVACY_POLICY,s.ACTIONS.WEBVIEW],[p.ShowMenuWindowAction.CALLER_TERMS,s.ACTIONS.WEBVIEW],[p.ShowMenuWindowAction.CALLER_COMMUNITY,s.ACTIONS.OPEN_COMMUNITY_URL]]),musicModuleResolver:(0,_.moduleResolver)("music"),privacyPolicyUrl:"https://tapclap.com/privacy-policy-en.html",socialService:h.DI.cfg("SocialService"),sceneManager:h.DI.cfg("SceneManager"),storage:h.DI.cfg("PlatformStorage"),configService:h.DI.cfg("ConfigService"),languageSettingsEnabled:h.DI.cfg("LanguageSettingsEnabled"),languageControlKey:"language",i18n:h.DI.cfg("I18N")}))])}),c[s.ACTIONS.WINDOW_LANGUAGE_SETTINGS]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_LANGUAGE_SETTINGS,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["language-settings"]})),h.DI.instance(Ze.LanguageSettingsWindowAction,(0,_.windowAction)({window:"language-settings",i18n:h.DI.cfg("I18N"),storage:h.DI.cfg("PlatformStorage")}))])}),c[s.ACTIONS.WINDOW_LIVES_SHOP]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_LIVES_SHOP,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["shop"]})),h.DI.instance(ve.ShowCandyvalleyShopWindowAction,(0,_.windowAction)({window:"shop",offerManager:h.DI.cfg("OfferManager"),offerType:"lives",closeAfter:!0,caller:(0,_.caller)([[f.ShowShopWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[f.ShowShopWindowAction.CALLER_AD,s.ACTIONS.WATCH_AD]]),barMode:be.Bars.attempts,di:h.DI.self(),actionManager:h.DI.cfg(Qe.DIConfig.ActionManager)}))])}),c[s.ACTIONS.WINDOW_COINS_SHOP]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("SaleDoubleCoinsShopActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_SALE_DOUBLE_COINS_SHOP],[se.ConditionalAction.CALLER_FALSE,s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP_CHECK]])}),c[s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP_CHECK]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("SaleUnlimitedLivesShopActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP],[se.ConditionalAction.CALLER_FALSE,s.ACTIONS.WINDOW_COINS_SHOP_FORCE]])}),c[s.ACTIONS.WINDOW_COINS_SHOP_FORCE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_COINS_SHOP_FORCE,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["shop"]})),h.DI.instance(ve.ShowCandyvalleyShopWindowAction,(0,_.windowAction)({window:"shop",offerManager:h.DI.cfg("OfferManager"),userManager:h.DI.cfg("UserManager"),offerType:"coins",caller:(0,_.caller)([[f.ShowShopWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[f.ShowShopWindowAction.CALLER_AD,s.ACTIONS.WATCH_AD]]),barMode:be.Bars.currency,di:h.DI.self()}))])}),c[s.ACTIONS.WINDOW_SALE_DOUBLE_COINS_SHOP]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_SALE_DOUBLE_COINS_SHOP,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["shop"]})),h.DI.instance(ve.ShowCandyvalleyShopWindowAction,(0,_.windowAction)({window:"shop",offerManager:h.DI.cfg("OfferManager"),userManager:h.DI.cfg("UserManager"),offerType:"saleDoubleCoins",caller:(0,_.caller)([[ve.ShowCandyvalleyShopWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[ve.ShowCandyvalleyShopWindowAction.CALLER_AD,s.ACTIONS.WATCH_AD],[ve.ShowCandyvalleyShopWindowAction.CALLER_SALE_MORE_OFFERS,s.ACTIONS.WINDOW_COINS_SHOP_FORCE,{showTimer:!0}]]),showMoreOffersButton:!0,barMode:be.Bars.currency,di:h.DI.self()}))])}),c[s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_SALE_UNLIMITED_LIVES_SHOP,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["shop"]})),h.DI.instance(ve.ShowCandyvalleyShopWindowAction,(0,_.windowAction)({window:"shop",offerManager:h.DI.cfg("OfferManager"),userManager:h.DI.cfg("UserManager"),offerType:"saleUnlimitedLives",caller:(0,_.caller)([[ve.ShowCandyvalleyShopWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[ve.ShowCandyvalleyShopWindowAction.CALLER_AD,s.ACTIONS.WATCH_AD],[ve.ShowCandyvalleyShopWindowAction.CALLER_SALE_MORE_OFFERS,s.ACTIONS.WINDOW_COINS_SHOP_FORCE,{showTimer:!0}]]),showMoreOffersButton:!0,barMode:be.Bars.attempts,di:h.DI.self()}))])}),c[s.ACTIONS.PURCHASE_BOOSTER]=h.DI.instance(m.ShowBoosterShopWindowAction,(0,_.windowAction)({window:"boosterShop",paymentService:h.DI.cfg("PaymentService"),caller:(0,_.caller)([[m.ShowBoosterShopWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE]])})),c[s.ACTIONS.PUBLICATION]=h.DI.instance(A.PublicationAction,{publicationManager:h.DI.cfg("PublicationManager"),socialService:h.DI.cfg("SocialService")}),c[s.ACTIONS.CHECK_APPLICATION_PURCHASE]=h.DI.instance(I.CheckApplicationPurchaseAction,{userManager:h.DI.cfg("UserManager"),caller:(0,_.caller)([[I.CheckApplicationPurchaseAction.CALLER_PURCHASE,s.ACTIONS.PURCHASE],[I.CheckApplicationPurchaseAction.CALLER_NO_FUNDS,s.ACTIONS.WINDOW_NO_FUNDS]])}),c[s.ACTIONS.PURCHASE]=h.DI.instance(j.PurchaseAction,{paymentService:h.DI.cfg("PaymentService")}),c[s.ACTIONS.WINDOW_NO_FUNDS]=h.DI.instance(M.NoFundsAction,(0,_.windowAction)({window:"noFunds",caller:(0,_.caller)([[M.NoFundsAction.CALLER_COINS_SHOP,s.ACTIONS.WINDOW_COINS_SHOP]])})),c[s.ACTIONS.WATCH_AD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WATCH_AD,builders:h.DI.raw([h.DI.instance(Ue.SoundPauseResumeAction,{type:Ue.SoundPauseResumeAction.TYPE_PAUSE,audioManager:h.DI.cfg("AudioManager")}),h.DI.instance(L.WatchAdAction,{userManager:h.DI.cfg("UserManager"),adService:h.DI.cfg("RewardedAdService")}),h.DI.instance(Ue.SoundPauseResumeAction,{type:Ue.SoundPauseResumeAction.TYPE_RESUME,audioManager:h.DI.cfg("AudioManager")})])}),c[s.ACTIONS.INTERSTITIAL_WATCH_AD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.INTERSTITIAL_WATCH_AD,builders:h.DI.raw([h.DI.instance(Ue.SoundPauseResumeAction,{type:Ue.SoundPauseResumeAction.TYPE_PAUSE,audioManager:h.DI.cfg("AudioManager")}),h.DI.instance(L.WatchAdAction,{userManager:h.DI.cfg("UserManager"),adService:h.DI.cfg("InterstitialAdService")}),h.DI.instance(Ue.SoundPauseResumeAction,{type:Ue.SoundPauseResumeAction.TYPE_RESUME,audioManager:h.DI.cfg("AudioManager")})])}),c[s.ACTIONS.SHOW_BANNER_AD]=h.DI.instance(L.WatchAdAction,{userManager:h.DI.cfg("UserManager"),adService:h.DI.cfg("BannerAdService")}),c[s.ACTIONS.DO_SHOW_BANNER_AD]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("BannerAdCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.SHOW_BANNER_AD]])}),c[s.ACTIONS.AVAILABLE_NEW_EPISODE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.AVAILABLE_NEW_EPISODE,builders:h.DI.raw([h.DI.instance(F.LockInputAction,{backdropManager:h.DI.cfg("BackdropManager"),lockInput:!0}),h.DI.from("OpenEpisodeAction",{scrollToEpisode:!0}),h.DI.from("RunMetaGameScenarioAction",{scenario:"newEpisode"}),h.DI.instance(F.LockInputAction,{backdropManager:h.DI.cfg("BackdropManager"),lockInput:!1}),h.DI.instance(ze.InterstitialAdConditionAction,{actionKey:s.ACTIONS.AVAILABLE_NEW_EPISODE,condition:h.DI.cfg("InterstitialAdCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.INTERSTITIAL_WATCH_AD]])})])}),c[s.ACTIONS.SHOW_HARD_LEVEL_TUTORIAL]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.RUN_SCENE_EPISODIC,builders:h.DI.raw([h.DI.from("RunMetaGameScenarioAction",{scenario:"hardLevels"})])}),c[s.ACTIONS.OPEN_LAST_EPISODE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.OPEN_LAST_EPISODE,builders:h.DI.raw([h.DI.from("OpenEpisodeAction"),h.DI.from("RunMetaGameScenarioAction",{scenario:"noEpisode"}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("OpenLastEpisodeActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.NOTIFICATION_REQUEST,{reason:"levelsNotAvailable",ignoreCooldown:!0}]])})])}),c[s.ACTIONS.BEGIN_GAME]=h.DI.instance(se.ConditionalAction,{condition:h.DI.instance(function(){return{check:function(){return!("undefined"!=typeof window&&"undefined"!=typeof document&&new Me.URL(document.location.href).searchParams.get("editor"))}}}),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.BEGIN_GAME_TUTORIAL]])}),c[s.ACTIONS.BEGIN_GAME_TUTORIAL]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.BEGIN_GAME,builders:h.DI.raw([h.DI.from("RunMetaGameScenarioAction",{scenario:"beginGame"})])}),c[s.ACTIONS.START_LEVEL_DIRECTLY]=h.DI.instance(D.StartLevelAction,{moduleResolvers:{progress:(0,_.moduleResolver)("progress"),levels:(0,_.moduleResolver)("levels")},caller:(0,_.caller)([[D.StartLevelAction.CALLER_START,s.ACTIONS.START_MATCH3_GAME]])}),c[s.ACTIONS.START_LEVEL]=h.DI.instance(D.StartLevelAction,{moduleResolvers:{progress:(0,_.moduleResolver)("progress"),levels:(0,_.moduleResolver)("levels")},caller:(0,_.caller)([[D.StartLevelAction.CALLER_START,s.ACTIONS.CHECK_START_BOOSTER],[D.StartLevelAction.CALLER_NO_LEVEL,s.ACTIONS.NO_EPISODE]])}),c[s.ACTIONS.CHECK_START_BOOSTER]=h.DI.instance(Ie.CheckStartBoostersAction,{moduleResolvers:{progress:(0,_.moduleResolver)("progress")},userManager:h.DI.cfg("UserManager"),storage:h.DI.cfg("PlatformStorage"),caller:(0,_.caller)([[Ie.CheckStartBoostersAction.CALLER_START,s.ACTIONS.WINDOW_START_LEVEL]])}),c[s.ACTIONS.WINDOW_START_LEVEL]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_START_LEVEL,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["startLevelWithBoosters"]})),h.DI.instance(Re.ShowStartLevelWithBoostersWindowAction,(0,_.windowAction)({window:"startLevelWithBoosters",windowKeyResolvers:[h.DI.instance(l.StartLevelWindowKeyResolver,{windowKey:"startHardLevel",moduleResolvers:{levels:(0,_.moduleResolver)("levels")},conditionFunc:function(e){return!0===e.level.hard}})],moduleResolvers:{progress:(0,_.moduleResolver)("progress"),levels:(0,_.moduleResolver)("levels")},caller:(0,_.caller)([[Re.ShowStartLevelWithBoostersWindowAction.CALLER_CHECK_ATTEMPTS,s.ACTIONS.CHECK_ATTEMPTS],[Re.ShowStartLevelWithBoostersWindowAction.CALLER_PURCHASE_BOOSTER,s.ACTIONS.PURCHASE_BOOSTER]])})),h.DI.instance(Pe.CheckStartBoostersTutorialAction,{actionManager:h.DI.cfg("ActionManager")})])}),c[s.ACTIONS.SPEND_START_BOOSTER]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.SPEND_START_BOOSTER,builders:h.DI.raw([h.DI.instance(Te.StorageStartBoostersTutorialAction,{moduleResolvers:{progress:(0,_.moduleResolver)("progress")},userManager:h.DI.cfg("UserManager"),storage:h.DI.cfg("PlatformStorage")}),h.DI.instance(ke.SpendStartBoostersAction,{userManager:h.DI.cfg("UserManager"),caller:(0,_.caller)([[ke.SpendStartBoostersAction.CALLER_START_MATCH3_GAME,s.ACTIONS.START_MATCH3_GAME]])})])}),c[s.ACTIONS.COMPENSATION_START_BOOSTER]=h.DI.instance(Ne.CompensationStartBoostersAction,{userManager:h.DI.cfg("UserManager")}),c[s.ACTIONS.RUN_META_GAME_SCENARIO]=h.DI.from("RunMetaGameScenarioAction"),c[s.ACTIONS.CONTINUE_MATCH3_GAME]=h.DI.from("SequenceAction",{builders:h.DI.raw([h.DI.instance(Z.UpdateOfferStateAction,{offersModuleResolver:(0,_.moduleResolver)("offers"),offerKey:"moves"})])}),c[s.ACTIONS.CHECK_START_BOOSTER_2]=h.DI.instance(Ie.CheckStartBoostersAction,{moduleResolvers:{progress:(0,_.moduleResolver)("progress")},userManager:h.DI.cfg("UserManager"),storage:h.DI.cfg("PlatformStorage"),caller:(0,_.caller)([[Ie.CheckStartBoostersAction.CALLER_START,s.ACTIONS.REPEAT_MATCH3_GAME]])}),c[s.ACTIONS.REPEAT_MATCH3_GAME]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_START_LEVEL,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["startLevelWithBoosters"]})),h.DI.instance(Re.ShowStartLevelWithBoostersWindowAction,(0,_.windowAction)({window:"startLevelWithBoosters",windowKeyResolvers:[h.DI.instance(l.StartLevelWindowKeyResolver,{windowKey:"startHardLevel",moduleResolvers:{levels:(0,_.moduleResolver)("levels")},conditionFunc:function(e){return!0===e.level.hard}})],moduleResolvers:{progress:(0,_.moduleResolver)("progress"),levels:(0,_.moduleResolver)("levels")},caller:(0,_.caller)([[Re.ShowStartLevelWithBoostersWindowAction.CALLER_CHECK_ATTEMPTS,s.ACTIONS.CHECK_ATTEMPTS],[Re.ShowStartLevelWithBoostersWindowAction.CALLER_PURCHASE_BOOSTER,s.ACTIONS.PURCHASE_BOOSTER],[Re.ShowStartLevelWithBoostersWindowAction.CALLER_CLOSE,s.ACTIONS.RUN_META_GAME]])})),h.DI.instance(Pe.CheckStartBoostersTutorialAction,{actionManager:h.DI.cfg("ActionManager")})])}),c[s.ACTIONS.NEXT_MATCH3_GAME]=h.DI.instance(X.NextMatch3GameAction,{gameResolver:(0,_.gameResolver)(),moduleResolvers:{progress:(0,_.moduleResolver)("progress"),levels:(0,_.moduleResolver)("levels")},forceEndHandlers:[h.DI.instance(J.LevelHasPartForCraftGameForceEndHandler),h.DI.instance(Q.ProgressNotChangedGameForceEndHandler),h.DI.instance($.EpisodeEndedGameForceEndHandler),h.DI.instance(ee.StarsRewardReachedGameForceEndHandler),h.DI.instance(te.LevelIsHardAndNeedTutorialGameForceEndHandler,{userManager:h.DI.cfg("UserManager"),tutorialKey:ue.TUTORIALS.HARD_LEVEL}),h.DI.instance(ge.CakeRewardForceEndHandler),h.DI.instance(Ye.PiggybankForceEndHandler),h.DI.instance(Se.SpecialLevelsForceEndHandler)],caller:(0,_.caller)([[X.NextMatch3GameAction.CALLER_NEXT,s.ACTIONS.CHECK_START_BOOSTER_2],[X.NextMatch3GameAction.CALLER_END,s.ACTIONS.RUN_META_GAME]])}),c[s.ACTIONS.NO_EPISODE]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.NO_EPISODE,builders:h.DI.raw([h.DI.from("RunMetaGameScenarioAction",{scenario:"noEpisode"})])}),c[s.ACTIONS.CHECK_ATTEMPTS]=h.DI.instance(We.CheckAttemptsForLevelWithBoostersAction,{attemptsModuleResolver:(0,_.moduleResolver)("attempts"),caller:(0,_.caller)([[B.CheckAttemptsAction.CALLER_SUCCESS,s.ACTIONS.SPEND_START_BOOSTER],[B.CheckAttemptsAction.CALLER_FAIL,s.ACTIONS.WINDOW_LIVES_SHOP]])}),c[s.ACTIONS.WINDOW_SQUARE_TUTORIAL]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_SQUARE_TUTORIAL,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["tutorial-square"]})),h.DI.instance(Ce.ShowSpecialLevelTutorialWindowAction,(0,_.windowAction)({window:"tutorial-square",moduleResolvers:{levels:(0,_.moduleResolver)("levels")},storage:h.DI.cfg("PlatformStorage"),caller:(0,_.caller)([[Ce.ShowSpecialLevelTutorialWindowAction.CALLER_PLAY,s.ACTIONS.START_MATCH3_GAME]])}))])}),c[s.ACTIONS.START_MATCH3_GAME]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.START_MATCH3_GAME,builders:h.DI.raw([h.DI.instance(Ke.IncreaseLevelStartCountAction,{storage:h.DI.cfg("PlatformStorage"),storageKey:"levelStartCount",countForResetValue:Number.MAX_SAFE_INTEGER}),h.DI.instance(Ke.IncreaseLevelStartCountAction,{storage:h.DI.cfg("PlatformStorage"),storageKey:"levelStartCountPerSession",countForResetValue:Number.MAX_SAFE_INTEGER}),h.DI.instance(ze.InterstitialAdConditionAction,{actionKey:s.ACTIONS.START_MATCH3_GAME,condition:h.DI.cfg("InterstitialAdCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.INTERSTITIAL_WATCH_AD]])}),h.DI.instance(G.DecreaseAttemptsAction,{attemptsModuleResolver:(0,_.moduleResolver)("attempts")}),h.DI.instance(N.ResetModulesAction,{moduleResolvers:[(0,_.moduleResolver)("progress"),(0,_.moduleResolver)("score"),(0,_.moduleResolver)("stars")]}),h.DI.instance(W.ResetOfferStateAction,{offersModuleResolver:(0,_.moduleResolver)("offers"),offerKey:"moves"}),h.DI.instance(W.ResetOfferStateAction,{offersModuleResolver:(0,_.moduleResolver)("offers"),offerKey:"bombMoves"}),h.DI.instance(W.ResetOfferStateAction,{offersModuleResolver:(0,_.moduleResolver)("offers"),offerKey:"parrotFailWalk"}),h.DI.instance(H.StartMatch3GameAction,{sceneManager:h.DI.cfg("SceneManager"),sceneResourcesManager:h.DI.cfg("SceneResourcesManager"),levelsModuleResolver:(0,_.moduleResolver)("levels"),resourceMap:b.PrefabResourcesConfig,remoteConfig:h.DI.cfg("RemoteConfig"),storage:h.DI.cfg("PlatformStorage"),skinConfig:le.EntitySkinConfig,defaultResourcesKeys:["popcornExplodingPart","popcornPart","candy"]})])}),c[s.ACTIONS.FINISH_MATCH3_GAME]=h.DI.instance(V.FinishMatch3GameAction,{states:(r={},r[V.FinishMatch3GameAction.STATE_WIN]=v.WinLoseSystem.RESULT.WIN,r[V.FinishMatch3GameAction.STATE_LOSE]=v.WinLoseSystem.RESULT.LOSE,r),caller:(0,_.caller)([[V.FinishMatch3GameAction.CALLER_WIN,s.ACTIONS.WIN_MATCH3_GAME],[ie.Match3Game.LOSE_REASONS.OUT_OF_MOVES,s.ACTIONS.LOSE_MATCH3_GAME,{loseLevelState:0,offersKey:"moves"}],[ie.Match3Game.LOSE_REASONS.BOMB_EXPLODE,s.ACTIONS.BOMB_EXPLODE_MATCH3_GAME,{loseLevelState:0,offersKey:"bombMoves"}],[ie.Match3Game.LOSE_REASONS.PARROT_FAIL_WALK,s.ACTIONS.PARROT_FAIL_WALK,{loseLevelState:0,offersKey:"parrotFailWalk"}],[ie.Match3Game.LOSE_REASONS.SHUFFLE_FAIL,s.ACTIONS.LOSE_MATCH3_GAME,{loseLevelState:1,offersKey:"moves"}]])}),c[s.ACTIONS.WIN_MATCH3_GAME]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WIN_MATCH3_GAME,builders:h.DI.raw([h.DI.instance(K.IncreaseAttemptsAction,{attemptsModuleResolver:(0,_.moduleResolver)("attempts")}),h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("WinMatch3ActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.PIGGYBANK_REPLENISHMENT_HANDLE]])}),h.DI.instance(U.IncreaseProgressByLevelAction,{metaGameResolver:(0,_.gameResolver)(),progressModuleResolver:(0,_.moduleResolver)("progress"),caller:(0,_.caller)([[U.IncreaseProgressByLevelAction.CALLER_ON_INCREASE,s.ACTIONS.AFTER_INCREASE_PROGRESS]])}),h.DI.instance(fe.ShowCakeWinLevelWindowAction,(0,_.windowAction)({moduleResolvers:{score:(0,_.moduleResolver)("score"),stars:(0,_.moduleResolver)("stars"),cakeReward:(0,_.moduleResolver)("cakeReward"),progress:(0,_.moduleResolver)("progress")},window:"winLevel",handleEventClose:!1,sharingDisabled:h.DI.cfg("SharingDisabled"),caller:(0,_.caller)([[fe.ShowCakeWinLevelWindowAction.CALLER_PUBLICATION,s.ACTIONS.PUBLICATION,{type:A.PublicationAction.TYPE_SHARE,key:"meta.common.publications.winMatch3Game"}],[fe.ShowCakeWinLevelWindowAction.CALLER_NEXT,s.ACTIONS.NEXT_MATCH3_GAME],[fe.ShowCakeWinLevelWindowAction.CALLER_CLOSE,s.ACTIONS.RUN_META_GAME]])})),h.DI.instance(we.SpecialLevelEndAction,{state:we.SpecialLevelEndAction.STATE_WIN})])}),c[s.ACTIONS.AFTER_INCREASE_PROGRESS]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.AFTER_INCREASE_PROGRESS,builders:h.DI.raw([h.DI.instance(C.MetaTaskAction,{metaTaskManager:h.DI.cfg("MetaTaskManager"),metaGameManager:h.DI.cfg("MetaGameManager"),event:de.WIN_LEVEL}),h.DI.instance(ye.UpdateCakeRewardMetaModuleAction,{moduleResolver:(0,_.moduleResolver)("cakeReward","common")})])}),c[s.ACTIONS.LOSE_MATCH3_GAME]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.LOSE_MATCH3_GAME,builders:h.DI.raw([h.DI.instance(we.SpecialLevelEndAction,{state:we.SpecialLevelEndAction.STATE_EXIT,storage:h.DI.cfg("PlatformStorage")}),h.DI.instance(Y.ShowLoseLevelWindowAction,(0,_.windowAction)({window:"loseLevel",moduleResolvers:{offers:(0,_.moduleResolver)("offers"),attempts:(0,_.moduleResolver)("attempts")},caller:(0,_.caller)([[Y.ShowLoseLevelWindowAction.CALLER_CONTINUE,s.ACTIONS.CONTINUE_MATCH3_GAME],[Y.ShowLoseLevelWindowAction.CALLER_WATCH_AD,s.ACTIONS.WATCH_AD],[Y.ShowLoseLevelWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[Y.ShowLoseLevelWindowAction.CALLER_REPEAT,s.ACTIONS.CHECK_START_BOOSTER_2],[Y.ShowLoseLevelWindowAction.CALLER_EXIT,s.ACTIONS.RUN_META_GAME],[Y.ShowLoseLevelWindowAction.CALLER_DEFEAT,s.ACTIONS.LOG_MATCH3_GAME_LOSE]])}))])}),c[s.ACTIONS.BOMB_EXPLODE_MATCH3_GAME]=h.DI.instance(z.ShowLoseLevelBombExplodeWindowAction,(0,_.windowAction)({window:"bombExplodeLevel",moduleResolvers:{offers:(0,_.moduleResolver)("offers"),attempts:(0,_.moduleResolver)("attempts")},caller:(0,_.caller)([[z.ShowLoseLevelBombExplodeWindowAction.CALLER_CONTINUE,s.ACTIONS.CONTINUE_MATCH3_GAME],[z.ShowLoseLevelBombExplodeWindowAction.CALLER_WATCH_AD,s.ACTIONS.WATCH_AD],[z.ShowLoseLevelBombExplodeWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[z.ShowLoseLevelBombExplodeWindowAction.CALLER_EXIT,s.ACTIONS.SHOW_BOMB_EXPLODE_MATCH3_GAME]])})),c[s.ACTIONS.PARROT_FAIL_WALK]=h.DI.instance(q.ShowParrotFailWalkWindowAction,(0,_.windowAction)({window:"parrotFailWalk",moduleResolvers:{offers:(0,_.moduleResolver)("offers"),attempts:(0,_.moduleResolver)("attempts")},caller:(0,_.caller)([[q.ShowParrotFailWalkWindowAction.CALLER_CONTINUE,s.ACTIONS.CONTINUE_MATCH3_GAME],[q.ShowParrotFailWalkWindowAction.CALLER_WATCH_AD,s.ACTIONS.WATCH_AD],[q.ShowParrotFailWalkWindowAction.CALLER_PURCHASE,s.ACTIONS.CHECK_APPLICATION_PURCHASE],[q.ShowParrotFailWalkWindowAction.CALLER_EXIT,s.ACTIONS.LOSE_MATCH3_GAME]])})),c[s.ACTIONS.SHOW_BOMB_EXPLODE_MATCH3_GAME]=h.DI.instance(_e.PlaySpineAnimationAction,{node:"scene/match3/tiles",spinePrefab:"prefabs-entities/bubblegum/bubblegum-explosion",delay:[.4,.25],fade:(i={},i[_e.PlaySpineAnimationAction.FADE_AFTER_END]=[2,0],i),sceneManager:h.DI.cfg("SceneManager"),callerOptions:["level"],caller:(0,_.caller)([[_e.PlaySpineAnimationAction.CALLER_END,s.ACTIONS.LOSE_MATCH3_GAME]])}),c[s.ACTIONS.EXIT_MATCH3_GAME]=h.DI.instance(ne.ShowExitLevelWindowAction,(0,_.windowAction)({window:"exitLevel",caller:(0,_.caller)([[ne.ShowExitLevelWindowAction.CALLER_EXIT,s.ACTIONS.LOSE_MATCH3_GAME]])})),c[s.ACTIONS.WINDOW_USER_ID]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_USER_ID,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["userId"]})),h.DI.instance(g.ShowUserIdWindowAction,(0,_.windowAction)({window:"userId"}))])}),c[s.ACTIONS.SHOW_INVITE]=h.DI.instance(oe.ShowInviteAction,{socialService:h.DI.cfg("SocialService")}),c[s.ACTIONS.WINDOW_NO_CONNECTION]=h.DI.instance(ae.NetworkErrorWindowAction,(0,_.windowAction)({window:"connectionLost"})),c[s.ACTIONS.WINDOW_SESSION_EXPIRED]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_SESSION_EXPIRED,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["sessionExpired"]})),h.DI.instance(ae.NetworkErrorWindowAction,(0,_.windowAction)({window:"sessionExpired",caller:(0,_.caller)([[ae.NetworkErrorWindowAction.CALLER_DEFAULT,s.ACTIONS.QUIT_FROM_APP]])}))])}),c[s.ACTIONS.QUIT_FROM_APP]=h.DI.instance(re.QuitFromAppAction,{socialService:h.DI.cfg("SocialService")}),c[s.ACTIONS.NOTIFICATION_REQUEST]=h.DI.instance(ce.NotificationRequestWindowAction,(0,_.windowAction)({window:"notificationRequest",windowTriggerEvent:"buttonClick",notificationAdapter:h.DI.cfg("NotificationAdapter"),storage:h.DI.cfg("PlatformStorage"),storageKey:"notificationCooldown",cooldownDuration:h.DI.instance(pe.TimeDuration,"P1D"),textPrefix:"window.notificationRequest.texts"})),c[s.ACTIONS.WEBVIEW]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WEBVIEW,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["webView"]})),h.DI.instance(d.ShowWebViewWindow,(0,_.windowAction)({window:"webView"}))])}),c[s.ACTIONS.SKINS]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.SKINS,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["skins"]})),h.DI.instance(me.SkinsWindowAction,(0,_.windowAction)({window:"skins",sceneManager:h.DI.cfg("SceneManager"),backdropManager:h.DI.cfg("BackdropManager"),storage:h.DI.cfg("PlatformStorage"),skinConfig:le.EntitySkinConfig}))])}),c[s.ACTIONS.WINDOW_CAKE_REWARD]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_CAKE_REWARD,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["cake-reward"]})),h.DI.instance(he.CakeRewardWindowAction,(0,_.windowAction)({window:"cake-reward",cakeRewardMetaModule:h.DI.instance(Fe.GetterToValue,h.DI.instance(De.MetaModuleGetter,h.DI.cfg("MetaGameManager"),"cakeReward")),cakeRewardMetaEvent:h.DI.instance(Fe.GetterToValue,h.DI.instance(Be.MetaEventGetter,h.DI.cfg("MetaEventManager"),"cakeReward")),lootBoxUnpacker:h.DI.cfg("LootBoxUnpacker"),userManager:h.DI.cfg("UserManager"),backdropManager:h.DI.cfg("BackdropManager")}))])}),c[s.ACTIONS.LOG_MATCH3_GAME_LOSE]=h.DI.instance(u.LogMatch3GameLoseAction,{sceneManager:h.DI.cfg("SceneManager")}),c[s.ACTIONS.OPEN_COMMUNITY_URL]=h.DI.instance(je.OpenCommunityUrlAction,{}),c[s.ACTIONS.WINDOW_PIGGYBANK]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("WindowPiggybankActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.WINDOW_PIGGYBANK_TUTORIAL],[se.ConditionalAction.CALLER_FALSE,s.ACTIONS.WINDOW_PIGGYBANK_CONTENT]])}),c[s.ACTIONS.PIGGYBANK_REPLENISHMENT_HANDLE]=h.DI.instance(se.ConditionalAction,{condition:h.DI.cfg("PiggybankReplenishmentHandleActionCondition"),caller:(0,_.caller)([[se.ConditionalAction.CALLER_TRUE,s.ACTIONS.PIGGYBANK_REPLENISHMENT,{rewardKey:Le.PiggybankMetaModule.COINS_FOR_SPECIAL_LEVEL}],[se.ConditionalAction.CALLER_FALSE,s.ACTIONS.PIGGYBANK_REPLENISHMENT,{rewardKey:Le.PiggybankMetaModule.COINS_FOR_LEVEL}]])}),c[s.ACTIONS.WINDOW_PIGGYBANK_CONTENT]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_PIGGYBANK_CONTENT,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["piggybank"]})),h.DI.instance(Ae.PiggybankWindowAction,(0,_.windowAction)({window:"piggybank",strategyKey:"piggybank",piggybankModuleResolver:(0,_.moduleResolver)("piggybank","common"),actionManager:h.DI.cfg("ActionManager"),userManager:h.DI.cfg("UserManager"),offerManager:h.DI.cfg("OfferManager")}))])}),c[s.ACTIONS.WINDOW_PIGGYBANK_TUTORIAL]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_PIGGYBANK_TUTORIAL,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["piggybank-tutorial","piggybank"]})),h.DI.instance(Oe.PiggybankTutorialWindowAction,(0,_.windowAction)({window:"piggybank-tutorial",piggybankModuleResolver:(0,_.moduleResolver)("piggybank","common"),actionManager:h.DI.cfg("ActionManager")}))])}),c[s.ACTIONS.PIGGYBANK_REPLENISHMENT]=h.DI.instance(xe.PiggybankReplenishmentAction,{piggybankModuleResolver:(0,_.moduleResolver)("piggybank","common")}),c[s.ACTIONS.WINDOW_PLATFORM_PROMO_GIFT]=h.DI.from("SequenceAction",{contextKey:s.ACTIONS.WINDOW_PLATFORM_PROMO_GIFT,builders:h.DI.raw([h.DI.instance(He.PreloadWindowAction,(0,_.preloadWindowAction)({windowKeys:["platform-promo-gift"]})),h.DI.instance(Xe.PlatformPromoGiftWindowAction,(0,_.windowAction)({window:"platform-promo-gift",offerId:"vkPromoReward",giftTarget:"attempts-bar",offerManager:h.DI.cfg("OfferManager"),userManager:h.DI.cfg("UserManager"),caller:(0,_.caller)([[Xe.PlatformPromoGiftWindowAction.CONFIRM_GIFT,s.ACTIONS.PLATFORM_PROMO_GIFT_CONFIRMATION]])}))])}),c[s.ACTIONS.PLATFORM_PROMO_GIFT_CONFIRMATION]=h.DI.from("PlatformPromoGiftConfirmationAction"),c);n.ActionConfig=it,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)":"CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)","./CakeRewardWindowAction (scripts.actions)":"CakeRewardWindowAction (scripts.actions)","./CandyvalleyBarSceneComponent (scripts.scenes)":"CandyvalleyBarSceneComponent (scripts.scenes)","./CandyvalleyRunMetaGameAction (scripts.actions)":"CandyvalleyRunMetaGameAction (scripts.actions)","./CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)":"CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)","./CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":"CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","./CheckAttemptsForLevelWithBoostersAction (scripts.actions)":"CheckAttemptsForLevelWithBoostersAction (scripts.actions)","./CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":"CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","./CheckStartBoostersAction (scripts.actions)":"CheckStartBoostersAction (scripts.actions)","./CheckStartBoostersTutorialAction (scripts.actions)":"CheckStartBoostersTutorialAction (scripts.actions)","./CheckpointRewardAvailableWindowAction (scripts.actions)":"CheckpointRewardAvailableWindowAction (scripts.actions)","./CheckpointRewardUnavailableWindowAction (scripts.actions)":"CheckpointRewardUnavailableWindowAction (scripts.actions)","./CompensationStartBoostersAction (scripts.actions)":"CompensationStartBoostersAction (scripts.actions)","./ConditionalAction (@tapclap.game-kit.action-manager)":"ConditionalAction (@tapclap.game-kit.action-manager)","./CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":"CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DIConfig (scripts.config)":"DIConfig (scripts.config)","./DailyRewardWindowAction (scripts.actions)":"DailyRewardWindowAction (scripts.actions)","./DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":"DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","./EntitySkinConfig (scripts.config)":"EntitySkinConfig (scripts.config)","./EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","./FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)":"FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)","./FriendsScrollAdapter (scripts.windows.scroll-adapters)":"FriendsScrollAdapter (scripts.windows.scroll-adapters)","./GetterToValue (@tapclap.utils-js.getters)":"GetterToValue (@tapclap.utils-js.getters)","./IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":"IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","./IncreaseLevelStartCountAction (scripts.actions)":"IncreaseLevelStartCountAction (scripts.actions)","./IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)":"IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)","./InterstitialAdConditionAction (scripts.action-conditions)":"InterstitialAdConditionAction (scripts.action-conditions)","./LanguageSettingsWindowAction (scripts.actions)":"LanguageSettingsWindowAction (scripts.actions)","./LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","./LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","./LockInputAction (@tapclap.game-kit.action-manager.actions.ui)":"LockInputAction (@tapclap.game-kit.action-manager.actions.ui)","./LogMatch3GameLoseAction (scripts.actions)":"LogMatch3GameLoseAction (scripts.actions)","./Match3Game (scripts.common.match3-game)":"Match3Game (scripts.common.match3-game)","./MessageCenterSceneBadgeComponent (scripts.badges)":"MessageCenterSceneBadgeComponent (scripts.badges)","./MessageCenterWindowAction (scripts.actions)":"MessageCenterWindowAction (scripts.actions)","./MessagesScrollAdapter (scripts.windows.scroll-adapters)":"MessagesScrollAdapter (scripts.windows.scroll-adapters)","./MetaEventGetter (scripts.getters)":"MetaEventGetter (scripts.getters)","./MetaModuleGetter (@tapclap.game-kit.getters)":"MetaModuleGetter (@tapclap.game-kit.getters)","./MetaTaskAction (@tapclap.game-kit.meta-task-manager)":"MetaTaskAction (@tapclap.game-kit.meta-task-manager)","./MetaTaskConfig (scripts.config)":"MetaTaskConfig (scripts.config)","./NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)":"NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)","./NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)":"NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)","./NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)":"NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)","./NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)":"NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)","./OpenCommunityUrlAction (scripts.actions)":"OpenCommunityUrlAction (scripts.actions)","./PiggybankForceEndHandler (scripts.meta.modules.piggybank)":"PiggybankForceEndHandler (scripts.meta.modules.piggybank)","./PiggybankMetaModule (scripts.meta.modules.piggybank)":"PiggybankMetaModule (scripts.meta.modules.piggybank)","./PiggybankReplenishmentAction (scripts.actions)":"PiggybankReplenishmentAction (scripts.actions)","./PiggybankTutorialWindowAction (scripts.actions)":"PiggybankTutorialWindowAction (scripts.actions)","./PiggybankWindowAction (scripts.actions)":"PiggybankWindowAction (scripts.actions)","./PlatformPromoGiftWindowAction (scripts.actions)":"PlatformPromoGiftWindowAction (scripts.actions)","./PlaySpineAnimationAction (scripts.actions)":"PlaySpineAnimationAction (scripts.actions)","./PrefabResourcesConfig (scripts.config)":"PrefabResourcesConfig (scripts.config)","./PreloadWindowAction (scripts.actions)":"PreloadWindowAction (scripts.actions)","./ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","./PublicationAction (@tapclap.game-kit.action-manager.actions.publication)":"PublicationAction (@tapclap.game-kit.action-manager.actions.publication)","./PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)":"PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)","./QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)":"QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)","./ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)":"ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)","./RequestLivesMessageEventHandler (scripts.message-center.event-handlers)":"RequestLivesMessageEventHandler (scripts.message-center.event-handlers)","./ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)","./ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)","./RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)":"RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)","./SceneBadgeRefresher (scripts.badges)":"SceneBadgeRefresher (scripts.badges)","./SendLivesMessageEventHandler (scripts.message-center.event-handlers)":"SendLivesMessageEventHandler (scripts.message-center.event-handlers)","./ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","./ShowCakeWinLevelWindowAction (scripts.actions)":"ShowCakeWinLevelWindowAction (scripts.actions)","./ShowCandyvalleyShopWindowAction (scripts.actions)":"ShowCandyvalleyShopWindowAction (scripts.actions)","./ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":"ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","./ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":"ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","./ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":"ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","./ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","./ShowFriendsWindowAction (scripts.actions)":"ShowFriendsWindowAction (scripts.actions)","./ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)":"ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)","./ShowLoseLevelBombExplodeWindowAction (scripts.actions)":"ShowLoseLevelBombExplodeWindowAction (scripts.actions)","./ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","./ShowMenuWindowAction (scripts.actions)":"ShowMenuWindowAction (scripts.actions)","./ShowParrotFailWalkWindowAction (scripts.actions)":"ShowParrotFailWalkWindowAction (scripts.actions)","./ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)":"ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)","./ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)":"ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)","./ShowStartLevelWithBoostersWindowAction (scripts.actions)":"ShowStartLevelWithBoostersWindowAction (scripts.actions)","./ShowUserIdWindowAction (scripts.actions)":"ShowUserIdWindowAction (scripts.actions)","./ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)":"ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)","./SkinsWindowAction (scripts.actions)":"SkinsWindowAction (scripts.actions)","./SoundPauseResumeAction (scripts.actions)":"SoundPauseResumeAction (scripts.actions)","./SpecialLevelEndAction (scripts.actions.special-levels)":"SpecialLevelEndAction (scripts.actions.special-levels)","./SpecialLevelRewardWindowAction (scripts.actions.special-levels)":"SpecialLevelRewardWindowAction (scripts.actions.special-levels)","./SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)":"SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)","./SpendStartBoostersAction (scripts.actions)":"SpendStartBoostersAction (scripts.actions)","./StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","./StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)":"StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)","./StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)":"StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)","./StartMatch3GameAction (scripts.actions)":"StartMatch3GameAction (scripts.actions)","./StorageStartBoostersTutorialAction (scripts.actions)":"StorageStartBoostersTutorialAction (scripts.actions)","./ThousandthsLevelRewardWindowAction (scripts.actions)":"ThousandthsLevelRewardWindowAction (scripts.actions)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./TutorialConfig (scripts.config)":"TutorialConfig (scripts.config)","./URL (@tapclap.utils-js.url)":"URL (@tapclap.utils-js.url)","./UpdateCakeRewardMetaModuleAction (scripts.actions)":"UpdateCakeRewardMetaModuleAction (scripts.actions)","./UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)":"UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)","./WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)":"WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)","./WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)":"WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"ActionConstants (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"f7cc6N35PZU5bQ6qXMi58b7","ActionConstants (scripts.config)"),n.__esModule=!0,n.ACTIONS=void 0,n.ACTIONS={WINDOW:"window.open",WINDOW_DAILY_REWARD:"window.dailyReward.open",WINDOW_MENU:"window.menu.open",WINDOW_FRIENDS:"window.friends.open",WINDOW_MESSAGE_CENTER:"window.messageCenter.open",WINDOW_LANGUAGE_SETTINGS:"window.languageSettings.open",WINDOW_LIVES_SHOP:"window.livesShop.open",WINDOW_COINS_SHOP:"window.coinsShop.open",WINDOW_SALE_UNLIMITED_LIVES_SHOP_CHECK:"window.saleUnlimitedLivesShop.open",WINDOW_COINS_SHOP_FORCE:"window.coinsShop.open.force",WINDOW_SALE_DOUBLE_COINS_SHOP:"window.saleShop.open",WINDOW_SALE_UNLIMITED_LIVES_SHOP:"window.saleShopUnlim.open",WINDOW_BOOSTER_SHOP:"window.boosterShop.open",WINDOW_NO_FUNDS:"window.noFunds.open",WINDOW_USER_ID:"window.userId",WINDOW_NO_CONNECTION:"window.connectionLost",WINDOW_SESSION_EXPIRED:"window.sessionExpired",RUN_META_GAME:"run.scene.metaGame",RUN_SCENE_EPISODIC:"run.scene.episodic",WINDOW_START_LEVEL:"window.startLevel.open",WINDOW_CRAFT_PART:"window.craftPart.open",WINDOW_CRAFT:"window.craft.open",WINDOW_EPISODES:"window.episodic.open",WINDOW_EPISODES_STARS_REWARD_AVAILABLE:"window.episodes.stars.reward.available",WINDOW_EPISODES_STARS_REWARD_UNAVAILABLE:"window.episodes.stars.reward.unavailable",AVAILABLE_NEW_EPISODE:"metaGame.availableNewEpisode",NO_EPISODE:"noEpisode",OPEN_LAST_EPISODE:"openLastEpisode",BEGIN_GAME:"beginGame",BEGIN_GAME_TUTORIAL:"beginGameTutorial",START_LEVEL:"startLevel",START_LEVEL_DIRECTLY:"startLevelDirectly",START_MATCH3_GAME:"start.match3",CHECK_ATTEMPTS:"check.attempts",CONTINUE_MATCH3_GAME:"continue.match3",FINISH_MATCH3_GAME:"finish.match3",WIN_MATCH3_GAME:"win.match3",LOSE_MATCH3_GAME:"lose.match3",LOG_MATCH3_GAME_LOSE:"log.match3.lose",BOMB_EXPLODE_MATCH3_GAME:"bombExplode.match3",SHOW_BOMB_EXPLODE_MATCH3_GAME:"showBombExplode.match3",PARROT_FAIL_WALK:"parrotFailWalk.match3",REPEAT_MATCH3_GAME:"window.nextLevel.open",NEXT_MATCH3_GAME:"next.match3",EXIT_MATCH3_GAME:"window.exitLevel.open",AFTER_INCREASE_PROGRESS:"afterIncreaseProgress",SHARE:"share",SHOW_INVITE:"showInvite",OPEN_COMMUNITY_URL:"openCommunityUrlAction",PLATFORM_PROMO_GIFT_CONFIRMATION:"platform.promo.gift.confirmation",PURCHASE:"purchase",PURCHASE_BOOSTER:"purchaseBooster",CHECK_APPLICATION_PURCHASE:"checkApplicationPurchase",WATCH_AD:"watchAd",INTERSTITIAL_WATCH_AD:"interstitialWatchAd",DO_SHOW_BANNER_AD:"doShowBannerAd",SHOW_BANNER_AD:"showBannerAd",RUN_META_GAME_SCENARIO:"metaGame.runScenario",QUIT_FROM_APP:"app.restart",PUBLICATION:"publication",NOTIFICATION_REQUEST:"notificationRequest",WEBVIEW:"webview",SKINS:"skins",SHOW_HARD_LEVEL_TUTORIAL:"showHardLevelsTutorial",CHECK_START_BOOSTER:"checkStartBooster",CHECK_START_BOOSTER_2:"checkStartBooster2",SPEND_START_BOOSTER:"spendStartBooster",CHECK_START_BOOSTER_TUTORIAL:"checkStartBoosterTutorial",COMPENSATION_START_BOOSTER:"compensationStartBooster",WINDOW_CAKE_REWARD:"window.cakeReward",WINDOW_PIGGYBANK:"window.piggybank",WINDOW_PIGGYBANK_CONTENT:"window.piggybank.content",WINDOW_PIGGYBANK_TUTORIAL:"window.piggybank.tutorial",PIGGYBANK_REPLENISHMENT_HANDLE:"piggybank.replenishment.handle",PIGGYBANK_REPLENISHMENT:"piggybank.replenishment",WINDOW_PLATFORM_PROMO_GIFT:"platform.promo.gift",FIRST_LEVEL_PLATFORM_PROMO_GIFT:"first.level.platform.promo.gift",WINDOW_SPECIAL_LEVELS_REWARD:"window.specialLevelsReward",WINDOW_SQUARE_TUTORIAL:"window.tutorial.square",WINDOW_THOUSANDTHS_LEVEL_REWARD:"window.thousandths.level.reward"},cc._RF.pop()},{}],"ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":[function(e,t,n){"use strict";cc._RF.push(t,"b98710gyEVdlY4Af6VRtssA","ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ActionDevConsoleCommand=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._actionManager=t.actionManager,n._action=t.action,n._actionBefore=t.actionBefore,n._options=t.options,n}return a(t,e),t.prototype.execute=function(){var e=this;return Promise.resolve().then(function(){return e._actionBefore&&e._actionBefore()}).then(function(){return e._actionManager.run(e._action,e._options)})},t}(e("./DevConsoleCommand (@tapclap.game-kit.devconsole)").DevConsoleCommand);n.ActionDevConsoleCommand=r,cc._RF.pop()},{"./DevConsoleCommand (@tapclap.game-kit.devconsole)":"DevConsoleCommand (@tapclap.game-kit.devconsole)"}],"ActionManager (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"75debFmcGJVBJVyOUCkgRpg","ActionManager (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.ActionManager=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(e){this._events=new o.EventEmitter,this._factory=e,this._replace=new Map}var t,n,r=e.prototype;return r._createAction=function(e,t){var n=e;if(this._replace.has(e)){var o=this._replace.get(e);o.once&&this._replace.delete(e),n=o.action}return this._factory.create(n,[t],{merge:!0,rawWrap:!0})},r.replace=function(e,t,n){void 0===n&&(n=!1),this._replace.set(e,{action:t,once:n})},r.run=function(e,t){void 0===t&&(t={});var n=this._createAction(e,t);if(n)return this.runInstance(n,e);throw new Error("Not found action by key: "+e)},r.runInstance=function(t,n){var o=this;return Promise.resolve().then(function(){return o.events.emit(e.EVENT_BEFORE_ACTION,n)}).then(function(){return t.run()}).then(function(){return o.events.emit(e.EVENT_AFTER_ACTION,n)}).catch(function(t){throw o.events.emit(e.EVENT_ERROR_ACTION,n,t),t})},t=e,(n=[{key:"events",get:function(){return this._events}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.ActionManager=r,r.EVENT_BEFORE_ACTION="beforeAction",r.EVENT_AFTER_ACTION="afterAction",r.EVENT_ERROR_ACTION="errorAction",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"650efnplJJPCrCq3vx9x2TG","ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.ActionScenarioProducer=void 0;var o=e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)"),a=e("./ScenarioBuilder (@tapclap.game-kit.scenario-manager)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n,o=t.actionManager;return(n=e.call(this)||this)._actionManager=o,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.produce=function(e){var t=this,n=new a.ScenarioBuilder;if(e.run){var o=e.run,r=o.action,i=o.options;n.addAction(function(){return t._actionManager.run(r,i)})}if(e.replace){var c=e.replace,s=c.action,p=c.newAction,l=c.once;n.addAction(function(){return t._actionManager.replace(s,p,l)})}return n.build()},o}(o.ScenarioProducer);n.ActionScenarioProducer=i,cc._RF.pop()},{"./ScenarioBuilder (@tapclap.game-kit.scenario-manager)":"ScenarioBuilder (@tapclap.game-kit.scenario-manager)","./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)"}],"ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"7d0b8wqkGRW2ZsWkFMVeiqN","ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ActionShopItemComponent=void 0;var i=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),c=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),s=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t}var n;return a(t,e),n=t,t.prototype.setLabel=function(e){this._label&&this._label.setString(e)},t.prototype.setButtonLabel=function(e){this._button.label=e},t.prototype.setAction=function(e){this._action=e},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._button.events.on(c.ButtonControlComponent.EVENT_CLICK,function(){t._windowLayout.window.events.emit(n.EVENT_SELECT,t._action)})},t.EVENT_SELECT="action",r([m({visible:!0,type:s.I18NLabel})],t.prototype,"_label",void 0),n=r([l],t)}(i.ShopItemComponent);n.ActionShopItemComponent=u,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"227eewhKIVZkYZIvwEZbDTk","ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ActionsDevConsoleMenuGenerator=void 0;var c=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),s=e("./ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),p=function(e){function t(t){var n=t.actionManager,o=t.actions,a=void 0===o?{}:o,r=e.call(this)||this;return r._actionManager=n,r._actions=a,r}return a(t,e),t.prototype.generate=function(){var e,t,n={};try{for(var o=r(Object.entries(this._actions)),a=o.next();!a.done;a=o.next()){var c=i(a.value,2),p=c[0],l=c[1],m="string"==typeof l?{title:l}:l;n[p]={title:m.title,closeBefore:!0,command:new s.ActionDevConsoleCommand({actionManager:this._actionManager,action:p,options:"options"in m?m.options:null,actionBefore:null})}}}catch(u){e={error:u}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t}(c.DevConsoleMenuGenerator);n.ActionsDevConsoleMenuGenerator=p,cc._RF.pop()},{"./ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"AdContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":[function(e,t,n){"use strict";cc._RF.push(t,"3be1aXuZEVeRIHmfbrQzfP7","AdContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.AdContentAnimationComponent=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)"),p=e("./FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelAnimationKeys=[],t}return a(t,e),t.prototype.runLabelAppearance=function(e){var t=i(this._labelAnimationKeys,4),n=t[0],o=t[1],a=t[2],r=t[3],s=cc.tween(e).delay(this._labelAppearanceDelay).parallel(cc.tween().to(n.animationKeysList[0].duration,{opacity:n.animationKeysList[0].opacity}).delay(n.animationKeysList[1].duration).to(n.animationKeysList[2].duration,{opacity:n.animationKeysList[2].opacity}),cc.tween().to(o.animationKeysList[0].duration,{scale:o.animationKeysList[0].scale}),cc.tween().by(a.animationKeysList[0].duration,{position:a.animationKeysList[0].position}),cc.tween().delay(r.animationKeysList[0].duration));return e.active=!0,c.PromisifyTween.start(s)},r([u({type:[p.ParallelAnimationKeys],visible:!0})],t.prototype,"_labelAnimationKeys",void 0),r([m],t)}(s.ContentAnimationComponent);n.AdContentAnimationComponent=d,cc._RF.pop()},{"./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":"ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","./FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":"FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"AdGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":[function(e,t,n){"use strict";cc._RF.push(t,"6f052KgtHRZEJ5POwgokeML","AdGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.AdGiftBoxAnimationComponent=void 0;var i=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),c=e("./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._box=null,t._glow=null,t._idleAnimationDelay=0,t._giftBoxOpeningDelay=0,t._giftBoxDisappearingDuration=0,t._giftBoxDisappearingDelay=0,t._glowSpinSpeed=0,t._glowDisappearingDuration=0,t._glowAppearingAnimation=null,t}var n;return a(t,e),n=t,t.prototype.runIdle=function(){var e=this;this.scheduleOnce(function(){e._box.loop=!0,e._box.setMix("static","glow",e._glowAppearanceDuration),e._box.animation="glow",e._glowAppearingAnimation=cc.tween(e._glow).to(e._glowAppearanceDuration,{opacity:i.AnimationKey.MAX_OPACITY}).start(),cc.tween(e._glow).by(n.MAX_GLOW_SPIN_SPEED-e._glowSpinSpeed,{angle:360}).repeatForever().start()},this._idleAnimationDelay)},t.prototype.prepareToOpen=function(){this._glowAppearingAnimation.stop(),cc.tween(this._glow).to(this._glowDisappearingDuration,{opacity:i.AnimationKey.MIN_OPACITY}).start()},t.prototype.runOpening=function(){var e=this;this._box.setMix("glow","static",this._glowDisappearanceDuration),this._box.animation="static",this._box.loop=!1,this.scheduleOnce(function(){e._box.animation="open_prolonged"},this._giftBoxOpeningDelay),cc.tween(this._box.node).delay(this._giftBoxDisappearingDelay).to(this._giftBoxDisappearingDuration,{opacity:i.AnimationKey.MIN_OPACITY}).start()},t.MIN_GLOW_SPIN_SPEED=0,t.MAX_GLOW_SPIN_SPEED=50,r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_box",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_glow",void 0),r([l({visible:!0})],t.prototype,"_idleAnimationDelay",void 0),r([l({visible:!0})],t.prototype,"_giftBoxOpeningDelay",void 0),r([l({visible:!0})],t.prototype,"_giftBoxDisappearingDuration",void 0),r([l({visible:!0})],t.prototype,"_giftBoxDisappearingDelay",void 0),r([l({visible:!0,slide:!0,min:n.MIN_GLOW_SPIN_SPEED,max:n.MAX_GLOW_SPIN_SPEED})],t.prototype,"_glowSpinSpeed",void 0),r([l({visible:!0})],t.prototype,"_glowDisappearingDuration",void 0),n=r([p],t)}(c.GiftBoxAnimationComponent);n.AdGiftBoxAnimationComponent=m,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":"GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"}],"AdProvider (@tapclap.sdk-x.ad-service)":[function(e,t,n){"use strict";cc._RF.push(t,"e47ccVIzzRbR69OXkkYIqZM","AdProvider (@tapclap.sdk-x.ad-service)"),n.__esModule=!0,n.AdProvider=void 0;var o=function(){function e(){}var t=e.prototype;return t.getType=function(){return this.constructor.PROVIDER_TYPE},t.isAvailable=function(){return!1},t.init=function(){return Promise.reject("Method not implemented")},t.loadAd=function(){return Promise.reject("Method not implemented")},t.showAd=function(){return Promise.reject("Method not implemented")},t.hideAd=function(){return Promise.resolve()},e}();n.AdProvider=o,o.PROVIDER_TYPE="unknown",cc._RF.pop()},{}],"AdRevenue (@tapclap.sdk-x.ad-service)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"cc511s6MpZRQIHYACWodxiT","AdRevenue (@tapclap.sdk-x.ad-service)"),n.__esModule=!0,n.AdRevenue=void 0;var a=function(){function e(e){var t=void 0===e?{}:e,n=t.provider,o=void 0===n?"":n,a=t.amount,r=void 0===a?0:a,i=t.currency,c=void 0===i?"":i,s=t.precision,p=void 0===s?void 0:s,l=t.adUnitId,m=void 0===l?"":l,u=t.network,d=void 0===u?"":u;this._provider=o,this._amount=r,this._currency=c,this._precision=p,this._adUnitId=m,this._network=d}var t,n,a=e.prototype;return a.isValid=function(){return this._amount>0&&!!this._currency},a.toJSON=function(){var e={provider:this.provider,amount:this.amount,currency:this.currency,adUnitId:this.adUnitId,network:this.network};return void 0!==this.precision&&(e.precision=this.precision),e},t=e,(n=[{key:"provider",get:function(){return this._provider}},{key:"amount",get:function(){return this._amount}},{key:"currency",get:function(){return this._currency}},{key:"precision",get:function(){return this._precision}},{key:"adUnitId",get:function(){return this._adUnitId}},{key:"network",get:function(){return this._network}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.AdRevenue=a,cc._RF.pop()},{}],"AdRewardComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"c096bh7CetZ0INIEAV8uL1o","AdRewardComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.AdRewardComponent=void 0;var i=e("./CoinsRewardComponent (scripts.windows.items.daily-reward.reward)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._rewardSpawnZeroPosition=new cc.Vec2,t._giftBox=null,t}return a(t,e),t.prototype.show=function(e){var t=e.giftBox;this._giftBox=t,this._setCoinsToRewardsList()},t.prototype.prepareRewardNode=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=1);var o=this._getCoinSpawnPosition(t,n);e.parent=this._giftBox.parent,e.active=!0,this._label.node.parent=this._giftBox,this._label.node.setPosition(0,335),this._animationsComponent.runLabelAppearance(this._label.node),e.setPosition(this._giftBox.getPosition().x+o.x,this._giftBox.getPosition().y+o.y),e.getComponent(sp.Skeleton).animation="extra reward prolonged"},t.prototype._getCoinSpawnPosition=function(e,t){var n=this._animationsComponent.coinsSpawnRadius/t*e,o=this._random.getFloat(-this._animationsComponent.coinsSpawnRadius+n,n),a=this._random.getFloat(-n,this._animationsComponent.coinsSpawnRadius-n);return cc.v2(this._rewardSpawnZeroPosition.x+o,this._rewardSpawnZeroPosition.y+a)},r([p({visible:!0})],t.prototype,"_rewardSpawnZeroPosition",void 0),r([s],t)}(i.CoinsRewardComponent);n.AdRewardComponent=l,cc._RF.pop()},{"./CoinsRewardComponent (scripts.windows.items.daily-reward.reward)":"CoinsRewardComponent (scripts.windows.items.daily-reward.reward)"}],"AdService (@tapclap.sdk-x.ad-service)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6aaefu/t4FTJ6BbrpU1Dp25","AdService (@tapclap.sdk-x.ad-service)"),n.__esModule=!0,n.AdService=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._provider=t,o._options=Object.assign({timeoutLoadAd:30,timeoutExpireAd:0,hasTimeoutFirstLoad:!1},n),o._hasAd=!1,o._loadingCount=0,o._loadTimeoutId=0,o._expireTimeoutId=0,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._reset=function(){this._hasAd=!1,this._loadingCount=0},r._getTimeoutLoadAd=function(){if(this._options.hasTimeoutFirstLoad||this._loadingCount>0){var e=this._options.timeoutLoadAd;if(e instanceof Array){var t=this._options.hasTimeoutFirstLoad?this._loadingCount:this._loadingCount-1;return t<e.length?e[t]:e[e.length-1]}return e}return 0},r._loadAd=function(e){var t=this;if(void 0===e&&(e=!1),this._hasAd=!1,this.isAvailable()){var n=e?0:this._getTimeoutLoadAd();this._loadingCount++,clearTimeout(this._loadTimeoutId),this._loadTimeoutId=setTimeout(function(){Promise.resolve().then(function(){return t.events.emit(a.EVENT_AD_START_LOAD)}).then(function(){return t._provider.loadAd()}).then(function(){return t._hasAd=!0}).then(function(){return t.events.emit(a.EVENT_AD_LOADED,{timeoutLoadAd:n})}).then(function(){return t._expireAd()}).catch(function(){return t._loadAd()})},1e3*n)}},r._expireAd=function(){var e=this;this.hasAd()&&this._options.timeoutExpireAd&&(clearTimeout(this._expireTimeoutId),this._expireTimeoutId=setTimeout(function(){e.hasAd()&&(e._reset(),Promise.resolve().then(function(){return e.events.emit(a.EVENT_AD_EXPIRED)}).then(function(){return e._loadAd()}))},1e3*this._options.timeoutExpireAd))},r.getProvider=function(){return this._provider},r.isAvailable=function(){return this._provider.isAvailable()},r.init=function(){var e=this;return Promise.resolve().then(function(){return e._provider.init()}).then(function(){return e._loadAd(!0)})},r.hasAd=function(){return this._hasAd},r.watchAd=function(){return console.warn("The AdService.watchAd() method is deprecated. Please use AdService.showAd() instead."),this.showAd()},r.showAd=function(){var e=this;return this._hasAd?(this._reset(),Promise.resolve().then(function(){return e.events.emit(a.EVENT_AD_START_WATCH)}).then(function(){return e._provider.showAd().catch(function(t){throw e.events.emit(a.EVENT_AD_FAIL_WATCH),t})}).then(function(t){return Promise.resolve().then(function(){return e.events.emit(a.EVENT_AD_WATCHED,t)}).then(function(){return e._loadAd()}).then(function(){return t})}).catch(function(t){throw e._loadAd(),t})):(this.events.emit(a.EVENT_NO_ADS),Promise.reject())},r.hideAd=function(){var e=this;return Promise.resolve().then(function(){return e._provider.hideAd()}).then(function(){return e.events.emit(a.EVENT_AD_STOP_WATCH)})},a}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.AdService=a,a.EVENT_AD_START_LOAD="adStartLoaded",a.EVENT_AD_LOADED="adLoaded",a.EVENT_AD_START_WATCH="adStartWatch",a.EVENT_AD_STOP_WATCH="adStopWatch",a.EVENT_AD_WATCHED="adWatched",a.EVENT_AD_EXPIRED="adExpired",a.EVENT_AD_FAIL_WATCH="adFailWatch",a.EVENT_NO_ADS="noAds",cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"9977buBQehCULUxzRN+Oy4b","AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.AdShopItemComponent=void 0;var o,a,r,i,c=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),s=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:cc.Node,visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_buttonUnavailable",i,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.setReward=function(e){var t=this;this._button.events.on(s.ButtonControlComponent.EVENT_CLICK,function(){t._windowLayout.window.events.emit(o.EVENT_SELECT,[e],t)}),this._setItems([e])},o}(c.ShopItemComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_buttonUnavailable",e)||e},f)).initializer&&(Object.defineProperty(u,"_buttonUnavailable",f),f=null),i=f,a=r))||a);n.AdShopItemComponent=v,v.EVENT_SELECT="selectAd",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c198fkPG/1WU7gzGUCCF3vg","AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),n.__esModule=!0,n.AddComponentsCompletionSystemAction=void 0;var c=function(e){var t,n;function a(t){var n,o=t.world,a=t.componentFactory,r=t.entityTypes,i=t.resetEntityTypes,c=void 0===i?[]:i,s=t.componentsConfig;return(n=e.call(this)||this)._world=o,n._factory=a,n._entityTypes=r,n._resetEntityTypes=c,n._componentsConfig=s,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._addComponents=function(e){for(var t=a.NOT_CHANGED,n=0,o=Object.keys(this._componentsConfig);n<o.length;n++){var r=o[n];e.removeComponent(r),e.addComponent(r,this._factory.create(r,this._componentsConfig[r])),t=a.CHANGED}return t===a.CHANGED&&this._resetEntityTypes.includes(e.type)?a.FORCE_RESET:t},r._action=function(e){return this._addComponents(e)},r.run=function(){for(var e=this,t=!1,n=this._world.getComponent("tiles").grid,r=0;r<n.rows;r++)for(var i=0;i<n.cols;i++)if(n.isContain(r,i))for(var c,s=n.getCell(r,i),p=o(s.entities.filter(function(t){var n=t.type;return e._entityTypes.includes(n)}));!(c=p()).done;){var l=c.value,m=this._action(l,s);if([a.CHANGED,a.FORCE_RESET].includes(m)&&(t=!0,m===a.FORCE_RESET))return!0}return t},a}(e("./CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)").CompletionSystemAction);n.AddComponentsCompletionSystemAction=c,c.NOT_CHANGED=Symbol("not_changed"),c.CHANGED=Symbol("changed"),c.FORCE_RESET=Symbol("reset"),cc._RF.pop()},{"./CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":"CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"}],"AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"f82cdUDanpZn6iLRO1mGp9+","AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AddComponentsLayersCompletionSystemAction=void 0;var i=e("./AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),c=function(e){function t(n){var o=e.call(this,n)||this;return o._direction=n.direction||t.UP,o}return a(t,e),t.prototype._action=function(e,n){var o,a,c=i.AddComponentsCompletionSystemAction.NOT_CHANGED;try{for(var s=r(n.entities),p=s.next();!p.done;p=s.next()){var l=p.value,m=this._direction===t.UP&&l.layer>e.layer,u=this._direction===t.DOWN&&l.layer<e.layer,d=this._direction===t.BOTH&&l.layer!==e.layer;if(m||d||u){var y=l;if(y){var f=this._addComponents(y);if([i.AddComponentsCompletionSystemAction.CHANGED,i.AddComponentsCompletionSystemAction.FORCE_RESET].includes(f)&&(c=i.AddComponentsCompletionSystemAction.CHANGED,f===i.AddComponentsCompletionSystemAction.FORCE_RESET))return i.AddComponentsCompletionSystemAction.CHANGED}}}}catch(h){o={error:h}}finally{try{p&&!p.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return c},t.UP=1,t.BOTH=0,t.DOWN=-1,t}(i.AddComponentsCompletionSystemAction);n.AddComponentsLayersCompletionSystemAction=c,cc._RF.pop()},{"./AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":"AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"}],"AddMovesComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7d6a3UMHatY1LummHHTECk6","AddMovesComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AddMovesComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="addMoves",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.AddMovesComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"e7742khyZVfMIRpQId0GhVG","AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AddMovesOnExplodeComponent=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._movesCount=t.movesCount,n._event=t.event,n}return a(t,e),Object.defineProperty(t.prototype,"movesCount",{get:function(){return this._movesCount},set:function(e){this._movesCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this._event},enumerable:!1,configurable:!0}),t.KEY="addMovesOnExplode",t}(e("./AddMovesComponent (@tapclap.match-x.engine.components)").AddMovesComponent);n.AddMovesOnExplodeComponent=r,cc._RF.pop()},{"./AddMovesComponent (@tapclap.match-x.engine.components)":"AddMovesComponent (@tapclap.match-x.engine.components)"}],"AddMultiplierMinValueEffect (scripts.common.match3-game.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"1490c0wjlBelLkezRmkGqQy","AddMultiplierMinValueEffect (scripts.common.match3-game.effects)"),n.__esModule=!0,n.AddMultiplierMinValueEffect=void 0;var o=e("./RemoveEntityEffect (@tapclap.match-x.engine.effects)"),a=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),r=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.apply=function(e){for(var t=e.getComponent("tiles").grid,n=new Map,o=0;o<t.rows;o++)for(var c=0;c<t.cols;c++)for(var s,p=i(t.getCell(o,c).entities);!(s=p()).done;){var l=s.value;if(!n.has(l)){var m=l.getEnabledComponent(a.MultiplierComponent.KEY);m&&(m.setMinValue(Math.min(m.getMaxValue(),m.getMinValue()+1)),m.setValue(m.getValue()+1),n.set(l,{targetEntity:l,value:m.getValue(),minValue:m.getMinValue(),input:this._input,affectedByBooster:"plusone"}))}}var u=Array.from(n.values());if(u.length)return e.setState(r.MultiplierSystem.STATE,u),!0},o}(o.RemoveEntityEffect);n.AddMultiplierMinValueEffect=l,cc._RF.pop()},{"./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./RemoveEntityEffect (@tapclap.match-x.engine.effects)":"RemoveEntityEffect (@tapclap.match-x.engine.effects)"}],"AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"3a38buLKohaLrbDc086AH5t","AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AddParrotOnGridAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),u=function(e){function t(t){var n=e.call(this)||this;return n._triggers=t.triggers,n._speed=t.speed,n._world=t.world,n}return a(t,e),t.prototype.build=function(e){var n,o,a,i;try{for(var u=r(this._triggers),d=u.next();!d.done;d=u.next()){var y=d.value;if(!this._triggers.includes(y))return}}catch(R){n={error:R}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}var f=[],h=(null==e?void 0:e.data.flat())||[];try{for(var g=r(h),v=g.next();!v.done;v=g.next()){var _=v.value,b=_.targetCell,C=_.newEntity,w=_.prevEntity,S=new c.AnimationFactory(C);if(S.hasAnimation(t.KEY_POST_FLY)){var E=b.getEnabledComponentByClass(s.RenderComponent).node.getPosition(),x=this._world.getEnabledComponentByClass(s.RenderComponent).node.height,A=C.getEnabledComponentByClass(s.RenderComponent).node,O=w.getEnabledComponentByClass(s.RenderComponent).node;A.setPosition(E.x,-x,0),f.push({target:C,animation:new p.ChainAnimation([new l.GroupAnimation([new m.ActionAnimation(cc.scaleTo(this._speed,0,0).easing(cc.easeBackIn()),O),new m.ActionAnimation(cc.moveTo(this._speed,E.x,E.y),A)]),S.createAnimation(t.KEY_POST_FLY)])})}}}catch(P){a={error:P}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(a)throw a.error}}return[f]},t.KEY_PRE_FLY="parrotPreFly",t.KEY_FLY="parrotFly",t.KEY_POST_FLY="parrotPostFly",t}(i.GameActionBuilder);n.AddParrotOnGridAnimationBuilder=u,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"359fdkbSdBYnIDOC9JNnxGp","AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AddScoreOnValueReduceComponent=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n.componentKey=t.componentKey,n}return a(t,e),t.KEY="addScoreOnValueReduce",t}(e("./ValueComponent (@tapclap.match-x.engine.components)").ValueComponent);n.AddScoreOnValueReduceComponent=r,cc._RF.pop()},{"./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)"}],"AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"bcca29k+PlWkoCscp71LPgF","AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.AffectNeighborStrategy=void 0;var o=function(){function e(){}return e.prototype.compare=function(){return!0},e}();n.AffectNeighborStrategy=o,cc._RF.pop()},{}],"AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"03659FyEoBSNZyOtZPn7OMl","AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AfterExplodeAnimationBuilder=void 0;var i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),s=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),p=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),l=function(e){function t(t){var n=e.call(this,{eventMap:t.eventMap})||this;return n._config=t.config,n}return a(t,e),t.prototype.build=function(e){var t,n,o,a=[];if(null==e?void 0:e.data)try{for(var c=r(e.data.flat()),l=c.next();!l.done;l=c.next()){var m=l.value.entity,u=this._config[m.type];u&&a.push(new i.AnimationData(m,new s.ActionAnimation(cc.delayTime(u),null===(o=m.getEnabledComponentByClass(p.RenderComponent))||void 0===o?void 0:o.node)))}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return[a]},t}(c.GameActionBuilder);n.AfterExplodeAnimationBuilder=l,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":[function(e,t,n){"use strict";cc._RF.push(t,"c8a59zOL09KKaOO9S8BSST0","AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),n.__esModule=!0,n.AfterLoseLevelState=void 0;var o,a,r,i,c,s,p,l,m=e("./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),u=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=cc._decorator,v=g.ccclass,_=g.property,b=(o=_({type:cc.Node,visible:!0}),a=_({type:u.ButtonControlComponent,visible:!0}),r=_({type:u.ButtonControlComponent,visible:!0}),v((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_attemptsHolder",s,y(t)),d(t,"_exitButton",p,y(t)),d(t,"_tryAgainButton",l,y(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=o.prototype;return a.setData=function(e){this._stateNodes=[],e.isCountableAttempts&&this._attemptsHolder&&this._stateNodes.push(this._attemptsHolder)},a.initialize=function(){var e=this;this._exitButton.events.on(u.ButtonControlComponent.EVENT_CLICK,function(){return e._windowLayout.window.events.emit(o.EVENT_EXIT)}),this._tryAgainButton.events.on(u.ButtonControlComponent.EVENT_CLICK,function(){return e._windowLayout.window.events.emit(o.EVENT_TRYAGAIN)})},o}(m.LoseLevelState),s=h(c.prototype,"_attemptsHolder",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h(c.prototype,"_exitButton",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=h(c.prototype,"_tryAgainButton",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.AfterLoseLevelState=b,b.EVENT_EXIT="exit",b.EVENT_TRYAGAIN="tryAgain",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"}],"AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"66bd6WW/o1UGa7AKsnZECp4","AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AfterTurnAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var n,o,a=[];if(e.data)try{for(var i=r(e.data),m=i.next();!m.done;m=i.next()){var u=m.value,d=null==u?void 0:u.emitterEntity;if(d&&!d.getEnabledComponentByClass(p.SkipAfterTurnAnimationComponent)){var y=[],f=new c.AnimationFactory(d),h=f.createAnimation(t.KEY_ACTION_BEFORE);h&&y.push(h);var g=f.createAnimation(t.KEY_ACTION);g&&y.push(g),g&&a.push(new s.AnimationData(d,new l.ChainAnimation(y)))}}}catch(v){n={error:v}}finally{try{m&&!m.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return[a]},t.KEY_ACTION="actionAfterTurn",t.KEY_ACTION_BEFORE="actionBeforeAfterTurn",t}(i.GameActionBuilder);n.AfterTurnAnimationBuilder=m,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)":"SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)"}],"AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"060ef2Fgh5U3bsR2InMEKUY","AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AllExplodeRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e){for(var t=[],n=0;n<e.rows;n++)for(var o=0;o<e.rows;o++)e.isContain(n,o)&&t.push(e.getCell(n,o));return[this.filter(t)]},t.KEY="all",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.AllExplodeRetriever=r,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"AllRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"af98cbzE+NVW5KoxFXwzGt3","AllRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.AllRetriever=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){for(var t=[],n=0;n<e.rows;n++)for(var o=0;o<e.rows;o++)e.isContain(n,o)&&t.push(e.getCell(n,o));return[t]},a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.AllRetriever=a,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"AllowWalkComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"61456avE2FaFZLmg9VIflmW","AllowWalkComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AllowWalkComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="allowWalk",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.AllowWalkComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"AlreadyCompletedLevelActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"af228QDsDxZf7wqWYzpsuoV","AlreadyCompletedLevelActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AlreadyCompletedLevelActionCondition=void 0;var r=function(e){function t(t){var n=t.levelsModuleResolver,o=t.progressModuleResolver,a=e.call(this)||this;return a._progress=o.get(),a._levels=n.get(),a}return a(t,e),t.prototype.check=function(){var e=this;return Promise.resolve().then(function(){return parseInt(e._progress.value)===parseInt(e._levels.getLastLevel().number)})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.AlreadyCompletedLevelActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"AnalyticsService (@tapclap.sdk-x.analytics-service)":[function(e,t,n){"use strict";cc._RF.push(t,"27a27PKaB1c4ZbxaQ1G5STe","AnalyticsService (@tapclap.sdk-x.analytics-service)"),Object.defineProperty(n,"__esModule",{value:!0}),n.AnalyticsService=void 0;var o=function(){function e(e){var t=e.provider;this._provider=t,this._isAvailable=!1}return e.prototype.isAvailable=function(){return this._isAvailable},e.prototype.init=function(){var e=this;return Promise.resolve().then(function(){e._isAvailable=!1}).then(function(){return e._provider.init()}).then(function(){e._isAvailable=!0})},e.prototype.setUserId=function(e){return this._provider.setUserId(e)},e.prototype.logEvent=function(e,t){return void 0===t&&(t={}),this._provider.logEvent(e,t)},e}();n.AnalyticsService=o,cc._RF.pop()},{}],"AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"07070Sk/Wxc/J7KhRmD7pF1","AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.AngrybubbleHealthLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){if("angrybubble"===e.bossName)return{health:{value:e.bossLife}}},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.AngrybubbleHealthLegacyLevelComponentRetriever=a,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"AnimatedLayout (@tapclap.game-kit.ui.layouts)":[function(e,t,n){"use strict";var o,a,r,i,c;function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3fc66R5n8VcVZqpwOiS7Sfz","AnimatedLayout (@tapclap.game-kit.ui.layouts)"),n.__esModule=!0,n.AnimatedLayout=void 0;var m,u,d,y,f=cc._decorator,h=f.property,g=f.ccclass,v=(o=(0,f.menu)("Game-Kit/ui/layouts/AnimatedLayout"),a=h({type:cc.Enum({HORIZONTAL:1,VERTICAL:2}),visible:!0}),g(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_type",c,p(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o}(cc.Component),m=i.prototype,u=[a],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_type",e)||e},y)).initializer&&(Object.defineProperty(m,"_type",y),y=null),c=y,r=i))||r)||r);n.AnimatedLayout=v,cc._RF.pop()},{}],"Animation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bf62epd8lJa67A7oYL1gkV9","Animation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.Animation=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._promiseResolve=null,t._promise=new Promise(function(e){t._promiseResolve=e}),t._resolve=function(){t._promiseResolve&&(t._promiseResolve(),t._promiseResolve=null)},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.run=function(){return this._promise},s.stop=function(){return this._resolve(),this._promise},s.skip=function(){this._resolve()},i=r,(c=[{key:"wait",get:function(){return this._promise}},{key:"settled",get:function(){return this._promise}},{key:"active",get:function(){return!0}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.Animation=r,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"AnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f1585JPQSNRv6JcWAEHk5z9","AnimationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationComponent=void 0;var r=function(e){function t(t){var n=t.resolver,o=e.call(this)||this;return o._animations=[],o._settledAnimations=[],o._taggedAnimations={},o._animations=[],o._settledAnimations=[],o._resolver=n,o}return a(t,e),Object.defineProperty(t.prototype,"resolver",{get:function(){return this._resolver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"settled",{get:function(){return Promise.all(this._settledAnimations.map(function(e){return e.settled})).then(function(){return Promise.resolve()})},enumerable:!1,configurable:!0}),t.prototype.addAnimation=function(e){this._animations.push(e),this._settledAnimations.push(e)},t.prototype.addTaggedAnimation=function(e,t){var n;this._taggedAnimations[e]=null!==(n=this._taggedAnimations[e])&&void 0!==n?n:[],this._taggedAnimations[e].push(t)},t.prototype.getAnimationsByTag=function(e){var t;return null!==(t=this._taggedAnimations[e])&&void 0!==t?t:[]},t.prototype.removeAnimation=function(e){this._animations.splice(this._animations.indexOf(e),1)},t.prototype.removeSettledAnimation=function(e){this._settledAnimations.splice(this._settledAnimations.indexOf(e),1)},t.prototype.removeTaggedAnimation=function(e,t){this._taggedAnimations[e].splice(this._taggedAnimations[e].indexOf(t),1)},t.KEY="animation",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.AnimationComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"AnimationComponentCreator (@tapclap.match-x.engine.components.render)":[function(e,t,n){"use strict";cc._RF.push(t,"501c4Bf6sRZLrzgR2Zc9yeO","AnimationComponentCreator (@tapclap.match-x.engine.components.render)"),n.__esModule=!0,n.AnimationComponentCreator=void 0;var o=e("./ComponentCreator (@tapclap.match-x.engine.components)"),a=e("./AnimationComponent (@tapclap.match-x.engine.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n,o=t.animationResolverFactory;return(n=e.call(this)||this)._animationResolverFactory=o,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.create=function(e){return void 0===e&&(e={}),e.resolver=e.resolver||"default",new a.AnimationComponent(Object.assign({},e,{resolver:this._animationResolverFactory.create(e.resolver)}))},o}(o.ComponentCreator);n.AnimationComponentCreator=i,cc._RF.pop()},{"./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./ComponentCreator (@tapclap.match-x.engine.components)":"ComponentCreator (@tapclap.match-x.engine.components)"}],"AnimationCreator (@tapclap.match-x.cocos.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"3271b2fxeRRUZev/REiFe0H","AnimationCreator (@tapclap.match-x.cocos.animations.creators)"),n.__esModule=!0,n.AnimationCreator=void 0;var o=function(){function e(){}return e.prototype.create=function(){throw new Error("Method create not overrided")},e}();n.AnimationCreator=o,cc._RF.pop()},{}],"AnimationData (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"14afdegvfJUi6RtmaExSbXR","AnimationData (@tapclap.match-x.cocos.animations)"),Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationData=void 0;var o=function(){function e(e,t,n){void 0===n&&(n=null),this._tag=null,this._target=e,this._animation=t,this._tag=n}return Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!1,configurable:!0}),e}();n.AnimationData=o,cc._RF.pop()},{}],"AnimationFactory (@tapclap.match-x.engine.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"813d7b75jFfwoRbx2Wa8dvp","AnimationFactory (@tapclap.match-x.engine.animation-factory)"),Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationFactory=void 0;var o=e("./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),a=e("./IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)"),r=e("./AnimationComponent (@tapclap.match-x.engine.components)"),i=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),c=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=function(){function e(e){this._entity=e}return Object.defineProperty(e.prototype,"_factory",{get:function(){return this._node&&(this._node.getComponent(o.AnimationFactoryComponent)||this._node.addComponent(o.AnimationFactoryComponent))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_node",{get:function(){return this._entity.getComponentByClass(i.RenderComponent).node},enumerable:!1,configurable:!0}),e.prototype.createAnimation=function(e,t){void 0===t&&(t={});var n=this.getAnimationItems(e);if(n.length>0)return new c.GroupAnimation(n.map(function(e){return e.create(t)}))},e.prototype.hasAnimation=function(e){return!!this.createAnimation(e)},e.prototype.getAnimationItem=function(e){var t=this.getAnimationItems(e);return t.length>0?t[0]:null},e.prototype.getAnimationItems=function(e){if(this._node){var t=this._entity.getComponentByClass(r.AnimationComponent);if(t){var n=t.resolver;if(n)return this._factory.getAnimationItems(n.getAnimationKey(e,this._entity))}}return[]},e.prototype.getIdleAnimator=function(){return this._node&&(this._node.getComponent(a.IdleAnimator)||this._node.addComponent(a.IdleAnimator))},e}();n.AnimationFactory=s,cc._RF.pop()},{"./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)":"IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"c51e9rJ+ZdGroaFSJZpsjFi","AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.AnimationFactoryComponent=void 0;var o,a,r,i,c,s=e("./ViewComponent (@tapclap.match-x.cocos.components)"),p=e("./AnimationItem (@tapclap.match-x.cocos.components.animation-factory)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y,f,h,g,v=cc._decorator,_=v.ccclass,b=v.property,C=(o=(0,v.menu)("Match-X/AnimationFactoryComponent"),a=b({type:[p.AnimationItem],visible:!0}),_(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_items",c,u(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a,r,i=o.prototype;return i.getAnimationItem=function(e){return this._items.find(function(t){return t.key===e&&t.hasAnimation()})},i.getAnimationItems=function(e){return this._items.filter(function(t){return t.key===e&&t.hasAnimation()})},a=o,(r=[{key:"items",get:function(){return this._items}}])&&m(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(s.ViewComponent),y=i.prototype,f=[a],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},g={},Object.keys(h).forEach(function(e){g[e]=h[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),void 0===(g=f.slice().reverse().reduce(function(e,t){return t(y,"_items",e)||e},g)).initializer&&(Object.defineProperty(y,"_items",g),g=null),c=g,r=i))||r)||r);n.AnimationFactoryComponent=C,cc._RF.pop()},{"./AnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"AnimationItem (@tapclap.match-x.cocos.components.animation-factory)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"AnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"cac1dKpTVJHbIpOkWQDSJNj","AnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.AnimationItem=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A=e("./ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),O=e("./SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),R=e("./SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),P=e("./SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)");function k(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var M=cc._decorator,j=M.ccclass,L=M.property,F=((o={})[2]=R.SpineAnimationItem,o[1]=A.ClipAnimationItem,o[3]=O.SpriteAnimationItem,o[4]=P.SpriteAtlasAnimationItem,o),D=(a=j("AnimationItem"),r=L({tooltip:"\u042d\u0442\u043e idle-animation?",visible:!0}),i=L({tooltip:"\u041f\u0435\u0440\u0435\u0442\u0438\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044e",visible:!0}),c=L({tooltip:"\u041f\u0435\u0440\u0435\u0442\u0438\u0440\u0430\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0442\u0430\u043a\u0443\u044e \u0436\u0435 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044e",visible:!0}),s=L({tooltip:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u043c",type:cc.Float,displayName:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043e\u0442 (\u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445)",visible:function(){return this._idle}}),p=L({tooltip:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u043c",type:cc.Float,displayName:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u0434\u043e (\u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445)",visible:function(){return this._idle}}),l=L({tooltip:"\u041a\u043b\u044e\u0447 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438",visible:!0}),m=L(cc.Node),u=L({tooltip:"\u0426\u0435\u043b\u0435\u0432\u0430\u044f \u043d\u043e\u0434\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u0430 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f",type:cc.Node}),d=L({tooltip:"\u0422\u0438\u043f \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438",type:cc.Enum({none:0,spine:2,clip:1,sprite:3,spriteAtlas:4}),serializable:!0}),y=L({type:D,visible:function(){return!!this._animationItem}}),a((g=I((h=function(){function e(){k(this,"_idle",g,this),k(this,"_overrideCurrent",v,this),k(this,"_overrideSame",_,this),k(this,"_delayFrom",b,this),k(this,"_delayTo",C,this),k(this,"_key",w,this),k(this,"_targetNode",S,this),k(this,"_type",E,this),k(this,"_animationItem",x,this)}var t,n,o=e.prototype;return o.hasAnimation=function(){return!!this._animationItem},o.create=function(e){var t={idle:this._idle,overrideCurrent:this._overrideCurrent,overrideSame:this._overrideSame,delayFrom:this._delayFrom||0,delayTo:this._delayTo||0};return this._animationItem.create(this._targetNode,Object.assign(t,e))},o.apply=function(){this._animationItem&&this._animationItem.apply(this._targetNode)},t=e,(n=[{key:"idle",get:function(){return this._idle}},{key:"delayFrom",get:function(){return this._delayFrom}},{key:"delayTo",get:function(){return this._delayTo}},{key:"key",get:function(){return this._key}},{key:"targetNode",get:function(){return this._targetNode},set:function(e){this._targetNode=e,this._animationItem&&(this._animationItem.targetNode=this._targetNode)}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this._type?(this._animationItem=new F[this._type],this._animationItem.targetNode=this._targetNode):this._animationItem=null}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"_idle",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=I(h.prototype,"_overrideCurrent",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=I(h.prototype,"_overrideSame",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=I(h.prototype,"_delayFrom",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=I(h.prototype,"_delayTo",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=I(h.prototype,"_key",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=I(h.prototype,"_targetNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I(h.prototype,"targetNode",[u],Object.getOwnPropertyDescriptor(h.prototype,"targetNode"),h.prototype),E=I(h.prototype,"_type",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I(h.prototype,"type",[d],Object.getOwnPropertyDescriptor(h.prototype,"type"),h.prototype),x=I(h.prototype,"_animationItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f);n.AnimationItem=D,cc._RF.pop()},{"./ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","./SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","./SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","./SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"}],"AnimationKey (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"4482cDaRDBXoqh9lMN2ohLi","AnimationKey (scripts.windows.items.daily-reward.animation)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationKey=n.AnimationParameters=void 0;var a=cc._decorator,r=a.ccclass,i=a.property;n.AnimationParameters={position:0,scale:1,opacity:2};var c=function(){function e(){this.duration=0,this._parameters=[],this.position=new cc.Vec2,this.scale=0,this.opacity=0}var t;return t=e,e.prototype._getParameterAvailability=function(e){return void 0!==this._parameters.find(function(t){return e===t})},e.DEFAULT_SCALE=1,e.MIN_OPACITY=0,e.MAX_OPACITY=255,e.QUAD_OUT_EASING="quadOut",e.QUAD_IN_OUT_EASING="quadInOut",o([i({min:0})],e.prototype,"duration",void 0),o([i({type:[cc.Enum({position:n.AnimationParameters.position,scale:n.AnimationParameters.scale,opacity:n.AnimationParameters.opacity})],visible:!0})],e.prototype,"_parameters",void 0),o([i({visible:function(){return this._getParameterAvailability(n.AnimationParameters.position)}})],e.prototype,"position",void 0),o([i({min:0,visible:function(){return this._getParameterAvailability(n.AnimationParameters.scale)}})],e.prototype,"scale",void 0),o([i({min:t.MIN_OPACITY,max:t.MAX_OPACITY,visible:function(){return this._getParameterAvailability(n.AnimationParameters.opacity)}})],e.prototype,"opacity",void 0),o([r("AnimationKey")],e)}();n.AnimationKey=c,cc._RF.pop()},{}],"AnimationResolver (@tapclap.match-x.engine.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"f0a6dGEMWNc/JosULpYbFI6","AnimationResolver (@tapclap.match-x.engine.animation-factory)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.AnimationResolver=void 0;var r=function(){function e(e){var t=void 0===e?{}:e,n=t.defaultTemplate,o=void 0===n?"$key":n,a=t.templates,r=void 0===a?{}:a,i=t.getters,c=void 0===i?{}:i;this._defaultTemplate=o,this._templates=r,this._getters=c}return e.prototype.getAnimationKey=function(e,t){var n,r,i=this._templates[e]||this._defaultTemplate;i=i.replace("$key",e);try{for(var c=o(Object.entries(this._getters)),s=c.next();!s.done;s=c.next()){var p=a(s.value,2),l=p[0],m=p[1],u=new RegExp("\\$"+l,"g");i=i.replace(u,m(t,e))}}catch(d){n={error:d}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return i},e.TYPE_STATIC="static",e.TYPE_IDLE="idle",e.TYPE_EXPLODE="explode",e.TYPE_EXPLODE_AFTER="explode:after",e.TYPE_RECOVERY="recovery",e.TYPE_FINAL="final",e.TYPE_BOUNCE="bounce",e.TYPE_SELECT="select",e.TYPE_WALK="walk",e.TYPE_EMITTING="emitting",e.TYPE_EMIT="emit",e.TYPE_EMIT_FLY="emitFly",e.TYPE_EMIT_LAND="emitLand",e.TYPE_START_ANIMATION="startAnimation",e}();n.AnimationResolver=r,cc._RF.pop()},{}],"AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"6c4acZpu9JK6Yg+iMLuua4h","AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.AnimationWindowLayoutComponent=void 0;var o,a,r,i,c=e("./BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m,u,d,y,f=cc._decorator,h=f.ccclass,g=(o=(0,f.property)({type:[c.BaseAnimationWindowLayoutComponent],visible:!0}),h((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_waitAnimations",i,p(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=o.prototype;return a._doRunAnimation=function(){this._resolve()},a._runAnimation=function(){var e=this;Promise.all(this._waitAnimations.map(function(e){return e.getAnimationPromise()})).then(function(){return e._doRunAnimation()})},o}(c.BaseAnimationWindowLayoutComponent),m=r.prototype,u=[o],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_waitAnimations",e)||e},y)).initializer&&(Object.defineProperty(m,"_waitAnimations",y),y=null),i=y,a=r))||a);n.AnimationWindowLayoutComponent=g,cc._RF.pop()},{"./BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"AppLoader (scripts.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"48537vZ34hVxp5lRJQgghqM","AppLoader (scripts.loader)"),Object.defineProperty(n,"__esModule",{value:!0}),n.AppLoader=void 0;var o=function(){function e(){}return e.prototype.beforeLoad=function(){return Promise.resolve()},e.prototype.afterLoad=function(){return Promise.resolve()},e}();n.AppLoader=o,cc._RF.pop()},{}],"ApplicationConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"ac6fe0WxZlSo6Z2Jt/h6kPJ","ApplicationConfig (scripts.config)");var o,a,r,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return c(t,e),t},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ApplicationConfig=void 0,e("./CocosPolyfills (@tapclap.utils-js.cocos-polyfills)");var l=e("./ActionCaller (@tapclap.game-kit.action-manager)"),m=e("./ActionManager (@tapclap.game-kit.action-manager)"),u=e("./OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),d=e("./RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)"),y=e("./SequenceAction (@tapclap.game-kit.action-manager)"),f=e("./AudioManager (@tapclap.game-kit.audio-manager)"),h=e("./CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)"),g=e("./ConfigService (@tapclap.game-kit.config-service)"),v=e("./ContextManager (@tapclap.game-kit.context-manager)"),_=e("./ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)"),b=e("./RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)"),C=e("./LocalStorage (@tapclap.game-kit.data-storage)"),w=e("./RuntimeStorage (@tapclap.game-kit.data-storage)"),S=e("./I18N (@tapclap.game-kit.i18n)"),E=e("./I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)"),x=e("./I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)"),A=e("./I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)"),O=e("./I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)"),R=e("./SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)"),P=e("./RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),k=e("./TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),T=e("./CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)"),I=e("./MetaModuleResolver (@tapclap.game-kit.meta-game)"),M=e("./MetaTaskManager (@tapclap.game-kit.meta-task-manager)"),j=e("./PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)"),L=e("./Offer (@tapclap.game-kit.offer-manager)"),F=e("./OfferFactory (@tapclap.game-kit.offer-manager)"),D=e("./OfferManager (@tapclap.game-kit.offer-manager)"),B=e("./OfferPayloadBuilder (@tapclap.game-kit.offer-manager)"),G=e("./CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)"),N=e("./HasAdOfferState (@tapclap.game-kit.offer-manager.states)"),W=e("./LimitOfferState (@tapclap.game-kit.offer-manager.states)"),H=e("./MinProgressOfferState (@tapclap.game-kit.offer-manager.states)"),V=e("./NoItemOfferState (@tapclap.game-kit.offer-manager.states)"),K=e("./PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)"),U=e("./CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)"),Y=e("./LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)"),z=e("./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)"),q=e("./ApplicationPaymentProvider (@tapclap.game-kit.payment)"),Z=e("./ApplicationPurchaseHandler (@tapclap.game-kit.payment)"),X=e("./ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),J=e("./ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),Q=e("./BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),$=e("./DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),ee=e("./HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),te=e("./InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),ne=e("./ScenarioManager (@tapclap.game-kit.scenario-manager)"),oe=e("./CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)"),ae=e("./EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)"),re=e("./SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)"),ie=e("./SceneManager (@tapclap.game-kit.scene-manager)"),ce=e("./SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)"),se=e("./SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)"),pe=e("./SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)"),le=e("./SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)"),me=e("./SceneTransition (@tapclap.game-kit.scene-manager.transitions)"),ue=e("./SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)"),de=e("./DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)"),ye=e("./QueueHttpGateway (@tapclap.game-kit.service-gateway)"),fe=e("./SyncService (@tapclap.game-kit.services)"),he=e("./I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)"),ge=e("./BackdropController (@tapclap.game-kit.ui.backdrop)"),ve=e("./BackdropManager (@tapclap.game-kit.ui.backdrop)"),_e=e("./LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)"),be=e("./NameplateManager (@tapclap.game-kit.ui.nameplate-manager)"),Ce=e("./BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)"),we=e("./UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)"),Se=e("./UIManager (@tapclap.game-kit.ui)"),Ee=e("./WindowController (@tapclap.game-kit.ui.window-manager)"),xe=e("./WindowFactory (@tapclap.game-kit.ui.window-manager)"),Ae=e("./WindowManager (@tapclap.game-kit.ui.window-manager)"),Oe=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),Re=e("./RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)"),Pe=e("./TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),ke=e("./UserItem (@tapclap.game-kit.user-item-manager)"),Te=e("./UserItemCollection (@tapclap.game-kit.user-item-manager)"),Ie=e("./UserItemFactory (@tapclap.game-kit.user-item-manager)"),Me=e("./UserItemManager (@tapclap.game-kit.user-item-manager)"),je=e("./User (@tapclap.game-kit.user-manager)"),Le=e("./UserManager (@tapclap.game-kit.user-manager)"),Fe=e("./UserSettings (@tapclap.game-kit.user-manager)"),De=e("./UserService (@tapclap.game-kit.user-service)"),Be=e("./AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)"),Ge=e("./MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)"),Ne=e("./AdService (@tapclap.sdk-x.ad-service)"),We=e("./AuthService (@tapclap.sdk-x.auth-service)"),He=e("./SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)"),Ve=e("./NotificationAdapter (@tapclap.sdk-x.notification)"),Ke=e("./CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)"),Ue=e("./PaymentService (@tapclap.sdk-x.payment-service)"),Ye=e("./MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)"),ze=e("./VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)"),qe=e("./MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)"),Ze=e("./PlatformLauncher (@tapclap.sdk-x.platform-launcher)"),Xe=e("./PublicationManager (@tapclap.game-kit.publication-manager)"),Je=e("./ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)"),Qe=e("./MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)"),$e=e("./MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)"),et=e("./SocialRequest (@tapclap.sdk-x.social-service)"),tt=e("./SocialService (@tapclap.sdk-x.social-service)"),nt=e("./UserInfo (@tapclap.sdk-x.social-service)"),ot=e("./DI (@tapclap.utils-js.di)"),at=e("./ObjectFactory (@tapclap.utils-js.di)"),rt=p(e("./Fetch (@tapclap.utils-js.fetch)")),it=e("./HttpClient (@tapclap.utils-js.http-client)"),ct=e("./Random (@tapclap.utils-js.random)"),st=e("./Service (@tapclap.utils-js.service)"),pt=e("./CakeRewardNameplate (scripts.meta.modules.daily-cake)"),lt=e("./CompositeReplaceOfferStrategy (scripts.offers)"),mt=e("./BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)"),ut=e("./BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)"),dt=e("./BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)"),yt=e("./ActionConfig (scripts.config)"),ft=e("./ActionConstants (scripts.config)"),ht=e("./ApplicationConfigShortcuts (scripts.config)"),gt=e("./ApplicationServerConfig (scripts.config)"),vt=e("./DevConsoleConfig (scripts.config)"),_t=s(e("./LocalConfig (scripts.config)")),bt=e("./MetaGameConfig (scripts.config)"),Ct=e("./OffersConfig (scripts.config)"),wt=e("./ProductsConfig (scripts.config)"),St=e("./PublicationConfig (scripts.config)"),Et=e("./WindowConfig (scripts.config)"),xt=e("./UserFactory (@tapclap.game-kit.user-service.factory)"),At=e("./DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)"),Ot=e("./CandyvalleyUserAuthHandler (scripts.auth-service)"),Rt=e("./WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)"),Pt=e("./StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"),kt=e("./StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"),Tt=e("./MockUtmProvider (@tapclap.sdk-x.utm.providers)"),It=e("./OffersStrategiesConfig (scripts.config)"),Mt=e("./PiggybankNameplate (scripts.meta.modules.piggybank)"),jt=e("./MetaEventConfig (scripts.config)"),Lt=e("./GetterToValue (@tapclap.utils-js.getters)"),Ft=e("./MetaEventGetter (scripts.getters)"),Dt=e("./MetaModuleGetter (@tapclap.game-kit.getters)"),Bt=e("./I18NAppLoader (scripts.loader)"),Gt=e("./WindowLazyLoader (scripts.loader)"),Nt=e("./SceneResourcesManager (scripts.scenes.scene-resources)"),Wt=e("./WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),Ht=e("./CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),Vt=e("./WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),Kt=e("./RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),Ut=e("./ActionConditionsConfig (scripts.config)"),Yt=e("./LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),zt=e("./I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)"),qt=e("./SyncRemoteConfigGetter (scripts.getters)"),Zt=e("./WindowsAppLoader (scripts.loader)"),Xt=e("./OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)"),Jt=e("./FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),Qt=e("./URL (@tapclap.utils-js.url)"),$t=e("./DateRangeOfferState (scripts.offers.states)"),en=e("./SalesOfferState (scripts.offers.states)"),tn=e("./GetterToDateRange (scripts.getters)"),nn=e("./ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)"),on=e("./PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)"),an=e("./DIConfig (scripts.config)"),rn=e("./MessageCenter (@tapclap.game-kit.message-center)"),cn=e("./CandyvalleyMessageService (scripts.message-center)"),sn=e("./CandyvalleyMessageHandler (scripts.message-center)"),pn=e("./SocialRequestWrapper (scripts.message-center.event-handlers)"),ln=e("./PlatformRemoteConfig (scripts.platform)"),mn=e("./FeatureOfferState (scripts.offers.states)"),un=((o={})[an.DIConfig.PlatformLauncher]=ot.DI.instance(Ze.PlatformLauncher),o[an.DIConfig.ConfigService]=ot.DI.singleton(g.ConfigService,gt.ApplicationServerConfig),o[an.DIConfig.NameplateManager]=ot.DI.singleton(be.NameplateManager,{actionManager:ot.DI.cfg(an.DIConfig.ActionManager),nameplates:{right:[ot.DI.instance(pt.CakeRewardNameplate,{key:"cake",metaEvent:ot.DI.instance(Lt.GetterToValue,ot.DI.instance(Ft.MetaEventGetter,ot.DI.cfg(an.DIConfig.MetaEventManager),"cakeReward"))})],left:[ot.DI.instance(Mt.PiggybankNameplate,{key:"piggybank",strategyKey:"piggybank",offerId:"piggybankAd",metaEvent:ot.DI.instance(Lt.GetterToValue,ot.DI.instance(Ft.MetaEventGetter,ot.DI.cfg(an.DIConfig.MetaEventManager),"piggybank")),piggybankMetaModule:ot.DI.instance(Lt.GetterToValue,ot.DI.instance(Dt.MetaModuleGetter,ot.DI.cfg(an.DIConfig.MetaGameManager),"piggybank")),offerManager:ot.DI.cfg(an.DIConfig.OfferManager)})]},handlers:{cake:{action:ft.ACTIONS.WINDOW_CAKE_REWARD},piggybank:{action:ft.ACTIONS.WINDOW_PIGGYBANK}}}),o[an.DIConfig.MetaTaskManager]=ot.DI.singleton(M.MetaTaskManager),o[an.DIConfig.UIManager]=ot.DI.singleton(Se.UIManager,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),sceneManager:ot.DI.cfg(an.DIConfig.SceneManager)}),o[an.DIConfig.LootBoxUnpacker]=ot.DI.singleton(_e.LootBoxUnpacker,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),uiManager:ot.DI.cfg(an.DIConfig.UIManager),uiHolderKeyResolver:ot.DI.instance(we.UIHolderKeyUserItemResolver,{aliases:{booster:"play",timebooster:"play",attempts:"attempts-bar"},defaultHolderKey:"coins-bar"})}),o[an.DIConfig.ContextManager]=ot.DI.singleton(v.ContextManager),o[an.DIConfig.ImagePublicationResolver]=ot.DI.instance(Je.ImagePublicationResolver,{map:St.ImageMap,params:{platformPrefix:"fbinstant"}}),o[an.DIConfig.PublicationManager]=ot.DI.singleton(Xe.PublicationManager,{resolvers:[ot.DI.instance(Qe.MessagePublicationResolver,{i18n:ot.DI.cfg(an.DIConfig.I18N),keys:["message","title"]}),ot.DI.cfg(an.DIConfig.ImagePublicationResolver)]}),o[an.DIConfig.AudioManager]=ot.DI.singleton(f.AudioManager,ot.DI.instance(h.CocosAudioEngine)),o[an.DIConfig.AudioEffectsPlayer]=ot.DI.instance(Be.AudioEffectsPlayer,{audioManager:ot.DI.cfg(an.DIConfig.AudioManager),userSettings:ot.DI.cfg(an.DIConfig.UserSettings)}),o[an.DIConfig.SceneManager]=ot.DI.singleton(ie.SceneManager,{di:ot.DI.self(),strategyFactory:ot.DI.cfg(an.DIConfig.SceneLoaderStrategyFactory)}),o[an.DIConfig.SceneTransitionFactory]=ot.DI.instance(ue.SceneTransitionFactory,{cloud:{class:me.SceneTransition,options:{prefab:"prefabs/transition/cloud"}}}),o[an.DIConfig.SceneLoaderStrategyFactory]=ot.DI.instance(pe.SceneLoaderStrategyFactory,{background:{class:ce.SceneLoaderBackgroundStrategy},progress:{class:se.SceneLoaderProgressStrategy,options:{transitionFactory:ot.DI.cfg(an.DIConfig.SceneTransitionFactory),transition:"cloud",preloadSceneName:"Preload"}},transition:{class:le.SceneLoaderTransitionStrategy,options:{transitionFactory:ot.DI.cfg(an.DIConfig.SceneTransitionFactory),transition:"cloud"}}}),o[an.DIConfig.EpisodeTargetResolver]=ot.DI.instance(ae.EpisodeTargetResolver,{hardLevelChecker:ot.DI.raw(function(e){return e.hard}),metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager)}),o[an.DIConfig.WindowTargetResolver]=ot.DI.instance(Rt.WindowTargetResolver,{windowManager:ot.DI.cfg(an.DIConfig.WindowManager)}),o[an.DIConfig.ScenarioManager]=ot.DI.singleton(ne.ScenarioManager,{backdrop:ot.DI.instance(Q.BackdropScenarioProducer,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager)}),highlight:ot.DI.instance(ee.HightlightScenarioProducer,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),sceneManager:ot.DI.cfg(an.DIConfig.SceneManager),targetResolver:ot.DI.instance(oe.CompositeTargetResolver,[ot.DI.instance(re.SceneHolderTargetResolver),ot.DI.cfg(an.DIConfig.EpisodeTargetResolver),ot.DI.cfg(an.DIConfig.WindowTargetResolver)])}),input:ot.DI.instance(te.InputScenarioProducer,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),sceneManager:ot.DI.cfg(an.DIConfig.SceneManager),targetResolver:ot.DI.instance(oe.CompositeTargetResolver,[ot.DI.instance(re.SceneHolderTargetResolver),ot.DI.cfg(an.DIConfig.EpisodeTargetResolver),ot.DI.cfg(an.DIConfig.WindowTargetResolver)])}),action:ot.DI.instance(X.ActionScenarioProducer,{actionManager:ot.DI.cfg(an.DIConfig.ActionManager)}),arrow:ot.DI.instance(J.ArrowScenarioProducer,{backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),sceneManager:ot.DI.cfg(an.DIConfig.SceneManager)}),dialog:ot.DI.instance($.DialogScenarioProducer,{sceneManager:ot.DI.cfg(an.DIConfig.SceneManager),backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager),i18n:ot.DI.cfg(an.DIConfig.I18N),targetResolver:ot.DI.instance(oe.CompositeTargetResolver,[ot.DI.instance(re.SceneHolderTargetResolver),ot.DI.cfg(an.DIConfig.EpisodeTargetResolver),ot.DI.cfg(an.DIConfig.WindowTargetResolver)]),translationHandler:ot.DI.instance(he.I18NTranslationHandler,ot.DI.cfg(an.DIConfig.I18N))}),fadeUI:ot.DI.instance(Jt.FadeUIScenarioProducer,{uiManager:ot.DI.cfg(an.DIConfig.UIManager),backdropManager:ot.DI.cfg(an.DIConfig.BackdropManager)})}),o[an.DIConfig.WindowConfig]=ot.DI.singleton(function(){return Et.WindowConfig}),o[an.DIConfig.WindowManager]=ot.DI.singleton(Ae.WindowManager,ot.DI.cfg(an.DIConfig.WindowFactory)),o[an.DIConfig.WindowController]=ot.DI.instance(Ee.WindowController),o[an.DIConfig.BackdropManager]=ot.DI.singleton(ve.BackdropManager,ot.DI.cfg(an.DIConfig.BackdropController)),o[an.DIConfig.BackdropController]=ot.DI.instance(ge.BackdropController),o[an.DIConfig.ScreenLocker]=ot.DI.singleton(Ce.BackdropScreenLocker,ot.DI.cfg(an.DIConfig.BackdropManager),"prefabs/ui/candy-spinner"),o[an.DIConfig.ActionManager]=ot.DI.singleton(m.ActionManager,ot.DI.cfg(an.DIConfig.ActionFactory)),o[an.DIConfig.WindowsAppLoader]=ot.DI.instance(Zt.WindowsAppLoader,{windowFactory:ot.DI.cfg(an.DIConfig.WindowFactory),windowsConfig:ot.DI.cfg(an.DIConfig.WindowConfig),handlers:[ot.DI.instance(Xt.OrientationWindowsAppLoaderHandler,{orientation:ot.DI.cfg(an.DIConfig["Config.Orientation"])}),ot.DI.instance(nn.ShopWindowAppLoaderHandler,{orientation:ot.DI.cfg(an.DIConfig["Config.Orientation"]),shopPrefabsPath:"windows/shop/prefabs"})]}),o[an.DIConfig.WindowFactory]=ot.DI.singleton(xe.WindowFactory,ot.DI.cfg(an.DIConfig.WindowConfig),ot.DI.cfg(an.DIConfig.AudioEffectsPlayer),{audio:{open:"openWindow"}}),o[an.DIConfig.ActionFactory]=ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw(yt.ActionConfig)),o[an.DIConfig.I18N]=ot.DI.singleton(S.I18N,{providers:{currentEpisode:ot.DI.instance(T.CurrentEpisodeTranslationSegmentProvider,ot.DI.cfg(an.DIConfig.MetaGameManager))},parsers:[ot.DI.instance(x.I18NParamsTemplateParser),ot.DI.instance(E.I18NDateTemplateParser,{prefix:"d",daysStartFrom:3,daysKey:"timeInDays"}),ot.DI.instance(A.I18NPluralTemplateParser,{prefix:"n"}),ot.DI.instance(O.I18NSexTemplateParser,{prefix:"s",socialService:ot.DI.cfg(an.DIConfig.SocialService),orderMap:[nt.UserInfo.SEX_NONE,nt.UserInfo.SEX_MALE,nt.UserInfo.SEX_FEMALE]}),ot.DI.instance(zt.I18NTimeTemplateParser,{prefix:"t",timeLtHour:3600,timeLtDay:86400,timeGtDay:86400})],random:ot.DI.instance(ct.Random),fallbackLanguage:"en"}),o[an.DIConfig.BoosterAnimationFactory]=ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw({trowel:ot.DI.instance(dt.BoosterTrowelAnimationCreator,{starPrefabPath:"prefabs/ui/MultiplierStar",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer)}),cart:ot.DI.instance(mt.BoosterCartAnimationCreator,{starPrefabPath:"prefabs/ui/MultiplierStar",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer),entityAnimationSettings:{"blocker-1":{delay:.16},candywrapper:{"explode-2-1":{delay:-.3}}}}),cat:ot.DI.instance(ut.BoosterCatAnimationCreator,{starPrefabPath:"prefabs/boosters/cat-entity-effect",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer)})})),o[an.DIConfig.HttpClient]=ot.DI.instance(it.HttpClient,rt.default,{headers:{"Content-Type":"application/json"},stringifyBody:!0,overrideMethods:["patch"]}),o[an.DIConfig.UserItemCollection]=ot.DI.instance(Te.UserItemCollection,{factory:ot.DI.cfg(an.DIConfig.UserItemFactory)}),o[an.DIConfig.OfferFactory]=ot.DI.instance(F.OfferFactory,ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw(((a={})[L.Offer.TYPE_PURCHASE]=ot.DI.instance(j.PurchaseOfferPayloadBuilder,{paymentService:ot.DI.cfg(an.DIConfig.PaymentService),userManager:ot.DI.cfg(an.DIConfig.UserManager)}),a[L.Offer.TYPE_AD]=ot.DI.instance(B.OfferPayloadBuilder),a[L.Offer.TYPE_EXPAND]=ot.DI.instance(B.OfferPayloadBuilder),a[L.Offer.TYPE_ACTION]=ot.DI.instance(B.OfferPayloadBuilder),a))),ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw({limit:ot.DI.instance(W.LimitOfferState),limitPerTime:ot.DI.instance(Y.LimitPerTimeOfferState,{userManager:ot.DI.cfg(an.DIConfig.UserManager)}),priceProgression:ot.DI.instance(K.PriceProgressionOfferState),hasAd:ot.DI.instance(N.HasAdOfferState,{adService:ot.DI.cfg(an.DIConfig.RewardedAdService)}),noItem:ot.DI.instance(V.NoItemOfferState,{userManager:ot.DI.cfg(an.DIConfig.UserManager)}),compareItemCount:ot.DI.instance(U.CompareItemCountOfferState,{userManager:ot.DI.cfg(an.DIConfig.UserManager)}),compareAttempts:ot.DI.instance(G.CompareAttemptsOfferState,{metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager)}),minProgress:ot.DI.instance(H.MinProgressOfferState,{metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager)}),sale:ot.DI.cfg(an.DIConfig.SalesState),saleDoubleCoinsDateRange:ot.DI.cfg(an.DIConfig.SaleDoubleCoinsState),saleUnlimitedLivesDateRange:ot.DI.cfg(an.DIConfig.SaleUnlimitedLivesState),hasFeatureFriends:ot.DI.instance(mn.FeatureOfferState,{value:ot.DI.cfg(an.DIConfig.FeatureFriends)})}))),o[an.DIConfig.SalesState]=ot.DI.instance(en.SalesOfferState,{salesOfferStates:[ot.DI.cfg(an.DIConfig.SaleDoubleCoinsState),ot.DI.cfg(an.DIConfig.SaleUnlimitedLivesState)],minProgressState:ot.DI.instance(H.MinProgressOfferState,{metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager),game:"common",module:"progress",value:17})}),o[an.DIConfig.SaleDoubleCoinsState]=ot.DI.singleton($t.DateRangeOfferState,{dateRange:ot.DI.cfg(an.DIConfig.SaleDoubleCoinsDateRange)}),o[an.DIConfig.SaleUnlimitedLivesState]=ot.DI.singleton($t.DateRangeOfferState,{dateRange:ot.DI.cfg(an.DIConfig.SaleUnlimitedLivesDateRange)}),o[an.DIConfig.OfferManager]=ot.DI.singleton(D.OfferManager,{coins:ot.DI.instance(lt.CompositeReplaceOfferStrategy,{strategies:It.OffersStrategiesConfig}),lives:ot.DI.instance(z.SimpleOfferStrategy,ot.DI.cfg(an.DIConfig.OfferFactory),Ct.LivesShopOffers),saleDoubleCoins:ot.DI.instance(z.SimpleOfferStrategy,ot.DI.cfg(an.DIConfig.OfferFactory),Ct.SaleOffers),saleUnlimitedLives:ot.DI.instance(z.SimpleOfferStrategy,ot.DI.cfg(an.DIConfig.OfferFactory),Ct.SaleUnlimitedLivesOffers),piggybank:ot.DI.instance(z.SimpleOfferStrategy,ot.DI.cfg(an.DIConfig.OfferFactory),Ct.PiggybankOffers),dailyReward:ot.DI.instance(z.SimpleOfferStrategy,ot.DI.cfg(an.DIConfig.OfferFactory),Ct.DailyRewardOffers)}),o[an.DIConfig.SaleDoubleCoinsDateRange]=ot.DI.singleton(tn.GetterToDateRange,ot.DI.instance(qt.SyncRemoteConfigGetter,{remoteConfig:ot.DI.cfg(an.DIConfig.SyncRemoteConfig),key:"saleDoubleCoinsDateRange",type:"json"})),o[an.DIConfig.SaleUnlimitedLivesDateRange]=ot.DI.singleton(tn.GetterToDateRange,ot.DI.instance(qt.SyncRemoteConfigGetter,{remoteConfig:ot.DI.cfg(an.DIConfig.SyncRemoteConfig),key:"saleUnlimitedLivesDateRange",type:"json"})),o[an.DIConfig.User]=ot.DI.instance(je.User,{items:ot.DI.instance(Me.UserItemManager,{itemCollection:ot.DI.cfg(an.DIConfig.UserItemCollection),defaultItems:[{spec:"currency",name:"coins",amount:500},{spec:"attempts",name:"lives",amount:5},{spec:"booster",name:"trowel",amount:3},{spec:"booster",name:"cat",amount:1},{spec:"booster",name:"cart",amount:1},{spec:"booster",name:"plusone",amount:5},{spec:"adsLimit",name:"shop-coins-30",amount:0},{spec:"adsLimit",name:"livesShop-1",amount:0},{spec:"adsLimit",name:"moves-3",amount:0},{spec:"adsLimit",name:"bombMoves-5",amount:0},{spec:"adsLimit",name:"parrotFailWalk-1",amount:0},{spec:"adsLimit",name:"piggybank",amount:0},{spec:"timebooster",name:"superTile",duration:0},{spec:"timebooster",name:"addmoves",duration:0},{spec:"timebooster",name:"candybomb",duration:0},{spec:"startbooster",name:"superTile",amount:3},{spec:"startbooster",name:"addmoves",amount:3},{spec:"startbooster",name:"candybomb",amount:3}],service:ot.DI.instance(fe.SyncService,{gateway:ot.DI.cfg(an.DIConfig.ServiceGateway),root:"user",endpoint:"items",adapter:ot.DI.cfg(an.DIConfig.RawStorageAdapter)}),itemService:ot.DI.instance(st.Service,{gateway:ot.DI.cfg(an.DIConfig.ServiceGateway),root:"user",prefix:"item"})}),settings:ot.DI.cfg(an.DIConfig.UserSettings)}),o[an.DIConfig.UserSettings]=ot.DI.singleton(Fe.UserSettings,{settings:{music:!0,effects:!0,share:!0},service:ot.DI.instance(fe.SyncService,{gateway:ot.DI.cfg(an.DIConfig.ServiceGateway),root:"user",endpoint:"settings",enableSync:!1,adapter:ot.DI.instance(b.RawStorageAdapter,{root:"user",prefix:"settings",storage:ot.DI.cfg(an.DIConfig.PlatformStorage)})})}),o[an.DIConfig.UserItemFactory]=ot.DI.singleton(Ie.UserItemFactory,{availabilities:{"booster:trowel":ht.metaProgressAvailability(4),"booster:cat":ht.metaProgressAvailability(12),"booster:cart":ht.metaProgressAvailability(8),"booster:plusone":ht.metaProgressAvailability(16),"startbooster:superTile":ht.metaProgressAvailability(6),"startbooster:addmoves":ht.metaProgressAvailability(10),"startbooster:candybomb":ht.metaProgressAvailability(14),"timebooster:superTile":ht.metaProgressAvailability(6),"timebooster:addmoves":ht.metaProgressAvailability(10),"timebooster:candybomb":ht.metaProgressAvailability(14)},patterns:[{constructor:Oe.CountableUserItem,patterns:["currency:coins","startbooster:superTile","startbooster:addmoves","startbooster:candybomb"]},{constructor:Oe.CountableUserItem,patterns:["booster:trowel","booster:cart","booster:plusone","booster:cat"],options:{max:99}},{constructor:Oe.CountableUserItem,options:{syncable:!1},patterns:["match3:moves","match3:bombMoves","match3:parrotFailWalk"]},{constructor:Re.RestorableCountableUserItem,patterns:["attempts:lives"]},{constructor:Pe.TimedUserItem,patterns:["attempts:unlimited","timebooster:superTile","timebooster:addmoves","timebooster:candybomb"]},{constructor:ke.UserItem,patterns:["tags:payer","products:noviceSet","piggybank:coins","dailyReward:coins"]},{constructor:ke.UserItem,options:{syncable:!1},patterns:["products:piggybank"]},{constructor:Oe.CountableUserItem,patterns:["adsLimit:shop-coins-30","adsLimit:livesShop-1","adsLimit:moves-3","adsLimit:bombMoves-5","adsLimit:parrotFailWalk-1","adsLimit:piggybank"]}]}),o[an.DIConfig.AttemptsStateFactory]=ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw({lives:ot.DI.instance(P.RestorableCountableAttemptsState,{max:5,restoreTimeout:1200}),unlimited:ot.DI.instance(k.TimedAttemptsState)})),o[an.DIConfig.PlatformStorage]=ot.DI.singleton(C.LocalStorage),o[an.DIConfig.RuntimeStorage]=ot.DI.singleton(w.RuntimeStorage),o[an.DIConfig.SocialService]=ot.DI.singleton(tt.SocialService,[ot.DI.instance($e.MockSocialAdapter,{communityUrl:"https://www.facebook.com/candycommunity",privacyPolicyUrl:"./html/privacy-policy-en.html",termsUrl:"./html/terms-of-service-en.html"})]),o[an.DIConfig.SocialRequest]=ot.DI.instance(et.SocialRequest,{i18n:ot.DI.cfg(an.DIConfig.I18N)}),o[an.DIConfig.AuthService]=ot.DI.singleton(We.AuthService,{providers:[ot.DI.instance(He.SocialAuthProvider,ot.DI.cfg(an.DIConfig.SocialService),$e.MockSocialAdapter.ADAPTER_TYPE)],storage:ot.DI.singleton(At.DefaultAuthStorage,[$e.MockSocialAdapter.ADAPTER_TYPE]),handler:ot.DI.cfg(an.DIConfig.AuthHandler)}),o[an.DIConfig.AuthHandler]=ot.DI.singleton(Ot.CandyvalleyUserAuthHandler,{userService:ot.DI.cfg(an.DIConfig.UserService),userManager:ot.DI.cfg(an.DIConfig.UserManager),userFactory:ot.DI.cfg(an.DIConfig.UserFactory)}),o[an.DIConfig.ServiceGateway]=ot.DI.singleton(ye.QueueHttpGateway,{httpClient:ot.DI.cfg(an.DIConfig.HttpClient),configService:ot.DI.cfg(an.DIConfig.ConfigService),urlConfigKey:"backendUrl",errorHandler:ot.DI.instance(de.DefaultHttpGatewayErrorHandler,{actionManager:ot.DI.cfg(an.DIConfig.ActionManager),defaultAction:ft.ACTIONS.WINDOW_NO_CONNECTION,errorToActionMap:(r={},r[it.HttpClientError.ERROR_TYPE_UNAUTHORIZED]=ft.ACTIONS.WINDOW_SESSION_EXPIRED,r)})}),o[an.DIConfig.UserService]=ot.DI.singleton(De.UserService,{gateway:ot.DI.cfg(an.DIConfig.ServiceGateway)}),o[an.DIConfig.UserManager]=ot.DI.singleton(Le.UserManager),o[an.DIConfig.UserFactory]=ot.DI.singleton(xt.UserFactory,{di:ot.DI.self()}),o[an.DIConfig.PaymentService]=ot.DI.singleton(Ue.PaymentService).args(ot.DI.raw(wt.Products),ot.DI.instance(Ke.CurrencyPaymentProvider,{money:ot.DI.instance(ze.VendorPaymentProvider,ot.DI.cfg(an.DIConfig.PaymentProvider),ot.DI.cfg(an.DIConfig.ScreenLocker)),game:ot.DI.instance(q.ApplicationPaymentProvider,ot.DI.cfg(an.DIConfig.UserManager))}),ot.DI.instance(Z.ApplicationPurchaseHandler,{userManager:ot.DI.cfg(an.DIConfig.UserManager),service:ot.DI.cfg(an.DIConfig.PaymentValidationService),options:{payerCurrency:"money",payerItem:{spec:"tags",name:"payer"}}})),o[an.DIConfig.RewardedAdService]=ot.DI.singleton(Ne.AdService,ot.DI.cfg(an.DIConfig.RewardedAdProvider),{timeoutLoadAd:30}),o[an.DIConfig.InterstitialAdService]=ot.DI.singleton(Ne.AdService,ot.DI.cfg(an.DIConfig.InterstitialAdProvider),{timeoutLoadAd:30}),o[an.DIConfig.BannerAdService]=ot.DI.singleton(Ne.AdService,ot.DI.cfg(an.DIConfig.BannerAdProvider),{timeoutLoadAd:30}),o[an.DIConfig.RewardedAdProvider]=ot.DI.instance(Ge.MockAdProvider),o[an.DIConfig.InterstitialAdProvider]=ot.DI.instance(Ge.MockAdProvider),o[an.DIConfig.BannerAdProvider]=ot.DI.instance(Ge.MockAdProvider),o[an.DIConfig.PaymentProvider]=ot.DI.instance(Ye.MockPaymentProvider),o[an.DIConfig.PaymentValidationService]=ot.DI.instance(qe.MockPaymentValidationService,{valid:!0}),o[an.DIConfig.LocaleResolver]=ot.DI.singleton(R.SocialAdapterLocaleResolver,{socialService:ot.DI.cfg(an.DIConfig.SocialService),defaultLocale:"en"}),o[an.DIConfig.MetaModuleResolver]=ot.DI.instance(I.MetaModuleResolver,{metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager)}),o[an.DIConfig.SequenceAction]=ot.DI.instance(y.SequenceAction,{actionManager:ot.DI.cfg(an.DIConfig.ActionManager),di:ot.DI.self()}),o[an.DIConfig.ActionCaller]=ot.DI.instance(l.ActionCaller,{actionManager:ot.DI.cfg(an.DIConfig.ActionManager),actionFactory:ot.DI.cfg(an.DIConfig.ActionFactory)}),o[an.DIConfig.OpenEpisodeAction]=ot.DI.instance(u.OpenEpisodeAction,{sceneManager:ot.DI.cfg(an.DIConfig.SceneManager),moduleResolvers:{episodes:ht.moduleResolver("episodes"),progress:ht.moduleResolver("progress")}}),o[an.DIConfig.RunMetaGameScenarioAction]=ot.DI.instance(d.RunMetaGameScenarioAction,{scenarioManager:ot.DI.cfg(an.DIConfig.ScenarioManager),scenarioModuleResolver:ht.moduleResolver("scenario")}),o[an.DIConfig.RawStorageAdapter]=ot.DI.instance(b.RawStorageAdapter,{root:"user",prefix:"items",storage:ot.DI.cfg(an.DIConfig.PlatformStorage)}),o[an.DIConfig.ObjectStorageAdapter]=ot.DI.instance(_.ObjectStorageAdapter),o[an.DIConfig.NotificationAdapter]=ot.DI.instance(Ve.NotificationAdapter),o[an.DIConfig.StartBoosterAnimationFactory]=ot.DI.instance(at.ObjectFactory,ot.DI.self(),ot.DI.raw({superTile:ot.DI.instance(Pt.StartBoosterEmitEntityAnimationCreator,{starPrefabPath:"prefabs/boosters/cat-entity-effect",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer)}),candybomb:ot.DI.instance(Pt.StartBoosterEmitEntityAnimationCreator,{starPrefabPath:"prefabs/boosters/cat-entity-effect",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer)}),addmoves:ot.DI.instance(kt.StartBoosterAddMovesAnimationCreator,{starPrefabPath:"prefabs/boosters/cat-entity-effect",audioEffectsPlayer:ot.DI.cfg(an.DIConfig.AudioEffectsPlayer)})})),o[an.DIConfig.UtmProvider]=ot.DI.singleton(Tt.MockUtmProvider,{mock_utm_key:"mock_utm_value"}),o[an.DIConfig.I18NAppLoader]=ot.DI.instance(Bt.I18NAppLoader,{i18n:ot.DI.cfg(an.DIConfig.I18N),localeResolver:ot.DI.cfg(an.DIConfig.LocaleResolver),storage:ot.DI.cfg(an.DIConfig.PlatformStorage),configService:ot.DI.cfg(an.DIConfig.ConfigService),analyticsService:ot.DI.cfg(an.DIConfig.AnalyticsService),defaultLanguage:"en",languageSettingsEnabled:ot.DI.cfg(an.DIConfig.LanguageSettingsEnabled),namespaces:[{namespace:"",path:"i18n/common"},{namespace:"match3",path:"i18n/match3"},{namespace:"social",path:"i18n/social"}],availableLanguages:["de","en","es","fr","it","jp","lv","pt-BR","ru","tr","zh-Hant"]}),o[an.DIConfig.WindowLazyLoader]=ot.DI.singleton(Gt.WindowLazyLoader,{windowFactory:ot.DI.cfg(an.DIConfig.WindowFactory)}),o[an.DIConfig.SceneResourcesManager]=ot.DI.singleton(Nt.SceneResourcesManager,{metaGameManager:ot.DI.cfg(an.DIConfig.MetaGameManager),windowFactory:ot.DI.cfg(an.DIConfig.WindowFactory),sceneResourcesResolvers:[ot.DI.instance(Kt.RewardWindowSceneResourcesResolver,{windowKeys:["dailyReward"],moduleResolver:ht.moduleResolver("dailyReward")}),ot.DI.instance(Kt.RewardWindowSceneResourcesResolver,{windowKeys:["episodesStarsRewardAvailable"],moduleResolver:ht.moduleResolver("starsReward")}),ot.DI.instance(Kt.RewardWindowSceneResourcesResolver,{windowKeys:["specialLevelsPrize"],moduleResolver:ht.moduleResolver("specialLevelsReward")}),ot.DI.instance(Wt.WindowsSceneResourcesResolver,{gameResolver:ht.gameResolver()}),ot.DI.instance(Ht.CraftWindowSceneResourcesResolver,{windowKeys:["craftPart","craft"],moduleResolvers:{progress:ht.moduleResolver("progress"),episodes:ht.moduleResolver("episodes"),craft:ht.moduleResolver("craft")}}),ot.DI.instance(Vt.WindowByConditionalSceneResourcesResolver,{windowKeys:["shop"],conditionalAction:ot.DI.cfg(an.DIConfig.SaleShopActionConditionCheck)}),ot.DI.instance(Vt.WindowByConditionalSceneResourcesResolver,{windowKeys:["shop"],conditionalAction:ot.DI.cfg(an.DIConfig.SaleShopUnlimActionConditionCheck)}),ot.DI.instance(Vt.WindowByConditionalSceneResourcesResolver,{windowKeys:["piggybank"],conditionalAction:ot.DI.cfg(an.DIConfig.PiggybankActionCondition)}),ot.DI.instance(Vt.WindowByConditionalSceneResourcesResolver,{windowKeys:["notificationRequest"],conditionalAction:ot.DI.cfg(an.DIConfig.NotificationRequestActionCondition)}),ot.DI.instance(Vt.WindowByConditionalSceneResourcesResolver,{windowKeys:["cake-reward"],conditionalAction:ot.DI.cfg(an.DIConfig.CakeRewardActionCondition)}),ot.DI.instance(Yt.LoseReasonWindowSceneResourcesResolver,{windowKeys:["parrotFailWalk"],levels:ht.moduleResolver("levels"),reason:"parrot"}),ot.DI.instance(Yt.LoseReasonWindowSceneResourcesResolver,{windowKeys:["bombExplodeLevel"],levels:ht.moduleResolver("levels"),reason:"bubble"})]}),o[an.DIConfig.SharingDisabled]=ot.DI.singleton(Lt.GetterToValue,ot.DI.instance(qt.SyncRemoteConfigGetter,{remoteConfig:ot.DI.cfg(an.DIConfig.SyncRemoteConfig),key:"sharingDisabled",type:"boolean"})),o[an.DIConfig.FeatureFriends]=ot.DI.singleton(Lt.GetterToValue,ot.DI.instance(qt.SyncRemoteConfigGetter,{remoteConfig:ot.DI.cfg(an.DIConfig.SyncRemoteConfig),key:"friends",type:"boolean"})),o[an.DIConfig.LanguageSettingsEnabled]=ot.DI.singleton(Lt.GetterToValue,ot.DI.instance(qt.SyncRemoteConfigGetter,{remoteConfig:ot.DI.cfg(an.DIConfig.SyncRemoteConfig),key:"languageSettingsEnabled",type:"boolean"})),o.PlatformPromoGiftConfirmationAction=ot.DI.instance(on.PlatformPromoGiftConfirmationAction),o[an.DIConfig["Config.Orientation"]]=ot.DI.instance(function(){var e,t=cc.sys.isBrowser&&null!==(e=new Qt.URL(document.location.href).searchParams.get("orientation"))&&void 0!==e?e:"LANDSCAPE";return new String(t.toUpperCase())}),o[an.DIConfig.MessageCenter]=ot.DI.singleton(rn.MessageCenter,{messageService:ot.DI.instance(cn.CandyvalleyMessageService,{gateway:ot.DI.cfg(an.DIConfig.ServiceGateway)}),messageHandler:ot.DI.instance(sn.CandyvalleyMessageHandler,{userManager:ot.DI.cfg(an.DIConfig.UserManager)})}),o[an.DIConfig.SocialRequestWrapper]=ot.DI.instance(pn.SocialRequestWrapper),o[an.DIConfig.PlatformRemoteConfig]=ot.DI.instance(ln.PlatformRemoteConfig,{config:{friends:!0}}),o);n.ApplicationConfig=Object.assign(un,bt.MetaGameConfig,vt.DevConsoleConfig,jt.MetaEventConfig,Ut.ActionConditionsConfig,_t),cc._RF.pop()},{"./ActionCaller (@tapclap.game-kit.action-manager)":"ActionCaller (@tapclap.game-kit.action-manager)","./ActionConditionsConfig (scripts.config)":"ActionConditionsConfig (scripts.config)","./ActionConfig (scripts.config)":"ActionConfig (scripts.config)","./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ActionManager (@tapclap.game-kit.action-manager)":"ActionManager (@tapclap.game-kit.action-manager)","./ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./AdService (@tapclap.sdk-x.ad-service)":"AdService (@tapclap.sdk-x.ad-service)","./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./ApplicationPaymentProvider (@tapclap.game-kit.payment)":"ApplicationPaymentProvider (@tapclap.game-kit.payment)","./ApplicationPurchaseHandler (@tapclap.game-kit.payment)":"ApplicationPurchaseHandler (@tapclap.game-kit.payment)","./ApplicationServerConfig (scripts.config)":"ApplicationServerConfig (scripts.config)","./ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)":"AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)","./AudioManager (@tapclap.game-kit.audio-manager)":"AudioManager (@tapclap.game-kit.audio-manager)","./AuthService (@tapclap.sdk-x.auth-service)":"AuthService (@tapclap.sdk-x.auth-service)","./BackdropController (@tapclap.game-kit.ui.backdrop)":"BackdropController (@tapclap.game-kit.ui.backdrop)","./BackdropManager (@tapclap.game-kit.ui.backdrop)":"BackdropManager (@tapclap.game-kit.ui.backdrop)","./BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)":"BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)","./BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)":"BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)","./BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)":"BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)","./BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)":"BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)","./CakeRewardNameplate (scripts.meta.modules.daily-cake)":"CakeRewardNameplate (scripts.meta.modules.daily-cake)","./CandyvalleyMessageHandler (scripts.message-center)":"CandyvalleyMessageHandler (scripts.message-center)","./CandyvalleyMessageService (scripts.message-center)":"CandyvalleyMessageService (scripts.message-center)","./CandyvalleyUserAuthHandler (scripts.auth-service)":"CandyvalleyUserAuthHandler (scripts.auth-service)","./CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)":"CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)","./CocosPolyfills (@tapclap.utils-js.cocos-polyfills)":"CocosPolyfills (@tapclap.utils-js.cocos-polyfills)","./CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)":"CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)","./CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)":"CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)","./CompositeReplaceOfferStrategy (scripts.offers)":"CompositeReplaceOfferStrategy (scripts.offers)","./CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":"CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","./ConfigService (@tapclap.game-kit.config-service)":"ConfigService (@tapclap.game-kit.config-service)","./ContextManager (@tapclap.game-kit.context-manager)":"ContextManager (@tapclap.game-kit.context-manager)","./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","./CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)":"CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)","./CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)":"CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DIConfig (scripts.config)":"DIConfig (scripts.config)","./DateRangeOfferState (scripts.offers.states)":"DateRangeOfferState (scripts.offers.states)","./DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)":"DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)","./DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)":"DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)","./DevConsoleConfig (scripts.config)":"DevConsoleConfig (scripts.config)","./DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)":"EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)","./FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./FeatureOfferState (scripts.offers.states)":"FeatureOfferState (scripts.offers.states)","./Fetch (@tapclap.utils-js.fetch)":"Fetch (@tapclap.utils-js.fetch)","./GetterToDateRange (scripts.getters)":"GetterToDateRange (scripts.getters)","./GetterToValue (@tapclap.utils-js.getters)":"GetterToValue (@tapclap.utils-js.getters)","./HasAdOfferState (@tapclap.game-kit.offer-manager.states)":"HasAdOfferState (@tapclap.game-kit.offer-manager.states)","./HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./HttpClient (@tapclap.utils-js.http-client)":"HttpClient (@tapclap.utils-js.http-client)","./I18N (@tapclap.game-kit.i18n)":"I18N (@tapclap.game-kit.i18n)","./I18NAppLoader (scripts.loader)":"I18NAppLoader (scripts.loader)","./I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)":"I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)","./I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)":"I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)","./I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)":"I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)","./I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)":"I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)","./I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)":"I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)","./I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)":"I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)","./ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)":"ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)","./InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./LimitOfferState (@tapclap.game-kit.offer-manager.states)":"LimitOfferState (@tapclap.game-kit.offer-manager.states)","./LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)":"LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)","./LocalConfig (scripts.config)":"LocalConfig (scripts.config)","./LocalStorage (@tapclap.game-kit.data-storage)":"LocalStorage (@tapclap.game-kit.data-storage)","./LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)":"LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)","./LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","./MessageCenter (@tapclap.game-kit.message-center)":"MessageCenter (@tapclap.game-kit.message-center)","./MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)":"MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)","./MetaEventConfig (scripts.config)":"MetaEventConfig (scripts.config)","./MetaEventGetter (scripts.getters)":"MetaEventGetter (scripts.getters)","./MetaGameConfig (scripts.config)":"MetaGameConfig (scripts.config)","./MetaModuleGetter (@tapclap.game-kit.getters)":"MetaModuleGetter (@tapclap.game-kit.getters)","./MetaModuleResolver (@tapclap.game-kit.meta-game)":"MetaModuleResolver (@tapclap.game-kit.meta-game)","./MetaTaskManager (@tapclap.game-kit.meta-task-manager)":"MetaTaskManager (@tapclap.game-kit.meta-task-manager)","./MinProgressOfferState (@tapclap.game-kit.offer-manager.states)":"MinProgressOfferState (@tapclap.game-kit.offer-manager.states)","./MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)":"MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)","./MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)":"MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)","./MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)":"MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)","./MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)":"MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)","./MockUtmProvider (@tapclap.sdk-x.utm.providers)":"MockUtmProvider (@tapclap.sdk-x.utm.providers)","./NameplateManager (@tapclap.game-kit.ui.nameplate-manager)":"NameplateManager (@tapclap.game-kit.ui.nameplate-manager)","./NoItemOfferState (@tapclap.game-kit.offer-manager.states)":"NoItemOfferState (@tapclap.game-kit.offer-manager.states)","./NotificationAdapter (@tapclap.sdk-x.notification)":"NotificationAdapter (@tapclap.sdk-x.notification)","./ObjectFactory (@tapclap.utils-js.di)":"ObjectFactory (@tapclap.utils-js.di)","./ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)":"ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./OfferFactory (@tapclap.game-kit.offer-manager)":"OfferFactory (@tapclap.game-kit.offer-manager)","./OfferManager (@tapclap.game-kit.offer-manager)":"OfferManager (@tapclap.game-kit.offer-manager)","./OfferPayloadBuilder (@tapclap.game-kit.offer-manager)":"OfferPayloadBuilder (@tapclap.game-kit.offer-manager)","./OffersConfig (scripts.config)":"OffersConfig (scripts.config)","./OffersStrategiesConfig (scripts.config)":"OffersStrategiesConfig (scripts.config)","./OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":"OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","./OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)":"OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)","./PaymentService (@tapclap.sdk-x.payment-service)":"PaymentService (@tapclap.sdk-x.payment-service)","./PiggybankNameplate (scripts.meta.modules.piggybank)":"PiggybankNameplate (scripts.meta.modules.piggybank)","./PlatformLauncher (@tapclap.sdk-x.platform-launcher)":"PlatformLauncher (@tapclap.sdk-x.platform-launcher)","./PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)":"PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)","./PlatformRemoteConfig (scripts.platform)":"PlatformRemoteConfig (scripts.platform)","./PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)":"PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)","./ProductsConfig (scripts.config)":"ProductsConfig (scripts.config)","./PublicationConfig (scripts.config)":"PublicationConfig (scripts.config)","./PublicationManager (@tapclap.game-kit.publication-manager)":"PublicationManager (@tapclap.game-kit.publication-manager)","./PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)":"PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)","./QueueHttpGateway (@tapclap.game-kit.service-gateway)":"QueueHttpGateway (@tapclap.game-kit.service-gateway)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)":"RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)","./RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":"RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","./RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)":"RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)","./RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","./RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)":"RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)","./RuntimeStorage (@tapclap.game-kit.data-storage)":"RuntimeStorage (@tapclap.game-kit.data-storage)","./SalesOfferState (scripts.offers.states)":"SalesOfferState (scripts.offers.states)","./ScenarioManager (@tapclap.game-kit.scenario-manager)":"ScenarioManager (@tapclap.game-kit.scenario-manager)","./SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":"SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","./SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)","./SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)","./SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)","./SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)","./SceneManager (@tapclap.game-kit.scene-manager)":"SceneManager (@tapclap.game-kit.scene-manager)","./SceneResourcesManager (scripts.scenes.scene-resources)":"SceneResourcesManager (scripts.scenes.scene-resources)","./SceneTransition (@tapclap.game-kit.scene-manager.transitions)":"SceneTransition (@tapclap.game-kit.scene-manager.transitions)","./SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)":"SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)","./SequenceAction (@tapclap.game-kit.action-manager)":"SequenceAction (@tapclap.game-kit.action-manager)","./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)","./ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)":"ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)","./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)":"SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)","./SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)":"SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)","./SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)":"SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)","./SocialRequest (@tapclap.sdk-x.social-service)":"SocialRequest (@tapclap.sdk-x.social-service)","./SocialRequestWrapper (scripts.message-center.event-handlers)":"SocialRequestWrapper (scripts.message-center.event-handlers)","./SocialService (@tapclap.sdk-x.social-service)":"SocialService (@tapclap.sdk-x.social-service)","./StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":"StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)","./StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":"StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)","./SyncRemoteConfigGetter (scripts.getters)":"SyncRemoteConfigGetter (scripts.getters)","./SyncService (@tapclap.game-kit.services)":"SyncService (@tapclap.game-kit.services)","./TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":"TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","./TimedUserItem (@tapclap.game-kit.user-item-manager.items)":"TimedUserItem (@tapclap.game-kit.user-item-manager.items)","./UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)":"UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)","./UIManager (@tapclap.game-kit.ui)":"UIManager (@tapclap.game-kit.ui)","./URL (@tapclap.utils-js.url)":"URL (@tapclap.utils-js.url)","./User (@tapclap.game-kit.user-manager)":"User (@tapclap.game-kit.user-manager)","./UserFactory (@tapclap.game-kit.user-service.factory)":"UserFactory (@tapclap.game-kit.user-service.factory)","./UserInfo (@tapclap.sdk-x.social-service)":"UserInfo (@tapclap.sdk-x.social-service)","./UserItem (@tapclap.game-kit.user-item-manager)":"UserItem (@tapclap.game-kit.user-item-manager)","./UserItemCollection (@tapclap.game-kit.user-item-manager)":"UserItemCollection (@tapclap.game-kit.user-item-manager)","./UserItemFactory (@tapclap.game-kit.user-item-manager)":"UserItemFactory (@tapclap.game-kit.user-item-manager)","./UserItemManager (@tapclap.game-kit.user-item-manager)":"UserItemManager (@tapclap.game-kit.user-item-manager)","./UserManager (@tapclap.game-kit.user-manager)":"UserManager (@tapclap.game-kit.user-manager)","./UserService (@tapclap.game-kit.user-service)":"UserService (@tapclap.game-kit.user-service)","./UserSettings (@tapclap.game-kit.user-manager)":"UserSettings (@tapclap.game-kit.user-manager)","./VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)":"VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)","./WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","./WindowConfig (scripts.config)":"WindowConfig (scripts.config)","./WindowController (@tapclap.game-kit.ui.window-manager)":"WindowController (@tapclap.game-kit.ui.window-manager)","./WindowFactory (@tapclap.game-kit.ui.window-manager)":"WindowFactory (@tapclap.game-kit.ui.window-manager)","./WindowLazyLoader (scripts.loader)":"WindowLazyLoader (scripts.loader)","./WindowManager (@tapclap.game-kit.ui.window-manager)":"WindowManager (@tapclap.game-kit.ui.window-manager)","./WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":"WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","./WindowsAppLoader (scripts.loader)":"WindowsAppLoader (scripts.loader)","./WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"ApplicationConfigShortcuts (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"eeb18pDvGpcD4cDOnyrn0V/","ApplicationConfigShortcuts (scripts.config)"),n.__esModule=!0,n.windowAction=n.proxyAction=n.preloadWindowAction=n.moduleResolver=n.metaProgressAvailability=n.gameResolver=n.caller=void 0;var o=e("./DI (@tapclap.utils-js.di)"),a=e("./MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)"),r=e("./MetaGameResolver (@tapclap.game-kit.meta-game)"),i=e("./ProxyAction (@tapclap.game-kit.action-manager)");n.metaProgressAvailability=function(e,t){var n=void 0===t?{}:t,r=n.metaGameKey,i=n.metaModuleKey;return o.DI.instance(a.MetaProgressAvailability,{metaGameManager:o.DI.cfg("MetaGameManager"),value:e,metaGameKey:r,metaModuleKey:i})},n.windowAction=function(e){return void 0===e&&(e={}),Object.assign({userManager:o.DI.cfg("UserManager"),windowManager:o.DI.cfg("WindowManager"),uiManager:o.DI.cfg("UIManager"),i18n:o.DI.cfg("I18N"),caller:c()},e)},n.gameResolver=function(e){return o.DI.instance(r.MetaGameResolver,{metaGameManager:o.DI.cfg("MetaGameManager"),metaGameKey:e})},n.moduleResolver=function(e,t){return o.DI.from("MetaModuleResolver",{metaModuleKey:e,metaGameKey:t})};var c=function(e){return void 0===e&&(e=[]),o.DI.from("ActionCaller",{actions:e})};n.caller=c,n.proxyAction=function(e,t){return void 0===t&&(t={}),o.DI.instance(i.ProxyAction,{action:e,actionOptions:t,actionManager:o.DI.cfg("ActionManager")})},n.preloadWindowAction=function(e){return void 0===e&&(e={}),Object.assign({windowLazyLoader:o.DI.cfg("WindowLazyLoader"),backdropManager:o.DI.cfg("BackdropManager"),windowManager:o.DI.cfg("WindowManager"),loaderShowDelay:.5,minLoadTime:1,prefab:"prefabs/ui/LoadWindowSpinner"},e)},cc._RF.pop()},{"./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./MetaGameResolver (@tapclap.game-kit.meta-game)":"MetaGameResolver (@tapclap.game-kit.meta-game)","./MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)":"MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)","./ProxyAction (@tapclap.game-kit.action-manager)":"ProxyAction (@tapclap.game-kit.action-manager)"}],"ApplicationInstanceComponent (@tapclap.game-kit.application.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"868d6rT9RxHlq/XFua+t+Q5","ApplicationInstanceComponent (@tapclap.game-kit.application.components)"),n.__esModule=!0,n.ApplicationInstanceComponent=void 0;var a=function(e){var t,n;function a(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._di=null,t._app=null,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.setDI=function(e){this._di=e},r.getDI=function(){return this._di},r.setApp=function(e){this._app=e},r.getApp=function(){return this._app},a}(cc.Component);n.ApplicationInstanceComponent=a,cc._RF.pop()},{}],"ApplicationPaymentProvider (@tapclap.game-kit.payment)":[function(e,t,n){"use strict";cc._RF.push(t,"0fb38g5gt9IGLzv951l5Wm1","ApplicationPaymentProvider (@tapclap.game-kit.payment)"),n.__esModule=!0,n.ApplicationPaymentProvider=void 0;var o=e("./PaymentProvider (@tapclap.sdk-x.payment-service)"),a=e("./Purchase (@tapclap.sdk-x.payment-service)"),r=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n="currency"),(o=e.call(this)||this)._userManager=t,o._itemSpec=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.purchase=function(e){var t=this._userManager.getCurrentUser().items.get(this._itemSpec,e.currency);if(t instanceof r.CountableUserItem){if(t.amount>=e.price)return t.amount-=e.price,Promise.resolve(new a.Purchase(this.getType(),e.id));throw new Error("Not enough "+t.name+" amount ("+t.amount+") for product price ("+e.price+")")}throw new Error("Not found CountableUserItem by spec: "+this._itemSpec)},o}(o.PaymentProvider);n.ApplicationPaymentProvider=c,c.PROVIDER_TYPE="app",cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./PaymentProvider (@tapclap.sdk-x.payment-service)":"PaymentProvider (@tapclap.sdk-x.payment-service)","./Purchase (@tapclap.sdk-x.payment-service)":"Purchase (@tapclap.sdk-x.payment-service)"}],"ApplicationPurchaseHandler (@tapclap.game-kit.payment)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0a2f4we60ZGl7//IFq6mwMJ","ApplicationPurchaseHandler (@tapclap.game-kit.payment)"),n.__esModule=!0,n.ApplicationPurchaseHandler=void 0;var c=function(e){var t,n;function a(t){var n,o=t.userManager,a=t.service,r=t.options,i=void 0===r?{}:r;return(n=e.call(this)||this)._userManager=o,n._service=a,n._options=i,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._verifyPurchase=function(e){return this._service.verify(e.type,e)},r._applyProduct=function(e,t){var n=void 0===t?{}:t,a=n.currency,r=n.amount,i=this._userManager.getCurrentUser(),c=[e.payload.items,e.payload.extra],s=e.serialize();a&&(s.currency=a),r&&(s.priceAmount=r);for(var p=[],l=0,m=c;l<m.length;l++){var u=m[l];if(u)for(var d,y=o(u);!(d=y()).done;){var f=d.value;p.push(i.items.create(f))}}if(i.items.charge(p,{product:s}),e.currencyType===this._options.payerCurrency&&this._options.payerItem){var h=this._options.payerItem,g=h.spec,v=h.name;i.items.get(g,v)||i.items.add(this._options.payerItem)}return Promise.resolve()},r.handle=function(e,t){var n=this;return this._verifyPurchase(e).then(function(e){return n._applyProduct(t,e).then(function(){return e})})},a}(e("./PurchaseHandler (@tapclap.sdk-x.payment-service)").PurchaseHandler);n.ApplicationPurchaseHandler=c,cc._RF.pop()},{"./PurchaseHandler (@tapclap.sdk-x.payment-service)":"PurchaseHandler (@tapclap.sdk-x.payment-service)"}],"ApplicationServerConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"cf406t4YfdUjZ9MutQzdK90","ApplicationServerConfig (scripts.config)"),n.__esModule=!0,n.ApplicationServerConfig=void 0,n.ApplicationServerConfig={backendUrl:"http://127.0.0.1:3000",analyticsUrl:"http://127.0.0.1:3001",slowLoadingDetectTime:5},cc._RF.pop()},{}],"ArrowComponent (@tapclap.game-kit.ui.arrow)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p;function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"350eaQ5vZJGWIi3za/L1FFg","ArrowComponent (@tapclap.game-kit.ui.arrow)"),n.__esModule=!0,n.ArrowComponent=void 0;var y=cc._decorator,f=y.ccclass,h=y.menu,g=y.property,v=(o=h("UI-Kit/Arrow/ArrowComponent"),a=g({type:cc.Float,visible:!0}),r=g({type:cc.Float,visible:!0}),f(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_duration",s,m(t)),l(t,"_delta",p,m(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var a=o.prototype;return a.show=function(){var e=this.node.angle*Math.PI/180;this.node.active=!0,this.node.stopAllActions(),this.node.runAction(cc.sequence([cc.moveBy(this._duration,cc.v2(0,this._delta).rotate(e)),cc.moveBy(this._duration,cc.v2(0,-this._delta).rotate(e)).easing(cc.easeBackOut())]).repeatForever())},a.hide=function(){this.node.active=!1,this.node.stopAllActions()},o}(cc.Component),s=d(c.prototype,"_duration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=d(c.prototype,"_delta",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),i=c))||i)||i);n.ArrowComponent=v,cc._RF.pop()},{}],"ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"f883dI9c1NAprfJyxzfWxKF","ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.ArrowScenarioProducer=void 0;var o=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),a=e("./ArrowComponent (@tapclap.game-kit.ui.arrow)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),i.prototype.produce=function(e){var t=e.action,n=void 0===t?"show":t,r=e.targets,i=void 0===r?[]:r,c=e.angle,s=void 0===c?0:c,p=e.offset,l=this._sceneManager.getCurrentSceneComponent(),m=l.getHolder(e.arrow).getComponent(a.ArrowComponent),u=new o.TutorialScenarioBuilder({backdropManager:this._backdropManager});switch(n){case"show":u.addHighlight([m.node]).addAction(function(){return m.node.angle=s}).addAction(function(){return m.show()}).setTargetPosition(i.map(function(e){return l.getHolder(e)}),m.node,p);break;case"hide":u.addAction(function(){return m.hide()})}return u.build()},i}(e("./BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)").BaseScenarioProducer);n.ArrowScenarioProducer=i,cc._RF.pop()},{"./ArrowComponent (@tapclap.game-kit.ui.arrow)":"ArrowComponent (@tapclap.game-kit.ui.arrow)","./BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":[function(e,t,n){"use strict";var o,a,r,i,c;function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5f1682DgUtBKLRQhvfS4dhr","AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),n.__esModule=!0,n.AttemptsBarComponent=void 0;var m,u,d,y,f=cc._decorator,h=f.ccclass,g=f.menu,v=f.property,_=(o=g("UI-Kit/AttemptsBar/AttemptsBarComponent"),a=v({type:cc.Node,visible:!0}),h(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._state=null,s(t,"_iconNode",c,p(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=o.prototype;return a._updateState=function(){var e=this._metaModule.getState();this._state!==e&&(this._state=e,this._onChangeState(this._state)),this._onUpdateState(this._state)},a.getIconNode=function(){return this._iconNode},a._onChangeState=function(){},a._onUpdateState=function(){},a.setMetaModule=function(e){this._metaModule=e,this.unschedule(this._updateState),this.schedule(this._updateState,1),this._updateState()},o}(cc.Component),m=i.prototype,u=[a],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_iconNode",e)||e},y)).initializer&&(Object.defineProperty(m,"_iconNode",y),y=null),c=y,r=i))||r)||r);n.AttemptsBarComponent=_,cc._RF.pop()},{}],"AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ef32bmWJ/1JCpobaVA77+46","AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)"),n.__esModule=!0,n.AttemptsMetaModule=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getState=function(){return this.getService().getAttemptsState()},r.hasAttempt=function(){var e=this.getState();return!!e&&e.hasAttempt()},r.decrease=function(){var e=this.getState();e&&e.decrease()},r.increase=function(){var e=this.getState();e&&e.increase()},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.AttemptsMetaModule=a,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"449b8GdajBO/pXuVTANLYxR","AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)"),n.__esModule=!0,n.AttemptsMetaModuleService=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getAttemptsState=function(){return null},a}(e("./Service (@tapclap.utils-js.service)").Service);n.AttemptsMetaModuleService=a,cc._RF.pop()},{"./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)"}],"AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"a340bmQfIJN7qnTBHXEr6rl","AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)"),n.__esModule=!0,n.AttemptsState=void 0;var a=function(){function e(e){void 0===e&&(e={}),this._type=e.type,this._userItemManager=e.userItemManager}var t,n,a=e.prototype;return a.getCountAttempts=function(){return 0},a.getMaxAttempts=function(){return 0},a.hasMaxAttempts=function(){return!1},a.isMaxAttempts=function(){return!1},a.getTimer=function(){return null},a.isAvailable=function(){return!0},a.hasAttempt=function(){return!1},a.decrease=function(){},a.increase=function(){},t=e,(n=[{key:"type",get:function(){return this._type}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.AttemptsState=a,cc._RF.pop()},{}],"AudioComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e23e0ms4fBV+ZLLoboJdz7h","AudioComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.AudioComponent=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._sounds=t.sounds,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getSound=function(e){return this._sounds[e]},a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.AudioComponent=a,a.KEY="audio",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"AudioConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"861c4Z2g5VdeL6U/tvpnY3O","AudioConfig (scripts.config)"),n.__esModule=!0,n.AudioConfig=void 0,n.AudioConfig={click:"audio/effects/click",commonMetaMusic:"audio/effects/mainmusic",commonGameMusic:"audio/effects/gamemusic",commonHardLevelGameMusic:"audio/effects/hardlevel-music",openWindow:"audio/effects/showwindow",openWinGameWindow:"audio/effects/finishwindow",openLoseGameWindow:"audio/effects/losegame",purchaseMovesWhenLose:"audio/effects/leftmovecreate",openCraftWindow:"audio/effects/element",openStarsRewardWindow:"audio/effects/happybirthday",openStarsRewardBox:"audio/effects/lootboxexplode",move:"audio/effects/falldown",selectTile:"audio/effects/click",swap:"audio/effects/swapmove",multiplier:"audio/effects/changecellcoeff",chocolatePotChangeState:"audio/effects/wellwater",chocolatePotEmit:"audio/effects/flywater",taskCompleted:"audio/effects/task",taskShowingBefore:"audio/effects/initialshowtask",taskShowingAfter:"audio/effects/showtask",scoreBreakpointReached:"audio/effects/getstar",bossPandaCollect:"audio/entities/panda/panda",reachLevelStar1:"audio/effects/star1",reachLevelStar2:"audio/effects/star2",reachLevelStar3:"audio/effects/star3",shuffleField:"audio/effects/shuffle",showField:"audio/effects/showfield",bossPiggyCollect:"audio/entities/piggy/piggy",applyBoosterPlusOne:"audio/effects/plusoneall",applyBoosterCat:"audio/effects/deletecolor",applyBoosterCart:"audio/effects/deletecolumn",applyBoosterTrowel:"audio/effects/deletecell",startBoosterSuperTile:"audio/effects/caketakelife",explode1:"audio/effects/explode1",explode2:"audio/effects/explode2",explode3:"audio/effects/explode3",explode4:"audio/effects/explode4",explode5:"audio/effects/explode5",fireworkLaunch1:"audio/effects/firework-launch-1",fireworkLaunch2:"audio/effects/firework-launch-2",fireworkLaunch3:"audio/effects/firework-launch-3",fireworkExplode1:"audio/effects/firework-explode-1",fireworkExplode2:"audio/effects/firework-explode-2",fireworkExplode3:"audio/effects/firework-explode-3",fireworkExplode4:"audio/effects/firework-explode-4",finalCandyExplode1:"audio/effects/final-candy-explode-1",finalCandyExplode2:"audio/effects/final-candy-explode-2",finalCandyExplode3:"audio/effects/final-candy-explode-3",finalCandyExplode4:"audio/effects/final-candy-explode-4",finalCandyExplode5:"audio/effects/final-candy-explode-5",doubleSuperTileExplode:"audio/entities/supertile/double-supertile-explode-1",doubleSuperTileRotate:"audio/entities/supertile/double-supertile-rotate-1",superTileExplode:"audio/entities/supertile/supertile-explode-2",superTileRotate:"audio/entities/supertile/supertile-rotate-2",superTileEmit:"audio/entities/supertile/supertile-emit-1",heartChangeGroup:"audio/entities/heart/heart-change-group",flowerChangeGroup:"audio/entities/flower/flower",heroThrow:"audio/effects/hero-throw",purchase:"audio/effects/buymoves",ribbon1:"audio/entities/ribbon/ribbon1",ribbon0:"audio/entities/ribbon/ribbon0",candyEmit:"audio/effects/createquadcell",popcornExplode:"audio/entities/popcorn/popcorn",bombrobbons:"audio/entities/bombrobbons/s_pop",pinataEmit:"audio/entities/pinata/pinataemit"},cc._RF.pop()},{}],"AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f0562P2qoZWEYbEEzszKMRo","AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.AudioEffectsPlayer=void 0;var o=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),a=function(){function e(e){var t=e.audioManager,n=e.userSettings;this._audioManager=t,this._userSettings=n}var t=e.prototype;return t.create=function(e,t){var n=this;return void 0===t&&(t={}),new o.FunctionAnimation(function(){return n.play(e,t)})},t.play=function(e,t){if(this._userSettings.get("effects"))return this._audioManager.play(e,t)},e}();n.AudioEffectsPlayer=a,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"AudioEngine (@tapclap.game-kit.audio-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"aaf22cV9ixEsbkwUdl/oGyZ","AudioEngine (@tapclap.game-kit.audio-manager)"),n.__esModule=!0,n.AudioEngine=void 0;var o=function(){function e(){}var t=e.prototype;return t.play=function(e,t){var n=void 0===t?{}:t;n.loop,n.volume},t.stop=function(){},t.pauseAll=function(){},t.resumeAll=function(){},t.load=function(){},t.setFinishListener=function(){},t.isPlaying=function(){},t.getInstanceId=function(){},t.getCurrentTime=function(){},t.getDuration=function(){},t.registerSource=function(){},e}();n.AudioEngine=o,cc._RF.pop()},{}],"AudioManager (@tapclap.game-kit.audio-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"78e07uZXYtFapReRUga/vhP","AudioManager (@tapclap.game-kit.audio-manager)"),n.__esModule=!0,n.AudioManager=void 0;var o=function(){function e(e,t){void 0===t&&(t={}),this._engine=e,this._config=t}var t=e.prototype;return t.play=function(e,t){void 0===t&&(t={});var n=Object.assign(this._getOptionsForAudio(e),t);if(this._engine.isPlaying(e)){var o=this._engine.getCurrentTime(e),a=this._engine.getDuration(e);return o>0&&a>0&&o/a>=n.mergable?this._engine.play(e,n):this._engine.getInstanceId(e)}return this._engine.play(e,n)},t.setFinishListener=function(e,t){this._engine.setFinishListener(e,t)},t.stop=function(e){return this._engine.stop(e)},t.pauseAll=function(){this._engine.pauseAll()},t.resumeAll=function(){this._engine.resumeAll()},t.load=function(e,t){return cc.warn("Load independently, after use registerSource method."),this._engine.load(e,t)},t.registerSource=function(e,t){this._engine.registerSource(e,t)},t._getOptionsForAudio=function(e){return this._config[e]||{mergable:1,volume:1,loop:!1}},e.formatPathWithExt=function(e,t){return[].concat(e.split("/").slice(0,-1),[t],e.split("/").slice(-1)).join("/")},e}();n.AudioManager=o,cc._RF.pop()},{}],"AuthPayload (@tapclap.sdk-x.auth-payload)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"f25ceWHakFM0oFLg3N6lLR8","AuthPayload (@tapclap.sdk-x.auth-payload)"),n.__esModule=!0,n.AuthPayload=void 0;var a=function(){function e(e){void 0===e&&(e={}),this._type=e.type||"unknown",this._userId=e.userId||"",this._payload=e.payload,this._ref=e.ref}var t,n,a=e.prototype;return a.serialize=function(){return{type:this.type,userId:this.userId,payload:this.payload,ref:this.ref}},a.toJSON=function(){return this.serialize()},t=e,(n=[{key:"type",get:function(){return this._type}},{key:"userId",get:function(){return this._userId}},{key:"payload",get:function(){return this._payload}},{key:"ref",get:function(){return this._ref}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.AuthPayload=a,cc._RF.pop()},{}],"AuthProvider (@tapclap.sdk-x.auth-service)":[function(e,t,n){"use strict";cc._RF.push(t,"d7a6aZigpdTjqNSPablvZsH","AuthProvider (@tapclap.sdk-x.auth-service)"),Object.defineProperty(n,"__esModule",{value:!0}),n.AuthProvider=void 0;var o=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),a=function(){function e(){}return e.prototype.getType=function(){return this.constructor.PROVIDER_TYPE},e.prototype.init=function(){return Promise.resolve()},e.prototype.signIn=function(){return Promise.resolve(new o.AuthPayload({type:this.getType()}))},e.prototype.signOut=function(){return Promise.resolve()},e.PROVIDER_TYPE="unknown",e}();n.AuthProvider=a,cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)"}],"AuthService (@tapclap.sdk-x.auth-service)":[function(e,t,n){"use strict";cc._RF.push(t,"57b4eQ22S5asZGzNEHm2jrK","AuthService (@tapclap.sdk-x.auth-service)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},p=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.AuthService=n.NoAuthorizedProvidersError=void 0;var l=e("./EventEmitter (@tapclap.utils-js.events)"),m=e("./BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)"),u=e("./MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)"),d=function(e){function t(t){return void 0===t&&(t="No authorized providers"),e.call(this,t)||this}return a(t,e),t}(Error);n.NoAuthorizedProvidersError=d;var y=function(e){function t(t){var n=e.call(this)||this;return n._availableProvidersTypes=[],n._authPayloads=new Map,n._providers=t.providers,n._storage=t.storage||new u.MemoryAuthStorage,n._handler=t.handler||new m.BaseAuthHandler,n}return a(t,e),t.prototype._initProvider=function(e){return r(this,void 0,Promise,function(){var n,o;return i(this,function(a){switch(a.label){case 0:n=e.getType(),a.label=1;case 1:return a.trys.push([1,3,4,5]),this.emit(t.EVENT_INIT_PROVIDER_BEGIN,n),[4,e.init()];case 2:return a.sent(),this._availableProvidersTypes.push(n),this.emit(t.EVENT_INIT_PROVIDER_SUCCESS,n),[3,5];case 3:return o=a.sent(),console.error("init",n,o),this.emit(t.EVENT_INIT_PROVIDER_FAIL,n),[3,5];case 4:return this.emit(t.EVENT_INIT_PROVIDER_END,n),[7];case 5:return[2]}})})},t.prototype._getProviderByType=function(e){var t=this._providers.find(function(t){return t.getType()===e});if(!t)throw new ReferenceError(e);return t},t.prototype._signInByType=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this._getProviderByType(e).signIn()];case 1:return t=n.sent(),this._authPayloads.set(t.type,t),[2,t]}})})},t.prototype._signUp=function(){return r(this,void 0,Promise,function(){var e,t,n,o,a,r,s,p;return i(this,function(i){switch(i.label){case 0:return[4,this._storage.getAuthorizedProviders()];case 1:e=i.sent(),i.label=2;case 2:i.trys.push([2,9,10,11]),t=c(e),n=t.next(),i.label=3;case 3:if(n.done)return[3,8];o=n.value,i.label=4;case 4:return i.trys.push([4,6,,7]),[4,this._signInByType(o)];case 5:return i.sent(),[3,7];case 6:return a=i.sent(),console.log(a),[3,7];case 7:return n=t.next(),[3,3];case 8:return[3,11];case 9:return r=i.sent(),s={error:r},[3,11];case 10:try{n&&!n.done&&(p=t.return)&&p.call(t)}finally{if(s)throw s.error}return[7];case 11:return[2]}})})},t.prototype._signOut=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,5]),[4,this._getProviderByType(e).signOut()];case 1:return n.sent(),[3,5];case 2:return t=n.sent(),console.error("sign out",t),[3,5];case 3:return this._authPayloads.delete(e),[4,this._storage.removeAuthorizedProvider(e)];case 4:return n.sent(),[7];case 5:return[2]}})})},t.prototype.init=function(){return r(this,void 0,Promise,function(){var e,t=this;return i(this,function(n){switch(n.label){case 0:return e=this._providers.map(function(e){return t._initProvider(e)}),[4,Promise.all(e)];case 1:return n.sent(),[2]}})})},t.prototype.getAuthorizations=function(){return Array.from(this._authPayloads.values())},t.prototype.getAvailableProviders=function(){var e=this;return this._providers.map(function(e){return e.getType()}).filter(function(t){return e._availableProvidersTypes.includes(t)})},t.prototype.signUp=function(){return r(this,void 0,Promise,function(){var e,n;return i(this,function(o){switch(o.label){case 0:this.emit(t.EVENT_SIGN_UP_BEGIN),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._signUp()];case 2:if(o.sent(),!(e=this.getAuthorizations()).length)throw new d;return[4,this._handler.onSignIn(e)];case 3:return o.sent(),this.emit(t.EVENT_SIGN_UP_SUCCESS,e),this.emit(t.EVENT_SIGN_UP_END),[2,e];case 4:return n=o.sent(),[4,this._handler.onSignUpFail()];case 5:throw o.sent(),this.emit(t.EVENT_SIGN_UP_FAIL,n),this.emit(t.EVENT_SIGN_UP_END),n;case 6:return[2]}})})},t.prototype.signIn=function(e){return r(this,void 0,Promise,function(){var n,o,a;return i(this,function(r){switch(r.label){case 0:this.emit(t.EVENT_SIGN_IN_BEGIN,e),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this._signInByType(e)];case 2:return n=r.sent(),[4,this._storage.addAuthorizedProvider(n.type)];case 3:return r.sent(),o=this.getAuthorizations(),[4,this._handler.onSignIn(o)];case 4:return r.sent(),this.emit(t.EVENT_SIGN_IN_SUCCESS,e,n),this.emit(t.EVENT_SIGN_IN_END,e),[2,n];case 5:throw a=r.sent(),console.error("sign in",e,a),this.emit(t.EVENT_SIGN_IN_FAIL,a),this.emit(t.EVENT_SIGN_IN_END,e),a;case 6:return[2]}})})},t.prototype.signOut=function(e){return r(this,void 0,Promise,function(){var n,o,a,r,s,l,m,u,d;return i(this,function(i){switch(i.label){case 0:this.emit(t.EVENT_SIGN_OUT_BEGIN),i.label=1;case 1:return i.trys.push([1,13,14,15]),n=[],e?(n.push(e),[3,4]):[3,2];case 2:return[4,this._storage.getAuthorizedProviders()];case 3:o=i.sent(),n.push.apply(n,p(o)),i.label=4;case 4:i.trys.push([4,9,10,11]),a=c(n),r=a.next(),i.label=5;case 5:return r.done?[3,8]:(s=r.value,[4,this._signOut(s)]);case 6:i.sent(),i.label=7;case 7:return r=a.next(),[3,5];case 8:return[3,11];case 9:return l=i.sent(),u={error:l},[3,11];case 10:try{r&&!r.done&&(d=a.return)&&d.call(a)}finally{if(u)throw u.error}return[7];case 11:return[4,this._handler.onSignOut(n)];case 12:return i.sent(),this.emit(t.EVENT_SIGN_OUT_SUCCESS,n),[3,15];case 13:return m=i.sent(),this.emit(t.EVENT_SIGN_OUT_FAIL,m),[3,15];case 14:return this.emit(t.EVENT_SIGN_OUT_END),[7];case 15:return[2]}})})},t.EVENT_INIT_PROVIDER_BEGIN="initProviderBegin",t.EVENT_INIT_PROVIDER_SUCCESS="initProviderSuccess",t.EVENT_INIT_PROVIDER_FAIL="initProviderFail",t.EVENT_INIT_PROVIDER_END="initProviderEnd",t.EVENT_SIGN_UP_BEGIN="signUpBegin",t.EVENT_SIGN_UP_SUCCESS="signUpSuccess",t.EVENT_SIGN_UP_FAIL="signUpFail",t.EVENT_SIGN_UP_END="signUpEnd",t.EVENT_SIGN_IN_BEGIN="signInBegin",t.EVENT_SIGN_IN_SUCCESS="signInSuccess",t.EVENT_SIGN_IN_FAIL="signInFail",t.EVENT_SIGN_IN_END="signInEnd",t.EVENT_SIGN_OUT_BEGIN="signOutBegin",t.EVENT_SIGN_OUT_SUCCESS="signOutSuccess",t.EVENT_SIGN_OUT_FAIL="signOutFail",t.EVENT_SIGN_OUT_END="signOutEnd",t}(l.EventEmitter);n.AuthService=y,cc._RF.pop()},{"./BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)":"BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)","./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)":"MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)"}],"AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"eb603ponUpUpom5G8RjOnv1","AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.AutoCombinationGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./PipelineSystem (@tapclap.match-x.engine.systems)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var o;return(o=e.call(this)||this)._world=void 0,o._count=0,o._world=t,o._count=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.compute=function(){var e=this._world.getState(a.PipelineSystem.STATE),t=e&&e.data;return Boolean(t&&t.loopIndex>=this._count)},o}(o.GameEventStrategy);n.AutoCombinationGameEventStrategy=i,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","./PipelineSystem (@tapclap.match-x.engine.systems)":"PipelineSystem (@tapclap.match-x.engine.systems)"}],"AutoGoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"0966d4KY1BeyoVdzkj9nn/D","AutoGoalCreator (@tapclap.match-x.engine.goals.creators)"),n.__esModule=!0,n.AutoGoalCreator=void 0;var o=e("./SimpleGoal (@tapclap.match-x.engine.goals)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._world=t,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.create=function(e){for(var t=void 0===e?{}:e,n=t.entityType,r=t.count,i=this._world.getComponent("tiles").grid,c=new Set,s=0;s<i.rows;s++)for(var p=0;p<i.cols;p++)for(var l,m=a(i.getCell(s,p).entities);!(l=m()).done;){var u=l.value;u&&u.type===n&&c.add(u)}return new o.SimpleGoal(n,c.size,r)},r}(e("./GoalCreator (@tapclap.match-x.engine.goals.creators)").GoalCreator);n.AutoGoalCreator=s,cc._RF.pop()},{"./GoalCreator (@tapclap.match-x.engine.goals.creators)":"GoalCreator (@tapclap.match-x.engine.goals.creators)","./SimpleGoal (@tapclap.match-x.engine.goals)":"SimpleGoal (@tapclap.match-x.engine.goals)"}],"AvatarComponent (scripts.common.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5fa1aBykKhXc7rY/JMcDBjU","AvatarComponent (scripts.common.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.AvatarComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sprite=null,t._frame=null,t._showFrame=!1,t}return a(t,e),Object.defineProperty(t.prototype,"showFrame",{get:function(){return this._showFrame},set:function(e){this._showFrame=e,this._frame.active=e},enumerable:!1,configurable:!0}),t.prototype.setAvatar=function(e){var t=this;e instanceof cc.SpriteFrame&&(this._sprite.spriteFrame=e),"string"==typeof e&&cc.assetManager.loadRemote(e,{ext:".image"},function(e,n){!e&&n&&(t._sprite.spriteFrame=new cc.SpriteFrame(n))})},r([s({type:cc.Sprite,visible:!0})],t.prototype,"_sprite",void 0),r([s({type:cc.Node,visible:!0})],t.prototype,"_frame",void 0),r([s({visible:!0})],t.prototype,"showFrame",null),r([c],t)}(cc.Component);n.AvatarComponent=p,cc._RF.pop()},{}],"BackdropController (@tapclap.game-kit.ui.backdrop)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h;function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=v(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"a36dfrB4w1OMrgLGD7DWT5B","BackdropController (@tapclap.game-kit.ui.backdrop)"),n.__esModule=!0,n.BackdropController=void 0;var E=cc._decorator,x=E.ccclass,A=E.property,O=[cc.Node.EventType.TOUCH_START,cc.Node.EventType.TOUCH_END,cc.Node.EventType.TOUCH_MOVE,cc.Node.EventType.TOUCH_CANCEL,cc.Node.EventType.MOUSE_DOWN,cc.Node.EventType.MOUSE_ENTER,cc.Node.EventType.MOUSE_LEAVE,cc.Node.EventType.MOUSE_MOVE,cc.Node.EventType.MOUSE_UP,cc.Node.EventType.MOUSE_WHEEL],R=(o=A({type:cc.Node,tooltip:"\u0426\u0435\u043b\u044c \u043f\u043e\u0434 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0442\u044f\u0433\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0437\u0430\u0442\u0435\u043c\u043d\u0435\u043d\u0438\u0435, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e Canvas",visible:!0}),a=A({type:cc.Float,tooltip:"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u043f\u043e\u044f\u0432\u043b\u0435\u043d\u0438\u044f",visible:!0}),r=A({type:cc.Float,tooltip:"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438\u0441\u0447\u0435\u0437\u043d\u043e\u0432\u0435\u043d\u0438\u044f",visible:!0}),i=A({type:cc.Integer,tooltip:"\u041f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c %",visible:!0}),c=A({tooltip:"\u0413\u0440\u0443\u043f\u043f\u0430 \u0434\u043b\u044f cc.Node \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",visible:!0}),s=A({tooltip:"\u0413\u0440\u0443\u043f\u043f\u0430 \u0434\u043b\u044f cc.Node \u0434\u043b\u044f \u043f\u043e\u0434\u0441\u0442\u0432\u0435\u0442\u043a\u0438",visible:!0}),x((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_target",m,C(t)),b(t,"_fadeInDuration",u,C(t)),b(t,"_fadeOutDuration",d,C(t)),b(t,"nodeOpacity",y,C(t)),b(t,"_defaultGroup",f,C(t)),b(t,"_highlightGroup",h,C(t)),t._highlightedNodes=new Set,t._inputNodes=new Set,t._stash=[],t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a=o.prototype;return a._blockEvent=function(e){for(var t=!0,n=e.target;n;){if(this._inputNodes.has(n)){t=!1;break}n=n.parent}t&&e.stopPropagation()},a._resizeNode=function(){this.node.width=this._target.width,this.node.height=this._target.height},a._updateHighlight=function(e,t,n){void 0===n&&(n=!0),cc.isValid(e)&&(e.group=t,t===this._highlightGroup?(this._highlightedNodes.add(e),n&&this._inputNodes.add(e)):(this._highlightedNodes.delete(e),this._inputNodes.delete(e)))},a._unhighlightAll=function(){for(var e,t=g(this._highlightedNodes);!(e=t()).done;){var n=e.value;n.isValid&&this.unhighlight(n)}this._highlightedNodes.clear(),this._inputNodes.clear()},a._clear=function(){this._unhighlightAll(),this._stash=[]},a._getNode=function(e){return e instanceof cc.Component?e.node:e},a.onLoad=function(){null===this._target&&(this._target=cc.find("Canvas")),this._target.on(cc.Node.EventType.SIZE_CHANGED,this._resizeNode,this),this.node.opacity=0,this.node.active=!1},a.onEnable=function(){for(var e,t=g(O);!(e=t()).done;){var n=e.value;this._target.on(n,this._blockEvent,this,!0)}},a.onDisable=function(){for(var e,t=g(O);!(e=t()).done;){var n=e.value;this._target.off(n,this._blockEvent,this,!0)}this._clear()},a.hasHighlight=function(e){return!(this.node.active&&this.node.opacity>0)||this._highlightedNodes.has(this._getNode(e))},a.highlight=function(e,t){void 0===t&&(t=!0),this._updateHighlight(this._getNode(e),this._highlightGroup,t)},a.unhighlight=function(e){this._updateHighlight(this._getNode(e),this._defaultGroup)},a.hasInput=function(e){return!this.node.active||this._inputNodes.has(this._getNode(e))},a.attachInput=function(e){this._inputNodes.add(this._getNode(e))},a.detachInput=function(e){this._inputNodes.delete(this._getNode(e))},a.enable=function(){this.node.active=!0},a.disable=function(){this.node.active=!1},a.fadeIn=function(e){var t=this;return new Promise(function(n){t._resizeNode(),t.node.runAction(cc.sequence([cc.fadeTo(void 0===e?t._fadeInDuration:e,Math.round(t.nodeOpacity/100*255)),cc.callFunc(n)]))})},a.fadeOut=function(e){var t=this;return new Promise(function(n){0!==t.node.opacity&&t.node.active?t.node.runAction(cc.sequence([cc.fadeTo(void 0===e?t._fadeOutDuration:e,0),cc.callFunc(t._clear,t),cc.callFunc(n)])):n()})},a.stashHighlight=function(){this._stash.unshift(Array.from(this._highlightedNodes)),this._unhighlightAll()},a.restoreHighlight=function(){this._unhighlightAll();var e=this._stash.shift();if(e)for(var t,n=g(e);!(t=n()).done;){var o=t.value;this.highlight(o)}},a.getHighlightedNodes=function(){return this._highlightedNodes},o}(cc.Component),m=S(l.prototype,"_target",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S(l.prototype,"_fadeInDuration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),d=S(l.prototype,"_fadeOutDuration",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),y=S(l.prototype,"nodeOpacity",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 75}}),f=S(l.prototype,"_defaultGroup",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),h=S(l.prototype,"_highlightGroup",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"highlight"}}),p=l))||p);n.BackdropController=R,cc._RF.pop()},{}],"BackdropManager (@tapclap.game-kit.ui.backdrop)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"77bf8ozpZpIkaBXwGsUnvV+","BackdropManager (@tapclap.game-kit.ui.backdrop)"),n.__esModule=!0,n.BackdropManager=void 0;var a=function(e){var t,n;function a(){var t;return(t=e.call(this)||this)._controller=null,t._enableCount=0,t._fadeInCount=0,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.setController=function(e){this._controller=e,this._enableCount=0,this._fadeInCount=0},r.getController=function(){return this._controller},r.enable=function(){0===this._enableCount&&this._controller.enable(),this._enableCount++},r.disable=function(){this._enableCount=Math.max(--this._enableCount,0),0===this._enableCount&&this._controller.disable()},r.isEnabled=function(){return this._enableCount>0},r.isShown=function(){return this._fadeInCount>0},r.fadeIn=function(e){var t=this,n=Promise.resolve();return 0===this._fadeInCount&&(n=Promise.resolve().then(function(){return t.emit(a.EVENT_SHOW)}).then(function(){return t._controller.fadeIn(e)}).then(function(){return t.emit(a.EVENT_SHOWN)})),this._fadeInCount++,n},r.fadeOut=function(e){var t=this;return this._fadeInCount=Math.max(--this._fadeInCount,0),0===this._fadeInCount?Promise.resolve().then(function(){return t.emit(a.EVENT_HIDE)}).then(function(){return t._controller.fadeOut(e)}).then(function(){return t.emit(a.EVENT_HIDDEN)}):Promise.resolve()},r.show=function(e){var t=this;return Promise.resolve().then(function(){return t.enable()}).then(function(){return t.fadeIn(e)})},r.hide=function(e){var t=this;return Promise.resolve().then(function(){return t.fadeOut(e)}).then(function(){return t.disable()})},r.hasHighlight=function(e){return this._controller.hasHighlight(e)},r.highlight=function(e){this._controller.highlight(e)},r.unhighlight=function(e){this._controller.unhighlight(e)},r.hasInput=function(e){return this._controller.hasInput(e)},r.attachInput=function(e){this._controller.attachInput(e)},r.detachInput=function(e){this._controller.detachInput(e)},r.stashHighlight=function(){this._controller.stashHighlight()},r.restoreHighlight=function(){this._controller.restoreHighlight()},a}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.BackdropManager=a,a.EVENT_SHOW=Symbol("show"),a.EVENT_SHOWN=Symbol("shown"),a.EVENT_HIDE=Symbol("hide"),a.EVENT_HIDDEN=Symbol("hidden"),cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"c5bcamhF/hL+oy55aUvvZ3q","BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.BackdropScenarioProducer=void 0;var o=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.produce=function(e){var t=new o.TutorialScenarioBuilder({backdropManager:this._backdropManager});switch(e.action){case"show":t.showBackdrop();break;case"hide":t.hideBackdrop()}return t.build()},r}(e("./BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)").BaseScenarioProducer);n.BackdropScenarioProducer=r,cc._RF.pop()},{"./BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":"BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)":[function(e,t,n){"use strict";cc._RF.push(t,"0051c/mqrtP2pnlahSKASkB","BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)"),n.__esModule=!0,n.BackdropScreenLocker=void 0;var o=e("./ScreenLocker (@tapclap.game-kit.ui.screen-locker)"),a=e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var o;return(o=e.call(this)||this)._backdropManager=t,o._prefab=n,o._spinner=null,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._showSpinner=function(){if(this._prefab&&!this._spinner){this._spinner=cc.instantiateFrom(this._prefab),this._backdropManager.getController().node.addChild(this._spinner),this._backdropManager.highlight(this._spinner);var e=this._spinner.getComponent(a.SpinnerComponent);if(e)return e.show()}return Promise.resolve()},i._destroySpinner=function(){this._spinner&&(this._backdropManager.getController().node.removeChild(this._spinner),this._spinner.destroy(),this._spinner=null)},i._hideSpinner=function(){var e=this;if(this._spinner){var t=this._spinner.getComponent(a.SpinnerComponent);if(t)return Promise.resolve().then(function(){return t.hide()}).then(function(){return e._destroySpinner()});this._destroySpinner()}return Promise.resolve()},i.lock=function(){var e=this;return Promise.resolve().then(function(){return e._backdropManager.show()}).then(function(){return e._backdropManager.stashHighlight()}).then(function(){return e._showSpinner()})},i.unlock=function(){var e=this;return Promise.resolve().then(function(){return e._hideSpinner()}).then(function(){return e._backdropManager.restoreHighlight()}).then(function(){return e._backdropManager.hide()})},o}(o.ScreenLocker);n.BackdropScreenLocker=i,cc._RF.pop()},{"./ScreenLocker (@tapclap.game-kit.ui.screen-locker)":"ScreenLocker (@tapclap.game-kit.ui.screen-locker)","./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)"}],"BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"01a2c19ZbVd6YE7dKBbHzxa","BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.BackendRemoteConfigFallback=void 0;var o=function(){function e(e){var t=e.httpGateway,n=e.path;this._httpGateway=t,this._path=n}return e.prototype.getData=function(e){return this._httpGateway.get(this._path+"?type="+e)},e.prototype.updateData=function(e){return this._httpGateway.post(this._path,e)},e}();n.BackendRemoteConfigFallback=o,cc._RF.pop()},{}],"BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"6d154E/Y7BaWa7rGCn7oReA","BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundAnimationComponent=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),p=e("./BounceAnimation (scripts.windows.items.daily-reward.animation)"),l=e("./SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)"),m=cc._decorator,u=m.ccclass,d=m.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._appearanceIndexDelay=0,t._appearanceDelay=0,t._appearanceDuration=0,t._appearancePositionAnimation=null,t._appearanceScaleXAnimation=null,t._appearanceScaleYAnimation=null,t._toAvailableChangingAnimation=null,t._toRecivedChangingAnimation=null,t._bounceAnimation=null,t._idleAnimationKeys=[],t._title=null,t._titleAnimationDuration=0,t._idleDelay=0,t._glowSkeleton=null,t._idle=null,t._activeTitleAnimation=null,t}return a(t,e),t.prototype.setDefault=function(){this._toAvailableChangingAnimation&&this._toAvailableChangingAnimation.undo(),this._idle&&this._idle.stop()},t.prototype.runAppearing=function(e,t,n){var o=this;this.node.opacity=s.AnimationKey.MIN_OPACITY;var a=cc.v2(0,0),r=this.node.scale,p=cc.tween(this.node).delay(this._appearanceIndexDelay*n).parallel(cc.tween().delay(this._appearanceDelay).to(this._appearanceDuration,{opacity:s.AnimationKey.MAX_OPACITY}),cc.tween().to(this._appearancePositionAnimation.duration,{position:{value:a,progress:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var c=i(n,4),s=c[3];return cc.v2(a.x,a.y+o._appearancePositionAnimation.getValueByTime(s)*(e<t?1:-1))}}}),cc.tween().to(this._appearanceScaleXAnimation.duration,{scaleX:{value:r,progress:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i(e,4),a=n[3];return r+o._appearanceScaleXAnimation.getValueByTime(a)}}}),cc.tween().to(this._appearanceScaleYAnimation.duration,{scaleY:{value:r,progress:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i(e,4),a=n[3];return r+o._appearanceScaleYAnimation.getValueByTime(a)}}}));return c.PromisifyTween.start(p)},t.prototype.runChangingToRecived=function(){var e=this,t=this.node.scale,n=cc.tween(this.node).to(this._bounceAnimation.duration,{scale:{value:s.AnimationKey.DEFAULT_SCALE,progress:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var a=i(n,4),r=a[3];return t-e._bounceAnimation.getValueByTime(r)}}});return this._idle&&this._idle.stop(),this._toAvailableChangingAnimation.stop(),Promise.all([this._toRecivedChangingAnimation.runTransition(),c.PromisifyTween.start(n)])},t.prototype.runChangingToAvailable=function(e){return this._toAvailableChangingAnimation.runTransition(e)},t.prototype.runIdle=function(){if(this._glowSkeleton&&(this._glowSkeleton.animation="animation"),this._idleAnimationKeys.length>0){var e=i(this._idleAnimationKeys,4),t=e[0],n=e[1],o=e[2],a=e[3],r={easing:s.AnimationKey.QUAD_IN_OUT_EASING};return this._idle=cc.tween(this.node).repeatForever(cc.tween().to(t.duration,{scale:t.scale},r).to(n.duration,{scale:n.scale},r).to(o.duration,{scale:o.scale},r).to(a.duration,{scale:a.scale},r).delay(this._idleDelay)),this._idle.start()}},t.prototype.runTitleAnimation=function(e,t){var n=e.startColor,o=e.endColor;void 0===t&&(t=0);var a=cc.tween(this._title).delay(t).to(this._titleAnimationDuration,{color:o}),r=c.PromisifyTween.startWithGettingTween(a);return this._activeTitleAnimation&&this._activeTitleAnimation.stop(),this._title.color=n,this._activeTitleAnimation=r.tween,r.promise},r([d({visible:!0,min:0})],t.prototype,"_appearanceIndexDelay",void 0),r([d({visible:!0,min:0})],t.prototype,"_appearanceDelay",void 0),r([d({visible:!0,min:0})],t.prototype,"_appearanceDuration",void 0),r([d({type:p.BounceAnimation,visible:!0})],t.prototype,"_appearancePositionAnimation",void 0),r([d({type:p.BounceAnimation,visible:!0})],t.prototype,"_appearanceScaleXAnimation",void 0),r([d({type:p.BounceAnimation,visible:!0})],t.prototype,"_appearanceScaleYAnimation",void 0),r([d({type:l.SmoothTransitionAnimation,visible:!0})],t.prototype,"_toAvailableChangingAnimation",void 0),r([d({type:l.SmoothTransitionAnimation,visible:!0})],t.prototype,"_toRecivedChangingAnimation",void 0),r([d({type:p.BounceAnimation,visible:!0})],t.prototype,"_bounceAnimation",void 0),r([d({type:[s.AnimationKey],visible:!0})],t.prototype,"_idleAnimationKeys",void 0),r([d({type:cc.Node,visible:!0})],t.prototype,"_title",void 0),r([d({visible:!0,min:0})],t.prototype,"_titleAnimationDuration",void 0),r([d({visible:!0,min:0})],t.prototype,"_idleDelay",void 0),r([d({type:sp.Skeleton,visible:!0})],t.prototype,"_glowSkeleton",void 0),r([u],t)}(cc.Component);n.BackgroundAnimationComponent=y,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./BounceAnimation (scripts.windows.items.daily-reward.animation)":"BounceAnimation (scripts.windows.items.daily-reward.animation)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)","./SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)":"SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)"}],"BadgeComponent (scripts.common.components)":[function(e,t,n){"use strict";cc._RF.push(t,"70e80HPylBW3r75Wwq0YQZs","BadgeComponent (scripts.common.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BadgeComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._node=null,t._label=null,t}return a(t,e),Object.defineProperty(t.prototype,"isActive",{set:function(e){this._node.active=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{set:function(e){this._label.string=e},enumerable:!1,configurable:!0}),r([s({type:cc.Node,visible:!0})],t.prototype,"_node",void 0),r([s({type:cc.Label,visible:!0})],t.prototype,"_label",void 0),r([c],t)}(cc.Component);n.BadgeComponent=p,cc._RF.pop()},{}],"BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)":[function(e,t,n){"use strict";cc._RF.push(t,"10a18nHH3ZSE4g3XAo2Dte9","BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BadgeView=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._appearanceAnimation=null,t._idleAnimation=null,t._enableOpacityAutomatically=!1,t._maxOpacityValue=255,t._animation=null,t._isActive=!1,t}return a(t,e),t.prototype.setActive=function(e){this._setAnimationComponent(),e?(this._enableOpacityAutomatically&&this._setOpacity(this._maxOpacityValue),this._handleAnimations()):this._setOpacity(0),this._isActive=e},t.prototype._setAnimationComponent=function(){null===this._animation&&(this._animation=this.getComponent(cc.Animation))},t.prototype._handleAnimations=function(){null!==this._animation&&(!1===this._isActive&&this._playAppearanceAnimation(),this._isNoPlayingAnimations()&&this._playIdleAnimation())},t.prototype._playAppearanceAnimation=function(){null!==this._appearanceAnimation&&this._animation.play(this._appearanceAnimation.name)},t.prototype._playIdleAnimation=function(){null!==this._idleAnimation&&this._animation.play(this._idleAnimation.name)},t.prototype._isNoPlayingAnimations=function(){var e=this._animation.currentClip,t=this._animation.getAnimationState(e?e.name:"");return t&&!1===t.isPlaying},t.prototype._setOpacity=function(e){this.node.opacity=e},r([s({type:cc.AnimationClip,visible:!0})],t.prototype,"_appearanceAnimation",void 0),r([s({type:cc.AnimationClip,visible:!0})],t.prototype,"_idleAnimation",void 0),r([s({visible:!0})],t.prototype,"_enableOpacityAutomatically",void 0),r([c],t)}(cc.Component);n.BadgeView=p,cc._RF.pop()},{}],"BaseAdProvider (@tapclap.sdk-x.ad-service.providers)":[function(e,t,n){"use strict";cc._RF.push(t,"93549aMCdVbu68TYbnsk2BI","BaseAdProvider (@tapclap.sdk-x.ad-service.providers)"),n.__esModule=!0,n.BaseAdProvider=void 0;var o=e("./AdProvider (@tapclap.sdk-x.ad-service)"),a=e("./AdRevenue (@tapclap.sdk-x.ad-service)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(){var t;return(t=e.call(this)||this)._isAvailable=!1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._createAdRevenue=function(e){if(e)return new a.AdRevenue(Object.assign({provider:this.getType()},e))},i._beforeInit=function(){return this._isAvailable=!1,Promise.resolve()},i._afterInit=function(){return this._isAvailable=!0,Promise.resolve()},i._doInit=function(){return Promise.reject("Method not implemented")},i._doShowAd=function(){return Promise.reject("Method not implemented")},i.isAvailable=function(){return this._isAvailable},i.init=function(){var e=this;return Promise.resolve().then(function(){return e._beforeInit()}).then(function(){return e._doInit()}).then(function(){return e._afterInit()})},i.showAd=function(){var e=this;return Promise.resolve().then(function(){return e._doShowAd()}).then(function(t){return e._createAdRevenue(t)})},o}(o.AdProvider);n.BaseAdProvider=i,cc._RF.pop()},{"./AdProvider (@tapclap.sdk-x.ad-service)":"AdProvider (@tapclap.sdk-x.ad-service)","./AdRevenue (@tapclap.sdk-x.ad-service)":"AdRevenue (@tapclap.sdk-x.ad-service)"}],"BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"b9082Om2ZtO1p2ecQ7qSPrp","BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.BaseAnimationWindowLayoutComponent=void 0;var o,a=e("./BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){var t;return(t=e.call(this)||this)._resolve=null,t._animationPromise=null,t._animationPromise=new Promise(function(e){t._resolve=e}),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var a=o.prototype;return a._runAnimation=function(){this._resolve()},a.getAnimationPromise=function(){return this._animationPromise},a.onLoad=function(){var e=this;this._windowEvent?this._addWindowEventCallback(function(){return e._runAnimation(),e.getAnimationPromise()}):this._runAnimation()},o}(a.BaseCustomWindowComponent))||o;n.BaseAnimationWindowLayoutComponent=i,cc._RF.pop()},{"./BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)":"BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)"}],"BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"7cfecx1A+9WfakTVfthmVKb","BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseAuthHandler=void 0;var r=function(){function e(){}return e.prototype.onSignIn=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.onSignOut=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.onSignUpFail=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e}();n.BaseAuthHandler=r,cc._RF.pop()},{}],"BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"91531wxiupMQaX1kFZSJE8D","BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.BaseCustomWindowComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),y=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function f(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.property,w=(o=C({type:d.WindowComponent,visible:function(){return!this._windowLayout}}),a=C({type:y.WindowLayoutComponent,visible:function(){return!this._window}}),r=C({type:cc.Enum({None:0,Shown:d.WindowComponent.EVENT_SHOWN,Hide:d.WindowComponent.EVENT_HIDE}),visible:!0}),i=C({visible:!0}),b((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return f(t=e.call.apply(e,[this].concat(o))||this,"_window",p,h(t)),f(t,"_windowLayout",l,h(t)),f(t,"_windowEvent",m,h(t)),f(t,"_onceWindowEvent",u,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=o.prototype;return a._getWindow=function(){return this._windowLayout?this._windowLayout.window:this._window},a._addWindowEventCallback=function(e){this._getWindow().events[this._onceWindowEvent?"once":"on"](this._windowEvent,e)},o}(cc.Component),p=v(s.prototype,"_window",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=v(s.prototype,"_windowLayout",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v(s.prototype,"_windowEvent",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=v(s.prototype,"_onceWindowEvent",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=s))||c);n.BaseCustomWindowComponent=w,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"daa50IX62BHzpL78gGkGTtE","BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.BaseScenarioProducer=void 0;var a=function(e){var t,n;function a(t){var n,o=t.backdropManager,a=t.sceneManager;return(n=e.call(this)||this)._backdropManager=o,n._sceneManager=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)").ScenarioProducer);n.BaseScenarioProducer=a,cc._RF.pop()},{"./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)"}],"BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"dcc62wP7dhVvKR9LFlHMG8m","BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),n.__esModule=!0,n.BaseTutorialStepStrategy=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype._getStepData=function(e,t){var n=[],a=[],r=e.data.targets;if(r)for(var i,c=o(r);!(i=c()).done;){var s=i.value,p=t.getEnabledComponent(s.grid);p&&function(){var e=p.grid;if(s.cells)for(var t,r=o(s.cells);!(t=r()).done;){var i=t.value;n.push(e.getCell(i.row,i.col))}if(s.pointers)for(var c,l=o(s.pointers);!(c=l()).done;){var m=c.value,u=m.offset,d=m.cells;a.push({offset:u,cells:d.map(function(t){return e.getCell(t.row,t.col)})})}}()}return{step:e,cells:n,pointers:a}},a}(e("./TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)").TutorialStepStrategy);n.BaseTutorialStepStrategy=c,cc._RF.pop()},{"./TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)":"TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)"}],"BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":[function(e,t,n){"use strict";cc._RF.push(t,"b52038DVcJJzoCrAUmxRziz","BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),n.__esModule=!0,n.BeforeLoseLevelState=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T=e("./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),I=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),M=e("./Offer (@tapclap.game-kit.offer-manager)"),j=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function W(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var H=cc._decorator,V=H.ccclass,K=H.property,U=(o=V("OfferView"),a=K(cc.Node),r=K(cc.Label),i=K(cc.Label),c=K(cc.Label),o((l=W((p=function(){function e(){N(this,"node",l,this),N(this,"amount",m,this),N(this,"description",u,this),N(this,"price",d,this)}var t=e.prototype;return t.setAmount=function(e){if(this.amount&&(this.amount.string="+"+e,this.description)){var t=this.description.node.getComponent(I.I18NLabel);t&&t.setString("+"+e+"moves")}},t.setPrice=function(e){this.price&&(this.price.string=e)},e}()).prototype,"node",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=W(p.prototype,"amount",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=W(p.prototype,"description",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=W(p.prototype,"price",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=p))||s),Y=(y=V("OfferViewType"),f=K(),h=K(U),y((_=W((v=function(){N(this,"type",_,this),N(this,"view",b,this)}).prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=W(v.prototype,"view",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g),z=(C=K({type:[Y],visible:!0}),w=K({type:j.ButtonControlComponent,visible:!0}),S=K({type:j.ButtonControlComponent,visible:!0}),E=K({type:j.ButtonControlComponent,visible:!0}),V((A=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return N(t=e.call.apply(e,[this].concat(o))||this,"_offerViews",O,B(t)),N(t,"_defeatButton",R,B(t)),N(t,"_watchAdButton",P,B(t)),N(t,"_purchaseButton",k,B(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,G(t,n);var a=o.prototype;return a.setData=function(e){var t=this;this._stateNodes=[];var n=e.offers;if(n)for(var a,r=function(){var e=a.value;if(e.state===M.Offer.STATE_AVAILABLE){var n=t._offerViews.find(function(t){return t.type===e.type}).view;if(n){var r=e.payload,i=r.moves,c=r.product;switch(i&&n.setAmount(i.amount),c&&n.setPrice(c.price),e.type){case M.Offer.TYPE_AD:t._watchAdButton.events.on(j.ButtonControlComponent.EVENT_CLICK,function(){return t._windowLayout.window.events.emit(o.EVENT_SELECT_OFFER,e)});break;case M.Offer.TYPE_PURCHASE:t._purchaseButton.events.on(j.ButtonControlComponent.EVENT_CLICK,function(){return t._windowLayout.window.events.emit(o.EVENT_SELECT_OFFER,e)})}t._stateNodes.push(n.node)}}},i=L(n);!(a=i()).done;)r()},a.initialize=function(){var e=this;this._defeatButton.events.on(j.ButtonControlComponent.EVENT_CLICK,function(){return e._windowLayout.window.events.emit(o.EVENT_DEFEAT)})},o}(T.LoseLevelState),O=W(A.prototype,"_offerViews",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=W(A.prototype,"_defeatButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=W(A.prototype,"_watchAdButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=W(A.prototype,"_purchaseButton",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=A))||x);n.BeforeLoseLevelState=z,z.EVENT_SELECT_OFFER="selectOffer",z.EVENT_DEFEAT="defeat",z.EVENT_WATCH_AD="watch_ad",z.EVENT_PURCHASE="purchase",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)"}],"BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"c2030o+b6lYgJBdI046OUAf","BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)"),n.__esModule=!0,n.BirthdayCakeExplodeAnimationCreator=void 0;var o=e("./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),a=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),r=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),i=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./BirthdayCakeViewComponent (scripts.common.match3-game.components)"),s=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)");function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._entityType=t.entityType,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),o.prototype.create=function(){var e=[],t=this._entity,n=this._affectedBy||this._blastedBy;return t.type===this._entityType&&function(){var o=t.getEnabledComponent(r.RenderComponent.KEY).node.getComponent(c.BirthdayCakeViewComponent),u=t.getEnabledComponent(a.CellHealthComponent.KEY),d=u.getValues(),y=u.getMaxValues();if(o)for(var f=0,h=0;f<d.length;f++)for(var g=d[f],v=y[f]-g,_=function(a){e.push({target:t,animation:new m.GroupAnimation([new s.ChainAnimation([n?new p.EventListenAnimation(n,"explode"):new l.DummyAnimation,new i.FunctionAnimation(function(){return o.activateCandle(a)})]),new l.DummyAnimation],!!n)})},b=h+=y[f-1]||0;b<h+v;b++)_(b)}(),e},o}(o.ExplodeAnimationCreator);n.BirthdayCakeExplodeAnimationCreator=d,cc._RF.pop()},{"./BirthdayCakeViewComponent (scripts.common.match3-game.components)":"BirthdayCakeViewComponent (scripts.common.match3-game.components)","./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"BirthdayCakeViewComponent (scripts.common.match3-game.components)":[function(e,t,n){"use strict";cc._RF.push(t,"fd0abBCK2RXa6SVKdHKcA0K","BirthdayCakeViewComponent (scripts.common.match3-game.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BirthdayCakeViewComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(){function e(){this._skeletonData=null,this.trackIndex=0,this._startAnimationKey="",this._idleAnimationKey=""}return Object.defineProperty(e.prototype,"skeletonData",{get:function(){if(this._skeletonData){var e=this._getSkeletonAnimations(),t=this.constructor.__attrs__;t.startAnimationIndex$_$enumList=e.map(function(e,t){return{name:e,value:t}}),t.idleAnimationIndex$_$enumList=e.map(function(e,t){return{name:e,value:t}})}return this._skeletonData},set:function(e){this._skeletonData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startAnimationIndex",{get:function(){return this._getSkeletonAnimations().indexOf(this._startAnimationKey)},set:function(e){this._skeletonData&&(this._startAnimationKey=Object.keys(this._skeletonData.skeletonJson.animations)[e])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleAnimationIndex",{get:function(){return this._getSkeletonAnimations().indexOf(this._idleAnimationKey)},set:function(e){this._skeletonData&&(this._idleAnimationKey=Object.keys(this._skeletonData.skeletonJson.animations)[e])},enumerable:!1,configurable:!0}),e.prototype._getSkeletonAnimations=function(){return this._skeletonData?Object.keys(this._skeletonData.skeletonJson.animations):[]},r([s({type:sp.SkeletonData})],e.prototype,"_skeletonData",void 0),r([s({type:sp.SkeletonData,visible:!1})],e.prototype,"skeletonData",null),r([s(cc.Integer)],e.prototype,"trackIndex",void 0),r([s()],e.prototype,"_startAnimationKey",void 0),r([s({type:cc.Enum({}),visible:function(){return!!this._skeletonData}})],e.prototype,"startAnimationIndex",null),r([s()],e.prototype,"_idleAnimationKey",void 0),r([s({type:cc.Enum({}),visible:function(){return!!this._skeletonData}})],e.prototype,"idleAnimationIndex",null),r([c("CandelTrackAnimationItem")],e)}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetNode=null,t.candelTrackAnimations=[],t}return a(t,e),Object.defineProperty(t.prototype,"targetNode",{get:function(){return this._targetNode},set:function(e){if(this._targetNode=e,this._targetNode){var t=this._targetNode.getComponent(sp.Skeleton);t&&this.candelTrackAnimations.forEach(function(e){e.skeletonData=t.skeletonData})}this._targetNode||this.candelTrackAnimations.forEach(function(e){e.skeletonData=null})},enumerable:!1,configurable:!0}),t.prototype.activateCandle=function(e){if(this.candelTrackAnimations&&this.candelTrackAnimations[e]){var t=this.targetNode.getComponent(sp.Skeleton),n=this.candelTrackAnimations[e];t.getState().tracks[n.trackIndex]||(t.setAnimation(n.trackIndex,n._startAnimationKey,!1),t.addAnimation(n.trackIndex,n._idleAnimationKey,!0))}},r([s(cc.Node)],t.prototype,"_targetNode",void 0),r([s({type:cc.Node})],t.prototype,"targetNode",null),r([s([p])],t.prototype,"candelTrackAnimations",void 0),r([c],t)}(cc.Component);n.BirthdayCakeViewComponent=l,cc._RF.pop()},{}],"BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"36692IRqtVQB6CvR5znp8nr","BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),n.__esModule=!0,n.BlastMultiplierSystemStrategy=void 0;var o=e("./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),i=e("./MultiplierOnBlastComponent (@tapclap.match-x.engine.components)"),c=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n={}),(o=e.call(this,t)||this)._uniqueTargetModel=n.uniqueTargetMode||!1,o._exceptEntityTypes=n.exceptEntityTypes||[],o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.compute=function(){var e=this._world.getState(a.ExplodeSystem.STATE),t=new Map;if(e&&e.data)for(var n,o=s(e.data.flat());!(n=o()).done;){var p=n.value,l=p.blastNeighbors,m=p.blastedBy;if(!m||!this._exceptEntityTypes.includes(m.type))for(var u,d=s(l);!(u=d()).done;)for(var y,f=s(u.value.cell.entities);!(y=f()).done;){var h=y.value;if(!this._uniqueTargetModel||this._uniqueTargetModel&&!t.has(h)){var g=h.getEnabledComponent(r.MultiplierComponent.KEY),v=h.getEnabledComponent(i.MultiplierOnBlastComponent.KEY);g&&v&&(g.addValue(1),t.set(h,new c.MultiplierSystemModel(h,g.getValue(),g.getMinValue())))}}}return Array.from(t.values())},o}(o.MultiplierSystemStrategy);n.BlastMultiplierSystemStrategy=u,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierOnBlastComponent (@tapclap.match-x.engine.components)":"MultiplierOnBlastComponent (@tapclap.match-x.engine.components)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"}],"BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"3b7b3xDOcRQDrCYefvEADHN","BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.BombAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)"),i=e("./CounterComponent (@tapclap.match-x.engine.components)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.build=function(e){var t=[];return t.push({animation:new a.FunctionAnimation(function(){if(e.data)for(var t,n=c(e.data);!(t=n()).done;){var o=t.value,a=o.getComponent("render").node,s=o.getComponent(i.CounterComponent.KEY);if(a&&s){var p=a.getComponent(r.StepCounterViewComponent);p&&p.setValue(s.getValue())}}})}),[t]},o}(o.GameActionBuilder);n.BombAnimationBuilder=m,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)"}],"BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d334dP4ZFpUC4YZPRLMYpHH","BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.BombMovesLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(t){var n,o;return void 0===t&&(t=!1),(o=e.call(this)||this)._dropAfter=!1,o._dropAfter=null!=(n=t)?n:o._dropAfter,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){var t={counter:{value:e.bombExplodeMoves}};return this._dropAfter&&Object.assign(t,{dropAfterRemove:{passDropRange:[20,25]}}),t},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.BombMovesLegacyLevelComponentRetriever=a,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)":[function(e,t,n){"use strict";cc._RF.push(t,"a6459M1l39XWp40QugxIsoI","BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonsEmitStrategy=void 0;var r=function(e){function t(t){var n=t.entitySystem,o=e.call(this)||this;return o._entitySystem=n,o}return a(t,e),t.prototype.getEmitEntity=function(e){var t=e.entity.getComponent(e.trigger),n=Object.assign({},t.entities),o=Object.keys(n).find(function(e){return"blocker-1"!==e});return e.cell.getEntity()===e.entity&&o?(delete n[o],t.setEntityProbabilities(n),this._entitySystem.createEntity(o)):this._entitySystem.createRandomEntity(n)},t}(e("./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitStrategy);n.BombRibbonsEmitStrategy=r,cc._RF.pop()},{"./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)"}],"BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"fef95XAS0NfXKx7XkH/N5Qs","BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonsEmitTargetStrategy=void 0;var c=e("./EmitTargetComponent (@tapclap.match-x.engine.components)"),s=e("./Entity (@tapclap.match-x.engine.entities)"),p=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),l=function(e){function t(t){var n=(void 0===t?{}:t).defaultLayer,o=void 0===n?s.Entity.LAYER_UPPER:n,a=e.call(this)||this;return a._defaultLayer=o,a}return a(t,e),t.prototype.getEmitTarget=function(e){var t=this,n=e.entity,o=e.cell,a=e.grid,r=[],s=new p.NeighborRetriever({chunk:[o]}).retrieve(a);return o.getEntity()===n&&r.push(o),s.push([o]),r.push.apply(r,i(s.flat().filter(function(e){var o=n.getEnabledComponentByClass(c.EmitTargetComponent),a=o.layer||t._defaultLayer;if(!e.getEntity(a)&&e.isEnabled){if(o){if(e.entities.some(function(e){return o.excludeEntityTypes.includes(e.type)}))return!1;if(o.includeEntityTypes.length>0)return e.entities.some(function(e){return o.includeEntityTypes.includes(e.type)})}return!0}return!1}))),r.shift()},t}(e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitTargetStrategy);n.BombRibbonsEmitTargetStrategy=l,cc._RF.pop()},{"./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)","./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)"}],"BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"73a406eZO1Z56mM+Cc3NVks","BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonsEntityComponentLevelRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e,t){return{counter:{min:0,value:t.ribbonsMoves[e.col+"-"+e.row]}}},t}(e("./EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)").EntityComponentLevelRetriever);n.BombRibbonsEntityComponentLevelRetriever=r,cc._RF.pop()},{"./EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":"EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)"}],"BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"6906eoXCcBZwJcRLNwhuOF/","BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonsLegacyLevelComponentRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e){return{counter:{min:0,value:e.ribbonsMovesForDrop}}},t}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.BombRibbonsLegacyLevelComponentRetriever=r,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"BombRibbonsSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"907f9NaIlRYy6D1t6JLnvoG","BombRibbonsSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonsSpineViewComponent=void 0;var i=e("./BombRibbonsViewComponent (scripts.entity-view-components)"),c=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._node=null,t._event="",t}return a(t,e),t.prototype.runEmitAnimation=function(e){var t=this;return new Promise(function(n){var o=e.getComponentByClass(c.RenderComponent).node,a=t._node,r=t.node,i=a.getComponent(sp.Skeleton),s=r.parent.convertToWorldSpaceAR(r.position),p=o.convertToNodeSpaceAR(s);a.parent=o,a.setPosition(p),a.active=!0,i.setEventListener(function(e,o){o.data.name===t._event&&n()}),i.setCompleteListener(function(){a.destroy()})})},r([l({type:cc.Node,visible:!0})],t.prototype,"_node",void 0),r([l({visible:!0})],t.prototype,"_event",void 0),r([p,m("EntityViews/BombRibbons/SpineView")],t)}(i.BombRibbonViewComponent);n.BombRibbonsSpineViewComponent=u,cc._RF.pop()},{"./BombRibbonsViewComponent (scripts.entity-view-components)":"BombRibbonsViewComponent (scripts.entity-view-components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"BombRibbonsViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"9a126HnF4JRppoMVK5qaL7d","BombRibbonsViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BombRibbonViewComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.runEmitAnimation=function(){return Promise.resolve()},t}(e("./ViewComponent (@tapclap.match-x.cocos.components)").ViewComponent);n.BombRibbonViewComponent=r,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"8ce57YJws5TAqbRcWbK0MFL","BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.BombribbonsAnimationBuilder=void 0;var c=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./EmitStageComponent (@tapclap.match-x.engine.components)"),l=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./BombRibbonsSpineViewComponent (scripts.entity-view-components)"),d=function(e){function t(t){var n=t.stage,o=t.sound,a=t.audioEffectsPlayer,r=e.call(this)||this;return r._stage=n,r._sound=o,r._audioEffectsPlayer=a,r}return a(t,e),t.prototype.build=function(e){var t,n,o,a,c,d=[],y=new Map,f=new Map;try{for(var h=r(e.data),g=h.next();!g.done;g=h.next()){var v=g.value,_=v.emitterEntity.getEnabledComponentByClass(p.EmitStageComponent);if(_&&(null==_?void 0:_.stages[this._stage])){y.set(v.emitterEntity,{emitterCell:v.emitterCell,emitterGrid:v.grid});var b=f.get(v.emitterEntity)||[],C=v.grid,w=v.newEntity,S=v.prevEntity,E=v.targetCell;b.push({grid:C,newEntity:w,prevEntity:S,targetCell:E}),w.getEnabledComponentByClass(s.RenderComponent).node.opacity=0,f.set(v.emitterEntity,b)}}}catch(P){t={error:P}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}var x=function(e,t){var n=f.get(e),o=new m.ChainAnimation,a=(null===(c=e.getEnabledComponentByClass(s.RenderComponent))||void 0===c?void 0:c.node).getComponent(u.BombRibbonsSpineViewComponent);o.add(new l.FunctionAnimation(function(){return a.runEmitAnimation(t).then(function(){var e,t;try{for(var o=(e=void 0,r(n)),a=o.next();!a.done;a=o.next()){var i=a.value,c=i.newEntity,p=i.prevEntity,l=i.targetCell,m=c.getEnabledComponentByClass(s.RenderComponent).node,u=l.getEnabledComponentByClass(s.RenderComponent).node;m.setPosition(u.getPosition()),m.opacity=255,p&&p.getEnabledComponentByClass(s.RenderComponent).node.destroy()}}catch(d){e={error:d}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}})})),d.push({target:e,animation:o})};try{for(var A=r(Array.from(y.entries())),O=A.next();!O.done;O=A.next()){var R=i(O.value,2);x(R[0],R[1].emitterGrid)}}catch(k){o={error:k}}finally{try{O&&!O.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}return[d]},t}(c.GameActionBuilder);n.BombribbonsAnimationBuilder=d,cc._RF.pop()},{"./BombRibbonsSpineViewComponent (scripts.entity-view-components)":"BombRibbonsSpineViewComponent (scripts.entity-view-components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EmitStageComponent (@tapclap.match-x.engine.components)":"EmitStageComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"Booster (@tapclap.match-x.engine.boosters)":[function(e,t,n){"use strict";cc._RF.push(t,"e03007M9OhDpp9z9PPeFoKM","Booster (@tapclap.match-x.engine.boosters)"),n.__esModule=!0,n.Booster=void 0;var o=e("./EffectFactory (@tapclap.match-x.engine.effects)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(e){var t=new o.EffectFactory({effect:e.effect});this._name=e.name,this._effect=t.create("effect",e),this._options=e}var t,n;return e.prototype.apply=function(e,t){return this._effect.apply(e,t)},t=e,(n=[{key:"name",get:function(){return this._name}},{key:"options",get:function(){return this._options}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Booster=r,r.STATE_BOOSTER="booster",cc._RF.pop()},{"./EffectFactory (@tapclap.match-x.engine.effects)":"EffectFactory (@tapclap.match-x.engine.effects)"}],"BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"81e36BePuVceLI6OPoTCPfa","BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.BoosterAnimationBuilder=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._factory=t.factory,n._prefabs=t.prefabs||{},n._allowBoosters=t.allowBoosters||[],n._game=t.game,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.build=function(e){if(e&&e.data){var t=e.data.name;if(this._allowBoosters.includes(t))return this._factory.create(t,[{world:this._game.world,prefab:this._prefabs[t]}],{merge:!0,rawWrap:!0}).create()}return[]},a}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.BoosterAnimationBuilder=a,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"35bb5hUqSxeNrGs4FBItRhn","BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),n.__esModule=!0,n.BoosterAnimationCreator=void 0;var a=function(e){var t,n;function a(t){var n,o=t.world,a=t.prefab,r=t.audioEffectsPlayer;return(n=e.call(this)||this)._world=o,n._prefab=a,n._audioEffectsPlayer=r,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.create=function(){return[]},a}(e("./AnimationCreator (@tapclap.match-x.cocos.animations.creators)").AnimationCreator);n.BoosterAnimationCreator=a,cc._RF.pop()},{"./AnimationCreator (@tapclap.match-x.cocos.animations.creators)":"AnimationCreator (@tapclap.match-x.cocos.animations.creators)"}],"BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"cefab2fXsBMSrwCLFRB+OHr","BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.BoosterBuyWindowLayoutComponent=void 0;var o,a,r,i,c,s,p=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),l=e("./IconComponent (@tapclap.game-kit.ui.icons)");function m(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var f=cc._decorator,h=f.ccclass,g=f.property,v=(o=g({type:l.IconComponent,visible:!0}),a=g({type:cc.Label,visible:!0}),h((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return m(t=e.call.apply(e,[this].concat(o))||this,"_boosterIcon",c,u(t)),m(t,"_boosterDescription",s,u(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),o.prototype.setProduct=function(e){this._boosterDescription&&(this._boosterDescription.string=e.description),this._boosterIcon&&(this._boosterIcon.icon=e.key)},o}(p.WindowLayoutComponent),c=y(i.prototype,"_boosterIcon",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y(i.prototype,"_boosterDescription",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=i))||r);n.BoosterBuyWindowLayoutComponent=v,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"bdca2eQUlBauoW/6yv2JtGQ","BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.BoosterCartAnimationCreator=void 0;var i=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),c=e("./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),s=e("./Booster (@tapclap.match-x.engine.boosters)"),p=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),l=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),f=e("./GridComponent (@tapclap.match-x.engine.components)"),h=e("./AnimationComponent (@tapclap.match-x.engine.components)"),g=function(e){function t(t){var n=e.call(this,t)||this;return n._defaultAnimationSettings=t.defaultAnimationSettings||{velocity:500},n._entityAnimationSettings=t.entityAnimationSettings||{},n}return a(t,e),t.prototype.create=function(){var e,t,n,o,a=[],c=this._world.getState(i.ExplodeSystem.STATE),h=this._world.getState(s.Booster.STATE_BOOSTER);if(h&&h.data&&c&&c.data){var g=h.data,v=c.data.flat(),_=[];try{for(var b=r(v),C=b.next();!C.done;C=b.next()){var w=C.value;w.cell.col===g.options.cell.col&&_.push(w)}}catch(B){e={error:B}}finally{try{C&&!C.done&&(t=b.return)&&t.call(b)}finally{if(e)throw e.error}}if(_.sort(function(e,t){return e.cell.row>t.cell.row?1:e.cell.row<t.cell.row?-1:0}),_.length>0){var S=cc.instantiateFrom(this._prefab),E=this._world.getComponentByClass(f.GridComponent).grid.getComponentByClass(y.RenderComponent).node;E.addChild(S);var x=_[0].cell.getComponent("render").node,A=S.parent.convertToNodeSpaceAR(x.parent.convertToWorldSpaceAR(x));S.x=A.x,S.y=S.parent.convertToNodeSpaceAR(cc.v2(S.x,cc.winSize.height+S.height/2)).y;var O=cc.v2(S.x,S.parent.convertToNodeSpaceAR(cc.v2(S.x,-S.height)).y),R=this._defaultAnimationSettings.velocity,P=Math.abs(S.y-O.y)/R,k=0;try{for(var T=r(_),I=T.next();!I.done;I=T.next()){var M=I.value.entity,j=M.getComponent("render").node,L=E.convertToNodeSpaceAR(j.parent.convertToWorldSpaceAR(j.position)),F=E.convertToNodeSpaceAR(S.parent.convertToWorldSpaceAR(S.position)),D=Math.max(Math.abs(F.y-L.y)/R+this._getEntityDelay(M),0);k=D,a.push({target:M,animation:new m.ChainAnimation([new p.ActionAnimation(cc.delayTime(D),j),new d.EventTriggerAnimation(M,"booster-apply",{},!1)])})}}catch(G){n={error:G}}finally{try{I&&!I.done&&(o=T.return)&&o.call(T)}finally{if(n)throw n.error}}a.push({target:this._world,animation:new m.ChainAnimation([new l.GroupAnimation([this._audioEffectsPlayer.create("applyBoosterCart"),new p.ActionAnimation(cc.moveTo(P,O),S),new p.ActionAnimation(cc.delayTime(k),S)]),new u.FunctionAnimation(function(){return S.destroy()})])})}}return[a]},t.prototype._getEntityDelay=function(e){var t,n,o=null===(t=e.getComponentByClass(h.AnimationComponent))||void 0===t?void 0:t.resolver,a=null==o?void 0:o.getAnimationKey("explode",e),r=this._entityAnimationSettings[e.type],i=null==r?void 0:r.delay,c=r&&(null===(n=r[a])||void 0===n?void 0:n.delay);return i||c||0},t}(c.BoosterAnimationCreator);n.BoosterCartAnimationCreator=g,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)","./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"ecd79eFxGdPTb057fkVwhYU","BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)"),n.__esModule=!0,n.BoosterCatAnimationCreator=void 0;var o=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),a=e("./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)"),i=e("./SpineAnimation (@tapclap.match-x.cocos.animations)"),c=e("./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),u=e("./Random (@tapclap.utils-js.random)"),d=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)");function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._starPrefabPath=t.starPrefabPath,n._particleDelayRange=[.2,1],n._particleDuration=1.5,n._particleLifeTime=4,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n),a.prototype.create=function(){for(var e,t=this,n=new u.Random,a=this._world.getState(o.ExplodeSystem.STATE),h=[],g=[],v=this._world.getComponent("tiles").grid.getComponent("render").node.parent,_=cc.instantiateFrom(this._prefab),b=_.getComponent(sp.Skeleton),C=new l.ChainAnimation([new p.FunctionAnimation(function(){return v.addChild(_)}),this._audioEffectsPlayer.create("applyBoosterCat"),new i.SpineAnimation(b,{animationName:"cat_anim_3",loop:!1,event:"land"}),new p.FunctionAnimation(function(){var e=b.getCurrent(0);e&&b.setTrackCompleteListener(e,function(){return _.destroy()})})]),w=[],S=function(){var o=e.value,a=o.entity,i=o.cell.getComponent(s.RenderComponent.KEY).node,u=cc.instantiateFrom(t._starPrefabPath);u.setPosition(v.convertToNodeSpaceAR(i.parent.convertToWorldSpaceAR(i.getPosition()))),v.addChild(u);var f=i.width/2,_=3*i.width,b=u.getComponent(cc.ParticleSystem),S=n.getFloat(t._particleDelayRange[0],t._particleDelayRange[1]);b.startRadius=0,b.endRadius=0,b.duration=t._particleDuration,b.lifeVar=t._particleLifeTime-S;for(var E=new l.ChainAnimation([new p.FunctionAnimation(function(){return b.resetSystem()}),new p.FunctionAnimation(function(){b.startRadius=1.2*f,b.endRadius=2*f}),new m.ActionAnimation(cc.delayTime(S),u)]),x=[],A=function(e){var n=[cc.callFunc(function(){b.startRadius=_*e*1.2,b.endRadius=_*e*2,b.lifeVar=t._particleLifeTime/8}),cc.delayTime(e/3)];x.push.apply(x,n)},O=0;O<1;O+=.1)A(O);w.push(E),h.push(new r.AnimationData(a,E)),g.push(new r.AnimationData(a,new l.ChainAnimation([new c.WaitAnimation(C),new d.GroupAnimation([new m.ActionAnimation(cc.sequence(x),u),new y.DummyAnimation],!0)])))},E=f(a.data.flat().filter(function(e){return!e.blastedBy&&!e.affectedBy}));!(e=E()).done;)S();return[h,[new r.AnimationData(this._world,new l.ChainAnimation([new d.GroupAnimation(w),C]))],g]},a}(a.BoosterAnimationCreator);n.BoosterCatAnimationCreator=_,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)","./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"0feb3sWuVlSBaAb5EdU0cwi","BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.BoosterCoverEntitySystemStrategy=void 0;var i=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=e("./InputSystem (@tapclap.match-x.engine.systems.input-system)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e){var n,o,a,p,l,m=this,u=[],d=(null===(p=null===(a=e.getState(c.ExplodeSystem.STATE))||void 0===a?void 0:a.data)||void 0===p?void 0:p.flat())||[],y=new Set(d.filter(function(e){return e.entity.getComponentByClass(i.PreventCoverComponent)}).map(function(e){return e.cell})),f=((null===(l=e.getState(c.ExplodeSystem.STATE))||void 0===l?void 0:l.data.flat())||[]).filter(function(e){var t=e.input;return"booster"===(null==t?void 0:t.handler)}),h=e.getState(s.InputSystem.STATE);if("booster"===(null==h?void 0:h.data.input.currentInput.type)&&f.find(function(e){var t=e.cell;return m._hasCoverEntityInCell(t)&&!y.has(t)}))try{for(var g=r(f),v=g.next();!v.done;v=g.next()){var _=v.value,b=_.cell,C=_.entity;this._canCoverCell(b)&&!y.has(b)&&u.push({cell:b,strategyKey:t.KEY,initiatorEntity:C,initiatorEvent:"explode"})}}catch(w){n={error:w}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}return u},t.KEY="boosterCoverEntityStrategy",t}(e("./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)").CoverEntitySystemStrategy);n.BoosterCoverEntitySystemStrategy=p,cc._RF.pop()},{"./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./InputSystem (@tapclap.match-x.engine.systems.input-system)":"InputSystem (@tapclap.match-x.engine.systems.input-system)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)"}],"BoosterFactory (@tapclap.match-x.engine.boosters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e2c4dgRJWRGOK4N9rNPyyJK","BoosterFactory (@tapclap.match-x.engine.boosters)"),n.__esModule=!0,n.BoosterFactory=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./AbstractFactory (@tapclap.utils-js.abstract-factory)").AbstractFactory);n.BoosterFactory=a,cc._RF.pop()},{"./AbstractFactory (@tapclap.utils-js.abstract-factory)":"AbstractFactory (@tapclap.utils-js.abstract-factory)"}],"BoosterInputHandler (@tapclap.match-x.engine.boosters)":[function(e,t,n){"use strict";cc._RF.push(t,"4dfc3oKDCJDHJBAvZa0TCSu","BoosterInputHandler (@tapclap.match-x.engine.boosters)"),n.__esModule=!0,n.BoosterInputHandler=void 0;var o=e("./Booster (@tapclap.match-x.engine.boosters)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t,n){var o;return void 0===n&&(n=!0),(o=e.call(this)||this)._boosterFactory=t,o._defaultCapture=n,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i.handle=function(e,t,n){if(e&&"booster"===e.type){var a=this._boosterFactory.create(e.data.name,Object.assign({handler:r.NAME},e.data));if(a.apply(n))return n.setState(o.Booster.STATE_BOOSTER,a),!0}return!1},i.capture=function(){return this._defaultCapture},r}(e("./InputHandler (@tapclap.match-x.engine.systems.input-system)").InputHandler);n.BoosterInputHandler=r,r.NAME="booster",cc._RF.pop()},{"./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)","./InputHandler (@tapclap.match-x.engine.systems.input-system)":"InputHandler (@tapclap.match-x.engine.systems.input-system)"}],"BoosterRewardComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"ef1faFuaqxf3ozAzXaE4zOd","BoosterRewardComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BoosterRewardComponent=void 0;var i=e("./IconComponent (@tapclap.game-kit.ui.icons)"),c=e("./RewardComponent (scripts.windows.items.daily-reward.reward)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._iconHolder=null,t._icon=null,t}return a(t,e),t.prototype.setReward=function(t,n){var o=t.spec+":"+t.name;this._icon.icon=o,e.prototype.setReward.call(this,t,n)},t.prototype.show=function(e){var t=this,n=e.index;return this._animationsComponent.runDelay(this.showingDelay+this.indexCoefficientDelay*n).then(function(){t._animationsComponent.runLabelAppearance(t._label.node).then(function(){return t._animationsComponent.runLabelDisappearance(t._label.node)})}),this._animationsComponent.runIconAnimation(this._iconHolder)},t.prototype.getIconNode=function(){return this._iconHolder},r([l({type:cc.Node,visible:!0})],t.prototype,"_iconHolder",void 0),r([l({type:i.IconComponent,visible:!0})],t.prototype,"_icon",void 0),r([p],t)}(c.RewardComponent);n.BoosterRewardComponent=m,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./RewardComponent (scripts.windows.items.daily-reward.reward)":"RewardComponent (scripts.windows.items.daily-reward.reward)"}],"BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"243f1DyDf5PGr8yfnOrpixN","BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)"),n.__esModule=!0,n.BoosterTrowelAnimationCreator=void 0;var o=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),a=e("./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)"),i=e("./Entity (@tapclap.match-x.engine.entities)"),c=e("./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var d=a.prototype;return d.create=function(){var e=this,t=this._world.getState(o.ExplodeSystem.STATE),n=[];if(t&&t.data)for(var a,d=function(){var t=a.value,o=t.entities,u=t.input,d=o.find(function(e){return e.layer===i.Entity.LAYER_DEFAULT}),y=o.filter(function(e){return e.layer!==i.Entity.LAYER_DEFAULT}),f=cc.instantiateFrom(e._prefab);if(d&&u){var h=d.getComponent("render").node,g=o.filter(function(e){return e.layer>=i.Entity.LAYER_DEFAULT});e._setEntitiesZIndex(g,100),h.parent.addChild(f),f.setPosition(h.position.x,h.position.y),f.zIndex=200;var v=f.getComponent(l.AnimationFactoryComponent).getAnimationItem("clean").create({event:"layer_order_change"}),_=new p.ChainAnimation([v,new m.FunctionAnimation(function(){return f.zIndex=h.zIndex-2,e._audioEffectsPlayer.play("applyBoosterTrowel"),v.settled.then(function(){return f.destroy()})}),new m.FunctionAnimation(function(){return e._setEntitiesZIndex(g,-100)}),new s.EventTriggerAnimation(d,"booster-apply",{},!1)]);n.push(new r.AnimationData(d,_)),y.forEach(function(e){n.push(new r.AnimationData(e,new c.WaitAnimation(_)))})}},y=u(t.data.flat());!(a=y()).done;)d();return[n]},d._setEntitiesZIndex=function(e,t){for(var n,o=u(e);!(n=o()).done;){var a=n.value,r=a.getEnabledComponent("render").node,i=a.getEnabledComponent("zIndex");i&&(i.value+=t),r.zIndex+=t}},a}(a.BoosterAnimationCreator);n.BoosterTrowelAnimationCreator=h,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","./BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"9b51aCTCjBRQKvB2oUtCldC","BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),n.__esModule=!0,n.BoosterTutorialStepStrategy=void 0;var o=e("./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),a=e("./Booster (@tapclap.match-x.engine.boosters)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.start=function(e,t){return this._getStepData(e,t)},i.complete=function(e,t){return t.getState(a.Booster.STATE_BOOSTER)?this._getStepData(e,t):null},o}(o.BaseTutorialStepStrategy);n.BoosterTutorialStepStrategy=i,cc._RF.pop()},{"./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)"}],"BoosterViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"437f9sRluxISYbFHUZ8TxNB","BoosterViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.BoosterViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h=e("./TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)"),g=e("./EventListener (@tapclap.utils-js.events)");function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.mixins,x=w.property,A=(o=E(g.EventListener),a=x({type:cc.Button,visible:!0}),r=x({type:cc.Node,visible:!0}),i=x({type:cc.Label,visible:!0}),c=x({type:cc.Sprite,visible:!0}),s=x({type:[h.TypeSpriteFrame],visible:!0}),S(p=o((l=function(e){var t,n;function o(){var t;return v(t=e.call(this)||this,"_button",m,_(t)),v(t,"_counter",u,_(t)),v(t,"_labelCounter",d,_(t)),v(t,"_icon",y,_(t)),v(t,"_iconSpriteFrames",f,_(t)),t._boosterType="",t._boosterCount=0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a=o.prototype;return a.setCounterVisible=function(e){this._counter.active=e},a.setButtonEnabled=function(e){this._button.interactable=e},a.setBoosterType=function(e){this._boosterType=e;var t=this._iconSpriteFrames.find(function(t){return t.type===e});t&&(this._icon.spriteFrame=t.spriteFrame)},a.getBoosterType=function(){return this._boosterType},a.setBoosterCount=function(e){this._boosterCount=Math.max(e,0),this._labelCounter.string=this._boosterCount.toString()},a.getBoosterCount=function(){return this._boosterCount},a.setEnableBooster=function(){throw new Error("Method not implemented")},a.setLockLevelBooster=function(){throw new Error("Method not implemented")},a.setBoosterActive=function(){throw new Error("Method not implemented")},a.onInput=function(){this.node.emit("input",this)},o}(cc.Component),m=C(l.prototype,"_button",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=C(l.prototype,"_counter",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C(l.prototype,"_labelCounter",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C(l.prototype,"_icon",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C(l.prototype,"_iconSpriteFrames",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=l))||p)||p);n.BoosterViewComponent=A,cc._RF.pop()},{"./EventListener (@tapclap.utils-js.events)":"EventListener (@tapclap.utils-js.events)","./TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)":"TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)"}],"BoostersViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"dc657q3SK9d/I2ateWMCLEf","BoostersViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.BoostersViewComponent=void 0;var o,a,r,i,c,s,p=e("./BoosterViewComponent (@tapclap.match-x.cocos.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var y=cc._decorator,f=y.ccclass,h=y.property,g=(o=h({type:cc.Layout,visible:!0}),a=h({type:cc.Prefab,visible:!0}),f((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_layout",c,m(t)),l(t,"_boosterButtonPrefab",s,m(t)),t._views={},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var a=o.prototype;return a.addBooster=function(e,t){var n=cc.instantiate(this._boosterButtonPrefab),o=n.getComponent(p.BoosterViewComponent);o.setBoosterType(e),n.on("input",t),this._layout.node.addChild(n),this._layout.updateLayout(),this._views[e]=o},a.setBoosterCount=function(e,t){this._getView(e).setBoosterCount(t)},a.setEnableBooster=function(e,t){this._getView(e).setEnableBooster(t)},a.setBoosterActive=function(e,t){this._getView(e).setBoosterActive(t)},a.setLockLevelBooster=function(e,t){this._getView(e).setLockLevelBooster(t)},a.getViewNode=function(e){return this._getView(e).node},a._getView=function(e){return this._views[e]},o}(cc.Component),c=d(i.prototype,"_layout",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=d(i.prototype,"_boosterButtonPrefab",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=i))||r);n.BoostersViewComponent=g,cc._RF.pop()},{"./BoosterViewComponent (@tapclap.match-x.cocos.components)":"BoosterViewComponent (@tapclap.match-x.cocos.components)"}],"BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a7c85FG2HpRtITl6WABJ3Tx","BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)"),n.__esModule=!0,n.BorderGameStartDecorator=void 0;var s=function(e){var t,n;function a(t){var n,o=t.game,a=t.duration,r=void 0===a?.1:a,i=t.cellChildName,c=void 0===i?"borders":i;return(n=e.call(this)||this)._game=o,n._duration=r,n._cellChildName=c,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var r,s,p=a.prototype;return p.initial=function(){for(var e,t=o(this._borderNodes);!(e=t()).done;)e.value.opacity=0;return Promise.resolve()},p.show=function(){for(var e,t=this,n=[],a=function(){var o=e.value;n.push(new Promise(function(e){o.runAction(cc.sequence([cc.fadeIn(t._duration),cc.callFunc(e)]))}))},r=o(this._borderNodes);!(e=r()).done;)a();return Promise.all(n)},p.hide=function(){return Promise.resolve()},r=a,(s=[{key:"_grid",get:function(){return this._game.world.getEnabledComponent("tiles").grid}},{key:"_borderNodes",get:function(){for(var e=[],t=0;t<this._grid.rows;t++)for(var n=0;n<this._grid.cols;n++)if(this._grid.isContain(t,n)){var o=this._grid.getCell(t,n);if(o){var a=o.getComponent("render").node;if(a){var r=a.getChildByName(this._cellChildName);r&&(r.opacity=0,e.push(r))}}}return e}}])&&i(r.prototype,s),Object.defineProperty(r,"prototype",{writable:!1}),a}(e("./GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)").GameStartDecorator);n.BorderGameStartDecorator=s,cc._RF.pop()},{"./GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)":"GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)"}],"BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"633betlEktLb4ypDy1cOs9F","BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)"),n.__esModule=!0,n.BorderGridViewDecoratorComponent=void 0;var o,a=e("./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)"),r=e("./CellBorderBuilderComponent (@tapclap.match-x.cocos.components)"),i=e("./Matrix (@tapclap.match-x.engine.models)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=o.prototype;return a.onLoad=function(){this._borderPatterns=[{enabledCell:!0,dirs:[[-1,0],[-1,1],[0,1]],pattern:[0,0,0],place:r.CellBorderBuilderComponent.CORNER_OUTER_TOP_RIGHT},{enabledCell:!0,dirs:[[-1,0],[-1,-1],[0,-1]],pattern:[0,0,0],place:r.CellBorderBuilderComponent.CORNER_OUTER_TOP_LEFT},{enabledCell:!0,dirs:[[1,0],[1,-1],[0,-1]],pattern:[0,0,0],place:r.CellBorderBuilderComponent.CORNER_OUTER_BOTTOM_LEFT},{enabledCell:!0,dirs:[[1,0],[1,1],[0,1]],pattern:[0,0,0],place:r.CellBorderBuilderComponent.CORNER_OUTER_BOTTOM_RIGHT},{enabledCell:!0,dirs:[[-1,0]],pattern:[0],place:r.CellBorderBuilderComponent.BORDER_TOP},{enabledCell:!0,dirs:[[1,0]],pattern:[0],place:r.CellBorderBuilderComponent.BORDER_BOTTOM},{enabledCell:!0,dirs:[[0,1]],pattern:[0],place:r.CellBorderBuilderComponent.BORDER_RIGHT},{enabledCell:!0,dirs:[[0,-1]],pattern:[0],place:r.CellBorderBuilderComponent.BORDER_LEFT},{enabledCell:!1,dirs:[[-1,0],[0,1]],pattern:[1,1],place:r.CellBorderBuilderComponent.CORNER_INNER_TOP_RIGHT},{enabledCell:!1,dirs:[[-1,0],[0,-1]],pattern:[1,1],place:r.CellBorderBuilderComponent.CORNER_INNER_TOP_LEFT},{enabledCell:!1,dirs:[[1,0],[0,-1]],pattern:[1,1],place:r.CellBorderBuilderComponent.CORNER_INNER_BOTTOM_LEFT},{enabledCell:!1,dirs:[[1,0],[0,1]],pattern:[1,1],place:r.CellBorderBuilderComponent.CORNER_INNER_BOTTOM_RIGHT}]},a.render=function(e){for(var t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++){var o=e.getCell(t,n),a=o.getEnabledComponent("render");if(a&&a.node.getComponent(r.CellBorderBuilderComponent)){for(var c=[[-1,1],[-1,1]],s=new i.Matrix(3,3),p=c[0][0];p<=c[0][1];p++)for(var l=c[1][0];l<=c[1][1];l++){var m=p+t,u=l+n;s[p+1][l+1]=Number(!!e.isContain(m,u)&&e.getCell(m,u).isEnabled)}this._renderCellBorders(s,o)}}for(var d=0;d<e.rows;d++)for(var y=0;y<e.cols;y++){var f=e.getCell(d,y),h=f.getEnabledComponent("render").node,g=h.getComponent(r.CellBorderBuilderComponent);!f.isEnabled&&Object.values(g.places).every(function(e){return!e.active})&&(h.active=!1)}},a._renderCellBorders=function(e,t){for(var n,o=c(this._borderPatterns);!(n=o()).done;){var a=n.value;a.enabledCell===t.isEnabled&&this._checkPattern(e,a.dirs,a.pattern)&&t.getEnabledComponent("render").node.getComponent(r.CellBorderBuilderComponent).addBorder(a.place)}},a._checkPattern=function(e,t,n){for(var o,a=0,r=c(t);!(o=r()).done;){var i=o.value,s=1+i[0],p=1+i[1];if(e[s][p]!==n[a])return!1;a++}return!0},o}(a.GridViewDecoratorComponent))||o;n.BorderGridViewDecoratorComponent=m,cc._RF.pop()},{"./CellBorderBuilderComponent (@tapclap.match-x.cocos.components)":"CellBorderBuilderComponent (@tapclap.match-x.cocos.components)","./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":"GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)":[function(e,t,n){"use strict";cc._RF.push(t,"bf547k8C95WNrF2GU+nK5+O","BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.BossEntityDropComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="bossEntityDropComponent",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.BossEntityDropComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"BossMultiplierComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5c2dfOrQVRRF4zatKfHJXZG","BossMultiplierComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.BossMultiplierComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.BossMultiplierComponent=a,a.KEY="bossMultiplierComponent",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"BounceAnimation (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"6a137iFrDRRTaMhQtwJoOb5","BounceAnimation (scripts.windows.items.daily-reward.animation)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.BounceAnimation=void 0;var a=cc._decorator,r=a.ccclass,i=a.property,c=function(){function e(){this.duration=0,this._amplitude=0,this._frequency=0,this._decay=0}return e.prototype.getValueByTime=function(e){return this._amplitude*Math.sin(this._frequency*Math.PI*e)/Math.exp(this._decay*e)},o([i({min:0})],e.prototype,"duration",void 0),o([i({visible:!0})],e.prototype,"_amplitude",void 0),o([i({visible:!0})],e.prototype,"_frequency",void 0),o([i({visible:!0})],e.prototype,"_decay",void 0),o([r("BounceAnimation")],e)}();n.BounceAnimation=c,cc._RF.pop()},{}],"BundleLoadTask (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"97a1bJMQwpQM4b/sYTcri3H","BundleLoadTask (@tapclap.game-kit.loader)"),n.__esModule=!0,n.BundleLoadTask=void 0;var r=function(e){var t,n,r,i;function c(t,n){var o,a=(void 0===n?{}:n).asFile,r=void 0!==a&&a;o=e.call(this)||this;var i=t.split("/"),s=i[0],p=i.slice(1).join("/");return o._bundleName=s,o._path=p,o._mode=r?c.MODE_FILE:c.MODE_DIR,o}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.load=function(){var e=this;return new Promise(function(t,n){cc.assetManager.loadBundle(e._bundleName,function(o,a){if(!o&&e._path)switch(e._mode){case c.MODE_DIR:a.loadDir(e._path,e._processProgress.bind(e),function(o,a){e._processComplete(o,a).then(t,n)});break;case c.MODE_FILE:a.load(e._path,e._processProgress.bind(e),function(o,a){e._processComplete(o,a).then(t,n)})}else e._processProgress(1,1),e._processComplete(o,[]).then(t,n)})})},r=c,(i=[{key:"description",get:function(){return"[bundle] "+this._bundleName+"/"+this._path}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./LoadTask (@tapclap.game-kit.loader)").LoadTask);n.BundleLoadTask=r,r.MODE_DIR="dir",r.MODE_FILE="file",cc._RF.pop()},{"./LoadTask (@tapclap.game-kit.loader)":"LoadTask (@tapclap.game-kit.loader)"}],"BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"ae596pa2CNK3aVc6FogKyKC","BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.BundleShopItemComponent=void 0;var o,a,r,i,c,s,p=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),l=e("./IconComponent (@tapclap.game-kit.ui.icons)"),m=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var h=cc._decorator,g=h.ccclass,v=h.property,_=(o=v({type:cc.Label,visible:!0}),a=v({type:l.IconComponent,visible:!0}),g((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return u(t=e.call.apply(e,[this].concat(o))||this,"_titleLabel",c,d(t)),u(t,"_icon",s,d(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n),o.prototype.setProduct=function(t){e.prototype.setProduct.call(this,t);var n=t.payload.items;if(this._titleLabel){var o=this._titleLabel.getComponent(m.I18NLabel);o?o.setString(t.title):this._titleLabel.string=t.title}this._icon&&(this._icon.icon=t.key),this._setItems(n)},o}(p.ProductItemComponent),c=f(i.prototype,"_titleLabel",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=f(i.prototype,"_icon",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=i))||r);n.BundleShopItemComponent=_,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ButtonControlComponent (@tapclap.game-kit.ui.controls)":[function(e,t,n){"use strict";cc._RF.push(t,"555585I3KNF5p0XBj18k0dF","ButtonControlComponent (@tapclap.game-kit.ui.controls)"),n.__esModule=!0,n.ButtonControlComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G,N,W,H,V,K,U,Y,z,q,Z,X,J,Q,$,ee,te,ne,oe,ae,re,ie=e("./ControlComponent (@tapclap.game-kit.ui.controls)"),ce=e("./IconComponent (@tapclap.game-kit.ui.icons)"),se=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=le(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e,t){return(ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fe(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function he(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var ge=cc._decorator,ve=ge.ccclass,_e=ge.menu,be=ge.executeInEditMode,Ce=ge.property,we=(o=ve("ButtonStyle"),a=Ce(),r=Ce(),i=Ce(cc.String),c=Ce(),s=Ce(cc.Color),p=Ce(cc.SpriteFrame),o((u=he((m=function(){fe(this,"interactable",u,this),fe(this,"disableButton",d,this),fe(this,"style",y,this),fe(this,"icon",f,this),fe(this,"color",h,this),fe(this,"spriteFrame",g,this)}).prototype,"interactable",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=he(m.prototype,"disableButton",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=he(m.prototype,"style",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=he(m.prototype,"icon",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=he(m.prototype,"color",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=he(m.prototype,"spriteFrame",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=m))||l),Se=(v=ve("ButtonToggleStyle"),_=Ce(),b=Ce(),C=Ce(),v((E=he((S=function(){fe(this,"style",E,this),fe(this,"icon",x,this),fe(this,"label",A,this)}).prototype,"style",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=he(S.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=he(S.prototype,"label",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=S))||w),Ee=(O=_e("UI-Kit/Controls/ButtonControlComponent"),R=Ce({visible:!0}),P=Ce({visible:function(){return this.toggleable}}),k=Ce({visible:function(){return this.toggleable}}),T=Ce({type:Se,visible:function(){return this.toggleable}}),I=Ce({type:Se,visible:function(){return this.toggleable}}),M=Ce(),j=Ce({visible:function(){return this.toggleable}}),L=Ce({type:cc.Layout,visible:!0}),F=Ce({type:ce.IconComponent,visible:!0,displayName:"Icon"}),D=Ce({displayName:"Icon Key"}),B=Ce({type:cc.Label,visible:!0}),G=Ce({type:cc.String,displayName:"Label String",multiline:!0}),N=Ce({visible:!0}),W=Ce(cc.String),H=Ce({type:cc.String,visible:!0}),V=Ce({type:[we],visible:!0}),K=Ce({type:cc.Button,visible:!0}),ve(U=be(U=O((Y=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._eventKey="click",fe(t,"_toggleable",z,de(t)),fe(t,"_keepDefaultIcon",q,de(t)),fe(t,"_keepDefaultLabel",Z,de(t)),fe(t,"_toggleEnabled",X,de(t)),fe(t,"_toggleDisabled",J,de(t)),fe(t,"_toggled",Q,de(t)),fe(t,"_content",$,de(t)),fe(t,"_iconComponent",ee,de(t)),fe(t,"_label",te,de(t)),fe(t,"_changeLabelOutlineColor",ne,de(t)),fe(t,"_style",oe,de(t)),fe(t,"_styles",ae,de(t)),fe(t,"_button",re,de(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,ye(t,n);var a,r,i=o.prototype;return i.getI18NLabel=function(){return this._label?this._label.getComponent(se.I18NLabel):null},i._updateLabel=function(){var e=this;if(this._content&&this._label){var t=function(){if(e._content.node.width>e.node.width){e._label.overflow=cc.Label.Overflow.SHRINK;for(var t,n=e._content.paddingLeft+e._content.paddingRight,o=pe(e._content.node.children);!(t=o()).done;){var a=t.value;a!==e._label.node&&(n+=a.width)}n+=e._content.spacingX*Math.max(e._content.node.childrenCount-1,0),e._label.node.width=Math.max(e.node.width-n,0),e._label.node.height=e.node.height,e._content.updateLayout()}};this._label.overflow!==cc.Label.Overflow.NONE?this._label.overflow=cc.Label.Overflow.NONE:t(),this._content.node.once(cc.Node.EventType.SIZE_CHANGED,t)}},i._handleTouchEnd=function(){this.toggleable?(this.toggled=!this.toggled,this._emitEvent(o.EVENT_CLICK,this.toggled)):this._emitEvent(o.EVENT_CLICK)},i.setInteractable=function(t){e.prototype.setInteractable.call(this,t),this._button&&(this._button.interactable=t)},i.start=function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this._updateLabel,this),this.node.on(cc.Node.EventType.TOUCH_END,this._handleTouchEnd,this),this._updateLabel()},i.initialize=function(t){if(void 0===t&&(t={}),e.prototype.initialize.call(this,t),t.label&&(this.label=t.label),t.icon){var n=cc.instantiateFrom(t.icon.prefab),o=n.getComponent(ce.IconComponent);o&&(this._content.node.addChild(n),this._iconComponent=o,this.icon=t.icon.key)}t.style&&(this.style=t.style),this._button&&this.setInteractable(this._button.interactable)},a=o,(r=[{key:"toggleable",get:function(){return this._toggleable}},{key:"toggled",get:function(){return this.toggleable&&this._toggled},set:function(e){if(this.toggleable){this._toggled=e;var t=this.toggled?this._toggleEnabled:this._toggleDisabled,n=t.style,o=t.icon,a=t.label;this.style=n,this._keepDefaultIcon&&!o||(this.icon=o),this._keepDefaultLabel&&!a||(this.label=a)}}},{key:"icon",get:function(){return this._iconComponent?this._iconComponent.icon:""},set:function(e){this._iconComponent&&(this._iconComponent.icon=e)}},{key:"isIconActive",get:function(){return this._iconComponent&&this._iconComponent.node.active}},{key:"label",get:function(){return this._label?this._label.string:""},set:function(e){this._label&&((this._label.getComponent(se.I18NLabel)||this._label.addComponent(se.I18NLabel)).string=e,this._updateLabel())}},{key:"style",get:function(){return this._style},set:function(e){this._style=e;var t=this._styles.find(function(t){return t.style===e});if(t){var n=this.getComponent(cc.Sprite);if(n&&(n.spriteFrame=t.spriteFrame),t.color&&this._label)if(this._changeLabelOutlineColor){var o=this._label.getComponent(cc.LabelOutline);o&&(o.color=t.color)}else this._label.node.color=t.color;t.icon&&(this.icon=t.icon),this.setInteractable(t.interactable),this.setDisabled(t.disableButton)}}},{key:"button",get:function(){return this._button}}])&&ue(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(ie.ControlComponent),z=he(Y.prototype,"_toggleable",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=he(Y.prototype,"_keepDefaultIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=he(Y.prototype,"_keepDefaultLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=he(Y.prototype,"_toggleEnabled",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Se}}),J=he(Y.prototype,"_toggleDisabled",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Se}}),Q=he(Y.prototype,"_toggled",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),he(Y.prototype,"toggled",[j],Object.getOwnPropertyDescriptor(Y.prototype,"toggled"),Y.prototype),$=he(Y.prototype,"_content",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=he(Y.prototype,"_iconComponent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he(Y.prototype,"icon",[D],Object.getOwnPropertyDescriptor(Y.prototype,"icon"),Y.prototype),te=he(Y.prototype,"_label",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he(Y.prototype,"label",[G],Object.getOwnPropertyDescriptor(Y.prototype,"label"),Y.prototype),ne=he(Y.prototype,"_changeLabelOutlineColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=he(Y.prototype,"_style",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he(Y.prototype,"style",[H],Object.getOwnPropertyDescriptor(Y.prototype,"style"),Y.prototype),ae=he(Y.prototype,"_styles",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=he(Y.prototype,"_button",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=Y))||U)||U)||U);n.ButtonControlComponent=Ee,Ee.EVENT_CLICK="click",cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)"}],"CakeLevelWindowLayoutComponent (scripts.windows.layouts.win-level)":[function(e,t,n){"use strict";cc._RF.push(t,"d2841ko6ApXNZU4STfeAwLD","CakeLevelWindowLayoutComponent (scripts.windows.layouts.win-level)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeWinLevelWindowLayoutComponent=void 0;var i=e("./WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),c=e("./CounterAnimation (@tapclap.match-x.cocos.animations)"),s=e("./CakeView (scripts.views.cake-reward)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cakeView=null,t._cakeNode=null,t._progressBar=null,t._progressDuration=1,t._cakeLootBoxSprite=null,t._cakeLootBoxIcons=[],t._progressAnimation=null,t}return a(t,e),t.prototype.updateCakeState=function(e){var t=this,n=e.phase,o=void 0===n?0:n,a=e.prevPhase,r=void 0===a?0:a,i=e.value,s=void 0===i?0:i,p=e.prevValue,l=void 0===p?0:p,m=e.totalValue,u=void 0===m?0:m,d=e.animate,y=void 0===d||d;this._cakeLootBoxSprite&&this._cakeLootBoxIcons.length>0&&(this._cakeLootBoxSprite.spriteFrame=this._cakeLootBoxIcons[r]),y?(this._cakeView.setPhase(r),r!==o&&this._cakeView.setPhaseTransition(o)):this._cakeView.setPhase(o),l>s&&(s=1),y?(this._progressAnimation=new c.CounterAnimation(100*s,100*l,this._progressDuration,function(e){t._progressBar.progress=Math.min(1,e/100/u)}),this._progressAnimation.run()):this._progressBar.progress=Math.min(1,s/u)},t.prototype.setCakeActivity=function(e){this._cakeNode.active=e},t.prototype.setShareActivity=function(e){this.getShareControl().node.active=e},t.prototype.onDestroy=function(){this._progressAnimation&&this._progressAnimation.stop()},r([m({type:s.CakeView,visible:!0})],t.prototype,"_cakeView",void 0),r([m({type:cc.Node,visible:!0})],t.prototype,"_cakeNode",void 0),r([m({type:cc.ProgressBar,visible:!0})],t.prototype,"_progressBar",void 0),r([m({visible:!0})],t.prototype,"_progressDuration",void 0),r([m({type:cc.Sprite,visible:!0})],t.prototype,"_cakeLootBoxSprite",void 0),r([m({type:[cc.SpriteFrame],visible:!0})],t.prototype,"_cakeLootBoxIcons",void 0),r([l],t)}(i.WinLevelWindowLayoutComponent);n.CakeWinLevelWindowLayoutComponent=u,cc._RF.pop()},{"./CakeView (scripts.views.cake-reward)":"CakeView (scripts.views.cake-reward)","./CounterAnimation (@tapclap.match-x.cocos.animations)":"CounterAnimation (@tapclap.match-x.cocos.animations)","./WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)":[function(e,t,n){"use strict";cc._RF.push(t,"02551YIJ9VeY42MfWHL1erO","CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardForceEndHandler=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t=e.getModule("cakeReward");return!!t&&t.hasReward()},t}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.CakeRewardForceEndHandler=r,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"CakeRewardItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"3a398D2+chRuJ/j//iDULfw","CakeRewardItemComponent (scripts.windows.items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardItemComponent=n.CheckmarkConfig=n.TooltipConfig=void 0;var i=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),c=e("./TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),s=e("./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),p=e("./TimeDuration (@tapclap.utils-js.time-duration)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(){function e(){this.tooltip=null,this.tooltipContent=null,this.tooltipAnimationDuration=1,this.tooltipUserItemLabelColor=new cc.Color(0,0,0,255),this.tooltipUserItemLabelStrokeColor=new cc.Color(0,0,0,255),this.tooltipUserItemLabelStrokeWidth=3,this.userItemPrefab=null}return r([u({type:cc.Node,visible:!0})],e.prototype,"tooltip",void 0),r([u({type:cc.Node,visible:!0})],e.prototype,"tooltipContent",void 0),r([u({visible:!0})],e.prototype,"tooltipAnimationDuration",void 0),r([u({visible:!0})],e.prototype,"tooltipUserItemLabelColor",void 0),r([u({visible:!0})],e.prototype,"tooltipUserItemLabelStrokeColor",void 0),r([u({visible:!0})],e.prototype,"tooltipUserItemLabelStrokeWidth",void 0),r([u({type:cc.Prefab,visible:!0})],e.prototype,"userItemPrefab",void 0),r([m("TooltipConfig")],e)}();n.TooltipConfig=d;var y=function(){function e(){this.checkmark=null,this.activateClip=null}return r([u({type:cc.Node,visible:!0})],e.prototype,"checkmark",void 0),r([u({type:cc.AnimationClip,visible:!0})],e.prototype,"activateClip",void 0),r([m("CheckmarkConfig")],e)}();n.CheckmarkConfig=y;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tooltipConfig=null,t._checkmarkConfig=null,t._animation=null,t._tooltipAnimating=!1,t._checkmarkActivated=!1,t}var n;return a(t,e),n=t,t.prototype.activateCheckmark=function(e){var t=this;return void 0===e&&(e=!0),this._checkmarkActivated||!this._checkmarkConfig.checkmark?Promise.resolve():(this._checkmarkActivated=!0,this._animation&&this._checkmarkConfig.activateClip&&e?new Promise(function(e){t._animation.play(t._checkmarkConfig.activateClip.name),t._animation.once(cc.Animation.EventType.FINISHED,function(){e()})}):(this._checkmarkConfig.checkmark.setScale(1),Promise.resolve()))},t.prototype.addUserItemToTooltip=function(e){var t=this;e.forEach(function(e){var n=cc.instantiate(t._tooltipConfig.userItemPrefab),o=n.getComponent(s.UserItemInfoComponent);if(!o)throw new Error("UserItemPrefab must has UserItemInfoComponent");o.setIcon(e.spec+":"+e.name),o.setIconSpacing(0),o.setIconScale(1),o.setLabelScale(1),o.setLabelStrokeWidth(t._tooltipConfig.tooltipUserItemLabelStrokeWidth),o.setLabelStrokeColor(t._tooltipConfig.tooltipUserItemLabelStrokeColor),o.setLabelColor(t._tooltipConfig.tooltipUserItemLabelColor),o.setMeasureColor(t._tooltipConfig.tooltipUserItemLabelColor),o.setMultiplySignColor(t._tooltipConfig.tooltipUserItemLabelColor),o.showMultiplySign(),e instanceof i.CountableUserItem&&(o.setValue(e.amount),o.setMeasure("")),e instanceof c.TimedUserItem&&(o.setValue((new p.TimeDuration(e.duration).getMinutes()/60).toString()),o.setMeasure("h")),t._tooltipConfig.tooltipContent.addChild(n)}),this._tooltipConfig.tooltip&&this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.node.emit(n.INFO_BUTTON_CLICK,{event:e,item:t})})},t.prototype.showTooltip=function(){var e=this;return this._tooltipAnimating?Promise.resolve():new Promise(function(t){e._tooltipAnimating=!0,e._tooltipConfig.tooltip.active=!0,e._tooltipConfig.tooltip.runAction(cc.sequence([cc.fadeIn(e._tooltipConfig.tooltipAnimationDuration),cc.callFunc(function(){t(),e._tooltipAnimating=!1})]))})},t.prototype.hideTooltip=function(){var e=this;return this._tooltipAnimating?Promise.resolve():new Promise(function(t){e._tooltipAnimating=!0,e._tooltipConfig.tooltip.active=!0,e._tooltipConfig.tooltip.runAction(cc.sequence([cc.fadeOut(e._tooltipConfig.tooltipAnimationDuration),cc.callFunc(function(){t(),e._tooltipConfig.tooltip.active=!1,e._tooltipAnimating=!1})]))})},t.prototype.toggleTooltip=function(){return this._tooltipConfig.tooltip.opacity>0?this.hideTooltip():this.showTooltip()},t.prototype.onLoad=function(){var e=this;this._animation=this.node.getComponent(cc.Animation),this._animation&&!this._animation.getClips().find(function(t){return t===e._checkmarkConfig.activateClip})&&this._checkmarkConfig.activateClip&&this._animation.addClip(this._checkmarkConfig.activateClip)},t.prototype.lateUpdate=function(){this._tooltipConfig.tooltip.width=this._tooltipConfig.tooltipContent.width,this._tooltipConfig.tooltip.height=this._tooltipConfig.tooltipContent.height},t.INFO_BUTTON_CLICK="infoButtonClick",r([u({type:d,visible:!0})],t.prototype,"_tooltipConfig",void 0),r([u({type:y,visible:!0})],t.prototype,"_checkmarkConfig",void 0),n=r([m],t)}(cc.Component);n.CakeRewardItemComponent=f,cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./TimedUserItem (@tapclap.game-kit.user-item-manager.items)":"TimedUserItem (@tapclap.game-kit.user-item-manager.items)","./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"}],"CakeRewardMetaEvent (scripts.meta-events.event)":[function(e,t,n){"use strict";cc._RF.push(t,"1dc69CObgFWS7PNPnKEjrX4","CakeRewardMetaEvent (scripts.meta-events.event)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardMetaEvent=void 0;var i=e("./MetaEvent (scripts.meta-events.event)"),c=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)"),s=function(e){function t(t){var n=t.progressMetaModule,o=t.episodesMetaModule,a=t.cakeRewardMetaModule,i=r(t,["progressMetaModule","episodesMetaModule","cakeRewardMetaModule"]),c=e.call(this,i)||this;return c._progressMetaModule=n,c._episodesMetaModule=o,c._cakeRewardMetaModule=a,c}return a(t,e),t.prototype.init=function(){var t=this;return this._startedAt=this._cakeRewardMetaModule.startDate,this._cakeRewardMetaModule.events.on(c.MetaModule.EVENT_CHANGE,function(){t._cakeRewardMetaModule.isCompleted()&&t._setState(i.MetaEvent.STATE_COMPLETED)}),e.prototype.init.call(this)},t.prototype.run=function(){var t=this;return this.isReady()?(e.prototype.run.call(this),this._cakeRewardMetaModule.activate().then(function(){return t._cakeRewardMetaModule.updateState({startDate:t._startedAt})}).then(function(){return t._cakeRewardMetaModule.restart()})):this.isActive()?(this._setState(i.MetaEvent.STATE_ACTIVE),this._cakeRewardMetaModule.activate()):Promise.resolve()},t.prototype.isAvailable=function(){return this._progressMetaModule.value>this._availabilityProgress&&this._progressMetaModule.value+this._cakeRewardMetaModule.getRequiredLevelCount()<=this._episodesMetaModule.getMaxAvailableLevel()},t.prototype.isReady=function(){return!this._startedAt||e.prototype.isReady.call(this)&&!this._cakeRewardMetaModule.isCompleted()},t.prototype.isActive=function(){return e.prototype.isActive.call(this)&&!this._cakeRewardMetaModule.isCompleted()},t.prototype.restart=function(){var e=this;return this._startedAt=new Date,Promise.resolve().then(function(){return e._cakeRewardMetaModule.activate()}).then(function(){return e._cakeRewardMetaModule.updateState({startDate:e._startedAt})}).then(function(){return e._cakeRewardMetaModule.restart()}).then(function(){e._setState(i.MetaEvent.STATE_READY)})},t}(i.MetaEvent);n.CakeRewardMetaEvent=s,cc._RF.pop()},{"./MetaEvent (scripts.meta-events.event)":"MetaEvent (scripts.meta-events.event)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"CakeRewardMetaModule (scripts.meta.modules.daily-cake)":[function(e,t,n){"use strict";cc._RF.push(t,"2d74cGuX7RRU6UtYEQ9GUgT","CakeRewardMetaModule (scripts.meta.modules.daily-cake)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardMetaModule=void 0;var i=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=function(e){function t(t){var n=e.call(this,t)||this;return n._currentPhaseIndex=0,n._rewardIndexes=[],n._active=!1,n._phases=t.phases,n._metaTaskManager=t.metaTaskManager,n._random=t.random,n._active=!1,n}return a(t,e),t.prototype.init=function(e){return void 0===e&&(e=null),this._startLevel=e&&e.startLevel||this._getCurrentProgressValue(),e&&(this._currentPhaseIndex=e.currentPhaseIndex||this._currentPhaseIndex,this._startDate=new Date(e.startDate)||new Date,this._rewardIndexes=e.rewardIndexes||this._rewardIndexes),Promise.resolve(this.serialize())},t.prototype.activate=function(){var e=this;return Promise.resolve().then(function(){e._active=!0,e.updatePhaseState(!0)})},t.prototype.serialize=function(){return{startDate:this._startDate,rewardIndexes:this._rewardIndexes,startLevel:this._startLevel}},t.prototype.increasePhaseIndex=function(){var e=this._phases[++this._currentPhaseIndex],t=e.task,n=e.events;t&&this._metaTaskManager.registerTask(t,n)},Object.defineProperty(t.prototype,"phasesCount",{get:function(){return this._phases.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPhaseIndex",{get:function(){return this._currentPhaseIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevPhaseIndex",{get:function(){return this._prevPhaseIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startDate",{get:function(){return this._startDate},set:function(e){this._startDate=e},enumerable:!1,configurable:!0}),t.prototype.updatePhaseState=function(e){var t=this;void 0===e&&(e=!1);var n=this._getCurrentProgressValue()-this._startLevel,o=0;e&&(this._prevPhaseIndex=0,this._phases.forEach(function(e){var n=e.task;t._metaTaskManager.unregisterTask(n),n.reset()}));for(var a=0;a<this._phases.length;a++){var r=this._phases[a].task;if(n<o+r.total){if(this._currentPhaseIndex=a,e&&(r.value=n-o,r.prevValue=r.value),this.isActive()){var i=this._phases[this._currentPhaseIndex],c=i.task,s=i.events;this._metaTaskManager.registerTask(c,s)}return void(0===r.value&&this._currentPhaseIndex>0&&!e?this._prevPhaseIndex=this._currentPhaseIndex-1:this._prevPhaseIndex=this._currentPhaseIndex)}e&&(r.value=r.total,r.prevValue=r.value),o+=r.total}this._currentPhaseIndex=this._phases.length,0===this._prevPhaseIndex&&(this._prevPhaseIndex=this._currentPhaseIndex)},t.prototype.complete=function(){return this._currentPhaseIndex=this.phasesCount,this._prevPhaseIndex=this.phasesCount,Promise.resolve()},t.prototype.restart=function(){return this._startLevel=this._getCurrentProgressValue(),this.resetRewards(),this.updatePhaseState(!0),this.getService().save(this.serialize()),this.emitChange(),Promise.resolve()},t.prototype.updateState=function(e){var t=e.startDate;return this._startDate=t,Promise.resolve()},t.prototype.resetRewards=function(){var e,t;this._rewardIndexes=[];var n=this._phases.map(function(e){return e.rewardEmitter.getRewards()});try{for(var o=r(n),a=o.next();!a.done;a=o.next()){var i=a.value[0];this._rewardIndexes.push(this._random.getInteger(0,i.length))}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.isActive=function(){return this._active},t.prototype.getCurrentProgress=function(){var e=0,t=0;return this._phases.forEach(function(n){var o=n.task;e+=o.total,t+=o.value}),t/e},t.prototype.getPrevProgress=function(){var e=this,t=0,n=0;return this._phases.forEach(function(o,a){var r=o.task;t+=r.total,n+=e._prevPhaseIndex!==e._currentPhaseIndex&&e._prevPhaseIndex===a?r.prevValue:r.value}),n/t},t.prototype.getCurrentTask=function(){var e;return null===(e=this._phases[this._currentPhaseIndex])||void 0===e?void 0:e.task},t.prototype.getPrevTask=function(){var e;return null===(e=this._phases[this._prevPhaseIndex])||void 0===e?void 0:e.task},t.prototype.getPrevRewards=function(){var e,t=null===(e=this._phases[this._prevPhaseIndex])||void 0===e?void 0:e.rewardEmitter;if(t){var n=t.getRewards()[0];if(n)return n[this._rewardIndexes[this._prevPhaseIndex]]}return[]},t.prototype.getCurrentRewards=function(){var e,t=null===(e=this._phases[this._currentPhaseIndex])||void 0===e?void 0:e.rewardEmitter;if(t){var n=t.getRewards()[0];if(n)return n[this._rewardIndexes[this._currentPhaseIndex]]}return[]},t.prototype.getRewards=function(){var e=this,t=this._phases.map(function(e){return e.rewardEmitter}),n=[];return t.forEach(function(t,o){if(t){var a=t.getRewards()[0];a&&n.push(a[e._rewardIndexes[o]])}}),n},t.prototype.hasReward=function(){return this.isActive()&&this._prevPhaseIndex!==this._currentPhaseIndex},t.prototype.isCompleted=function(){return this._phases.every(function(e){return e.task.isCompleted()})&&this._currentPhaseIndex>=this.phasesCount&&this._currentPhaseIndex===this._prevPhaseIndex},t.prototype._getCurrentProgressValue=function(){var e;return(null===(e=this.getMetaGame().getModule("progress"))||void 0===e?void 0:e.value)||0},t.prototype._getMaxAvailableProgress=function(){var e;return(null===(e=this.getMetaGame().getModule("episodes"))||void 0===e?void 0:e.getMaxAvailableLevel())||0},t.prototype.getRequiredLevelCount=function(){return this._phases.map(function(e){return e.task.total}).reduce(function(e,t){return e+t})},t.prototype.getDevConsoleItems=function(){var e=this;return{reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new i.CallbackDevConsoleCommand({callback:function(){e.restart()}})},setStartLevel:{title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043d\u0430\u0447\u0430\u043b\u0430 \u044d\u0432\u0435\u043d\u0442\u0430",command:new c.InputCallbackDevConsoleCommand({placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0443\u0440\u043e\u0432\u043d\u044f",callback:function(t){e._startLevel=parseInt(t),e.updatePhaseState(!0),e.emitChange(),e.getService().save(e.serialize())}})}}},t}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.CakeRewardMetaModule=s,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"CakeRewardNameplate (scripts.meta.modules.daily-cake)":[function(e,t,n){"use strict";cc._RF.push(t,"f4ea4DZVy9R8KzHb0o+REiy","CakeRewardNameplate (scripts.meta.modules.daily-cake)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardNameplate=void 0;var i=e("./Nameplate (@tapclap.game-kit.ui.nameplate-manager)"),c=e("./MetaEvent (scripts.meta-events.event)"),s=function(e){function t(t){var n=t.metaEvent,o=r(t,["metaEvent"]),a=e.call(this,o)||this;return a._metaEvent=n instanceof c.MetaEvent?n:null,a}return a(t,e),Object.defineProperty(t.prototype,"active",{get:function(){var e,t;return(null===(e=this._metaEvent)||void 0===e?void 0:e.isAvailable())&&(null===(t=this._metaEvent)||void 0===t?void 0:t.isActive())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeLeft",{get:function(){return this._metaEvent.leftTimeDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"badge",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(i.Nameplate);n.CakeRewardNameplate=s,cc._RF.pop()},{"./MetaEvent (scripts.meta-events.event)":"MetaEvent (scripts.meta-events.event)","./Nameplate (@tapclap.game-kit.ui.nameplate-manager)":"Nameplate (@tapclap.game-kit.ui.nameplate-manager)"}],"CakeRewardWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"5e97f9+kL1cu5S7A88bh0y+","CakeRewardWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CakeRewardWindowAction=void 0;var r=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),i=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),c=e("./CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)"),s=function(e){function t(t){var n=e.call(this,t)||this;return n._cakeRewardMetaModule=t.cakeRewardMetaModule,n._cakeRewardMetaEvent=t.cakeRewardMetaEvent,n._showPrevProgress=t.showPrevProgress,n._lootBoxUnpacker=t.lootBoxUnpacker,n}return a(t,e),t.prototype._configureWindow=function(e){var t=this,n=e.getLayout("content");e.events.on(c.CakeWindowLayoutComponent.ANYWHERE_CLICK,function(){n.hideTooltips()}),e.events.once(i.WindowComponent.EVENT_SHOW.toString(),function(){var o=t._cakeRewardMetaModule.currentPhaseIndex,a=t._cakeRewardMetaModule.prevPhaseIndex,r=t._cakeRewardMetaModule.getRewards();n.addUserItemsToTooltip(r,o),n.activateCheckmarks(a,!1),n.setTimerGetter(function(){return t._cakeRewardMetaEvent.leftTimeDuration}),t._showPrevProgress?(e.setButtonCloseActive(!1),n.setTotalProgress(t._cakeRewardMetaModule.getPrevProgress()),n.setCakePhase(a),n.activateCheckmarks(a,!1),e.events.once(i.WindowComponent.EVENT_SHOWN.toString(),function(){var r=n.setCakePhaseAnimated(a,o),i=n.setTotalProgressAnimated(t._cakeRewardMetaModule.getPrevProgress(),t._cakeRewardMetaModule.getCurrentProgress()).then(function(){return n.activateCheckmarks(o)});Promise.all([r,i]).then(function(){return e.hide()}).then(function(){var a=n.createLootBox(o),r=t._cakeRewardMetaModule.getPrevRewards();a.node.setParent(e.node),t._lootBoxUnpacker.unpack({box:a,userItems:r,userItemHandler:function(e){t._userManager.getCurrentUser().items.charge([e])}}).then(function(){n.setCakePhase(o),t._cakeRewardMetaModule.phasesCount===o&&(n.hideTimer(),t._cakeRewardMetaModule.complete()),e.events.on(c.CakeWindowLayoutComponent.INFO_BUTTON_CLICK,function(e){n.toggleTooltips(e)}),e.setButtonCloseActive(!0)}).then(function(){e.node.removeChild(a.node),e.show()})})})):(t._cakeRewardMetaModule.phasesCount===o&&n.hideTimer(),n.setTotalProgress(t._cakeRewardMetaModule.getCurrentProgress()),n.setCakePhase(o),n.activateCheckmarks(o,!1),e.events.on(c.CakeWindowLayoutComponent.INFO_BUTTON_CLICK,function(e){n.toggleTooltips(e)}))})},t}(r.WindowAction);n.CakeRewardWindowAction=s,cc._RF.pop()},{"./CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)":"CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"CakeView (scripts.views.cake-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"cee36LJJNpaiZX4ADE3Exyi","CakeView (scripts.views.cake-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeView=void 0;var i=cc._decorator,c=i.ccclass,s=i.menu,p=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._staticAnimationPrefix="",t._transitionAnimationPrefix="",t}return a(t,e),t.prototype.setPhase=function(e){var t=this._staticAnimationPrefix+"-"+e;this._spine.defaultAnimation=t,this._spine.setAnimation(0,t,!1)},t.prototype.setPhaseTransition=function(e){var t=this,n=this._transitionAnimationPrefix+"-"+(e-1)+"-"+e;return new Promise(function(e){t._spine.defaultAnimation=n,t._spine.setAnimation(0,n,!1),t._spine.setCompleteListener(e)})},r([p({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),r([p({visible:!0})],t.prototype,"_staticAnimationPrefix",void 0),r([p({visible:!0})],t.prototype,"_transitionAnimationPrefix",void 0),r([c,s("UI/CakeReward/CakeView")],t)}(cc.Component);n.CakeView=l,cc._RF.pop()},{}],"CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"b0239y7xJpQ56tXckgGm7by","CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CakeWindowLayoutComponent=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=e("./DurationFormatter (@tapclap.game-kit.ui.formatters)"),s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),p=e("./CounterAnimation (@tapclap.match-x.cocos.animations)"),l=e("./CakeView (scripts.views.cake-reward)"),m=e("./ChefCakeView (scripts.views.cake-reward)"),u=e("./CakeRewardItemComponent (scripts.windows.items)"),d=e("./LootBoxView (@tapclap.game-kit.ui.loot-box)"),y=cc._decorator,f=y.ccclass,h=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cakeView=null,t._lootBoxPrefabs=[],t._chefView=null,t._chefViewPhasesList=[],t._totalProgressBar=null,t._progressDuration=1,t._timer=null,t._timerNode=null,t._descriptionLabel=null,t._boxRewardArray=[],t._defaultCakeTitleKey="redVelvet",t._timerScheduleCallback=null,t._totalProgressAnimation=null,t._taskProgressAnimation=null,t}var n;return a(t,e),n=t,t.prototype.createLootBox=function(e){var t=cc.instantiate(this._lootBoxPrefabs[e-1]);return t.setScale(0),t.getComponent(d.LootBoxView)},t.prototype.activateCheckmarks=function(e,t){void 0===t&&(t=!0);for(var n=[],o=0;o<e;o++){var a=this._boxRewardArray[o];n.push(a.activateCheckmark(t))}return Promise.all(n).then(function(){return Promise.resolve()})},t.prototype.setCakePhase=function(e){var t=new Set;this._cakeView.setPhase(e),this._chefView&&this._chefView.setPhase(e),this._chefViewPhasesList.forEach(function(n,o){n&&(n.active=!1,o===e&&t.add(n))}),t.forEach(function(e){e.active=!0})},t.prototype.setCakePhaseAnimated=function(e,t){var n=[this._cakeView.setPhaseTransition(t)];return this.setCakePhase(e),this._chefView&&n.push(this._chefView.setPhaseAction(e)),Promise.all(n).then(function(){return Promise.resolve()})},t.prototype.setTotalProgressAnimated=function(e,t){var n=this;return this._totalProgressAnimation=new p.CounterAnimation(Math.floor(100*t),Math.floor(100*e),this._progressDuration,function(e){n._totalProgressBar.progress=e/100}),this._totalProgressAnimation.run()},t.prototype.setTotalProgress=function(e){this._totalProgressBar.progress=e},t.prototype.setTimerGetter=function(e){var t=this;this.unschedule(this._timerScheduleCallback),this._timerScheduleCallback=function(){t._timer.string=c.DurationFormatter.format(e().getDuration())},this._timerScheduleCallback(),this.schedule(this._timerScheduleCallback,1,cc.macro.REPEAT_FOREVER)},t.prototype.hideTimer=function(){this._timerNode.active=!1},t.prototype.showTooltips=function(){this._boxRewardArray.forEach(function(e){e.showTooltip()})},t.prototype.hideTooltips=function(){this._boxRewardArray.forEach(function(e){e.hideTooltip()})},t.prototype.toggleTooltips=function(e){this._boxRewardArray.forEach(function(t){t===e.item?t.toggleTooltip():t.hideTooltip()})},t.prototype.addUserItemsToTooltip=function(e,t){void 0===t&&(t=0);for(var n=t;n<e.length;n++)this._boxRewardArray[n].addUserItemToTooltip(e[n])},t.prototype.onLoad=function(){var e=this;this._descriptionLabel&&this._descriptionLabel.setParams({cakeTitle:this._defaultCakeTitleKey}),this._boxRewardArray.forEach(function(t){t.node.on(u.CakeRewardItemComponent.INFO_BUTTON_CLICK,function(t){e._window.events.emit(n.INFO_BUTTON_CLICK,t)})}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e._window.events.emit(n.ANYWHERE_CLICK)})},t.prototype.onDestroy=function(){this._totalProgressAnimation&&this._totalProgressAnimation.stop()},t.INFO_BUTTON_CLICK="infoButtonClick",t.ANYWHERE_CLICK="anywhereClick",r([h({type:l.CakeView,visible:!0})],t.prototype,"_cakeView",void 0),r([h({type:[cc.Prefab],visible:!0})],t.prototype,"_lootBoxPrefabs",void 0),r([h({type:m.ChefCakeView,visible:!0})],t.prototype,"_chefView",void 0),r([h({type:[cc.Node],visible:!0})],t.prototype,"_chefViewPhasesList",void 0),r([h({type:cc.ProgressBar,visible:!0})],t.prototype,"_totalProgressBar",void 0),r([h({visible:!0})],t.prototype,"_progressDuration",void 0),r([h({type:cc.Label,visible:!0})],t.prototype,"_timer",void 0),r([h({type:cc.Node,visible:!0})],t.prototype,"_timerNode",void 0),r([h({type:i.I18NLabel,visible:!0})],t.prototype,"_descriptionLabel",void 0),r([h({type:[u.CakeRewardItemComponent],visible:!0})],t.prototype,"_boxRewardArray",void 0),r([h({visible:!0})],t.prototype,"_defaultCakeTitleKey",void 0),n=r([f],t)}(s.WindowLayoutComponent);n.CakeWindowLayoutComponent=g,cc._RF.pop()},{"./CakeRewardItemComponent (scripts.windows.items)":"CakeRewardItemComponent (scripts.windows.items)","./CakeView (scripts.views.cake-reward)":"CakeView (scripts.views.cake-reward)","./ChefCakeView (scripts.views.cake-reward)":"ChefCakeView (scripts.views.cake-reward)","./CounterAnimation (@tapclap.match-x.cocos.animations)":"CounterAnimation (@tapclap.match-x.cocos.animations)","./DurationFormatter (@tapclap.game-kit.ui.formatters)":"DurationFormatter (@tapclap.game-kit.ui.formatters)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./LootBoxView (@tapclap.game-kit.ui.loot-box)":"LootBoxView (@tapclap.game-kit.ui.loot-box)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":[function(e,t,n){"use strict";cc._RF.push(t,"9d240CB3SddnIifypx1PBRM","CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CallbackDevConsoleCommand=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._callback=t.callback,n}return a(t,e),t.prototype.execute=function(){var e=this;return Promise.resolve().then(function(){if(e._callback)return e._callback(e._devConsoleComponent)})},t}(e("./DevConsoleCommand (@tapclap.game-kit.devconsole)").DevConsoleCommand);n.CallbackDevConsoleCommand=r,cc._RF.pop()},{"./DevConsoleCommand (@tapclap.game-kit.devconsole)":"DevConsoleCommand (@tapclap.game-kit.devconsole)"}],"CanBeCoveredComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0379aeBKJJbiYiBC35mD1ZO","CanBeCoveredComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CanBeCoveredComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="canBeCovered",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CanBeCoveredComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"d9ec9+eNaZUH5yHBVn1kZ0Q","CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CanBeReplacedByEmitComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="canBeReplacedByEmit",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CanBeReplacedByEmitComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7e473S+s9NanbYow5lxvih6","CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CanBeReplacedByWalkComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="canBeReplacedByWalk",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CanBeReplacedByWalkComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"dd6c9kIFmZSL6ZdF3cs/sEm","CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyExplodeAnimationBuilder=void 0;var i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),l=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),m=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),d=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=function(e){function t(t){var n=e.call(this,{eventMap:t.eventMap})||this;return n._sounds=t.sounds,n._entityTypes=t.entityTypes,n._audioEffectsPlayer=t.audioEffectsPlayer,n}return a(t,e),t.prototype.build=function(e){var n,o,a=this,u=[];if(null==e?void 0:e.data){var y=e.data.flat(),f=function(e,n,o){if(h._entityTypes.includes(e.type)&&e.getEnabledComponent(p.ExplodeComponent.KEY)){var r=n||o;u.push(new i.AnimationData(e,new d.GroupAnimation([new c.ChainAnimation([r?new s.EventListenAnimation(r,h._getEventFromMap(t.EVENT_EXPLODE)):new m.DummyAnimation,function(){var n=new l.AnimationFactory(e);if(n.hasAnimation("explode")){var o=n.createAnimation("explode",{event:"finish",timeScale:1.2});if(o){var r=a._sounds[Math.floor(Math.random()*a._sounds.length)];return new c.ChainAnimation([o,new s.EventTriggerAnimation(e,a._getEventFromMap(t.EVENT_EXPLODE)),a._audioEffectsPlayer.create(r,{mergable:0,volume:.25})])}}return new m.DummyAnimation}()]),new m.DummyAnimation],!!r)))}},h=this;try{for(var g=r(y),v=g.next();!v.done;v=g.next()){var _=v.value;f(_.entity,_.affectedBy,_.blastedBy)}}catch(b){n={error:b}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}}return[u]},t.EVENT_EXPLODE="explode",t}(u.GameActionBuilder);n.CandyExplodeAnimationBuilder=y,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"CandySpinnerComponent (scripts.common.spinner)":[function(e,t,n){"use strict";cc._RF.push(t,"2597dEJ75JG8ZMdCm6uyCWt","CandySpinnerComponent (scripts.common.spinner)"),n.__esModule=!0,n.CandySpinnerComponent=void 0;var o,a,r,i,c,s,p=e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var y=cc._decorator,f=y.ccclass,h=y.property,g=(o=h({type:cc.Float,visible:!0}),a=h({type:cc.Float,visible:!0}),f((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_showDuration",c,m(t)),l(t,"_spinDuration",s,m(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var a=o.prototype;return a.show=function(){var e=this;return new Promise(function(t){var n=e.node.scale;e.node.scale=0,e.node.runAction(cc.sequence([cc.spawn([cc.scaleTo(e._showDuration,n).easing(cc.easeBackOut()),cc.rotateBy(e._showDuration,-360).easing(cc.easeBackOut())]),cc.callFunc(t),cc.callFunc(function(){e.node.runAction(cc.sequence([cc.rotateBy(e._spinDuration,-30).easing(cc.easeSineOut()),cc.rotateBy(e._spinDuration,30).easing(cc.easeSineOut())]).repeatForever())})]))})},a.hide=function(){var e=this;return new Promise(function(t){e.node.stopAllActions(),e.node.runAction(cc.sequence([cc.spawn([cc.scaleTo(e._showDuration,0).easing(cc.easeBackIn()),cc.rotateBy(e._showDuration,-360).easing(cc.easeBackIn())]),cc.callFunc(t)]))})},o}(p.SpinnerComponent),c=d(i.prototype,"_showDuration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),s=d(i.prototype,"_spinDuration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r=i))||r);n.CandySpinnerComponent=g,cc._RF.pop()},{"./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)"}],"CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b83aaeI14ZSb4u16BD7kBc0","CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.CandyWrapperLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(t){var n,o=t.entities,a=t.entityRandom,r=t.entityColorMap,i=t.emitComponentKey,c=t.wrapperContentComponentKey,s=t.componentRetrievers,p=t.componentOptionsParsers,l=t.converter;return(n=e.call(this)||this)._entities=o,n._entityRandom=a,n._entityColorMap=r,n._emitComponentKey=i,n._wrapperContentComponentKey=c,n._componentRetrievers=s,n._componentOptionsParsers=null!=p?p:[],n._converter=l,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){var t=this,n=[];Array.isArray(e.candyContent)?e.candyContent.forEach(function(e){var t=e[0],o=e[1],a=e[2],r=e.slice(3);n.push({contentCode:o,contentProbability:a/100,contentLayer:t,options:r})}):n.push({contentCode:e.candyContent,contentProbability:1,contentLayer:void 0,options:[]});for(var o={},a={},r=function(){var n,o=c[i],r=o.contentLayer,s=o.contentCode,p=o.contentProbability,l=o.options,m=t._converter(r,s),u=m.layer,d=m.code,y=null==(n=t._entities[u][d])?void 0:n.type,f=(t._componentRetrievers.value[u]||[]).filter(function(e){return e.codes.includes(d)}),h=t._componentOptionsParsers.filter(function(e){return e.types.includes(y)}),g=f.map(function(t){return t.retriever.retrieve(e)}).reduce(function(e,t){return Object.assign(e,t)},{});Object.assign.apply(Object,[g].concat(h.map(function(e){return e.parse.apply(void 0,l)})));var v=t._entityRandom[u];if(v&&v[d]){var _=Object.assign({},v[d]);if(_){var b=new Set(e.colors.split("").reduce(function(e,n){return t._entityColorMap[n]&&e.push.apply(e,t._entityColorMap[n]),e},[]));Object.keys(_).forEach(function(e){if(b.has(e)){var t,n=Object.assign({},(null==(t=_[e])?void 0:t.components)||{},g);_[e]=Object.assign({},_[e],{amount:1,probability:p,options:{components:n}})}else delete _[e]}),Object.assign(a,_)}}else if(y){var C,w=(null==(C=t._entities[u][d])?void 0:C.components)||{};a[y]={amount:1,probability:p,options:{components:Object.assign({},w,g)}}}else console.error("Entity type for candywrapper not found for code",r,s)},i=0,c=n;i<c.length;i++)r();if(n.length>0&&0===Object.keys(a).length)throw new Error("candyContent with "+e.candyContent+" not resolved in entity config");var s=new Map;return Object.keys(a).forEach(function(e){var t,n=e.split("-")[0],o=null!=(t=s.get(n))?t:0;s.set(n,++o)}),Object.entries(a).forEach(function(e){var t,n=e[0],o=e[1],a=n.split("-")[0],r=null!=(t=s.get(a))?t:1;o.probability=o.probability/r}),o[this._emitComponentKey]={type:"random",target:"emitter",emitCount:1,entities:a},o[this._wrapperContentComponentKey]={content:Object.keys(a)},o},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.CandyWrapperLegacyLevelComponentRetriever=a,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)":[function(e,t,n){"use strict";cc._RF.push(t,"3f8f6VJ8btV55vBtq8ek4GW","CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CandyboxEmitStrategy=void 0;var r=e("./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)"),i=e("./GroupComponent (@tapclap.match-x.engine.components)"),c=e("./GroupEntityMapComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),p=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),l=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)"),m=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)"),u=function(e){function t(t){var n=t.world,o=t.entitySystem,a=e.call(this)||this;return a._entitySystem=o,a._world=n,a}return a(t,e),t.prototype.getEmitEntity=function(e){var t,n,o=e.grid,a=e.entity,r=o.getEnabledComponent(c.GroupEntityMapComponent.KEY);if(r){var u=(null!==(n=null===(t=this._world.getEnabledComponentByClass(s.ExplodeCollectionComponent))||void 0===t?void 0:t.models)&&void 0!==n?n:[]).find(function(e){return e.entity==a});if(u){var d=u.blastedBy||u.affectedBy;if(d){var y=d.getEnabledComponent(i.GroupComponent.KEY);if(y){var f=r.map[y.id];if(f){var h=this._entitySystem.createEntity(f),g=h.getEnabledComponentByClass(p.MultiplierComponent);return g&&(g.addValue(5),this._world.pushState(l.MultiplierSystem.STATE,new m.MultiplierSystemModel(h,g.getValue(),g.getMinValue()))),h}}}}}return null},t}(r.EmitStrategy);n.CandyboxEmitStrategy=u,cc._RF.pop()},{"./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)","./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupEntityMapComponent (@tapclap.match-x.engine.components)":"GroupEntityMapComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)"}],"CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"743a4K825tVn6K7aqMCCFRF","CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyboxEmitTargetStrategy=void 0;var s=e("./EmitTargetComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),l=e("./GroupComponent (@tapclap.match-x.engine.components)"),m=e("./GroupEntityMapComponent (@tapclap.match-x.engine.components)"),u=e("./Entity (@tapclap.match-x.engine.entities)"),d=function(e){function t(t){var n=t.world,o=r(t,["world"]),a=e.call(this,o)||this;return a._world=n,a}return a(t,e),t.prototype.getEmitTarget=function(e){var t,n,o,a,r,i=null===(t=e.grid.getEnabledComponentByClass(m.GroupEntityMapComponent))||void 0===t?void 0:t.map;if(!i)return null;var d=[],y=e.entity.getComponentByClass(s.EmitTargetComponent),f=u.Entity.LAYER_DEFAULT;y&&(d.push.apply(d,c(y.excludeEntityTypes)),f=y.layer);var h=null!==(o=null===(n=this._world.getEnabledComponentByClass(p.ExplodeCollectionComponent))||void 0===n?void 0:n.models)&&void 0!==o?o:[],g=e.entity,v=h.find(function(e){return e.entity==g}),_=i[null===(r=null===(a=null==v?void 0:v.affectedBy)||void 0===a?void 0:a.getEnabledComponentByClass(l.GroupComponent))||void 0===r?void 0:r.id];return d.push(_),this._getRandomCell(e.grid,f,d)},t}(e("./RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)").RandomComponentEmitTargetStrategy);n.CandyboxEmitTargetStrategy=d,cc._RF.pop()},{"./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupEntityMapComponent (@tapclap.match-x.engine.components)":"GroupEntityMapComponent (@tapclap.match-x.engine.components)","./RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"}],"CandyvalleyBarSceneComponent (scripts.scenes)":[function(e,t,n){"use strict";cc._RF.push(t,"2c7e434qnZaUbralJxrkRNM","CandyvalleyBarSceneComponent (scripts.scenes)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyBarSceneComponent=n.Bars=void 0;var i,c=e("./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),s=e("./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)"),p=e("./CandyvalleyBarTimerComponent (scripts.scenes)"),l=e("./Inject (@tapclap.utils-js.inject)"),m=cc._decorator,u=m.ccclass,d=m.property;(function(e){e.currency="currency",e.attempts="attempts",e.all="all"})(i=n.Bars||(n.Bars={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currency=null,t._currencyTimer=null,t._attempts=null,t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"currency",{get:function(){return this._currency},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attempts",{get:function(){return this._attempts},enumerable:!1,configurable:!0}),t.prototype.setAttemptsActive=function(e){this._attempts.node.active=e},t.prototype.setCurrencyActive=function(e){this._currency.node.active=e},t.prototype.setActiveOnly=function(e){switch(e){case i.currency:this.setAttemptsActive(!1);break;case i.attempts:this.setCurrencyActive(!1);break;case i.all:this.setAttemptsActive(!0),this.setCurrencyActive(!0)}},t.prototype.init=function(){if(this._currency){var e=this._userManager.getCurrentUser();this._currency.setUserItem(e.items.get("currency","coins"))}var t=[this._saleDoubleCoinsDateRange,this._saleUnlimitedLivesDateRange],n=Date.now(),o=t.find(function(e){var t=e.startDate,o=e.finishDate;if(t||o){var a=t?t.getTime():-1/0,r=o?o.getTime():1/0;if(a<n&&n<r)return!0}});if(o&&this._salesState.resolve()){var a=o.startDate,r=o.finishDate;a.getTime()<n&&n<r.getTime()&&this._currencyTimer.setFinishDate(r)}var i=this._metaGameManager.getCurrentMetaGame().getModule("attempts");return this._attempts&&i&&this._attempts.setMetaModule(i),Promise.resolve()},t.prototype.onTapCurrency=function(){this.node.emit(n.CURRENCY_TAP)},t.prototype.onTapAttempts=function(){this.node.emit(n.ATTEMPTS_TAP)},t.CURRENCY_TAP="currencyTap",t.ATTEMPTS_TAP="attemptsTap",t.BAR_TYPES=i,r([d({type:s.CoinsBarComponent,visible:!0})],t.prototype,"_currency",void 0),r([d({type:p.CandyvalleyBarTimerComponent,visible:!0})],t.prototype,"_currencyTimer",void 0),r([d({type:c.AttemptsBarComponent,visible:!0})],t.prototype,"_attempts",void 0),r([l.Inject("UserManager")],t.prototype,"_userManager",void 0),r([l.Inject("SaleDoubleCoinsDateRange")],t.prototype,"_saleDoubleCoinsDateRange",void 0),r([l.Inject("SaleUnlimitedLivesDateRange")],t.prototype,"_saleUnlimitedLivesDateRange",void 0),r([l.Inject("MetaGameManager")],t.prototype,"_metaGameManager",void 0),r([l.Inject("SalesState")],t.prototype,"_salesState",void 0),n=r([u],t)}(cc.Component);n.CandyvalleyBarSceneComponent=y,cc._RF.pop()},{"./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./CandyvalleyBarTimerComponent (scripts.scenes)":"CandyvalleyBarTimerComponent (scripts.scenes)","./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)":"CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)"}],"CandyvalleyBarTimerComponent (scripts.scenes)":[function(e,t,n){"use strict";cc._RF.push(t,"dac37cv+ltYvY/pBvl2OjLj","CandyvalleyBarTimerComponent (scripts.scenes)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyBarTimerComponent=void 0;var i=e("./TimeDuration (@tapclap.utils-js.time-duration)"),c=e("./Inject (@tapclap.utils-js.inject)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._timeLabel=null,t._timeAnimationClip=null,t._formattedTimeKey="formattedTime",t._animation=null,t}return a(t,e),t.prototype.onLoad=function(){var e=this;this._animation=this.node.getComponent(cc.Animation),this._animation.getClips().find(function(t){return e._timeAnimationClip===t})||this._animation.addClip(this._timeAnimationClip),this._updateTimer(),this.schedule(function(){return e._updateTimer()},1,cc.macro.REPEAT_FOREVER)},t.prototype.setFinishDate=function(e){this._finishDate=e},t.prototype._updateTimer=function(){var e=new Date;if(this._finishDate){var t=new i.TimeDuration((this._finishDate.getTime()-e.getTime())/1e3);if(t.getSeconds()>0){this.node.active=!0;var n=this._i18n.t(this._formattedTimeKey,{value:t.getSeconds()});this._timeLabel.string=n;var o=this._animation.getAnimationState(this._timeAnimationClip.name);o&&!o.isPlaying&&this._animation.play(this._timeAnimationClip.name)}else this._animation.stop(),this.node.active=!1}else this.node.active=!1},r([l({type:cc.Label,visible:!0})],t.prototype,"_timeLabel",void 0),r([l({type:cc.AnimationClip,visible:!0})],t.prototype,"_timeAnimationClip",void 0),r([c.Inject("I18N")],t.prototype,"_i18n",void 0),r([p],t)}(cc.Component);n.CandyvalleyBarTimerComponent=m,cc._RF.pop()},{"./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"CandyvalleyBoosterViewComponent (scripts.common.match3-game.components)":[function(e,t,n){"use strict";cc._RF.push(t,"70337VWj/VHhZVDkUEuucl3","CandyvalleyBoosterViewComponent (scripts.common.match3-game.components)"),n.__esModule=!0,n.CandyvalleyBoosterViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_=e("./BoosterViewComponent (@tapclap.match-x.cocos.components)"),b=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function C(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var x=cc._decorator,A=x.ccclass,O=x.property,R=(o=O({type:cc.SpriteFrame,visible:!0}),a=O({type:cc.SpriteFrame,visible:!0}),r=O({type:cc.Sprite,visible:!0}),i=O({type:b.I18NLabel,visible:!0}),c=O({type:cc.SpriteFrame,visible:!0}),s=O({type:cc.SpriteFrame,visible:!0}),p=O({type:cc.SpriteFrame,visible:!0}),A((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return C(t=e.call.apply(e,[this].concat(o))||this,"_defaultCounterSprite",u,w(t)),C(t,"_enoughCounterSprite",d,w(t)),C(t,"_lockIcon",y,w(t)),C(t,"_lockText",f,w(t)),C(t,"_defaultBackground",h,w(t)),C(t,"_activeBackground",g,w(t)),C(t,"_lockedBackground",v,w(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,S(t,n);var a=o.prototype;return a.onLoad=function(){this.setEnableBooster()},a._updateCounterSprite=function(){var e=this._counter.getComponent(cc.Sprite);e&&(this._boosterCount>0?e.spriteFrame=this._defaultCounterSprite:e.spriteFrame=this._enoughCounterSprite)},a.setBoosterCount=function(e){this._boosterCount=Math.max(e,0),this._boosterCount>0?this._labelCounter.string=this._boosterCount.toString():this._labelCounter.string="",this._updateCounterSprite()},a._setBg=function(e){this._button.getComponent(cc.Sprite).spriteFrame=e},a.setBoosterActive=function(e){this._setBg(e?this._activeBackground:this._defaultBackground)},a.setEnableBooster=function(e){void 0===e&&(e=!1),e?(this._lockIcon&&(this._lockIcon.node.active=!1),this._lockText&&(this._lockText.node.active=!1),this._icon.node.active=!0,this._counter.active=!0,this._button.interactable=!0,this._setBg(this._defaultBackground)):(this._lockIcon&&(this._lockIcon.node.active=!0),this._lockText&&(this._lockText.node.active=!0),this._icon.node.active=!1,this._counter.active=!1,this._button.interactable=!1,this._setBg(this._lockedBackground))},a.setLockLevelBooster=function(e){if(this._lockText){var t=this._lockText.getComponent(b.I18NLabel);t&&t.setString("boosterLevelRestriction",{level:e})}},o}(_.BoosterViewComponent),u=E(m.prototype,"_defaultCounterSprite",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=E(m.prototype,"_enoughCounterSprite",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E(m.prototype,"_lockIcon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=E(m.prototype,"_lockText",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=E(m.prototype,"_defaultBackground",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=E(m.prototype,"_activeBackground",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E(m.prototype,"_lockedBackground",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=m))||l);n.CandyvalleyBoosterViewComponent=R,cc._RF.pop()},{"./BoosterViewComponent (@tapclap.match-x.cocos.components)":"BoosterViewComponent (@tapclap.match-x.cocos.components)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)":[function(e,t,n){"use strict";cc._RF.push(t,"d9ac2/HAMJfpadDd5qUxkRk","CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)"),n.__esModule=!0,n.CandyvalleyLegacyLevelConverter=void 0;var o=e("./LegacyLevelConverter (@tapclap.match-x.engine.level-converter)"),a=e("./Cell (@tapclap.match-x.engine.entities)"),r=e("./Matrix (@tapclap.match-x.engine.models)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,a,r,i;return(i=e.call(this)||this)._baseEntities=t.baseEntities,i._boosterMap=t.boosterMap,i._complexTaskMap=t.complexTaskMap,i._bossGoals=t.bossGoals,i._pearls=t.pearls||[],i._autoProbability=t.autoProbability||[],i._autoBossGoalProbability=t.autoBossGoalProbability||{},i._randomSeed=t.randomSeed,i._processOnceCodes=t.processOnceCodes||[],i._disabledCellCodes=t.disabledCellCodes||[],i._ignoredEntityCodes=(t.ignoredEntityCodes||[]).concat(i._disabledCellCodes),i._bossHolderCodes=t.bossHolderCodes||[],i._defaultTaskCellAttribute=t.defaultTaskCellAttribute,i._defaultFloorAttributeCode=t.defaultFloorAttributeCode,i._defaultProbabilityConfig=t.defaultProbabilityConfig,i._defaultBossEntityProbabilityConfig=t.defaultBossEntityProbabilityConfig,i._entityColorMap=t.entityColorMap||{},i._colorCodesReplacementMap=t.colorCodesReplacementMap||{},i._combineTypes=t.combineTypes||{},i._entityCountLimitForGroupCodes=t.entityCountLimitForGroupCodes||[],i._componentRetrievers=t.componentRetrievers||[],i._emitStrategyRetrievers=t.emitStrategyRetrievers||{},i._decoratorNameToCodeMap=t.decoratorNameToCodeMap||{},i._configByCondition=t.configByCondition||[],i._sameGoalByGroupCodes=t.sameGoalByGroupCodes||[],i._goalEntityRetrievers=t.goalEntityRetrievers||[],i._bossComplexTargetIcons=t.bossComplexTargetIcons||{},i._candyBombByColor=t.candyBombByColor||{},i._sizedCodes=t.sizedCodes||{},i._symbolToColorMap=t.symbolToColorMap||{},i._snailGoalCode=t.snailGoalCode,i._entityCountLimitForGroupCodesByGoals=t.entityCountLimitForGroupCodesByGoals||[],i._groupProbabilityByEntityType=t.groupProbabilityByEntityType||[],i._levelDataProbability=t.levelDataProbability||{},i._gumGoalCode=t.gumGoalCode,i._levelComponentRetrievers=t.levelComponentRetrievers||[],i._match3GameConfig=t.match3GameConfig||{},i._entityRetrievers=Object.assign(((n={})[o.TYPE_MAP]=null,n[o.TYPE_DECORATORS]=null,n[o.TYPE_FLOOR_ATTRIBUTE]=null,n[o.TYPE_CELL_ATTRIBUTE]=null,n),t.entityRetrievers||{}),i._entityRandom=Object.assign(((a={})[o.TYPE_MAP]={},a[o.TYPE_DECORATORS]={},a[o.TYPE_FLOOR_ATTRIBUTE]={},a[o.TYPE_CELL_ATTRIBUTE]={},a),t.entityRandom||{}),i._entityCodeCounts=((r={})[o.TYPE_MAP]={},r[o.TYPE_DECORATORS]={},r[o.TYPE_FLOOR_ATTRIBUTE]={},r[o.TYPE_CELL_ATTRIBUTE]={},r),i._probabilities={},i._limits=[],i._ignoredProbabilitiesOnInitialRandom=[],i._tutorialEmitStrategies=t.tutorialEmitStrategies||[],i}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var c=o.prototype;return c._createMatrix=function(e){var t=new r.Matrix;return e&&e.forEach(function(e,n){e.split("").forEach(function(e,o){t[n]||(t[n]=[]),t[n][o]=e})}),t},c._retrieveProbabilities=function(e,t){for(var n,o=this,a=this._levelData.colors.split(""),r=this._levelData.colors.split("").map(function(e){var t;return(null==(t=o._colorCodesReplacementMap[e])?void 0:t.code)||e}),c=e[t],s=[],p=function(){var e=n.value,a=o._retrieveEntity(t,e);if(a){var r,i=o._levelDataProbability.find(function(e){return e.types.includes(a.type)}),c=i?(null!=(r=o._levelData[i.configKey])?r:1)/100:1,p=o._getAutoProbability().find(function(n){var o=n.code,a=n.layer;return e===o&&t===a});p&&p.ignoreOnInitialRandom&&o._ignoredProbabilitiesOnInitialRandom.push(a.type),o._probabilities[a.type]=Object.assign({},o._defaultProbabilityConfig,{probability:c})}else s.push(e)},l=i(a);!(n=l()).done;)p();for(var m=this._getReplacedColorCodes(s,t),u=Array.from(new Set([].concat(c.flat(),m))),d=function(e){var n=u[e],a=o._getAutoProbability().find(function(e){var o=e.code,a=e.layer;return n===o&&t===a});if(a){var c=a.layer,s=a.code,p=a.ignoreOnInitialRandom,l=void 0!==p&&p,m=a.considerColorOnly,d=void 0!==m&&m,y=a.ignoreColorInclude,f=void 0!==y&&y,h=o._getEntityRandomConfig(c,s);if(!f&&(!d||r.includes(s)))if(h)(function(){for(var e,t=Object.keys(h),n=[],a=i(r);!(e=a()).done;){var c=e.value;if(o._entityColorMap[c]){var s=o._entityColorMap[c].filter(function(e){return t.includes(e)});n.push.apply(n,s)}}for(var p=function(){var e,t=u[m],n=Object.assign({},o._defaultProbabilityConfig),a=o._levelDataProbability.find(function(e){return e.types.includes(t)}),r=a?(null!=(e=o._levelData[a.configKey])?e:1)/100:1;o._probabilities[t]=Object.assign({},n,{options:h[t]||{}},{probability:r}),l&&o._ignoredProbabilitiesOnInitialRandom.push(t)},m=0,u=n;m<u.length;m++)p()})();else{var g,v=o._retrieveEntity(c,s).type,_=o._levelDataProbability.find(function(e){return e.types.includes(v)}),b=_?(null!=(g=o._levelData[_.configKey])?g:1)/100:1,C=Object.assign({},o._defaultProbabilityConfig,{probability:b});o._probabilities[v]=Object.assign({},C),l&&o._ignoredProbabilitiesOnInitialRandom.push(v)}}},y=0;y<u.length;y++)d(y);if(this._levelData.bossName&&this._levelData.bossLife>0&&this._autoBossGoalProbability[this._levelData.bossName]){var f=this._getBossEntityNameList(),h=this._autoBossGoalProbability[this._levelData.bossName];f.map(function(e){o._probabilities[e]=Object.assign({},o._defaultBossEntityProbabilityConfig,h(o._levelData)),o._ignoredProbabilitiesOnInitialRandom.push(e)})}},c._convertProbabilitiesForGroups=function(){for(var e=this,t=Object.keys(this._probabilities).filter(function(t){return e._baseEntities.includes(t)}),n=t.length,o=new Set,a=function(){var t=i[r],a=t[0],c=t[1];1===c.probability&&o.add(a);var s=e._groupProbabilityByEntityType.find(function(e){return e.types.includes(a)});if(s){var p=s.types,l=s.divideOnTotal,m=0;p&&p.forEach(function(t){e._probabilities[t]&&m++}),m>0&&Object.assign(e._probabilities[a],{probability:c.probability/m/(l?n:1)})}},r=0,i=Object.entries(this._probabilities);r<i.length;r++)a();var c=Object.entries(this._probabilities).filter(function(t){var n=t[0];return t[1],!e._baseEntities.includes(n)&&!o.has(n)}).map(function(e){return e[1].probability}).reduce(function(e,t){return e+t},0);t.forEach(function(t){Object.assign(e._probabilities[t],{probability:(e._probabilities[t].probability-c)/n})})},c._retrieveGridSize=function(){var e=this;this._levelData.map.forEach(function(t,n){t.split("").forEach(function(t,o){n>e._rows&&(e._rows=n),o>e._cols&&(e._cols=o)})}),this._rows++,this._cols++},c._getBossEntityNameList=function(){var e=this._levelData.colors.split(""),t=[],n=this._bossGoals[this._levelData.bossName];if(n)for(var o,a=i(n);!(o=a()).done;){var r=o.value;if(r.colors.length>0)for(var c,s=i(e);!(c=s()).done;){var p=c.value,l=r.code+"-"+p,m=this._retrieveEntity(r.layer,l);if(m){var u,d;t.push(m.type);var y=null==(u=m.components)?void 0:null==(d=u.group)?void 0:d.id;y&&this._candyBombByColor[y]&&t.push(this._candyBombByColor[y])}}else{var f=this._retrieveEntity(r.layer,r.code);if(f){var h,g;t.push(f.type);var v=null==(h=f.components)?void 0:null==(g=h.group)?void 0:g.id;v&&this._candyBombByColor[v]&&t.push(this._candyBombByColor[v])}}}return t},c._retrieveDisabledCells=function(e){for(var t=0;t<this._rows;t++)for(var n=0;n<this._cols;n++)this._disabledCellCodes.includes(e[t][n])&&this._cells.push({row:t,col:n,state:a.Cell.STATE_DISABLED})},c._retrieveGroups=function(){var e=this;return this._levelData.colors.split("").map(function(t){return e._symbolToColorMap[t]})},c._retrieveEntities=function(e,t){for(var n=this,a=e[t],r=[],c=[],s=function(s){for(var p=function(p){var l=!1,m=null,u={},d=a[s][p],y={row:s,col:p};switch(!0){case n._ignoredEntityCodes.includes(d):case c.includes(d)&&t===o.TYPE_MAP:break;case!!r.find(function(e){var t=e.x,n=e.y;return t===p&&n===s}):l=!0;break;case n._bossHolderCodes.includes(d):if(n._bossSet)return"continue";m=n._retrieveEntity(o.TYPE_BOSSES,n._levelData.bossName),u={components:{goalCollector:{goals:n._createBossGoals()}}},n._bossSet=!0;break;default:if(void 0!==d){var f=n._combineTypes[t],h=n._getEntityRandomConfig(t,d);if(f){var g=e[f],v=g[s]&&g[s][p];v&&!n._ignoredEntityCodes.includes(v)&&(m=n._retrieveEntity(f,d+"-"+v));var _=[].concat(n._levelData.colors.split(""),n._ignoredEntityCodes);if(!m&&!_.includes(v))return"continue"}else h||(m=n._retrieveEntity(t,d))}}if(m&&n._processOnceCodes.includes(d)&&c.push(d),t===o.TYPE_MAP){var b=n._sizedCodes[d];if(b&&!l)for(var C=p;C<b.width+p;C++)for(var w=s;w<b.height+s;w++)r.push({x:C,y:w})}if(!l){var S=[],E=n._getEntityRandomConfig(t,d);if(Array.isArray(m))for(var x,A=i(m);!(x=A()).done;){var O=x.value,R=Object.assign({},y);R.entity=Object.assign({},O,u),S.push(R)}else if(m)y.entity=Object.assign({},m,u),S.push(y);else if(E){for(var P,k={},T=[],I=i(n._levelData.colors.split(""));!(P=I()).done;){var M=P.value;T.push.apply(T,n._entityColorMap[M])}for(var j=0,L=Object.entries(E);j<L.length;j++){var F=L[j],D=F[0],B=F[1];T.includes(D)&&(k[D]=Object.assign({},n._defaultProbabilityConfig,B))}y.randomEntities=k,S.push(y)}S.forEach(function(e){if(e.entity){var t=n._levelComponentRetrievers.filter(function(t){var n=t.types;return e.entity&&n.includes(e.entity.type)});if(t.length>0){var o=t.map(function(t){return t.retriever.retrieve(e,n._levelData)});e.entity.components=e.entity.components||{},Object.assign.apply(Object,[e.entity.components].concat(o))}n._cells.push(e)}if(e.randomEntities){var a=function(t){var o=e.randomEntities[t],a=n._levelComponentRetrievers.filter(function(e){return e.types.includes(t)});if(a.length>0){var r=a.map(function(t){return t.retriever.retrieve(e,n._levelData)});o.components=o.components||{},Object.assign(o,{components:Object.assign.apply(Object,[{},o.components].concat(r))})}};for(var r in e.randomEntities)a(r);n._cells.push(e)}})}},l=0;l<n._cols;l++)p(l)},p=0;p<this._rows;p++)s(p)},c._getPropertyByConditions=function(e){var t=this,n={};return this._configByCondition.filter(function(e){return(0,e.condition)(t._levelData)}).forEach(function(e){var t=e.config;return m(n,t)}),n[e]},c._getAutoProbability=function(){return[].concat(this._autoProbability,this._getPropertyByConditions("autoProbability")||[])},c._getEntityCountLimitForGroupCodes=function(){return[].concat(this._entityCountLimitForGroupCodes,this._getPropertyByConditions("entityCountLimitForGroupCodes")||[],this._entityCountLimitForGroupCodesByGoals||[])},c._retrieveDefaultComponents=function(){for(var e=this,t={},n=0,a=Object.entries(this._entityCodeCounts);n<a.length;n++)for(var r,c=a[n],s=c[0],p=c[1],l=function(){var n=r.value,a=(e._componentRetrievers[s]||[]).filter(function(e){return e.codes.includes(n)});if(a.length>0){var i=a.filter(function(e){var t=e.ignoreOnStart;return!(void 0!==t&&t)}).map(function(t){return t.retriever.retrieve(e._levelData,e._forceData)}),c=new Set,p=e._bossHolderCodes.includes(n),l=s;p&&(l=o.TYPE_BOSSES,n=e._levelData.bossName);var m=e._retrieveEntity(l,n);m&&c.add(m.type);var u=e._getEntityRandomConfig(l,n);!p&&u&&Object.keys(u).forEach(function(e){return c.add(e)}),Array.from(c).forEach(function(e){var n=t[e]||{};t[e]=Object.assign.apply(Object,[n].concat(i))})}},m=i([].concat(Object.keys(p),this._getReplacedColorCodes(this._levelData.colors.split(""),o.TYPE_CELL_ATTRIBUTE)));!(r=m()).done;)l();return t},c._retrieveGoals=function(e){var t=this;this._levelData.task.forEach(function(n){var o=t._formatGoal(n,e);o&&t._goals.push(o)})},c._processGoals=function(){if("nutcracker"===this._levelData.bossName){var e=this._goals.find(function(e){var t=e.type,n=e.options;return"simple"===t&&"nut"===n.type});if(e){var t=e.options.total-this._levelData.bossLife;t<=0?this._goals.splice(this._goals.indexOf(e),1):e.options.total=t}}},c._retrieveFrozenObjects=function(){if(Array.isArray(this._levelData.objects))for(var e,t=i(this._levelData.objects.filter(function(e){return"FrozenObject"===e.code}));!(e=t()).done;){var n=e.value,a=this._retrieveEntity(o.TYPE_MAP,n.name);a?this._cells.push({col:n.x,row:n.y,entity:a}):console.error("Not found entity: "+n.name)}},c._retrieveLimits=function(){var e=this,t=[];this._getEntityCountLimitForGroupCodes().forEach(function(n){var o=n.layer,a=n.codes,r=[];a.forEach(function(t){r.push.apply(r,e._retrievePossibleEntityTypes(o,t))}),t.push({entities:Array.from(new Set(r)),amount:a.reduce(function(t,n){return t+(e._entityCodeCounts[o][n]||0)},0),limitByGoals:!!e._entityCountLimitForGroupCodesByGoals.find(function(e){var t=e.codes;return t.every(function(e){return t.includes(e)})})})}),this._limits=this._limits.concat(t.filter(function(e){return e.amount>0}))},c._calculateCodesCount=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++)for(var o=n[t],a=o[0],r=o[1],i=0;i<this._rows;i++)for(var c=0;c<this._cols;c++){var s=r[i]&&r[i][c];if(void 0!==s){var p=this._entityCodeCounts[a][s]||0;this._entityCodeCounts[a][s]=p+1}}},c._getFormatGoalEntityRetrieverType=function(e){var t=this;return function(e){for(var n,o=i(t._goalEntityRetrievers);!(n=o()).done;){var a=(0,n.value)(e);if(a)return a}}(e)||o.TYPE_MAP},c._formatGoal=function(e,t){var n,a=e.cell||e.name;e.type===o.TASK_TYPE_PACMAN&&(a=o.CODE_PACMAN),e.type===o.TASK_TYPE_SNAIL&&(a=this._snailGoalCode);var r=this._bossHolderCodes.includes(a),c=r?o.TYPE_BOSSES:this._getFormatGoalEntityRetrieverType(e),s=this._getEntityRetriever(c),p=Number.isInteger(parseInt(e.amount))&&!o.TASK_TYPES_TO_PROCESS.includes(e.type)?"CollectColor":e.type;r&&(a=this._levelData.bossName),e.decorator&&(a=this._decoratorNameToCodeMap[e.decorator]),"FillCarpet"===p&&(a=this._gumGoalCode);var l,m,u=s.getByCode(a);switch(p){case"CollectColor":if(u){var d,y,f=null==u?void 0:null==(d=u.components)?void 0:null==(y=d.group)?void 0:y.id,h=[u.type];if(f){for(var g,v=i(this._sameGoalByGroupCodes);!(g=v()).done;){var _,b,C=g.value,w=s.getByCode(C);(null==w?void 0:null==(_=w.components)?void 0:null==(b=_.group)?void 0:b.id)==f&&h.push(w.type)}this._candyBombByColor[f]&&h.push(this._candyBombByColor[f])}n={type:"simple",options:{type:u.type,entityTypes:h,total:parseInt(e.amount)}}}else console.error("Cannot create goal for code: "+a);break;case"CollectMorphColor":u?n={type:"simple",options:{type:u.type,entityTypes:[u.type],total:parseInt(e.amount)}}:console.error("Cannot create goal for code: "+a);break;case"CollectType":case"CollectObject":case"CollectSnail":u?n={type:"auto",options:{entityType:s.getByCode(a).type}}:console.error("Cannot create goal for code: "+a);break;case"CollectPearl":var S=this._getEntityAsPearl(t);S&&(n={type:"auto",options:{entityType:S.type}});break;case"FillCarpet":if(u){var E=this._getCountCellsForCollectGum();n={type:"cover",options:{entityType:u.type,total:E}}}break;case"ClearCellAttributes":var x=this._getEntityRetriever(o.TYPE_CELL_ATTRIBUTE),A=this._entityRandom[o.TYPE_CELL_ATTRIBUTE],O=e.cell||this._defaultTaskCellAttribute,R=[];if(null!=A&&A[O])for(var P=Object.values(this._entityColorMap),k=0,T=Object.keys(A[O]);k<T.length;k++)for(var I,M=T[k],j=i(P.flat());!(I=j()).done;){var L=I.value;M===L&&R.push(L)}var F=[];A&&A[O]&&Object.keys(A[O]).length>0&&(F=Object.keys(A[O])),F.length>0&&(n=e.amount?{type:"simple",options:{type:x.getByCode(O).type,entityTypes:R,total:parseInt(e.amount)}}:{type:"overall",options:{goals:function(e){return e.map(function(e){return{type:"auto",options:{entityType:e}}})}(F),type:x.getByCode(O).type}});break;case"CollectComplexTask":var D=0;n={type:"composite",options:{goals:(l=e.parts,m=new Map,l.split("").forEach(function(e){var t=s.getByCode(e);t||(console.error("Cannot create simpe task in complex task, code: "+e+". fallback to Y"),t={type:"Y"}),m.has(t.type)?m.get(t.type).options.total+=1:m.set(t.type,{type:"simple",options:{type:t.type,entityTypes:[t.type],total:1}}),D+=1}),Array.from(m.values())),type:this._complexTaskMap[e.taskName],total:D}};break;case"ClearFloorAttributes":var B=this._getEntityRetriever(o.TYPE_FLOOR_ATTRIBUTE).getByCode(this._defaultFloorAttributeCode);B?n=e.amount&&{type:"simple",options:{type:B.type,entityTypes:[B.type],total:Number(e.amount)}}||{type:"auto",options:{entityType:B.type}}:console.error("Cannot create ClearFloorAttributes goal for code: "+this._defaultFloorAttributeCode);break;default:console.error("Not exist case for type: "+e.type)}return n},c._createBossGoals=function(){var e=[],t=this._getBossEntityNameList();if(t){var n={type:"simple",options:{entityTypes:t,total:this._levelData.bossLife,type:t.length>1?this._bossComplexTargetIcons[this._levelData.bossName]:null}};e.push(n)}return e},c._getEntityAsPearl=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(this._pearls.includes(e[t][n]))return this._retrieveEntity(o.TYPE_MAP,e[t][n])},c._getCountCellsForCollectGum=function(){var e=this,t=this._rows*this._cols;return this._cells.forEach(function(n){var o,r;if(n.state===a.Cell.STATE_DISABLED&&(t-=1),null!=n&&null!=(o=n.entity)&&o.type){var i,c=e._match3GameConfig.entities[n.entity.type];if(null!=c&&null!=(i=c.components)&&i.static){var s,p,l,m=1;null!=c&&null!=(s=c.components)&&s.size&&(m=(null==c?void 0:null==(p=c.components)?void 0:p.size.rows)*(null==c?void 0:null==(l=c.components)?void 0:l.size.cols)),t-=m}}"gum"===(null==n?void 0:null==(r=n.entity)?void 0:r.type)&&(t-=1)}),t},c._retrieveTutorial=function(){var e=function(e,t){return{input:!!t,row:e.y,col:e.x}};if(this._forceData)for(var t,n=i(this._forceData);!(t=n()).done;){var o=t.value,a=o.cells,r=o.lightCells,c=o.powerUpForce,s=o.cssClass,p=o.pointer,l=[],m=[];a&&l.push.apply(l,a.map(function(t){return e(t,!0)})),r&&l.push.apply(l,r.map(function(t){return e(t,!1)})),p&&m.push({offset:p.offset,cells:p.cells.map(function(e){return{row:e.y,col:e.x}})});var u=c?"booster":0===l.length&&0===m.length?"speech":"raw",d={key:s,type:u,completeImmediately:"speech"===u,data:{waitInputOnCells:a&&a.length>0,targets:[{grid:"tiles",pointers:m,cells:l}]}};this._tutorialEmitStrategies[s]&&this._emitStrategies.push(this._tutorialEmitStrategies[s]),c?d.data.booster=this._boosterMap[c]:d.data.input=a&&a.length>0?"swap":"input",this._tutorial.push(d)}},c._resetData=function(){var e=this;this._bossSet=!1,this._rows=0,this._cols=0,this._probabilities={},this._cells=[],this._goals=[],this._tutorial=[],this._levelData={},this._forceData=[],this._limits=[],this._defaultComponents={},this._stack=[],this._emitStrategies=[],this._ignoredProbabilitiesOnInitialRandom=[],Object.keys(this._entityCodeCounts).forEach(function(t){return e._entityCodeCounts[t]={}})},c._getReplacedColorCodes=function(e,t){for(var n=[],o=0;o<e.length;o++){var a=e[o],r=this._colorCodesReplacementMap[a];r&&t===r.layer&&n.push(r.code)}return n},c.convert=function(e){this._resetData(),e.levels&&(this._levelData=e.levels[e.levelNumber]),e.about.force&&(this._forceData=e.about.force[e.levelNumber]),this._retrieveGridSize();var t={};if(this._levelData.map){var n=t[o.TYPE_MAP]=this._createMatrix(this._levelData.map);this._retrieveDisabledCells(n),this._retrieveEntities(t,o.TYPE_MAP),this._calculateCodesCount(t),this._retrieveProbabilities(t,o.TYPE_MAP),this._retrieveFrozenObjects(),this._retrieveTutorial(),this._retrieveEmitStrategies()}return this._levelData.floorAttribute&&(t[o.TYPE_FLOOR_ATTRIBUTE]=this._createMatrix(this._levelData.floorAttribute),this._retrieveEntities(t,o.TYPE_FLOOR_ATTRIBUTE)),this._levelData.decorators&&(t[o.TYPE_DECORATORS]=this._createMatrix(this._levelData.decorators),this._retrieveEntities(t,o.TYPE_DECORATORS)),this._levelData.cellAttribute&&(t[o.TYPE_CELL_ATTRIBUTE]=this._createMatrix(this._levelData.cellAttribute),this._retrieveEntities(t,o.TYPE_CELL_ATTRIBUTE),this._calculateCodesCount(t),this._retrieveProbabilities(t,o.TYPE_CELL_ATTRIBUTE)),this._retrieveGoals(t[o.TYPE_MAP]),this._processGoals(),this._retrieveLimits(),this._convertProbabilitiesForGroups(),{randomSeed:this._randomSeed,tiles:{rows:this._rows,cols:this._cols,probabilities:this._probabilities,limits:this._limits,defaultComponents:this._retrieveDefaultComponents(),cells:this._cells,fill:!0,drop:{cells:[],entities:e.about&&e.about.stack&&e.about.stack[e.levelNumber]?this._retrieveLevelStack(e.about.stack[e.levelNumber]):[]},ignoredProbabilitiesOnInitialRandom:this._ignoredProbabilitiesOnInitialRandom},goals:this._goals,score:{max:1/0,targetValue:this._levelData.score},stars:{max:3,targetValue:this._levelData.score},moves:{max:1/0,value:this._levelData.moves},tutorial:{steps:this._tutorial},groups:this._retrieveGroups(),candyContent:this._levelData.candyContent,emitByStrategy:this._emitStrategies,hard:(e.about.specialLevelsNew||[]).includes(e.levelNumber)}},c._retrieveEmitStrategies=function(){for(var e=0,t=Object.entries(this._emitStrategyRetrievers);e<t.length;e++){var n=t[e],o=n[0],a=n[1];this._levelData[o]&&this._emitStrategies.push(a(this._levelData))}},c._retrieveLevelStack=function(e){var t=this;return e.split("").map(function(e){for(var n=t._entityColorMap[e],a=Object.keys(t._entityCodeCounts[o.TYPE_MAP]),r=[],i=0,c=Object.entries(t._entityRandom[o.TYPE_MAP]);i<c.length;i++){var s=c[i],p=s[0],l=s[1],m=Object.keys(l);a.includes(p)&&r.push(m.find(function(e){return n.includes(e)}))}var u=r.shift();if(u)return[u];var d=t._retrieveEntity(o.TYPE_MAP,e);return d?[d.type]:[]}).filter(function(e){return e.length>0})},c._retrieveEntity=function(e,t){var n=this._getEntityRetriever(e);if(!n)throw new Error("Entity retriever for "+e+" not defined");return n.getByCode(t)},c._retrievePossibleEntityTypes=function(e,t){var n=new Set,o=this._retrieveEntity(e,t);o&&n.add(o.type);var a=this._getEntityRandomConfig(e,t);return a&&Object.keys(a).forEach(function(e){return n.add(e)}),Array.from(n)},c._getEntityRetriever=function(e){return this._entityRetrievers[e]},c._getEntityRandomConfig=function(e,t){var n=this;if(this._entityRandom[e]&&this._entityRandom[e][t]){var o=Object.entries(this._entityRandom[e][t]).map(function(e){var t=e[0],o=e[1];return[t,"function"==typeof o?o(n._levelData):o]});return Object.fromEntries(o)}},o}(o.LegacyLevelConverter);n.CandyvalleyLegacyLevelConverter=l;var m=function e(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];for(var r=0,i=o;r<i.length;r++)for(var c=i[r],s=0,p=Object.entries(c);s<p.length;s++){var l=p[s],m=l[0],u=l[1],d=t[m];Array.isArray(d)&&Array.isArray(u)?t[m]=[].concat(d,u):t[m]=d&&u&&"object"==typeof d&&"object"==typeof u?e(d,u):u}return t};l.TYPE_MAP="map",l.TYPE_DECORATORS="decorators",l.TYPE_FLOOR_ATTRIBUTE="floorAttribute",l.TYPE_CELL_ATTRIBUTE="cellAttribute",l.TYPE_BOSSES="bosses",l.TASK_TYPES_TO_PROCESS=["CollectMorphColor","ClearFloorAttributes","ClearCellAttributes"],l.TASK_TYPE_PACMAN="CollectPackman",l.CODE_PACMAN="/",l.TASK_TYPE_SNAIL="CollectSnail",cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./LegacyLevelConverter (@tapclap.match-x.engine.level-converter)":"LegacyLevelConverter (@tapclap.match-x.engine.level-converter)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"CandyvalleyMessageHandler (scripts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"07c4eoGP6VQGZvPPoJu+mJG","CandyvalleyMessageHandler (scripts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyMessageHandler=void 0;var i=function(e){function t(t){var n=t.userManager,o=e.call(this)||this;return o._items=n.getCurrentUser().items,o}return a(t,e),t.prototype.handle=function(e){if(r(e,1)[0].type===t.MESSAGE_RESPONSE){var n=this._items.create({spec:"attempts",name:"lives",amount:e.length});this._items.charge([n],{source:"message-center"})}return Promise.resolve()},t.MESSAGE_RESPONSE="attempts:response",t.MESSAGE_REQUEST="attempts:request",t}(e("./MessageHandler (@tapclap.game-kit.message-center)").MessageHandler);n.CandyvalleyMessageHandler=i,cc._RF.pop()},{"./MessageHandler (@tapclap.game-kit.message-center)":"MessageHandler (@tapclap.game-kit.message-center)"}],"CandyvalleyMessageService (scripts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"1dc3eVAw6VRcLG0xVxT4BW2","CandyvalleyMessageService (scripts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyMessageService=void 0;var r=e("./MessageLimits (@tapclap.game-kit.message-center)"),i=function(e){function t(t){var n=t.gateway,o=e.call(this)||this;return o._gateway=n,o}return a(t,e),t.prototype.getLimits=function(e,t){var n=this;return Promise.resolve().then(function(){return n._gateway.post("/messages/limits",{types:e,users:t})}).then(function(e){return new r.MessageLimits(e)}).catch(function(){return new r.MessageLimits({})})},t.prototype.getMessages=function(){return this._gateway.get("/messages")},t.prototype.send=function(e){return this._gateway.post("/messages",e)},t.prototype.read=function(e){return this._gateway.delete("/messages",e)},t}(e("./MessageService (@tapclap.game-kit.message-center)").MessageService);n.CandyvalleyMessageService=i,cc._RF.pop()},{"./MessageLimits (@tapclap.game-kit.message-center)":"MessageLimits (@tapclap.game-kit.message-center)","./MessageService (@tapclap.game-kit.message-center)":"MessageService (@tapclap.game-kit.message-center)"}],"CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"64632AYWchWnZMm2nngexgb","CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.CandyvalleyMoveAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./MoveAnimation (@tapclap.match-x.cocos.animations)"),i=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),l=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./Entity (@tapclap.match-x.engine.entities)");function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t.world,n._audioEffectsPlayer=t.audioEffectsPlayer,n._bounceScale=void 0===t.bounceScale?.85:t.bounceScale,n._bounceDuration=void 0===t.bounceScale?.1:t.bounceDuration,n._resolveImmediate=void 0===t.resolveImmediate||t.resolveImmediate,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),o.prototype.build=function(e){for(var t,n=this,o=[],y=this._world.getEnabledComponent("animation").promise,f=function(){var e=t.value,d=new p.AnimationFactory(e.entity),f=e.entity.getComponent("render").node,h=e.entity.getComponent("render").node.getChildByName("body")||e.entity.getComponent("render").node,g=e.path.map(function(e){return e&&e.getComponent("render").node}),v=[new c.WaitPromiseAnimation(y),n._audioEffectsPlayer.create("move"),new m.FunctionAnimation(function(){return f.zIndex=u.Entity.LAYER_UPPER+10}),new r.MoveAnimation(f,g,e.direction,e.dropped),new m.FunctionAnimation(function(){return f.zIndex=e.entity.layer})],_=new s.GroupAnimation([new i.DummyAnimation],n._resolveImmediate);_.add(new l.ActionAnimation(cc.sequence([cc.spawn([cc.scaleTo(n._bounceDuration,1,n._bounceScale),cc.moveBy(n._bounceDuration,0,h.height*(1-n._bounceScale)/-2)]),cc.spawn([cc.scaleTo(n._bounceDuration,1,1),cc.moveBy(n._bounceDuration,0,h.height*(1-n._bounceScale)/2)])]),h)),d.hasAnimation("bounce")&&_.add(d.createAnimation("bounce",{timeScale:2})),v.push(_);var b=[{target:e.entity,animation:new a.ChainAnimation(v)}];e.start&&e.start.getEnabledComponent("drop")&&b.push({target:e.start,animation:new i.DummyAnimation}),o.push(b)},h=d(e.data);!(t=h()).done;)f();return o},o}(o.GameActionBuilder);n.CandyvalleyMoveAnimationBuilder=g,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MoveAnimation (@tapclap.match-x.cocos.animations)":"MoveAnimation (@tapclap.match-x.cocos.animations)","./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"CandyvalleyOfferOldAmountComponent (scripts.views.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"fdf87rLjkpQCKWB7W9GOLwA","CandyvalleyOfferOldAmountComponent (scripts.views.shop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyOfferOldAmountComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t._area=null,t}return a(t,e),t.prototype.setValue=function(e){this._label.string=e},t.prototype.update=function(){this._area.active=""!==this._label.string},r([s({type:cc.Label,visible:!0})],t.prototype,"_label",void 0),r([s({type:cc.Node,visible:!0})],t.prototype,"_area",void 0),r([c,p("Candyvalley/widgets/CandyvalleyOfferOldPriceComponent")],t)}(cc.Component);n.CandyvalleyOfferOldAmountComponent=l,cc._RF.pop()},{}],"CandyvalleyRunMetaGameAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"41367VVdc1U3Lg6BGxF4G7i","CandyvalleyRunMetaGameAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyRunMetaGameAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._sceneResourcesManager=t.sceneResourcesManager,n}return a(t,e),t.prototype.run=function(){var e=this;return this._metaGame&&this._metaGameManager.setCurrentMetaGame(this._metaGame),Promise.resolve().then(function(){return Promise.all([e._metaGameManager.getCurrentMetaGame().getDataToLoad(),e._sceneResourcesManager.getDataToLoad()])}).then(function(t){return e._sceneManager.loadScene(e._metaGameManager.getCurrentMetaGame().scene,{},t.flat())})},t}(e("./RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)").RunMetaGameAction);n.CandyvalleyRunMetaGameAction=r,cc._RF.pop()},{"./RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)":"RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)"}],"CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b5946Dp5iFayYI0dqo0M5Ks","CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.CandyvalleySelectionAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),c=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./EntityShakeAnimation (@tapclap.match-x.cocos.animations)");function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._selectionView=t.selectionView,n._audioEffectsPlayer=t.audioEffectsPlayer,n._shakableSizes=t.shakableSizes||[[1,1]],n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){var t=this,n=e.data.input,o=[];if(n)if(n.isHandled)this._selectionView.hide();else{var p=n.currentInput;if(p&&"raw"===p.type){var l=p.data.cell;if(l&&l.isFill){var m=l.getEnabledComponent("render").node;if(m){var u=l.getEntity(),d=new i.AnimationFactory(u),y=u.getEnabledComponent("swap"),f=u.getEnabledComponent("tap"),h=u.getEnabledComponent("render").node;h&&(y||f)?o.push({target:u,animation:new a.GroupAnimation([new c.DummyAnimation,new r.FunctionAnimation(function(){t._selectionView.show(m.parent.convertToWorldSpaceAR(m.position))}),this._audioEffectsPlayer.create("selectTile"),new r.FunctionAnimation(function(){d.hasAnimation("select")&&d.createAnimation("select").run()})],!0)}):function(e){var n=e.getEnabledComponent("size")||{},o=n.rows,a=void 0===o?1:o,r=n.cols,i=void 0===r?1:r;return!!t._shakableSizes.find(function(e){var t=e[0],n=e[1];return t===a&&n===i})}(u)&&o.push({target:u,animation:new a.GroupAnimation([new c.DummyAnimation,new r.FunctionAnimation(function(){return new s.EntityShakeAnimation(h).run()})],!0)})}}}}return[o]},o}(o.GameActionBuilder);n.CandyvalleySelectionAnimationBuilder=l,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EntityShakeAnimation (@tapclap.match-x.cocos.animations)":"EntityShakeAnimation (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"CandyvalleyShopWindowLayoutComponent (scripts.views.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"c7a77kOtIJR9q0aFCGXBpIj","CandyvalleyShopWindowLayoutComponent (scripts.views.shop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyShopWindowLayoutComponent=void 0;var p=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),l=e("./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),m=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),u=e("./Offer (@tapclap.game-kit.offer-manager)"),d=e("./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)"),y=e("./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),f=e("./StickerListComponent (@tapclap.game-kit.ui.sticker)"),h=e("./CandyvalleyOfferOldAmountComponent (scripts.views.shop)"),g=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),v=e("./CandyvalleyBarSceneComponent (scripts.scenes)"),_=e("./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),b=cc._decorator,C=b.ccclass,w=b.property,S=b.menu,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._container=null,t._content=null,t._scrollView=null,t._items=[],t._boughtAnimationSpeed=3,t._delayBetweenBoughtItems=.5,t._saleMoreOffers=null,t._timerCallback=null,t._scrollViewNeedsUpdate=!1,t}var n;return a(t,e),n=t,t.prototype.onTapMoreOffer=function(){this._window.events.emit(n.MORE_OFFERS_CLICK)},t.prototype._getItemPrefab=function(e){return this._options.items[e].prefab},t.prototype._createPurchaseOffer=function(e,t){var n=t.payload,o=n.product,a=n.timer,r=n.stickers;if(o&&o.isAvailable){var i=cc.instantiateFrom(this._getItemPrefab(o.type)),c=i.getComponent(p.ProductItemComponent);if(c){if(c.setWindowLayout(this),c.setProduct(o),a){var s=c.getComponent(d.ProductItemTimeWidgetComponent);s&&s.setTimer(a)}if(r){var l=c.getComponent(f.StickerListComponent);l&&(l.hideStickers(),r.forEach(function(e){var t=e.key,n=e.label,o=e.style;n&&l.setStickerLabel(t,n),o&&l.setStickerStyle(t,o),l.showSticker(t)}))}var m=c.getComponent(h.CandyvalleyOfferOldAmountComponent);m&&void 0!==t.payload.oldAmount&&m.setValue(t.payload.oldAmount)}return i}return null},t.prototype._createAdOffer=function(e,t){var o=t.payload.items;if(Array.isArray(o)&&o.length>0){var a="attempts"===(null==o?void 0:o[0].spec)?"ad-lives":"ad-coins",r=cc.instantiateFrom(this._getItemPrefab(a)),i=r.getComponent(l.AdShopItemComponent);return i&&(i.setWindowLayout(this),i.setReward(o[0])),i.schedule(function(){i.updateState()},n.STATE_UPDATE_INTERVAL,cc.macro.REPEAT_FOREVER),r}return null},t.prototype._createExpandItem=function(){var e=cc.instantiateFrom(this._getItemPrefab("expand")),t=e.getComponent(y.ExpandShopItemComponent);return t&&t.setWindowLayout(this),e},t.prototype._createActionItem=function(e,t){var n=cc.instantiateFrom(this._getItemPrefab(t.payload.prefabKey)),o=n.getComponent(_.ActionShopItemComponent);return o&&(o.setWindowLayout(this),o.setLabel(t.payload.label),o.setButtonLabel(t.payload.buttonLabel),o.setAction(t.payload.action)),n},t.prototype._createOffer=function(e,t){switch(t.type){case u.Offer.TYPE_ACTION:return this._createActionItem(e,t);case u.Offer.TYPE_PURCHASE:return this._createPurchaseOffer(e,t);case u.Offer.TYPE_AD:return this._createAdOffer(e,t);case u.Offer.TYPE_EXPAND:return this._createExpandItem(e,t)}return null},t.prototype.setOffers=function(e,t){var n=this;this._items=[];var o=0;t.flat().forEach(function(t){var a=n._createOffer(e,t);if(a){var r=a.getComponent(m.ShopItemComponent);r&&(r.setOffer(t),r.updateState(),r.node.active&&r.setAnimationIndex(o++),n._items.push(r),n._content.addChild(a))}})},t.prototype.start=function(){var e=this;this._scrollView&&(this._scrollView.scrollToTopLeft(),this.scheduleOnce(function(){var t=e._scrollView.horizontal?"width":"height";e._container[t]>e._scrollView.node[t]&&e._scrollView.scrollToTopLeft()},0))},t.prototype.updateState=function(){var e,t;try{for(var n=i(this._items),o=n.next();!o.done;o=n.next())o.value.updateState()}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._scrollViewNeedsUpdate=!0},t.prototype.removeOffers=function(){var e=this,t=s(this._items).reverse().filter(function(e){return e.node.active}).map(function(e,t){return e.setAnimationIndex(t),e.hide()});return Promise.all(t).then(function(){e._items=[]})},t.prototype.setBarMode=function(e){var t=this.getBar();t&&t.setActiveOnly(e)},t.prototype.initBar=function(){var e;return null===(e=this.getBar())||void 0===e?void 0:e.init()},t.prototype.getBar=function(){return this.getComponentInChildren(v.CandyvalleyBarSceneComponent)},t.prototype.update=function(){var e=this._scrollView.horizontal?"width":"height";if(this._content&&this._scrollView){var t=this._scrollView.enabled||this._scrollViewNeedsUpdate;if(this._scrollViewNeedsUpdate=!1,t&&this._container[e]<this._scrollView.node[e]&&(this._scrollView.node[e]=this._container[e],this._scrollView.scrollToPercentHorizontal(.5),this._scrollView.enabled=!1),!t&&this._container[e]>this._scrollView.node[e]){this._scrollView.enabled=!0,this._scrollView.scrollToTopLeft();var n=this._scrollView.getComponent(cc.Widget);n&&n.updateAlignment()}}},t.prototype.setMoreOffersButtonActive=function(e){this._saleMoreOffers&&(this._saleMoreOffers.active=e)},t.MORE_OFFERS_CLICK="more_offers_click",t.STATE_UPDATE_INTERVAL=5,r([w({type:cc.Node,visible:!0})],t.prototype,"_container",void 0),r([w({type:cc.Node,visible:!0})],t.prototype,"_content",void 0),r([w({type:cc.ScrollView,visible:!0})],t.prototype,"_scrollView",void 0),r([w({visible:!0})],t.prototype,"_boughtAnimationSpeed",void 0),r([w({visible:!0})],t.prototype,"_delayBetweenBoughtItems",void 0),r([w({type:cc.Node,visible:!0})],t.prototype,"_saleMoreOffers",void 0),n=r([C,S("Candyvalley/window-layouts/CandyvalleyShopWindowLayoutComponent")],t)}(g.WindowLayoutComponent);n.CandyvalleyShopWindowLayoutComponent=E,cc._RF.pop()},{"./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./CandyvalleyBarSceneComponent (scripts.scenes)":"CandyvalleyBarSceneComponent (scripts.scenes)","./CandyvalleyOfferOldAmountComponent (scripts.views.shop)":"CandyvalleyOfferOldAmountComponent (scripts.views.shop)","./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)":"ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./StickerListComponent (@tapclap.game-kit.ui.sticker)":"StickerListComponent (@tapclap.game-kit.ui.sticker)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"CandyvalleyUserAuthHandler (scripts.auth-service)":[function(e,t,n){"use strict";cc._RF.push(t,"b5976KRmClRf7qt33ThVOgR","CandyvalleyUserAuthHandler (scripts.auth-service)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.CandyvalleyUserAuthHandler=void 0;var i=e("./User (@tapclap.game-kit.user-manager)"),c=function(){function e(e){this._userManager=e.userManager,this._userService=e.userService,this._userFactory=e.userFactory,this._ignoredPayloadTypes=e.ignoredPayloadTypes||[]}return e.prototype.onSignIn=function(e){return o(this,void 0,Promise,function(){var t,n,o,i=this;return a(this,function(a){switch(a.label){case 0:t=e.filter(function(e){var t=e.type;return!i._ignoredPayloadTypes.includes(t)}),n=r(t,1),o=n[0],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._createSession(o)];case 2:return a.sent(),[3,4];case 3:return a.sent(),console.error("Cannot create session",{authPayload:o}),[3,4];case 4:return[4,this._initUser(o)];case 5:return a.sent(),[2]}})})},e.prototype.onSignOut=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.onSignUpFail=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype._createSession=function(e){return this._userService.auth(e)},e.prototype._initUser=function(e){return o(this,void 0,Promise,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._userService.getUser()];case 1:return t=o.sent(),[3,3];case 2:return o.sent(),(t=new i.User).id=e.userId,[3,3];case 3:return n=this._userFactory.create(t),this._userManager.setCurrentUser(n),[2]}})})},e}();n.CandyvalleyUserAuthHandler=c,cc._RF.pop()},{"./User (@tapclap.game-kit.user-manager)":"User (@tapclap.game-kit.user-manager)"}],"CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"79b72ECh8JMIIRgbGiD0zJY","CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)"),n.__esModule=!0,n.CanvasDesignResolutionGuard=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("UI-Kit/Canvas/CanvasDesignResolutionGuard")(o=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._fitWidth=!1,t._fitHeight=!1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r._getScreenAspectRation=function(){var e=cc.view.getFrameSize();return e.width/e.height},r._getDesignResolutionAspectRation=function(e){return e.designResolution.width/e.designResolution.height},r._saveCanvasFit=function(e){this._fitWidth=e.fitWidth,this._fitHeight=e.fitHeight},r._updateCanvasFit=function(e){this._getScreenAspectRation()>this._getDesignResolutionAspectRation(e)?(e.fitHeight=!this._fitHeight,e.fitWidth=!this._fitWidth):(e.fitHeight=this._fitHeight,e.fitWidth=this._fitWidth)},r.onLoad=function(){var e=this,t=this.getComponent(cc.Canvas);t&&(this._saveCanvasFit(t),this._updateCanvasFit(t),this.node.on(cc.Node.EventType.SIZE_CHANGED,function(){e._updateCanvasFit(t)}))},o}(cc.Component))||o)||o;n.CanvasDesignResolutionGuard=i,cc._RF.pop()},{}],"Cell (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"d45a1je6m5b1Jq1w2af1F7N","Cell (@tapclap.match-x.engine.entities)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Cell=void 0;var r=e("./Entity (@tapclap.match-x.engine.entities)"),i=function(e){function t(n,o){var a=o.row,r=o.col,i=o.state,c=e.call(this,n)||this;return c._state=t.STATE_ENABLED,c._row=a,c._col=r,c._state=null!=i?i:c._state,c._entities=[],c}return a(t,e),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities.filter(function(e){return!!e})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invertedEntities",{get:function(){return this.entities.reverse()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._state===t.STATE_ENABLED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFill",{get:function(){return!!this.getEntity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.getEntity()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailableForSetEntity",{get:function(){return this.isEnabled&&this.isEmpty},enumerable:!1,configurable:!0}),t.prototype.clean=function(){var e=this._entities.filter(function(e){return!!e});return this._entities=[],e},t.prototype.getEntity=function(e){return void 0===e&&(e=r.Entity.LAYER_DEFAULT),this._entities[e]},t.prototype.setEntity=function(e,t){void 0===t&&(t=r.Entity.LAYER_DEFAULT),t=e?e.layer:t,this._entities[t]=e},t.prototype.getEntitiesByComponentName=function(e){return this._entities.filter(function(t){return t&&t.getEnabledComponent(e)})},t.STATE_DISABLED=0,t.STATE_ENABLED=1,t}(r.Entity);n.Cell=i,cc._RF.pop()},{"./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)"}],"CellBorderBuilderComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"bec2dmdp0ZPfombpgrzLJI1","CellBorderBuilderComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.CellBorderBuilderComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P=e("./ViewComponent (@tapclap.match-x.cocos.components)");function k(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var L=cc._decorator,F=L.ccclass,D=L.property,B=(o=D(cc.Node),a=D(cc.Node),r=D(cc.Node),i=D(cc.Node),c=D(cc.Node),s=D(cc.Node),p=D(cc.Node),l=D(cc.Node),m=D(cc.Node),u=D(cc.Node),d=D(cc.Node),y=D(cc.Node),F((h=function(e){var t,n;function o(){var t;return k(t=e.call(this)||this,"cornerOuterTopRight",g,I(t)),k(t,"cornerOuterBottomRight",v,I(t)),k(t,"cornerOuterBottomLeft",_,I(t)),k(t,"cornerOuterTopLeft",b,I(t)),k(t,"cornerInnerTopRight",C,I(t)),k(t,"cornerInnerBottomRight",w,I(t)),k(t,"cornerInnerBottomLeft",S,I(t)),k(t,"cornerInnerTopLeft",E,I(t)),k(t,"borderTop",x,I(t)),k(t,"borderRight",A,I(t)),k(t,"borderBottom",O,I(t)),k(t,"borderLeft",R,I(t)),t._places={},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,M(t,n);var a,r,i=o.prototype;return i.onLoad=function(){var e;for(var t in this._places=((e={})[o.CORNER_OUTER_TOP_RIGHT]=this.cornerOuterTopRight,e[o.CORNER_OUTER_BOTTOM_RIGHT]=this.cornerOuterBottomRight,e[o.CORNER_OUTER_BOTTOM_LEFT]=this.cornerOuterBottomLeft,e[o.CORNER_OUTER_TOP_LEFT]=this.cornerOuterTopLeft,e[o.CORNER_INNER_TOP_RIGHT]=this.cornerInnerTopRight,e[o.CORNER_INNER_BOTTOM_RIGHT]=this.cornerInnerBottomRight,e[o.CORNER_INNER_BOTTOM_LEFT]=this.cornerInnerBottomLeft,e[o.CORNER_INNER_TOP_LEFT]=this.cornerInnerTopLeft,e[o.BORDER_TOP]=this.borderTop,e[o.BORDER_RIGHT]=this.borderRight,e[o.BORDER_BOTTOM]=this.borderBottom,e[o.BORDER_LEFT]=this.borderLeft,e),this._places)this._places[t]&&(this._places[t].active=!1)},i.addBorder=function(e){this._places[e]&&(this._places[e].active=!0)},a=o,(r=[{key:"places",get:function(){return this._places}}])&&T(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(P.ViewComponent),g=j(h.prototype,"cornerOuterTopRight",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=j(h.prototype,"cornerOuterBottomRight",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=j(h.prototype,"cornerOuterBottomLeft",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=j(h.prototype,"cornerOuterTopLeft",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=j(h.prototype,"cornerInnerTopRight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=j(h.prototype,"cornerInnerBottomRight",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=j(h.prototype,"cornerInnerBottomLeft",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=j(h.prototype,"cornerInnerTopLeft",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=j(h.prototype,"borderTop",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=j(h.prototype,"borderRight",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=j(h.prototype,"borderBottom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=j(h.prototype,"borderLeft",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f);n.CellBorderBuilderComponent=B,B.CORNER_OUTER_TOP_RIGHT=1,B.CORNER_OUTER_BOTTOM_RIGHT=2,B.CORNER_OUTER_BOTTOM_LEFT=3,B.CORNER_OUTER_TOP_LEFT=4,B.CORNER_INNER_TOP_RIGHT=5,B.CORNER_INNER_BOTTOM_RIGHT=6,B.CORNER_INNER_BOTTOM_LEFT=7,B.CORNER_INNER_TOP_LEFT=8,B.BORDER_TOP=9,B.BORDER_RIGHT=10,B.BORDER_BOTTOM=11,B.BORDER_LEFT=12,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"CellComparer (@tapclap.match-x.engine.cell-comparer)":[function(e,t,n){"use strict";cc._RF.push(t,"d889dXPkC9MDLz96C4rsDVj","CellComparer (@tapclap.match-x.engine.cell-comparer)"),n.__esModule=!0,n.CellComparer=void 0;var o=function(){function e(){}return e.isTrue=function(){return!0},e.byType=function(e,t){var n=e.getEntity(),o=t.getEntity();return e.isFill&&t.isFill&&n!==o&&n.type===o.type},e.byGroup=function(e,t){if(e.isFill&&t.isFill){var n=e.getEntity().getComponent("group"),o=t.getEntity().getComponent("group");if(n&&o)return n.id&&o.id&&n.id===o.id}return!1},e.compare=function(t,n,o){return e[t](n,o)},e}();n.CellComparer=o,cc._RF.pop()},{}],"CellHealthComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ebe6bnmbKxYeJ/cCF2C1+c5","CellHealthComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.CellHealthComponent=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._values=[].concat(t.values)||[],n._maxValues=[].concat(t.values)||[],n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getValues=function(){return[].concat(this._values)},r.setValues=function(e){this._values=[].concat(e)},r.getMaxValues=function(){return this._maxValues},a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CellHealthComponent=a,a.KEY="cellHealth",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"ff1a5FiBahd/LiupDCT28f+","CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),n.__esModule=!0,n.CellRenderDecorator=void 0;var o=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),a=e("./Cell (@tapclap.match-x.engine.entities)"),r=e("./CellViewComponent (@tapclap.match-x.cocos.components)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.decorate=function(e,t,n){if(t.state===a.Cell.STATE_ENABLED){var o=n.getComponent(r.CellViewComponent);o&&o.setSpriteFrame((t.row+t.col)%2)}else n.zIndex=2},o}(o.EntityRenderDecorator);n.CellRenderDecorator=c,cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./CellViewComponent (@tapclap.match-x.cocos.components)":"CellViewComponent (@tapclap.match-x.cocos.components)","./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"}],"CellViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"3afe8svIXdCV6qIsS2+SqaM","CellViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.CellViewComponent=void 0;var o,a,r,i,c,s,p=e("./ViewComponent (@tapclap.match-x.cocos.components)");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=cc._decorator,v=g.ccclass,_=g.property,b=(o=_({type:cc.Sprite,visible:!0}),a=_({type:[cc.SpriteFrame]}),v((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_spriteComponent",c,y(t)),d(t,"spriteFrames",s,y(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=o.prototype;return a.getEntityPosition=function(e){if(e&&e.getEnabledComponent("render")){var t=e.getEnabledComponent("size");if(t){for(var n,o=cc.v2(),a=l(t.area);!(n=a()).done;){var r=n.value.getEnabledComponent("render");r&&r.node&&o.addSelf(r.node.position)}return t.area.length&&o.mulSelf(1/t.area.length),o}}return this.node.position},a.setEntityPosition=function(e){var t=e.getEnabledComponent("render");t&&t.node.setPosition(this.getEntityPosition(e))},a.setSpriteFrame=function(e){this._spriteComponent&&this.spriteFrames.length>0&&this.spriteFrames[e]&&(this._spriteComponent.spriteFrame=this.spriteFrames[e])},o}(p.ViewComponent),c=h(i.prototype,"_spriteComponent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=h(i.prototype,"spriteFrames",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=i))||r);n.CellViewComponent=b,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6745834WO1a34wpl+f444FJ","ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.ChainAnimation=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.run=function(){for(var t,n=Promise.resolve(),a=function(){var e=t.value;n=n.then(function(){return e.run()})},r=o(this._animations);!(t=r()).done;)a();return n.then(this._resolve),e.prototype.run.call(this)},a}(e("./CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)").CompositeAnimation);n.ChainAnimation=c,cc._RF.pop()},{"./CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)":"CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)":[function(e,t,n){"use strict";cc._RF.push(t,"2f4b0VTsB1ZloCIg27INUXY","ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChainIdleAnimationGameActionBuilder=void 0;var r=function(e){function t(t){var n=t.stage,o=t.handlers,a=e.call(this)||this;return a._stage=null,a._handlers=[],a._stage=n,a._handlers=o,a}return a(t,e),t.prototype.build=function(e){var t=this;return this._stage&&e&&e.data?[e.data.map(function(e){for(var n,o=0;o<t._handlers.length&&!(n=t._handlers[o][t._stage](e));o++);return n})]:[]},t.STAGE_SCHEDULE="schedule",t.STAGE_RESET="reset",t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.ChainIdleAnimationGameActionBuilder=r,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"3589b6Zu39UarlNMQ7Oiemp","ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ChameleonAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),l=e("./ChameleonViewComponent (scripts.entity-view-components)"),m=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),u=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var t,n,o=[],a=(null==e?void 0:e.data)||[],i=function(e,t,n){var a=n.entityTypes[0],r=t.entityTypes[0],i=e.getEnabledComponentByClass(m.RenderComponent).node,f=i.getComponent(l.ChameleonViewComponent),h=i.getComponent(p.GoalCollectionViewComponent);f&&o.push({target:e,animation:new u.GroupAnimation([new c.ChainAnimation([new s.FunctionAnimation(function(){h.replaceGoal(t,n)}),new y.EventListenAnimation(e,"collect"),new s.FunctionAnimation(function(){f.switchColors(r,a)})]),new d.DummyAnimation],!0)})};try{for(var f=r(a),h=f.next();!h.done;h=f.next()){var g=h.value;i(g.entity,g.prevGoal,g.nextGoal)}}catch(v){t={error:v}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}return[o]},t}(i.GameActionBuilder);n.ChameleonAnimationBuilder=f,cc._RF.pop()},{"./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ChameleonViewComponent (scripts.entity-view-components)":"ChameleonViewComponent (scripts.entity-view-components)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"0da9cL4Gp9WZbRReisewJdn","ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChameleonEntityRenderDecorator=void 0;var r=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),i=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),c=e("./ChameleonViewComponent (scripts.entity-view-components)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.decorate=function(e,t,n){var o=n.getComponent(c.ChameleonViewComponent),a=t.getEnabledComponentByClass(i.GoalCollectorComponent);if((null==a?void 0:a.goals.length)>0){var r=null==a?void 0:a.goals[0];o.setAnimation(r.entityTypes[0])}},t.KEY="chameleon",t}(r.EntityRenderDecorator);n.ChameleonEntityRenderDecorator=s,cc._RF.pop()},{"./ChameleonViewComponent (scripts.entity-view-components)":"ChameleonViewComponent (scripts.entity-view-components)","./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)"}],"ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"6e9eeXumjtXlLL/XSZxkFqV","ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChameleonLegacyLevelComponentRetriever=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._entitiesMap=t.entitiesMap,n._symbolToColorMap=t.symbolToColorMap,n}return a(t,e),t.prototype.retrieve=function(e){var t,n=this;if("chameleon"===e.bossName){var o=e.colors.split(""),a=e.task.map(function(e){return e.cell}),r=Object.keys(this._symbolToColorMap).filter(function(e){return o.includes(e)&&!a.includes(e)}).map(function(e){return n._entitiesMap[e].type});return{changeGoal:{entityTypes:r},goalCollector:{goals:[{type:"simple",options:{entityTypes:[e.bossColor.length>0&&(null===(t=this._entitiesMap[e.bossColor])||void 0===t?void 0:t.type)?this._entitiesMap[e.bossColor].type:r[0]],total:e.bossLife}}]}}}},t}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.ChameleonLegacyLevelComponentRetriever=r,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"ChameleonSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"71dbfqz2PpUXpKE7mrvKtCe","ChameleonSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ChameleonSpineViewComponent=void 0;var c=e("./ChameleonViewComponent (scripts.entity-view-components)"),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._trackIndex=0,t._duration=0,t._keyToSkinMap=[],t._keyToAnimationMap=[],t}return a(t,e),t.prototype.switchColors=function(e,t){var n,o,a=null!==(n=this._getAnimationByKey(e))&&void 0!==n?n:e,r=null!==(o=this._getAnimationByKey(t))&&void 0!==o?o:t;return this._spine.setMix(a,r,this._duration),this._spine.setAnimation(this._trackIndex,r,!1),this._setSkinByType(t),Promise.resolve()},t.prototype.setAnimation=function(e){var t,n=null!==(t=this._getAnimationByKey(e))&&void 0!==t?t:e;return this._spine.defaultAnimation=n,this._spine.setAnimation(this._trackIndex,n,!1),this._setSkinByType(e),Promise.resolve()},t.prototype._setSkinByType=function(e){var t=this._getSkinByKey(e)||e;this._spine.defaultSkin=t,this._spine.setSkin(t)},t.prototype._getSkinByKey=function(e){return this._keyToSkinMap.map(function(e){return e.split(":")}).find(function(t){return i(t,1)[0]===e})[1]},t.prototype._getAnimationByKey=function(e){return this._keyToAnimationMap.map(function(e){return e.split(":")}).find(function(t){return i(t,1)[0]===e})[1]},r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),r([l({visible:!0})],t.prototype,"_trackIndex",void 0),r([l({visible:!0})],t.prototype,"_duration",void 0),r([l({type:[cc.String],visible:!0,tooltip:"\u041c\u0430\u043f\u043f\u0438\u043d\u0433 (\u0442\u0438\u043f:\u0441\u043a\u0438\u043d)"})],t.prototype,"_keyToSkinMap",void 0),r([l({type:[cc.String],visible:!0,tooltip:"\u041c\u0430\u043f\u043f\u0438\u043d\u0433 (\u0442\u0438\u043f:\u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f)"})],t.prototype,"_keyToAnimationMap",void 0),r([p,m("EntityViews/Chameleon/SpineView")],t)}(c.ChameleonViewComponent);n.ChameleonSpineViewComponent=u,cc._RF.pop()},{"./ChameleonViewComponent (scripts.entity-view-components)":"ChameleonViewComponent (scripts.entity-view-components)"}],"ChameleonViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"73dc2RpJtJcy6MikNDjrQNN","ChameleonViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ChameleonViewComponent=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),r([i],t)}(cc.Component);n.ChameleonViewComponent=c,cc._RF.pop()},{}],"ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b9b27nV+lhZg6rXPXEtd4w1","ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeEntityGroupAnimationBuilder=void 0;var c=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),s=e("./GroupEntityViewComponent (@tapclap.match-x.cocos.components)"),p=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),m=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),u=e("./GroupComponent (@tapclap.match-x.engine.components)"),d=e("./AudioComponent (@tapclap.match-x.engine.components)"),y=e("./ColorFlowerSpineViewComponent (scripts.entity-view-components)"),f=e("./HealthComponent (@tapclap.match-x.engine.components)"),h=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),v=e("./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),_=e("./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),b=function(e){function t(t){var n=t.audioEffectsPlayer,o=t.soundKeys,a=t.triggers,r=t.groupMap,i=e.call(this)||this;return i._audioEffectsPlayer=n,i._soundKeys=o,i._triggers=a,i._groupMap=r,i}return a(t,e),t.prototype.build=function(e,n,o){var a,c,b=this,C=[],w=((null==o?void 0:o.data)||[]).flat();if(e&&e.data){var S=function(e,o,a){if(E._triggers.includes(a)){var i=new g.ChainAnimation,c=e.getEnabledComponentByClass(m.RenderComponent).node,S=e.getEnabledComponentByClass(u.GroupComponent),x=e.getEnabledComponentByClass(d.AudioComponent);if(c&&S){var A=new l.AnimationFactory(e),O=w.find(function(t){return t.entity===e});if(O){var R=O.blastedBy||O.affectedBy;R&&i.add(new h.EventListenAnimation(R,"explode"))}if(A&&A.hasAnimation("change-group")){var P=A.createAnimation("change-group");i.add(P)}i.add(new p.FunctionAnimation(function(){var i;switch(x&&b._audioEffectsPlayer.play(x.getSound(b._soundKeys[t.CHANGE_SOUND_KEY])),a){default:case v.ChangeEntityGroupOnCounterValueChangeSystem.KEY:return c.getComponent(s.GroupEntityViewComponent).setGroup(o);case _.ChangeEntityGroupOnHealthReduceSystem.KEY:var p=c.getComponent(y.ColorFlowerSpineViewComponent),l=r(Object.entries(b._groupMap).find(function(e){var t=r(e,2);return t[0],t[1]===o}),1)[0],m=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.find(function(t){return t.entity===e}),u=e.getComponentByClass(f.HealthComponent).getMaxValue()-m.value,d=0===m.value,h=p.setGroup(l,u-1,d);if(d)return h}})),C.push({target:e,animation:i})}}},E=this;try{for(var x=i(e.data),A=x.next();!A.done;A=x.next()){var O=A.value;S(O.entity,O.group,O.trigger)}}catch(R){a={error:R}}finally{try{A&&!A.done&&(c=x.return)&&c.call(x)}finally{if(a)throw a.error}}}return[C]},t.CHANGE_SOUND_KEY="CHANGE_SOUND_KEY",t}(c.GameActionBuilder);n.ChangeEntityGroupAnimationBuilder=b,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ColorFlowerSpineViewComponent (scripts.entity-view-components)":"ColorFlowerSpineViewComponent (scripts.entity-view-components)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupEntityViewComponent (@tapclap.match-x.cocos.components)":"GroupEntityViewComponent (@tapclap.match-x.cocos.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":[function(e,t,n){"use strict";cc._RF.push(t,"af6da2bpydYc50xkYtOea4I","ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeEntityGroupOnCombinationNeighborSystem=void 0;var i=e("./GroupComponent (@tapclap.match-x.engine.components)"),c=e("./OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),p=function(e){function t(t){var n=t.retrieverFactory,o=r(t,["retrieverFactory"]),a=e.call(this,o)||this;return a._retrieverFactory=n,a}return a(t,e),t.prototype._processEntity=function(e,n,o){var a,r,p=o.getEnabledComponentByClass(c.OnExplodeCombinationNeighborChangeGroupComponent),l=o.getEnabledComponentByClass(i.GroupComponent),m=((null===(a=this._world.getState(s.ExplodeSystem.STATE))||void 0===a?void 0:a.data)||[]).flat();if((null==p?void 0:p.canChange)&&l){var u=m.filter(function(e){var t;return(null===(t=e.combinationNeighbors)||void 0===t?void 0:t.length)>0&&e.combinationNeighbors.find(function(e){return e.cell===n})});if(u.length>0){var d=null===(r=this._random.sample(u).entity.getEnabledComponentByClass(i.GroupComponent))||void 0===r?void 0:r.id;if(d>0)return p.reduce(),l.id=d,{entity:o,group:d,trigger:t.KEY}}}return null},t.KEY="ChangeEntityGroupOnCombinationNeighborSystem",t}(e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)").ChangeEntityGroupSystem);n.ChangeEntityGroupOnCombinationNeighborSystem=p,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)":"OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)"}],"ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":[function(e,t,n){"use strict";cc._RF.push(t,"a5d36S6I1lVWbME2Uomc5bI","ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeEntityGroupOnCounterValueChangeSystem=void 0;var i=e("./CounterComponent (@tapclap.match-x.engine.components)"),c=e("./GroupComponent (@tapclap.match-x.engine.components)"),s=e("./OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)"),p=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=t.value,o=void 0===n?0:n,a=t.resetCounter,i=void 0===a||a,c=t.turnStates,s=void 0===c?[]:c,p=t.skipOnStates,l=r(t,["value","resetCounter","turnStates","skipOnStates"]),m=e.call(this,l)||this;return m._value=o,m._resetCounter=i,m._turnStates=s,m._skipOnStates=p,m}return a(t,e),t.prototype._processEntity=function(e,n,o){var a=this,r=this._world.getEnabledComponentByClass(p.TurnStateComponent);if(!this._skipOnStates.some(function(e){return a._world.getState(e)})&&r&&this._turnStates.includes(r.state)){var l=o.getEnabledComponentByClass(s.OnCounterValueChangeGroupComponent),m=o.getEnabledComponentByClass(c.GroupComponent);if(m&&l){var u=o.getEnabledComponentByClass(i.CounterComponent);if(u&&u.getValue()===this._value){var d=l.groups,y=l.type,f=d.filter(function(e){return e!==m.id}),h=this._retrieveGroup(o,f,y);if(this._resetCounter&&u.setValue(u.getMaxValue()),h)return m.id=h,{entity:o,group:h,trigger:t.KEY}}}}return null},t.KEY="ChangeEntityGroupOnCounterValueSystem",t}(e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)").ChangeEntityGroupSystem);n.ChangeEntityGroupOnCounterValueChangeSystem=l,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)":"OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f4226Qa5MJch4PYuPQCRMLA","ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeEntityGroupOnHealthReduceSystem=void 0;var r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)"),c=e("./HealthSystem (@tapclap.match-x.engine.systems.health-system)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._processEntity=function(e,n,o){var a,s=o.getEnabledComponentByClass(i.OnHealthReduceChangeGroupComponent),p=o.getEnabledComponentByClass(r.GroupComponent),l=new Set(((null===(a=this._world.getState(c.HealthSystem.STATE))||void 0===a?void 0:a.data)||[]).filter(function(e){return e.isExploded}).map(function(e){return e.entity}));if(p&&s&&l.has(o)){var m=s.groups,u=s.type,d=m.filter(function(e){return e!==p.id}),y=this._retrieveGroup(o,d,u);if(y)return p.id=y,{entity:o,group:y,trigger:t.KEY}}return null},t.KEY="ChangeEntityGroupOnHealthReduceSystem",t}(e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)").ChangeEntityGroupSystem);n.ChangeEntityGroupOnHealthReduceSystem=s,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./HealthSystem (@tapclap.match-x.engine.systems.health-system)":"HealthSystem (@tapclap.match-x.engine.systems.health-system)","./OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)":"OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)"}],"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d06eftBOD9TKatAJiI0e2l5","ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeEntityGroupSystem=void 0;var s=e("./ChangeGroupComponent (@tapclap.match-x.engine.components)"),p=e("./WorldGroupsComponent (@tapclap.match-x.engine.components)"),l=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),m=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),u=e("./GridComponent (@tapclap.match-x.engine.components)"),d=function(e){function t(t){var n=t.world,o=t.random,a=e.call(this)||this;return a._world=n,a._random=o,a}return a(t,e),t.prototype.process=function(){var e,n,o,a,i,s,p,m=this,d=new Map,y=[],f=(null===(s=null===(i=this._world.getState(l.ExplodeSystem.STATE))||void 0===i?void 0:i.data)||void 0===s?void 0:s.flat())||[];try{for(var h=r(f),g=h.next();!g.done;g=h.next()){var v=g.value,_=v.entity,b=v.remove,C=v.grid,w=v.cell;b&&d.set(_,{grid:C,cell:w})}}catch(A){e={error:A}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}var S=function(e){e.forEachEntities(function(t,n){return d.set(t,{grid:e,cell:n})})};try{for(var E=r(this._world.getComponentsByClass(u.GridComponent)),x=E.next();!x.done;x=E.next())S(C=x.value.grid)}catch(O){o={error:O}}finally{try{x&&!x.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}return d.forEach(function(e,t){var n=e.cell,o=e.grid,a=m._processEntity(o,n,t);a&&y.push(a)}),y.length>0&&(this._world.setState(t.STATE,c(y,(null===(p=this._world.getState(t.STATE))||void 0===p?void 0:p.data)||[])),!0)},t.prototype._retrieveGroup=function(e,n,o){var a,r=(null===(a=this._world.getComponentByClass(p.WorldGroupsComponent))||void 0===a?void 0:a.groups)||[],i=r.length>0?n.filter(function(e){return r.includes(e)}):n;if(i.length>0)switch(o){case t.TYPE_RANDOM:return this._random.sample(i);case t.TYPE_SEQUENCE:return i[e.getEnabledComponentByClass(s.ChangeGroupComponent).increaseSequence()%i.length]}return null},t.KEY="ChangeEntityGroupSystem",t.STATE="ChangeEntityGroupSystem",t.TYPE_RANDOM="random",t.TYPE_SEQUENCE="sequence",t}(m.PipelineProcessSystem);n.ChangeEntityGroupSystem=d,cc._RF.pop()},{"./ChangeGroupComponent (@tapclap.match-x.engine.components)":"ChangeGroupComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./WorldGroupsComponent (@tapclap.match-x.engine.components)":"WorldGroupsComponent (@tapclap.match-x.engine.components)"}],"ChangeGoalComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"54c74f/CLVXUr8NOV7alTz5","ChangeGoalComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeGoalComponent=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._nextGoal=null,n._prevGoal=null,n._entityTypes=t.entityTypes,n}return a(t,e),Object.defineProperty(t.prototype,"entityTypes",{get:function(){return this._entityTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextGoal",{get:function(){return this._nextGoal},set:function(e){this._nextGoal=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevGoal",{get:function(){return this._prevGoal},set:function(e){this._prevGoal=e},enumerable:!1,configurable:!0}),t.KEY="changeGoal",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ChangeGoalComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)":[function(e,t,n){"use strict";cc._RF.push(t,"62f03SdcCBV5ZVoNblvz9BV","ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeGoalSystem=void 0;var s=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),p=e("./ChangeGoalComponent (@tapclap.match-x.engine.components)"),l=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),m=e("./GoalCollectionComponent (@tapclap.match-x.engine.components)"),u=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),d=e("./GridComponent (@tapclap.match-x.engine.components)"),y=e("./SimpleGoal (@tapclap.match-x.engine.goals)"),f=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._random=t.random,n}return a(t,e),t.prototype.process=function(){var e,t,n,o,a,i,s,f=new Set(((null===(s=this._world.getState(u.ExplodeSystem.STATE))||void 0===s?void 0:s.data)||[]).flat().map(function(e){return e.entity.type}));try{for(var h=r(this._world.getEnabledComponentsByClass(d.GridComponent)),g=h.next();!g.done;g=h.next()){var v=g.value.grid,_=Array.from(new Set(v.filterEntities(function(e){return e.getEnabledComponentByClass(p.ChangeGoalComponent)})));try{for(var b=(n=void 0,r(_)),C=b.next();!C.done;C=b.next()){var w=C.value,S=w.getEnabledComponentByClass(p.ChangeGoalComponent),E=w.getEnabledComponentByClass(l.GoalCollectorComponent),x=v.getEnabledComponentByClass(m.GoalCollectionComponent);if(S&&!S.nextGoal&&!S.prevGoal&&E&&x){var A=E.goals.filter(function(e){return!e.isCompleted}),O=this._random.shuffle(c(S.entityTypes)),R=function(e){if(e.entityTypes.some(function(e){return f.has(e)})){var t=O.filter(function(t){return e.entityTypes[0]!==t}).pop(),n=new y.SimpleGoal([t],e.total,e.count,t);n.collector=e.collector,S.nextGoal=n,S.prevGoal=e}};try{for(var P=(a=void 0,r(A)),k=P.next();!k.done;k=P.next())R(k.value)}catch(T){a={error:T}}finally{try{k&&!k.done&&(i=P.return)&&i.call(P)}finally{if(a)throw a.error}}}}}catch(I){n={error:I}}finally{try{C&&!C.done&&(o=b.return)&&o.call(b)}finally{if(n)throw n.error}}}}catch(M){e={error:M}}finally{try{g&&!g.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}return!1},t.prototype.postProcess=function(){var e,n,o,a,i=[];try{for(var c=r(this._world.getEnabledComponentsByClass(d.GridComponent)),s=c.next();!s.done;s=c.next()){var u=s.value.grid,f=Array.from(new Set(u.filterEntities(function(e){return e.getEnabledComponentByClass(p.ChangeGoalComponent)})));try{for(var h=(o=void 0,r(f)),g=h.next();!g.done;g=h.next()){var v=g.value,_=v.getEnabledComponentByClass(p.ChangeGoalComponent),b=v.getEnabledComponentByClass(l.GoalCollectorComponent),C=u.getEnabledComponentByClass(m.GoalCollectionComponent);if(_&&b&&C){var w=_.prevGoal,S=_.nextGoal;if(S&&w){var E=new y.SimpleGoal(S.entityTypes,w.total,w.count,S.entityTypes[0]);E.collector=S.collector,C.replaceGoal(w,E),b.replaceGoal(w,E),i.push({entity:v,prevGoal:w,nextGoal:E}),_.prevGoal=null,_.nextGoal=null}}}}catch(x){o={error:x}}finally{try{g&&!g.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}}catch(A){e={error:A}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}this._world.setState(t.STATE,i)},t.KEY="changeGoal",t.STATE="changeGoal",t}(s.PipelineProcessSystem);n.ChangeGoalSystem=f,cc._RF.pop()},{"./ChangeGoalComponent (@tapclap.match-x.engine.components)":"ChangeGoalComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalCollectionComponent (@tapclap.match-x.engine.components)":"GoalCollectionComponent (@tapclap.match-x.engine.components)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./SimpleGoal (@tapclap.match-x.engine.goals)":"SimpleGoal (@tapclap.match-x.engine.goals)"}],"ChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c64124rre5c1ZpeMylsd9O8","ChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeGroupComponent=void 0;var r=e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),i=function(e){function t(t){var n=t.groups,o=void 0===n?[]:n,a=t.type,i=void 0===a?r.ChangeEntityGroupSystem.TYPE_RANDOM:a,c=t.sequence,s=void 0===c?0:c,p=e.call(this)||this;return p._groups=[],p._sequence=0,p._groups=o,p._type=i,p._sequence=s,p}return a(t,e),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sequence",{get:function(){return this._sequence},enumerable:!1,configurable:!0}),t.prototype.increaseSequence=function(){return this._sequence++},t.KEY="ChangeGroup",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ChangeGroupComponent=i,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"23c8aiHhPNWH5CrkVaCxT0x","ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ChangeRetrieverOnSwapWithComponent=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._typeRetrieverMap=t,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getRetrieverByType=function(e){return this._typeRetrieverMap[e]},r.initialize=function(t){var n=this;e.prototype.initialize.call(this,t),t.events.on("swap",function(e,o){var a=t.getEnabledComponent("explode"),r=[e,o].find(function(e){return e.getEntity()!==t});if(a&&r&&r.isFill){var i=n._getRetrieverByType(t.type);i&&(a.retriever=i)}})},a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ChangeRetrieverOnSwapWithComponent=a,a.KEY="changeRetrieverOnSwapWith",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"5155cQN0lRXnLYLWuLF97cX","ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.ChangeRetrieverOnSwapWithSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),r=e("./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._sets=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.process=function(){var e=this._world.getState(a.SwapSystem.STATE_SWAP);if(null!=e&&e.data)for(var t,n=i(this._sets);!(t=n()).done;){for(var o,c=t.value,s=[].concat(c.types),p=i(e.data);!(o=p()).done;){var l=o.value.entity,m=s.indexOf(l.type);m>-1&&s.splice(m,1)}if(!s.length){for(var u,d=0,y=i(e.data);!(u=y()).done;){var f=u.value.entity;f.getEnabledComponentByClass(r.ExplodeRetrieverComponent)&&f.addComponent(r.ExplodeRetrieverComponent.KEY,new r.ExplodeRetrieverComponent({type:c.retriever[d],options:{}})),d++}break}}},o}(o.PipelineProcessSystem);n.ChangeRetrieverOnSwapWithSystem=l,l.KEY="changeRetrieverOnSwapWith",cc._RF.pop()},{"./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"e9258iVZsdQz4hZJkdjlF/o","ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeSkinBeforeCollectEntityAnimationBuilder=void 0;var r=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=e("./GoalComponent (@tapclap.match-x.engine.components)"),s=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),p=e("./GroupComponent (@tapclap.match-x.engine.components)"),l=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),m=e("./ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)"),u=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=function(e){function t(t){var n,o=e.call(this)||this;return o._world=t.world,o._groupMap=t.groupMap,o._wait=null!==(n=t.wait)&&void 0!==n&&n,o}return a(t,e),t.prototype.build=function(e){var t=this,n=[],o=(null==e?void 0:e.data.flat().map(function(e){return null==e?void 0:e.entity}))||[],a=new Set;return o.length&&o.forEach(function(e){var t,n,o=null===(n=null===(t=e.getComponentByClass(c.GoalComponent))||void 0===t?void 0:t.goal)||void 0===n?void 0:n.collector;o&&a.add(o)}),Array.from(a).forEach(function(e){if(e.getComponentByClass(m.ChangeSkinBeforeCollectEntityComponent)){var a=e.getComponentByClass(s.GoalCollectorComponent).goals,r=o.find(function(e){return a.find(function(t){return t.isGoal(e)})});if(r){var c=t._groupMap[r.getComponentByClass(p.GroupComponent).id],y=new l.AnimationFactory(e).createAnimation(c);if(y){var f=t._wait?y:new d.GroupAnimation([y,new u.DummyAnimation],!0);n.push(new i.AnimationData(e,f))}}}}),[n]},t}(r.GameActionBuilder);n.ChangeSkinBeforeCollectEntityAnimationBuilder=y,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)":"ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c70ebsZuVpWqLNqxMGdegsb","ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ChangeSkinBeforeCollectEntityComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="changeSkinBeforeCollectEntity",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ChangeSkinBeforeCollectEntityComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)":[function(e,t,n){"use strict";cc._RF.push(t,"c9a80Q9E8JNbaqirR77JvvT","ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)"),n.__esModule=!0,n.ChartBuilder=void 0;var o=function(){function e(t,n){this._user=t,this._users=n,this._availableCurrentUser=!0,this._sort=e.SORT_BY_PROGRESS,this._limit=0}var t=e.prototype;return t.setLimit=function(e){return this._limit=e,this},t.setAvailableCurrentUser=function(e){return this._availableCurrentUser=e,this},t.build=function(){var e=[].concat(this._users);return this._sort&&(e=e.sort(this._sort)),this._limit>0&&(e=e.slice(0,this._availableCurrentUser?this._limit-1:this._limit)),this._availableCurrentUser&&(e=e.concat(this._user)),this._sort&&(e=e.sort(this._sort)),e},e}();n.ChartBuilder=o,o.SORT_BY_PROGRESS=function(e,t){return e.meta.progress&&t.meta.progress?t.meta.progress.value-e.meta.progress.value:0},cc._RF.pop()},{}],"ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)":[function(e,t,n){"use strict";cc._RF.push(t,"782f6izzCdNirRzfl0AguAC","ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)"),n.__esModule=!0,n.ChartItem=void 0;var o=function(){function e(e,t){this.userInfo=e,this.meta=t}return e.prototype.hasData=function(){return!!this.userInfo&&!!this.meta},e}();n.ChartItem=o,cc._RF.pop()},{}],"ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)":[function(e,t,n){"use strict";cc._RF.push(t,"5f76d1/XYNJoZ9NiNdYzkSu","ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)"),n.__esModule=!0,n.ChartMetaModule=void 0;var o=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)"),a=e("./ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)"),r=e("./ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,o=t.socialService,r=t.service,i=t.friendsListType,c=void 0===i?"inapp":i,s=t.scope,p=void 0===s?[]:s;return(n=e.call(this)||this)._socialService=o,n._service=r,n._scope=p,n._friends=[],n._user=new a.ChartItem,n._synchronized=!1,n._friendsListType=c,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var c=o.prototype;return c._getAppFriends=function(){if(this._socialService){var e=this._socialService.getCurrentAdapter();if(e)switch(this._friendsListType){case"inapp":return e.getAppFriends();case"invitable":return e.getInvitableFriends();case"requestable":return e.getRequestableFriends()}}return Promise.resolve([])},c._getFriendsData=function(e,t){return this._service?this._service.getData(e,t):Promise.resolve([])},c._combineData=function(e,t){if(t){this._friends=[];for(var n,o=new Map(e.map(function(e){return[e.id,e]})),r=i(t);!(n=r()).done;){var c=n.value,s=o.get(c.userId);s&&this._friends.push(new a.ChartItem(s,c.meta))}}},c._syncFriends=function(e){var t=this;if(void 0===e&&(e=!1),!this._synchronized||e){this._synchronized=!1;var n=[];return Promise.resolve().then(function(){return t._getAppFriends().then(function(e){return n=e})}).then(function(){return t._getFriendsData(n.map(function(e){return e.id}),t._scope)}).then(function(e){t._synchronized=!0,t._combineData(n,e)})}return Promise.resolve()},c._syncUser=function(e){var t=this;void 0===e&&(e=!1);var n=function(){t._user.meta=t.getMetaGame().serialize(t._scope)};if((!this._user.userInfo||e)&&this._socialService){var o=this._socialService.getCurrentAdapter();if(o)return Promise.resolve().then(function(){return o.getUserInfo()}).then(function(e){return t._user.userInfo=e}).then(function(){return n()})}return n(),Promise.resolve()},c.sync=function(e){var t=this;return void 0===e&&(e=!1),Promise.resolve().then(function(){return t._syncFriends(e).catch(function(e){return console.error("[chartMetaModule] syncFriends",e)})}).then(function(){return t._syncUser(e).catch(function(e){return console.error("[chartMetaModule] syncUser",e)})})},c.getChartBuilder=function(){return new r.ChartBuilder(this._user,this._friends)},c.isAvailable=function(){return!!this._socialService.getCurrentAdapter()},o}(o.MetaModule);n.ChartMetaModule=l,cc._RF.pop()},{"./ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)":"ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)","./ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)":"ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a9ebcMb/xhPdaeHYHTDxQOJ","ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)"),n.__esModule=!0,n.ChartMetaModuleService=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getData=function(e,t){return this.get({ids:e},{query:{scope:t}})},r.get=function(e,t){return this._gateway.post(this._createPath(t),e)},a}(e("./Service (@tapclap.utils-js.service)").Service);n.ChartMetaModuleService=a,cc._RF.pop()},{"./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)"}],"CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6cba9ACx7pcjo+kx8zjzdh5","CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)"),n.__esModule=!0,n.CheckApplicationPurchaseAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._userManager=t.userManager,n._product=t.product,n._closeAfter=t.closeAfter,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){if(this._product){var e=this._userManager.getCurrentUser();if(e){var t=e.items.get("currency",this._product.currency),n={product:this._product,closeAfter:this._closeAfter};if(!t)return this._caller.run(a.CALLER_PURCHASE,n);if(t.amount>=this._product.price){if(this._caller.has(a.CALLER_PURCHASE))return this._caller.run(a.CALLER_PURCHASE,n)}else this._caller.has(a.CALLER_NO_FUNDS)&&this._caller.run(a.CALLER_NO_FUNDS,n)}}return Promise.reject()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CheckApplicationPurchaseAction=a,a.CALLER_PURCHASE="purchase",a.CALLER_NO_FUNDS="noFunds",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"206af9GiLpRmKBoiHUU1Aw9","CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.CheckAttemptsAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._level=t.level,n._attempts=t.attemptsModuleResolver.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._attempts&&!this._attempts.hasAttempt()||!this._caller.has(a.CALLER_SUCCESS)?this._caller.has(a.CALLER_FAIL)?this._caller.run(a.CALLER_FAIL,{level:this._level}):Promise.resolve():this._caller.run(a.CALLER_SUCCESS,{level:this._level})},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CheckAttemptsAction=a,a.CALLER_SUCCESS="success",a.CALLER_FAIL="fail",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CheckAttemptsForLevelWithBoostersAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"95689LwqHVSz4BRXbRiU0oF","CheckAttemptsForLevelWithBoostersAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CheckAttemptsForLevelWithBoostersAction=void 0;var r=e("./CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),i=function(e){function t(t){var n=e.call(this,t)||this;return n._spendStartBoosters=t.spendStartBoosters,n}return a(t,e),t.prototype.run=function(){return this._attempts&&!this._attempts.hasAttempt()||!this._caller.has(r.CheckAttemptsAction.CALLER_SUCCESS)?this._caller.has(r.CheckAttemptsAction.CALLER_FAIL)?this._caller.run(r.CheckAttemptsAction.CALLER_FAIL,{level:this._level,spendStartBoosters:this._spendStartBoosters}):Promise.resolve():this._caller.run(r.CheckAttemptsAction.CALLER_SUCCESS,{level:this._level,spendStartBoosters:this._spendStartBoosters})},t}(r.CheckAttemptsAction);n.CheckAttemptsForLevelWithBoostersAction=i,cc._RF.pop()},{"./CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":"CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"}],"CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6b89aI7aa9d65QgownHbSL6","CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),n.__esModule=!0,n.CheckNewEpisodeAction=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._episodes=t.moduleResolvers.episodes.get(),n._progress=t.moduleResolvers.progress.get(),n._caller=t.caller,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){if(this._episodes&&this._episodes.hasNewEpisode(!0))return this._progress&&this._progress.isBegin()?this._caller.run(a.CALLER_BEGIN_GAME):this._caller.run(a.CALLER_NEW_EPISODE);if(this._progress&&this._episodes){var e=this._episodes.getLevelCountPerEpisode()*this._episodes.getAvailableEpisodeCount();if(this._progress.hasChange&&this._progress.value>e)return this._caller.run(a.CALLER_NO_EPISODE)}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CheckNewEpisodeAction=a,a.CALLER_BEGIN_GAME="beginGame",a.CALLER_NEW_EPISODE="newEpisode",a.CALLER_NO_EPISODE="noEpisode",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CheckStartBoostersAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"ad66cbLkctTgpW8QlEyf3Nr","CheckStartBoostersAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CheckStartBoostersAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._userManager=null,n._progress=null,n._userManager=t.userManager,n._progress=t.moduleResolvers.progress.get(),n._storage=t.storage,n._level=t.level,n}return a(t,e),t.prototype.run=function(){var e=this,n=this._userManager.getCurrentUser().items,o=n.defaultItems;return Promise.resolve().then(function(){for(var a=[],r=[],i=function(t){var i=o[t];if("startbooster"===i.spec){var c=n.get("startbooster",i.name),s=n.get("timebooster",i.name),p=c.availability.value;c&&r.push(e._storage.getItem("startBoostersTutorial:"+i.name+":passed").then(function(t){a.push({type:i.name,countable:c,timed:s,isAvailability:p<=e._level.number||t,availabilityValue:p,showTutorial:p===e._progress.value&&!t&&e._progress.value===e._level.number,passedTutorial:t})}))}},c=0;c<o.length;c++)i(c);return Promise.all(r).then(function(){if(e._caller.has(t.CALLER_START))return e._caller.run(t.CALLER_START,{level:e._level,startBoostersData:a})})})},t.CALLER_START="start",t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CheckStartBoostersAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CheckStartBoostersTutorialAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"8ad1fCZykddWIyQO2P6u6dF","CheckStartBoostersTutorialAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CheckStartBoostersTutorialAction=void 0;var r=e("./Action (@tapclap.game-kit.action-manager)"),i=e("./ActionConstants (scripts.config)"),c=function(e){function t(t){var n=e.call(this,t)||this;return n._startBoostersData=t.startBoostersData,n._actionManager=t.actionManager,n._level=t.level,n}return a(t,e),t.prototype.run=function(){for(var e=[],t=0;t<this._startBoostersData.length;t++){var n=this._startBoostersData[t];n&&n.showTutorial&&e.push(n.type+"StartTutorial"),n.showTutorial||!n.isAvailability||n.passedTutorial||e.push(n.type+(this._level.hard?"HardMissedTutorial":"MissedTutorial"))}return e.length>0?this._runScenarioActions(e):Promise.resolve()},t.prototype._runScenarioActions=function(e){for(var t=this,n=Promise.resolve(),o=function(o){var a=e[o];n=n.then(function(){return t._actionManager.run(i.ACTIONS.RUN_META_GAME_SCENARIO,{scenario:a})})},a=0;a<e.length;a++)o(a);return n},t}(r.Action);n.CheckStartBoostersTutorialAction=c,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./ActionConstants (scripts.config)":"ActionConstants (scripts.config)"}],"CheckboxControlComponent (@tapclap.game-kit.ui.controls)":[function(e,t,n){"use strict";cc._RF.push(t,"24f4fA0bOhGIJimPqP8xpDU","CheckboxControlComponent (@tapclap.game-kit.ui.controls)"),n.__esModule=!0,n.CheckboxControlComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./ControlComponent (@tapclap.game-kit.ui.controls)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.menu,w=_.property,S=(o=C("UI-Kit/Controls/CheckboxControlComponent"),a=w({type:cc.Toggle,visible:!0}),r=w({type:cc.Node,visible:!0}),i=w({type:cc.Label,visible:!0}),c=w({type:cc.String,displayName:"Label String",multiline:!0}),b(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_toggle",l,h(t)),y(t,"_checkbox",m,h(t)),y(t,"_label",u,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a,r,i=o.prototype;return i.onLoad=function(){var e=this;this.node.on("toggle",function(){e._emitEvent(o.EVENT_CHANGE,e.isChecked)})},i.initialize=function(t){void 0===t&&(t={}),e.prototype.initialize.call(this,t),void 0!==t.isChecked&&(this._toggle.isChecked=t.isChecked),void 0!==t.label&&(this._label.string=t.label),t.width&&(this._label.node.width=Math.max(t.width-this._checkbox.width,0))},a=o,(r=[{key:"isChecked",get:function(){return this._toggle.isChecked},set:function(e){this._toggle.isChecked=e}},{key:"label",get:function(){return this._label.string},set:function(e){this._label.string=e}}])&&f(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(d.ControlComponent),l=v(p.prototype,"_toggle",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v(p.prototype,"_checkbox",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=v(p.prototype,"_label",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v(p.prototype,"label",[c],Object.getOwnPropertyDescriptor(p.prototype,"label"),p.prototype),s=p))||s)||s);n.CheckboxControlComponent=S,S.EVENT_CHANGE="change",cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)"}],"CheckpointRewardAvailableWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"2bbc75+fTpYerccFAMexHV7","CheckpointRewardAvailableWindowAction (scripts.actions)"),n.__esModule=!0,n.CheckpointRewardAvailableWindowAction=void 0;var o=e("./CheckpointRewardUnavailableWindowAction (scripts.actions)"),a=e("./ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._module=t.module,n._rewardIndex=t.rewardIndex,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._configureWindow=function(e){var t=this,n=this._userManager.getCurrentUser(),o=this._module.getRewards(),r=void 0!==this._rewardIndex?this._rewardIndex:this._module.getRewardIndex();if(null===r)return console.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u043d\u0434\u0435\u043a\u0441 \u043f\u0440\u0438\u0437\u0430"),void this.closeWindow(e);var i=o[r],c=e.getLayout("headerContent"),s=e.getLayout("content"),p=e.getLayout("footer"),l=null;c.setText(this._text.chooseReward);var m=i.map(function(e){var t=e.find(function(e){return"booster"===e.spec});return t?t.name:"coins"});e.setButtonCloseActive(!1),s.showAvailableState(m),p.hide(),e.events.once(a.ReachGoalRewardContentWindowLayoutComponent.EVENT_SELECT_REWARD,function(n){return l=n,e.playSound("openBox"),p.toggleControl("completeButton",!1),p.toggleControl("share",!1),s.showPrize(n).then(function(){c.setText(t._text.cheersYouWon),c.setItems(t._getRewardsIconWithText(i[n])),p.show(.05),t._module.resetReward()})}),e.events.once("claim",function(){var o=i.map(function(e,t){return s.showPrize(t)});return e.playSound("openBox",{mergable:0}),Promise.all(o).then(function(){c.rewards.clearItems(),c.setText(t._text.lookAtAnotherPrizes);var e=Object.keys(o).map(function(e,n){return s.showRewards(n,t._getRewardsIconWithText(i[n]),l!==parseInt(n))});return Promise.all(e)}).then(function(){var e=s.getReward(l,i[l]);return e.length&&e.forEach(function(e,o){t._uiManager.addClaimAnimation({node:e.iconNode,target:"coins"===e.type?"coins-bar":"play",stepTime:.8*o,callback:function(){n.items.charge([i[l][o]],{checkpointIndex:r,rewardIndex:o})}})}),t._uiManager.playClaimAnimations()}).then(function(){p.toggleControl("claimButton",!1),p.toggleControl("completeButton",!0),p.toggleControl("share",!0)})}),e.events.once("complete",function(){return t.runShare().then(function(){return t.closeWindow(e)})})},i._getRewardsIconWithText=function(e){return e.map(function(e){return{icon:{key:e.name},text:e.amount}})},o}(o.CheckpointRewardUnavailableWindowAction);n.CheckpointRewardAvailableWindowAction=i,i.ITEM_COUNT=3,i.SOURCE_KEY="episodes_stars_reward",cc._RF.pop()},{"./CheckpointRewardUnavailableWindowAction (scripts.actions)":"CheckpointRewardUnavailableWindowAction (scripts.actions)","./ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)":"ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)"}],"CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6c489Im9A1EmK59CtmLqUJ6","CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)"),n.__esModule=!0,n.CheckpointRewardMetaModule=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._checkpoints=t.checkpoints||[],n._strategy=t.strategy,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getCheckpoints=function(){return this._checkpoints},r.hasReward=function(){return null!==this.getRewardIndex()},r.getRewardIndex=function(){if(this._strategy.isAvailable()){var e=this._strategy.getPrevValue(),t=this._strategy.getValue();if(e!==t){var n=this._checkpoints.findIndex(function(n){return n>e&&n<=t});if(-1!==n)return n}}return null},r.init=function(){return this._strategy.init(this.getMetaGame()),e.prototype.init.call(this)},a}(e("./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)").RewardMetaModule);n.CheckpointRewardMetaModule=a,cc._RF.pop()},{"./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"}],"CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"26ba3pgNDlGfpiAjeBw2Ivc","CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)"),n.__esModule=!0,n.CheckpointRewardStrategy=void 0;var o=function(){function e(){this._metaGame=null}var t=e.prototype;return t.init=function(e){this._metaGame=e},t.getPrevValue=function(){},t.getValue=function(){},t.isAvailable=function(){return!1},e}();n.CheckpointRewardStrategy=o,cc._RF.pop()},{}],"CheckpointRewardUnavailableWindowAction (scripts.actions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"14ec7nyC0pbsrLEtVaEAzun","CheckpointRewardUnavailableWindowAction (scripts.actions)"),n.__esModule=!0,n.CheckpointRewardUnavailableWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._text=t.text,n._count=void 0===t.count?0:t.count,n._requiredCount=void 0===t.requiredCount?20:t.requiredCount,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){var t=this,n=e.getLayout("headerContent"),o=e.getLayout("content"),a=e.getLayout("footer");a.getControl("closeButton").label="ok",n.setText(this._text.toOpenYouNeed),n.setItems([{icon:{key:"star"},text:this._requiredCount-this._count}]),o.showUnavailableState({value:this._count,maxValue:this._requiredCount}),a.toggleControl("claimButton",!1),a.toggleControl("share",!1),e.events.once("close",function(){return t.closeWindow(e)})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.CheckpointRewardUnavailableWindowAction=a,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ChefCakeView (scripts.views.cake-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"02d75BWqbNRN4rxHCI8slqr","ChefCakeView (scripts.views.cake-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ChefCakeView=void 0;var i=e("./Random (@tapclap.utils-js.random)"),c=cc._decorator,s=c.ccclass,p=c.menu,l=c.property,m=function(){function e(){this._phaseIndex=0,this._staticAnimationKey="",this._actionAnimationKey="",this._idleAnimationKey=""}return Object.defineProperty(e.prototype,"static",{get:function(){return this._staticAnimationKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"action",{get:function(){return this._actionAnimationKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idle",{get:function(){return this._idleAnimationKey},enumerable:!1,configurable:!0}),r([l({visible:!0,type:cc.Integer})],e.prototype,"_phaseIndex",void 0),r([l({visible:!0})],e.prototype,"_staticAnimationKey",void 0),r([l({visible:!0})],e.prototype,"_actionAnimationKey",void 0),r([l({visible:!0})],e.prototype,"_idleAnimationKey",void 0),r([s("ChefCakeViewPhase")],e)}(),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._animations=[],t._scheduler=null,t}return a(t,e),t.prototype.setPhase=function(e){var t,n=null===(t=this._findAnimationForPhase(e))||void 0===t?void 0:t.idle;this._spine.setAnimation(0,n,!0),this._scheduleActionInIdleAnimation(e)},t.prototype.setPhaseAction=function(e){return this._unscheduleActionInIdleAnimation(),this._runActionAnimation(e)},t.prototype._scheduleActionInIdleAnimation=function(e){var t=this,n=new i.Random;this._unscheduleActionInIdleAnimation(),this._scheduler=function(){t._runActionAnimation(e),t._scheduleActionInIdleAnimation(e)};var o=n.getInteger(5,8);this.scheduleOnce(this._scheduler,o)},t.prototype._runActionAnimation=function(e){var t,n,o,a=this,r=null===(t=this._findAnimationForPhase(e))||void 0===t?void 0:t.action,i=null===(n=this._findAnimationForPhase(e))||void 0===n?void 0:n.idle;return(null===(o=this._spine.getState().tracks[0])||void 0===o?void 0:o.animation.name)!==r?new Promise(function(e){a._spine.setMix(i,r,.25),a._spine.setMix(r,i,.25);var t=a._spine.setAnimation(0,r,!1);a._spine.addAnimation(0,i,!1),a._spine.setTrackCompleteListener(t,function(t){t.animation.name===r&&e()})}):Promise.resolve()},t.prototype._unscheduleActionInIdleAnimation=function(){this._scheduler&&this.unschedule(this._scheduler)},t.prototype._findAnimationForPhase=function(e){return this._animations[e]},r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),r([l({type:[m],visible:!0})],t.prototype,"_animations",void 0),r([s,p("UI/CakeReward/ChefCakeView")],t)}(cc.Component);n.ChefCakeView=u,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"fbbd78dNKlcwqsYzoUCfL2q","ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.ChocolatePotAnimationBuilder=void 0;var s=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),p=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./AnimationData (@tapclap.match-x.cocos.animations)"),m=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),u=e("./HealthComponent (@tapclap.match-x.engine.components)"),d=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),y=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),f=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),h=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),v=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),_=e("./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)"),b=function(e){function t(t){var n=t.entityType,o=void 0===n?"chocolatePot":n,a=t.state,r=e.call(this)||this;return r._started=!1,r._entityType=o,r._stateKey=a,r}return a(t,e),t.prototype.build=function(e){var t=[];if(!e.data)return[t];switch(this._stateKey){case d.ExplodeSystem.STATE:this._explodeState(e,t);break;case y.EmitSystem.STATE_EMIT:this._emitState(e,t);break;case _.IdleAnimationSystem.STATE_SCHEDULE:this._startState(e,t)}return[t]},t.prototype._startState=function(e,t){var n,o;if(!this._started){this._started=!0;var a={data:[]};try{for(var i=r(e.data),c=i.next();!c.done;c=i.next()){var s=c.value;(null==s?void 0:s.type)===this._entityType&&a.data.push({entity:s})}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}this._explodeState(a,t)}},t.prototype._explodeState=function(e,t){var n,o;try{for(var a=r(e.data.flat()),i=a.next();!i.done;i=a.next()){var c=i.value.entity;if(c.type===this._entityType){var s=this._selectAnimation(c);s&&t.push(new l.AnimationData(c,new p.FunctionAnimation(s)))}}}catch(m){n={error:m}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},t.prototype._emitState=function(e,t){var n,o,a=this,i=new Set,s=[],m=function(e,n){if((null==e?void 0:e.type)!==u._entityType)return"continue";var o=new f.AnimationFactory(n).createAnimation("beforeFly");if(o&&s.push(new l.AnimationData(n,o)),i.has(e))return"continue";i.add(e);var r=new f.AnimationFactory(e).createAnimation("actionBeforeAfterTurn-1"),c=u._getSpine(e);c._nextAnimation=null,t.push(new l.AnimationData(e,new h.ChainAnimation([r,new g.GroupAnimation([new p.FunctionAnimation(function(){c._splashAnimation=!0,c.setCompleteListener(function(e){e===c.getCurrent(2)&&(c.setCompleteListener(void 0),a._playEmpty(c),c._splashAnimation=!1,c._nextAnimation&&c._nextAnimation())}),a._stopAnimation(c,2),c.setAnimation(2,"final/splash",!1)}),new v.ActionAnimation(cc.delayTime(.666),c.node)],!1)])))},u=this;try{for(var d=r(e.data.flat()),y=d.next();!y.done;y=d.next()){var _=y.value;m(_.emitterEntity,_.newEntity)}}catch(b){n={error:b}}finally{try{y&&!y.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}t.push.apply(t,c(s))},t.prototype._getSpine=function(e){return e.getComponent(m.RenderComponent.KEY).node.getChildByName("spine").getComponent(sp.Skeleton)},t.prototype._getHealthAnimation=function(e){var t=e.getEnabledComponent(u.HealthComponent.KEY),n=t.getValue();if(n===t.getMinValue()+1)return["_playFull"];var o=n/t.getMaxValue();switch(!0){case o<=.75&&o>.5:return["_playState","fill_states/fill lvl 1"];case o<=.5&&o>.25:return["_playState","fill_states/fill lvl 2"];case o<=.25:return["_playFull"];default:return[]}},t.prototype._selectAnimation=function(e){var t=i(this._getHealthAnimation(e),2),n=t[0],o=t[1];if(n)return this._playOrDelay(n,e,o)},t.prototype._stopAnimation=function(e,t,n){void 0===n&&(n=0),e.getState().setEmptyAnimation(t,n)},t.prototype._playOrDelay=function(e,t){for(var n=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return function(){var a=n._getSpine(t);a._splashAnimation?a._nextAnimation=function(){n[e].apply(n,c([a,t],o))}:n[e].apply(n,c([a,t],o))}},t.prototype._playState=function(e,t,n,o,a){void 0===o&&(o=1),void 0===a&&(a=!1),n===i(this._getHealthAnimation(t),2)[1]&&(e.setAnimation(o,n,a),e.setAnimation(0,"cauldron_jump",!1),e.setAnimation(2,"idle_simple",!0))},t.prototype._playFull=function(e,t){"_playFull"===i(this._getHealthAnimation(t),1)[0]&&(e._nextAnimation=null,this._stopAnimation(e,2),e.setAnimation(1,"final/idle_prefinal",!0),e.setAnimation(0,"cauldron_jump",!1))},t.prototype._playEmpty=function(e){var t,n,o,a;"final/splash"===(null===(a=null===(o=null===(n=null===(t=e.getState())||void 0===t?void 0:t.tracks)||void 0===n?void 0:n[2])||void 0===o?void 0:o.animation)||void 0===a?void 0:a.name)&&(this._stopAnimation(e,2),e.setAnimation(1,"fill_states/empty",!1))},t}(s.GameActionBuilder);n.ChocolatePotAnimationBuilder=b,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)":"IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"17614Xnhj1eDrhsEMfTcMPc","ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.ChocolatePotLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){var t={};return e.wellMoves&&(t.health={max:e.wellMoves,value:e.wellMoves}),e.wellDropCount&&(t.emitOnTurnEndAndDeath={type:"random",target:"random",emitCount:e.wellDropCount,entities:{"entity-7":{amount:1/0}}}),t},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.ChocolatePotLegacyLevelComponentRetriever=a,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)":[function(e,t,n){"use strict";cc._RF.push(t,"8f907sVMH9M1IFEodT1NsKq","ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)"),n.__esModule=!0,n.ChunkClassifier=void 0;var o=e("./Matrix (@tapclap.match-x.engine.models)"),a=e("./Result (@tapclap.match-x.engine.chunk-classifier)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var s=function(){function e(e){this._patterns=e}var t=e.prototype;return t._normalize=function(e){for(var t,n=e[0].row,a=e[0].col,i=e[0].row,c=e[0].col,s=r(e);!(t=s()).done;){var p=t.value;n=Math.min(p.row,n),a=Math.min(p.col,a),i=Math.max(p.row,i),c=Math.max(p.col,c)}for(var l,m=i-n+1,u=c-a+1,d=new o.Matrix(m,u,0),y=new o.Matrix(m,u),f=r(e);!(l=f()).done;){var h=l.value;d[h.row-n][h.col-a]=1,y[h.row-n][h.col-a]=h}return[d,y]},t._compare=function(e,t,n,o){for(var a=0;a<e.length;a++)for(var r=0;r<e[a].length;r++){var i=n+a,c=o+r;if(i>=t.length||c>=t[n].length||e[a][r]&&e[a][r]!==t[i][c])return!1}return!0},t._recognize=function(e,t){for(var n=[],o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++)this._compare(e,t,o,a)&&n.push({row:o,col:a});return n},t.classify=function(e){var t=new a.Result;if(e.length>2){for(var n,o=this._normalize(e),i=o[0],c=o[1],s=[],p=r(this._patterns);!(n=p()).done;)for(var l,m=n.value,u=r(this._recognize(m.data,i));!(l=u()).done;){var d=l.value;s.push({cell:d,pattern:m})}for(var y=0,f=s;y<f.length;y++){for(var h=f[y],g=[],v=0;v<h.pattern.data.length;v++)for(var _=0;_<h.pattern.data[v].length;_++)if(h.pattern.data[v][_]){var b=c[h.cell.row+v][h.cell.col+_];b&&g.push(b)}t.patterns.push({type:h.pattern.type,chunk:g})}}return t},e}();n.ChunkClassifier=s,cc._RF.pop()},{"./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","./Result (@tapclap.match-x.engine.chunk-classifier)":"Result (@tapclap.match-x.engine.chunk-classifier)"}],"CleanStateSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"aae58z6IQRWZYWLMVC6/Y9i","CleanStateSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.CleanStateSystem=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.clean=function(){this._world.resetState()},r.process=function(){return this.clean(),!1},r.postProcess=function(){this.clean()},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.CleanStateSystem=a,a.KEY="cleanState",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)":[function(e,t,n){"use strict";cc._RF.push(t,"ef302fJn2lV2YIjdnMMi5kJ","ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ClickhouseAnalyticsProvider=void 0;var o=function(){function e(e){this._httpClient=e.httpClient,this._eventPrefix=e.eventPrefix,this._apiUrl=e.apiUrl}return e.prototype.init=function(){return Promise.resolve()},e.prototype.setUserId=function(e){return this._userId=e,Promise.resolve()},e.prototype.logEvent=function(e,t){var n=this,o=this._eventPrefix?""+this._eventPrefix+e:e,a="log",r={event:o,data:Object.assign({user_id:this._userId},t)};return Array.isArray(t)&&(a="bundle",r=t.map(function(e){return{service:"log",params:{event:o,data:Object.assign({user_id:n._userId},e)}}})),this._httpClient.request(this._apiUrl+"/"+a,{method:"POST",body:r})},e.prototype.setApiUrl=function(e){this._apiUrl=e},e.prototype.setEventPrefix=function(e){this._eventPrefix=e},e}();n.ClickhouseAnalyticsProvider=o,cc._RF.pop()},{}],"ClipAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"58cf0MCbKVaca7dDTuzsyXn","ClipAnimation (@tapclap.match-x.cocos.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ClipAnimation=void 0;var r=e("./Animation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)"),c=function(e){function t(t,n,o){void 0===t&&(t=null),void 0===n&&(n=null);var a=o.additive,r=void 0!==a&&a,c=o.resolveImmediate,s=void 0!==c&&c,p=o.overrideCurrent,l=void 0===p||p,m=o.overrideSame,u=void 0===m||m,d=o.waitResolve,y=void 0!==d&&d,f=e.call(this)||this;return f._isResolved=!1,f._clipName=n,f._target=t,f._animationComponent=t?t.getComponent(cc.Animation):null,f._options=Object.assign({additive:r,resolveImmediate:s,overrideCurrent:l,overrideSame:u,waitResolve:y}),f._target.getComponent(i.ClipFunctionResolverComponent)||f._target.addComponent(i.ClipFunctionResolverComponent),f._settledPromiseResolve=null,f._settledResolve=function(){f._settledPromiseResolve&&(f._settledPromiseResolve(),f._settledPromiseResolve=null)},f._settledPromise=new Promise(function(e){f._settledPromiseResolve=e}),f}return a(t,e),t.prototype.run=function(){var e=this;if(this._animationComponent){var t=this._animationComponent.getAnimationState(this._clipName);if(!this._options.overrideSame&&t&&t.isPlaying)return Promise.resolve();var n=this._options.additive?this._animationComponent.playAdditive(this._clipName):this._animationComponent.play(this._clipName);this._options.waitResolve&&(this._onClipResolve=function(t){n.clip===t&&e._resolveByEvent()},this._isResolved=!1,this._target.on(i.ClipFunctionResolverComponent.TYPE_RESOLVE,this._onClipResolve)),this._options.resolveImmediate?(this._resolve(),n.onStop=function(){e._settledResolve()}):n.onStop=function(){e._resolve(),e._settledResolve()}}else this._resolve(),this._settledResolve();return this._promise},t.prototype.stop=function(t){var n=this;if(void 0===t&&(t=!0),this._animationComponent){var o=this._animationComponent.getAnimationState(this._clipName);o&&(o.onStop=function(){t&&n._animationComponent.setCurrentTime(0,n._clipName),n._settledResolve(),o.onStop=function(){}},e.prototype.stop.call(this),o.stop())}return this._promise},Object.defineProperty(t.prototype,"settled",{get:function(){return this._settledPromise},enumerable:!1,configurable:!0}),t.prototype._resolveByEvent=function(){!this._isResolved&&this._onClipResolve&&(this._isResolved=!0,this._target.off(i.ClipFunctionResolverComponent.TYPE_RESOLVE,this._onClipResolve),this._resolve())},t}(r.Animation);n.ClipAnimation=c,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)","./ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)":"ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)"}],"ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"adac9ygb6lUZaambGFf19aE","ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ClipAnimationItem=void 0;var i=e("./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),c=e("./ClipAnimation (@tapclap.match-x.cocos.animations)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._clip=null,t._additive=!1,t._resolve=!1,t._waitResolve=!1,t}return a(t,e),Object.defineProperty(t.prototype,"additive",{set:function(e){this._additive=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolve",{set:function(e){this._resolve=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waitResolve",{set:function(e){this._waitResolve=e},enumerable:!1,configurable:!0}),t.prototype.create=function(e,t){var n=e.getComponent(cc.Animation)||e.addComponent(cc.Animation);e.getComponent(cc.Sprite)||e.addComponent(cc.Sprite),n.addClip(this._clip,this._clip.name);var o={additive:this._additive,resolveImmediate:this._resolve,waitResolve:this._waitResolve};return new c.ClipAnimation(e,this._clip.name,Object.assign(o,t))},t.prototype.apply=function(e){this.create(e).run()},r([l({tooltip:"AnimationClip",type:cc.AnimationClip,visible:!0})],t.prototype,"_clip",void 0),r([l({tooltip:"\u041f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u0430\u044f \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f",visible:!0})],t.prototype,"_additive",void 0),r([l({tooltip:"\u0421\u0440\u0430\u0437\u0443 \u0440\u0435\u0437\u043e\u043b\u0432\u0438\u0442\u044c promise",visible:!0})],t.prototype,"_resolve",void 0),r([l({tooltip:"\u0420\u0435\u0437\u043e\u043b\u0432\u0438\u0442\u044c promise \u043f\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044e \u0432 \u043a\u043b\u0438\u043f\u0435",visible:!0})],t.prototype,"_waitResolve",void 0),r([p("ClipAnimationItem")],t)}(i.SubAnimationItem);n.ClipAnimationItem=m,cc._RF.pop()},{"./ClipAnimation (@tapclap.match-x.cocos.animations)":"ClipAnimation (@tapclap.match-x.cocos.animations)","./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"}],"ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"f7801l60ypGC7XzgvjVRKGu","ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.ClipAnimationWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l=e("./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function m(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var f=cc._decorator,h=f.ccclass,g=f.property,v=(o=(0,f.menu)("UI-Kit/WindowManager/ClipAnimationWindowLayoutComponent"),a=g({type:cc.Animation,visible:!0}),r=g({type:cc.AnimationClip,visible:!0}),h(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return m(t=e.call.apply(e,[this].concat(o))||this,"_animation",s,u(t)),m(t,"_clip",p,u(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),o.prototype._doRunAnimation=function(){this._animation?(this._animation.on(cc.Animation.EventType.FINISHED,this._resolve),this._clip?(this._animation.addClip(this._clip,"animation"),this._animation.play("animation")):this._animation.play()):this._resolve()},o}(l.AnimationWindowLayoutComponent),s=y(c.prototype,"_animation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=y(c.prototype,"_clip",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i)||i);n.ClipAnimationWindowLayoutComponent=v,cc._RF.pop()},{"./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"995c1r35K1UA7JHFVPRdBAn","ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ClipFunctionResolverComponent=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,t.prototype.onClipResolve=function(){var e=this.node.getComponent(cc.Animation).currentClip;this.node.emit(n.TYPE_RESOLVE,e)},t.TYPE_RESOLVE="clip:resolve",n=r([i],t)}(cc.Component);n.ClipFunctionResolverComponent=c,cc._RF.pop()},{}],"ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"02094co+qdXlpUkRlD0ehkg","ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ClipIdleViewComponent=void 0;var i=e("./Random (@tapclap.utils-js.random)"),c=e("./IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationClip=null,t._animationComponent=null,t._scheduleCallback=null,t}return a(t,e),t.prototype.run=function(e){this.playIdleAnimation(this._animationClip,e)},t.prototype.reset=function(){return this._animationComponent&&this._animationComponent.stop(),this.resetSchedule(),Promise.resolve()},t.prototype.playIdleAnimation=function(e,t){var n=this;if(this.addClip(e),this.resetSchedule(),this._scheduleCallback=function(){n._animationComponent.play(e.name),n.run(t)},0===this._delayFrom&&0===this._delayTo)this._animationComponent.play(e.name);else{var o=(new i.Random).getFloat(this._delayFrom,this._delayTo);this.scheduleOnce(this._scheduleCallback,o)}},t.prototype.resetSchedule=function(){this._scheduleCallback&&(this.unschedule(this._scheduleCallback),this._scheduleCallback=null)},t.prototype.addClip=function(e){this._animationComponent||(this._animationComponent=this._targetNode.getComponent(cc.Animation)||this._targetNode.addComponent(cc.Animation)),this._animationComponent.getClips().includes(e)||this._animationComponent.addClip(e)},r([l({type:cc.AnimationClip,visible:!0})],t.prototype,"_animationClip",void 0),r([p],t)}(c.IdleViewComponent);n.ClipIdleViewComponent=m,cc._RF.pop()},{"./IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":"IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"24d08WmAb1HbphBNofYQtnD","CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)"),n.__esModule=!0,n.CocosAudioEngine=void 0;var a=function(e){var t,n;function a(){var t;return(t=e.call(this)||this)._sources={},t._instanceMap=[],t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getAudioClipByKey=function(e){return this._sources[e]},r.play=function(e,t){var n=this,o=void 0===t?{}:t,a=o.loop,r=void 0!==a&&a,i=o.volume,c=void 0===i?1:i,s=cc.audioEngine.play(this._getAudioClipByKey(e),r,c);return cc.audioEngine.setFinishCallback(s,function(){return n._removeInstance(s)}),this._pushInstance(e,s),s},r.stop=function(e){return cc.audioEngine.stop(e)},r.pauseAll=function(){cc.audioEngine.pauseAll()},r.resumeAll=function(){cc.audioEngine.resumeAll()},r.setFinishListener=function(e,t){cc.audioEngine.setFinishCallback(e,t)},r.load=function(e,t){var n=this;return new Promise(function(o,a){cc.warn("Method load is deprecated. Load independently source, after use registerSource method."),cc.resources.load(t,function(t,r){t||!r.loaded?a(t):(n._sources[e]=r,o())})})},r.registerSource=function(e,t){return this._sources[e]=t},r.isPlaying=function(e){var t=this._getInstance(e);return!!t&&cc.audioEngine.getState(t.id)===cc.audioEngine.AudioState.PLAYING},r.getCurrentTime=function(e){var t=this._getInstance(e);return t?cc.audioEngine.getCurrentTime(t.id):0},r.getDuration=function(e){var t=this._getInstance(e);return t?cc.audioEngine.getDuration(t.id):0},r._getInstance=function(e){var t=this._instanceMap.filter(function(t){return t.key===e});if(t.length>0)return t[t.length-1]},r.getInstanceId=function(e){var t=this._getInstance(e);if(t)return t.id},r._pushInstance=function(e,t){this._instanceMap.push({key:e,id:t})},r._removeInstance=function(e){var t=this._instanceMap.findIndex(function(t){return t.id===e});return t>-1&&(this._instanceMap.splice(t,1),!0)},a}(e("./AudioEngine (@tapclap.game-kit.audio-manager)").AudioEngine);n.CocosAudioEngine=a,cc._RF.pop()},{"./AudioEngine (@tapclap.game-kit.audio-manager)":"AudioEngine (@tapclap.game-kit.audio-manager)"}],"CocosPolyfills (@tapclap.utils-js.cocos-polyfills)":[function(e,t){"use strict";cc._RF.push(t,"dff4dwYQONQnJyvn1PBJI4l","CocosPolyfills (@tapclap.utils-js.cocos-polyfills)"),cc.getAssetFrom=function(e){var t=e.split("/"),n=t[0],o=t.slice(1).join("/"),a=cc.assetManager.getBundle(n);if(!a)throw new Error('Bundle "'+n+'" not found');var r=a.get(o);if(!r)throw new Error('Resource "'+o+'" in bundle "'+n+'" not found');return r},cc.instantiateFrom=function(e){return cc.instantiate("string"==typeof e?cc.getAssetFrom(e):e)},cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.MACOS||!cc.sys.isBrowser||(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(e){this.vertexOffset+e>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,o){return Array.isArray(o)?n.push.apply(n,e.call(o,t-1)):n.push(o),n},[]):Array.prototype.slice.call(this)},writable:!0}),Object.fromEntries||(Object.fromEntries=function(e){return[].concat(e).reduce(function(e,t){var n=t[0],o=t[1];return e[n]=o,e},{})}),Promise.prototype.finally||(Promise.prototype.finally={finally:function(e){var t=function(t){return Promise.resolve(e()).then(t)};return this.then(function(e){return t(function(){return e})},function(e){return t(function(){return Promise.reject(e)})})}}.finally),cc._RF.pop()},{}],"CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)":[function(e,t,n){"use strict";cc._RF.push(t,"5c12cjh90ZNsZE6sNT0EjWG","CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)"),n.__esModule=!0,n.CoinsBarComponent=void 0;var o,a,r,i,c,s,p,l,m=e("./EventListener (@tapclap.utils-js.events)"),u=e("./NumberFormatter (@tapclap.game-kit.ui.number-formatter)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.menu,C=v.mixins,w=v.property,S=(o=C(m.EventListener),a=b("Application/UI/CoinsBarComponent"),r=w({type:cc.Label,visible:!0}),i=w({type:cc.Node,visible:!0}),_(c=o(c=a((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_label",p,f(t)),d(t,"_iconNode",l,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a,r,i=o.prototype;return i._update=function(e){this.coinsNumber=e.amount},i.setUserItem=function(e){this._update(e),this.stopListen(e),this.listenTo(e,"change",this._update)},i.getIconNode=function(){return this._iconNode},a=o,(r=[{key:"coinsNumber",set:function(e){this._label&&(this._label.string=u.NumberFormatter.shortNumber(e))}}])&&y(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),p=g(s.prototype,"_label",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=g(s.prototype,"_iconNode",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c)||c);n.CoinsBarComponent=S,cc._RF.pop()},{"./EventListener (@tapclap.utils-js.events)":"EventListener (@tapclap.utils-js.events)","./NumberFormatter (@tapclap.game-kit.ui.number-formatter)":"NumberFormatter (@tapclap.game-kit.ui.number-formatter)"}],"CoinsRewardComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"2ed0bid6pNRFItn47v4s6y5","CoinsRewardComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.CoinsRewardComponent=void 0;var i=e("./RewardComponent (scripts.windows.items.daily-reward.reward)"),c=e("./Random (@tapclap.utils-js.random)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._coin=null,t._coinsList=[],t._random=null,t}return a(t,e),Object.defineProperty(t.prototype,"coinsList",{get:function(){return this._coinsList},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._random=new c.Random},t.prototype.show=function(e){var t=this,n=e.index;this._setCoinsToRewardsList(),this._animationsComponent.runDelay(this.showingDelay+this.indexCoefficientDelay*n).then(function(){t._animationsComponent.runLabelAppearance(t._label.node).then(function(){return t._animationsComponent.runLabelDisappearance(t._label.node)})})},t.prototype._setCoinsToRewardsList=function(){var e=this._coin.node.getPosition();this._coin.node.setPosition(e.x+this._animationsComponent.coinsZeroPosition.x,e.y+this._animationsComponent.coinsZeroPosition.y);for(var t=1;t<this._animationsComponent.coinRewardsNumber;t++){var n=cc.instantiate(this._coin.node),o=n.getComponent(sp.Skeleton);n.parent=this._coin.node.parent,n.setPosition(n.position.x+this._getRandomCoinSpawnPoint(),n.position.y+this._getRandomCoinSpawnPoint()),o.timeScale=o.timeScale+this._getRandomCoinAnimationSpeed(),this._coinsList.push(n)}this._coinsList.push(this._coin.node)},t.prototype._getRandomCoinSpawnPoint=function(){return this._random.getInteger(-this._animationsComponent.coinsSpawnRadius,this._animationsComponent.coinsSpawnRadius)},t.prototype._getRandomCoinAnimationSpeed=function(){return this._random.getFloat(-this._animationsComponent.coinsAnimationSpeedRange,this._animationsComponent.coinsAnimationSpeedRange,10)},r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_coin",void 0),r([p],t)}(i.RewardComponent);n.CoinsRewardComponent=m,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RewardComponent (scripts.windows.items.daily-reward.reward)":"RewardComponent (scripts.windows.items.daily-reward.reward)"}],"CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"792cbwRnehK6oHQ1q3CRC/X","CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.CoinsWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),f=e("./EventListener (@tapclap.utils-js.events)");function h(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var b=cc._decorator,C=b.ccclass,w=b.property,S=(o=(0,b.mixins)(f.EventListener),a=w({type:cc.Label,visible:!0}),r=w({type:cc.Node,visible:!0}),i=w({visible:!0}),c=w({visible:!0}),C(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return h(t=e.call.apply(e,[this].concat(o))||this,"_coins",l,g(t)),h(t,"_icon",m,g(t)),h(t,"_animationDuration",u,g(t)),h(t,"_iconScaleBounce",d,g(t)),t._currentAnimationTween=null,t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n),o.prototype.setCoins=function(e,t){var n=this;void 0===t&&(t=!1);var o=parseInt(this._coins.string),a=parseInt(e);if(Number.isInteger(o)&&Number.isInteger(a)&&t){var r={progress:function(e,t,o,a){var r=Math.ceil(e+(t-e)*a);return n._coins.string=r.toString(),r}};this._currentAnimationTween&&this._currentAnimationTween.stop();var i=this._icon.scale;this._currentAnimationTween=cc.tween({value:o}).to(this._animationDuration,{value:a},r).start(),this._icon&&cc.tween(this._icon).to(this._animationDuration/2,{scale:this._iconScaleBounce}).to(this._animationDuration/2,{scale:i}).start()}else this._coins.string=a.toString()},o}(y.WindowLayoutComponent),l=_(p.prototype,"_coins",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_(p.prototype,"_icon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=_(p.prototype,"_animationDuration",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=_(p.prototype,"_iconScaleBounce",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.3}}),s=p))||s)||s);n.CoinsWindowLayoutComponent=S,cc._RF.pop()},{"./EventListener (@tapclap.utils-js.events)":"EventListener (@tapclap.utils-js.events)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"0e2e910asJLKb3jMBgMfAEN","CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.CollectItemWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),v=e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)");function _(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var E=cc._decorator,x=E.ccclass,A=E.property,O=(o=A({type:cc.Animation,visible:!0}),a=A({type:cc.Node,visible:!0}),r=A({type:cc.Node,visible:!0}),i=A({type:v.WindowItemComponent,visible:!0}),c=A({type:cc.Material,visible:!0}),s=A({visible:!0}),x((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return _(t=e.call.apply(e,[this].concat(o))||this,"_animation",m,C(t)),_(t,"_partsLayouts",u,C(t)),_(t,"_finalImage",d,C(t)),_(t,"_finalItem",y,C(t)),_(t,"_shadowMaterial",f,C(t)),_(t,"_shadowColor",h,C(t)),t._resource="",t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a,r,i=o.prototype;return i.setResource=function(e){this._resource=e},i.showFinalThing=function(e){var t=this;this._finalItem.style=1,this._finalItem.icon=4,this._finalItem.title=e,this._animation.play(),this._finalImage.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(function(){t._finalItem.getComponent(v.WindowItemComponent).setIconShadow(!1)}),cc.fadeIn(.3),cc.callFunc(function(){t._animation.node.runAction(cc.fadeOut(.1))})))},i.createFinalThing=function(e,t,n){this._finalItem.initialize({icon:{prefab:this._resource,key:"4"}}),this._finalItem.setIconShadow(n,this._getShadowOptions()),this._finalItem.title=e,this._finalItem.style=t},i.createPart=function(e,t,n){var o=cc.instantiateFrom(this._options.item.prefab);this._partsLayouts.addChild(o);var a=o.getComponent(v.WindowItemComponent);return a.initialize({icon:{prefab:this._resource,key:e.toString()},clickHandler:n}),a.setIconShadow(t,this._getShadowOptions()),a},i._getShadowOptions=function(){return{material:this._shadowMaterial,color:this._shadowColor}},i.getItem=function(){return this._finalItem.iconHolder},a=o,(r=[{key:"finalItem",get:function(){return this._finalItem}}])&&b(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(g.WindowLayoutComponent),m=S(l.prototype,"_animation",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S(l.prototype,"_partsLayouts",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(l.prototype,"_finalImage",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S(l.prototype,"_finalItem",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S(l.prototype,"_shadowMaterial",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S(l.prototype,"_shadowColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color(30,30,30,255)}}),p=l))||p);n.CollectItemWindowLayoutComponent=O,cc._RF.pop()},{"./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";cc._RF.push(t,"7cf2e5m5X1fTrtxYPQWQSt3","CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectorGoalEntityProbabilityFilter=void 0;var i=e("./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)"),c=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),s=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(t){var n=t.gridComponent,o=e.call(this)||this;return o._gridComponent=n,o}return a(t,e),t.prototype.filter=function(e){var t=this._findCollectors();if(t.length>0){var n=new Map,o=this._calculateEntityCounts();t.forEach(function(e){e.getEnabledComponent(c.GoalCollectorComponent.KEY).goals.forEach(function(e){var t,a;if(e.entityTypes.length>1){var i=e.entityTypes.reduce(function(e,t){return e+(o.get(t)||0)},0),c=e.total-e.count-i,s=Math.ceil(c/e.entityTypes.length);try{for(var p=r(e.entityTypes),l=p.next();!l.done;l=p.next()){var m=l.value,u=Math.min(c,s);n.set(m,u),c=Math.max(0,c-u)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(a=p.return)&&a.call(p)}finally{if(t)throw t.error}}}else e.entityTypes.forEach(function(t){n.set(t,e.total-e.count-(o.get(t)||0))})})}),n.forEach(function(t,n){e[n]&&(e[n].amount=Math.max(0,t))})}return e},t.prototype._findCollectors=function(){var e=this._gridComponent.grid;return Array.from(new Set(e.filterEntities(function(e){return e.getEnabledComponent(i.BossEntityDropComponent.KEY)})))},t.prototype._calculateEntityCounts=function(){var e=this._gridComponent.grid,t=new Map,n=new Set;return e.forEachEntities(function(e){return n.add(e)}),n.forEach(function(e){var n=e.getEnabledComponent(s.MultiplierComponent.KEY),o=(t.get(e.type)||0)+1;n&&(o+=Math.max(0,n.value)),t.set(e.type,o)}),t},t}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.CollectorGoalEntityProbabilityFilter=p,cc._RF.pop()},{"./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)":"BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"2fb52rZpv5YxoUgkvW/hXdF","CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),n.__esModule=!0,n.CollectorRenderDecorator=void 0;var o=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),a=e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._prefabFactory=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.decorate=function(e,t,n){var o=n.getComponent(a.GoalCollectionViewComponent),i=t.getEnabledComponent("goalCollector");if(i&&o){o.setPrefabFactory(this._prefabFactory);for(var c,s=r(i.goals);!(c=s()).done;){var p=c.value;o.addGoal(p)}}},o}(o.EntityRenderDecorator);n.CollectorRenderDecorator=p,cc._RF.pop()},{"./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"}],"ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"f58c5tcnqRfx7ESHGI9iwS1","ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ColorFlowerEntityRenderDecorator=void 0;var i=e("./GroupComponent (@tapclap.match-x.engine.components)"),c=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),s=e("./ColorFlowerSpineViewComponent (scripts.entity-view-components)"),p=function(e){function t(t){var n=t.groupMap,o=void 0===n?{}:n,a=e.call(this)||this;return a._groupMap={},a._groupMap=o,a}return a(t,e),t.prototype.decorate=function(e,t,n){var o=t.getEnabledComponentByClass(i.GroupComponent),a=n.getComponent(s.ColorFlowerSpineViewComponent),c=r(Object.entries(this._groupMap).find(function(e){return r(e,2)[1]===o.id}),1)[0];a&&a.setGroup(c,0)},t.KEY="color-flower",t}(c.EntityRenderDecorator);n.ColorFlowerEntityRenderDecorator=p,cc._RF.pop()},{"./ColorFlowerSpineViewComponent (scripts.entity-view-components)":"ColorFlowerSpineViewComponent (scripts.entity-view-components)","./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"4757fftM5BSS6S3bdwKyN/I","ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ColorFlowerLeafSpineViewComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._hideAnimationKey="",t}return a(t,e),t.prototype.hide=function(){var e=this;return new Promise(function(t){e._spine.setAnimation(0,e._hideAnimationKey,!1),e._spine.setCompleteListener(t)})},t.prototype.setHideAnimationKey=function(e){this._hideAnimationKey=e},r([s({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),r([c,p("EntityViews/ColorFlower/SpineLeaf")],t)}(cc.Component);n.ColorFlowerLeafSpineViewComponent=l,cc._RF.pop()},{}],"ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"79c14A2jbpT6L86V9l+PZeR","ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.ColorFlowerLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._groupMap=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){return e.flowerColor?{group:{id:this._groupMap[e.flowerColor]}}:{}},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.ColorFlowerLegacyLevelComponentRetriever=a,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"e74aai9s1RTBIJGeHVuskCM","ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ColorFlowerPetalSpineViewComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._openAnimationKey="",t._staticAnimationKey="",t._completeSpineEvent="",t._zindexSpineEvent="",t}var n;return a(t,e),n=t,t.prototype.open=function(){var e=this;return new Promise(function(t){var o=e._spine.setAnimation(2,e._openAnimationKey,!1);e._spine.setEventListener(function(o,a){switch(a.data.name){case e._completeSpineEvent:t();break;case e._zindexSpineEvent:e.node.emit(n.EVENT_CHANGE_ZINDEX)}}),e._spine.setTrackCompleteListener(o,function(){e.node.emit(n.EVENT_OPEN_FINISHED)})})},t.prototype.changeColor=function(e){this.node.activeInHierarchy?this._spine.setSkin(e):this._spine.defaultSkin=e},t.prototype.setOpenAnimationKey=function(e){this._openAnimationKey=e},t.prototype.setStaticAnimationKey=function(e){this._staticAnimationKey=e},t.prototype.setCompleteSpineEvent=function(e){this._completeSpineEvent=e},t.prototype.setZIndexEvent=function(e){this._zindexSpineEvent=e},t.prototype.onLoad=function(){this._spine.setAnimation(1,this._staticAnimationKey,!1)},t.EVENT_CHANGE_ZINDEX="change-zindex",t.EVENT_OPEN_FINISHED="open-finished",r([s({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),n=r([c,p("EntityViews/ColorFlower/SpinePetal")],t)}(cc.Component);n.ColorFlowerPetalSpineViewComponent=l,cc._RF.pop()},{}],"ColorFlowerSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"a045dVsnnlVAYCUlWCry1kn","ColorFlowerSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ColorFlowerSpineViewComponent=void 0;var i=e("./ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)"),c=e("./ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)"),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(){function e(){this._key="",this._animationKey=""}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationKey",{get:function(){return this._animationKey},enumerable:!1,configurable:!0}),r([l({visible:!0})],e.prototype,"_key",void 0),r([l({visible:!0})],e.prototype,"_animationKey",void 0),r([p("ColorFlowerColorMap")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._openedPetalsIndexes=[],t._colorMap=[],t._petalSpineOpenAnimationKey="",t._petalSpineStaticAnimationKey="",t._petalSpineCompleteEvent="",t._petalSpineZIndexEvent="",t._leafSpineHideAnimationKey="",t._petalsNode=null,t._leafsNode=null,t._centralPart=null,t}return a(t,e),t.prototype.openPetal=function(e,t){var n=this;void 0===t&&(t=!1);var o=this._getPetals()[e];return o?(o.node.on(c.ColorFlowerPetalSpineViewComponent.EVENT_CHANGE_ZINDEX,function(){n._centralPart.setSiblingIndex(n._centralPart.getSiblingIndex()+1)}),new Promise(function(a){t&&o.node.on(c.ColorFlowerPetalSpineViewComponent.EVENT_OPEN_FINISHED,a),o.open().then(function(){e>0&&n._hideLeaf(e-1).then(function(){if(e===n._leafsNode.children.length-1)return n._hideLeaf(e)})}),t||a()})):Promise.resolve()},t.prototype.changeColor=function(e,t){var n=this._colorMap.find(function(e){return e.key===t}).animationKey;return n&&this._getPetals().slice(e).forEach(function(e){e.changeColor(n)}),Promise.resolve()},t.prototype.setGroup=function(e,t,n){var o=this;return void 0===n&&(n=!1),0!==t||this.node.activeInHierarchy?this.openPetal(t,n).then(function(){o.changeColor(t+1,e)}):this.changeColor(0,e)},t.prototype._hideLeaf=function(e){return this._leafsNode.children[e].getComponent(i.ColorFlowerLeafSpineViewComponent).hide()},t.prototype._getPetals=function(){return this._petalsNode.children.filter(function(e){return e.getComponent(c.ColorFlowerPetalSpineViewComponent)}).map(function(e){return e.getComponent(c.ColorFlowerPetalSpineViewComponent)})},t.prototype._getLeafs=function(){return this._leafsNode.children.filter(function(e){return e.getComponent(i.ColorFlowerLeafSpineViewComponent)}).map(function(e){return e.getComponent(i.ColorFlowerLeafSpineViewComponent)})},t.prototype.onLoad=function(){var e=this;this._getPetals().forEach(function(t){t.setCompleteSpineEvent(e._petalSpineCompleteEvent),t.setZIndexEvent(e._petalSpineZIndexEvent),t.setOpenAnimationKey(e._petalSpineOpenAnimationKey),t.setStaticAnimationKey(e._petalSpineStaticAnimationKey)}),this._getLeafs().forEach(function(t){t.setHideAnimationKey(e._leafSpineHideAnimationKey)})},r([l({type:[u],visible:!0})],t.prototype,"_colorMap",void 0),r([l({visible:!0})],t.prototype,"_petalSpineOpenAnimationKey",void 0),r([l({visible:!0})],t.prototype,"_petalSpineStaticAnimationKey",void 0),r([l({visible:!0})],t.prototype,"_petalSpineCompleteEvent",void 0),r([l({visible:!0})],t.prototype,"_petalSpineZIndexEvent",void 0),r([l({visible:!0})],t.prototype,"_leafSpineHideAnimationKey",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_petalsNode",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_leafsNode",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_centralPart",void 0),r([p,m("EntityViews/ColorFlower/SpineFlower")],t)}(cc.Component);n.ColorFlowerSpineViewComponent=d,cc._RF.pop()},{"./ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)":"ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)","./ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)":"ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)"}],"CombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"880ce05WYhVlL39NWDVQlP3","CombinationComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.CombinationComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=void 0===t?{}:t,a=o.compareType,r=void 0===a?"byType":a,i=o.visited,c=void 0===i||i;return(n=e.call(this)||this)._compareType=r,n._visited=c,n._combinationIndex=0,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"compareType",get:function(){return this._compareType}},{key:"visited",get:function(){return this._visited}},{key:"combinationIndex",get:function(){return this._combinationIndex},set:function(e){this._combinationIndex=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CombinationComponent=r,r.KEY="combination",r.EVENT_COMBINATION="combination",r.EVENT_COMBINATION_IN_CELL="combinationInCell",r.EVENT_NEIGHBOR="neighbor",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"2e9a7RQlA5VOLsZ4gARQQnP","CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CombinationCoverEntitySystemStrategy=void 0;var i=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),c=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),s=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e){var n,o,a,p,l,m,u=[],d=e.getState(c.CombinationSystem.STATE),y=(null===(m=null===(l=e.getState(s.ExplodeSystem.STATE))||void 0===l?void 0:l.data)||void 0===m?void 0:m.flat())||[];if(d&&d.data){var f=new Set(y.filter(function(e){return e.entity.getComponentByClass(i.PreventCoverComponent)}).map(function(e){return e.cell})),h=d.data.combinations.map(function(e){return e.chunk.map(function(e){return e.cell})});try{for(var g=r(h),v=g.next();!v.done;v=g.next()){var _=v.value;if(this._isCellsHasCover(_))try{for(var b=(a=void 0,r(_)),C=b.next();!C.done;C=b.next()){var w=C.value;this._canCoverCell(w)&&!f.has(w)&&u.push({cell:w,strategyKey:t.KEY})}}catch(S){a={error:S}}finally{try{C&&!C.done&&(p=b.return)&&p.call(b)}finally{if(a)throw a.error}}}}catch(E){n={error:E}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}}return u},t.KEY="combinationCoverEntityStrategy",t}(e("./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)").CoverEntitySystemStrategy);n.CombinationCoverEntitySystemStrategy=p,cc._RF.pop()},{"./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)"}],"CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"1021e7C0DtZCLjb8pEId12y","CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CombinationExplodeRetriever=void 0;var c=e("./CellComparer (@tapclap.match-x.engine.cell-comparer)"),s=e("./Matrix (@tapclap.match-x.engine.models)"),p=function(e){function t(t){var n=t.cells,o=r(t,["cells"]),a=e.call(this,o)||this;return a._cells=n||[],a}return a(t,e),t.prototype.retrieve=function(e){var t,n,o=[],a=[[-1,0],[1,0],[0,-1],[0,1]],r=new s.Matrix(e.rows,e.cols,!1),p=new s.Matrix(e.rows,e.cols,!1),l=[],m=function(t,n){var o,s;r[t.row][t.col]=t.getEntity().getComponent("combination").visited,p[t.row][t.col]=!0,l.push(t);try{for(var u=i(a),d=u.next();!d.done;d=u.next()){var y=d.value,f=t.row+y[0],h=t.col+y[1];if(f>=0&&f<e.rows&&h>=0&&h<e.cols){if(r[f][h]||p[f][h])continue;var g=e.cells[f][h];if(g.isFill){var v=g.getEntity().getEnabledComponent("combination");v&&c.CellComparer.compare(v.compareType,n,g)&&m(g,n)}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}},u=function(t,n){if(!r[t][n]){var a=e.cells[t][n];a.isFill&&a.getEntity().getEnabledComponent("combination")&&(p=new s.Matrix(e.rows,e.cols,!1),l=[],m(a,a),l.length>2&&o.push(l))}},d=this._cells||[];if(d.length)try{for(var y=i(d),f=y.next();!f.done;f=y.next()){var h=f.value;u(h.row,h.col)}}catch(_){t={error:_}}finally{try{f&&!f.done&&(n=y.return)&&n.call(y)}finally{if(t)throw t.error}}else for(var g=0;g<e.rows;g++)for(var v=0;v<e.cols;v++)u(g,v);return o},t.KEY="combination",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.CombinationExplodeRetriever=p,cc._RF.pop()},{"./CellComparer (@tapclap.match-x.engine.cell-comparer)":"CellComparer (@tapclap.match-x.engine.cell-comparer)","./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"b70d8RV9h5YG6feZGIjd2zG","CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),n.__esModule=!0,n.CombinationMultiplierSystemStrategy=void 0;var o=e("./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),i=e("./MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)"),c=e("./Random (@tapclap.utils-js.random)"),s=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)");function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t,n){var o;return(o=e.call(this,t)||this)._patterns=n,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var l=o.prototype;return l.compute=function(){var e=this._world.getState(a.ExplodeSystem.STATE),t=new Map;if(e&&e.data){for(var n,o=new Map,c=new Set,l=p(e.data);!(n=l()).done;)for(var m,u=p(n.value);!(m=u()).done;){var d=m.value,y=d.combination,f=d.combinationNeighbors,h=d.entity;c.add(h);for(var g,v=p(f);!(g=v()).done;){var _=g.value,b=_.cell,C=_.combinationType;o.set(b,{combination:y,combinationType:C})}}for(var w,S=p(o);!(w=S()).done;){var E=w.value,x=E[0],A=E[1],O=A.combination,R=A.combinationType,P=x.getEntity();if(P&&!c.has(P)){var k=P.getEnabledComponent(r.MultiplierComponent.KEY),T=P.getEnabledComponent(i.MultiplierOnCombinationComponent.KEY);if(k&&T){var I=this._getValueByPattern(R);if(I){k.addValue(I);var M=this._retrieveCombinationCenterCell(O);t.set(P,new s.MultiplierSystemModel(P,k.getValue(),k.getMinValue(),R,M))}}}}}return Array.from(t.values())},l._getValueByPattern=function(e){return this._patterns[e]||null},l._retrieveCombinationCenterCell=function(e){if(!e)return null;for(var t,n=this._world.getEnabledComponent("tiles").grid,o=new c.Random,a=0,r=0,i=p(e);!(t=i()).done;){var s=t.value.cell;a+=s.row,r+=s.col}a/=e.length,r/=e.length;var l=o.getInteger(0,1);return a=l>0?Math.ceil(a):Math.floor(a),r=l>0?Math.ceil(r):Math.floor(r),n.getCell(a,r)},o}(o.MultiplierSystemStrategy);n.CombinationMultiplierSystemStrategy=d,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)":"MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"CombinationRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"4e18eaZwFtWJa5PNnTQmeT9","CombinationRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.CombinationRetriever=void 0;var o=e("./Matrix (@tapclap.match-x.engine.models)"),a=e("./CellComparer (@tapclap.match-x.engine.cell-comparer)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n,o=(void 0===t?{}:t).cells,a=void 0===o?[]:o;return(n=e.call(this)||this)._cells=a,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.retrieve=function(e){var t=[],n=[[-1,0],[1,0],[0,-1],[0,1]],i=new o.Matrix(e.rows,e.cols,!1),c=new o.Matrix(e.rows,e.cols,!1),s=[],p=function t(o,p){i[o.row][o.col]=o.getEntity().getComponent("combination").visited,c[o.row][o.col]=!0,s.push(o);for(var l,m=r(n);!(l=m()).done;){var u=l.value,d=o.row+u[0],y=o.col+u[1];if(d>=0&&d<e.rows&&y>=0&&y<e.cols){if(i[d][y]||c[d][y])continue;var f=e.cells[d][y];if(f.isFill){var h=f.getEntity().getEnabledComponent("combination");h&&a.CellComparer.compare(h.compareType,p,f)&&t(f,p)}}}},l=function(n,a){if(!i[n][a]){var r=e.cells[n][a];r.isFill&&r.getEntity().getEnabledComponent("combination")&&(c=new o.Matrix(e.rows,e.cols,!1),s=[],p(r,r),s.length>2&&t.push(s))}};if(this._cells.length)for(var m,u=r(this._cells);!(m=u()).done;){var d=m.value;l(d.row,d.col)}else for(var y=0;y<e.rows;y++)for(var f=0;f<e.cols;f++)l(y,f);return t},i}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.CombinationRetriever=p,cc._RF.pop()},{"./CellComparer (@tapclap.match-x.engine.cell-comparer)":"CellComparer (@tapclap.match-x.engine.cell-comparer)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"38e6dNDBs5ZuYHZagOEw7KY","CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)"),n.__esModule=!0,n.CombinationSwapTurnResolver=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._combinationSystem=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.resolve=function(e,t,n){var o=this._combinationSystem.compute(e,[t,n]);return o.length>0?o:null},a}(e("./SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)").SwapTurnResolver);n.CombinationSwapTurnResolver=a,a.TYPE="combination",cc._RF.pop()},{"./SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)":"SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)"}],"CombinationSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"c537aNkxGxWQYwC11lkKaEi","CombinationSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.CombinationSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)"),r=e("./InCombinationComponent (@tapclap.match-x.engine.components)"),i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./Result (@tapclap.match-x.engine.chunk-classifier)"),s=e("./CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)");function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t,n){var o,a=n.retrieverFactory,r=n.patterns;return(o=e.call(this)||this)._world=t,o._retrieverFactory=a,o._patterns=r,o._comboIndex=0,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var l=o.prototype;return l.compute=function(e,t){void 0===t&&(t=[]);for(var n,o=[],r=this._retrieverFactory.createRetriever("combination",{cells:t}),i=new a.ChunkClassifier(this._patterns),l=p(r.retrieve(e));!(n=l()).done;){var m=n.value,u=i.classify(m);u.isCorrect&&o.push(u)}var d=e.getComponentByClass(s.CombinationsPrioritiesComponent);if(d){var y=this._getCombinationsByPriority(o,d.priorities);if(y.length>0){for(var f,h=[],g=function(){var e=f.value,t=new c.Result;e.forEach(function(e){return t.patterns.push({type:e.type,chunk:e.chunk})}),h.push(t)},v=p(y);!(f=v()).done;)g();return h}}return o},l._getCombinationsByPriority=function(e,t){for(var n,o=[],a=function(){var e,a=n.value.patterns,r=null==(e=a.filter(function(e){return e.type in t}).sort(function(e,n){return t[e.type]-t[n.type]})[0])?void 0:e.type;if(r){var i=a.filter(function(e){return e.type===r});o.push(i)}else o.push(a)},r=p(e);!(n=r()).done;)a();return o},l.computeAll=function(){var e=this._world.getEnabledComponent("tiles");return e?this.compute(e.grid):[]},l.hasCombinations=function(){return this.computeAll().length>0},l.preProcess=function(){this._comboIndex=0},l.process=function(){if(this._world.getEnabledComponent("tiles")){var e=this.computeAll();if(e.length>0){this._comboIndex+=e.length;for(var t={comboIndex:this._comboIndex,combinations:[]},n=0;n<e.length;n++){for(var a,i=e[n],c=[],s=p(i.chunk);!(a=s()).done;){var l=a.value,m=l.getEntity(),u=m.getEnabledComponent("combination");u&&(u.combinationIndex=n),m.addComponent(r.InCombinationComponent.KEY,new r.InCombinationComponent),c.push({cell:l,entity:m})}t.combinations.push({type:i.type,chunk:c,comboIndex:this._comboIndex})}return this._world.setState(o.STATE,t),!0}}return!1},l.postProcess=function(){for(var e,t=p(this._world.getComponentsByClass(i.GridComponent));!(e=t()).done;)e.value.grid.forEachEntities(function(e){return e.removeComponentByClass(r.InCombinationComponent)})},o}(o.PipelineProcessSystem);n.CombinationSystem=d,d.KEY="combination",d.STATE="combination",cc._RF.pop()},{"./ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)":"ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)","./CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)":"CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./InCombinationComponent (@tapclap.match-x.engine.components)":"InCombinationComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./Result (@tapclap.match-x.engine.chunk-classifier)":"Result (@tapclap.match-x.engine.chunk-classifier)"}],"CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"01d45gN7WVbvbXM+8cZ/xZZ","CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CombinationsPrioritiesComponent=void 0;var r=function(e){function t(t){var n=t.data,o=e.call(this)||this;return o._priorities=n,o}return a(t,e),Object.defineProperty(t.prototype,"priorities",{get:function(){return this._priorities},enumerable:!1,configurable:!0}),t.KEY="combinationsPriorities",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CombinationsPrioritiesComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"ceda78emiVWqrn4hdp95B7j","CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CommonMetaDevConsoleMenuGenerator=void 0;var i=e("./MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),c=e("./ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./ActionConstants (scripts.config)"),p=function(e){function t(t){var n=e.call(this)||this;return n._actionManager=t.actionManager,n}return a(t,e),t.prototype.generate=function(){var e,t,n,o,a={},i=this._metaGame.getModule("dailyReward");if(i){for(var p=i.cycleCount,l={},m=function(e){l["day"+(e+1)]={title:"\u0414\u0435\u043d\u044c "+(e+1),closeBefore:!0,command:new c.ActionDevConsoleCommand({actionManager:u._actionManager,action:s.ACTIONS.WINDOW_DAILY_REWARD,actionBefore:function(){i.reset(e)},options:{module:i}})}},u=this,d=0;d<p;d++)m(d);a.dailyReward={title:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u0431\u043e\u043d\u0443\u0441",items:l}}var y=this._metaGame.getModule("progress"),f=this._metaGame.getModule("stars"),h=this._metaGame.getModule("starsReward");if(h){var g=h.getCheckpoints();l={};try{for(var v=r(g),_=v.next();!_.done;_=v.next()){var b=_.value;y.value*f.maxValue>=b&&(l["checkpoint"+b]={title:b,closeBefore:!0,command:new c.ActionDevConsoleCommand({actionManager:this._actionManager,action:s.ACTIONS.WINDOW_EPISODES_STARS_REWARD_AVAILABLE,actionBefore:function(){},options:{module:h,rewardIndex:g.indexOf(b),text:{chooseReward:"chooseReward",cheersYouWon:"cheersYouWon",lookAtAnotherPrizes:"lookAtAnotherPrizes"}}})})}}catch(O){e={error:O}}finally{try{_&&!_.done&&(t=v.return)&&t.call(v)}finally{if(e)throw e.error}}Object.keys(l).length>0&&(a.starsReward={title:"\u041f\u0440\u0438\u0437 \u0437\u0430 \u043a\u043e\u0440\u043e\u0431\u043a\u0438",items:l})}var C=this._metaGame.getModule("craft"),w=this._metaGame.getModule("episodes");if(C){var S=C.partOnLevels;l={};try{for(var E=r(S),x=E.next();!x.done;x=E.next()){var A=x.value;l["level"+A]={title:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c "+A,closeBefore:!0,command:new c.ActionDevConsoleCommand({actionManager:this._actionManager,action:s.ACTIONS.WINDOW_CRAFT_PART,options:{episodeNumber:w.getCurrentEpisode(),levelNumber:A,prepareState:A===w.getLevelCountPerEpisode()}})}}}catch(R){n={error:R}}finally{try{x&&!x.done&&(o=E.return)&&o.call(E)}finally{if(n)throw n.error}}a.craft={title:"\u0420\u0435\u0446\u0435\u043f\u0442 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u044d\u043f\u0438\u0437\u043e\u0434\u0430",items:l}}return a},t}(i.MetaActionDevConsoleMenuGenerator);n.CommonMetaDevConsoleMenuGenerator=p,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"}],"CommonMetaGameConfig (scripts.config.meta-games)":[function(e,t,n){"use strict";var o;cc._RF.push(t,"5fc12pRHEhX/K/GkB2009sn","CommonMetaGameConfig (scripts.config.meta-games)"),Object.defineProperty(n,"__esModule",{value:!0}),n.CommonMetaGameConfig=n.key=void 0;var a=e("./MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),r=e("./SliceFilter (@tapclap.game-kit.filter)"),i=e("./EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)"),c=e("./EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)"),s=e("./EpisodicMetaGame (scripts.scenes.meta-game.episodic)"),p=e("./EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)"),l=e("./AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)"),m=e("./UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)"),u=e("./ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)"),d=e("./ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)"),y=e("./CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)"),f=e("./EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)"),h=e("./CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)"),g=e("./CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)"),v=e("./CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)"),_=e("./EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)"),b=e("./EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)"),C=e("./EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)"),w=e("./I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)"),S=e("./IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)"),E=e("./IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)"),x=e("./LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)"),A=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)"),O=e("./MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)"),R=e("./OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)"),P=e("./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)"),k=e("./ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)"),T=e("./DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)"),I=e("./CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)"),M=e("./ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)"),j=e("./ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)"),L=e("./ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)"),F=e("./CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)"),D=e("./OfferManager (@tapclap.game-kit.offer-manager)"),B=e("./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)"),G=e("./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"),N=e("./ResourceResolver (@tapclap.game-kit.resource-manager)"),W=e("./RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)"),H=e("./RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)"),V=e("./RewardEmitter (@tapclap.game-kit.reward)"),K=e("./SyncService (@tapclap.game-kit.services)"),U=e("./DI (@tapclap.utils-js.di)"),Y=e("./Random (@tapclap.utils-js.random)"),z=e("./Service (@tapclap.utils-js.service)"),q=e("./TimeDuration (@tapclap.utils-js.time-duration)"),Z=e("./CakeRewardMetaModule (scripts.meta.modules.daily-cake)"),X=e("./ActionConstants (scripts.config)"),J=e("./ApplicationConfigShortcuts (scripts.config)"),Q=e("./MetaTaskConfig (scripts.config)"),$=e("./OffersConfig (scripts.config)"),ee=e("./PrefabResourcesConfig (scripts.config)"),te=e("./CommonRewardConfig (scripts.config.meta-games.common)"),ne=e("./SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)"),oe=e("./SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)"),ae=e("./ResourceManager (@tapclap.game-kit.resource-manager)"),re=e("./PiggybankMetaModule (scripts.meta.modules.piggybank)"),ie=e("./ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)"),ce=e("./PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)");n.key="common",n.CommonMetaGameConfig=U.DI.instance(s.EpisodicMetaGame).ctx({moduleService:U.DI.instance(z.Service,{gateway:U.DI.cfg("ServiceGateway"),root:"meta",prefix:n.key})}).args({key:n.key,scene:"MetaGameCommon",service:U.DI.instance(K.SyncService,{gateway:U.DI.cfg("ServiceGateway"),root:"meta",prefix:n.key,query:{modules:["progress","score","stars","dailyReward","cakeReward","piggybank"]},adapter:U.DI.from("ObjectStorageAdapter",{root:"meta",prefix:n.key,storage:U.DI.cfg("PlatformStorage")})}),actions:{startLevel:X.ACTIONS.START_LEVEL,windowMenu:X.ACTIONS.WINDOW_MENU,windowLivesShop:X.ACTIONS.WINDOW_LIVES_SHOP,windowCoinsShop:X.ACTIONS.WINDOW_COINS_SHOP,windowFriends:X.ACTIONS.WINDOW_MESSAGE_CENTER,windowEpisodes:X.ACTIONS.WINDOW_EPISODES,windowEpisodesStarsRewardUnavailable:X.ACTIONS.WINDOW_EPISODES_STARS_REWARD_UNAVAILABLE,noEpisode:X.ACTIONS.NO_EPISODE,runScene:X.ACTIONS.RUN_SCENE_EPISODIC,windowStartLevel:X.ACTIONS.WINDOW_START_LEVEL},modules:{scenario:U.DI.instance(M.ScenarioMetaModule,{resourceResolver:U.DI.instance(N.ResourceResolver,{resources:[{src:"meta-{{META_GAME_KEY}}-episodes/{{EP_NUM}}/scenarios",dest:"{{EP_NUM}}",handler:U.DI.instance(T.DestinationPostfixScenarioResourceHandler,{moduleResolver:J.moduleResolver("scenario",n.key),extractors:[U.DI.instance(G.PrefabResourceExtractor)]})},{src:"meta-{{META_GAME_KEY}}/scenarios",dest:"main",handler:U.DI.instance(j.ScenarioResourceHandler,{moduleResolver:J.moduleResolver("scenario",n.key),extractors:[U.DI.instance(G.PrefabResourceExtractor)]})}],params:{EP_NUM:U.DI.instance(i.EpisodicEpisodeNumberValueResolver,{metaGameResolver:J.gameResolver(n.key),availableCount:!0}),META_GAME_KEY:n.key}}),scenarioKeyResolvers:[U.DI.instance(I.CurrentEpisodeNumberScenarioKeyResolver,{metaModuleResolver:J.moduleResolver("episodes"),keys:["newEpisode"]})]}),chart:U.DI.instance(u.ChartMetaModule,{socialService:U.DI.cfg("SocialService"),service:U.DI.instance(d.ChartMetaModuleService,{gateway:U.DI.cfg("ServiceGateway"),root:"meta",prefix:n.key,endpoint:"chart"}),scope:["progress"],friendsListType:"inapp"}),offers:U.DI.instance(R.OffersMetaModule,U.DI.instance(D.OfferManager,{moves:U.DI.instance(B.SimpleOfferStrategy,U.DI.cfg("OfferFactory"),$.MovesOffers),bombMoves:U.DI.instance(B.SimpleOfferStrategy,U.DI.cfg("OfferFactory"),$.BombMovesOffers),parrotFailWalk:U.DI.instance(B.SimpleOfferStrategy,U.DI.cfg("OfferFactory"),$.ParrotFailWalkOffers)})),progress:U.DI.instance(P.ProgressMetaModule,{service:U.DI.fromCtx("moduleService").setArg({endpoint:"progress"},0,!0),devConsoleMenuGenerator:U.DI.instance(k.ProgressMetaModuleDevConsoleMenuGenerator,{runMetaGameAction:X.ACTIONS.RUN_META_GAME,maxValueResolver:U.DI.instance(c.EpisodicMaxAvailableLevelResolver,{episodesMetaModuleResolver:J.moduleResolver("episodes",n.key)}),actionManager:U.DI.cfg("ActionManager")})}),currentLevel:U.DI.instance(v.CurrentLevelMetaModule),attempts:U.DI.instance(l.AttemptsMetaModule,{userManager:U.DI.cfg("UserManager"),service:U.DI.instance(m.UserItemAttemptsMetaModuleService,{userManager:U.DI.cfg("UserManager"),stateFactory:U.DI.cfg("AttemptsStateFactory"),properties:[{spec:"attempts",name:"unlimited"},{spec:"attempts",name:"lives"}]})}),score:U.DI.instance(L.ScoreMetaModule,{rangeResolver:U.DI.instance(p.EpisodicRangeResolver,{moduleResolver:J.moduleResolver("episodes",n.key),metaGameResolver:J.gameResolver(n.key),useCurrent:!0}),service:U.DI.fromCtx("moduleService").setArg({endpoint:"score"},0,!0)}),stars:U.DI.instance(L.ScoreMetaModule,{rangeResolver:U.DI.instance(p.EpisodicRangeResolver,{moduleResolver:J.moduleResolver("episodes",n.key),metaGameResolver:J.gameResolver(n.key),useCurrent:!0}),service:U.DI.fromCtx("moduleService").setArg({endpoint:"stars"},0,!0),maxValue:3}),episodes:U.DI.instance(_.EpisodesMetaModule,{availableEpisodeCount:541,levelCountPerEpisode:20,progressMetaModuleResolver:J.moduleResolver("progress",n.key),resourceResolver:U.DI.instance(N.ResourceResolver,{resources:[{src:"meta-{{META_GAME_KEY}}-episodes/{{EP_NUM}}/prefabs/episode",dest:"{{EP_NUM}}",asFile:!0,handler:U.DI.instance(C.EpisodesResourceHandler,{moduleResolver:J.moduleResolver("episodes",n.key)})}],params:{EP_NUM:U.DI.instance(i.EpisodicEpisodeNumberValueResolver,{metaGameResolver:J.gameResolver(n.key)}),META_GAME_KEY:n.key}}),devConsoleMenuGenerator:U.DI.instance(b.EpisodesMetaModuleDevConsoleMenuGenerator,{runMetaGameAction:X.ACTIONS.RUN_META_GAME,actionManager:U.DI.cfg("ActionManager")})}),levels:U.DI.instance(x.LevelsMetaModule,{resourceResolver:U.DI.instance(N.ResourceResolver,{resources:[{src:"meta-{{META_GAME_KEY}}-episodes/{{EP_NUM}}/levels",dest:"{{EP_NUM}}",handler:U.DI.cfg("LegacyEpisodicLevelsResourceHandler")},{src:"meta-{{META_GAME_KEY}}-episodes/special/levels",dest:"special",handler:U.DI.instance(ne.SpecialLevelsResourceHandler,{moduleResolver:J.moduleResolver("levels",n.key),converter:U.DI.cfg("CandyvalleyLegacyLevelConverter"),resourceManager:U.DI.instance(ae.ResourceManager,ee.PrefabResourcesConfig)})}],params:{EP_NUM:U.DI.instance(i.EpisodicEpisodeNumberValueResolver,{metaGameResolver:J.gameResolver(n.key)}),META_GAME_KEY:n.key}})}),craft:U.DI.instance(h.CraftMetaModule,{partOnLevels:[5,15,20],resourceResolver:U.DI.instance(N.ResourceResolver,{resources:[{src:"meta-{{META_GAME_KEY}}-episodes/{{EP_NUM}}/prefabs/parts",dest:"{{EP_NUM}}",asFile:!0,handler:U.DI.instance(g.CraftResourceHandler,{moduleResolver:J.moduleResolver("craft",n.key)})}],params:{EP_NUM:U.DI.instance(i.EpisodicEpisodeNumberValueResolver,{metaGameResolver:J.gameResolver(n.key)}),META_GAME_KEY:n.key}})}),cakeReward:U.DI.instance(Z.CakeRewardMetaModule,{random:U.DI.instance(Y.Random),availableLevel:21,numberOfLevelsRequired:15,duration:U.DI.instance(q.TimeDuration,"PT12H"),cooldown:U.DI.instance(q.TimeDuration,"P1D"),service:U.DI.fromCtx("moduleService").setArg({endpoint:"cake-reward"},0,!0),metaTaskManager:U.DI.cfg("MetaTaskManager"),remoteConfig:U.DI.cfg("RemoteConfig"),remoteConfigActivityKey:"cakereward_activity",phases:[{task:U.DI.instance(F.CountableMetaTask,{total:5}),events:[Q.WIN_LEVEL],rewardEmitter:U.DI.instance(V.RewardEmitter,te.cakeReward[0],{itemFactory:U.DI.cfg("UserItemFactory")})},{task:U.DI.instance(F.CountableMetaTask,{total:5}),events:[Q.WIN_LEVEL],rewardEmitter:U.DI.instance(V.RewardEmitter,te.cakeReward[1],{itemFactory:U.DI.cfg("UserItemFactory")})},{task:U.DI.instance(F.CountableMetaTask,{total:5}),events:[Q.WIN_LEVEL],rewardEmitter:U.DI.instance(V.RewardEmitter,te.cakeReward[2],{itemFactory:U.DI.cfg("UserItemFactory")})}]}),dailyReward:U.DI.instance(S.IntervalRewardMetaModule,{service:U.DI.fromCtx("moduleService").setArg({endpoint:"daily-reward"},0,!0),delayTimeout:U.DI.raw(new q.TimeDuration("PT24H")),resetTimeout:U.DI.raw(new q.TimeDuration("PT48H")),cycleCount:7,rewardEmitter:U.DI.instance(V.RewardEmitter,te.dailyReward,{itemFactory:U.DI.cfg("UserItemFactory"),itemFilters:[U.DI.instance(W.RewardAvailabilityFilter),U.DI.instance(r.SliceFilter,{length:3})]}),devConsoleMenuGenerator:U.DI.instance(E.IntervalMetaModuleDevConsoleMenuGenerator,{runMetaGameAction:X.ACTIONS.RUN_META_GAME,actionManager:U.DI.cfg("ActionManager")})}),starsReward:U.DI.instance(y.CheckpointRewardMetaModule,{checkpoints:[20,40,60],strategy:U.DI.instance(f.EpisodeStarsCheckpointRewardStrategy),rewardEmitter:U.DI.instance(V.RewardEmitter,te.starsReward,{itemFactory:U.DI.cfg("UserItemFactory"),itemFilters:[U.DI.instance(W.RewardAvailabilityFilter)],groupFilters:[U.DI.instance(W.RewardAvailabilityFilter),U.DI.instance(H.RewardRandomByWeightFilter,3)]})}),specialLevelsReward:U.DI.instance(oe.SpecialLevelsRewardMetaModule,{moduleResolver:J.moduleResolver("levels",n.key),rewardEmitter:U.DI.instance(V.RewardEmitter,te.specialLevelReward,{itemFactory:U.DI.cfg("UserItemFactory"),itemFilters:[U.DI.instance(W.RewardAvailabilityFilter),U.DI.instance(r.SliceFilter,{length:1})]})}),piggybank:U.DI.instance(re.PiggybankMetaModule,{actionManager:U.DI.cfg("ActionManager"),service:U.DI.fromCtx("moduleService").setArg({endpoint:"piggybank"},0,!0),storage:U.DI.cfg("PlatformStorage"),storagePrefixKey:"piggybank",availableLevel:26,minCoins:800,maxCoins:2e3,phases:[{offerId:null,coinsRange:{min:0,max:799}},{offerId:"breakPiggybank",coinsRange:{min:800,max:1999}},{offerId:"breakPiggybank",coinsRange:{min:2e3}}],rewards:(o={},o[re.PiggybankMetaModule.COINS_FOR_LEVEL]=100,o[re.PiggybankMetaModule.COINS_FOR_SPECIAL_LEVEL]=200,o[re.PiggybankMetaModule.COINS_FOR_AD_WATCHING]=100,o),adWatchingNumber:3,devConsoleMenuGenerator:U.DI.instance(ce.PiggybankMetaModuleDevConsoleMenuGenerator,{actionManager:U.DI.cfg("ActionManager"),instance:re.PiggybankMetaModule,runMetaGameAction:X.ACTIONS.RUN_META_GAME})}),music:U.DI.instance(O.MusicMetaModule,{audioManager:U.DI.cfg("AudioManager"),random:U.DI.instance(Y.Random),playlists:{meta:["commonMetaMusic"],regularLevel:["commonGameMusic"],hardLevel:["commonHardLevelGameMusic"]},userSettings:U.DI.cfg("UserSettings")}),i18n:U.DI.instance(A.MetaModule,{i18n:U.DI.cfg("I18N"),resourceResolver:U.DI.instance(N.ResourceResolver,{resources:[{src:"meta-{{META_GAME_KEY}}-episodes/{{EP_NUM}}/i18n",dest:"meta.common.episodes.{{EP_NUM}}",handler:U.DI.instance(w.I18NResourceHandler,{i18n:U.DI.cfg("I18N")})},{src:"meta-{{META_GAME_KEY}}/i18n/base",dest:"meta.{{META_GAME_KEY}}.base",handler:U.DI.instance(w.I18NResourceHandler,{i18n:U.DI.cfg("I18N")})},{src:"meta-{{META_GAME_KEY}}/i18n/publications",dest:"meta.{{META_GAME_KEY}}.publications",handler:U.DI.instance(w.I18NResourceHandler,{i18n:U.DI.cfg("I18N")})}],params:{EP_NUM:U.DI.instance(i.EpisodicEpisodeNumberValueResolver,{metaGameResolver:J.gameResolver(n.key)}),META_GAME_KEY:n.key}})}),thousandthsLevelReward:U.DI.instance(y.CheckpointRewardMetaModule,{checkpoints:[1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4],strategy:U.DI.instance(ie.ThousandthsLevelRewardStrategy),rewardEmitter:U.DI.instance(V.RewardEmitter,te.thousandthsLevelReward,{itemFactory:U.DI.cfg("UserItemFactory")})})},devConsoleMenuGenerator:U.DI.instance(a.MetaGameDevConsoleMenuGenerator,{startScene:"Start",sceneManager:U.DI.cfg("SceneManager")})}),cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)":"AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)","./CakeRewardMetaModule (scripts.meta.modules.daily-cake)":"CakeRewardMetaModule (scripts.meta.modules.daily-cake)","./ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)":"ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)","./ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)":"ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)","./CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)":"CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)","./CommonRewardConfig (scripts.config.meta-games.common)":"CommonRewardConfig (scripts.config.meta-games.common)","./CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)":"CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)","./CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)":"CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)","./CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)":"CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)","./CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)":"CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)","./CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)":"CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)":"DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)","./EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)":"EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)","./EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)":"EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)","./EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)":"EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)","./EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)":"EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)","./EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)":"EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)","./EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)":"EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)","./EpisodicMetaGame (scripts.scenes.meta-game.episodic)":"EpisodicMetaGame (scripts.scenes.meta-game.episodic)","./EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)":"EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)","./I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)":"I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)","./IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)":"IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)","./IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)":"IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)","./LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)":"LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)","./MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)","./MetaTaskConfig (scripts.config)":"MetaTaskConfig (scripts.config)","./MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)":"MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)","./OfferManager (@tapclap.game-kit.offer-manager)":"OfferManager (@tapclap.game-kit.offer-manager)","./OffersConfig (scripts.config)":"OffersConfig (scripts.config)","./OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)":"OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)","./PiggybankMetaModule (scripts.meta.modules.piggybank)":"PiggybankMetaModule (scripts.meta.modules.piggybank)","./PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)":"PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)","./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)":"PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)","./PrefabResourcesConfig (scripts.config)":"PrefabResourcesConfig (scripts.config)","./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)":"ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)","./ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)":"ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./ResourceManager (@tapclap.game-kit.resource-manager)":"ResourceManager (@tapclap.game-kit.resource-manager)","./ResourceResolver (@tapclap.game-kit.resource-manager)":"ResourceResolver (@tapclap.game-kit.resource-manager)","./RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)":"RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)","./RewardEmitter (@tapclap.game-kit.reward)":"RewardEmitter (@tapclap.game-kit.reward)","./RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)":"RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)","./ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)":"ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)","./ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)":"ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)","./ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)":"ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)","./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)","./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)":"SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)","./SliceFilter (@tapclap.game-kit.filter)":"SliceFilter (@tapclap.game-kit.filter)","./SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)":"SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)","./SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)":"SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)","./SyncService (@tapclap.game-kit.services)":"SyncService (@tapclap.game-kit.services)","./ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)":"ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)":"UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)"}],"CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"a584bwoHoxaFYbIOVpH3qSd","CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CommonProgressCompareValueResolver=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._progress=t.progressModuleResolver.get(),n}return a(t,e),t.prototype.resolveValue=function(){return Promise.resolve(this._progress.value)},t}(e("./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)").CompareValueResolver);n.CommonProgressCompareValueResolver=r,cc._RF.pop()},{"./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)":"CompareValueResolver (scripts.action-conditions.compare-value-resolvers)"}],"CommonRewardConfig (scripts.config.meta-games.common)":[function(e,t,n){"use strict";cc._RF.push(t,"319cdA7MpZab5/WGc6hHbr1","CommonRewardConfig (scripts.config.meta-games.common)"),n.__esModule=!0,n.thousandthsLevelReward=n.starsReward=n.specialLevelReward=n.dailyReward=n.cakeReward=void 0;var o=e("./RewardBuilder (@tapclap.game-kit.reward)"),a=e("./ApplicationConfigShortcuts (scripts.config)"),r=[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1},{availability:(0,a.metaProgressAvailability)(6)}),(0,o.item)({spec:"currency",name:"coins",amount:50})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:100})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:1800}),(0,o.item)({spec:"currency",name:"coins",amount:150})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:150})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"cart",amount:1},{availability:(0,a.metaProgressAvailability)(6)}),(0,o.item)({spec:"currency",name:"coins",amount:150})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"timebooster",name:"superTile",duration:1800})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"cat",amount:1},{availability:(0,a.metaProgressAvailability)(6)}),(0,o.item)({spec:"attempts",name:"unlimited",duration:1800}),(0,o.item)({spec:"currency",name:"coins",amount:200})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:50})])])];n.dailyReward=r;var i=[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:500})]),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:100}),(0,o.item)({spec:"booster",name:"trowel",amount:1})],{availability:(0,a.metaProgressAvailability)(6)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:300}),(0,o.item)({spec:"booster",name:"trowel",amount:1})],{availability:(0,a.metaProgressAvailability)(6)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:100}),(0,o.item)({spec:"booster",name:"cat",amount:1})],{availability:(0,a.metaProgressAvailability)(11)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:50}),(0,o.item)({spec:"booster",name:"cat",amount:1})],{availability:(0,a.metaProgressAvailability)(11)})]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:800})]),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:500})]),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:600}),(0,o.item)({spec:"booster",name:"trowel",amount:1})],{availability:(0,a.metaProgressAvailability)(6)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:300}),(0,o.item)({spec:"booster",name:"trowel",amount:1})],{availability:(0,a.metaProgressAvailability)(6)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:500}),(0,o.item)({spec:"booster",name:"cart",amount:1})],{availability:(0,a.metaProgressAvailability)(16)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:250}),(0,o.item)({spec:"booster",name:"cart",amount:1})],{availability:(0,a.metaProgressAvailability)(16)})]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:1e3}),(0,o.item)({spec:"booster",name:"cat",amount:1})],{availability:(0,a.metaProgressAvailability)(11)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:700}),(0,o.item)({spec:"booster",name:"cat",amount:1})],{availability:(0,a.metaProgressAvailability)(11)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:1100}),(0,o.item)({spec:"booster",name:"cart",amount:1})],{availability:(0,a.metaProgressAvailability)(16)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:800}),(0,o.item)({spec:"booster",name:"cart",amount:1})],{availability:(0,a.metaProgressAvailability)(16)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:1200}),(0,o.item)({spec:"booster",name:"plusone",amount:1})],{availability:(0,a.metaProgressAvailability)(19)}),(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:900}),(0,o.item)({spec:"booster",name:"plusone",amount:1})],{availability:(0,a.metaProgressAvailability)(19)})])];n.starsReward=i;var c=[[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT30M"})])])],[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT1H"}),(0,o.item)({spec:"currency",name:"coins",amount:100})]),(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT30M"}),(0,o.item)({spec:"booster",name:"trowel",amount:1})]),(0,o.group)([(0,o.item)({spec:"booster",name:"plusone",amount:1})])])],[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT2H"}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"currency",name:"coins",amount:300})]),(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT3H"}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"currency",name:"coins",amount:300})]),(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT2H"}),(0,o.item)({spec:"booster",name:"plusone",amount:1}),(0,o.item)({spec:"currency",name:"coins",amount:500})]),(0,o.group)([(0,o.item)({spec:"attempts",name:"unlimited",duration:"PT3H"}),(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"currency",name:"coins",amount:500})])])]];n.cakeReward=c;var s={"tutorial-square":(0,o.pack)([(0,o.group)([(0,o.item)({spec:"currency",name:"coins",amount:300})])])};n.specialLevelReward=s;var p=[(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])]),(0,o.pack)([(0,o.group)([(0,o.item)({spec:"booster",name:"trowel",amount:1}),(0,o.item)({spec:"booster",name:"cat",amount:1}),(0,o.item)({spec:"booster",name:"cart",amount:1}),(0,o.item)({spec:"booster",name:"plusone",amount:1})])])];n.thousandthsLevelReward=p,cc._RF.pop()},{"./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./RewardBuilder (@tapclap.game-kit.reward)":"RewardBuilder (@tapclap.game-kit.reward)"}],"CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"729c6h/5fBCVo9Ruba4tTH4","CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.CommonShopItemComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./IconComponent (@tapclap.game-kit.ui.icons)"),v=e("./StickerComponent (@tapclap.game-kit.ui.sticker)"),_=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)");function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var E=cc._decorator,x=E.ccclass,A=E.property,O=(o=A({type:cc.Node,visible:!0}),a=A({type:cc.Layout,visible:!0}),r=A({type:cc.Label,visible:!0}),i=A({type:g.IconComponent,visible:!0}),c=A({type:v.StickerComponent,visible:!0}),s=A({type:g.IconComponent,visible:!0}),x((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_title",m,C(t)),b(t,"_titleLayout",u,C(t)),b(t,"_titleLabel",d,C(t)),b(t,"_titleIcon",y,C(t)),b(t,"_sticker",f,C(t)),b(t,"_icon",h,C(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n),o.prototype.setProduct=function(t){var n=this;if(e.prototype.setProduct.call(this,t),this._titleLabel.string="shopItem."+t.key+".title",this._titleIcon.icon=t.type,this._titleLayout.node.once(cc.Node.EventType.SIZE_CHANGED,function(){n._titleLayout.node.width>n._title.width&&(n._titleLabel.overflow=cc.Label.Overflow.SHRINK,n._titleLabel.node.width=n._title.width)}),this._sticker&&t.payload.offerType){var o=t.payload.offerType;this._sticker.node.active=!!o,this._sticker.setStyle(o),this._sticker.setLabel("shopItem.sticker."+o)}this._icon.icon=t.key},o}(_.ProductItemComponent),m=S(l.prototype,"_title",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S(l.prototype,"_titleLayout",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(l.prototype,"_titleLabel",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S(l.prototype,"_titleIcon",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S(l.prototype,"_sticker",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S(l.prototype,"_icon",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=l))||p);n.CommonShopItemComponent=O,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./StickerComponent (@tapclap.game-kit.ui.sticker)":"StickerComponent (@tapclap.game-kit.ui.sticker)"}],"CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";cc._RF.push(t,"43e42lZSvlTkry51V7uLAeT","CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.CompareAttemptsOfferState=void 0;var o=e("./MetaGameOfferState (@tapclap.game-kit.offer-manager.states)"),a=e("./AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)"),r=e("./RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype._doResolve=function(e){if(e instanceof a.AttemptsMetaModule){var t=e.getState();if(t instanceof r.RestorableCountableAttemptsState)switch(this._options.comparer){case"=":return t.getCountAttempts()===this._options.value;case"<":return t.getCountAttempts()<this._options.value;case"<=":return t.getCountAttempts()<=this._options.value;case">":return t.getCountAttempts()>this._options.value;case">=":return t.getCountAttempts()>=this._options.value}}return!1},o}(o.MetaGameOfferState);n.CompareAttemptsOfferState=c,cc._RF.pop()},{"./AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)":"AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)","./MetaGameOfferState (@tapclap.game-kit.offer-manager.states)":"MetaGameOfferState (@tapclap.game-kit.offer-manager.states)","./RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":"RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"}],"CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";cc._RF.push(t,"4ac52zhJQ5QhoJY+UWcFQdu","CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CompareItemCountOfferState=void 0;var r=e("./OfferState (@tapclap.game-kit.offer-manager)"),i=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),c=function(e){function t(t){var n=e.call(this)||this;return n._options=t,n}return a(t,e),t.prototype.resolve=function(){var e=this._options.userManager.getCurrentUser();if(!e)return!1;var t=this._options,n=t.spec,o=t.name,a=e.items.get(n,o);if(!(a instanceof i.CountableUserItem))return!1;switch(this._options.comparer){case"=":return a.amount===this._options.value;case"<":return a.amount<this._options.value;case"<=":return a.amount<=this._options.value;case">":return a.amount>this._options.value;case">=":return a.amount>=this._options.value}},t}(r.OfferState);n.CompareItemCountOfferState=c,cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"CompareValueActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"46278VFyXZY14MZ/X4eLGki","CompareValueActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.CompareValueActionCondition=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._firstCompareValueResolver=t.firstCompareValueResolver,n._secondCompareValueResolver=t.secondCompareValueResolver,n._comparer=t.comparer,n}return a(t,e),t.prototype.check=function(){var e=this,t=[this._firstCompareValueResolver.resolveValue(),this._secondCompareValueResolver.resolveValue()];return Promise.all(t).then(function(t){var n=r(t,2),o=n[0],a=n[1];switch(e._comparer){case"=":return o===a;case"<":return o<a;case"<=":return o<=a;case">":return o>a;case">=":return o>=a}})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.CompareValueActionCondition=i,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"CompareValueResolver (scripts.action-conditions.compare-value-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"4f91fUM9NJWJ59gjX7RPgic","CompareValueResolver (scripts.action-conditions.compare-value-resolvers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.CompareValueResolver=void 0;var o=function(){function e(e){this._compareValue=e.compareValue}return e.prototype.resolveValue=function(){return Promise.resolve(this._compareValue)},e}();n.CompareValueResolver=o,cc._RF.pop()},{}],"CompensationStartBoostersAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"bc177cElC5c0aJrCz7Rti4e","CompensationStartBoostersAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CompensationStartBoostersAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._userManager=null,n._boosterKey=null,n._userManager=t.userManager,n._boosterKey=t.boosterKey,n}return a(t,e),t.prototype.run=function(){if(this._boosterKey){var e=this._userManager.getCurrentUser().items;e.charge([e.create({spec:"startbooster",name:this._boosterKey,amount:1})])}return Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CompensationStartBoostersAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)":[function(e,t,n){"use strict";cc._RF.push(t,"8c591lXEcxXILpm9k68cJF2","CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)"),n.__esModule=!0,n.CompleteTutorialAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._scenarioBuilder=t.scenarioBuilder,n._hero=t.hero,n._arrow=t.arrow,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.build=function(e){var t=this,n=[];return e&&(this._hero&&this._scenarioBuilder.addAction(function(){return t._hero.silent()}),this._arrow&&this._scenarioBuilder.addAction(function(){return t._arrow.hide()}),this._scenarioBuilder.hideBackdrop(),n.push({animation:new a.FunctionAnimation(function(){return t._scenarioBuilder.build().run()})})),[n]},o}(o.GameActionBuilder);n.CompleteTutorialAnimationBuilder=i,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"CompletionSystem (@tapclap.match-x.engine.systems.completion-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5badcnm0ahcuLVD5cADq3Q1","CompletionSystem (@tapclap.match-x.engine.systems.completion-system)"),n.__esModule=!0,n.CompletionSystem=void 0;var c=function(e){var t,n;function a(t,n){var o,a=void 0===n?{}:n,r=a.actions,i=void 0===r?[]:r,c=a.emptyStateKeys,s=void 0===c?[]:c;return(o=e.call(this)||this)._world=t,o._actions=i,o._emptyStateKeys=s,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r.process=function(){var e=this;if(this._isCompletionPossible()&&this._emptyStateKeys.every(function(t){return!e._world.getState(t)})){this._world.setState(a.STATE,!0);for(var t,n=o(this._actions);!(t=n()).done;)if(t.value.run())return!0}},r._isCompletionPossible=function(){var e=this._world.getComponent("goals");if(!e)throw new Error("Goals component not found in world");return e.isAllGoalsCompleted},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.CompletionSystem=c,c.KEY="completion",c.STATE="completion",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"d823d3WcAxRIrB8MjMogASn","CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),n.__esModule=!0,n.CompletionSystemAction=void 0;var o=function(){function e(){}return e.prototype.run=function(){return!1},e}();n.CompletionSystemAction=o,cc._RF.pop()},{}],"Component (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"4b0eb0y/PlbdZJXOD9+ueOy","Component (@tapclap.match-x.engine.components)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Component=void 0;var o=function(){function e(){this._enable=!0,this._entity=null}return Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){this._enable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){this._entity=e},e.prototype.release=function(){this._entity=null},e.prototype.serialize=function(){return null},e.KEY="undefined",e}();n.Component=o,cc._RF.pop()},{}],"ComponentClassRegister (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"407a3KvurxR86d6uJ53jxQR","ComponentClassRegister (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ComponentClassRegister=void 0;var o,a=e("./InputComponent (@tapclap.match-x.engine.components)"),r=e("./StateComponent (@tapclap.match-x.engine.components.state)"),i=e("./DirectionComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./SwapComponent (@tapclap.match-x.engine.components)"),p=e("./SwapMergeComponent (@tapclap.match-x.engine.components)"),l=e("./CombinationComponent (@tapclap.match-x.engine.components)"),m=e("./GroupComponent (@tapclap.match-x.engine.components)"),u=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),d=e("./ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)"),y=e("./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)"),f=e("./MoveComponent (@tapclap.match-x.engine.components)"),h=e("./DropComponent (@tapclap.match-x.engine.components)"),g=e("./ShuffleComponent (@tapclap.match-x.engine.components)"),v=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),_=e("./AnimationComponent (@tapclap.match-x.engine.components)"),b=e("./EventComponent (@tapclap.match-x.engine.components)"),C=e("./SizeComponent (@tapclap.match-x.engine.components)"),w=e("./HealthComponent (@tapclap.match-x.engine.components)"),S=e("./RandomHealthComponent (@tapclap.match-x.engine.components)"),E=e("./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)"),x=e("./EntityDestroyPoolComponent (@tapclap.match-x.engine.components)"),A=e("./ExplodeOnTapComponent (@tapclap.match-x.engine.components)"),O=e("./GridRandomEntityComponent (@tapclap.match-x.engine.components)"),R=e("./EntityProbabilityComponent (@tapclap.match-x.engine.components)"),P=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),k=e("./MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)"),T=e("./BossMultiplierComponent (@tapclap.match-x.engine.components)"),I=e("./LockComponent (@tapclap.match-x.engine.components)"),M=e("./ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)"),j=e("./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)"),L=e("./TapComponent (@tapclap.match-x.engine.components)"),F=e("./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)"),D=e("./ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)"),B=e("./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)"),G=e("./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)"),N=e("./MultiplierHoldComponent (@tapclap.match-x.engine.components)"),W=e("./GoalCollectionComponent (@tapclap.match-x.engine.components)"),H=e("./GoalAnimationComponent (@tapclap.match-x.engine.components)"),V=e("./GoalComponent (@tapclap.match-x.engine.components)"),K=e("./ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)"),U=e("./TurnComponent (@tapclap.match-x.engine.components)"),Y=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),z=e("./ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)"),q=e("./ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)"),Z=e("./CounterComponent (@tapclap.match-x.engine.components)"),X=e("./MorphOnCounterValueComponent (@tapclap.match-x.engine.components)"),J=e("./ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)"),Q=e("./ValueComponent (@tapclap.match-x.engine.components)"),$=e("./InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)"),ee=e("./MultiplierOnBlastComponent (@tapclap.match-x.engine.components)"),te=e("./StatisticComponent (@tapclap.match-x.engine.components)"),ne=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),oe=e("./ReduceCounterComponent (@tapclap.match-x.engine.components)"),ae=e("./ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)"),re=e("./MorphComponent (@tapclap.match-x.engine.components)"),ie=e("./TutorialComponent (@tapclap.match-x.engine.components)"),ce=e("./EntityPoolComponent (@tapclap.match-x.engine.components)"),se=e("./InputHandlerComponent (@tapclap.match-x.engine.components)"),pe=e("./ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)"),le=e("./ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)"),me=e("./AudioComponent (@tapclap.match-x.engine.components)"),ue=e("./EntityCountLimitComponent (@tapclap.match-x.engine.components)"),de=e("./EntityComponentSetComponent (@tapclap.match-x.engine.components)"),ye=e("./DragComponent (@tapclap.match-x.engine.components)"),fe=e("./MergeComponent (@tapclap.match-x.engine.components)"),he=e("./EmitOnGameStartComponent (@tapclap.match-x.engine.components)"),ge=e("./EmitByStrategyComponent (@tapclap.match-x.engine.components)"),ve=e("./EmitOnTurnComponent (@tapclap.match-x.engine.components)"),_e=e("./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)"),be=e("./EmitOnDeathComponent (@tapclap.match-x.engine.components)"),Ce=e("./EmitTargetComponent (@tapclap.match-x.engine.components)"),we=e("./CanBeCoveredComponent (@tapclap.match-x.engine.components)"),Se=e("./OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)"),Ee=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),xe=e("./WalkComponent (@tapclap.match-x.engine.components)"),Ae=e("./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)"),Oe=e("./ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)"),Re=e("./ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)"),Pe=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),ke=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),Te=e("./ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)"),Ie=e("./GoalAmountComponent (@tapclap.match-x.engine.components)"),Me=e("./EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)"),je=e("./ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)"),Le=e("./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)"),Fe=e("./ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)"),De=e("./ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)"),Be=e("./GroupEntityMapComponent (@tapclap.match-x.engine.components)"),Ge=e("./EmitOnExplodeComponent (@tapclap.match-x.engine.components)"),Ne=e("./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)"),We=e("./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)"),He=e("./EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)"),Ve=e("./FlyOffOnDeathComponent (@tapclap.match-x.engine.components)"),Ke=e("./AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)"),Ue=e("./MergePartComponent (@tapclap.match-x.engine.components)"),Ye=e("./TagComponent (@tapclap.match-x.engine.components)"),ze=e("./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)"),qe=e("./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)"),Ze=e("./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)"),Xe=e("./EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)"),Je=e("./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)"),Qe=e("./PreventWalkPathComponent (@tapclap.match-x.engine.components)"),$e=e("./SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)"),et=e("./NeighborCellsComponent (@tapclap.match-x.engine.components)"),tt=e("./WorldGroupsComponent (@tapclap.match-x.engine.components)"),nt=e("./OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)"),ot=e("./RandomGroupComponent (@tapclap.match-x.engine.components)"),at=e("./ExplodeOneCellComponent (@tapclap.match-x.engine.components)"),rt=e("./PostponeExplodeComponent (@tapclap.match-x.engine.components)"),it=e("./PostponeGoalComponent (@tapclap.match-x.engine.components)"),ct=e("./ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)"),st=e("./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),pt=e("./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),lt=e("./EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)"),mt=e("./RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)"),ut=e("./ExplodeAnimationComponent (@tapclap.match-x.engine.components)"),dt=e("./EmitStageComponent (@tapclap.match-x.engine.components)"),yt=e("./ChangeGoalComponent (@tapclap.match-x.engine.components)"),ft=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),ht=e("./FailWalkComponent (@tapclap.match-x.engine.components)"),gt=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),vt=e("./DimensionsComponent (@tapclap.match-x.engine.components)"),_t=e("./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)"),bt=e("./LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)"),Ct=e("./FailWalkLoseGameComponent (@tapclap.match-x.engine.components)"),wt=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),St=e("./EmitByGroupComponent (@tapclap.match-x.engine.components)"),Et=e("./EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)"),xt=e("./EmitAnimationComponent (@tapclap.match-x.engine.components)"),At=e("./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)"),Ot=e("./RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)"),Rt=e("./LockOnExplodeComponent (@tapclap.match-x.engine.components)"),Pt=e("./EmitAfterEmitComponent (@tapclap.match-x.engine.components)"),kt=e("./AllowWalkComponent (@tapclap.match-x.engine.components)"),Tt=e("./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)"),It=e("./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)"),Mt=e("./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)"),jt=e("./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)"),Lt=e("./PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)"),Ft=e("./OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)"),Dt=e("./ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)"),Bt=e("./PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)"),Gt=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),Nt=e("./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)"),Wt=e("./DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)"),Ht=e("./isExplodedComponent (@tapclap.match-x.engine.components)"),Vt=e("./InCombinationComponent (@tapclap.match-x.engine.components)"),Kt=e("./CoverComponent (@tapclap.match-x.engine.components.cover)"),Ut=e("./AddMovesComponent (@tapclap.match-x.engine.components)"),Yt=e("./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)"),zt=e("./EmitOnEndCounterComponent (@tapclap.match-x.engine.components)"),qt=e("./EntityPrefixComponent (@tapclap.match-x.engine.components)"),Zt=e("./StaticComponent (@tapclap.match-x.engine.components)"),Xt=e("./ForceSwapCoverComponent (@tapclap.match-x.engine.components)"),Jt=e("./ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)"),Qt=e("./ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)"),$t=e("./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)"),en=e("./EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)"),tn=e("./WalkPathComponent (@tapclap.match-x.engine.components)"),nn=e("./WalkOnExplodeComponent (@tapclap.match-x.engine.components)"),on=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),an=e("./FinishTrackComponent (@tapclap.match-x.engine.components)"),rn=e("./TrackComponent (@tapclap.match-x.engine.components)"),cn=e("./WalkOnTrackComponent (@tapclap.match-x.engine.components)"),sn=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),pn=e("./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)"),ln=e("./LockOnWalkFinishComponent (@tapclap.match-x.engine.components)"),mn=e("./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)"),un=e("./ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)"),dn=e("./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)"),yn=e("./ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)"),fn=e("./ExplodedByComponent (@tapclap.match-x.engine.components)"),hn=e("./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)"),gn=e("./ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)"),vn=e("./WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)"),_n=e("./DestroyAfterEmitComponent (@tapclap.match-x.engine.components)"),bn=e("./ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)"),Cn=e("./StartBoostersComponent (@tapclap.match-x.engine.components)"),wn=e("./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)"),Sn=e("./ZIndexComponent (@tapclap.match-x.engine.components)"),En=e("./EntityWrapperContentComponent (@tapclap.match-x.engine.components)"),xn=e("./CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)"),An=e("./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)"),On=e("./LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)"),Rn=((o={input:a.InputComponent})[se.InputHandlerComponent.KEY]=se.InputHandlerComponent,o.state=r.StateComponent,o.direction=i.DirectionComponent,o.turn=U.TurnComponent,o.tiles=c.GridComponent,o.score=Q.ValueComponent,o.moves=Q.ValueComponent,o.stars=Q.ValueComponent,o.goals=W.GoalCollectionComponent,o.goalCollector=Y.GoalCollectorComponent,o[V.GoalComponent.KEY]=V.GoalComponent,o[H.GoalAnimationComponent.KEY]=H.GoalAnimationComponent,o.allies=c.GridComponent,o.enemies=c.GridComponent,o[s.SwapComponent.KEY]=s.SwapComponent,o[Lt.PreventExplodeOnSwapComponent.KEY]=Lt.PreventExplodeOnSwapComponent,o[l.CombinationComponent.KEY]=l.CombinationComponent,o.group=m.GroupComponent,o.explode=u.ExplodeComponent,o.move=f.MoveComponent,o.drop=h.DropComponent,o[ce.EntityPoolComponent.KEY]=ce.EntityPoolComponent,o[g.ShuffleComponent.KEY]=g.ShuffleComponent,o.render=v.RenderComponent,o.animation=_.AnimationComponent,o.size=C.SizeComponent,o[w.HealthComponent.KEY]=w.HealthComponent,o[S.RandomHealthComponent.KEY]=S.RandomHealthComponent,o.entityDestroyPool=x.EntityDestroyPoolComponent,o.entityProbability=R.EntityProbabilityComponent,o.multiplier=P.MultiplierComponent,o.multiplierHold=N.MultiplierHoldComponent,o.lock=I.LockComponent,o.tap=L.TapComponent,o[d.ExplodeOnCombinationComponent.KEY]=d.ExplodeOnCombinationComponent,o[M.ExplodeOnCombinationNeighborComponent.KEY]=M.ExplodeOnCombinationNeighborComponent,o[j.ExplodeOnExplodeNeighborComponent.KEY]=j.ExplodeOnExplodeNeighborComponent,o[y.ExplodeOnBlastComponent.KEY]=y.ExplodeOnBlastComponent,o[J.ExplodeOnBlastNeighborComponent.KEY]=J.ExplodeOnBlastNeighborComponent,o.explodeOnCompletedGoal=K.ExplodeOnCompletedGoalComponent,o.explodeOnSwap=F.ExplodeOnSwapComponent,o.explodeOnTap=A.ExplodeOnTapComponent,o.explodeImmediate=ne.ExplodeImmediateComponent,o.explodeImmediateOnce=ke.ExplodeImmediateOnceComponent,o.explodeOnEndTurn=Te.ExplodeOnEndTurnComponent,o[pe.ExplodeBlastAsCombinationComponent.KEY]=pe.ExplodeBlastAsCombinationComponent,o[le.ExplodeAffectNeighborsComponent.KEY]=le.ExplodeAffectNeighborsComponent,o[k.MultiplierOnCombinationComponent.KEY]=k.MultiplierOnCombinationComponent,o[T.BossMultiplierComponent.KEY]=T.BossMultiplierComponent,o[ee.MultiplierOnBlastComponent.KEY]=ee.MultiplierOnBlastComponent,o[D.ChangeRetrieverOnSwapWithComponent.KEY]=D.ChangeRetrieverOnSwapWithComponent,o[E.ExplodeOnDeathComponent.KEY]=E.ExplodeOnDeathComponent,o[G.RecoveryHealthOnDeathComponent.KEY]=G.RecoveryHealthOnDeathComponent,o[z.ReduceHealthOnCombinationInCellComponent.KEY]=z.ReduceHealthOnCombinationInCellComponent,o[q.ReduceHealthOnCombinationNeighborComponent.KEY]=q.ReduceHealthOnCombinationNeighborComponent,o[oe.ReduceCounterComponent.KEY]=oe.ReduceCounterComponent,o[ae.ReduceCounterOnTurnComponent.KEY]=ae.ReduceCounterOnTurnComponent,o[Z.CounterComponent.KEY]=Z.CounterComponent,o[re.MorphComponent.KEY]=re.MorphComponent,o[X.MorphOnCounterValueComponent.KEY]=X.MorphOnCounterValueComponent,o.explodeOnGround=B.ExplodeOnGroundComponent,o[$.InheritGroupOnSwapComponent.KEY]=$.InheritGroupOnSwapComponent,o[te.StatisticComponent.KEY]=te.StatisticComponent,o[ie.TutorialComponent.KEY]=ie.TutorialComponent,o[O.GridRandomEntityComponent.KEY]=O.GridRandomEntityComponent,o[me.AudioComponent.KEY]=me.AudioComponent,o[ue.EntityCountLimitComponent.KEY]=ue.EntityCountLimitComponent,o[de.EntityComponentSetComponent.KEY]=de.EntityComponentSetComponent,o[ye.DragComponent.KEY]=ye.DragComponent,o[fe.MergeComponent.KEY]=fe.MergeComponent,o[he.EmitOnGameStartComponent.KEY]=he.EmitOnGameStartComponent,o[_e.EmitOnGameCompletionComponent.KEY]=_e.EmitOnGameCompletionComponent,o[ge.EmitByStrategyComponent.KEY]=ge.EmitByStrategyComponent,o[ve.EmitOnTurnComponent.KEY]=ve.EmitOnTurnComponent,o[be.EmitOnDeathComponent.KEY]=be.EmitOnDeathComponent,o[We.EmitOnDeathBeforeMoveComponent.KEY]=We.EmitOnDeathBeforeMoveComponent,o[Ge.EmitOnExplodeComponent.KEY]=Ge.EmitOnExplodeComponent,o[He.EmitOnExplodeBeforeMoveComponent.KEY]=He.EmitOnExplodeBeforeMoveComponent,o[Ce.EmitTargetComponent.KEY]=Ce.EmitTargetComponent,o[It.CanBeReplacedByEmitComponent.KEY]=It.CanBeReplacedByEmitComponent,o[At.CanBeReplacedByWalkComponent.KEY]=At.CanBeReplacedByWalkComponent,o[we.CanBeCoveredComponent.KEY]=we.CanBeCoveredComponent,o[zt.EmitOnEndCounterComponent.KEY]=zt.EmitOnEndCounterComponent,o[Se.OnCounterValueChangeGroupComponent.KEY]=Se.OnCounterValueChangeGroupComponent,o[Ee.TurnStateComponent.KEY]=Ee.TurnStateComponent,o[xe.WalkComponent.KEY]=xe.WalkComponent,o[Ae.WalkOnTurnEndComponent.KEY]=Ae.WalkOnTurnEndComponent,o[Oe.ReduceHealthOnExplodeComponent.KEY]=Oe.ReduceHealthOnExplodeComponent,o[Re.ReduceHealthOnBlastComponent.KEY]=Re.ReduceHealthOnBlastComponent,o[Pe.CellHealthComponent.KEY]=Pe.CellHealthComponent,o[Ie.GoalAmountComponent.KEY]=Ie.GoalAmountComponent,o[Me.EmitMultiplierOnDeathComponent.KEY]=Me.EmitMultiplierOnDeathComponent,o[je.ExplodeLayerOnExplodeComponent.KEY]=je.ExplodeLayerOnExplodeComponent,o[Le.ExplodeLayerOnRemoveComponent.KEY]=Le.ExplodeLayerOnRemoveComponent,o[Fe.ModifyEntityOnDeathComponent.KEY]=Fe.ModifyEntityOnDeathComponent,o[Be.GroupEntityMapComponent.KEY]=Be.GroupEntityMapComponent,o[Ge.EmitOnExplodeComponent.KEY]=Ge.EmitOnExplodeComponent,o[Ne.BossEntityDropComponent.KEY]=Ne.BossEntityDropComponent,o[Ve.FlyOffOnDeathComponent.KEY]=Ve.FlyOffOnDeathComponent,o[Ke.AddScoreOnValueReduceComponent.KEY]=Ke.AddScoreOnValueReduceComponent,o[b.EventComponent.KEY]=b.EventComponent,o[Ue.MergePartComponent.KEY]=Ue.MergePartComponent,o[p.SwapMergeComponent.KEY]=p.SwapMergeComponent,o[Ye.TagComponent.KEY]=Ye.TagComponent,o[ze.ManageComponentsOnSwapComponent.KEY]=ze.ManageComponentsOnSwapComponent,o[qe.EmitOnSwapBeforeExplodeComponent.KEY]=qe.EmitOnSwapBeforeExplodeComponent,o[Ze.EmitInGridEdgeComponent.KEY]=Ze.EmitInGridEdgeComponent,o[Xe.EmitOnConfigurationsComponent.KEY]=Xe.EmitOnConfigurationsComponent,o[Je.EmitOnTurnEndComponent.KEY]=Je.EmitOnTurnEndComponent,o[Qe.PreventWalkPathComponent.KEY]=Qe.PreventWalkPathComponent,o[$e.SkipAfterTurnAnimationComponent.KEY]=$e.SkipAfterTurnAnimationComponent,o[et.NeighborCellsComponent.KEY]=et.NeighborCellsComponent,o[tt.WorldGroupsComponent.KEY]=tt.WorldGroupsComponent,o[nt.OnHealthReduceChangeGroupComponent.KEY]=nt.OnHealthReduceChangeGroupComponent,o[ot.RandomGroupComponent.KEY]=ot.RandomGroupComponent,o[at.ExplodeOneCellComponent.KEY]=at.ExplodeOneCellComponent,o[rt.PostponeExplodeComponent.KEY]=rt.PostponeExplodeComponent,o[it.PostponeGoalComponent.KEY]=it.PostponeGoalComponent,o[ct.ChangeSkinBeforeCollectEntityComponent.KEY]=ct.ChangeSkinBeforeCollectEntityComponent,o[st.TurnCountAfterExplodeComponent.KEY]=st.TurnCountAfterExplodeComponent,o[pt.RecoveryHealthOnReachTurnCountAfterExplodeComponent.KEY]=pt.RecoveryHealthOnReachTurnCountAfterExplodeComponent,o[lt.EmitOnTurnEndAndDeathComponent.KEY]=lt.EmitOnTurnEndAndDeathComponent,o[mt.RecoveryHealthOnEmitComponent.KEY]=mt.RecoveryHealthOnEmitComponent,o[ut.ExplodeAnimationComponent.KEY]=ut.ExplodeAnimationComponent,o[dt.EmitStageComponent.KEY]=dt.EmitStageComponent,o[yt.ChangeGoalComponent.KEY]=yt.ChangeGoalComponent,o[ft.DistanceToGridEdgeComponent.KEY]=ft.DistanceToGridEdgeComponent,o[ht.FailWalkComponent.KEY]=ht.FailWalkComponent,o[gt.WalkDirectionComponent.KEY]=gt.WalkDirectionComponent,o[vt.DimensionsComponent.KEY]=vt.DimensionsComponent,o[_t.DistanceToGridEdgeAnimationComponent.KEY]=_t.DistanceToGridEdgeAnimationComponent,o[bt.LockOnFailWalkInGridEdgeComponent.KEY]=bt.LockOnFailWalkInGridEdgeComponent,o[Ct.FailWalkLoseGameComponent.KEY]=Ct.FailWalkLoseGameComponent,o[Gt.PreventCoverComponent.KEY]=Gt.PreventCoverComponent,o[wt.ExplodeCollectionComponent.KEY]=wt.ExplodeCollectionComponent,o[St.EmitByGroupComponent.KEY]=St.EmitByGroupComponent,o[Et.EmitOnNonGroupExplodeComponent.KEY]=Et.EmitOnNonGroupExplodeComponent,o[xt.EmitAnimationComponent.KEY]=xt.EmitAnimationComponent,o[Ot.RemoveNeighborsOnWalkComponent.KEY]=Ot.RemoveNeighborsOnWalkComponent,o[Rt.LockOnExplodeComponent.KEY]=Rt.LockOnExplodeComponent,o[Pt.EmitAfterEmitComponent.KEY]=Pt.EmitAfterEmitComponent,o[kt.AllowWalkComponent.KEY]=kt.AllowWalkComponent,o[Tt.EntityTypeGroupsComponent.KEY]=Tt.EntityTypeGroupsComponent,o[It.CanBeReplacedByEmitComponent.KEY]=It.CanBeReplacedByEmitComponent,o[Mt.ReplaceEntityOnTurnEndComponent.KEY]=Mt.ReplaceEntityOnTurnEndComponent,o[jt.KeepGoalAfterCompleteComponent.KEY]=jt.KeepGoalAfterCompleteComponent,o[Ft.OnExplodeCombinationNeighborChangeGroupComponent.KEY]=Ft.OnExplodeCombinationNeighborChangeGroupComponent,o[Dt.ExplodeImmediateOnceAfterChangeGroupComponent.KEY]=Dt.ExplodeImmediateOnceAfterChangeGroupComponent,o[Bt.PreventBoosterApplyWithEmptyGroupComponent.KEY]=Bt.PreventBoosterApplyWithEmptyGroupComponent,o[Nt.ExplodeRetrieverComponent.KEY]=Nt.ExplodeRetrieverComponent,o[Wt.DropAfterRemoveComponent.KEY]=Wt.DropAfterRemoveComponent,o[Ht.IsExplodedComponent.KEY]=Ht.IsExplodedComponent,o[Vt.InCombinationComponent.KEY]=Vt.InCombinationComponent,o[tn.WalkPathComponent.KEY]=tn.WalkPathComponent,o[nn.WalkOnExplodeComponent.KEY]=nn.WalkOnExplodeComponent,o[on.StartTrackComponent.KEY]=on.StartTrackComponent,o[an.FinishTrackComponent.KEY]=an.FinishTrackComponent,o[rn.TrackComponent.KEY]=rn.TrackComponent,o[cn.WalkOnTrackComponent.KEY]=cn.WalkOnTrackComponent,o[sn.TrackStorageComponent.KEY]=sn.TrackStorageComponent,o[pn.EmitOnEmptyTrackComponent.KEY]=pn.EmitOnEmptyTrackComponent,o[ln.LockOnWalkFinishComponent.KEY]=ln.LockOnWalkFinishComponent,o[De.ModifyEntityOnChangeGroupComponent.KEY]=De.ModifyEntityOnChangeGroupComponent,o[Kt.CoverComponent.KEY]=Kt.CoverComponent,o[Ut.AddMovesComponent.KEY]=Ut.AddMovesComponent,o[Yt.AddMovesOnExplodeComponent.KEY]=Yt.AddMovesOnExplodeComponent,o[qt.EntityPrefixComponent.KEY]=qt.EntityPrefixComponent,o[Zt.StaticComponent.KEY]=Zt.StaticComponent,o[Xt.ForceSwapCoverComponent.KEY]=Xt.ForceSwapCoverComponent,o[Jt.ExplodeAsCombinationComponent.KEY]=Jt.ExplodeAsCombinationComponent,o[Qt.ExplodeOnCounterEndComponent.KEY]=Qt.ExplodeOnCounterEndComponent,o[$t.EmitOnTurnEndAndCounterEndComponent.KEY]=$t.EmitOnTurnEndAndCounterEndComponent,o[en.EmitAfterRemoveComponent.KEY]=en.EmitAfterRemoveComponent,o[mn.PreventWalkExplodeComponent.KEY]=mn.PreventWalkExplodeComponent,o[un.ExplodeNextOnTrackOnExplodeComponent.KEY]=un.ExplodeNextOnTrackOnExplodeComponent,o[dn.WalkOnNextTrackEntityExplodeComponent.KEY]=dn.WalkOnNextTrackEntityExplodeComponent,o[yn.ExplodeSelfOnNextTrackFinishComponent.KEY]=yn.ExplodeSelfOnNextTrackFinishComponent,o[fn.ExplodedByComponent.KEY]=fn.ExplodedByComponent,o[hn.EmitOnTurnEndAndExplodeComponent.KEY]=hn.EmitOnTurnEndAndExplodeComponent,o[gn.ExplodeDeathEntityComponent.KEY]=gn.ExplodeDeathEntityComponent,o[vn.WalkOnTrackEntityTypeComponent.KEY]=vn.WalkOnTrackEntityTypeComponent,o[_n.DestroyAfterEmitComponent.KEY]=_n.DestroyAfterEmitComponent,o[bn.ShuffleGridOnDeathOnTurnEndComponent.KEY]=bn.ShuffleGridOnDeathOnTurnEndComponent,o[Cn.StartBoostersComponent.KEY]=Cn.StartBoostersComponent,o[wn.NotReplaceByStartBoosterComponent.KEY]=wn.NotReplaceByStartBoosterComponent,o[Sn.ZIndexComponent.KEY]=Sn.ZIndexComponent,o[En.EntityWrapperContentComponent.KEY]=En.EntityWrapperContentComponent,o[xn.CombinationsPrioritiesComponent.KEY]=xn.CombinationsPrioritiesComponent,o[An.ToggleLockOnTurnEndComponent.KEY]=An.ToggleLockOnTurnEndComponent,o[On.LockEmitInGridEdgeComponent.KEY]=On.LockEmitInGridEdgeComponent,o);n.ComponentClassRegister=Rn,cc._RF.pop()},{"./AddMovesComponent (@tapclap.match-x.engine.components)":"AddMovesComponent (@tapclap.match-x.engine.components)","./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)":"AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)","./AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)":"AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)","./AllowWalkComponent (@tapclap.match-x.engine.components)":"AllowWalkComponent (@tapclap.match-x.engine.components)","./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)":"BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)","./BossMultiplierComponent (@tapclap.match-x.engine.components)":"BossMultiplierComponent (@tapclap.match-x.engine.components)","./CanBeCoveredComponent (@tapclap.match-x.engine.components)":"CanBeCoveredComponent (@tapclap.match-x.engine.components)","./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)","./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)","./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ChangeGoalComponent (@tapclap.match-x.engine.components)":"ChangeGoalComponent (@tapclap.match-x.engine.components)","./ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)":"ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)","./ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)":"ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)","./CombinationComponent (@tapclap.match-x.engine.components)":"CombinationComponent (@tapclap.match-x.engine.components)","./CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)":"CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)","./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./CoverComponent (@tapclap.match-x.engine.components.cover)":"CoverComponent (@tapclap.match-x.engine.components.cover)","./DestroyAfterEmitComponent (@tapclap.match-x.engine.components)":"DestroyAfterEmitComponent (@tapclap.match-x.engine.components)","./DimensionsComponent (@tapclap.match-x.engine.components)":"DimensionsComponent (@tapclap.match-x.engine.components)","./DirectionComponent (@tapclap.match-x.engine.components)":"DirectionComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./DragComponent (@tapclap.match-x.engine.components)":"DragComponent (@tapclap.match-x.engine.components)","./DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":"DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","./DropComponent (@tapclap.match-x.engine.components)":"DropComponent (@tapclap.match-x.engine.components)","./EmitAfterEmitComponent (@tapclap.match-x.engine.components)":"EmitAfterEmitComponent (@tapclap.match-x.engine.components)","./EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":"EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","./EmitAnimationComponent (@tapclap.match-x.engine.components)":"EmitAnimationComponent (@tapclap.match-x.engine.components)","./EmitByGroupComponent (@tapclap.match-x.engine.components)":"EmitByGroupComponent (@tapclap.match-x.engine.components)","./EmitByStrategyComponent (@tapclap.match-x.engine.components)":"EmitByStrategyComponent (@tapclap.match-x.engine.components)","./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)":"EmitInGridEdgeComponent (@tapclap.match-x.engine.components)","./EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)":"EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)","./EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)":"EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)","./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)":"EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)","./EmitOnDeathComponent (@tapclap.match-x.engine.components)":"EmitOnDeathComponent (@tapclap.match-x.engine.components)","./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)":"EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)","./EmitOnEndCounterComponent (@tapclap.match-x.engine.components)":"EmitOnEndCounterComponent (@tapclap.match-x.engine.components)","./EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)","./EmitOnExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)":"EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)","./EmitOnGameStartComponent (@tapclap.match-x.engine.components)":"EmitOnGameStartComponent (@tapclap.match-x.engine.components)","./EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnTurnComponent (@tapclap.match-x.engine.components)":"EmitOnTurnComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndComponent (@tapclap.match-x.engine.components)","./EmitStageComponent (@tapclap.match-x.engine.components)":"EmitStageComponent (@tapclap.match-x.engine.components)","./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)","./EntityComponentSetComponent (@tapclap.match-x.engine.components)":"EntityComponentSetComponent (@tapclap.match-x.engine.components)","./EntityCountLimitComponent (@tapclap.match-x.engine.components)":"EntityCountLimitComponent (@tapclap.match-x.engine.components)","./EntityDestroyPoolComponent (@tapclap.match-x.engine.components)":"EntityDestroyPoolComponent (@tapclap.match-x.engine.components)","./EntityPoolComponent (@tapclap.match-x.engine.components)":"EntityPoolComponent (@tapclap.match-x.engine.components)","./EntityPrefixComponent (@tapclap.match-x.engine.components)":"EntityPrefixComponent (@tapclap.match-x.engine.components)","./EntityProbabilityComponent (@tapclap.match-x.engine.components)":"EntityProbabilityComponent (@tapclap.match-x.engine.components)","./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)":"EntityTypeGroupsComponent (@tapclap.match-x.engine.components)","./EntityWrapperContentComponent (@tapclap.match-x.engine.components)":"EntityWrapperContentComponent (@tapclap.match-x.engine.components)","./EventComponent (@tapclap.match-x.engine.components)":"EventComponent (@tapclap.match-x.engine.components)","./ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)":"ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)","./ExplodeAnimationComponent (@tapclap.match-x.engine.components)":"ExplodeAnimationComponent (@tapclap.match-x.engine.components)","./ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)":"ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)":"ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)","./ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastComponent (@tapclap.match-x.engine.components)","./ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)":"ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)","./ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)":"ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)","./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)":"ExplodeOnDeathComponent (@tapclap.match-x.engine.components)","./ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)":"ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)","./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)":"ExplodeOnGroundComponent (@tapclap.match-x.engine.components)","./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)":"ExplodeOnSwapComponent (@tapclap.match-x.engine.components)","./ExplodeOnTapComponent (@tapclap.match-x.engine.components)":"ExplodeOnTapComponent (@tapclap.match-x.engine.components)","./ExplodeOneCellComponent (@tapclap.match-x.engine.components)":"ExplodeOneCellComponent (@tapclap.match-x.engine.components)","./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","./ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)":"ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)","./ExplodedByComponent (@tapclap.match-x.engine.components)":"ExplodedByComponent (@tapclap.match-x.engine.components)","./FailWalkComponent (@tapclap.match-x.engine.components)":"FailWalkComponent (@tapclap.match-x.engine.components)","./FailWalkLoseGameComponent (@tapclap.match-x.engine.components)":"FailWalkLoseGameComponent (@tapclap.match-x.engine.components)","./FinishTrackComponent (@tapclap.match-x.engine.components)":"FinishTrackComponent (@tapclap.match-x.engine.components)","./FlyOffOnDeathComponent (@tapclap.match-x.engine.components)":"FlyOffOnDeathComponent (@tapclap.match-x.engine.components)","./ForceSwapCoverComponent (@tapclap.match-x.engine.components)":"ForceSwapCoverComponent (@tapclap.match-x.engine.components)","./GoalAmountComponent (@tapclap.match-x.engine.components)":"GoalAmountComponent (@tapclap.match-x.engine.components)","./GoalAnimationComponent (@tapclap.match-x.engine.components)":"GoalAnimationComponent (@tapclap.match-x.engine.components)","./GoalCollectionComponent (@tapclap.match-x.engine.components)":"GoalCollectionComponent (@tapclap.match-x.engine.components)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GridRandomEntityComponent (@tapclap.match-x.engine.components)":"GridRandomEntityComponent (@tapclap.match-x.engine.components)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupEntityMapComponent (@tapclap.match-x.engine.components)":"GroupEntityMapComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./InCombinationComponent (@tapclap.match-x.engine.components)":"InCombinationComponent (@tapclap.match-x.engine.components)","./InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)":"InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)","./InputComponent (@tapclap.match-x.engine.components)":"InputComponent (@tapclap.match-x.engine.components)","./InputHandlerComponent (@tapclap.match-x.engine.components)":"InputHandlerComponent (@tapclap.match-x.engine.components)","./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)":"KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)":"LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)","./LockOnExplodeComponent (@tapclap.match-x.engine.components)":"LockOnExplodeComponent (@tapclap.match-x.engine.components)","./LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)":"LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)","./LockOnWalkFinishComponent (@tapclap.match-x.engine.components)":"LockOnWalkFinishComponent (@tapclap.match-x.engine.components)","./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)":"ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)","./MergeComponent (@tapclap.match-x.engine.components)":"MergeComponent (@tapclap.match-x.engine.components)","./MergePartComponent (@tapclap.match-x.engine.components)":"MergePartComponent (@tapclap.match-x.engine.components)","./ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)":"ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)","./ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)":"ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)","./MorphComponent (@tapclap.match-x.engine.components)":"MorphComponent (@tapclap.match-x.engine.components)","./MorphOnCounterValueComponent (@tapclap.match-x.engine.components)":"MorphOnCounterValueComponent (@tapclap.match-x.engine.components)","./MoveComponent (@tapclap.match-x.engine.components)":"MoveComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierHoldComponent (@tapclap.match-x.engine.components)":"MultiplierHoldComponent (@tapclap.match-x.engine.components)","./MultiplierOnBlastComponent (@tapclap.match-x.engine.components)":"MultiplierOnBlastComponent (@tapclap.match-x.engine.components)","./MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)":"MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)","./NeighborCellsComponent (@tapclap.match-x.engine.components)":"NeighborCellsComponent (@tapclap.match-x.engine.components)","./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)":"NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)","./OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)":"OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)","./OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)":"OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)","./OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)":"OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)","./PostponeExplodeComponent (@tapclap.match-x.engine.components)":"PostponeExplodeComponent (@tapclap.match-x.engine.components)","./PostponeGoalComponent (@tapclap.match-x.engine.components)":"PostponeGoalComponent (@tapclap.match-x.engine.components)","./PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)":"PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)","./PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)":"PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)","./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)":"PreventWalkExplodeComponent (@tapclap.match-x.engine.components)","./PreventWalkPathComponent (@tapclap.match-x.engine.components)":"PreventWalkPathComponent (@tapclap.match-x.engine.components)","./RandomGroupComponent (@tapclap.match-x.engine.components)":"RandomGroupComponent (@tapclap.match-x.engine.components)","./RandomHealthComponent (@tapclap.match-x.engine.components)":"RandomHealthComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./ReduceCounterComponent (@tapclap.match-x.engine.components)":"ReduceCounterComponent (@tapclap.match-x.engine.components)","./ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)":"ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)","./RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)":"RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)":"ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)","./ShuffleComponent (@tapclap.match-x.engine.components)":"ShuffleComponent (@tapclap.match-x.engine.components)","./ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)":"ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)","./SizeComponent (@tapclap.match-x.engine.components)":"SizeComponent (@tapclap.match-x.engine.components)","./SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)":"SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)","./StartBoostersComponent (@tapclap.match-x.engine.components)":"StartBoostersComponent (@tapclap.match-x.engine.components)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./StateComponent (@tapclap.match-x.engine.components.state)":"StateComponent (@tapclap.match-x.engine.components.state)","./StaticComponent (@tapclap.match-x.engine.components)":"StaticComponent (@tapclap.match-x.engine.components)","./StatisticComponent (@tapclap.match-x.engine.components)":"StatisticComponent (@tapclap.match-x.engine.components)","./SwapComponent (@tapclap.match-x.engine.components)":"SwapComponent (@tapclap.match-x.engine.components)","./SwapMergeComponent (@tapclap.match-x.engine.components)":"SwapMergeComponent (@tapclap.match-x.engine.components)","./TagComponent (@tapclap.match-x.engine.components)":"TagComponent (@tapclap.match-x.engine.components)","./TapComponent (@tapclap.match-x.engine.components)":"TapComponent (@tapclap.match-x.engine.components)","./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)":"ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)","./TrackComponent (@tapclap.match-x.engine.components)":"TrackComponent (@tapclap.match-x.engine.components)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)","./TurnComponent (@tapclap.match-x.engine.components)":"TurnComponent (@tapclap.match-x.engine.components)","./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)","./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)","./WalkOnExplodeComponent (@tapclap.match-x.engine.components)":"WalkOnExplodeComponent (@tapclap.match-x.engine.components)","./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)":"WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)","./WalkOnTrackComponent (@tapclap.match-x.engine.components)":"WalkOnTrackComponent (@tapclap.match-x.engine.components)","./WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)":"WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)","./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)":"WalkOnTurnEndComponent (@tapclap.match-x.engine.components)","./WalkPathComponent (@tapclap.match-x.engine.components)":"WalkPathComponent (@tapclap.match-x.engine.components)","./WorldGroupsComponent (@tapclap.match-x.engine.components)":"WorldGroupsComponent (@tapclap.match-x.engine.components)","./ZIndexComponent (@tapclap.match-x.engine.components)":"ZIndexComponent (@tapclap.match-x.engine.components)","./isExplodedComponent (@tapclap.match-x.engine.components)":"isExplodedComponent (@tapclap.match-x.engine.components)"}],"ComponentCreator (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"93e59U9QpVbk6XJqoY+ZC8N","ComponentCreator (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ComponentCreator=void 0;var o=function(){function e(){}return e.prototype.create=function(){throw new Error("Method not implemented")},e}();n.ComponentCreator=o,cc._RF.pop()},{}],"ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"7c42bQtSVBfRaeqOc8WODkw","ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentEmitTargetStrategy=void 0;var o=function(){function e(e){var t,n,o;void 0===e&&(e={}),this._exceptedEntityComponents=[],this._excludedEntityComponents=[],this._excludedEntityTypes=[],this._exceptedEntityComponents=null!==(t=e.exceptedEntityComponents)&&void 0!==t?t:this._exceptedEntityComponents,this._excludedEntityComponents=null!==(n=e.excludedEntityComponents)&&void 0!==n?n:this._excludedEntityComponents,this._excludedEntityTypes=null!==(o=e.excludedEntityTypes)&&void 0!==o?o:this._excludedEntityTypes}return e.prototype._isCorrectEntity=function(e,t){void 0===t&&(t=[]);var n=t.includes(e.type),o=this._exceptedEntityComponents.every(function(t){return e.getEnabledComponentByClass(t)}),a=this._excludedEntityComponents.some(function(t){return e.getEnabledComponentByClass(t)});return!n&&o&&!a},e}();n.ComponentEmitTargetStrategy=o,cc._RF.pop()},{}],"ComponentFactory (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c78e7O8/p9VrrQZ37Y8nffT","ComponentFactory (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ComponentFactory=void 0;var o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._componentClasses=e,this._componentCreators=t}return e.prototype.create=function(e,t){if(void 0===t&&(t={}),this._componentCreators[e])return this._componentCreators[e].create(t);if(this._componentClasses[e])return new this._componentClasses[e](t);throw new Error("Not found component by type '"+e+"'")},e}();n.ComponentFactory=o,cc._RF.pop()},{}],"ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"4ae03ftyQZbcapNopH3bBCz","ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)"),n.__esModule=!0,n.ComponentInjectEntityCreateHandler=void 0;var o=e("./EntityComponentSetComponent (@tapclap.match-x.engine.components)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n,o=t.gridComponent;return(n=e.call(this)||this)._gridComponent=o,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.handle=function(e,t){var n=this._gridComponent.grid.getComponent(o.EntityComponentSetComponent.KEY);if(n){var a=n.getComponentsConfig(e);a&&(t.components?Object.assign(t.components,a):Object.assign(t,{components:a}))}},r}(e("./EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)").EntityCreateHandler);n.ComponentInjectEntityCreateHandler=r,cc._RF.pop()},{"./EntityComponentSetComponent (@tapclap.match-x.engine.components)":"EntityComponentSetComponent (@tapclap.match-x.engine.components)","./EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)":"EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)"}],"ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"19558lZLKBUP570dQfJKhOD","ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)"),n.__esModule=!0,n.ComponentShuffleSystemStrategy=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._combinationSystem=t.combinationSystem,n._random=t.random,n._componentKeys=t.componentKeys,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.shuffle=function(e){for(var t=this,n=[],a=[],r=[],i=0;i<e.rows;i++){a.push([]);for(var c=function(n){var o=e.getCell(i,n,!0);o.isFill&&t._componentKeys.every(function(e){return o.getEntity().getEnabledComponent(e)})&&(a[i].push(o),r.push(o.getEntity()),o.setEntity(null))},s=0;s<e.cols;s++)c(s)}this._random.shuffle(r);for(var p=0,l=a;p<l.length;p++){var m=l[p],u=0;do{if(m.forEach(function(e){return e.setEntity(r.pop())}),!(this._combinationSystem.compute(e).length>0&&u<m.length))break;m.forEach(function(e){return r.push(e.getEntity())}),this._random.shuffle(r)}while(u++<m.length);for(var d,y=o(m);!(d=y()).done;){var f=d.value;f.isFill&&n.push({entity:f.getEntity(),path:[f]})}}return n},a}(e("./ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)").ShuffleSystemStrategy);n.ComponentShuffleSystemStrategy=c,cc._RF.pop()},{"./ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)"}],"ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"9f49a4dBxZfXbykJvkuYW75","ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentSwapSystemStrategy=void 0;var r=function(e){function t(t){var n=t.component,o=e.call(this)||this;return o._componentClass=n,o}return a(t,e),t.prototype._getDistance=function(e,t){return Math.sqrt(Math.pow(e.row-t.row,2)+Math.pow(e.col-t.col,2))},t.prototype.canSwap=function(e,t){var n=this;return[e,t].every(function(e){var t;return null===(t=null==e?void 0:e.getEntity())||void 0===t?void 0:t.getEnabledComponentByClass(n._componentClass)})&&1===this._getDistance(e,t)},t.prototype.calculate=function(e,t){return[{cell:e,entity:t.getEntity()},{cell:t,entity:e.getEntity()}]},t}(e("./SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)").SwapSystemStrategy);n.ComponentSwapSystemStrategy=r,cc._RF.pop()},{"./SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)":"SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)"}],"CompositeAction (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9f385U6UC1VEYvCm7cY+LWA","CompositeAction (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.CompositeAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._contextKey=t.contextKey,n._options=n._parseOptions(t),n._actionManager=t.actionManager,n._di=t.di,n._builders=t.builders,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._runActionInstance=function(e,t){void 0===t&&(t={});var n=e.snapshot().mergeArgsWithWrap(Object.assign({},this._options,t)),o=this._di.createFromBuilder(n,{},this._contextKey);return this._actionManager.runInstance(o,this._contextKey+":"+this._builders.indexOf(e))},r._parseOptions=function(e){void 0===e&&(e={});var t=Object.assign({},e);return delete t.contextKey,delete t.actionManager,delete t.di,delete t.builders,t},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.CompositeAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a1584jOhvFXU50tc4jPMGP7","CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),n.__esModule=!0,n.CompositeActionCondition=void 0;var c=function(e){var t,n;function a(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._conditions=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.check=function(){for(var e,t=Promise.resolve(this._conditions.length>0),n=function(){var n=e.value;t=t.then(function(e){return!!e&&n.check()})},a=o(this._conditions);!(e=a()).done;)n();return t},a}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.CompositeActionCondition=c,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"73fefSlLcleiYszKG52mTkK","CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.CompositeAnimation=void 0;var r=function(e){var t,n;function r(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._animations=t,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.add=function(e){this._animations.push(e)},s.run=function(){return e.prototype.run.call(this)},s.stop=function(t){return void 0===t&&(t=!1),t&&this._animations.forEach(function(e){return e.stop()}),e.prototype.stop.call(this)},i=r,(c=[{key:"settled",get:function(){return Promise.all(this._animations.map(function(e){return e.settled}))}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.CompositeAnimation=r,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"80c66LFrSpbgYqAZ0tmsWH5","CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeDevConsoleMenuGenerator=void 0;var i=function(e){function t(t){void 0===t&&(t=[]);var n=e.call(this)||this;return n._generators=t,n}return a(t,e),t.prototype.generate=function(){var e,t,n={};try{for(var o=r(this._generators),a=o.next();!a.done;a=o.next()){var i=a.value;Object.assign(n,i.generate())}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.CompositeDevConsoleMenuGenerator=i,cc._RF.pop()},{"./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":[function(e,t,n){"use strict";cc._RF.push(t,"ec4f75ZJidev4vCuCD1pDgl","CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeEffectVerifier=void 0;var r=function(e){function t(t){void 0===t&&(t=[]);var n=e.call(this)||this;return n._verifiers=[],n._verifiers=t,n}return a(t,e),t.prototype.canApply=function(e,t){return this._verifiers.every(function(n){return n.canApply(e,t)})},t}(e("./EffectVerifier (@tapclap.match-x.engine.effects)").EffectVerifier);n.CompositeEffectVerifier=r,cc._RF.pop()},{"./EffectVerifier (@tapclap.match-x.engine.effects)":"EffectVerifier (@tapclap.match-x.engine.effects)"}],"CompositeGoal (@tapclap.match-x.engine.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"5bd59+n+qNSjau6KyGcoySc","CompositeGoal (@tapclap.match-x.engine.goals)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeGoal=void 0;var r=function(e){function t(t,n){void 0===t&&(t=[]);var o=e.call(this)||this;return o._goals=t,o._type=n,o}return a(t,e),t.prototype.process=function(e){return this._goals.some(function(t){return t.process(e)})},t.prototype.isGoal=function(e){return this._goals.some(function(t){return t.isGoal(e)})},t.prototype.isGoalByType=function(e){return this._goals.some(function(t){return t.isGoalByType(e)})},Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this._goals.every(function(e){return e.isCompleted})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._goals.reduce(function(e,t){return e+t.count},0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"counter",{get:function(){return this.total-this.count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._goals.reduce(function(e,t){return e+t.total},0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return"task-"+this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityTypes",{get:function(){return[this._type]},enumerable:!1,configurable:!0}),t}(e("./Goal (@tapclap.match-x.engine.goals)").Goal);n.CompositeGoal=r,cc._RF.pop()},{"./Goal (@tapclap.match-x.engine.goals)":"Goal (@tapclap.match-x.engine.goals)"}],"CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"8e8f0FcaMhS472YD3NqIRS6","CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)"),n.__esModule=!0,n.CompositeGoalCreator=void 0;var o=e("./GoalCreator (@tapclap.match-x.engine.goals.creators)"),a=e("./CompositeGoal (@tapclap.match-x.engine.goals)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._factory=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.create=function(e){var t=e.goals,n=void 0===t?[]:t,o=e.type;if(!Array.isArray(n)&&!n.length)throw new Error("Goals option must be array");return new a.CompositeGoal(this._createSubGoals(n),o)},i._createSubGoals=function(e){var t=this;return void 0===e&&(e=[]),e.map(function(e){var n=e.type,o=e.options;return t._factory.create(n,o)})},o}(o.GoalCreator);n.CompositeGoalCreator=i,cc._RF.pop()},{"./CompositeGoal (@tapclap.match-x.engine.goals)":"CompositeGoal (@tapclap.match-x.engine.goals)","./GoalCreator (@tapclap.match-x.engine.goals.creators)":"GoalCreator (@tapclap.match-x.engine.goals.creators)"}],"CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e592a8bGwVd5qALvPte/fvE","CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),n.__esModule=!0,n.CompositeProbabilityFilter=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._filters=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.filter=function(e){return this._filters.reduce(function(e,t){return t.filter(e)},e)},a}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.CompositeProbabilityFilter=a,cc._RF.pop()},{"./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"CompositeRemoteConfig (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"d6549hLTdJVaJZDthHRkyA9","CompositeRemoteConfig (@tapclap.sdk-x.remote-config)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeRemoteConfigExtractValueError=n.CompositeRemoteConfig=void 0;var r=function(){function e(e){var t=e.configs,n=void 0===t?[]:t,o=e.defaults,a=void 0===o?{}:o;this._configs=n,this._defaults=a}return e.prototype.init=function(){return this._configs.reduce(function(e,t){return e.then(function(){return t.init()})},Promise.resolve())},e.prototype.fetch=function(){return Promise.resolve()},e.prototype.getBoolean=function(e){return this._getValue(e,"getBoolean")},e.prototype.getInteger=function(e){return this._getValue(e,"getInteger")},e.prototype.getDouble=function(e){return this._getValue(e,"getDouble")},e.prototype.getString=function(e){return this._getValue(e,"getString")},e.prototype.getJSON=function(e){return this._getValue(e,"getJSON")},e.prototype._getValue=function(e,t){var n=Promise.resolve({key:e,value:this._defaults[e]});return this._configs.reduce(function(n,o){return n.then(function(n){return o[t](e).then(function(e){return void 0===e.value?n:e}).catch(function(){return n})})},n).then(function(t){if(void 0===t.value)throw new i("Cannot extract remote config value for key: "+e);return t})},e}();n.CompositeRemoteConfig=r;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(Error);n.CompositeRemoteConfigExtractValueError=i,cc._RF.pop()},{}],"CompositeReplaceOfferStrategy (scripts.offers)":[function(e,t,n){"use strict";cc._RF.push(t,"1e98fOI8mVeFoEkZR8U1u+G","CompositeReplaceOfferStrategy (scripts.offers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositeReplaceOfferStrategy=void 0;var s=function(e){function t(t){var n=e.call(this)||this;return n._offerStrategies=t.strategies||[],n._replaceStrategies=t.replaceStrategies||[],n}return a(t,e),t.prototype.getOffers=function(){var e,t,n,o,a=[];if(this._offerStrategies.length>0)try{for(var i=r(this._offerStrategies),c=i.next();!c.done;c=i.next()){var s=c.value;a.push(s.getOffers())}}catch(m){e={error:m}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}if(this._replaceStrategies.length>0)try{for(var p=r(this._replaceStrategies),l=p.next();!l.done;l=p.next())(s=l.value).isValid()&&(a=s.replaceOffers(a.flat()))}catch(u){n={error:u}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return a.flat()},t.prototype.init=function(){return Promise.all(c(this._offerStrategies,this._replaceStrategies).map(function(e){return e.init()})).then(function(){})},t}(e("./OfferStrategy (@tapclap.game-kit.offer-manager)").OfferStrategy);n.CompositeReplaceOfferStrategy=s,cc._RF.pop()},{"./OfferStrategy (@tapclap.game-kit.offer-manager)":"OfferStrategy (@tapclap.game-kit.offer-manager)"}],"CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e7172KPK6RYHookukNYdcaP","CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)"),n.__esModule=!0,n.CompositeTargetResolver=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._targetResolvers=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.resolveTarget=function(t){for(var n,a=o(this._targetResolvers);!(n=a()).done;){var r=n.value.resolveTarget(t);if(r.length>0)return r}return e.prototype.resolveTarget.call(this,t)},a}(e("./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)").ScenarioTargetResolver);n.CompositeTargetResolver=c,cc._RF.pop()},{"./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)"}],"CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2f614V7w1pZIpK3eIgxuLdw","CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)"),n.__esModule=!0,n.CompositeTurnSelector=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._strategies=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.getTurn=function(e){for(var t,n=o(this._strategies);!(t=n()).done;){var a=t.value.getTurn(e);if(a)return a}return null},a}(e("./TurnSelector (@tapclap.match-x.engine.systems.turn-system)").TurnSelector);n.CompositeTurnSelector=c,cc._RF.pop()},{"./TurnSelector (@tapclap.match-x.engine.systems.turn-system)":"TurnSelector (@tapclap.match-x.engine.systems.turn-system)"}],"CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"46f25QOI+xTiLY1gkWR6I3f","CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)"),n.__esModule=!0,n.CompositeTurnStrategy=void 0;var c=function(e){var t,n;function a(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._strategies=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.compute=function(e,t){for(var n,a=o(this._strategies);!(n=a()).done;){var r=n.value.compute(e,t);if(r.length>0)return r}return[]},a}(e("./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)").TurnStrategy);n.CompositeTurnStrategy=c,cc._RF.pop()},{"./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)":"TurnStrategy (@tapclap.match-x.engine.systems.turn-system)"}],"ConditionalAction (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3350aFx61NS16LqIAXylFEm","ConditionalAction (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.ConditionalAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._condition=t.condition,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this,t=function(t){if(e._caller.has(t))return e._caller.run(t)};return Promise.resolve().then(function(){return e._condition.check()}).then(function(e){return t(e?a.CALLER_TRUE:a.CALLER_FALSE)})},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.ConditionalAction=a,a.CALLER_TRUE="true",a.CALLER_FALSE="false",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ConfigService (@tapclap.game-kit.config-service)":[function(e,t,n){"use strict";cc._RF.push(t,"bb8e5T+GAdVE5RrVUVNVgj6","ConfigService (@tapclap.game-kit.config-service)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigService=void 0;var r=".",i=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._config=e,this._separator=t.separator||r}return e.prototype._getKeys=function(e){return e.split(this._separator)},e.prototype._getValue=function(e,t,n){void 0===n&&(n=!1);for(var o=this._getKeys(e),a=t,r=0;r<o.length;r++){var i=o[r];if(void 0===a[i]){if(!n)return;a[i]={}}a=a[i]}return a},e.prototype.getValue=function(e){return this._getValue(e,this._config)},e.prototype.init=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e}();n.ConfigService=i,cc._RF.pop()},{}],"ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)":[function(e,t,n){"use strict";cc._RF.push(t,"01c5aFgskFRvLCC5K+Yub5J","ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigurableClickhouseAnalyticsProvider=void 0;var i=function(e){function t(t){var n=e.call(this,{provider:t.provider})||this;return n._remoteConfig=t.remoteConfig,n._apiUrlConfigKey=t.apiUrlConfigKey,n._eventPrefixConfigKey=t.eventPrefixConfigKey,n}return a(t,e),t.prototype.init=function(){var e=this;return Promise.all([this._remoteConfig.getString(this._apiUrlConfigKey),this._remoteConfig.getString(this._eventPrefixConfigKey)]).then(function(t){var n=r(t,2),o=n[0].value,a=n[1].value;e._provider.setApiUrl(o),e._provider.setEventPrefix(a)}).then(function(){return e._provider.init()})},t}(e("./ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)").ProxyAnalyticsProvider);n.ConfigurableClickhouseAnalyticsProvider=i,cc._RF.pop()},{"./ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)":"ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)"}],"ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)":[function(e,t,n){"use strict";cc._RF.push(t,"56f92n9fehR5IBSZw9WxNyB","ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ConfigurableGrowthbookRemoteConfig=void 0;var i=function(e){function t(t){var n=e.call(this,{config:t.config})||this;return n._remoteConfig=t.remoteConfig,n._apiUrlConfigKey=t.apiUrlConfigKey,n._apiKeyConfigKey=t.apiKeyConfigKey,n}return a(t,e),t.prototype.init=function(){var t=this;return Promise.all([this._remoteConfig.getString(this._apiUrlConfigKey),this._remoteConfig.getString(this._apiKeyConfigKey)]).then(function(e){var n=r(e,2),o=n[0].value,a=n[1].value;t._config.setApiUrl(o),t._config.setApiKey(a)}).then(function(){return e.prototype.init.call(t)})},t}(e("./ProxyRemoteConfig (@tapclap.sdk-x.remote-config)").ProxyRemoteConfig);n.ConfigurableGrowthbookRemoteConfig=i,cc._RF.pop()},{"./ProxyRemoteConfig (@tapclap.sdk-x.remote-config)":"ProxyRemoteConfig (@tapclap.sdk-x.remote-config)"}],"ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":[function(e,t,n){"use strict";cc._RF.push(t,"f2b17ja8LxVHaonXCH5C/sK","ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ContentAnimationComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._coinRewardsNumber=0,t._coinsSpawnRadius=0,t._coinsAnimationSpeedRange=0,t._coinsZeroPosition=new cc.Vec2,t._labelAppearanceDelay=0,t._labelDisappearanceDelay=0,t._questionMark=null,t}return a(t,e),Object.defineProperty(t.prototype,"coinRewardsNumber",{get:function(){return this._coinRewardsNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coinsSpawnRadius",{get:function(){return this._coinsSpawnRadius},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coinsAnimationSpeedRange",{get:function(){return this._coinsAnimationSpeedRange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coinsZeroPosition",{get:function(){return this._coinsZeroPosition},enumerable:!1,configurable:!0}),t.prototype.runIconAnimation=function(){return Promise.resolve()},t.prototype.runLabelAppearance=function(){return Promise.resolve()},t.prototype.runLabelDisappearance=function(){return Promise.resolve()},t.prototype.runDelay=function(){return Promise.resolve()},t.prototype.enableAlternativeLabelSettings=function(e){var t=e.labelNode,n=e.labelAppearanceDelay,o=e.labelDisappearanceDelay,a=e.labelZeroPosition,r=t.getPosition();this._labelAppearanceDelay=n,this._labelDisappearanceDelay=o,t.setPosition(r.x+a.x,r.y+a.y)},t.prototype.setActiveQuestionMark=function(e){this._questionMark.active=e},r([s({visible:!0,min:0})],t.prototype,"_coinRewardsNumber",void 0),r([s({visible:!0,min:0})],t.prototype,"_coinsSpawnRadius",void 0),r([s({visible:!0,min:0,max:1})],t.prototype,"_coinsAnimationSpeedRange",void 0),r([s({visible:!0})],t.prototype,"_coinsZeroPosition",void 0),r([s({visible:!0,min:0})],t.prototype,"_labelAppearanceDelay",void 0),r([s({visible:!0,min:0})],t.prototype,"_labelDisappearanceDelay",void 0),r([s({type:cc.Node,visible:!0})],t.prototype,"_questionMark",void 0),r([c],t)}(cc.Component);n.ContentAnimationComponent=p,cc._RF.pop()},{}],"ContentWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"c8fcff3f1hdHK1UZSeEHj8m","ContentWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ContentWindowLayoutComponent=void 0;var s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._controlHolder=null,t._controls={},t}return a(t,e),t.prototype.initialize=function(t){var n,o;if(void 0===t&&(t={}),e.prototype.initialize.call(this,t),void 0!==t.spacing){var a=this._controlHolder;a&&(a.spacingX=t.spacing,a.spacingY=t.spacing)}if(t.controls)try{for(var r=i(Object.entries(t.controls)),s=r.next();!s.done;s=r.next()){var p=c(s.value,2),l=p[0],m=p[1];this._controls[l]=this._instantiateControl(this._controlHolder.node,m)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},t.prototype.getControl=function(e){return this._controls[e]},t.prototype.toggleControl=function(e,t){var n=this.getControl(e);n&&(n.node.active=t)},t.prototype.show=function(e){void 0===e&&(e=0),this.node.runAction(cc.scaleTo(e,1,1))},t.prototype.hide=function(e){void 0===e&&(e=0),this.node.runAction(cc.scaleTo(e,1,0))},r([m({type:cc.Layout,visible:!0})],t.prototype,"_controlHolder",void 0),r([l],t)}(s.WindowLayoutComponent);n.ContentWindowLayoutComponent=u,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"ContextManager (@tapclap.game-kit.context-manager)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7e25255aqJKj5k28yiPaT1d","ContextManager (@tapclap.game-kit.context-manager)"),n.__esModule=!0,n.ContextManager=void 0;var a=function(e){var t,n;function a(){var t;return(t=e.call(this)||this)._scene=null,t._window=null,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.setScene=function(e){this._scene=e},r.setWindow=function(e){this._window=e},r.serialize=function(){return{scene:this._scene,window:this._window}},r.getString=function(){return[this._scene,this._window].filter(function(e){return e}).join(":")},a}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.ContextManager=a,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"ControlComponent (@tapclap.game-kit.ui.controls)":[function(e,t,n){"use strict";cc._RF.push(t,"d0762SNf1NEFpgcpeeS/EpQ","ControlComponent (@tapclap.game-kit.ui.controls)"),n.__esModule=!0,n.ControlComponent=void 0;var o,a,r,i,c,s,p,l=e("./EventEmitter (@tapclap.utils-js.events)");function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.menu,w=_.property,S=(o=C("UI-Kit/Controls/ControlComponent"),a=w({visible:!0}),r=w({type:cc.Material,visible:function(){return this._grayscaleOnDisabled}}),b(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._events=new l.EventEmitter,t._interactable=!0,t._disableButton=!1,y(t,"_grayscaleOnDisabled",s,h(t)),y(t,"_grayscaleMaterial",p,h(t)),t._renderComponentsMap=new Map,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a,r,i=o.prototype;return i._emitEvent=function(e,t){var n=this;e&&this._interactable&&!this._disableButton&&(this._interactable=!1,Promise.resolve().then(function(){return n.events.emit(e,t)}).finally(function(){return n._interactable=!0}))},i.setActive=function(e){this.node.active=e},i.setInteractable=function(e){this._interactable=e},i.setGrayscale=function(e){for(var t,n=m(this.getComponentsInChildren(cc.RenderComponent));!(t=n()).done;){var o=t.value;if(e)this._grayscaleMaterial&&(this._renderComponentsMap.set(o,o.getMaterial(0)),o.setMaterial(0,this._grayscaleMaterial));else{var a=this._renderComponentsMap.get(o);a&&(o.setMaterial(0,a),this._renderComponentsMap.delete(o))}}},i.setDisabled=function(e){this._disableButton=e,this._grayscaleOnDisabled&&this.setGrayscale(this._disableButton)},i.initialize=function(e){void 0===e&&(e={}),e.width&&(this.node.width=e.width),e.height&&(this.node.height=e.height)},a=o,(r=[{key:"interactable",get:function(){return this._interactable}},{key:"events",get:function(){return this._events}}])&&f(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),s=v(c.prototype,"_grayscaleOnDisabled",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=v(c.prototype,"_grayscaleMaterial",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i)||i);n.ControlComponent=S,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"803a0Kozw1VJI2P1+b5W6AM","CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CottonEmitTargetStrategy=void 0;var r=e("./EmitTargetComponent (@tapclap.match-x.engine.components)"),i=e("./Entity (@tapclap.match-x.engine.entities)"),c=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),s=function(e){function t(t){var n=t.random,o=t.defaultLayer,a=void 0===o?i.Entity.LAYER_UPPER:o,r=e.call(this)||this;return r._random=n,r._defaultLayer=a,r}return a(t,e),t.prototype.getEmitTarget=function(e){var t=this,n=e.entity,o=e.grid,a=e.trigger,i=n.getEnabledComponent(a);if(i){var s=i.groupKey,p=new Set;o.forEachEntities(function(e,t){var n=e.getEnabledComponent(a);n&&n.groupKey===s&&p.add(t)});var l=new c.NeighborRetriever({chunk:Array.from(p.values())}).retrieve(o);return this._random.shuffle(l.flat()).find(function(e){var o=n.getEnabledComponentByClass(r.EmitTargetComponent),a=o.layer||t._defaultLayer;if(!e.getEntity(a)&&e.isEnabled){if(o){if(e.entities.some(function(e){return o.excludeEntityTypes.includes(e.type)}))return!1;if(o.includeEntityTypes.length>0)return e.entities.some(function(e){return o.includeEntityTypes.includes(e.type)})}return!0}return!1})}},t}(e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitTargetStrategy);n.CottonEmitTargetStrategy=s,cc._RF.pop()},{"./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)","./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)"}],"CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":[function(e,t,n){"use strict";cc._RF.push(t,"19a23/zx9ND2biCIKCR1vcR","CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),n.__esModule=!0,n.CountableAttemptsState=void 0;var o=e("./AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=5,i=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._item=t.item,n._max=t.max||r,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=o.prototype;return i._addValue=function(e){var t=this._item,n=t.spec,o=t.name,a=Math.min(Math.max(0,this._item.amount+e),this.getMaxAttempts())-this._item.amount,r=this._userItemManager.create({spec:n,name:o,amount:Math.abs(a)});a>0&&this._item.amount<this.getMaxAttempts()&&this._userItemManager.charge([r]),a<0&&this._item.amount>0&&this._userItemManager.spend([r])},i.getCountAttempts=function(){return Math.min(this._item.amount,this.getMaxAttempts())},i.getMaxAttempts=function(){return this._max},i.hasMaxAttempts=function(){return!0},i.isMaxAttempts=function(){return this.getCountAttempts()===this.getMaxAttempts()},i.hasAttempt=function(){return this.getCountAttempts()>0},i.decrease=function(){this._addValue(-1)},i.increase=function(){this._addValue(1)},o}(o.AttemptsState);n.CountableAttemptsState=i,cc._RF.pop()},{"./AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)":"AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)"}],"CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)":[function(e,t,n){"use strict";cc._RF.push(t,"2debc+a3+lXK6enaXSj4yrC","CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)"),Object.defineProperty(n,"__esModule",{value:!0}),n.CountableMetaTask=void 0;var o=function(){function e(e){void 0===e&&(e={total:0,value:0}),this._total=0,this._value=0,this._prevValue=0,this._total=void 0!==e.total?e.total:this._total,this._value=void 0!==e.value?e.value:this._value,this._prevValue=this._value}return Object.defineProperty(e.prototype,"total",{get:function(){return this._total},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._prevValue=this._value,this._value=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._prevValue},set:function(e){this._prevValue=e},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._value>=this._total},e.prototype.reset=function(){this._value=0,this._prevValue=0},e.prototype.onEvent=function(){this.value=this.value+1},e}();n.CountableMetaTask=o,cc._RF.pop()},{}],"CountableUserItem (@tapclap.game-kit.user-item-manager.items)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4f8baZpvzdZLq0M5CpPIWCP","CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),n.__esModule=!0,n.CountableUserItem=void 0;var r=function(e){var t,n;function r(t,n){var o;return void 0===n&&(n={}),(o=e.call(this,t,Object.assign({amount:t.amount||0},n))||this)._min=void 0===t.min?0:t.min,o._max=void 0===t.max?1/0:t.max,o.amount=t.amount||0,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.merge=function(e){return this._instanceAssert(e),this.amount=this.amount+e.amount,this},s.substract=function(e){return this._instanceAssert(e),this.amount=this.amount-e.amount,this},s.replace=function(e){return this._instanceAssert(e),this.amount=e.amount,this},s.serialize=function(){return Object.assign(e.prototype.serialize.call(this),{amount:this._model.amount})},s._instanceAssert=function(e){if(!(e instanceof r))throw new Error("Passed model is not instance of CountableUserItemModel")},i=r,(c=[{key:"amount",get:function(){return this._model.amount},set:function(e){this._model.amount=Math.min(this._max,Math.max(this._min,e))}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./UserItem (@tapclap.game-kit.user-item-manager)").UserItem);n.CountableUserItem=r,r.KEY="countable",cc._RF.pop()},{"./UserItem (@tapclap.game-kit.user-item-manager)":"UserItem (@tapclap.game-kit.user-item-manager)"}],"CounterAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2b8e1aUrzlSIJ67Z8p+rtGF","CounterAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.CounterAnimation=void 0;var a=function(e){var t,n;function a(t,n,o,a){var r;return void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=function(){}),(r=e.call(this)||this)._value=t,r._prevValue=n,r._duration=o,r._callback=a,r._tween=null,r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.run=function(){var t=this,n={progress:function(e,n,o,a){var r=Math.ceil(e+(n-e)*a);return t._callback(r),r}};return this._tween=cc.tween({value:this._prevValue}).to(this._duration,{value:this._value},n).call(function(){return t._resolve()}).start(),e.prototype.run.call(this)},r.stop=function(){return this._tween.stop(),e.prototype.stop.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.CounterAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"CounterComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c35b6B4T/lVNpegK4gS7xCb","CounterComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.CounterComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return void 0===t&&(t={value:12,step:1}),(n=e.call(this,t)||this)._step=t.step||1,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"step",get:function(){return this._step}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./ValueComponent (@tapclap.match-x.engine.components)").ValueComponent);n.CounterComponent=r,r.KEY="counter",cc._RF.pop()},{"./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)"}],"CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"0b2a5Ntk4pe2oIw1P21ogOk","CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),n.__esModule=!0,n.CounterRenderDecorator=void 0;var o=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),a=e("./CounterComponent (@tapclap.match-x.engine.components)"),r=e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.decorate=function(e,t,n){var o=n.getComponent(r.StepCounterViewComponent),i=t.getEnabledComponent(a.CounterComponent.KEY);i&&o&&o.setValue(i.getValue())},o}(o.EntityRenderDecorator);n.CounterRenderDecorator=c,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)"}],"CounterSystem (@tapclap.match-x.engine.systems.counter-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5131eLzOA1UKrDfokC9T2IV","CounterSystem (@tapclap.match-x.engine.systems.counter-system)"),n.__esModule=!0,n.CounterSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return(o=e.call(this)||this)._world=t,o._updateCounterStrategies=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.process=function(){for(var e,t=o(this._updateCounterStrategies);!(e=t()).done;)e.value.updateOnProcess();return!1},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.CounterSystem=c,c.KEY="counterSystem",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"CoverComponent (@tapclap.match-x.engine.components.cover)":[function(e,t,n){"use strict";cc._RF.push(t,"10383rmKaZVl7miIzFkACbO","CoverComponent (@tapclap.match-x.engine.components.cover)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CoverComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="cover",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.CoverComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"145b3ASdjNc3JOpTtAVf4K1","CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.CoverEntitySystem=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._strategies=[],n._needleStates=[],n._world=t.world,n._coverEntityType=t.coverEntityType,n._entitySystem=t.entitySystem,n._strategies=t.strategies,n._needleStates=t.needleStates,n}return a(t,e),t.prototype.process=function(){var e,n,o,a,i=this,c=[];if(this._needleStates.some(function(e){return i._world.getState(e)})){try{for(var s=r(this._strategies),p=s.next();!p.done;p=s.next()){var l=p.value.process(this._world);try{for(var m=(o=void 0,r(l)),u=m.next();!u.done;u=m.next()){var d=u.value,y=this._coverCell(d);y&&c.push(y)}}catch(f){o={error:f}}finally{try{u&&!u.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}}}catch(h){e={error:h}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}c.length>0&&this._world.setState(t.STATE,c)}return!1},t.prototype._coverCell=function(e){var t=this._entitySystem.createEntity(this._coverEntityType);return e.cell.setEntity(t,t.layer),Object.assign({entity:t},e)},t.KEY="coverEntity",t.STATE="coverEntity",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.CoverEntitySystem=i,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"9e433MudUpTO6sOcgqjyEfU","CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.CoverEntitySystemStrategy=void 0;var o=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),a=e("./CoverComponent (@tapclap.match-x.engine.components.cover)"),r=function(){function e(){}return e.prototype._isCellsHasCover=function(e){var t=this;return e.some(function(e){return t._hasCoverEntityInCell(e)})},e.prototype._hasCoverEntityInCell=function(e){return e.entities.some(function(e){return e.getEnabledComponentByClass(a.CoverComponent)})},e.prototype._canCoverCell=function(e){var t=e.entities.some(function(e){return e.getEnabledComponentByClass(o.PreventCoverComponent)}),n=this._hasCoverEntityInCell(e);return!t&&!n},e}();n.CoverEntitySystemStrategy=r,cc._RF.pop()},{"./CoverComponent (@tapclap.match-x.engine.components.cover)":"CoverComponent (@tapclap.match-x.engine.components.cover)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)"}],"CoverGoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"870cenOXudeOpWlJ+WT+V9D","CoverGoalCreator (@tapclap.match-x.engine.goals.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CoverGoalCreator=void 0;var r=e("./StaticComponent (@tapclap.match-x.engine.components)"),i=e("./SimpleGoal (@tapclap.match-x.engine.goals)"),c=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype.create=function(e){var t=e.entityType,n=(e.total,this._world.getComponent("tiles").grid),o=new Set,a=new Set;return n.forEachEntities(function(e,n){e.type===t&&o.add(e),n.isEnabled&&(n.entities.find(function(e){return e.getComponentByClass(r.StaticComponent)})||a.add(n))}),new i.SimpleGoal(t,a.size,o.size)},t}(e("./GoalCreator (@tapclap.match-x.engine.goals.creators)").GoalCreator);n.CoverGoalCreator=c,cc._RF.pop()},{"./GoalCreator (@tapclap.match-x.engine.goals.creators)":"GoalCreator (@tapclap.match-x.engine.goals.creators)","./SimpleGoal (@tapclap.match-x.engine.goals)":"SimpleGoal (@tapclap.match-x.engine.goals)","./StaticComponent (@tapclap.match-x.engine.components)":"StaticComponent (@tapclap.match-x.engine.components)"}],"CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0a1f19lMcBfVKXmHqkAQ+yl","CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)"),n.__esModule=!0,n.CraftMetaModule=void 0;var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._partOnLevels=t.partOnLevels,n._thingMustCrafted=!1,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.getPartResource=function(e){return this._resources.get(e.toString())},s.getPartNumber=function(e){return this._partOnLevels.indexOf(e)},s.getOpenedPartsCount=function(e){return this._partOnLevels.filter(function(t){return e>t}).length},s.isFinalPart=function(e){return this._partOnLevels.indexOf(e)===this._partOnLevels.length-1},s.hasPartOnLevel=function(e){return this._partOnLevels.includes(e)},s.setThingMustCrafted=function(){this._thingMustCrafted=!0},s.isThingMustCrafted=function(){return this._thingMustCrafted},s.resetThingMustCrafted=function(){this._thingMustCrafted=!1,this.events.emit("reset")},i=r,(c=[{key:"partOnLevels",get:function(){return this._partOnLevels}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.CraftMetaModule=r,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"81bb7bcpBxTabejzt0osIoH","CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)"),n.__esModule=!0,n.CraftResourceHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handleFile=function(e,t){return this._setResourceToModule(t.dest,t.src),Promise.resolve([])},a}(e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)").MetaModuleResourceHandler);n.CraftResourceHandler=a,cc._RF.pop()},{"./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"}],"CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d68f1AWFldenJfIkgNVdNO+","CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),n.__esModule=!0,n.CraftWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._progress=t.moduleResolvers.progress.get(),n._episodes=t.moduleResolvers.episodes.get(),n._craft=t.moduleResolvers.craft.get(),n._caller=t.caller,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this._progress.value-1,t=this._episodes.getRelativeLevel(e),n=this._episodes.getEpisodeByLevel(e);return this._progress.hasChange&&this._craft.hasPartOnLevel(t)||this._craft.isThingMustCrafted()?this._caller.run("default",{episodeNumber:n,levelNumber:t}):Promise.resolve()},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.CraftWindowAction=a,a.CALLER_DEFAULT="default",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"381518/C2tXfau0yK8V/ZmV","CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CraftWindowSceneResourcesResolver=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._windowKeys=t.windowKeys,n._progress=t.moduleResolvers.progress.get(),n._episodes=t.moduleResolvers.episodes.get(),n._craft=t.moduleResolvers.craft.get(),n}return a(t,e),t.prototype.getLoadTasks=function(e){var t=this._progress.value-1,n=this._episodes.getRelativeLevel(t);return this._progress.hasChange&&this._craft.hasPartOnLevel(n)||this._craft.isThingMustCrafted()?this._createTasks(this._windowKeys,e.windowConfig):Promise.resolve([])},t}(e("./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)").SceneResourcesResolver);n.CraftWindowSceneResourcesResolver=r,cc._RF.pop()},{"./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"CurrencyFormatter (@tapclap.game-kit.ui.formatters)":[function(e,t,n){"use strict";cc._RF.push(t,"f2acco+o3JImZ7BVpnhAnSd","CurrencyFormatter (@tapclap.game-kit.ui.formatters)"),n.__esModule=!0,n.CurrencyFormatter=void 0;var o=function(){function e(){}return e.format=function(e,t){return e+" "+({RUB:"\u20bd",USD:"$"}[t]||t)},e}();n.CurrencyFormatter=o,cc._RF.pop()},{}],"CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4f824kSYMRWJL6vfom0erV6","CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)"),n.__esModule=!0,n.CurrencyPaymentProvider=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._providers=t,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.init=function(){return Promise.all(Object.values(this._providers).map(function(e){return e.init().catch(function(){})}))},r.getProducts=function(e){for(var t=this,n=[],o=function(){var o=r[a];n.push(t._providers[o].getProducts(e.filter(function(e){return e.currencyType===o})).catch(function(){return[]}))},a=0,r=Object.keys(this._providers);a<r.length;a++)o();return Promise.resolve().then(function(){return Promise.all(n)}).then(function(e){var t;return(t=[]).concat.apply(t,e)})},r.getPurchases=function(){var e=this;return Promise.resolve().then(function(){return Promise.all(Object.values(e._providers).map(function(e){return e.getPurchases().catch(function(){return[]})}))}).then(function(e){var t;return(t=[]).concat.apply(t,e)})},r.purchase=function(e){var t=this._providers[e.currencyType];if(t)return t.purchase(e);new Error("Not found PaymentProvider by type: "+e.currencyType)},r.consume=function(e){var t=Object.values(this._providers).find(function(t){return t.getType()===e.type});if(t)return t.consume(e);throw new Error("Not found PurchaseProvider by type: "+e.type)},r.isAvailable=function(){for(var e=0,t=Object.values(this._providers);e<t.length;e++)if(!t[e].isAvailable())return!1;return!0},a}(e("./PaymentProvider (@tapclap.sdk-x.payment-service)").PaymentProvider);n.CurrencyPaymentProvider=a,cc._RF.pop()},{"./PaymentProvider (@tapclap.sdk-x.payment-service)":"PaymentProvider (@tapclap.sdk-x.payment-service)"}],"CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"25f07atvpFZYJliF11wC7RF","CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)"),n.__esModule=!0,n.CurrentEpisodeNumberScenarioKeyResolver=void 0;var a=function(e){var t,n;function a(t){var n,o=t.metaModuleResolver,a=t.keys,r=void 0===a?[]:a;return(n=e.call(this,{keys:r})||this)._metaModuleResolver=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.resolve=function(e){return this._isValidKey(e)?e+":"+this._metaModuleResolver.get().getCurrentEpisode():e},a}(e("./ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)").ScenarioKeyResolver);n.CurrentEpisodeNumberScenarioKeyResolver=a,cc._RF.pop()},{"./ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)":"ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)"}],"CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3c2a6FmafhFuZnKTkS7Mozj","CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)"),n.__esModule=!0,n.CurrentEpisodeTranslationSegmentProvider=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._metaGameManager=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getSegment=function(){var e=this._metaGameManager.getCurrentMetaGame();if(e){var t=e.getModule("episodes");if(t)return t.getCurrentEpisode().toString()}return""},a}(e("./I18N (@tapclap.game-kit.i18n)").TranslationSegmentProvider);n.CurrentEpisodeTranslationSegmentProvider=a,cc._RF.pop()},{"./I18N (@tapclap.game-kit.i18n)":"I18N (@tapclap.game-kit.i18n)"}],"CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"44352ocVwBcq5iP+Wr6uuM9","CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)"),n.__esModule=!0,n.CurrentGroupAffectNeighborStrategy=void 0;var o=e("./GroupComponent (@tapclap.match-x.engine.components)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.compare=function(e,t,n){var a,r=null==(a=n.getEnabledComponentByClass(o.GroupComponent))?void 0:a.id;if(r>0)return t.getComponent("group").id===r},r}(e("./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)").AffectNeighborStrategy);n.CurrentGroupAffectNeighborStrategy=r,cc._RF.pop()},{"./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)":"AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)":[function(e,t,n){"use strict";cc._RF.push(t,"d2080ESAxVU6K6YCeGwXRq/","CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CurrentLevelMetaModule=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e){this._value=e},t.prototype.resetState=function(){this._value=null},t}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.CurrentLevelMetaModule=r,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"DI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";cc._RF.push(t,"416556aaxNDHriPe/LVHrUs","DI (@tapclap.utils-js.di)"),n.__esModule=!0,n.di=n.DI=void 0;var o=e("./InstanceBuilderDI (@tapclap.utils-js.di)"),a=e("./InstanceReferenceDI (@tapclap.utils-js.di)"),r=e("./InstanceContainerDI (@tapclap.utils-js.di)"),i=e("./InstanceRawDI (@tapclap.utils-js.di)"),c=e("./InstanceFunctionDI (@tapclap.utils-js.di)"),s=e("./InstanceObjectDI (@tapclap.utils-js.di)");function p(){return(p=l()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&m(a,n.prototype),a}).apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(){function e(e){void 0===e&&(e={}),this._config=e,this._singletons={}}var t=e.prototype;return t.configure=function(e){this._config=e},t.getConfig=function(e){return this._config[e]},t.setSingleton=function(e,t){this._singletons[e]=t},t.getSingleton=function(e){return this._singletons[e]},t.create=function(e,t){return void 0===t&&(t={}),this.createFromBuilder(this._config[e],t,e)},t.createFromBuilder=function(e,t,n){if(void 0===t&&(t={}),e instanceof o.InstanceBuilderDI)return new r.InstanceContainerDI(this,n).configure({ctx:t}).createInstance(e);if(e instanceof c.InstanceFunctionDI||e instanceof s.InstanceObjectDI)return new r.InstanceContainerDI(this,n).processParam(e);throw new Error(n+" must be InstanceBuilderDI")},e.instance=function(e){var t=new o.InstanceBuilderDI;e&&t.ctor(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.length>0&&t.args.apply(t,a),t},e.singleton=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return this.instance.apply(this,arguments).singleton()},e.self=function(){return this.instance().ref(new a.InstanceReferenceDI)},e.cfg=function(e){if(!e)throw new Error("Key must be a string");return this.instance().ref(new a.InstanceReferenceDI(e))},e.ctx=function(e){return this.instance().ref(new a.InstanceReferenceDI(e,!1))},e.from=function(e){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return(t=this.instance().from(e)).mergeArgs.apply(t,o)},e.fromBuilder=function(e){return this.instance().fromBuilder(e)},e.fromCtx=function(e){return this.instance().fromCtx(e)},e.raw=function(e){return new i.InstanceRawDI(e)},e.function=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return p(c.InstanceFunctionDI,[e].concat(n))},e.object=function(e){return new s.InstanceObjectDI(e)},e}();n.DI=u;var d=new u;n.di=d,cc._RF.pop()},{"./InstanceBuilderDI (@tapclap.utils-js.di)":"InstanceBuilderDI (@tapclap.utils-js.di)","./InstanceContainerDI (@tapclap.utils-js.di)":"InstanceContainerDI (@tapclap.utils-js.di)","./InstanceFunctionDI (@tapclap.utils-js.di)":"InstanceFunctionDI (@tapclap.utils-js.di)","./InstanceObjectDI (@tapclap.utils-js.di)":"InstanceObjectDI (@tapclap.utils-js.di)","./InstanceRawDI (@tapclap.utils-js.di)":"InstanceRawDI (@tapclap.utils-js.di)","./InstanceReferenceDI (@tapclap.utils-js.di)":"InstanceReferenceDI (@tapclap.utils-js.di)"}],"DIConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"56c57cT/RZcUaCENw7C7Wo0","DIConfig (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DIConfig=void 0,function(e){e["Config.Orientation"]="Config.Orientation",e.ActionCaller="ActionCaller",e.ActionFactory="ActionFactory",e.ActionManager="ActionManager",e.AnalyticsService="AnalyticsService",e.AttemptsStateFactory="AttemptsStateFactory",e.AudioEffectsPlayer="AudioEffectsPlayer",e.AudioManager="AudioManager",e.AuthHandler="AuthHandler",e.AuthService="AuthService",e.BackdropController="BackdropController",e.BackdropManager="BackdropManager",e.BannerAdProvider="BannerAdProvider",e.BannerAdService="BannerAdService",e.BoosterAnimationFactory="BoosterAnimationFactory",e.CakeRewardActionCondition="CakeRewardActionCondition",e.ConfigService="ConfigService",e.ContextManager="ContextManager",e.EpisodeTargetResolver="EpisodeTargetResolver",e.HttpClient="HttpClient",e.I18N="I18N",e.I18NAppLoader="I18NAppLoader",e.ImagePublicationResolver="ImagePublicationResolver",e.InterstitialAdProvider="InterstitialAdProvider",e.InterstitialAdService="InterstitialAdService",e.LanguageSettingsEnabled="LanguageSettingsEnabled",e.LocaleResolver="LocaleResolver",e.LootBoxUnpacker="LootBoxUnpacker",e.MetaEventManager="MetaEventManager",e.MetaGameManager="MetaGameManager",e.MetaModuleResolver="MetaModuleResolver",e.MetaTaskManager="MetaTaskManager",e.NameplateManager="NameplateManager",e.NotificationAdapter="NotificationAdapter",e.NotificationRequestActionCondition="NotificationRequestActionCondition",e.ObjectStorageAdapter="ObjectStorageAdapter",e.OfferFactory="OfferFactory",e.OfferManager="OfferManager",e.OpenEpisodeAction="OpenEpisodeAction",e.PaymentProvider="PaymentProvider",e.PaymentService="PaymentService",e.PaymentValidationService="PaymentValidationService",e.PiggybankActionCondition="PiggybankActionCondition",e.PlatformLauncher="PlatformLauncher",e.PlatformStorage="PlatformStorage",e.PublicationManager="PublicationManager",e.RawStorageAdapter="RawStorageAdapter",e.RewardedAdProvider="RewardedAdProvider",e.RewardedAdService="RewardedAdService",e.RunMetaGameScenarioAction="RunMetaGameScenarioAction",e.RuntimeStorage="RuntimeStorage",e.SaleDoubleCoinsDateRange="SaleDoubleCoinsDateRange",e.SaleDoubleCoinsState="SaleDoubleCoinsState",e.SaleShopActionConditionCheck="SaleShopActionConditionCheck",e.SaleShopUnlimActionConditionCheck="SaleShopUnlimActionConditionCheck",e.SalesState="SalesState",e.SaleUnlimitedLivesDateRange="SaleUnlimitedLivesDateRange",e.SaleUnlimitedLivesState="SaleUnlimitedLivesState",e.ScenarioManager="ScenarioManager",e.SceneLoaderStrategyFactory="SceneLoaderStrategyFactory",e.SceneManager="SceneManager",e.SceneResourcesManager="SceneResourcesManager",e.SceneTransitionFactory="SceneTransitionFactory",e.ScreenLocker="ScreenLocker",e.SequenceAction="SequenceAction",e.ServiceGateway="ServiceGateway",e.SharingDisabled="SharingDisabled",e.SocialRequest="SocialRequest",e.SocialService="SocialService",e.StartBoosterAnimationFactory="StartBoosterAnimationFactory",e.SyncRemoteConfig="SyncRemoteConfig",e.UIManager="UIManager",e.User="User",e.UserFactory="UserFactory",e.UserItemCollection="UserItemCollection",e.UserItemFactory="UserItemFactory",e.UserManager="UserManager",e.UserService="UserService",e.UserSettings="UserSettings",e.UtmProvider="UtmProvider",e.WindowConfig="WindowConfig",e.WindowController="WindowController",e.WindowFactory="WindowFactory",e.WindowLazyLoader="WindowLazyLoader",e.WindowManager="WindowManager",e.WindowsAppLoader="WindowsAppLoader",e.WindowTargetResolver="WindowTargetResolver",e.MessageCenter="MessageCenter",e.SocialRequestWrapper="SocialRequestWrapper",e.PlatformRemoteConfig="PlatformRemoteConfig",e.FeatureFriends="FeatureFriends"}(n.DIConfig||(n.DIConfig={})),cc._RF.pop()},{}],"DIInjectRegistry (@tapclap.utils-js.inject.registry)":[function(e,t,n){"use strict";cc._RF.push(t,"81542gwY75bqZB8Copdaaar","DIInjectRegistry (@tapclap.utils-js.inject.registry)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DIInjectRegistry=void 0;var o=function(){function e(e){this._di=e}return e.prototype.getInject=function(e){return this._di.create(e)},e}();n.DIInjectRegistry=o,cc._RF.pop()},{}],"DailyRewardAdItemComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"5d3cbqqWThZ+rGV+hLpd1KI","DailyRewardAdItemComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardAdItemComponent=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./DailyRewardItemComponent (scripts.windows.items.daily-reward)"),p=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._giftBox=null,t._giftBoxLerpPositionCoefficient=new cc.Vec2,t._enabledAdButton=null,t._disabledAdButton=null,t._buttonBounceAnimationKeys=[],t._reopenWindowDelay=0,t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"giftBox",{get:function(){return this._giftBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"giftBoxLerpPositionCoefficient",{get:function(){return this._giftBoxLerpPositionCoefficient},enumerable:!1,configurable:!0}),t.prototype.runIdleAnimatinos=function(){this._backgroundAnimation.runIdle(),this._giftBoxAnimation.runIdle()},t.prototype.openGiftBox=function(){return this._rewardsListComponent.showRewards(this._giftBox),this._runGiftBoxOpeningAnimation()},t.prototype.lockButton=function(){return this._enabledAdButton.active=!1,this._disabledAdButton.active=!0,this._runButtonBounceAnimation(this._disabledAdButton)},t.prototype.unlockButton=function(){return this._enabledAdButton.active=!0,this._disabledAdButton.active=!1,this._runButtonBounceAnimation(this._enabledAdButton)},t.prototype.emitEventWatchAd=function(){return this.node.emit(n.EVENT_WATCH_AD)},t.prototype._runGiftBoxOpeningAnimation=function(){var e=this;return this._giftBoxAnimation.runOpening(),this._giftBoxAnimation.prepareToOpen(),new Promise(function(t){return e.scheduleOnce(t,e._reopenWindowDelay)})},t.prototype._runButtonBounceAnimation=function(e){var t=i(this._buttonBounceAnimationKeys,2),n=t[0],o=t[1],a=p.AnimationKey.QUAD_IN_OUT_EASING,r=cc.tween(e).to(n.duration,{scale:n.scale},{easing:a}).to(o.duration,{scale:o.scale},{easing:a});return c.PromisifyTween.start(r)},t.EVENT_WATCH_AD="watch-ad",r([u({type:cc.Node,visible:!0})],t.prototype,"_giftBox",void 0),r([u({visible:!0})],t.prototype,"_giftBoxLerpPositionCoefficient",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_enabledAdButton",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_disabledAdButton",void 0),r([u({type:[p.AnimationKey],visible:!0})],t.prototype,"_buttonBounceAnimationKeys",void 0),r([u({visible:!0,min:0})],t.prototype,"_reopenWindowDelay",void 0),n=r([m],t)}(s.DailyRewardItemComponent);n.DailyRewardAdItemComponent=d,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./DailyRewardItemComponent (scripts.windows.items.daily-reward)":"DailyRewardItemComponent (scripts.windows.items.daily-reward)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"ad9cdfb5Q9U/bBVJEI0PvBW","DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardDefaultItemComponent=void 0;var i=e("./DailyRewardItemComponent (scripts.windows.items.daily-reward)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._receivedIdleDelay=0,t._giftBoxGlowDelay=0,t._changingToAvailableDelay=0,t._tickAnimationDelay=0,t}return a(t,e),t.prototype.runAvailableItemIdle=function(){this.state===i.ItemState.Available&&(this._backgroundAnimation.runIdle(),this._giftBoxAnimation.runIdle())},t.prototype.runIdleAnimatinos=function(){var e=this,t={startColor:this._unavailableStyle.color,endColor:this._availableStyle.color};this.state===i.ItemState.Received&&this._tickAnimation.scheduleOnce(function(){return e._tickAnimation.runAppearance().then(function(){return e._tickAnimation.runIdle()})},this._receivedIdleDelay),this.state===i.ItemState.Available&&(this._giftBoxAnimation.scheduleOnce(function(){return e._giftBoxAnimation.runGlow()},this._giftBoxGlowDelay),this._backgroundAnimation.runChangingToAvailable(this._changingToAvailableDelay),this._backgroundAnimation.runTitleAnimation(t,this._changingToAvailableDelay))},t.prototype._runGiftBoxOpeningAnimation=function(e){var t=this,n=e.backgroundChangingColors;return e.isCoins,this._giftBoxAnimation.runOpening(),this._backgroundAnimation.runTitleAnimation(n),this._backgroundAnimation.runChangingToRecived(),new Promise(function(e){return t.scheduleOnce(e,t._tickAnimationDelay)}).then(function(){return t._tickAnimation.runAppearance()}).then(function(){return t._tickAnimation.runIdle()})},t.prototype._handleStyle=function(t){this.setActiveQuestionMark(t===i.ItemState.Unavailable),e.prototype._handleStyle.call(this,t)},r([p({visible:!0,min:0})],t.prototype,"_receivedIdleDelay",void 0),r([p({visible:!0,min:0})],t.prototype,"_giftBoxGlowDelay",void 0),r([p({visible:!0,min:0})],t.prototype,"_changingToAvailableDelay",void 0),r([p({visible:!0,min:0})],t.prototype,"_tickAnimationDelay",void 0),r([s],t)}(i.DailyRewardItemComponent);n.DailyRewardDefaultItemComponent=l,cc._RF.pop()},{"./DailyRewardItemComponent (scripts.windows.items.daily-reward)":"DailyRewardItemComponent (scripts.windows.items.daily-reward)"}],"DailyRewardFinalItemComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"57ae8o8ekpcZ4H0JjsTmt2O","DailyRewardFinalItemComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardFinalItemComponent=void 0;var i=e("./DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)"),c=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._runGiftBoxOpeningAnimation=function(e){var t=this,n=e.backgroundChangingColors;return this._giftBoxAnimation.runOpening(),Promise.all([this._backgroundAnimation.runTitleAnimation(n),this._backgroundAnimation.runChangingToRecived(),new Promise(function(e){return t.scheduleOnce(e,t._tickAnimationDelay)}).then(function(){return t._tickAnimation.runAppearance()}).then(function(){return t._tickAnimation.runIdle()})])},r([c],t)}(i.DailyRewardDefaultItemComponent);n.DailyRewardFinalItemComponent=s,cc._RF.pop()},{"./DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)":"DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)"}],"DailyRewardItemComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"f9ed2mJSbFQoIX8iF1qwDXX","DailyRewardItemComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardItemComponent=n.DailyRewardItemStyle=n.ItemState=void 0;var i,c=e("./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"),s=e("./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)"),p=e("./BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)"),l=e("./TickAnimationComponent (scripts.windows.items.daily-reward.animation)"),m=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),u=e("./RewardsListComponent (scripts.windows.items.daily-reward.reward)"),d=cc._decorator,y=d.ccclass,f=d.property;(function(e){e[e.Unavailable=0]="Unavailable",e[e.Available=1]="Available",e[e.Received=2]="Received"})(i=n.ItemState||(n.ItemState={}));var h=function(){function e(){this.color=new cc.Color,this.frame=null,this.background=null,this.effect=null,this.giftBoxEffect=null}return r([f(cc.Color)],e.prototype,"color",void 0),r([f(cc.Node)],e.prototype,"frame",void 0),r([f(cc.Node)],e.prototype,"background",void 0),r([f(cc.Node)],e.prototype,"effect",void 0),r([f(cc.Node)],e.prototype,"giftBoxEffect",void 0),r([y("DailyRewardItemStyle")],e)}();n.DailyRewardItemStyle=h;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxRewardsNumber=1,t._title=null,t._rewardsListComponent=null,t._giftBoxAnimation=null,t._contentAnimation=null,t._backgroundAnimation=null,t._tickAnimation=null,t._unavailableStyle=null,t._availableStyle=null,t._receivedStyle=null,t._lerpPositionCoefficient=new cc.Vec2,t._state=i.Unavailable,t._rewardsList=[],t}return a(t,e),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){if(this._title){var t=this._title.node.getComponent(m.I18NLabel);t?t.setString(e):this._title.string=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._contentAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this._handleStyle(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rewardsList",{get:function(){return this._rewardsListComponent.rewards},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lerpPositionCoefficient",{get:function(){return this._lerpPositionCoefficient},enumerable:!1,configurable:!0}),t.prototype.runAvailableItemIdle=function(){},t.prototype.runIdleAnimatinos=function(){},t.prototype.setDefault=function(){this._backgroundAnimation.setDefault(),this._giftBoxAnimation.setDefault(),this._tickAnimation&&this._tickAnimation.setDefault()},t.prototype.setRewards=function(e,t){var n=this;this._rewardsListComponent&&(e.forEach(function(e,o){o<n._maxRewardsNumber&&n._rewardsListComponent.createItem({item:e,animationsComponent:n._contentAnimation,type:t})}),this.rewardsList.reverse())},t.prototype.openGiftBox=function(e){void 0===e&&(e=!1);var t=this._title.node.color;return this.state=i.Received,this._giftBoxAnimation.setActive(!0),this._runGiftBoxOpeningAnimation({isCoins:e,backgroundChangingColors:{startColor:t,endColor:this._receivedStyle.color}}),this._rewardsListComponent.showRewards()},t.prototype._runGiftBoxOpeningAnimation=function(){return Promise.resolve()},t.prototype._handleStyle=function(e){var t=this,n=[this._unavailableStyle,this._availableStyle,this._receivedStyle];this._giftBoxAnimation.setActive(e===i.Available),n.forEach(function(n,o){o===e?(t._title&&(t._title.node.color=n.color),t._setActiveNode(n.frame,!0),t._setActiveNode(n.background,!0),t._setActiveNode(n.effect,!0),t._setActiveNode(n.giftBoxEffect,!0)):(t._setActiveNode(n.frame,!1),t._setActiveNode(n.background,!1),t._setActiveNode(n.effect,!1),t._setActiveNode(n.giftBoxEffect,!1))})},t.prototype._setActiveNode=function(e,t){e instanceof cc.Node&&(e.active=t)},t.prototype.runAppearingAnimation=function(e,t,n){return this._backgroundAnimation.runAppearing(e,t,n)},t.prototype.setActiveQuestionMark=function(e){this._contentAnimation.setActiveQuestionMark(e)},t.prototype.setShortTickDelay=function(){this._tickAnimation.setShortDelay()},r([f({min:1,visible:!0})],t.prototype,"_maxRewardsNumber",void 0),r([f({type:cc.Label,visible:!0})],t.prototype,"_title",void 0),r([f({type:u.RewardsListComponent,visible:!0})],t.prototype,"_rewardsListComponent",void 0),r([f({type:c.GiftBoxAnimationComponent,visible:!0})],t.prototype,"_giftBoxAnimation",void 0),r([f({type:s.ContentAnimationComponent,visible:!0})],t.prototype,"_contentAnimation",void 0),r([f({type:p.BackgroundAnimationComponent,visible:!0})],t.prototype,"_backgroundAnimation",void 0),r([f({type:l.TickAnimationComponent,visible:!0})],t.prototype,"_tickAnimation",void 0),r([f({type:h,visible:!0})],t.prototype,"_unavailableStyle",void 0),r([f({type:h,visible:!0})],t.prototype,"_availableStyle",void 0),r([f({type:h,visible:!0})],t.prototype,"_receivedStyle",void 0),r([f({visible:!0})],t.prototype,"_lerpPositionCoefficient",void 0),r([f({override:!0,type:cc.Enum(i)})],t.prototype,"state",null),r([y],t)}(cc.Component);n.DailyRewardItemComponent=g,cc._RF.pop()},{"./BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)":"BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)","./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":"ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":"GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./RewardsListComponent (scripts.windows.items.daily-reward.reward)":"RewardsListComponent (scripts.windows.items.daily-reward.reward)","./TickAnimationComponent (scripts.windows.items.daily-reward.animation)":"TickAnimationComponent (scripts.windows.items.daily-reward.animation)"}],"DailyRewardWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"0b9e2MPkelc8aaeHJxUFGq/","DailyRewardWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardWindowAction=void 0;var c=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),s=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),p=e("./ActionConstants (scripts.config)"),l=e("./DailyRewardWindowComponent (scripts.windows.items.daily-reward)"),m=e("./DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)"),u=function(e){function t(t){var n=e.call(this,t)||this;return n._module=t.dailyRewardModuleResolver.get(),n._attemptsModule=t.attemptsModuleResolver.get(),n._episodes=t.episodes.get(),n._itemsTypes=t.itemsTypes,n._strategyKey=t.strategyKey,n._actionManager=t.actionManager,n._user=t.userManager.getCurrentUser(),n._offerManager=t.offerManager,n}return a(t,e),t.prototype._configureWindow=function(e){var n=this,o=this._module.getRewards(),a=this._module.getRewardIndex(),c=[],u=Object.values(o),d=this._offerManager.getOfferById(this._strategyKey,"dailyRewardAd"),y=e.getLayout("content"),f=this._user.items.get("currency","coins"),h=f.amount;e.setMetaModule(this._attemptsModule),e.setLevel(this._episodes.getCurrentLevel()),e.setCoinsItem(f);var g=!1,v=function(e){return n._isFindingItem(e,t.ITEMS_LIST.final)?(n._finalItemIndex=e,t.ITEMS_LIST.final):n._isFindingItem(e,t.ITEMS_LIST.ad)?(n._adItemIndex=e,t.ITEMS_LIST.ad):(y.defaultItemsNumber++,t.ITEMS_LIST.default)};u.forEach(function(e,t){e.forEach(function(o){void 0===o&&(o=[]),c.push({title:n._i18n.t("dailyReward.prizeTitle",{number:u.indexOf(e)+1}),type:v(t),rewards:o})})}),y.init(c),y.setCurrentPrizeIndex(Number(a));var _=function(e){return y.items[e]},b=function(t,o){var r=void 0===o?{}:o,i=r.isHideTargets,c=void 0===i||i,s=r.isShowCloseButton,p=void 0===s||s,l=r.isUnlockAdButton,m=void 0===l||l,u=_(n._adItemIndex);n._chargeReward(t,a),p&&e.showCloseButton(),c&&e.hideTargets(),u&&m&&u.unlockButton()},C=function(t,o){var a,c=o.target,s=o.isFinishRewardGetting,p=void 0===s||s,m=o.onEndAnimationCallback,u=o.isHideTargets,d=o.isShowCloseButton,y=o.isUnlockAdButton,f=o.component,h=i(o,["target","isFinishRewardGetting","onEndAnimationCallback","isHideTargets","isShowCloseButton","isUnlockAdButton","component"]),g=t instanceof cc.Node,v=g?t:t.iconNode;c||g||(a=t.itemKey,c=a.indexOf("attempts")>=0?l.TargetsList.livesBar:l.TargetsList.playButton),e.showTargets(c),n._uiManager.addClaimAnimation(r({node:v,target:c instanceof cc.Node?c:e.getTargetNode(c),clone:!1,bounceAnimation:!1,highlightTarget:!1,relativeScale:!0,onStartAnimationCallback:function(){var e=t.component||f;e&&e.prepareRewardNode&&e.prepareRewardNode(v)},callback:function(){e.getReward(c),m&&m(),p&&b(t.rewardItem,{isHideTargets:u,isShowCloseButton:d,isUnlockAdButton:y})}},h)),n._uiManager.playClaimAnimations(!1)},w=function(t,n){for(var o=n.beforeStartCallback,a=n.rewardItem,c=n.isHideTargets,s=n.isShowCloseButton,p=n.isUnlockAdButton,m=i(n,["beforeStartCallback","rewardItem","isHideTargets","isShowCloseButton","isUnlockAdButton"]),u=t.length-1,d=function(n){var i=t[n];o&&o(i,n,t.length),C(i,r({target:l.TargetsList.coinsBar,scaleTo:i.scale,stepTime:.15*n,isFinishRewardGetting:!1,onEndAnimationCallback:function(){n<u&&(h+=a.amount/t.length,e.setCoinsNumber(Math.floor(h))),n===u&&b(a,{isHideTargets:c,isShowCloseButton:s,isUnlockAdButton:p})}},m))},y=t.length-1;y>=0;y--)d(y)};this._user.items.once(t.EVENT_ADD_DAILY_REWARD_COINS,function(){var t=_(n._adItemIndex);t.rewardsList.forEach(function(n){var o=n.component,a=n.rewardItem;g=!0,t.openGiftBox().then(function(){y.items.pop(),t.node.destroy(),e.show(),g=!1}),C(t.giftBox,{isShowCloseButton:!1,target:e.extraRewardTarget,scaleTo:.88,unhighlightNodeAfter:!1,lerpPositionCoefficient:t.giftBoxLerpPositionCoefficient,callback:function(){e.scheduleOnce(function(){w(o.coinsList,{isShowCloseButton:!1,rewardItem:a,lerpPositionCoefficient:t.lerpPositionCoefficient,beforeStartCallback:function(e,t,n){o.prepareRewardNode(e,t,n)}})},.9)}}),e.hide()})}),e.events.once(m.DailyRewardWindowLayoutComponent.EVENT_WATCH_AD,function(){n._user.items.delete("dailyReward","coins"),n._actionManager.run(p.ACTIONS.WATCH_AD,{items:d.payload.items})}),e.node.on(cc.Node.EventType.TOUCH_END,function(){g||e.events.emit("claim")}),e.events.once("claim",function(){var t=_(a),o=_(n._adItemIndex);o&&o.lockButton(),t.openGiftBox().then(function(){var n=t.rewardsList,o=[];n.forEach(function(a,r){var i=a.component,c=a.rewardItem,s=i.coinsList,p=i.showingDelay+i.indexCoefficientDelay*r,l=1===n.length,m=r===n.length-1;o.push(e.getTargetByItemKey(a.itemKey)),e.scheduleOnce(function(){s?w(i.coinsList,{rewardItem:c,component:i,isHideTargets:l,isShowCloseButton:l,isUnlockAdButton:l,lerpPositionCoefficient:t.lerpPositionCoefficient}):C(a,{isHideTargets:m,isShowCloseButton:m,isUnlockAdButton:m})},p)}),o.length>0&&e.showTargets(o)})}),e.events.once(s.WindowComponent.EVENT_DESTROY,function(){n._user.items.removeAll(t.EVENT_ADD_DAILY_REWARD_COINS)})},t.prototype._isFindingItem=function(e,t){return this._itemsTypes[e]===t},t.prototype._chargeReward=function(e,t){this._user.items.charge([e],{rewardIndex:t}),this._module.resetReward()},t.ITEMS_LIST={default:"default",ad:"ad",final:"final"},t.SOURCE_KEY="daily_reward",t.EVENT_ADD_DAILY_REWARD_COINS="add:dailyReward:coins",t}(c.WindowAction);n.DailyRewardWindowAction=u,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./DailyRewardWindowComponent (scripts.windows.items.daily-reward)":"DailyRewardWindowComponent (scripts.windows.items.daily-reward)","./DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)":"DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"DailyRewardWindowComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"c075dATEshZip1X4jgtqFJo","DailyRewardWindowComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardWindowComponent=n.DailyRewardTarget=n.TargetsList=void 0;var i,c=e("./FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)"),s=e("./WindowAnimationComponent (scripts.windows.items.daily-reward.animation)"),p=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),l=e("./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),m=e("./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)"),u=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),d=cc._decorator,y=d.ccclass,f=d.property;(function(e){e[e.livesBar=0]="livesBar",e[e.coinsBar=1]="coinsBar",e[e.playButton=2]="playButton"})(i=n.TargetsList||(n.TargetsList={}));var h=function(){function e(){this.key="",this.target=i.livesBar}return r([f()],e.prototype,"key",void 0),r([f({type:cc.Enum(i)})],e.prototype,"target",void 0),r([y("DailyRewardTarget")],e)}();n.DailyRewardTarget=h;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._extraRewardTarget=null,t._livesBar=null,t._coinsBar=null,t._playButton=null,t._dailyRewardTarget=[],t._animationComponent=null,t._targetNodesList=null,t}return a(t,e),Object.defineProperty(t.prototype,"extraRewardTarget",{get:function(){return this._extraRewardTarget},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e;this._animationComponent=this.node.getComponent(s.WindowAnimationComponent),this._targetNodesList=((e={})[i.livesBar]={body:this._livesBar.node,icon:this._livesBar.getIconNode()},e[i.coinsBar]={body:this._coinsBar.node,icon:this._coinsBar.getIconNode()},e[i.playButton]={body:this._playButton.node,icon:this._playButton.node},e)},t.prototype.show=function(){var e=this.getLayout("content");return this._buttonClose.active&&this.showCloseButton(),e.node.opacity=p.AnimationKey.MAX_OPACITY,Promise.all([this._animationComponent.runTitleAppearing(e.title),this._animationComponent.runContentAppearing(e)])},t.prototype.hide=function(){var e=this.getLayout("content");return this.hideCloseButton(),this._animationComponent.runWindowDisappearing(e.node)},t.prototype.getTargetNode=function(e){return this._targetNodesList[e].icon},t.prototype.setCoinsItem=function(e){this._coinsBar.setUserItem(e)},t.prototype.setMetaModule=function(e){this._livesBar.setMetaModule(e)},t.prototype.setLevel=function(e){this._playButton.label=e},t.prototype.setCoinsNumber=function(e){this._coinsBar.coinsNumber=e},t.prototype.showTargets=function(e){var t=this,n=[];return e instanceof cc.Node||(Array.isArray(e)?n=e:n.push(e)),n.map(function(e){return t._animationComponent.runTargetsAppearing(t._targetNodesList[e].body)}),Promise.all(n)},t.prototype.hideTargets=function(){return Promise.all([this._animationComponent.runTargetsDisappearing(this._coinsBar.node),this._animationComponent.runTargetsDisappearing(this._playButton.node),this._animationComponent.runTargetsDisappearing(this._livesBar.node)])},t.prototype.getTargetByItemKey=function(e){var t=this._dailyRewardTarget.find(function(t){return t.key===e});return t?t.target:i.playButton},t.prototype.getReward=function(e){return this._animationComponent.runGettingReward(e),this._animationComponent.runRewardTargetAnimation(this._targetNodesList[e].body)},t.prototype.showCloseButton=function(){return this._buttonClose.active=!0,this._animationComponent.runCloseButtonAppearing(this._buttonClose)},t.prototype.hideCloseButton=function(){return this._animationComponent.runCloseButtonDisappearing(this._buttonClose)},r([f({type:cc.Node,visible:!0})],t.prototype,"_extraRewardTarget",void 0),r([f({type:l.LivesAttemptsBarComponent,visible:!0})],t.prototype,"_livesBar",void 0),r([f({type:m.CoinsBarComponent,visible:!0})],t.prototype,"_coinsBar",void 0),r([f({type:u.ButtonControlComponent,visible:!0})],t.prototype,"_playButton",void 0),r([f({type:[h],visible:!0})],t.prototype,"_dailyRewardTarget",void 0),r([y],t)}(c.FullscreenWindowComponent);n.DailyRewardWindowComponent=g,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)":"CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)","./FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)":"FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)","./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./WindowAnimationComponent (scripts.windows.items.daily-reward.animation)":"WindowAnimationComponent (scripts.windows.items.daily-reward.animation)"}],"DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"80f96Sv7dVZ85h39c11V/GC","DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DailyRewardWindowLayoutComponent=void 0;var i=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),c=e("./DailyRewardItemComponent (scripts.windows.items.daily-reward)"),s=e("./DailyRewardAdItemComponent (scripts.windows.items.daily-reward)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._title=null,t._countItemInRow=3,t._items=[],t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.init=function(e){var t=this;void 0===e&&(e=[]),e.forEach(function(e,n){var o=t._createItem(e);t._items.push(o),t._pushToRow(o.node,Math.floor(n/t._countItemInRow))})},t.prototype.setCurrentPrizeIndex=function(e){this._items.forEach(function(t,n){t.state=n<e?c.ItemState.Received:n===e?c.ItemState.Available:c.ItemState.Unavailable})},t.prototype._createItem=function(e){var t=this,n=e.type,o=e.title,a=e.rewards,r=this._getItemPrefab(n),i=cc.instantiateFrom(r.prefab).getComponent(c.DailyRewardItemComponent);if(i)return i.node.on(s.DailyRewardAdItemComponent.EVENT_WATCH_AD,function(){return t._emitEventWatchAd()}),i.setRewards(a,n),i.title=o,i;throw new Error("Not found DailyRewardItemComponent in prefab: "+r.prefab)},t.prototype._emitEventWatchAd=function(){return this.window.events.emit(n.EVENT_WATCH_AD)},t.prototype._getItemPrefab=function(e){return this._options.items[e]},t.EVENT_WATCH_AD="watch-ad",r([m({type:cc.Node,visible:!0})],t.prototype,"_title",void 0),r([m({visible:!0})],t.prototype,"_countItemInRow",void 0),n=r([l],t)}(i.RowContentWindowLayoutComponent);n.DailyRewardWindowLayoutComponent=u,cc._RF.pop()},{"./DailyRewardAdItemComponent (scripts.windows.items.daily-reward)":"DailyRewardAdItemComponent (scripts.windows.items.daily-reward)","./DailyRewardItemComponent (scripts.windows.items.daily-reward)":"DailyRewardItemComponent (scripts.windows.items.daily-reward)","./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":[function(e,t,n){"use strict";cc._RF.push(t,"79d53czW4lMm4LIEbSSzjfu","DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),n.__esModule=!0,n.DataExtractor=void 0;var o=function(){function e(){}return e.prototype.extract=function(e,t){return void 0===t&&(t={}),{}},e.extract=function(e,t){return void 0===t&&(t={}),(new this).extract(e,t)},e}();n.DataExtractor=o,cc._RF.pop()},{}],"DataHandler (scripts.utils.data-handler)":[function(e,t,n){"use strict";cc._RF.push(t,"41ee2Rr5PpfDaCun9Jz1lW3","DataHandler (scripts.utils.data-handler)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataHandler=void 0;n.DataHandler=function(){},cc._RF.pop()},{}],"DataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d4829+lc1paYo3b5340SR0F","DataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.DataLoader=void 0;var o=function(){function e(){}return e.prototype.load=function(){throw new Error("Method not implemented")},e}();n.DataLoader=o,cc._RF.pop()},{}],"DataStorage (@tapclap.game-kit.data-storage)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"4be43dOCXlMB7iVpL+yuhei","DataStorage (@tapclap.game-kit.data-storage)"),n.__esModule=!0,n.DataStorage=void 0;var a=function(){function e(){this._prefix="",this._separator="."}var t,n,a=e.prototype;return a._getKey=function(e){return this._prefix?""+this._prefix+this._separator+e:e},a.setPrefix=function(e){this._prefix=e.toString()},a.getItem=function(){return Promise.resolve()},a.setItem=function(){return Promise.resolve()},a.removeItem=function(){return Promise.resolve()},a.clear=function(){return Promise.resolve()},a.getKeys=function(){return Promise.resolve()},t=e,(n=[{key:"separator",get:function(){return this._separator}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.DataStorage=a,cc._RF.pop()},{}],"DateRangeOfferState (scripts.offers.states)":[function(e,t,n){"use strict";cc._RF.push(t,"a765fHOV8NUZKL1qeDc4Ybh","DateRangeOfferState (scripts.offers.states)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DateRangeOfferState=void 0;var r=function(e){function t(t){var n=t.dateRange,o=e.call(this)||this;return o._dateRange=null,o._dateRange=n,o}return a(t,e),t.prototype.resolve=function(){var e=this._dateRange,t=e.startDate,n=e.finishDate,o=new Date;return t<o&&o<n},t}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.DateRangeOfferState=r,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"2864cguUgxSio4CV9+fOBab","DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),n.__esModule=!0,n.DeathMultiplierSystemStrategy=void 0;var o=e("./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),i=e("./EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)"),c=e("./Random (@tapclap.utils-js.random)"),s=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)"),p=e("./isExplodedComponent (@tapclap.match-x.engine.components)");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._random=new c.Random,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),o.prototype.compute=function(){var e=this._world.getState(a.ExplodeSystem.STATE),t=this._world.getComponent("tiles").grid,n=new Map;if(t&&e&&e.data){for(var o,c=new Set,m=l(e.data);!(o=m()).done;)for(var u,d=l(o.value);!(u=d()).done;){var y=u.value.entity;y.getEnabledComponent(i.EmitMultiplierOnDeathComponent.KEY)&&c.add(y)}if(c.size>0){for(var f=[],h=0;h<t.rows;h++)for(var g=0;g<t.cols;g++){var v=t.getCell(h,g);if(v){var _=v.getEntity();_&&!c.has(_)&&_.getEnabledComponentByClass(r.MultiplierComponent)&&(_.getEnabledComponentByClass(p.IsExplodedComponent)||f.push(_))}}for(var b,C=l(c);!(b=C()).done;){var w=b.value;f=this._random.shuffle(f);for(var S=w.getComponent(i.EmitMultiplierOnDeathComponent.KEY),E=Math.min(S.count,f.length),x=0;x<E;x++){var A=f[x],O=A.getComponent(r.MultiplierComponent.KEY);O.addValue(S.amount),n.set(A,new s.MultiplierSystemModel(A,O.getValue(),O.getMinValue(),w.type,w))}}}}return Array.from(n.values())},o}(o.MultiplierSystemStrategy);n.DeathMultiplierSystemStrategy=y,cc._RF.pop()},{"./EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)":"EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","./MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./isExplodedComponent (@tapclap.match-x.engine.components)":"isExplodedComponent (@tapclap.match-x.engine.components)"}],"DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)":[function(e,t,n){"use strict";cc._RF.push(t,"f3ae4awIQ1e7ozI0Ymy2P8z","DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)"),n.__esModule=!0,n.DeathTester=void 0;var o=e("./HealthComponent (@tapclap.match-x.engine.components)"),a=e("./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)"),i=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),c=e("./PostponeExplodeComponent (@tapclap.match-x.engine.components)");function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var p=r.prototype;return p._explode=function(e,t){var n=t.getEnabledComponent(i.CellHealthComponent.KEY),r=t.getEnabledComponent(o.HealthComponent.KEY),s=t.getEnabledComponent(a.ExplodeOnDeathComponent.KEY),p=t.getComponentByClass(c.PostponeExplodeComponent),l=p&&p.enable||!1;if(s&&!l){if(r)return r.isDeath;if(n)return 0===n.getValues().reduce(function(e,t){return e+t},0)}},p._blast=function(e,t){return this._explode(e,t)},r}(r.ExplodeHandler);n.DeathTester=p,cc._RF.pop()},{"./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)":"ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)","./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)":"ExplodeOnDeathComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PostponeExplodeComponent (@tapclap.match-x.engine.components)":"PostponeExplodeComponent (@tapclap.match-x.engine.components)"}],"DebugLevelNumber (scripts.scenes)":[function(e,t,n){"use strict";cc._RF.push(t,"2fe6fGzH6tcPaBS4M91Ymn7","DebugLevelNumber (scripts.scenes)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DebugLevelNumber=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setLevel=function(e){this.getComponent(cc.Label).string=e},r([i],t)}(cc.Component);n.DebugLevelNumber=c,cc._RF.pop()},{}],"DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"c38cdi85QhWG4xlhWgKMJ5U","DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.DecorAnimationBuilder=void 0;var o=e("./HealthComponent (@tapclap.match-x.engine.components)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),i=e("./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)");function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this)._world=t.world,n._decor=t.decor,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),i.prototype.create=function(){var e=this,t=[],n=this._world.getComponent("tiles").grid;if(this._entity){var i=this._cell.getComponent(r.RenderComponent.KEY).node,u=this._entity.getComponent(r.RenderComponent.KEY).node,d=this._entity.getComponent(o.HealthComponent.KEY),y=(this._decor.find(function(t){return t.name===e._entity.type})||{}).states;if(!u||!d||!y)return t;var f=d.getValue();if(y[f]){var h=this._affectedBy||this._blastedBy,g=h?new p.EventListenAnimation(h,"explode"):new l.DummyAnimation,v=new m.GroupAnimation([new s.ChainAnimation([g,new a.FunctionAnimation(function(){var e=y[f],t=cc.instantiateFrom(e),o=n.getComponent("render").node;o.addChild(t),t.setPosition(o.convertToNodeSpaceAR(i.parent.convertToWorldSpaceAR(i)));var a=t.getComponentInChildren(cc.Animation);if(a){var r=a.getAnimationState(a.defaultClip.name);r&&(r.onStop=function(){return t.destroy()})}})])]);t.push(new c.AnimationData(this._entity,v))}}return t},i}(i.ExplodeAnimationCreator);n.DecorAnimationBuilder=d,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";cc._RF.push(t,"f67b4Pl90hXpIqQn5tRD22Y","DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),n.__esModule=!0,n.DecoratedGameStartAnimatorComponent=void 0;var o,a=e("./GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=cc._decorator,c=(0,i.ccclass)(o=(0,i.menu)("Match-X/StartAnimator/DecoratedGameStartAnimator")(o=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._decorators=[],t._game=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var a=o.prototype;return a.initial=function(){return Promise.all(this._decorators.map(function(e){return e.initial()}))},a.show=function(){return Promise.all(this._decorators.map(function(e){return e.show()}))},a.hide=function(){return Promise.all(this._decorators.map(function(e){return e.hide()}))},a.addDecorator=function(e){this._decorators.push(e)},o}(a.GameStartAnimatorComponent))||o)||o;n.DecoratedGameStartAnimatorComponent=c,cc._RF.pop()},{"./GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"}],"DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1e8a2jcSPhYLrp1jNxZPMEG","DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.DecreaseAttemptsAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._attempts=t.attemptsModuleResolver.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._attempts&&this._attempts.decrease(),Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.DecreaseAttemptsAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)":[function(e,t,n){"use strict";cc._RF.push(t,"d53a20pf25fI7a/YYZ9IqUk","DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultAuthStorage=void 0;var c=e("./MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)"),s=function(){function e(e,t){void 0===e&&(e=[]),this._defaultProviders=[],this._defaultProviders=e,this._storage=t||new c.MemoryAuthStorage}return e.prototype._hasDefaultProviderByType=function(e){return this._defaultProviders.includes(e)},e.prototype.getAuthorizedProviders=function(){return o(this,void 0,Promise,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return[4,this._storage.getAuthorizedProviders()];case 1:return e=n.sent(),t=new Set(i(this._defaultProviders,e)),[2,Array.from(t)]}})})},e.prototype.addAuthorizedProvider=function(e){return o(this,void 0,Promise,function(){return a(this,function(){return this._hasDefaultProviderByType(e)?[2]:[2,this._storage.addAuthorizedProvider(e)]})})},e.prototype.removeAuthorizedProvider=function(e){return o(this,void 0,Promise,function(){return a(this,function(){return this._hasDefaultProviderByType(e)?[2]:[2,this._storage.removeAuthorizedProvider(e)]})})},e}();n.DefaultAuthStorage=s,cc._RF.pop()},{"./MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)":"MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)"}],"DefaultContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":[function(e,t,n){"use strict";cc._RF.push(t,"f2d2bvGk7JXEav0Avg02sA9","DefaultContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultContentAnimationComponent=void 0;var s=e("./PromisifyTween (scripts.utils)"),p=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),l=e("./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)"),m=cc._decorator,u=m.ccclass,d=m.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._iconAnimationKeys=[],t._labelAppearanceKey=null,t._labelDisappearanceKey=null,t}return a(t,e),t.prototype.runIconAnimation=function(e){var t=c(this._iconAnimationKeys,5),n=t[0],o=t[1],a=t[2],r=t[3],i=t[4],l={easing:p.AnimationKey.QUAD_IN_OUT_EASING},m=cc.tween(e).to(n.duration,{position:n.position,opacity:n.opacity}).delay(o.duration).to(a.duration,{position:a.position,opacity:a.opacity},l).to(r.duration,{position:r.position},l).to(i.duration,{position:i.position},l);return e.active=!0,s.PromisifyTween.start(m)},t.prototype.runLabelAppearance=function(e){var t=this._labelAppearanceKey,n=t.duration,o=t.opacity,a=cc.tween(e).delay(this._labelAppearanceDelay).to(n,{opacity:o});return e.opacity=p.AnimationKey.MIN_OPACITY,s.PromisifyTween.start(a)},t.prototype.runLabelDisappearance=function(e){var t=this._labelDisappearanceKey,n=t.duration,o=i(t,["duration"]),a=cc.tween(e).delay(this._labelDisappearanceDelay).to(n,o);return s.PromisifyTween.start(a)},t.prototype.runDelay=function(e){var t=this;return new Promise(function(n){return t.scheduleOnce(n,e)})},r([d({type:[p.AnimationKey],visible:!0})],t.prototype,"_iconAnimationKeys",void 0),r([d({type:p.AnimationKey,visible:!0})],t.prototype,"_labelAppearanceKey",void 0),r([d({type:p.AnimationKey,visible:!0})],t.prototype,"_labelDisappearanceKey",void 0),r([u],t)}(l.ContentAnimationComponent);n.DefaultContentAnimationComponent=y,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":"ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":[function(e,t,n){"use strict";cc._RF.push(t,"e0883g3eT5eF6bnkt+Q5kla","DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultGiftBoxAnimationComponent=void 0;var c=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),s=e("./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"),p=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._activeAnimationsList=[],t._isOpened=!1,t}var n;return a(t,e),n=t,t.prototype.setDefault=function(){this._glowSkeleton.animation="appearance",this._activeAnimationsList.forEach(function(e){e.stop()}),this.node.scale=n.DEFAULT_SCALE,this.node.angle=n.DEFAULT_ANGLE},t.prototype.runGlow=function(){!1===this._isOpened&&(this._glowSkeleton.setMix("appearance","idle",this._glowAppearanceDuration),this._glowSkeleton.animation="idle")},t.prototype.runOpening=function(){this._skeleton&&(this._skeleton.animation="box_open"),this._isOpened=!0,this._glowSkeleton.setMix("idle","turn off",this._glowDisappearanceDuration),this._glowSkeleton.animation="turn off"},t.prototype.runIdle=function(){var e=this,t=i(this._idleAnimationKeys,4),o=t[0],a=t[1],r=t[2],s=t[3],p=c.AnimationKey.QUAD_IN_OUT_EASING;cc.tween(this.node).delay(this._idleDelay).call(function(){var t=cc.tween(e.node).repeatForever(cc.tween().to(o.duration,{scale:o.scale},{easing:p}).to(a.duration,{scale:a.scale},{easing:p}).to(r.duration,{scale:r.scale},{easing:p}).to(s.duration,{scale:s.scale},{easing:p}).delay(e._idleCooldown)).start();e._activeAnimationsList.push(t)}).start();var l=cc.tween(this.node).repeatForever(cc.tween().to(this._angleAnimation.duration,{angle:{value:n.DEFAULT_ANGLE,progress:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a=i(t,4),r=a[3];return n.DEFAULT_ANGLE-e._angleAnimation.getValueByTime(r)}}})).start();this._activeAnimationsList.push(l)},t.prototype.setActive=function(e){this.node.opacity=e?c.AnimationKey.MAX_OPACITY:c.AnimationKey.MIN_OPACITY},t.DEFAULT_SCALE=1,t.DEFAULT_ANGLE=0,n=r([p],t)}(s.GiftBoxAnimationComponent);n.DefaultGiftBoxAnimationComponent=l,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":"GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"}],"DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4bd1bvd16NJrINCQkleBoy9","DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)"),n.__esModule=!0,n.DefaultHttpGatewayErrorHandler=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._actionManager=t.actionManager,n._defaultAction=t.defaultAction,n._errorToActionMap=t.errorToActionMap,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e,t){var n=this._errorToActionMap[t.type]||this._defaultAction;this._actionManager.run(n,{gateway:e})},a}(e("./ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)").ServiceGatewayErrorHandler);n.DefaultHttpGatewayErrorHandler=a,cc._RF.pop()},{"./ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)":"ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)"}],"DefaultsRemoteConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"43380k4LK1arKnekM0GMOUl","DefaultsRemoteConfig (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultsRemoteConfig=void 0,n.DefaultsRemoteConfig={square:!1,sharingDisabled:!1,saleDoubleCoinsDateRange:{startDate:"2024-05-31T00:00:00",finishDate:"2024-06-02T00:00:01"},saleUnlimitedLivesDateRange:{startDate:"2024-04-26T17:30:00",finishDate:"2024-04-29T17:30:00"},languageSettingsEnabled:!1,friends:!1},cc._RF.pop()},{}],"DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3542d2vTpRfWr+Db83WJYlb","DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)"),n.__esModule=!0,n.DestinationPostfixScenarioResourceHandler=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.handleArray=function(e,t){for(var n,a=[],r=o(e);!(n=r()).done;)for(var i=n.value,c=0,s=Object.entries(i.json);c<s.length;c++){var p=s[c],l=p[0],m=p[1];this._getModule().setScenario(l+":"+t.dest,m),a.push.apply(a,this._getAssetTasks(m))}return Promise.resolve(a)},a}(e("./ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)").ScenarioResourceHandler);n.DestinationPostfixScenarioResourceHandler=c,cc._RF.pop()},{"./ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)":"ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)"}],"DestroyAfterEmitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"2a05a+6AdRRtboKzLcFIzlL","DestroyAfterEmitComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DestroyAfterEmitComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="destroyAfterEmit",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DestroyAfterEmitComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)":[function(e,t,n){"use strict";cc._RF.push(t,"e49a2/ZPwZYFo0W5oOgXW5J","DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.DestroyAfterEmitSystem=void 0;var i=e("./DestroyAfterEmitComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),p=e("./RemoveSystem (@tapclap.match-x.engine.systems)"),l=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),m=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n,o,a=this,s=!1,m=new Set((null!==(o=null===(n=this._world.getState(l.EmitSystem.STATE_EMIT))||void 0===n?void 0:n.data)&&void 0!==o?o:[]).map(function(e){return e.emitterEntity}));try{for(var u=r(this._world.getComponentsByClass(c.GridComponent)),d=u.next();!d.done;d=u.next())return d.value.grid.forEachEntities(function(e,t){m.has(e)&&e.getEnabledComponentByClass(i.DestroyAfterEmitComponent)&&(s=!0,t.setEntity(null,e.layer),a._world.pushState(p.RemoveSystem.STATE,{cell:t,entity:e}))}),s}catch(y){e={error:y}}finally{try{d&&!d.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}},t.KEY="destroyAfterEmit",t}(s.PipelineProcessSystem);n.DestroyAfterEmitSystem=m,cc._RF.pop()},{"./DestroyAfterEmitComponent (@tapclap.match-x.engine.components)":"DestroyAfterEmitComponent (@tapclap.match-x.engine.components)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RemoveSystem (@tapclap.match-x.engine.systems)":"RemoveSystem (@tapclap.match-x.engine.systems)"}],"DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"5cfeeu8WBpStaSxAJq9O9OD","DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.DestroyAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(){return e.call(this)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.build=function(e){var t=[],n=null==e?void 0:e.data;if(n){var o=new a.FunctionAnimation(function(){for(var e,t=function(){var t,n=e.value.entity,o=null==(t=n.getEnabledComponent("render"))?void 0:t.node;o&&cc.isValid(o)&&(n.getEnabledComponent("animation").settled||Promise.resolve()).then(function(){return o.destroy()})},o=r(n);!(e=o()).done;)t()});t.push({animation:o})}return[t]},o}(o.GameActionBuilder);n.DestroyAnimationBuilder=p,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"DestroySystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"6a7f42TbZpaBqDQoKI8inB3","DestroySystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.DestroySystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./RemoveSystem (@tapclap.match-x.engine.systems)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i._processDestroy=function(e){for(var t,n=r(e);!(t=n()).done;){var o=t.value.entity,a=o.getEnabledComponent("render");if(a){var i=a.node;if(i&&i.destroy instanceof Function){var c=o.getEnabledComponent("animation");(c?c.settled:Promise.resolve()).then(this._destroy.bind(this,i))}}}},i.process=function(){for(var e=0,t=[a.RemoveSystem.STATE,o.STATE_DESTROY];e<t.length;e++){var n=t[e],r=this._world.getState(n);r&&this._processDestroy(r.data)}return!1},i._destroy=function(e){e.destroy()},o}(o.PipelineProcessSystem);n.DestroySystem=p,p.KEY=Symbol("DestroySystem.KEY"),p.STATE_DESTROY=Symbol("DestroySystem.STATE_DESTROY"),cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RemoveSystem (@tapclap.match-x.engine.systems)":"RemoveSystem (@tapclap.match-x.engine.systems)"}],"DevConsole (@tapclap.game-kit.devconsole)":[function(e,t,n){"use strict";cc._RF.push(t,"3018chdK5VU3ZtNlo2mGQYA","DevConsole (@tapclap.game-kit.devconsole)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsole=void 0;var o=function(){function e(e,t){void 0===t&&(t={}),this._items=t,this._configService=e}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAvailable",{get:function(){return!!this._configService.getValue("debug")},enumerable:!1,configurable:!0}),e}();n.DevConsole=o,cc._RF.pop()},{}],"DevConsoleButtonComponent (scripts.devconsole)":[function(e,t,n){"use strict";cc._RF.push(t,"5b392C266hYPb+6rK/Fu7/W","DevConsoleButtonComponent (scripts.devconsole)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleButtonComponent=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callback=function(e){192===e.keyCode&&(t.node.active=!t.node.active,cc.debug.setDisplayStats(t.node.active))},t}return a(t,e),t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._callback,this)},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._callback,this)},r([i],t)}(cc.Component);n.DevConsoleButtonComponent=c,cc._RF.pop()},{}],"DevConsoleCommand (@tapclap.game-kit.devconsole)":[function(e,t,n){"use strict";cc._RF.push(t,"180b5RVLqdVI5c+h3jsyb+C","DevConsoleCommand (@tapclap.game-kit.devconsole)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleCommand=void 0;var o=function(){function e(){this._devConsoleComponent=null}return e.prototype.execute=function(){return Promise.resolve()},e.prototype.setDevConsoleComponent=function(e){this._devConsoleComponent=e},Object.defineProperty(e.prototype,"devConsoleComponent",{get:function(){return this._devConsoleComponent},enumerable:!1,configurable:!0}),e}();n.DevConsoleCommand=o,cc._RF.pop()},{}],"DevConsoleComponent (@tapclap.game-kit.devconsole.components)":[function(e,t,n){"use strict";cc._RF.push(t,"100b2KxTMRZRZJ9IL858B3P","DevConsoleComponent (@tapclap.game-kit.devconsole.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleComponent=void 0;var c=e("./DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)"),s=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),p=cc._decorator,l=p.ccclass,m=p.property,u=p.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._content=null,t._itemPrefab=null,t._editbox=null,t._editboxResolve=null,t._items={},t._currentPath=null,t}return a(t,e),t.prototype._renderMenu=function(e){var t,n;void 0===e&&(e=null);var o=this._getItemsByParent(e);if(Object.keys(o).length>0){if(this._content.removeAllChildren(),e){var a=e.split("/").slice(0,-1),r=a.pop();this._renderMenuItem(a.join("/"),r,{title:"< \u041d\u0430\u0437\u0430\u0434"}),this._renderEmptyMenuItem()}try{for(var c=i(Object.keys(o)),p=c.next();!p.done;p=c.next()){var l=p.value,m=!0;if(o[l].items){var u;u=o[l].items instanceof s.DevConsoleMenuGenerator?o[l].items.generate():o[l].items,m=Object.keys(u).length>0}m&&this._renderMenuItem(e,l,o[l])}}catch(d){t={error:d}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}this._currentPath=e}},t.prototype._getItemsByParent=function(e){return e?e.split("/").reduce(function(e,t){var n=e[t]&&e[t].items||{};return n instanceof s.DevConsoleMenuGenerator?n.generate():n},this._items):this._items},t.prototype._renderMenuItem=function(e,t,n){var o=this,a=cc.instantiateFrom(this._itemPrefab);a.getComponent(c.DevConsoleItemComponent).setTitle(n.title);var r=function(){var n=[e,t].filter(function(e){return e}).join("/");o._renderMenu(n)};n.command&&(n.command.setDevConsoleComponent(this),r=function(){Promise.resolve().then(function(){return n.closeBefore&&o.hide()}).then(function(){return n.command.execute()}).then(function(){return n.closeAfter&&o.hide()})}),r&&a.on(cc.Node.EventType.TOUCH_END,r),this._content.addChild(a)},t.prototype._renderEmptyMenuItem=function(){var e=cc.instantiateFrom(this._itemPrefab);e.getComponent(c.DevConsoleItemComponent).setTitle(""),this._content.addChild(e)},t.prototype.show=function(e){var t=this;void 0===e&&(e=null);var n=this.node.parent;this._renderMenu(e),this.node.setContentSize(n.getContentSize()),this.node.setPosition(new cc.Vec2(0,n.height)),this.node.active=!0;var o=n.getPosition().subSelf(new cc.Vec2(n.width,n.height).mulSelf(.5));return new Promise(function(e){t.node.runAction(cc.sequence([cc.moveTo(.3,o).easing(cc.easeIn(1)),cc.callFunc(e)]))})},t.prototype.hide=function(){var e=this;return new Promise(function(t){e.node.runAction(cc.sequence([cc.fadeOut(.1),cc.callFunc(function(){return e.node.parent.removeChild(e.node)}),cc.callFunc(t)]))})},t.prototype.addItems=function(e){Object.assign(this._items,e)},t.prototype.showEditbox=function(e){var t=this;return void 0===e&&(e=""),this._content.active=!1,this._editbox.node.active=!0,this._editbox.string="",this._editbox.placeholderLabel.string=e,this._editbox.focus(),new Promise(function(e){t._editboxResolve=e})},t.prototype.hideEditbox=function(){this._content.active=!0,this._editbox.node.active=!1},t.prototype.onEditboxReturn=function(){this._editboxResolve(this._editbox.string),this.hideEditbox()},t.prototype.onEditboxCancel=function(){this.hideEditbox()},t.prototype.onLoad=function(){this._editbox&&(this._editbox.node.active=!1),this.node.active=!1},t.prototype.updateMenu=function(){this._renderMenu(this._currentPath)},t.prototype.goBack=function(){var e=this._currentPath.split("/").slice(0,-1).join("/");this._renderMenu(e)},r([m({type:cc.Node,visible:!0})],t.prototype,"_content",void 0),r([m({type:cc.Prefab,visible:!0})],t.prototype,"_itemPrefab",void 0),r([m({type:cc.EditBox,visible:!0})],t.prototype,"_editbox",void 0),r([l,u("Game-Kit/DevConsole/Content")],t)}(cc.Component);n.DevConsoleComponent=d,cc._RF.pop()},{"./DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"DevConsoleConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"0da4bot/gdTkqjES5gPMLNQ","DevConsoleConfig (scripts.config)"),n.__esModule=!0,n.DevConsoleConfig=void 0;var o,a=e("./DI (@tapclap.utils-js.di)"),r=e("./DevConsole (@tapclap.game-kit.devconsole)"),i=e("./Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),c=e("./UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),s=e("./MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),p=e("./UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),l=e("./CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),m=e("./ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),u=e("./I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),d=e("./MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),y=e("./PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),f=e("./CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)"),h=e("./MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)"),g=e("./ActionConstants (scripts.config)"),v=e("./Match3GameComponent (scripts.scenes.match3-game)"),_=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),b=e("./ScoreSystem (@tapclap.match-x.engine.systems.score-system)"),C=e("./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)"),w=e("./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"),S=e("./MockNotificationAdapter (scripts.social-service.adapters)"),E=e("./MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)"),x=e("./DIConfig (scripts.config)"),A={DevConsole:a.DI.instance(r.DevConsole,a.DI.cfg("ConfigService"),{user:{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",items:a.DI.instance(p.UserDevConsoleMenuGenerator,{startScene:"Start",itemsGenerator:a.DI.instance(c.UserItemDevConsoleMenuGenerator,{factory:a.DI.cfg("UserItemFactory"),titles:{"booster:trowel":"\u0411\u0443\u0441\u0442\u0435\u0440 [\u041b\u043e\u043f\u0430\u0442\u043a\u0430]","booster:cart":"\u0411\u0443\u0441\u0442\u0435\u0440 [\u0422\u0435\u043b\u0435\u0436\u043a\u0430]","booster:cat":"\u0411\u0443\u0441\u0442\u0435\u0440 [\u041a\u043e\u0442]","booster:plusone":"\u0411\u0443\u0441\u0442\u0435\u0440 [+1]","currency:coins":"\u041c\u043e\u043d\u0435\u0442\u044b","attempts:lives":"\u0416\u0438\u0437\u043d\u0438 [\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043c\u0435\u0442\u0430]","attempts:unlimited":"\u0411\u0435\u0437\u043b\u0438\u043c\u0438\u0442 [\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043c\u0435\u0442\u0430]","tags:payer":"\u0422\u044d\u0433 [\u041f\u043b\u0430\u0442\u0435\u043b\u044c\u0449\u0438\u043a]","products:noviceSet":"\u041f\u0430\u043a\u0435\u0442 \u043d\u043e\u0432\u0438\u0447\u043a\u0430","startbooster:superTile":"\u041f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u041a\u043e\u043d\u0444\u0435\u0442\u043d\u0438\u0446\u0430]","timebooster:superTile":"\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u041a\u043e\u043d\u0444\u0435\u0442\u043d\u0438\u0446\u0430]","startbooster:addmoves":"\u041f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u041f\u0435\u0441\u043e\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u044b]","timebooster:addmoves":"\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u041f\u0435\u0441\u043e\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u044b]","startbooster:candybomb":"\u041f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u0412\u0437\u0440\u044b\u0432\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0435\u0442\u0430]","timebooster:candybomb":"\u0412\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0440\u0435\u0434\u044b\u0433\u0440\u043e\u0432\u043e\u0439 \u0431\u0443\u0441\u0442\u0435\u0440 [\u0412\u0437\u0440\u044b\u0432\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0435\u0442\u0430]"},excludeKeys:["piggybank:coins","products:piggybank"],userManager:a.DI.cfg("UserManager")}),runMetaGameActionKey:g.ACTIONS.RUN_META_GAME,userService:a.DI.cfg("UserService"),storage:a.DI.cfg("PlatformStorage"),userManager:a.DI.cfg("UserManager"),sceneManager:a.DI.cfg("SceneManager"),actionManager:a.DI.cfg("ActionManager"),metaGameManager:a.DI.cfg("MetaGameManager")})},game:{title:"\u0418\u0433\u0440\u043e\u0432\u0430\u044f",items:a.DI.instance(i.Match3GameDevConsoleMenuGenerator,{sceneManager:a.DI.cfg("SceneManager"),sceneComponentInstance:v.Match3GameComponent,keys:{winLoseSystem:{win:_.WinLoseSystem.RESULT.WIN,lose:_.WinLoseSystem.RESULT.LOSE,state:_.WinLoseSystem.STATE},scoreSystem:{state:b.ScoreSystem.STATE},movesReducingSystem:{state:C.MovesReducingSystem.STATE},shuffleSystem:{doState:w.ShuffleSystem.STATE_DO_SHUFFLE}}})},metas:{title:"\u041c\u0435\u0442\u0430",items:a.DI.instance(s.MetaGamesDevConsoleMenuGenerator,{metaGameManager:a.DI.cfg("MetaGameManager")})},"meta-events":{title:"\u0420\u0435\u0441\u0442\u0430\u0440\u0442 \u043c\u0435\u0442\u0430-\u0441\u043e\u0431\u044b\u0442\u0438\u0439",items:a.DI.instance(h.MetaEventsDevConsoleMenuGenerator)},actions:{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",items:a.DI.instance(l.CompositeDevConsoleMenuGenerator,[a.DI.instance(m.ActionsDevConsoleMenuGenerator,{actionManager:a.DI.cfg("ActionManager"),actions:(o={},o[g.ACTIONS.WINDOW_MENU]="\u041e\u043a\u043d\u043e [\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438]",o[g.ACTIONS.WINDOW_FRIENDS]="\u041e\u043a\u043d\u043e [\u0414\u0440\u0443\u0437\u044c\u044f]",o[g.ACTIONS.WINDOW_MESSAGE_CENTER]="\u041e\u043a\u043d\u043e [\u041c\u0435\u0441\u0441\u0435\u0434\u0436 \u0446\u0435\u043d\u0442\u0440]",o[g.ACTIONS.WINDOW_LIVES_SHOP]="\u041e\u043a\u043d\u043e [\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u0436\u0438\u0437\u043d\u0435\u0439]",o[g.ACTIONS.WINDOW_COINS_SHOP]="\u041e\u043a\u043d\u043e [\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043c\u043e\u043d\u0435\u0442]",o[g.ACTIONS.WINDOW_NO_FUNDS]="\u041e\u043a\u043d\u043e [\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u043e\u043d\u0435\u0442]",o[g.ACTIONS.WINDOW_EPISODES]="\u041e\u043a\u043d\u043e [\u041a\u043d\u0438\u0433\u0430 \u0440\u0435\u0446\u0435\u043f\u0442\u043e\u0432]",o[g.ACTIONS.NOTIFICATION_REQUEST]={title:"\u041e\u043a\u043d\u043e [\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f]",options:{ignoreCooldown:!0,notificationAdapter:a.DI.instance(S.MockNotificationAdapter)}},o[g.ACTIONS.WINDOW_NO_CONNECTION]={title:"\u041e\u043a\u043d\u043e [\u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f]",options:{gateway:a.DI.cfg("ServiceGateway")}},o[g.ACTIONS.WINDOW_SESSION_EXPIRED]={title:"\u041e\u043a\u043d\u043e [\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0430\u044f \u0441\u0435\u0441\u0441\u0438\u044f]",options:{gateway:a.DI.cfg("ServiceGateway")}},o)}),a.DI.instance(d.MetaActionsDevConsoleMenuGenerator,{metaGameManager:a.DI.cfg("MetaGameManager"),generators:{common:a.DI.instance(f.CommonMetaDevConsoleMenuGenerator,{actionManager:a.DI.cfg("ActionManager")})}})])},locales:{title:"\u042f\u0437\u044b\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f",items:a.DI.instance(u.I18NDevConsoleMenuGenerator,{i18n:a.DI.cfg("I18N"),storage:a.DI.cfg("PlatformStorage")})},platform:{title:"\u041f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430",items:a.DI.instance(y.PlatformDevConsoleMenuGenerator,{platformStorage:a.DI.cfg("PlatformStorage")})},messageCenter:{title:"\u041c\u0435\u0441\u0441\u0430\u0434\u0436-\u0446\u0435\u043d\u0442\u0440",items:a.DI.instance(E.MessageCenterDevConsoleMenuGenerator,{gateway:a.DI.cfg(x.DIConfig.ServiceGateway)})}})};n.DevConsoleConfig=A,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)":"CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)","./CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DIConfig (scripts.config)":"DIConfig (scripts.config)","./DevConsole (@tapclap.game-kit.devconsole)":"DevConsole (@tapclap.game-kit.devconsole)","./I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./Match3GameComponent (scripts.scenes.match3-game)":"Match3GameComponent (scripts.scenes.match3-game)","./Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)":"MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)","./MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)":"MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)","./MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./MockNotificationAdapter (scripts.social-service.adapters)":"MockNotificationAdapter (scripts.social-service.adapters)","./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)":"MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)","./PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./ScoreSystem (@tapclap.match-x.engine.systems.score-system)":"ScoreSystem (@tapclap.match-x.engine.systems.score-system)","./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)","./UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)":[function(e,t,n){"use strict";cc._RF.push(t,"2feda4+ZLNfIJKa2OJldDBn","DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleItemComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.menu,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.setTitle=function(e){this.node.getComponent(cc.Label).string=e.toString().slice(0,1).toUpperCase()+e.toString().slice(1)},r([c,s("Game-Kit/DevConsole/Item")],t)}(cc.Component);n.DevConsoleItemComponent=p,cc._RF.pop()},{}],"DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)":[function(e,t,n){"use strict";cc._RF.push(t,"1ddccSgQ+RYh6QwW6dfhEjD","DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleLauncherComponent=void 0;var i=e("./DevConsoleComponent (@tapclap.game-kit.devconsole.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.menu,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._contentPrefab=null,t._buttonPrefab=null,t._buttonHolder=null,t._parent=null,t._opening=!1,t._devConsole=null,t}return a(t,e),t.prototype.open=function(){var e=this;if(!this._opening){var t=cc.instantiateFrom(this._contentPrefab),n=t.getComponent(i.DevConsoleComponent);return this._opening=!0,this._parent.addChild(t),n.addItems(this._devConsole.items),n.show().then(function(){return e._opening=!1})}return Promise.resolve()},t.prototype.setDevConsole=function(e){if(this._devConsole=e,this._devConsole)if(this._buttonHolder.active=!0,this._devConsole.isAvailable){if(this._contentPrefab&&this._buttonPrefab&&this._buttonHolder){var t=cc.instantiateFrom(this._buttonPrefab);this._buttonHolder.addChild(t)}}else this._buttonHolder&&(this._buttonHolder.active=!1);else this._buttonHolder.active=!1},r([p({type:cc.Prefab,visible:!0})],t.prototype,"_contentPrefab",void 0),r([p({type:cc.Prefab,visible:!0})],t.prototype,"_buttonPrefab",void 0),r([p({type:cc.Node,visible:!0})],t.prototype,"_buttonHolder",void 0),r([p({type:cc.Node,visible:!0})],t.prototype,"_parent",void 0),r([s,l("Game-Kit/DevConsole/Launcher")],t)}(cc.Component);n.DevConsoleLauncherComponent=m,cc._RF.pop()},{"./DevConsoleComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleComponent (@tapclap.game-kit.devconsole.components)"}],"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":[function(e,t,n){"use strict";cc._RF.push(t,"5f262d0uKJeKIZJCGNiVZPK","DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),Object.defineProperty(n,"__esModule",{value:!0}),n.DevConsoleMenuGenerator=void 0;var o=function(){function e(){}return e.prototype.generate=function(){return{}},e}();n.DevConsoleMenuGenerator=o,cc._RF.pop()},{}],"DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"a5dafwcWGpZLqrb+J0w8Atj","DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.DiagonalExplodeRetriever=void 0;var c=function(e){function t(t){var n=t.size,o=r(t,["size"]),a=e.call(this,o)||this;return a._size=n||1,a}return a(t,e),t.prototype.retrieve=function(e){var t,n,o,a;if(this.cell&&e.isContain(this.cell.row,this.cell.col)){var r=[],c=[1,-1];try{for(var s=i(c),p=s.next();!p.done;p=s.next()){var l=p.value;try{for(var m=(o=void 0,i(c)),u=m.next();!u.done;u=m.next())for(var d=u.value,y=1;y<=this._size;y++){var f=this.cell.row+y*l,h=this.cell.col+y*d;e.isContain(f,h)&&r.push(e.getCell(f,h))}}catch(g){o={error:g}}finally{try{u&&!u.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}}}catch(v){t={error:v}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return[r]}return[]},t.KEY="diagonal",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.DiagonalExplodeRetriever=c,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"DiagonalRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"37a7aS7DoBUfpjluK2Iimhk","DiagonalRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.DiagonalRetriever=void 0;var c=function(e){var t,n;function a(t){var n,o=void 0===t?{}:t,a=o.cell,r=void 0===a?null:a,i=o.size,c=void 0===i?1:i;return(n=e.call(this)||this)._cell=r,n._size=c,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.retrieve=function(e){if(this._cell&&e.isContain(this._cell.row,this._cell.col)){for(var t=[],n=this._size,a=[1,-1],r=0,i=a;r<i.length;r++)for(var c,s=i[r],p=o(a);!(c=p()).done;)for(var l=c.value,m=1;m<=n;m++){var u=this._cell.row+m*s,d=this._cell.col+m*l;e.isContain(u,d)&&t.push(e.getCell(u,d))}return[t]}return[]},a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.DiagonalRetriever=c,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"DialogComponent (@tapclap.game-kit.ui.dialogs)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3b222I4Z39Jm4GzRebHEZu8","DialogComponent (@tapclap.game-kit.ui.dialogs)"),n.__esModule=!0,n.DialogComponent=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("UI-Kit/Dialogs/DialogComponent")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.show=function(){return Promise.resolve()},r.hide=function(){return Promise.resolve()},r.setSpeaker=function(){return Promise.resolve()},r.setEmotion=function(){return Promise.resolve()},r.setSpeech=function(){return Promise.resolve()},r.setState=function(){return Promise.resolve()},o}(cc.Component))||o)||o;n.DialogComponent=i,cc._RF.pop()},{}],"DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"e6acdsi8FlMgY/IRiYx4bgQ","DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),n.__esModule=!0,n.DialogScenarioBuilder=void 0;var o=e("./DialogComponent (@tapclap.game-kit.ui.dialogs)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._dialog=null,n._holder=void 0,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i._resolveHolder=function(e){var t=this._targetResolver.resolveTarget(e);return t.length>0?t[0]:null},i.createDialog=function(e,t){var n=this;return this.addAction(function(){n._dialog=cc.instantiateFrom(e).getComponent(o.DialogComponent),n._holder=n._resolveHolder(t)}),this},i.setDialogFromHolder=function(e){var t=this;return this.addAction(function(){t._dialog=t._resolveHolder(e).getComponentInChildren(o.DialogComponent)}),this},i.setDialog=function(e){var t=this;return this.addAction(function(){t._dialog=e}),this},i.showDialog=function(){var e=this;return this.addAction(function(){e._holder&&(e._dialog.node.parent=e._holder),e._dialog.node.active=!0}),this.addAction(function(){e._backdropManager.highlight(e._dialog.node)}),this.addAction(function(){return e._dialog.show()}),this},i.hideDialog=function(){var e=this;return this.addAction(function(){e._dialog.hide().then(function(){e._holder&&e._dialog.node.destroy()})}),this},i.hideTemporaryDialog=function(){var e=this;return this.addAction(function(){e._dialog.hide()}),this},i.addSpeaker=function(e){var t=this;return this.addAction(function(){return t._dialog.setSpeaker(e)}),this},i.addEmotion=function(e){var t=this;return this.addAction(function(){return t._dialog.setEmotion(e)}),this},i.addSpeech=function(e){var t=this;return this.addAction(function(){return t._dialog.setSpeech(e)}),this},i.addState=function(e){var t=this;return this.addAction(function(){return t._dialog.setState(e)}),this},r}(e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)").TutorialScenarioBuilder);n.DialogScenarioBuilder=r,cc._RF.pop()},{"./DialogComponent (@tapclap.game-kit.ui.dialogs)":"DialogComponent (@tapclap.game-kit.ui.dialogs)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"dd060aNZHFPPbeucOI74f+V","DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.DialogScenarioProducer=void 0;var o=e("./DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),a=e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)"),r=e("./TranslationHandler (@tapclap.game-kit.translation-handler)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function a(t){var n,o=t.targetResolver,a=t.backdropManager,r=t.translationHandler,i=void 0===r?null:r;return(n=e.call(this)||this)._targetResolver=o,n._backdropManager=a,n._translationHandler=i,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=a.prototype;return c._buildSpeech=function(e,t,n,o){void 0===o&&(o={});var a=t,r={};t instanceof Object&&(a=t.speaker,r=t);var i=Object.assign({},o[a],r).emotion,c=void 0===i?{}:i;e.addSpeaker(a),c.speech&&e.addEmotion(c.speech),e.addSpeech(n),c.complete&&e.addEmotion(c.complete)},c._translate=function(e){return this._translationHandler instanceof r.TranslationHandler?this._translationHandler.translate(e):this._translationHandler?this._translationHandler(e):e},c.produce=function(e){var t=e.prefab,n=e.holder,r=e.dialog,i=e.state,c=void 0===i?a.STATE_CLOSE:i,s=new o.DialogScenarioBuilder({backdropManager:this._backdropManager,targetResolver:this._targetResolver});if(t?s.createDialog(t,n):s.setDialogFromHolder(n),s.showDialog(),s.addState(a.STATE_SHOW),r){var p=r.translation,l=r.speech,m=r.speakers;if(p&&l){if(l instanceof Array)for(var u=0;u<l.length;u++)this._buildSpeech(s,l[u],this._translate(p+"."+u),m),u<l.length-1&&s.addWaitInput();else this._buildSpeech(s,l,this._translate(p),m);c!==a.STATE_SKIP&&s.addWaitInput()}}return c!==a.STATE_SHOW&&s.addState(c),c===a.STATE_HIDE&&s.hideTemporaryDialog(),c===a.STATE_CLOSE&&s.hideDialog(),s.build()},a}(a.ScenarioProducer);n.DialogScenarioProducer=c,c.STATE_SHOW="show",c.STATE_CLOSE="close",c.STATE_HIDE="hide",c.STATE_STAY="stay",c.STATE_SKIP="skip",cc._RF.pop()},{"./DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)","./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)","./TranslationHandler (@tapclap.game-kit.translation-handler)":"TranslationHandler (@tapclap.game-kit.translation-handler)"}],"DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)":[function(e,t,n){"use strict";cc._RF.push(t,"ae816y4Sh5czq7v27IiIA78","DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DialogYandexGamesAuthProvider=void 0;var s=e("./YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)"),p=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),l=function(e){function t(t){var n,o=e.call(this,r({requireAuth:!1},t))||this;return o._dialogAuthType=null!==(n=t.dialogAuthType)&&void 0!==n&&n,o}return a(t,e),t.prototype._createAuthPayload=function(n){var o=e.prototype._createAuthPayload.call(this,n);return this._dialogAuthType?new p.AuthPayload({type:t.PROVIDER_TYPE,userId:o.userId,payload:o.payload}):o},t.prototype._signIn=function(){return i(this,void 0,Promise,function(){var t;return c(this,function(n){switch(n.label){case 0:return t=e.prototype._createAuthPayload.call(this),[4,this._sdk.openAuthDialog()];case 1:return n.sent(),[4,this._sdk.initPlayer()];case 2:return n.sent(),[2,this._createAuthPayload({prevAuthPayload:t})]}})})},t.PROVIDER_TYPE="yandex-games-dialog",t}(s.YandexGamesAuthProvider);n.DialogYandexGamesAuthProvider=l,cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)","./YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)":"YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)"}],"DimensionsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a77f7yphzVepKFtJDPJJ55n","DimensionsComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DimensionsComponent=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._cols=t.cols,n._rows=t.rows,n}return a(t,e),Object.defineProperty(t.prototype,"cols",{get:function(){return this._cols},set:function(e){this._cols=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},set:function(e){this._rows=e},enumerable:!1,configurable:!0}),t.KEY="dimensions",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DimensionsComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":[function(e,t,n){"use strict";cc._RF.push(t,"785e0Xqp2tZ5KzIvZEQYja0","DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.DimensionsGridDataLoaderPostHandler=void 0;var i=e("./DimensionsComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.process=function(e){var t,n,o=e.getEnabledComponentByClass(i.DimensionsComponent),a={},c={},s=e.cells.flat();try{for(var p=r(s),l=p.next();!l.done;l=p.next()){var m=l.value;if(m.isEnabled){var u=m.row,d=m.col;a[u]=[Math.min(d,a[u]?a[u][0]:e.rows),Math.max(d,a[u]?a[u][1]:0)],c[d]=[Math.min(u,c[d]?c[d][0]:e.cols),Math.max(u,c[d]?c[d][1]:0)]}}}catch(y){t={error:y}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}o.cols=a,o.rows=c},t}(e("./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)").GridDataLoaderPostHandler);n.DimensionsGridDataLoaderPostHandler=c,cc._RF.pop()},{"./DimensionsComponent (@tapclap.match-x.engine.components)":"DimensionsComponent (@tapclap.match-x.engine.components)","./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)":"GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)"}],"DirectionComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4f765NyndpX/pQAYy8zuxLI","DirectionComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.DirectionComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=(void 0===t?{}:t).direction;return(n=e.call(this)||this)._direction=o,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"direction",get:function(){return this._direction},set:function(e){this._direction=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DirectionComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"7f4dcGYkodYSY+LopGpWjHH","DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionWalkPathStrategy=void 0;var r=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),i=e("./WalkComponent (@tapclap.match-x.engine.components)"),c=e("./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"),s=e("./MoveComponent (@tapclap.match-x.engine.components)"),p=e("./PreventWalkPathComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t,n){var o,a=n.getEnabledComponentByClass(i.WalkComponent),c=null===(o=n.getEnabledComponentByClass(r.WalkDirectionComponent))||void 0===o?void 0:o.direction;if(a&&c){var s=this._getNextCell(e,t,c);if(s)return[s]}return[]},t.prototype._getNextCell=function(e,t,n){var o,a,r=null===(o=e.cells[t.row+n.y])||void 0===o?void 0:o[t.col+n.x];if(r){var i=null===(a=r.getEntity())||void 0===a?void 0:a.getEnabledComponentByClass(s.MoveComponent);return r.entities.some(function(e){return e.getEnabledComponentByClass(p.PreventWalkPathComponent)})?null:i?r:this._getNextCell(e,r,n)}},t.KEY="direction",t}(c.WalkPathStrategy);n.DirectionWalkPathStrategy=l,cc._RF.pop()},{"./MoveComponent (@tapclap.match-x.engine.components)":"MoveComponent (@tapclap.match-x.engine.components)","./PreventWalkPathComponent (@tapclap.match-x.engine.components)":"PreventWalkPathComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)","./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"d6a16mXc2Ndb7x+Ly6kOrVV","DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DistanceToGridEdgeAnimationComponent=n.DistanceToGridEdgeAnimationComponentComparer=void 0;var r=e("./Component (@tapclap.match-x.engine.components)");(function(e){e.LESS="<",e.MORE=">",e.EQUAL="="})(n.DistanceToGridEdgeAnimationComponentComparer||(n.DistanceToGridEdgeAnimationComponentComparer={}));var i=function(e){function t(t){var n=e.call(this)||this;return n._value=t.value,n._comparer=t.comparer,n}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"comparer",{get:function(){return this._comparer},enumerable:!1,configurable:!0}),t.KEY="distanceToGridEdgeAnimation",t}(r.Component);n.DistanceToGridEdgeAnimationComponent=i,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"9ec27o5ArtUF7/+Q/FbaMjm","DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DistanceToGridEdgeComponent=void 0;var r=function(e){function t(){var t=e.call(this)||this;return t._data=[{direction:[0,1],distance:0},{direction:[0,-1],distance:0},{direction:[1,0],distance:0},{direction:[-1,0],distance:0}],t}return a(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),t.prototype.getDistance=function(e){var t;if(e)return null===(t=this._data.find(function(t){return t.direction[0]===e.x&&t.direction[1]===e.y}))||void 0===t?void 0:t.distance},t.KEY="distanceToGridEdge",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DistanceToGridEdgeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)":[function(e,t,n){"use strict";cc._RF.push(t,"a42ab6CA/pSppMvoV2YRNQM","DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.DistanceToGridEdgeSystem=void 0;var c=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),s=e("./GridComponent (@tapclap.match-x.engine.components)"),p=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),l=e("./DimensionsComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._observableComponent=t.observableComponent,n}return a(t,e),t.prototype.process=function(){var e,n,o,a,i=this;try{for(var c=r(this._world.getEnabledComponentsByClass(s.GridComponent)),p=c.next();!p.done;p=c.next()){var l=p.value.grid,m=l.filterCells(function(e){var t;return null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(i._observableComponent)});try{for(var u=(o=void 0,r(m)),d=u.next();!d.done;d=u.next()){var y=d.value,f=this._calculateDistance(l,y);this._world.pushState(t.KEY,{cell:y,distance:f})}}catch(h){o={error:h}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}}catch(g){e={error:g}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return!1},t.prototype._calculateDistance=function(e,t){var n,o,a=e.getEnabledComponentByClass(l.DimensionsComponent),s=t.getEntity().getComponentByClass(c.DistanceToGridEdgeComponent);try{for(var p=r(s.data),m=p.next();!m.done;m=p.next()){var u=m.value,d=i(u.direction,2),y=d[0],f=d[1],h=0!==y,g=h?t.col:t.row,v=i(h?a.cols[t.row]:a.rows[t.col],2),_=v[0],b=v[1],C=h?y:f;u.distance=C>0?b-g:g-_}}catch(w){n={error:w}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}},t.KEY="StorageCellsByDirection",t}(p.PipelineProcessSystem);n.DistanceToGridEdgeSystem=m,cc._RF.pop()},{"./DimensionsComponent (@tapclap.match-x.engine.components)":"DimensionsComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"af6dcUmZAVcQqx/z1QDzo9p","DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.DoubleExplodeAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),d=e("./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)"),y=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),f=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),h=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._entityType=t.entityType,n._backdropManager=t.backdropManager,n._backdropFadeDuration=t.backdropFadeDuration,n._audioEffectsPlayer=t.audioEffectsPlayer,n}return a(t,e),t.prototype.build=function(e,t){var n=this,o=[];if(this._entityType&&(null==e?void 0:e.data)&&(null==t?void 0:t.data)){var a=e.data;if(2===a.length&&a.every(function(e){return e.entity.type===n._entityType})){var i=[{},{}];a.forEach(function(e,t){i[t]={cell:e.cell,cellNode:e.cell.getEnabledComponent(c.RenderComponent.KEY).node,entity:e.entity,entityNode:e.entity.getEnabledComponent(c.RenderComponent.KEY).node}});var g=r(i,2),v=g[0],_=g[1],b=v.entityNode.getPosition().clone().addSelf(_.entityNode.getPosition()).divSelf(2),C=[this._audioEffectsPlayer.create("doubleSuperTileRotate"),new p.FunctionAnimation(function(){n._backdropManager.show(n._backdropFadeDuration)})];C.push(new l.ChainAnimation([new p.FunctionAnimation(function(){n._backdropManager.highlight(v.entityNode)}),new m.GroupAnimation([new d.PlanetarySwapAnimation(v.entityNode,b,!0,.25),new d.PlanetarySwapAnimation(_.entityNode,b,!0,.25),new u.ActionAnimation(cc.delayTime(.1),v.entityNode)],!0)]));var w=new y.AnimationFactory(v.entity);o.push(new s.AnimationData(v.entity,new l.ChainAnimation([new m.GroupAnimation(C),new m.GroupAnimation([new u.ActionAnimation(cc.fadeOut(0),_.entityNode),new f.DummyAnimation],!0),w.createAnimation("mix",{event:"explode",timeScale:1}),new m.GroupAnimation([new h.EventTriggerAnimation(v.entity,"explode"),new h.EventTriggerAnimation(_.entity,"explode")]),this._audioEffectsPlayer.create("doubleSuperTileExplode"),new p.FunctionAnimation(function(){n._backdropManager.hide(n._backdropFadeDuration)})])))}}return[o]},t}(i.GameActionBuilder);n.DoubleExplodeAnimationBuilder=g,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)":"PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"DragComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f89aeAOPr9dYIkDcFdvO36N","DragComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.DragComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DragComponent=a,a.KEY="drag",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)":[function(e,t,n){"use strict";cc._RF.push(t,"f3a66aHEpRa8ZEwp4Fd/OLT","DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DropAfterComponent=void 0;var r=function(e){function t(t){var n=t.passDropRange,o=void 0===n?[0,0]:n,a=t.limitByGoal,r=void 0!==a&&a,i=t.entityOptions,c=void 0===i?{}:i,s=e.call(this)||this;return s._passDropRange=o,s._limitByGoal=r,s._entityOptions=c,s}return a(t,e),Object.defineProperty(t.prototype,"passDropRange",{get:function(){return this._passDropRange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"limitByGoal",{get:function(){return this._limitByGoal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityOptions",{get:function(){return this._entityOptions},enumerable:!1,configurable:!0}),t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.DropAfterComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":[function(e,t,n){"use strict";cc._RF.push(t,"0de3corSkhYXYEwRyXep792","DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DropAfterRemoveComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="dropAfterRemove",t}(e("./DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)").DropAfterComponent);n.DropAfterRemoveComponent=r,cc._RF.pop()},{"./DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)":"DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)"}],"DropComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c0b7dV9HN1eOKQFVD175V0q","DropComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.DropComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._delay=0,t.enable=!1,t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"delay",get:function(){return this._delay},set:function(e){this._delay=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./EntityPoolComponent (@tapclap.match-x.engine.components)").EntityPoolComponent);n.DropComponent=r,r.KEY="drop",cc._RF.pop()},{"./EntityPoolComponent (@tapclap.match-x.engine.components)":"EntityPoolComponent (@tapclap.match-x.engine.components)"}],"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0a4677Iun5Umr5a0/Fq6f3J","DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.DummyAnimation=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.run=function(){return this._resolve(),e.prototype.run.call(this)},r.stop=function(){return this._resolve(),e.prototype.stop.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.DummyAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"DurationFormatter (@tapclap.game-kit.ui.formatters)":[function(e,t,n){"use strict";cc._RF.push(t,"52cb2nMcOlKj6o9HQlTgKjd","DurationFormatter (@tapclap.game-kit.ui.formatters)"),n.__esModule=!0,n.DurationFormatter=void 0;var o=function(){function e(){}return e.format=function(e){e=Math.round(e);var t=Math.floor(e/86400),n=Math.floor(e/3600),o=n%24,a=Math.floor(e/60)%60,r=e%60,i=[o,a,r];return t>0&&(i=[n,a,r]),i.map(function(e){return(t=e)>9?t:"0"+t;var t}).join(":")},e}();n.DurationFormatter=o,cc._RF.pop()},{}],"EditorController (scripts.editor)":[function(e,t,n){"use strict";cc._RF.push(t,"7768cHXAxZeWbJnO7jerJ58","EditorController (scripts.editor)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EditorController=void 0;var o=e("./ActionManager (@tapclap.game-kit.action-manager)"),a=e("./ActionConstants (scripts.config)"),r=function(){function e(e){this._actionManager=e.actionManager,this._metaGameKey=e.metaGameKey,this._metaGameManager=e.metaGameManager,this._converter=e.converter,this._resourceHandler=e.resourceHandler,this._messageListener=this._handleEvent.bind(this)}return e.prototype.listen=function(){var t=this;this._status(e.TYPE_INIT,e.STATUS_WAIT),window&&(window.addEventListener(e.EVENT_NAME,this._messageListener),this._actionManager.events.on(o.ActionManager.EVENT_AFTER_ACTION,function(n){n===a.ACTIONS.RUN_META_GAME&&(t._status(e.TYPE_INIT,e.STATUS_OK),t._actionManager.events.remove(o.ActionManager.EVENT_AFTER_ACTION,null,e.KEY))},e.KEY))},e.prototype.stopListen=function(){window&&window.removeEventListener(e.EVENT_NAME,this._messageListener)},e.prototype._handleEvent=function(t){var n=this,o=t.data;if(this._validate(o)){var r=o.about,i=o.levels,c=o.levelId;this._status(e.TYPE_LEVEL_LOAD,e.STATUS_WAIT).then(function(){return n._loadLevel(r,i,c)}).then(function(e){return n._actionManager.run(a.ACTIONS.START_MATCH3_GAME,{level:e})}).then(function(){return n._status(e.TYPE_LEVEL_LOAD,e.STATUS_OK)}).catch(function(t){n._status(e.TYPE_LEVEL_LOAD,e.STATUS_ERROR),console.error(t)})}},e.prototype._loadLevel=function(e,t,n){try{var o=this._converter.convert({about:e,levels:t,levelNumber:n}),a=this._resourceHandler.createLevel(o,n);return Promise.resolve(a)}catch(r){return Promise.reject(r)}},e.prototype._status=function(e,t,n){return void 0===n&&(n="parent"),window&&window[n].postMessage({status:t,typeMessage:e},"*"),Promise.resolve()},e.prototype._validate=function(e){return!("object"!=typeof e||!e.levels)},e.KEY="editorController",e.EVENT_NAME="message",e.TYPE_INIT="playerLoad",e.TYPE_LEVEL_LOAD="levelLoad",e.STATUS_OK="ready",e.STATUS_WAIT="wait",e.STATUS_ERROR="error",e}();n.EditorController=r,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ActionManager (@tapclap.game-kit.action-manager)":"ActionManager (@tapclap.game-kit.action-manager)"}],"Effect (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"02a9eMAwttYkbzWNzRs8r8s","Effect (@tapclap.match-x.engine.effects)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Effect=void 0;var o=function(){function e(e){this._options=e}return e.prototype.apply=function(){return!0},e.prototype._canApplyEffect=function(e){var t=this._options.verifier;return!t||t.canApply(e,this._options)},e}();n.Effect=o,cc._RF.pop()},{}],"EffectFactory (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"b813bIDfX9QroSYtgfGdELw","EffectFactory (@tapclap.match-x.engine.effects)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EffectFactory=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(e("./AbstractFactory (@tapclap.utils-js.abstract-factory)").AbstractFactory);n.EffectFactory=r,cc._RF.pop()},{"./AbstractFactory (@tapclap.utils-js.abstract-factory)":"AbstractFactory (@tapclap.utils-js.abstract-factory)"}],"EffectVerifier (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"2dd37sxMZNQ+obunIjeuN7U","EffectVerifier (@tapclap.match-x.engine.effects)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EffectVerifier=void 0;n.EffectVerifier=function(){},cc._RF.pop()},{}],"EmitAfterEmitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5caccjA6Flf5LQXiSb2ay4j","EmitAfterEmitComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitAfterEmitComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitAfterEmit",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitAfterEmitComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitAfterEmitSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"a567avXbIJbTqbChyiR7yzq","EmitAfterEmitSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitAfterEmitSystem=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitAfterEmitSystem",t}(e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)").EmitSystem);n.EmitAfterEmitSystem=r,cc._RF.pop()},{"./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)"}],"EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":[function(e,t,n){"use strict";cc._RF.push(t,"a14e4plxNJYIL8fVQ25qBVy","EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitAfterRemoveComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitAfterRemove",t}(e("./DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)").DropAfterComponent);n.EmitAfterRemoveComponent=r,cc._RF.pop()},{"./DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)":"DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)"}],"EmitAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7cbf94dT1ZU4ZxTrKfnPlvB","EmitAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.EmitAnimationBuilder=void 0;var c=function(e){var t,n;function a(t){var n,o=t.creators;return(n=e.call(this)||this)._creators=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.build=function(e){for(var t,n=[],a=o(e.data);!(t=a()).done;){var r=t.value,i=this._creators[r.trigger];i&&n.push(i.create(r))}return n},a}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.EmitAnimationBuilder=c,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"EmitAnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"118c4+0Jghed4ATSiqz5ZSg","EmitAnimationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitAnimationComponent=void 0;var r=function(e){function t(t){var n,o,a,r,i,c,s=e.call(this)||this;return s._skipFlyAnimation=!1,s._fadeInDuration=0,s._flyDuration=0,s._linearFlight=!1,s._initialScale=0,s._emitterZIndex=null,s._skipFlyAnimation=null!==(n=t.skipFlyAnimation)&&void 0!==n?n:s._skipFlyAnimation,s._fadeInDuration=null!==(o=t.fadeInDuration)&&void 0!==o?o:s._fadeInDuration,s._flyDuration=null!==(a=t.flyDuration)&&void 0!==a?a:s._flyDuration,s._linearFlight=null!==(r=t.linearFlight)&&void 0!==r?r:s._linearFlight,s._initialScale=null!==(i=t.initialScale)&&void 0!==i?i:s._initialScale,s._emitterZIndex=null!==(c=t.emitterZIndex)&&void 0!==c?c:s._emitterZIndex,s}return a(t,e),Object.defineProperty(t.prototype,"skipFlyAnimation",{get:function(){return this._skipFlyAnimation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fadeInDuration",{get:function(){return this._fadeInDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flyDuration",{get:function(){return this._flyDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"linearFlight",{get:function(){return this._linearFlight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialScale",{get:function(){return this._initialScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitterZIndex",{get:function(){return this._emitterZIndex},enumerable:!1,configurable:!0}),t.KEY="emitAnimation",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitAnimationComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitAnimationCreator (@tapclap.match-x.cocos.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"9fb15WCTVFalq282OwxjzR4","EmitAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),n.__esModule=!0,n.EmitAnimationCreator=void 0;var o=function(){function e(){}return e.prototype.create=function(){throw new Error("Method not implemented")},e}();n.EmitAnimationCreator=o,cc._RF.pop()},{}],"EmitBeforeExplodeSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"652f2sVwy5RXLvjPkJj/DQq","EmitBeforeExplodeSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitBeforeExplodeSystem=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(){return e.prototype.process.call(this)},Object.defineProperty(t.prototype,"_stateKey",{get:function(){return t.STATE_EMIT},enumerable:!1,configurable:!0}),t.KEY="emitBeforeExplode",t.STATE_EMIT="emitBeforeExplodeStateEmit",t}(e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)").EmitSystem);n.EmitBeforeExplodeSystem=r,cc._RF.pop()},{"./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)"}],"EmitBeforeMoveSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"ab0dd5BpJZVNKWZAf6++zbP","EmitBeforeMoveSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitBeforeMoveSystem=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitBeforeMoveSystem",t}(e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)").EmitSystem);n.EmitBeforeMoveSystem=r,cc._RF.pop()},{"./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)"}],"EmitBeforeWalkSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"3c962BZO/hXKrD1cu+Wk4VY","EmitBeforeWalkSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitBeforeWalkSystem=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitBeforeWalkSystem",t}(e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)").EmitSystem);n.EmitBeforeWalkSystem=r,cc._RF.pop()},{"./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)"}],"EmitByGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"30555n0DdpdK4Eqr5zWMAQo","EmitByGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitByGroupComponent=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._groupKey=t.groupKey,n}return a(t,e),Object.defineProperty(t.prototype,"groupKey",{get:function(){return this._groupKey},enumerable:!1,configurable:!0}),t.KEY="emitByGroup",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitByGroupComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitByStrategyComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"73227KLPg5UyZ21F/A7g39u","EmitByStrategyComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitByStrategyComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=t.strategies,a=void 0===o?[]:o;return(n=e.call(this)||this)._strategies=a,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.setStrategies=function(e){this._strategies=[].concat(this._strategies,e)},r=c,(i=[{key:"strategies",get:function(){return this._strategies}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitByStrategyComponent=r,r.KEY="emitByStrategy",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"7bbaa56DfBW/7QrbvOOhK0d","EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitByStrategyDataLoader=void 0;var r=e("./EmitByStrategyComponent (@tapclap.match-x.engine.components)"),i=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype.load=function(e,t){var n=this._world.getComponentByClass(r.EmitByStrategyComponent);n&&n.setStrategies(t)},t}(e("./DataLoader (@tapclap.match-x.engine.systems.load-system)").DataLoader);n.EmitByStrategyDataLoader=i,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)","./EmitByStrategyComponent (@tapclap.match-x.engine.components)":"EmitByStrategyComponent (@tapclap.match-x.engine.components)"}],"EmitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"63abb2LjnFZAKPm6QSmfUrH","EmitComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitComponent=void 0;var o=e("./EntityProbability (@tapclap.match-x.engine.models)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function i(t){var n,o=t.type,a=t.target,r=t.entities,i=void 0===r?{}:r,c=t.emitCount,s=void 0===c?1:c,p=t.persistentState,l=void 0!==p&&p,m=t.state,u=void 0===m?{}:m;return(n=e.call(this)||this)._type=o,n._target=a,n._emitCount=s,n._persistentState=l,n._entities=n._prepareProbabilities(i,u),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var c,s,p=i.prototype;return p._prepareProbabilities=function(e,t){var n={};if(!this._persistentState)for(var a=0,r=Object.entries(e);a<r.length;a++){var i=r[a],c=i[0],s=i[1];n[c]=new o.EntityProbability(s)}for(var p=0,l=Object.entries(t);p<l.length;p++){var m=l[p],u=m[0],d=m[1],y=n[u];y?Number.isInteger(y.amount)&&Number.isInteger(d.amount)&&(y.amount=Math.min(y.amount,d.amount)):this._persistentState&&(n[u]=new o.EntityProbability(d))}return n},p.setEntityProbabilities=function(e){this._entities=this._prepareProbabilities(e,{})},p.setPersistentState=function(e){this._persistentState=e},p.serialize=function(){for(var e={},t={},n=0,o=Object.entries(this._entities);n<o.length;n++){var a=o[n],r=a[0],i=a[1];(this._persistentState||Number.isInteger(i.amount))&&(t[r]=i.toJSON())}return Object.keys(t).length>0&&Object.assign(e,{state:t}),this._persistentState&&Object.assign(e,{persistentState:this._persistentState}),Object.keys(e).length>0?e:null},c=i,(s=[{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"target",get:function(){return this._target},set:function(e){this._target=e}},{key:"emitCount",get:function(){return this._emitCount},set:function(e){this._emitCount=e}},{key:"entities",get:function(){return this._entities}},{key:"hasEntities",get:function(){return!!Object.values(this._entities).find(function(e){return e.amount>0})}}])&&a(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),i}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitComponent=i,i.KEY="emit",i.TYPE_RANDOM="random",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)","./EntityProbability (@tapclap.match-x.engine.models)":"EntityProbability (@tapclap.match-x.engine.models)"}],"EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"f1ec3mCCEJcCastS3L4XXOJ","EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.EmitEntityAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),r=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./AudioComponent (@tapclap.match-x.engine.components)"),p=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),m=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)");function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){var t,n;function o(t){var n,o=t.audioEffectsPlayer,a=t.durationByEntityTypes,r=void 0===a?{}:a,i=t.singleExplodeRetriverFactoryKey,c=t.defaultDuration,s=void 0===c?.1:c,p=t.soundKeys,l=void 0===p?{}:p;return(n=e.call(this)||this)._audioEffectsPlayer=o,n._soundKeys=l,n._durationByEntityTypes=r,n._defaultDuration=s,n._singleExplodeRetriverFactoryKey=i,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),o.prototype.build=function(e){for(var t,n=this,y=[],f=function(){var e=t.value,d=e.cell,f=e.entity,h=e.chunkExplodeModels,g=void 0===h?[]:h,v=n._durationByEntityTypes[f.type]||n._defaultDuration,_=f.getComponent("render").node,b=d.getComponent("render").node,C=_.scale;_.setPosition(b.position),_.opacity=0,_.scale=0;var w=f.getEnabledComponentByClass(s.AudioComponent),S=new p.DummyAnimation,E=new p.DummyAnimation;if(g.length>0){var x=g.filter(function(e){var t,o,a=e.entity,r=null==(t=a.getEnabledComponent(l.RenderComponent.KEY))?void 0:t.node,i=!a.getEnabledComponentByClass(u.ExplodeRetrieverComponent)||(null==(o=a.getEnabledComponentByClass(u.ExplodeRetrieverComponent))?void 0:o.type)===n._singleExplodeRetriverFactoryKey;return r&&i});S=new c.GroupAnimation(x.map(function(e){var t=e.entity,n=e.cell,o=e.remove,r=e.isGoalTarget,i=t.getEnabledComponent(l.RenderComponent.KEY).node;return new a.ActionAnimation(cc.sequence([cc.scaleTo(2*v,1.5).easing(cc.easeIn(2)),cc.spawn([cc.scaleTo(v,1).easing(cc.easeIn(2)),o?cc.moveTo(v,b.getPosition()).easing(cc.easeIn(2)):cc.delayTime(0),d===n||!o||r?cc.delayTime(0):cc.fadeOut(v)]),cc.callFunc(function(){new m.EventTriggerAnimation(t,"chunk-combine").run(),new m.EventTriggerAnimation(t,"explode").run()})]),i)})),E=new c.GroupAnimation(x.map(function(e){var t=e.entity,n=(e.cell,e.remove),o=e.isGoalTarget,r=t.getEnabledComponent(l.RenderComponent.KEY).node;if(r)return new i.FunctionAnimation(function(){if(n&&!o)return new a.ActionAnimation(cc.fadeOut(.2),r).run()})}))}y.push({target:f,animation:new r.ChainAnimation([new i.FunctionAnimation(function(){return _.zIndex=_.parent.children.length+1}),S,new i.FunctionAnimation(function(){return _.zIndex=f.layer}),new c.GroupAnimation([new i.FunctionAnimation(function(){if(w){var e=w.getSound(n._soundKeys[o.EMIT_SOUND_KEY]);e&&n._audioEffectsPlayer.play(e)}}),new c.GroupAnimation([new a.ActionAnimation(cc.spawn([cc.scaleTo(.2,C),cc.fadeIn(.2)]),_),E])])])})},h=d(e.data);!(t=h()).done;)f();return[y]},o}(o.GameActionBuilder);n.EmitEntityAnimationBuilder=g,g.EMIT_SOUND_KEY="emit",cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"1d9e87ybzZX1ocwhgW35oNZ","EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.EmitEntityByEntityAnimationBuilder=void 0;var s=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),d=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),y=e("./AudioComponent (@tapclap.match-x.engine.components)"),f=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),h=e("./EmitStageComponent (@tapclap.match-x.engine.components)"),g=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),v=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),_=e("./SizeComponent (@tapclap.match-x.engine.components)"),b=e("./EmitAnimationComponent (@tapclap.match-x.engine.components)"),C=function(e){function t(t){var n=t.audioEffectsPlayer,o=t.stage,a=void 0===o?null:o,r=t.emitSoundKey,i=t.duration,c=void 0===i?.25:i,s=e.call(this)||this;return s._audioEffectsPlayer=n,s._stage=a,s._emitSoundKey=r,s._duration=c,s}return a(t,e),t.prototype.build=function(e){var t,n,o,a,i,s,C=this,w=[],S=new Map;try{for(var E=r(e.data),x=E.next();!x.done;x=E.next()){var A=x.value,O=A.emitterEntity,R=A.emitterCell,P=A.targetCell,k=A.newEntity,T=A.prevEntity,I=O.getEnabledComponentByClass(h.EmitStageComponent);if(I){var M=I.stages[this._stage];if(!0===M||Array.isArray(M)&&M.includes(k.type)){var j=S.get(O)||[],L=k.getEnabledComponentByClass(g.RenderComponent).node,F=O.getEnabledComponentByClass(g.RenderComponent).node,D=null==T?void 0:T.getEnabledComponentByClass(g.RenderComponent).node,B=R.getEnabledComponentByClass(g.RenderComponent).node,G=P.getEnabledComponentByClass(g.RenderComponent).node,N=O.getEnabledComponentByClass(b.EmitAnimationComponent);j.push({newNodeEntity:L,prevNodeEntity:D,startNodeCell:B,targetNodeCell:G,emitterNodeEntity:F,emitterEntity:O,newEntity:k,isStandartFlyAnimation:R!==P,skipFlyAnimation:null==N?void 0:N.skipFlyAnimation,fadeInDuration:null!==(o=null==N?void 0:N.fadeInDuration)&&void 0!==o?o:this._duration,flyDuration:null!==(a=null==N?void 0:N.flyDuration)&&void 0!==a?a:this._duration,linearFlight:null==N?void 0:N.linearFlight,initialScale:null!==(i=null==N?void 0:N.initialScale)&&void 0!==i?i:0,emitterZIndex:null!==(s=null==N?void 0:N.emitterZIndex)&&void 0!==s?s:F.zIndex}),S.set(O,j)}}}}catch(W){t={error:W}}finally{try{x&&!x.done&&(n=E.return)&&n.call(E)}finally{if(t)throw t.error}}return S.forEach(function(e,t){var n=[],o=0;if(t){var a=new d.AnimationFactory(t);a.hasAnimation(f.AnimationResolver.TYPE_EMITTING)&&n.push(a.createAnimation(f.AnimationResolver.TYPE_EMITTING)),a.hasAnimation(f.AnimationResolver.TYPE_EMIT)&&n.push(a.createAnimation(f.AnimationResolver.TYPE_EMIT))}e.forEach(function(e){var t=e.newNodeEntity,n=e.prevNodeEntity,a=e.startNodeCell,r=e.targetNodeCell,i=e.emitterNodeEntity,s=e.emitterEntity,h=e.newEntity,b=e.isStandartFlyAnimation,S=e.skipFlyAnimation,E=e.fadeInDuration,x=e.flyDuration,A=e.linearFlight,O=e.initialScale,R=e.emitterZIndex,P=s.getEnabledComponentByClass(g.RenderComponent).node;o=P.zIndex,P.zIndex=R,t.scale=O,s.getEnabledComponentByClass(_.SizeComponent)?t.position=i.position:t.position=a.position;var k=[];a.position.equals(r.position)||k.push(new l.FunctionAnimation(function(){t.zIndex=1e3}));var T=new d.AnimationFactory(h),I=T.hasAnimation(f.AnimationResolver.TYPE_EMIT_FLY);if(k.push(new u.ActionAnimation(cc.scaleTo(E/4,1,1),t)),S)k.push(new l.FunctionAnimation(function(){return t.setPosition(r.position)}));else if(I||b)if(I&&k.push(T.createAnimation(f.AnimationResolver.TYPE_EMIT_FLY)),A)k.push(new u.ActionAnimation(cc.moveTo(x/2,r.getPosition()),t));else{var M=[t.position,cc.v2(t.x,2*Math.max(t.y,r.y)),r.position];k.push(new u.ActionAnimation(cc.bezierTo(x/2,M),t))}var j=new p.ChainAnimation([new l.FunctionAnimation(function(){var e;if(s&&C._emitSoundKey){var t=null===(e=s.getComponent(y.AudioComponent.KEY))||void 0===e?void 0:e.getSound(C._emitSoundKey);if(t)return C._audioEffectsPlayer.play(t)}}),new m.GroupAnimation(c(k,[new v.DummyAnimation]))]),L=[];T.hasAnimation(f.AnimationResolver.TYPE_EMIT_LAND)&&L.push(T.createAnimation(f.AnimationResolver.TYPE_EMIT_LAND)),n&&L.push(new u.ActionAnimation(cc.scaleTo(.05,0,0),n)),L.length>0&&j.add(new m.GroupAnimation(L,!0)),j.add(new l.FunctionAnimation(function(){return n&&n.destroy()})),j.add(new l.FunctionAnimation(function(){return t.zIndex=h.layer})),s&&j.settled.then(function(){return s.getEnabledComponentByClass(g.RenderComponent).node.zIndex=o}),w.push({target:h,animation:j})}),w.push({target:t,animation:new p.ChainAnimation(n)})}),[w]},t}(s.GameActionBuilder);n.EmitEntityByEntityAnimationBuilder=C,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EmitAnimationComponent (@tapclap.match-x.engine.components)":"EmitAnimationComponent (@tapclap.match-x.engine.components)","./EmitStageComponent (@tapclap.match-x.engine.components)":"EmitStageComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./SizeComponent (@tapclap.match-x.engine.components)":"SizeComponent (@tapclap.match-x.engine.components)"}],"EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"1d82eTem1hZPoEkxnxsx4Mk","EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),n.__esModule=!0,n.EmitEntityCompletionSystemAction=void 0;var o=e("./CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),a=e("./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)"),r=e("./EmitComponent (@tapclap.match-x.engine.components)"),i=e("./EntityProbability (@tapclap.match-x.engine.models)");function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function o(t){var n,o=t.world,a=t.maxCountPerCycle,r=t.entityKey,i=t.targetStrategy;return(n=e.call(this)||this)._world=o,n._maxCountPerCycle=a,n._entityKey=r,n._targetStrategy=i,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),o.prototype.run=function(){var e,t=this._world.getComponent("moves").getValue();return t>0&&(this._world.addComponent(a.EmitOnGameCompletionComponent.KEY,new a.EmitOnGameCompletionComponent({type:r.EmitComponent.TYPE_RANDOM,target:this._targetStrategy,entities:(e={},e[this._entityKey]=new i.EntityProbability({amount:Math.min(t,this._maxCountPerCycle)}),e),emitCount:this._maxCountPerCycle})),!0)},o}(o.CompletionSystemAction);n.EmitEntityCompletionSystemAction=s,cc._RF.pop()},{"./CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":"CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)","./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)":"EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)","./EntityProbability (@tapclap.match-x.engine.models)":"EntityProbability (@tapclap.match-x.engine.models)"}],"EmitInGridEdgeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5cd325YmhBaJZU/A9GzO5r3","EmitInGridEdgeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitInGridEdgeComponent=n.EmitInGridEdgeComponentDirections=void 0;var r=e("./Component (@tapclap.match-x.engine.components)");(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(n.EmitInGridEdgeComponentDirections||(n.EmitInGridEdgeComponentDirections={}));var i=function(e){function t(t){var n=e.call(this)||this;return n._direction=t.direction,n}return a(t,e),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!1,configurable:!0}),t.KEY="emitInGridEdge",t}(r.Component);n.EmitInGridEdgeComponent=i,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"38ce4//SgFWn59kecDWfS7o","EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitMultiplierOnDeathComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=t.count,a=void 0===o?1:o,r=t.amount,i=void 0===r?1:r;return(n=e.call(this)||this).count=a,n.amount=i,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitMultiplierOnDeathComponent=a,a.KEY="emitMultiplierOnDeath",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0d970072o1TPaA21QOcz77Y","EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnConfigurationsComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._configurations=t,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.resetConfigurations=function(){this._configurations=[]},r=c,(i=[{key:"configurations",get:function(){return this._configurations},set:function(e){this._configurations=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitOnConfigurationsComponent=r,r.KEY="emitOnConfigurations",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"87648ELTaBffIcCeCCgZSYP","EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnDeathBeforeMoveComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitOnDeathComponent (@tapclap.match-x.engine.components)").EmitOnDeathComponent);n.EmitOnDeathBeforeMoveComponent=a,a.KEY="emitOnDeathBeforeMove",cc._RF.pop()},{"./EmitOnDeathComponent (@tapclap.match-x.engine.components)":"EmitOnDeathComponent (@tapclap.match-x.engine.components)"}],"EmitOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a9a25owqExXYaXmvTSyIlo3","EmitOnDeathComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnDeathComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnDeathComponent=a,a.KEY="emitOnDeath",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"39722IJpTBSzYmadIMB0Vgg","EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnEmptyTrackComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitOnEmptyTrack",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnEmptyTrackComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnEndCounterComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"31d8ffUilJfYaab/qdbspb5","EmitOnEndCounterComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnEndCounterComponent=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._counterNumber=t.counterNumber,n._state=t.state,n}return a(t,e),Object.defineProperty(t.prototype,"counterNumber",{get:function(){return this._counterNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.KEY="emitOnEndCounter",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnEndCounterComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"86c077B6kxU34T8pj0xk07B","EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnExplodeBeforeMoveComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitOnExplodeComponent (@tapclap.match-x.engine.components)").EmitOnExplodeComponent);n.EmitOnExplodeBeforeMoveComponent=a,a.KEY="emitOnExplodeBeforeMove",cc._RF.pop()},{"./EmitOnExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeComponent (@tapclap.match-x.engine.components)"}],"EmitOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f51eck/XxVbWbSRaextc/PU","EmitOnExplodeComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnExplodeComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnExplodeComponent=a,a.KEY="emitOnExplode",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4accdlgA9ddUY1/KRga6Gms","EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnGameCompletionComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnGameCompletionComponent=a,a.KEY="emitOnGameCompletion",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnGameStartComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d9b6506QWtYBrCxrnKuwZd8","EmitOnGameStartComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnGameStartComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnGameStartComponent=a,a.KEY="emitOnGameStart",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"05beaVcBetT6oSQtWzFxCUT","EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnNonGroupExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitOnNonGroupExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitOnNonGroupExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"58642hfAyld9b92RBC3Ubhz","EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnSwapBeforeExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnSwapBeforeExplodeComponent=r,r.KEY="emitOnSwapBeforeExplode",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnTurnComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"02732zWMa9UNJOQ+Z7qt1RY","EmitOnTurnComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EmitOnTurnComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this,t)||this)._turnNumber=t.turnNumber,n._state=t.state,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"turnNumber",get:function(){return this._turnNumber}},{key:"state",get:function(){return this._state}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnTurnComponent=r,r.KEY="emitOnTurn",cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"4c66cfHX+hUjZ0rL9TkPjPO","EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnTurnEndAndCounterEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitOnTurnEndAndCounterEnd",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnTurnEndAndCounterEndComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"60c8cjkl3dcFIvjCcHDFncx","EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnTurnEndAndDeathComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitOnTurnEndAndDeath",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnTurnEndAndDeathComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"248d17bkLhTz6qI/bIAlUPE","EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnTurnEndAndExplodeComponent=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._emitAmount=0,t}return a(t,e),Object.defineProperty(t.prototype,"emitAmount",{get:function(){return this._emitAmount},set:function(e){this._emitAmount=e},enumerable:!1,configurable:!0}),t.KEY="emitOnTurnEndAndExplode",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnTurnEndAndExplodeComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitOnTurnEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a2a94AvtZNc1qK63njUKHtc","EmitOnTurnEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitOnTurnEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="emitOnTurnEnd",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.EmitOnTurnEndComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"EmitProducer (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"5c2eb4KxINbV6hICti4PhXF","EmitProducer (@tapclap.match-x.engine.systems.emit-system)"),n.__esModule=!0,n.EmitProducer=void 0;var o=function(){function e(){}return e.prototype.produce=function(){return[]},e}();n.EmitProducer=o,cc._RF.pop()},{}],"EmitStageComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"218f7zBRqtdyI5eEF1Ytp2n","EmitStageComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitStageComponent=void 0;var r=function(e){function t(t){var n=(void 0===t?{stages:{}}:t).stages,o=void 0===n?{}:n,a=e.call(this)||this;return a._stages=o,a}return a(t,e),Object.defineProperty(t.prototype,"stages",{get:function(){return this._stages},enumerable:!1,configurable:!0}),t.KEY="emitStage",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitStageComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)":[function(e,t,n){"use strict";cc._RF.push(t,"a26e0GoItlYjK0QdO3Vr89s","EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitStartBoosterStrategy=void 0;var r=e("./StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)"),i=e("./EntityProbability (@tapclap.match-x.engine.models)"),c=e("./EmitOnGameStartComponent (@tapclap.match-x.engine.components)"),s=e("./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"),p=e("./Entity (@tapclap.match-x.engine.entities)"),l=e("./GroupComponent (@tapclap.match-x.engine.components)"),m=e("./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=e.call(this,t)||this;return n._isRandomFromLevelColors=!1,n._groupColors={},n._entityType=t.entityType,n._emitCount=t.emitCount,n._isRandomFromLevelColors=t.isRandomFromLevelColors,n._targetEmitStrategy=t.targetEmitStrategy,n._emitStrategy=t.emitStrategy,n._groupColors=(null==t?void 0:t.groupColors)||{},n._random=t.random,n._stateData={type:t.startBoosterType,entities:[]},n}return a(t,e),t.prototype.apply=function(){var e=new Map,t=this._getAvaliableGroups(),n=0;for(var o in t)n+=t[o];if(n=n>0&&this._emitCount<=n?this._emitCount:n,this._isRandomFromLevelColors)for(var a=0;a<n;a++){var r=this._getRandomEntityTypeByColor(this._entityType,t);e.has(r)?e.get(r).amount+=1:(e.set(r,new i.EntityProbability({amount:1})),this._addToStateData(r))}else n>0&&(e.set(this._entityType,new i.EntityProbability({amount:n})),this._addToStateData(this._entityType));return this._stateData.entities.length>0&&(this._createEmitOnGameStartComponent(e),this._world.pushState(s.StartBoosterSystem.STATE,this._stateData),!0)},t.prototype._createEmitOnGameStartComponent=function(e){if(0!==e.size){var t=this._world.getEnabledComponent(c.EmitOnGameStartComponent.KEY);if(t){var n=t.entities;t.emitCount=t.emitCount+this._emitCount,e.forEach(function(e,t){n[t]?n[t].amount=e.amount:n[t]=e})}else{var o={type:this._emitStrategy,target:this._targetEmitStrategy,emitCount:this._emitCount,entities:Object.fromEntries(e.entries())},a=new c.EmitOnGameStartComponent(o);this._world.addComponent(c.EmitOnGameStartComponent.KEY,a)}}},t.prototype._getAvaliableGroups=function(){for(var e,t,n=p.Entity.LAYER_DEFAULT,o=this._world.getComponent("tiles").grid,a={},r=0;r<o.rows;r++)for(var i=0;i<o.cols;i++)if(o.isContain(r,i)){var c=o.getCell(r,i);if(c.isFill&&!c.getEntity(p.Entity.LAYER_UPPER)){var s=c.getEntity(n)||c.getEntity(),u=null===(e=s.getEnabledComponentByClass(l.GroupComponent))||void 0===e?void 0:e.id;if(!s.getEnabledComponentByClass(m.NotReplaceByStartBoosterComponent)){var d=null===(t=this._groupColors[u])||void 0===t?void 0:t.toLowerCase();d&&(a[d]=a[d]?a[d]+1:1)}}}return a},t.prototype._getRandomEntityTypeByColor=function(e,t){var n=[];for(var o in t)t[o]>0&&n.push(o);var a=n[this._random.getInteger(0,n.length)];return t[a]-=1,e+"-"+a},t.prototype._addToStateData=function(e){this._stateData.entities.find(function(t){return t===e})||this._stateData.entities.push(e)},t}(r.StartBoosterStrategy);n.EmitStartBoosterStrategy=u,cc._RF.pop()},{"./EmitOnGameStartComponent (@tapclap.match-x.engine.components)":"EmitOnGameStartComponent (@tapclap.match-x.engine.components)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./EntityProbability (@tapclap.match-x.engine.models)":"EntityProbability (@tapclap.match-x.engine.models)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)":"NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)","./StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)","./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"}],"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"15fb8W6Q1lXWrW6O8kMhcej","EmitStrategy (@tapclap.match-x.engine.systems.emit-system)"),n.__esModule=!0,n.EmitStrategy=void 0;var o=function(){function e(){}return e.prototype.getEmitEntity=function(){return null},e}();n.EmitStrategy=o,cc._RF.pop()},{}],"EmitSystem (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"87205bscNNWl7RO0MhcrcSa","EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),n.__esModule=!0,n.EmitSystem=void 0;var o=e("./EmitComponent (@tapclap.match-x.engine.components)"),a=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),r=e("./RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"),i=e("./EmitValidator (@tapclap.match-x.engine.systems.emit-system)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function a(t,n,a){var i,c,s=void 0===a?{}:a,p=s.producers,l=void 0===p?[]:p,m=s.strategies,u=void 0===m?{}:m,d=s.emitStrategies,y=s.validators,f=void 0===y?[]:y,h=s.limits,g=void 0===h?[]:h;return(c=e.call(this)||this)._world=t,c._entitySystem=n,c._producers=l,c._strategies=u,c._emitStrategies=d||((i={})[o.EmitComponent.TYPE_RANDOM]=new r.RandomEntityEmitStrategy({entitySystem:n}),i),c._validators=f,c._limits=g,c}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var s,p,u=a.prototype;return u._createEmitEntity=function(e,t){var n=this._emitStrategies[e];if(n)return n.getEmitEntity(t);throw new Error("Not found EmitStrategy: "+e)},u._getTargetCell=function(e,t){var n=this._strategies[e];if(n)return n.getEmitTarget(t);throw new Error("Not found EmitTargetStrategy: "+e)},u._validateEmit=function(e){for(var t,n=c(this._limits);!(t=n()).done;){var o=t.value,r=e.getEnabledComponent(o);if(r&&r.currentEmitCount>=r.maxEmitCount)return this._world.pushState(a.STATE_VALIDATE_ERROR,{code:a.VALIDATE_ERROR_MAX_EMIT_COUNT,data:{component:o}}),!1}for(var s,p=c(this._validators);!(s=p()).done;){var l=s.value.validateEmit(e);if(l.code!==i.EmitValidator.VALIDATE_SUCCESS)return this._world.pushState(a.STATE_VALIDATE_ERROR,l),!1}return!0},u._updateEmit=function(e){for(var t,n=c(this._limits);!(t=n()).done;){var o=t.value,a=e.getEnabledComponent(o);a&&a.currentEmitCount++}},u._processEmitData=function(e){for(var t,n=c(e);!(t=n()).done;){var o=t.value,r=o.grid,i=o.cell,s=o.entity,p=o.trigger,l=s.getEnabledComponent(p);if(l)for(var m=0;m<l.emitCount&&this._validateEmit(s);m++){var u=this._getTargetCell(l.target,o);if(!u){this._world.pushState(a.STATE_VALIDATE_ERROR,{code:a.VALIDATE_ERROR_NO_TARGET_CELL,grid:r,trigger:p,emitterCell:i,emitterEntity:s});break}var d=this._createEmitEntity(l.type,o);if(!d){this._world.pushState(a.STATE_VALIDATE_ERROR,{code:a.VALIDATE_ERROR_NO_ENTITY,grid:r,trigger:p,emitterCell:i,emitterEntity:s});break}var y=u.getEntity(d.layer);u.setEntity(d,d.layer),this._updateEmit(s),this._world.pushState(this._stateKey,{grid:r,trigger:p,emitterCell:i,emitterEntity:s,prevEntity:y,newEntity:d,targetCell:u})}this._world.pushState(a.STATE_PROCESS_EMIT_DATA,o)}},u._getEmitData=function(){for(var e,t=[],n=c(this._producers);!(e=n()).done;){var o=e.value;t.push.apply(t,o.produce(this._world))}return t},u.process=function(){var e=this._getEmitData();return e.length>0&&(this._processEmitData(e),!!this._world.getState(this._stateKey))},s=a,(p=[{key:"_stateKey",get:function(){return a.STATE_EMIT}}])&&l(s.prototype,p),Object.defineProperty(s,"prototype",{writable:!1}),a}(a.PipelineProcessSystem);n.EmitSystem=u,u.VALIDATE_ERROR_NO_TARGET_CELL=Symbol("EmitSystem.VALIDATE_ERROR_NO_TARGET_CELL"),u.VALIDATE_ERROR_NO_ENTITY=Symbol("EmitSystem.VALIDATE_ERROR_NO_ENTITY"),u.VALIDATE_ERROR_MAX_EMIT_COUNT=Symbol("EmitSystem.VALIDATE_ERROR_MAX_EMIT_COUNT"),u.KEY="EmitSystem.KEY",u.STATE_EMIT="EmitSystem.STATE_EMIT",u.STATE_PROCESS_EMIT_DATA=Symbol("EmitSystem.STATE_PROCESS_EMIT_DATA"),u.STATE_VALIDATE_ERROR=Symbol("EmitSystem.STATE_VALIDATE_ERROR"),cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)","./EmitValidator (@tapclap.match-x.engine.systems.emit-system)":"EmitValidator (@tapclap.match-x.engine.systems.emit-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":"RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"}],"EmitTargetComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c5cb0vUEy5XD4lf2VwPKDJW","EmitTargetComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitTargetComponent=void 0;var r=function(e){function t(t){var n=t.includeEntityTypes,o=void 0===n?[]:n,a=t.excludeEntityTypes,r=void 0===a?[]:a,i=t.layer,c=e.call(this)||this;return c._includeEntityTypes=[],c._excludeEntityTypes=[],c._excludeEntityTypes=r,c._includeEntityTypes=o,c._layer=i,c}return a(t,e),Object.defineProperty(t.prototype,"includeEntityTypes",{get:function(){return this._includeEntityTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"excludeEntityTypes",{get:function(){return this._excludeEntityTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._layer},enumerable:!1,configurable:!0}),t.KEY="emitTarget",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EmitTargetComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"20b1ecPgdRQdJnns99fcToj","EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),n.__esModule=!0,n.EmitTargetStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getEmitTarget=function(){return null},a}(e("./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").ComponentEmitTargetStrategy);n.EmitTargetStrategy=a,cc._RF.pop()},{"./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"}],"EmitValidator (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"67c6bU4jv1ZDJVDEkNVEfEh","EmitValidator (@tapclap.match-x.engine.systems.emit-system)"),n.__esModule=!0,n.EmitValidator=void 0;var o=function(){function e(){}return e.prototype.validateEmit=function(){return{code:e.VALIDATE_SUCCESS,data:{}}},e}();n.EmitValidator=o,o.VALIDATE_SUCCESS=Symbol("EmitValidator.VALIDATE_SUCCESS"),cc._RF.pop()},{}],"EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"ca76fhR/VNYspNDSySt2RUK","EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),n.__esModule=!0,n.EmitterComponentEmitTargetStrategy=void 0;var o=e("./EmitTargetComponent (@tapclap.match-x.engine.components)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.getEmitTarget=function(e){var t=e.cell,n=e.entity.getComponentByClass(o.EmitTargetComponent);if(!t.getEntity(n.layer))return t},r}(e("./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").ComponentEmitTargetStrategy);n.EmitterComponentEmitTargetStrategy=r,cc._RF.pop()},{"./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)"}],"EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"9a28d76yzpeS5ikOvJ27DMd","EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmitterGroupIdEmitTargetStrategy=void 0;var r=e("./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)"),i=e("./GroupComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.random,o=e.call(this)||this;return o._random=n,o}return a(t,e),t.prototype.getEmitTarget=function(e){var t=e.grid,n=e.entity.getEnabledComponentByClass(i.GroupComponent),o=[];return n&&t.forEachEntities(function(t,a){if(e.entity!==t){var c=t.getEnabledComponentByClass(i.GroupComponent);t.getEnabledComponentByClass(r.CanBeReplacedByEmitComponent)&&c&&c.id===n.id&&o.push(a)}}),this._random.sample(o)},t}(e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitTargetStrategy);n.EmitterGroupIdEmitTargetStrategy=c,cc._RF.pop()},{"./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)","./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"c05c8WTfDhfnZAwIoONkjTq","EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EmptyCellExplodeRetriever=void 0;var c=e("./Matrix (@tapclap.match-x.engine.models)"),s=function(e){function t(t){var n=t.limit,o=r(t,["limit"]),a=e.call(this,o)||this;return a._limit=n||0,a}return a(t,e),t.prototype.retrieve=function(e){var t,n,o=[],a=new c.Matrix(e.rows,e.cols,0),r=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]],s=this.cell?this.cell:e.cells[0][0],p=[s];a[s.row][s.col]=1;for(var l=0;p.length>0;){var m=p.shift();if(m.isEmpty&&(o.push(m),l++),this._limit&&l>=this._limit)break;try{for(var u=(t=void 0,i(r)),d=u.next();!d.done;d=u.next()){var y=d.value,f=m.row+y[0],h=m.col+y[1];e.isContain(f,h)&&!a[f][h]&&(a[f][h]=1,p.push(e.getCell(f,h)))}}catch(g){t={error:g}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}return[o]},t.KEY="emptyCell",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.EmptyCellExplodeRetriever=s,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"EmptyCellRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"342cal1ClJcvozKW22kD7rb","EmptyCellRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.EmptyCellRetriever=void 0;var o=e("./Matrix (@tapclap.match-x.engine.models)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n,o=void 0===t?{}:t,a=o.cell,r=void 0===a?null:a,i=o.limit,c=void 0===i?0:i;return(n=e.call(this)||this)._cell=r,n._limit=c,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.retrieve=function(e){var t=[],n=new o.Matrix(e.rows,e.cols,0),r=[[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0]],i=this._cell?this._cell:e.cells[0][0],c=[i];n[i.row][i.col]=1;for(var s=0;c.length>0;){var p=c.shift();if(p.isEmpty&&(t.push(p),s++),this._limit&&s>=this._limit)break;for(var l,m=a(r);!(l=m()).done;){var u=l.value,d=p.row+u[0],y=p.col+u[1];e.isContain(d,y)&&!n[d][y]&&(n[d][y]=1,c.push(e.getCell(d,y)))}}return[t]},r}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.EmptyCellRetriever=s,cc._RF.pop()},{"./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)":[function(e,t,n){"use strict";cc._RF.push(t,"a8ed1GWA7FfWIpdMfihaUbx","EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmptyEntityGridDataLoaderPostHandler=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._entitySystem=t.entitySystem,n._entityTypes=t.entityTypes,n}return a(t,e),t.prototype.process=function(e){var t=this,n=this._entitySystem.createEntity("empty-entity");e.forEachEntities(function(e,o){t._entityTypes.includes(e.type)&&o.setEntity(n,n.layer)})},t}(e("./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)").GridDataLoaderPostHandler);n.EmptyEntityGridDataLoaderPostHandler=r,cc._RF.pop()},{"./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)":"GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)"}],"EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":[function(e,t,n){"use strict";cc._RF.push(t,"ef57e1hu5lY8KMs2KpC9Jjc","EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmptyGroupEffectVerifier=void 0;var r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.canApply=function(e){var t,n=e.entities;if(n.length>0){var o=n.shift(),a=o.getEnabledComponentByClass(i.PreventBoosterApplyWithEmptyGroupComponent),c=(null===(t=o.getEnabledComponentByClass(r.GroupComponent))||void 0===t?void 0:t.id)>0;return!a||a&&c}},t}(e("./EffectVerifier (@tapclap.match-x.engine.effects)").EffectVerifier);n.EmptyGroupEffectVerifier=c,cc._RF.pop()},{"./EffectVerifier (@tapclap.match-x.engine.effects)":"EffectVerifier (@tapclap.match-x.engine.effects)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)":"PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)"}],"EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"e9b5edMq3leqbDyzZFuZgXA","EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmptyNextTrackWalkReplaceStrategy=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isValidCell=function(e,t){return!e.getEntity(t.layer)},t.KEY="emptyNextTrackWalkReplaceStrategy",t}(e("./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)").EmptyWalkReplaceStrategy);n.EmptyNextTrackWalkReplaceStrategy=r,cc._RF.pop()},{"./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"}],"EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"01d84Wesf9Uvq/O4D1n0VAh","EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EmptyWalkReplaceStrategy=void 0;var r=e("./AllowWalkComponent (@tapclap.match-x.engine.components)"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isValidCell=function(e,t){var n;return!e.getEntity(t.layer)&&!!(null===(n=e.getEntity())||void 0===n?void 0:n.getComponentByClass(r.AllowWalkComponent))},t.prototype.replaceEntity=function(e,t,n){t.setEntity(null,e.layer),n.setEntity(e,e.layer)},t.KEY="empty",t}(e("./WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkReplaceStrategy);n.EmptyWalkReplaceStrategy=i,cc._RF.pop()},{"./AllowWalkComponent (@tapclap.match-x.engine.components)":"AllowWalkComponent (@tapclap.match-x.engine.components)","./WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"Engine (@tapclap.match-x.engine)":[function(e,t,n){"use strict";cc._RF.push(t,"eff14g1ArpTcpkqRGDJcgYo","Engine (@tapclap.match-x.engine)"),n.__esModule=!0,n.Engine=void 0;var o=e("./System (@tapclap.match-x.engine.systems)"),a=function(){function e(){this._systems={}}var t=e.prototype;return t.getSystem=function(e){return this._systems[e]},t.addSystem=function(e,t){t instanceof o.System?this._systems[e]=t:console.warn("Can't add system: "+e)},e}();n.Engine=a,cc._RF.pop()},{"./System (@tapclap.match-x.engine.systems)":"System (@tapclap.match-x.engine.systems)"}],"Entity (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"94530Cum7VS/rf/mApeTh/o","Entity (@tapclap.match-x.engine.entities)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Entity=void 0;var r=function(e){function t(n,o,a){void 0===o&&(o=void 0),void 0===a&&(a=t.LAYER_DEFAULT);var r=e.call(this)||this;return r._id=void 0,r._layer=t.LAYER_DEFAULT,r._type=null!=n?n:r._type,r._id=null!=o?o:r._id,r._layer=null!=a?a:r._layer,r._components={},r}return a(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layer",{get:function(){return this._layer},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(e){return this._components[e]},t.prototype.getComponentByClass=function(e){return Object.values(this._components).find(function(t){return t instanceof e})},t.prototype.getEnabledComponentByClass=function(e){var t=this.getComponentByClass(e);return t&&t.enable?t:null},t.prototype.getComponentsByClass=function(e){return Object.values(this._components).filter(function(t){return t instanceof e})},t.prototype.getEnabledComponentsByClass=function(e){return this.getComponentsByClass(e).filter(function(e){return e.enable})},t.prototype.getEnabledComponent=function(e){var t=this._components[e];return t&&t.enable?t:null},t.prototype.addComponent=function(e,t){this._components[e]=t,t.initialize(this)},t.prototype.removeComponent=function(e){var t=this.getComponent(e);t&&(delete this._components[e],t.release())},t.prototype.removeComponentByClass=function(e){for(var t in this._components)this._components[t]instanceof e&&this.removeComponent(t)},Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){var e={id:this.id,type:this.type,components:{}};for(var t in this._components){var n=this._components[t].serialize();n&&(e.components[t]=n)}return e},t.LAYER_FLOOR=3,t.LAYER_LOWER=4,t.LAYER_DEFAULT=5,t.LAYER_UPPER=6,t}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.Entity=r,cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";cc._RF.push(t,"d3112FrCQRU2rUHxOoXQQRv","EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EntityAsGoalProbabilityFilter=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.filter=function(e){var t=Object.keys(e);return this._world.getComponent("goals").goals.find(function(e){return t.find(function(t){return e.isGoalByType(t)})})?e:{}},t}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.EntityAsGoalProbabilityFilter=r,cc._RF.pop()},{"./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";cc._RF.push(t,"87589ghEyRXkJ4QuFx4VGEH","EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityByGoalProbabilityFilter=void 0;var c=e("./DropComponent (@tapclap.match-x.engine.components)"),s=e("./EntityCountLimitComponent (@tapclap.match-x.engine.components)"),p=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=e.call(this)||this;return n._gridComponent=t.gridComponent,n._world=t.world,n._random=t.random,n}return a(t,e),t.prototype.filter=function(e,t){var n,o,a,c,p,l,m,u=this._gridComponent.grid.getComponentByClass(s.EntityCountLimitComponent),d=this._calculateEntityCounts(t),y={},f=function(t,n,o){var a=h._world.getComponent("goals").goals.find(function(e){return n.find(function(t){return e.isGoalByType(t)})});if(a){var i=a.entityTypes.reduce(function(e,t){return e+(d.get(t)||0)},0),c=Object.entries(e).filter(function(e){var t=r(e,1)[0];return n.includes(t)});if(o){var s=h._random.shuffle(c),p={},l=h._counting(a.counter,i,t);s.forEach(function(e){var t=r(e,2),n=t[0],o=t[1],a=Math.ceil(l/s.length);p[n]=Object.assign({},o,{amount:a}),l-=Math.max(0,a)}),Object.assign(y,p)}else Object.assign(y,Object.fromEntries(c))}},h=this;try{for(var g=i(u.limits),v=g.next();!v.done;v=g.next()){var _=v.value;f(x=_.amount,_.entities,_.limitByGoals)}}catch(A){n={error:A}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}try{for(var b=i(Object.entries(e)),C=b.next();!C.done;C=b.next()){var w=r(C.value,2),S=w[0],E=w[1],x=Math.min(null!==(p=E.amount)&&void 0!==p?p:0,null!==(m=null===(l=y[S])||void 0===l?void 0:l.amount)&&void 0!==m?m:E.amount);e[S]=Object.assign({},E,y[S]||{},{amount:x})}}catch(O){a={error:O}}finally{try{C&&!C.done&&(c=b.return)&&c.call(b)}finally{if(a)throw a.error}}return e},t.prototype._counting=function(e,t,n){return 0===n?0:n<e?n-t:e-t},t.prototype._calculateEntityCounts=function(e){var t=this._gridComponent.grid,n=new Map,o=new Set;return t.forEachEntities(function(t,n){o.add(t);var a=n.getEnabledComponentByClass(c.DropComponent);if(a&&a.entities.forEach(function(e){return e.forEach(function(e){return o.add(e)})}),e){var r=e.get(n.row,n.col);r&&o.add(r)}}),o.forEach(function(e){var t=e.getEnabledComponentByClass(p.MultiplierComponent),o=(n.get(e.type)||0)+1;t&&(o+=Math.max(0,t.value)),n.set(e.type,o)}),n},t}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.EntityByGoalProbabilityFilter=l,cc._RF.pop()},{"./DropComponent (@tapclap.match-x.engine.components)":"DropComponent (@tapclap.match-x.engine.components)","./EntityCountLimitComponent (@tapclap.match-x.engine.components)":"EntityCountLimitComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"EntityClassRegister (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"0d0d1/ybvpSVo0FVuin3JYm","EntityClassRegister (@tapclap.match-x.engine.entities)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EntityClassRegister=void 0;var o=e("./World (@tapclap.match-x.engine.entities)"),a=e("./Grid (@tapclap.match-x.engine.entities)"),r=e("./Cell (@tapclap.match-x.engine.entities)");n.EntityClassRegister={world:o.World,grid:a.Grid,cell:r.Cell},cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./Grid (@tapclap.match-x.engine.entities)":"Grid (@tapclap.match-x.engine.entities)","./World (@tapclap.match-x.engine.entities)":"World (@tapclap.match-x.engine.entities)"}],"EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"10fc4zGxqlekaByglC7b1F3","EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EntityComponentLevelRetriever=void 0;var o=function(){function e(){}return e.prototype.retrieve=function(){return{}},e}();n.EntityComponentLevelRetriever=o,cc._RF.pop()},{}],"EntityComponentSetComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"50ea2q52sxYlqN7HEJp4YHL","EntityComponentSetComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EntityComponentSetComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._set=[],t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.getComponentsConfig=function(e){return this._set[e]},r=c,(i=[{key:"set",set:function(e){this._set=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityComponentSetComponent=r,r.KEY="entityComponentSet",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityCountLimitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9e61fgpiiheQLmoYjSpo/2e","EntityCountLimitComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EntityCountLimitComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._limits=[],t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"limits",get:function(){return this._limits},set:function(e){this._limits=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityCountLimitComponent=r,r.KEY="entityCountLimit",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"5d3687EaUZTfav54ceicCs6","EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)"),n.__esModule=!0,n.EntityCreateHandler=void 0;var o=function(){function e(){}return e.prototype.handle=function(){},e}();n.EntityCreateHandler=o,cc._RF.pop()},{}],"EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a985cnrv7hPLL31l7Rbvc4N","EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),n.__esModule=!0,n.EntityDataExtractor=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.extract=function(e,t){for(var n,a=t.grids,r=void 0===a?[]:a,i=new Set,c=o(r);!(n=c()).done;){var s=e[n.value],p=s.probabilities,l=s.cells;if(p)for(var m=0,u=Object.keys(p);m<u.length;m++){var d=u[m];i.add(d)}if(l)for(var y,f=o(l);!(y=f()).done;){var h=y.value.entity;h&&i.add(h.type)}}return Array.from(i)},a}(e("./DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)").DataExtractor);n.EntityDataExtractor=c,cc._RF.pop()},{"./DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"}],"EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b5b8bzRt7pfU5KAUCqAsfiw","EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)"),n.__esModule=!0,n.EntityDeathSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./HealthComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.process=function(){for(var e=this._world.getEnabledComponent("tiles").grid,t=new Set,n=0;n<e.rows;n++)for(var i=0;i<e.cols;i++)for(var c,s=e.getCell(n,i),p=r(s.entities);!(c=p()).done;){var l=c.value,m=l.getEnabledComponent(a.HealthComponent.KEY);!t.has(l)&&m&&m.isDeath&&null!==m.getPrevValue()&&m.getValue()!==m.getPrevValue()&&(this._world.pushState(o.STATE,{cell:s,entity:l,grid:e,prevHealthValue:m.getPrevValue(),healthValue:m.getValue()}),t.add(l))}return!1},o}(o.PipelineProcessSystem);n.EntityDeathSystem=p,p.KEY="entityDeath",p.STATE="entityDeath",cc._RF.pop()},{"./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"EntityDestroyPoolComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c0650g/ne1Tw43YTtMGlSRY","EntityDestroyPoolComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EntityDestroyPoolComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._pool=[],t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"pool",get:function(){return this._pool},set:function(e){this._pool=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityDestroyPoolComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"ccb1fp2ZTBZ7LmbDO61t3MS","EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityDropAfterRemoveSystemStrategy=void 0;var s=e("./EntityPoolComponent (@tapclap.match-x.engine.components)"),p=e("./DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)"),l=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),m=e("./GridComponent (@tapclap.match-x.engine.components)"),u=e("./GoalCollectionComponent (@tapclap.match-x.engine.components)"),d=e("./EntityPrefixComponent (@tapclap.match-x.engine.components)"),y=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),f=e("./EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)"),h=e("./EntityWrapperContentComponent (@tapclap.match-x.engine.components)"),g=function(e){function t(t){var n=t.world,o=t.entitySystem,a=t.random,r=e.call(this)||this;return r._groups=[],r._world=n,r._entitySystem=o,r._random=a,r}return a(t,e),t.prototype.process=function(){var e,t,n,o=this,a=((null===(n=this._world.getState(l.ExplodeSystem.STATE))||void 0===n?void 0:n.data)||[]).flat().filter(function(e){var t=e.entity;return e.remove&&t.getEnabledComponentByClass(o._getTriggerComponentCtor())});if(a.length>0)try{for(var i=r(a),c=i.next();!c.done;c=i.next()){var s=c.value,p=s.entity,m=s.grid,u=p.getEnabledComponentByClass(this._getTriggerComponentCtor());if(u){var d=this._getDelay(u);this._groups.push({delay:d,entity:p,grid:m})}}}catch(y){e={error:y}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!1},t.prototype.processAfterDrop=function(){this._processGroups()},t.prototype._processGroups=function(){this._removeGroupsLimitedByGoal();var e=this._groups[0];if(e){var t=e.delay,n=e.entity,o=e.grid;if(o.getEnabledComponentByClass(s.EntityPoolComponent)&&0===t){var a=n.getEnabledComponentByClass(this._getTriggerComponentCtor());this._pushEntityGroup(o,n.type,{components:a.entityOptions})&&this._removeFromGroups(e)}else e.delay--}return!1},t.prototype._removeGroupsLimitedByGoal=function(){var e,t,n,o,a,i,p=this._getGridEntityPrefixCounts(),l=this._world.getComponentByClass(u.GoalCollectionComponent),m=function(e){var t,c,m=e.delay,u=e.entity,h=e.grid;if(h.getEnabledComponentByClass(s.EntityPoolComponent)&&0===m){var g=u.getEnabledComponentByClass(f._getTriggerComponentCtor());if(g&&g.limitByGoal){var v=l.goals.find(function(e){return e.isGoal(u)});if(!v){var _=Array.from(new Set(h.filterEntities(function(e){return e.getEnabledComponentByClass(y.GoalCollectorComponent)})));try{for(var b=(t=void 0,r(_)),C=b.next();!C.done;C=b.next())v=C.value.getEnabledComponentByClass(y.GoalCollectorComponent).goals.find(function(e){return e.isGoal(u)})}catch(E){t={error:E}}finally{try{C&&!C.done&&(c=b.return)&&c.call(b)}finally{if(t)throw t.error}}}var w=null!==(o=null===(n=u.getEnabledComponentByClass(d.EntityPrefixComponent))||void 0===n?void 0:n.value)&&void 0!==o?o:u.type,S=f._getPoolEntityPrefixCount(h,w);(!v||v.counter-S-(null!==(i=null===(a=p.get(h))||void 0===a?void 0:a.get(w))&&void 0!==i?i:0)<=0)&&f._removeFromGroups(e)}}},f=this;try{for(var h=r(c(this._groups)),g=h.next();!g.done;g=h.next())m(g.value)}catch(v){e={error:v}}finally{try{g&&!g.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}},t.prototype._removeFromGroups=function(e){this._groups.splice(this._groups.indexOf(e),1)},t.prototype._getGridEntityPrefixCounts=function(){var e,t,n=this,o=new Map,a=function(e){e.forEachEntities(function(t){var a=o.get(e)||new Map;n._getEntityTypesInWrapper(t).forEach(function(t){var n;a.set(t,(null!==(n=a.get(t))&&void 0!==n?n:0)+1),o.set(e,a)})})};try{for(var i=r(this._world.getComponentsByClass(m.GridComponent)),c=i.next();!c.done;c=i.next())a(c.value.grid)}catch(s){e={error:s}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o},t.prototype._getPoolEntityPrefixCount=function(e,t){var n=e.getEnabledComponentByClass(s.EntityPoolComponent);return c(n.entities).flat().filter(function(e){var n,o;return(null!==(o=null===(n=e.getEnabledComponentByClass(d.EntityPrefixComponent))||void 0===n?void 0:n.value)&&void 0!==o?o:e.type)===t}).length},t.prototype._pushEntityGroup=function(e,t,n){return e.getEnabledComponentByClass(s.EntityPoolComponent).pushEntityGroup([this._entitySystem.createEntity(t,n)]),!0},t.prototype._getTriggerComponentCtor=function(){return p.DropAfterRemoveComponent},t.prototype._getDelay=function(e){var t;return(t=this._random).getInteger.apply(t,c(e.passDropRange))},t.prototype._getEntityTypesInWrapper=function(e){var t,n,o;return(null===(t=e.getEnabledComponentByClass(h.EntityWrapperContentComponent))||void 0===t?void 0:t.contentPrefixes)||[null!==(o=null===(n=e.getEnabledComponentByClass(d.EntityPrefixComponent))||void 0===n?void 0:n.value)&&void 0!==o?o:e.type]},t}(f.EntityDropSystemStrategy);n.EntityDropAfterRemoveSystemStrategy=g,cc._RF.pop()},{"./DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":"DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","./EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)":"EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)","./EntityPoolComponent (@tapclap.match-x.engine.components)":"EntityPoolComponent (@tapclap.match-x.engine.components)","./EntityPrefixComponent (@tapclap.match-x.engine.components)":"EntityPrefixComponent (@tapclap.match-x.engine.components)","./EntityWrapperContentComponent (@tapclap.match-x.engine.components)":"EntityWrapperContentComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalCollectionComponent (@tapclap.match-x.engine.components)":"GoalCollectionComponent (@tapclap.match-x.engine.components)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)"}],"EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d6058xiFC9eBr2H+AqzJjFX","EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EntityDropSystem=void 0;var r=function(e){function t(t){var n=t.strategies,o=void 0===n?[]:n,a=e.call(this)||this;return a._strategies=[],a._strategies=o,a}return a(t,e),t.prototype.preProcess=function(){this._strategies.forEach(function(e){return e.preProcess()})},t.prototype.process=function(){return this._strategies.filter(function(e){return e.process()}).length>0},t.prototype.postProcess=function(e){this._strategies.forEach(function(t){return t.postProcess(e)})},t.prototype.processAfterDrop=function(){this._strategies.forEach(function(e){return e.processAfterDrop()})},t.KEY="entityDropSystem",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.EntityDropSystem=r,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)":[function(e,t,n){"use strict";cc._RF.push(t,"0ef04r6H6ZSyL7fYlFH2YWd","EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EntityDropSystemStrategy=void 0;var o=function(){function e(){}return e.prototype.preProcess=function(){},e.prototype.process=function(){return!1},e.prototype.postProcess=function(){},e.prototype.processAfterDrop=function(){},e}();n.EntityDropSystemStrategy=o,cc._RF.pop()},{}],"EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"43836+hdyFR/Zzp3R921pv7","EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityEmitAfterRemoveSystemStrategy=void 0;var s=e("./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)"),p=e("./EntityPrefixComponent (@tapclap.match-x.engine.components)"),l=e("./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)"),m=e("./WorldGroupsComponent (@tapclap.match-x.engine.components)"),u=e("./EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)"),d=function(e){function t(t){var n=t.entitiesConfig,o=r(t,["entitiesConfig"]),a=e.call(this,o)||this;return a._entitiesConfig=n,a}return a(t,e),t.prototype.process=function(){return e.prototype.process.call(this),this._processGroups()},t.prototype.postProcess=function(){},t.prototype._processGroups=function(){var e,t,n;this._removeGroupsLimitedByGoal();var o=this._groups.length>0,a=this._world.getComponentByClass(s.EmitOnTurnEndComponent)||new s.EmitOnTurnEndComponent({emitCount:1,target:"inGridEdge",type:"random"}),r=a.entities,u=function(e){var t=e.entity,o=t.type,a=t.getComponentByClass(p.EntityPrefixComponent);if(a){var c=d._world.getComponentByClass(m.WorldGroupsComponent).groups.filter(function(e){return void 0!==e}),s=d._world.getComponentByClass(l.EntityTypeGroupsComponent).groups[a.value],u=Object.entries(s).filter(function(e){var t=i(e,2),n=(t[0],t[1]);return c.includes(n)}).map(function(e){return i(e,1)[0]});o=d._random.sample(u)}var y=null!==(n=r[o])&&void 0!==n?n:{amount:0};y.amount++,r[o]=y,d._removeFromGroups(e)},d=this;try{for(var y=c(this._groups),f=y.next();!f.done;f=y.next())u(f.value)}catch(h){e={error:h}}finally{try{f&&!f.done&&(t=y.return)&&t.call(y)}finally{if(e)throw e.error}}return a.setEntityProbabilities(r),this._world.addComponent(s.EmitOnTurnEndComponent.KEY,a),o},t.prototype._getTriggerComponentCtor=function(){return u.EmitAfterRemoveComponent},t.prototype._pushEntityGroup=function(){return!1},t}(e("./EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)").EntityDropAfterRemoveSystemStrategy);n.EntityEmitAfterRemoveSystemStrategy=d,cc._RF.pop()},{"./EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)":"EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndComponent (@tapclap.match-x.engine.components)","./EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)":"EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)","./EntityPrefixComponent (@tapclap.match-x.engine.components)":"EntityPrefixComponent (@tapclap.match-x.engine.components)","./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)":"EntityTypeGroupsComponent (@tapclap.match-x.engine.components)","./WorldGroupsComponent (@tapclap.match-x.engine.components)":"WorldGroupsComponent (@tapclap.match-x.engine.components)"}],"EntityFactory (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"7df90K2g+lakZynstMTh/Xe","EntityFactory (@tapclap.match-x.engine.entities)"),n.__esModule=!0,n.EntityFactory=void 0;var o,a=(o=e("merge-options"))&&o.__esModule?o:{default:o},r=e("./Entity (@tapclap.match-x.engine.entities)"),i=function(){function e(e,t,n,o,a){void 0===t&&(t={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===a&&(a=null),this._componentFactory=e,this._entityClasses=t,this._entitites=n,this._componentTemplates=o,this._idGenerator=a}var t=e.prototype;return t._createEntity=function(e,t){var n=t.id||this._idGenerator&&this._idGenerator();return this._entityClasses[e]?new this._entityClasses[e](e,t):new r.Entity(e,n,this._entitites[e].layer)},t._createComponent=function(e,t){return this._componentFactory.create(e,t)},t._getComponentsConfiguration=function(t){void 0===t&&(t={});for(var n={},o=0,a=Object.entries(t);o<a.length;o++){var r=a[o],i=r[0],c=r[1],s=this._componentTemplates[i];s&&("object"==typeof s?n=Object.assign(n,s,c):"function"==typeof s&&(n=Object.assign(n,s(c))))}return Object.assign(n,t[e.COMPONENT_KEY])},t.create=function(e,t){void 0===t&&(t={});var n=this._entitites[e];if(n){var o=this._createEntity(e,t),r=(0,a.default)(this._getComponentsConfiguration(n),this._getComponentsConfiguration(t));if(r instanceof Object)for(var i=0,c=Object.entries(r);i<c.length;i++){var s=c[i],p=s[0],l=s[1];void 0!==l&&o.addComponent(p,this._createComponent(p,l))}return o}throw new Error("Can't create Entity by type: "+e)},e}();n.EntityFactory=i,i.COMPONENT_KEY="components",cc._RF.pop()},{"./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","merge-options":3}],"EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)":[function(e,t,n){"use strict";cc._RF.push(t,"e9cd7NTYR9RwZHSMKp6idLX","EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityGroupReplaceEntitySystemStrategy=void 0;var i=e("./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)"),c=e("./WorldGroupsComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(t){var n=t.world,o=t.random,a=t.entityFactory,r=t.replaceComponents,i=void 0===r?[]:r,c=e.call(this)||this;return c._replaceComponents=[],c._world=n,c._random=o,c._entityFactory=a,c._replaceComponents=i,c}return a(t,e),t.prototype.process=function(e,n){var o=this._world.getComponentByClass(i.EntityTypeGroupsComponent),a=this._world.getComponentByClass(c.WorldGroupsComponent),s=n.type.split("-")[0];if(o&&a){var p=o.groups[s];if(p){var l=Object.entries(p).filter(function(e){var t=r(e,2),o=t[0],i=t[1];return o!==n.type&&a.groups.includes(i)}).map(function(e){return r(e,1)[0]});if(l.length>0){var m=this._entityFactory.create(this._random.sample(l));return e.setEntity(m,n.layer),this._replaceComponents.forEach(function(e){var t=n.getComponentByClass(e);t&&m.addComponent(e.KEY,t)}),{prevEntity:n,entity:m,cell:e,trigger:t.KEY}}}}},t.KEY="EntityGroupReplaceEntitySystemStrategy",t}(e("./ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)").ReplaceEntitySystemStrategy);n.EntityGroupReplaceEntitySystemStrategy=s,cc._RF.pop()},{"./EntityTypeGroupsComponent (@tapclap.match-x.engine.components)":"EntityTypeGroupsComponent (@tapclap.match-x.engine.components)","./ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)":"ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)","./WorldGroupsComponent (@tapclap.match-x.engine.components)":"WorldGroupsComponent (@tapclap.match-x.engine.components)"}],"EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"9e67f77oyNTTajQ2RrR19qt","EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)"),n.__esModule=!0,n.EntityLockCreator=void 0;var o=function(){function e(){}return e.prototype.createLock=function(e,t){void 0===t&&(t={})},e}();n.EntityLockCreator=o,cc._RF.pop()},{}],"EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"36aadrNTtZWQrkVi8sf0yIp","EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)"),n.__esModule=!0,n.EntityLockFactory=void 0;var o=function(){function e(e){void 0===e&&(e={}),this._creators=e}return e.prototype.createLock=function(e,t){var n=this._creators[t.type];if(!n)throw new Error("Not found EntityLockCreator: "+t.type);n.createLock(e,t)},e}();n.EntityLockFactory=o,cc._RF.pop()},{}],"EntityPoolComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"64f8eWSAlxUmLT+0dm/K4fP","EntityPoolComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EntityPoolComponent=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._entities=[],t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.hasEntityGroups=function(){return!!this._entities.length},s.getEntityGroup=function(){return this._entities[0]},s.popEntityGroup=function(){return this._entities.shift()},s.pushEntityGroup=function(e){if(!Array.isArray(e))throw new Error("Entities param must be a array of entities");this._entities.push(e)},i=r,(c=[{key:"entities",get:function(){return this._entities}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityPoolComponent=r,r.KEY="entityPool",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityPrefixComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"8306cTLeVtU/LmOvmpiVEOT","EntityPrefixComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EntityPrefixComponent=void 0;var r=function(e){function t(t){var n=t.value,o=e.call(this)||this;return o._value=n,o}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.KEY="entityPrefix",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityPrefixComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityProbability (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"28d99vt+E5az7yjUiGoxNup","EntityProbability (@tapclap.match-x.engine.models)"),n.__esModule=!0,n.EntityProbability=void 0;var a=function(){function e(e){var t=void 0===e?{}:e,n=t.amount,o=void 0===n?null:n,a=t.probability,r=void 0===a?1:a,i=t.options,c=void 0===i?{}:i;this._amount=Number.isInteger(o)?o:1/0,this._probability=r,this._options=c}var t,n;return e.prototype.toJSON=function(){var e={probability:this.probability};return Number.isInteger(this.amount)&&(e.amount=this.amount),Object.keys(this.options).length>0&&(e.options=this.options),e},t=e,(n=[{key:"options",get:function(){return this._options}},{key:"amount",get:function(){return this._amount},set:function(e){this._amount=e}},{key:"probability",get:function(){return this._probability},set:function(e){this._probability=e}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.EntityProbability=a,cc._RF.pop()},{}],"EntityProbabilityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2ce98bxnrlSuZC43v90f7Eo","EntityProbabilityComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.EntityProbabilityComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._probabilities={},t._ignoredProbabilitiesOnInitialRandom=[],t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"probabilities",get:function(){return this._probabilities},set:function(e){this._probabilities=e}},{key:"ignoredProbabilitiesOnInitialRandom",get:function(){return this._ignoredProbabilitiesOnInitialRandom},set:function(e){this._ignoredProbabilitiesOnInitialRandom=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityProbabilityComponent=r,r.KEY="entityProbability",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"87079ASFU5Z26tyKNBEhUlY","EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),n.__esModule=!0,n.EntityRenderDecorator=void 0;var o=function(){function e(){}return e.prototype.decorate=function(){},e}();n.EntityRenderDecorator=o,cc._RF.pop()},{}],"EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"41facCeh81Q46Tnngk+smPE","EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.EntityRenderGameActionBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return void 0===t&&(t="entity"),(n=e.call(this)||this)._key=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){var t=this,n=[];if(e&&e.data)for(var o,c=function(){var e=o.value[t._key];e&&n.push([new r.AnimationData(e,new a.FunctionAnimation(function(){e.getEnabledComponent("render").node.active=!0}))])},s=i(e.data);!(o=s()).done;)c();return n},o}(o.GameActionBuilder);n.EntityRenderGameActionBuilder=l,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"EntityRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";cc._RF.push(t,"abb8eVc0nFdlYGzQYLUaL+K","EntityRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.EntityRenderer=void 0;var o=e("./Renderer (@tapclap.match-x.engine.systems.render-system)"),a=e("./EntityViewComponent (@tapclap.match-x.cocos.components)"),r=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),i=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n,o=t.prefabFactory,a=t.entityDecorators,r=void 0===a?{}:a,i=t.nodeActivity,c=void 0===i||i,s=t.forceRender,p=void 0!==s&&s;return(n=e.call(this)||this)._prefabFactory=o,n._decorators=r,n._nodeActivity=c,n._forceRender=p,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var s=o.prototype;return s._doRender=function(e,t){var n=t.getComponent(a.EntityViewComponent);n&&(n.entity=e);var o=new r.AnimationFactory(e).getAnimationItems(i.AnimationResolver.TYPE_STATIC);o.length>0&&o.forEach(function(e){return e.apply()})},s._applyDecorators=function(e,t){for(var n,o=c(e.getEnabledComponent("render").decorators);!(n=o()).done;){var a=n.value,r=this._decorators[a];r?r.decorate(a,e,t):cc.warn("\u0421\u0443\u0449\u043d\u043e\u0441\u0442\u044c "+e.type+" \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 "+a+", \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!")}},s.render=function(e){var t=e.getEnabledComponent("render");if(t&&(null===t.node||this._forceRender)){var n=t.node&&t.node.getPosition(),o=this._prefabFactory.createNode(e.type);o.active=this._nodeActivity,n&&o.setPosition(n),t.node&&t.node.destroy(),t.node=o,this._doRender(e,o),this._applyDecorators(e,o)}},o}(o.Renderer);n.EntityRenderer=m,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./EntityViewComponent (@tapclap.match-x.cocos.components)":"EntityViewComponent (@tapclap.match-x.cocos.components)","./Renderer (@tapclap.match-x.engine.systems.render-system)":"Renderer (@tapclap.match-x.engine.systems.render-system)"}],"EntityShakeAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f68ceLZOaJbv48iGSBA+Zt5","EntityShakeAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.EntityShakeAnimation=void 0;var a=function(e){var t,n;function a(t,n){var o;void 0===n&&(n={}),o=e.call(this)||this;var r=n,i=r.preScale,c=void 0===i?.95:i,s=r.duration,p=void 0===s?.5:s,l=r.amplitude,m=void 0===l?5:l,u=t.getPosition(),d=p/5,y=cc.sequence([cc.spawn([cc.moveTo(d,u.x-m,u.y),cc.scaleTo(d,c,c)]),cc.moveTo(d,u.x+m,u.y),cc.moveTo(d,u.x-m,u.y),cc.moveTo(d,u.x+m,u.y),cc.spawn([cc.moveTo(d,u),cc.scaleTo(d,1,1)])]);return o.addAction(y,t,a.ACTION_TAG),o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._data.target&&this._data.target.getActionByTag(a.ACTION_TAG)?Promise.resolve():e.prototype.run.call(this)},a}(e("./ActionAnimation (@tapclap.match-x.cocos.animations)").ActionAnimation);n.EntityShakeAnimation=a,a.ACTION_TAG=1,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)"}],"EntitySkinConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"91f53sfGG5Q3YIfiPnPyAz2","EntitySkinConfig (scripts.config)"),n.__esModule=!0,n.SKIN_GROUPS=n.EntitySkinConfig=void 0;var o={ENTITIES:1,CELLS:2,BACKGROUND:3};n.SKIN_GROUPS=o;var a={default:{group:o.ENTITIES,entities:{"entity-1":"prefabs-entities/base/lilac","entity-2":"prefabs-entities/base/green","entity-3":"prefabs-entities/base/pink","entity-4":"prefabs-entities/base/orange","entity-5":"prefabs-entities/base/white","entity-6":"prefabs-entities/base/blue","entity-7":"prefabs-entities/base/brown","entity-8":"prefabs-entities/base/purple","entity-9":"prefabs-entities/base/yellow",cell:"prefabs-entities/base/cell"}}};n.EntitySkinConfig=a,cc._RF.pop()},{}],"EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"32463pj7dNe7b7hgAcMeyOQ","EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityStartAnimationHandler=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),s=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),p=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),m=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),d=e("./StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)"),y=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.run=function(){var e,t,n=function(e){var t,n,o={};e.getComponent("render").node.getComponentsInChildren(c.StartAnimatorComponent).sort(function(e,t){return e.order-t.order}).forEach(function(e){var t=e.order;o[t]||(o[t]=[]),o[t].push(e.node)});var a=new m.ChainAnimation;try{for(var i=(t=void 0,r(Object.values(o))),d=i.next();!d.done;d=i.next()){var f=d.value.map(function(e){var t=e.getComponent(u.AnimationFactoryComponent).getAnimationItem(s.AnimationResolver.TYPE_START_ANIMATION);if(t)return new p.GroupAnimation([new l.ActionAnimation(cc.fadeIn(.15),e),t.create(),new y.DummyAnimation])});a.add(new p.GroupAnimation(f))}}catch(h){t={error:h}}finally{try{d&&!d.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{value:new p.GroupAnimation([a])}};try{for(var o=r(this._world.getComponentsByClass(i.GridComponent)),a=o.next();!a.done;a=o.next()){var d=n(a.value.grid);if("object"==typeof d)return d.value}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.initial=function(){var e,t;try{for(var n=r(this._world.getComponentsByClass(i.GridComponent)),o=n.next();!o.done;o=n.next())o.value.grid.getComponent("render").node.getComponentsInChildren(c.StartAnimatorComponent).forEach(function(e){var t=e.node;t.opacity=0,t.scale=1})}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(d.StartAnimationHandler);n.EntityStartAnimationHandler=f,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)":"StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)","./StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"}],"EntitySystem (@tapclap.match-x.engine.systems.entity-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e33a5xjV0RRfqqFw70NZvS6","EntitySystem (@tapclap.match-x.engine.systems.entity-system)"),n.__esModule=!0,n.EntitySystem=void 0;var a=function(e){var t,n;function a(t){var n,o=t.world,a=t.factory,r=t.random,i=t.entityCreateHandlers;return(n=e.call(this)||this)._world=o,n._factory=a,n._random=r,n._entityCreateHandlers=i||[],n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._pushState=function(e,t){this._world.pushState(e,t)},r._prepareProbabilityMap=function(e){var t={};for(var n in e)e[n].amount>0&&(t[n]=e[n].probability);return t},r.createEntity=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1),this._entityCreateHandlers.forEach(function(n){return n.handle(e,t)});var o=this._factory.create(e,t);return n||this._pushState(a.STATE_CREATE_ENTITY,{entity:o}),this._pushState(a.STATE_PERMANENT_CREATE_ENTITY,{entity:o}),o},r.createRandomEntity=function(e,t){void 0===t&&(t=!1);var n=this._random.getProbability(this._prepareProbabilityMap(e));if(n){e[n].amount--;var o=this.createEntity(n,Object.assign({},e[n].options),t);return t||this._pushState(a.STATE_CREATE_RANDOM_ENTITY,{entity:o}),o}return null},a}(e("./System (@tapclap.match-x.engine.systems)").System);n.EntitySystem=a,a.KEY="entity",a.STATE_CREATE_ENTITY="createEntity",a.STATE_CREATE_RANDOM_ENTITY="createRandomEntity",a.STATE_PERMANENT_CREATE_ENTITY="permanentCreateEntity",cc._RF.pop()},{"./System (@tapclap.match-x.engine.systems)":"System (@tapclap.match-x.engine.systems)"}],"EntityTypeGroupsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a4eb5Zesstcl4f46mVNR8NG","EntityTypeGroupsComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EntityTypeGroupsComponent=void 0;var r=function(e){function t(t){var n=t.groups,o=e.call(this)||this;return o._groups={},o._groups=null!=n?n:o._groups,o}return a(t,e),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!1,configurable:!0}),t.KEY="entityTypeGroups",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityTypeGroupsComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EntityViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"2de494mq6ZCnJpqSETn5LOp","EntityViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.EntityViewComponent=void 0;var o,a,r,i,c,s=e("./NodeHolder (@tapclap.match-x.cocos.components)"),p=e("./ViewComponent (@tapclap.match-x.cocos.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y,f,h,g,v=cc._decorator,_=v.ccclass,b=v.menu,C=v.property,w=(o=b("Match-X/EntityViewComponent"),a=C({type:[s.NodeHolder],visible:!0}),_(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_holders",c,u(t)),t._decorators=new Map,t._entity=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a,r,i=o.prototype;return i._getNodeHolder=function(e){var t=this._holders.find(function(t){return t.key===e});return t?t.node:this.node},i.getDecorator=function(e){return this._decorators.get(e)},i.addDecorator=function(e,t){var n=this._getNodeHolder(e);n&&n.addChild(t),this._decorators.set(e,t)},i.removeDecorator=function(e){var t=this._decorators.get(e);if(t){var n=this._getNodeHolder(e);n&&n.removeChild(t)}this._decorators.delete(e)},a=o,(r=[{key:"entity",get:function(){return this._entity},set:function(e){this._entity=e}}])&&m(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(p.ViewComponent),y=i.prototype,f=[a],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},g={},Object.keys(h).forEach(function(e){g[e]=h[e]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),void 0===(g=f.slice().reverse().reduce(function(e,t){return t(y,"_holders",e)||e},g)).initializer&&(Object.defineProperty(y,"_holders",g),g=null),c=g,r=i))||r)||r);n.EntityViewComponent=w,cc._RF.pop()},{"./NodeHolder (@tapclap.match-x.cocos.components)":"NodeHolder (@tapclap.match-x.cocos.components)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"EntityWrapperContentComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"465f1CJjGZVUZgxJf0/GzCs","EntityWrapperContentComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EntityWrapperContentComponent=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._content=t.content,n}return a(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentPrefixes",{get:function(){var e=new Set([]);return this._content.forEach(function(t){var n=r(t.split("-"),1)[0];e.add(n)}),Array.from(e)},enumerable:!1,configurable:!0}),t.KEY="entityWrapperContent",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EntityWrapperContentComponent=i,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b801eqZrUFcsqm284uo2KHy","EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.EpisodeEndedGameForceEndHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e){var t=e.getModule("progress"),n=e.getModule("episodes");return!(!t||!n)&&n.isLastLevelInEpisode(t.value-1)},a}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.EpisodeEndedGameForceEndHandler=a,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"8e437jn4HJEHJgSKFSq/f2+","EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)"),n.__esModule=!0,n.EpisodeStarsCheckpointRewardStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getPrevValue=function(){return this._getValue("prev")},r.getValue=function(){return this._getValue("current")},r.isAvailable=function(){return null!==this._metaGame.getModule("stars").lastChangeLevel},r._getValue=function(e){var t;void 0===e&&(e="");var n=this._metaGame.getModule("stars");if(null===n.lastChangeLevel)throw new Error("lastChangeLevel in Stars Module is null");var o=((t={})[a.VALUE_PREV]=n.getPrevSumOfRange.bind(n),t[a.VALUE_CURRENT]=n.getSumOfRange.bind(n),t),r=this._metaGame.getModule("episodes"),i=r.getAbsoluteLevelRangeByEpisode(r.getEpisodeByLevel(n.lastChangeLevel));return o[e].apply(o,i)},a}(e("./CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)").CheckpointRewardStrategy);n.EpisodeStarsCheckpointRewardStrategy=a,a.VALUE_PREV="prev",a.VALUE_CURRENT="current",cc._RF.pop()},{"./CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)":"CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)"}],"EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"dc391pXoTxYCKLDjTf/eYmM","EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EpisodeTargetResolver=void 0;var i=e("./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),c=e("./EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)"),s=function(e){function t(t){var n=e.call(this)||this;return n._hardLevelChecker=t.hardLevelChecker,n._metaGameManager=t.metaGameManager,n}return a(t,e),t.prototype.resolveTarget=function(t){var n=this,o=cc.director.getScene().getComponentInChildren(c.EpisodicSceneComponent);if(!o)return e.prototype.resolveTarget.call(this,t);var a=this._metaGameManager.getCurrentMetaGame(),s=function(e,t){var n;return(null===(n=o.map.scrollAdapter.getView(e-1))||void 0===n?void 0:n.getComponent(i.EpisodicEpisodeComponent)).getPinNodeByIndex(t-1)};if("object"==typeof t)switch(t.type){case"pin":if(p=s(m=t.episode,t.level))return[p];break;case"firstHardLevelPin":if(this._hardLevelChecker){var p,l=a.getModule("episodes"),m=l.getCurrentEpisode(),u=l.getAbsoluteLevelRangeByEpisode(m),d=function(e){for(var t=r(e,2),o=t[0],i=t[1],c=o;c<=i;c++){var s=a.getModule("levels").getLevel(c);if(n._hardLevelChecker(s))return c}}([Math.max(a.getModule("progress").value,u[0]),u[1]]);if(void 0!==d&&(p=s(m,l.getRelativeLevel(d))))return[p]}}return e.prototype.resolveTarget.call(this,t)},t}(e("./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)").ScenarioTargetResolver);n.EpisodeTargetResolver=s,cc._RF.pop()},{"./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)","./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)"}],"EpisodeWindowItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"b2d104e5LNL6oaOWerzTxFG","EpisodeWindowItemComponent (scripts.windows.items)"),n.__esModule=!0,n.EpisodeWindowItemComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"),y=e("./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"),f=e("./EventEmitter (@tapclap.utils-js.events)"),h=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.property,x={blocked:{styleKey:0,blockIconActive:!0,holderActive:!1,buttonInteractable:!1},started:{styleKey:2,blockIconActive:!0,holderActive:!0,buttonInteractable:!0},passed:{styleKey:2,blockIconActive:!1,holderActive:!0,buttonInteractable:!0},fullPassed:{styleKey:1,blockIconActive:!1,holderActive:!0,buttonInteractable:!0}},A=(o=E({type:cc.Node,visible:!0}),a=E({type:y.WindowLoadSpinnerComponent,visible:!0}),r=E({type:cc.Node,visible:!0}),i=E({type:h.ButtonControlComponent,visible:!0}),S((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return g(t=e.call.apply(e,[this].concat(o))||this,"_blockIcon",p,_(t)),g(t,"_spinner",l,_(t)),g(t,"_holder",m,_(t)),g(t,"_inputHandlers",u,_(t)),t._events=new f.EventEmitter,t._state=x.blocked,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a,r,i=o.prototype;return i.onLoad=function(){var e=this;this._inputHandlers.forEach(function(t){t.events.on(h.ButtonControlComponent.EVENT_CLICK,function(){return e.events.emit("select")})})},i._updateStyle=function(){var e=this;this.style=this._state.styleKey,this._blockIcon&&(this._blockIcon.active=this._state.blockIconActive),this._holder&&(this._holder.active=this._state.holderActive),this._inputHandlers.forEach(function(t){t.setInteractable(e._state.buttonInteractable)})},i._setState=function(e){this._state=x[e],this._state||(this._state=x.blocked),this._updateStyle()},i.setSpinner=function(e){e?(this._blockIcon.active=!1,this._spinner.startSpinner()):(this._updateStyle(),this._spinner.stopSpinner())},i.setNumber=function(e,t){this._i18nLabel&&this._i18nLabel.setParams({number:e}),t>=e?this._setState(t>e?"passed":"started"):this._setState("blocked")},i.setProgress=function(e,t){this.title=e+"/"+t},i.setIcon=function(e,t){this.initialize({icon:{prefab:e,key:t}})},a=o,(r=[{key:"events",get:function(){return this._events}}])&&v(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(d.WindowItemComponent),p=C(s.prototype,"_blockIcon",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=C(s.prototype,"_spinner",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C(s.prototype,"_holder",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=C(s.prototype,"_inputHandlers",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=s))||c);n.EpisodeWindowItemComponent=A,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)","./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"}],"EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)":[function(e,t,n){"use strict";cc._RF.push(t,"9bac3UrpIBIToFYWhhZXl5X","EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)"),n.__esModule=!0,n.EpisodesMetaModule=void 0;var o=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._levelCountPerEpisode=t.levelCountPerEpisode,n._availableEpisodeCount=t.availableEpisodeCount,n._hasNewEpisode=!1,n._lastLevelPlayed=0,n._progressMetaModuleResolver=t.progressMetaModuleResolver,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i._getProgress=function(){return this._progressMetaModuleResolver.get()},i._updateState=function(){if(this.isCurrentEpisodeAvailable()){var e=this._getProgress();e&&(this._hasNewEpisode=e.hasChange&&this.isFirstLevelInEpisode(e.value))}},i.init=function(){return this._getProgress().events.on(o.MetaModule.EVENT_CHANGE,this._updateState.bind(this)),this._updateState(),e.prototype.init.call(this)},i.getLevelCountPerEpisode=function(){return this._levelCountPerEpisode},i.getAvailableEpisodeCount=function(){return this._availableEpisodeCount},i.getEpisodeResource=function(e){return this._resources.get(e.toString())},i.getEpisodeByLevel=function(e){return Math.ceil(e/this._levelCountPerEpisode)},i.getEpisodeIndexByLevel=function(e){return this.getEpisodeByLevel(e)-1},i.getRelativeLevel=function(e){return(e-1)%this._levelCountPerEpisode+1},i.getAbsoluteLevelRangeByEpisode=function(e){var t=(e-1)*this._levelCountPerEpisode+1;return[t,t+this._levelCountPerEpisode-1]},i.getCurrentLevel=function(){return this._getProgress().value},i.getCurrentAvailableRelativeLevel=function(){return this.isCurrentEpisodeAvailable()?this.getRelativeLevel(this.getCurrentLevel()):this.getRelativeLevel(this.getLevelCountPerEpisode())},i.getCurrentEpisode=function(){return this.getEpisodeByLevel(this.getCurrentLevel())},i.getCurrentAvailableEpisode=function(){return Math.min(this.getAvailableEpisodeCount(),this.getCurrentEpisode())},i.isLastLevelInEpisode=function(e){return e%this._levelCountPerEpisode==0},i.isFirstLevelInEpisode=function(e){return e%this._levelCountPerEpisode==1},i.isCurrentEpisodeAvailable=function(){return this.getCurrentEpisode()<=this.getAvailableEpisodeCount()},i.hasNewEpisode=function(e){void 0===e&&(e=!1);var t=this._hasNewEpisode;return e&&(this._hasNewEpisode=!1),t},i.getMaxAvailableLevel=function(){return this.getAvailableEpisodeCount()*this.getLevelCountPerEpisode()},r}(o.MetaModule);n.EpisodesMetaModule=r,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)":[function(e,t,n){"use strict";cc._RF.push(t,"7a24evcce1d3ZHkBaSUKy33","EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EpisodesMetaModuleDevConsoleMenuGenerator=void 0;var i=e("./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)"),p=function(e){function t(t){var n=e.call(this,t)||this;return n._module=null,n._instance=s.EpisodesMetaModule,n}return a(t,e),t.prototype.generate=function(){var e=this;return{setEpisodeNumber:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",command:new c.InputCallbackDevConsoleCommand({callback:function(t){var n=e._module.getMetaGame().getModule("progress");if(e._module.getAvailableEpisodeCount()>=t){var o=r(e._module.getAbsoluteLevelRangeByEpisode(t),1)[0];return n.setValue(o).then(function(){return e._restartCurrentMetaGame()}).catch(function(){return e._restartCurrentMetaGame()})}}})}}},t}(i.MetaModuleDevConsoleMenuGenerator);n.EpisodesMetaModuleDevConsoleMenuGenerator=p,cc._RF.pop()},{"./EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)":"EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"}],"EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"cc3dcHCJKpffbxSJjFf9MhE","EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)"),n.__esModule=!0,n.EpisodesResourceHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handleFile=function(e,t){return this._setResourceToModule(t.dest,t.src),Promise.resolve([])},a}(e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)").MetaModuleResourceHandler);n.EpisodesResourceHandler=a,cc._RF.pop()},{"./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"}],"EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"26b6fFWtv1IMaIRuXZ4A6gz","EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicAvatarComponent=void 0;var o,a,r,i,c,s,p,l=e("./AvatarComponent (scripts.common.components)");function m(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var f=cc._decorator,h=f.ccclass,g=f.property,v=(o=(0,f.menu)("UI-Kit/MetaGame/Episodic/EpisodicAvatarComponent"),a=g({visible:!0}),r=g({visible:!0}),h(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return m(t=e.call.apply(e,[this].concat(o))||this,"_anchor",s,u(t)),m(t,"_fadeInDuration",p,u(t)),t._attachedTo=null,t._active=!1,t._originalOpacity=255,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var a=o.prototype;return a.onLoad=function(){this._originalOpacity=this.node.opacity},a.setActive=function(e){e?(this.node.opacity=0,this.node.runAction(cc.fadeTo(this._fadeInDuration,this._originalOpacity))):this.node.opacity=0,this._active=e},a.attachToNode=function(e){this._attachedTo=e,this._recalcPosition()},a._recalcPosition=function(){if(this._attachedTo){var e=this._attachedTo.parent.convertToWorldSpaceAR(this._attachedTo.getPosition()),t=this.node.parent.convertToNodeSpaceAR(e);t.addSelf(new cc.Vec2(this._anchor.x*this.node.width,this._anchor.y*this.node.height)),0===this.node.getNumberOfRunningActions()&&(this.node.opacity=this._active&&this._attachedTo.activeInHierarchy?255:0),this.node.setPosition(t)}else this.node.opacity=0},a.update=function(){this._recalcPosition()},o}(l.AvatarComponent),s=y(c.prototype,"_anchor",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Vec2(.5,.5)}}),p=y(c.prototype,"_fadeInDuration",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),i=c))||i)||i);n.EpisodicAvatarComponent=v,cc._RF.pop()},{"./AvatarComponent (scripts.common.components)":"AvatarComponent (scripts.common.components)"}],"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"554ab1a8vlMjZc0cLuy3RuS","EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicEpisodeComponent=void 0;var o,a,r,i,c,s,p,l,m,u=e("./EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)"),d=e("./EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.property,C=(o=(0,v.menu)("UI-Kit/MetaGame/Episodic/EpisodicEpisodeComponent"),a=b(cc.Node),r=b(cc.Node),i=b(cc.Node),_(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"levelsNode",p,f(t)),y(t,"starsRewardNode",l,f(t)),y(t,"animationsNode",m,f(t)),t._starsRewardPrefab=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a._onSelectLevel=function(e){this.node.emit(o.EVENT_SELECT_LEVEL,e)},a._onSelectStarsReward=function(e){this.node.emit(o.EVENT_SELECT_STARS_REWARD,e)},a.onLoad=function(){this.animationsNode&&(this.animationsNode.active=!0)},a.renderLevel=function(e,t,n,o){if(this.levelsNode){var a=this.levelsNode.children[e];if(a){var r=this.createLevelNode(t,n,o);a.addChild(r)}}},a.renderLevelStars=function(e,t){var n=this.getPinNodeByIndex(e);if(n){var o=n.getComponent(u.EpisodicLevelComponent);o&&o.setStar(t)}},a.renderStarsReward=function(e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=[]),this.starsRewardNode&&t.forEach(function(t,o){var a=n.starsRewardNode.children[o];if(a){var r=cc.instantiateFrom(n._starsRewardPrefab),i=r.getComponent(d.EpisodicStarsRewardComponent);e<t?(i.showClosedState(e,t),r.on(cc.Node.EventType.TOUCH_END,n._onSelectStarsReward.bind(n,{count:e,requiredCount:t}))):i.showOpenedState(!0),a.addChild(r)}})},a.createLevelNode=function(e,t,n){var o=cc.instantiateFrom(n);o.on(cc.Node.EventType.TOUCH_END,this._onSelectLevel.bind(this,e));var a=o.getComponent(u.EpisodicLevelComponent);switch(a.setLevelNumber(e),t){case u.EpisodicLevelComponent.STATE.ACTIVE:a.setActive();break;case u.EpisodicLevelComponent.STATE.LOCKED:a.setLocked();break;case u.EpisodicLevelComponent.STATE.PASSED:a.setPassed();break;case u.EpisodicLevelComponent.STATE.DISABLED:a.setDisabled()}return o},a.setStarsRewardPrefab=function(e){this._starsRewardPrefab=e},a.getPinNodeByIndex=function(e){var t=this.levelsNode.children[e];if(t){var n=t.getComponentInChildren(u.EpisodicLevelComponent);if(n)return n.node}},o}(cc.Component),p=g(s.prototype,"levelsNode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=g(s.prototype,"starsRewardNode",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g(s.prototype,"animationsNode",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c);n.EpisodicEpisodeComponent=C,C.EVENT_SELECT_LEVEL="selectLevel",C.EVENT_SELECT_STARS_REWARD="selectStarsReward",C.LEVEL_REGULAR="levelRegular",C.LEVEL_HARD="levelHard",cc._RF.pop()},{"./EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)"}],"EpisodicEpisodeHolderComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"148b3NnGldPfoZAF/mmvhLs","EpisodicEpisodeHolderComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicEpisodeHolderComponent=void 0;var o,a,r,i,c,s,p,l=e("./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),m=e("./TransitionComponent (@tapclap.game-kit.ui.transition)");function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var h=cc._decorator,g=h.ccclass,v=h.property,_=(o=(0,h.menu)("UI-Kit/MetaGame/Episodic/EpisodicEpisodeHolderComponent"),a=v({type:cc.Node,visible:!0}),r=v({type:cc.Node,visible:!0}),g(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._view=null,u(t,"_content",s,d(t)),u(t,"_transition",p,d(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var a=o.prototype;return a._getTransitionComponent=function(){if(this._transition)return this._transition.getComponent(m.TransitionComponent)},a.enableTransition=function(){var e=this._getTransitionComponent();e&&e.enable()},a.hideTransition=function(){var e=this._getTransitionComponent();return e?e.hide().then(function(){return e.disable()}):Promise.resolve()},a.resetTransition=function(){var e=this._getTransitionComponent();e&&e.reset()},a.getView=function(){return this._view},a.setView=function(e){e&&(e.parent=this._content,this._view=e)},a.resetView=function(){this.resetBindingAdapterPosition(),this.resetLayoutPosition(),this._view&&(this._view.parent=null,this._view=null)},o}(l.RecyclerScrollViewHolderComponent),s=f(c.prototype,"_content",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f(c.prototype,"_transition",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i)||i);n.EpisodicEpisodeHolderComponent=_,cc._RF.pop()},{"./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","./TransitionComponent (@tapclap.game-kit.ui.transition)":"TransitionComponent (@tapclap.game-kit.ui.transition)"}],"EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"bdee781NV9VsJK86E2P71I+","EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)"),n.__esModule=!0,n.EpisodicEpisodeNumberValueResolver=void 0;var o=e("./EpisodicMetaGame (scripts.scenes.meta-game.episodic)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n,o=t.metaGameResolver,a=t.availableCount,r=void 0!==a&&a;return(n=e.call(this)||this)._metaGameResolver=o,n._availableCount=r,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.getValue=function(){var e=this._metaGameResolver.get();if(e instanceof o.EpisodicMetaGame)return Promise.resolve(this._availableCount?e.getCurrentAvailableEpisode():e.getCurrentEpisode());throw new Error("Resolver game is not EpisodicMetaGame")},r}(e("./ValueResolver (@tapclap.utils-js.substring-replacer)").ValueResolver);n.EpisodicEpisodeNumberValueResolver=r,cc._RF.pop()},{"./EpisodicMetaGame (scripts.scenes.meta-game.episodic)":"EpisodicMetaGame (scripts.scenes.meta-game.episodic)","./ValueResolver (@tapclap.utils-js.substring-replacer)":"ValueResolver (@tapclap.utils-js.substring-replacer)"}],"EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ba8b4a9UzBDT7GuDQyjBTto","EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicLastEpisodeComponent=void 0;var o,a,r,i,c=e("./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)");function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m,u,d,y,f=cc._decorator,h=f.ccclass,g=(o=(0,f.property)({type:[c.EpisodicEpisodeComponent],visible:!0,tooltip:"\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u043e\u0434 \u0434\u043b\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0447\u0435\u0442\u043d\u044b\u0435/\u043d\u0435\u0447\u0435\u0442\u043d\u044b\u0435 \u0438 \u0442.\u0434.)"}),h((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_episodes",i,p(t)),t._activeEpisode=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=o.prototype;return a.onLoad=function(){var e=this;this._episodes.map(function(t){return t.node.on(c.EpisodicEpisodeComponent.EVENT_SELECT_LEVEL,function(t){e.node.emit(c.EpisodicEpisodeComponent.EVENT_SELECT_LEVEL,t)}),t}).filter(function(t){return t!==e._activeEpisode}).forEach(function(e){return e.node.active=!1})},a._getActiveEpisode=function(){return this._activeEpisode},a.setActiveEpisodeIndex=function(e){this._activeEpisode=this._episodes[e]},a.renderLevel=function(e,t,n,o){this._getActiveEpisode().renderLevel(e,t,n,o)},a.setStarsRewardPrefab=function(e){this._episodes.forEach(function(t){return t.setStarsRewardPrefab(e)})},a.getPinNodeByIndex=function(e){return this._getActiveEpisode().getPinNodeByIndex(e)},o}(c.EpisodicEpisodeComponent),m=r.prototype,u=[o],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_episodes",e)||e},y)).initializer&&(Object.defineProperty(m,"_episodes",y),y=null),i=y,a=r))||a);n.EpisodicLastEpisodeComponent=g,g.EVENT_SELECT="select",cc._RF.pop()},{"./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)"}],"EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x;function A(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"c065bWnmjVFt5fSMfvqPATi","EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicLevelComponent=void 0;var k=cc._decorator,T=k.ccclass,I=k.property,M=(o=(0,k.menu)("UI-Kit/MetaGame/Episodic/EpisodicLevelComponent"),a=I({type:cc.Sprite,tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c"}),r=I({type:cc.Label,tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u044f"}),i=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c"}),c=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c"}),s=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u043d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u0443\u0440\u043e\u0432\u043d\u0435\u043c"}),p=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u0431\u0435\u0437 \u0437\u0432\u0435\u0437\u0434"}),l=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043d\u0430 1 \u0437\u0432\u0435\u0437\u0434\u0443"}),m=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043d\u0430 2 \u0437\u0432\u0435\u0437\u0434\u044b"}),u=I({type:cc.SpriteFrame,tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442 \u0441 \u0443\u0440\u043e\u0432\u043d\u0435\u043c \u043d\u0430 3 \u0437\u0432\u0435\u0437\u0434\u044b"}),d=I({tooltip:"\u0426\u0432\u0435\u0442 \u043e\u0431\u0432\u043e\u0434\u043a\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043b\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f",visible:!0}),T(y=o((f=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return A(t=e.call.apply(e,[this].concat(o))||this,"spriteNode",h,O(t)),A(t,"labelNode",g,O(t)),A(t,"spriteLocked",v,O(t)),A(t,"spriteActive",_,O(t)),A(t,"spriteDisabled",b,O(t)),A(t,"spriteStar0",C,O(t)),A(t,"spriteStar1",w,O(t)),A(t,"spriteStar2",S,O(t)),A(t,"spriteStar3",E,O(t)),A(t,"_outlineColor",x,O(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n);var a=o.prototype;return a.setLocked=function(){this.spriteNode.spriteFrame=this.spriteLocked,this.labelNode.node.active=!1},a.setActive=function(){if(this.spriteNode.spriteFrame=this.spriteActive,this.labelNode.node.active=!0,this._outlineColor){var e=this.labelNode.getComponent(cc.LabelOutline);e&&(e.color=this._outlineColor)}},a.setDisabled=function(){this.spriteNode.spriteFrame=this.spriteDisabled;var e=this.labelNode.getComponent(cc.LabelOutline);e&&(e.enabled=!1)},a.setPassed=function(){this.spriteNode.spriteFrame=this.spriteStar0},a.setStar=function(e){void 0===e&&(e=0),this.spriteNode.spriteFrame=this["spriteStar"+e]},a.setLevelNumber=function(e){this.labelNode.string=e.toString()},o}(cc.Component),h=P(f.prototype,"spriteNode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P(f.prototype,"labelNode",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=P(f.prototype,"spriteLocked",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P(f.prototype,"spriteActive",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P(f.prototype,"spriteDisabled",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P(f.prototype,"spriteStar0",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P(f.prototype,"spriteStar1",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P(f.prototype,"spriteStar2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=P(f.prototype,"spriteStar3",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=P(f.prototype,"_outlineColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),y=f))||y)||y);n.EpisodicLevelComponent=M,M.STATE={PASSED:"passed",ACTIVE:"active",LOCKED:"locked",DISABLED:"disabled"},cc._RF.pop()},{}],"EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"4bd80mpnmpKF6brPDZEntN4","EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicMapComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_=e("./EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)"),b=e("./EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)"),C=e("./EventListener (@tapclap.utils-js.events)"),w=e("./EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)");function S(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var R=cc._decorator,P=R.ccclass,k=R.property,T=R.menu,I=R.mixins,M=(o=T("UI-Kit/MetaGame/Episodic/EpisodicMapComponent"),a=I(C.EventListener),r=k({type:b.EpisodicScrollViewComponent,tooltip:"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0441\u043a\u0440\u043e\u043b\u043b\u0430",visible:!0}),i=k({type:cc.Prefab,tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u0445\u043e\u043b\u0434\u0435\u0440\u0430 \u044d\u043f\u0438\u0437\u043e\u0434\u043e\u0432",visible:!0}),c=k({type:cc.Prefab,tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u0445\u043e\u043b\u0434\u0435\u0440\u0430 \u0437\u0430\u0433\u043b\u0443\u0448\u043a\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u044d\u043f\u0438\u0437\u043e\u0434\u0430",visible:!0}),s=k({type:cc.Prefab,tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f",visible:!0}),p=k({type:cc.Prefab,tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f",visible:!0}),l=k({type:cc.Prefab,tooltip:"\u041f\u0440\u0435\u0444\u0430\u0431 \u043a\u043e\u0440\u043e\u0431\u043a\u0438 \u0437\u0430 \u0437\u0432\u0435\u0437\u0434\u044b",visible:!0}),P(m=o(m=a((u=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return S(t=e.call.apply(e,[this].concat(o))||this,"_scrollView",d,x(t)),S(t,"_holder",y,x(t)),S(t,"_lastHolder",f,x(t)),S(t,"_regularLevelPrefab",h,x(t)),S(t,"_hardLevelPrefab",g,x(t)),S(t,"_starsRewardPrefab",v,x(t)),t._scrollAdapter=null,t._avatarNode=null,t._metaGame=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,A(t,n);var a,r,i=o.prototype;return i.render=function(){var e,t=this,n=this._metaGame.getModule("episodes"),o=this._metaGame.getModule("levels"),a=n.getCurrentLevel(),r=o.getLastLevel(),i=n.getCurrentEpisode()-1,c=n.getRelativeLevel(a)-1;return r&&0!==r.number&&r.number<a-1&&(i=n.getEpisodeIndexByLevel(r.number),c=n.getRelativeLevel(r.number)-1),this._avatarNode&&this.node.addChild(this._avatarNode),this._scrollAdapter=new _.EpisodicScrollAdapter({metaGame:this._metaGame,map:this,holderPrefab:this._holder,lastHolderPrefab:this._lastHolder,regularLevelPrefab:this._regularLevelPrefab,hardLevelPrefab:this._hardLevelPrefab,starsRewardPrefab:this._starsRewardPrefab,avatarComponent:null==this?void 0:null==(e=this._avatarNode)?void 0:e.getComponent(w.EpisodicAvatarComponent)}),this.scrollView.setAdapter(this._scrollAdapter),this.scrollView.init(i).then(function(){return t.scrollView.init(i+1)}).then(function(){return t.scrollView.run()}).then(function(){return Promise.all(t._scrollAdapter.getLoadingPromises())}).then(function(){return t.scrollView.scrollToLevel(i,c,{force:!0})})},i.openEpisode=function(e){var t=this;return this._scrollView.openEpisode(e).then(function(){if(t._avatarNode){var n=t._avatarNode.getComponent(w.EpisodicAvatarComponent);n&&n.setActive(t._scrollAdapter.isVisibleEpisode(e))}})},i.setMetaGame=function(e){this._metaGame=e},i.setAvatarNode=function(e){this._avatarNode=e},a=o,(r=[{key:"scrollView",get:function(){return this._scrollView}},{key:"scrollAdapter",get:function(){return this._scrollAdapter}}])&&E(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),d=O(u.prototype,"_scrollView",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=O(u.prototype,"_holder",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=O(u.prototype,"_lastHolder",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=O(u.prototype,"_regularLevelPrefab",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=O(u.prototype,"_hardLevelPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=O(u.prototype,"_starsRewardPrefab",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=u))||m)||m)||m);n.EpisodicMapComponent=M,cc._RF.pop()},{"./EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)":"EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)","./EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)","./EventListener (@tapclap.utils-js.events)":"EventListener (@tapclap.utils-js.events)"}],"EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f939aHuvrNSWIMLrcbeFBcJ","EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)"),n.__esModule=!0,n.EpisodicMaxAvailableLevelResolver=void 0;var a=function(e){var t,n;function a(t){var n,o=t.episodesMetaModuleResolver;return(n=e.call(this)||this)._episodesMetaModuleResolver=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getValue=function(){var e=this._episodesMetaModuleResolver.get();return Promise.resolve(e.getMaxAvailableLevel())},a}(e("./ValueResolver (@tapclap.utils-js.substring-replacer)").ValueResolver);n.EpisodicMaxAvailableLevelResolver=a,cc._RF.pop()},{"./ValueResolver (@tapclap.utils-js.substring-replacer)":"ValueResolver (@tapclap.utils-js.substring-replacer)"}],"EpisodicMetaGame (scripts.scenes.meta-game.episodic)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2fec9KFN1Nf3I4mCdAe6jlB","EpisodicMetaGame (scripts.scenes.meta-game.episodic)"),n.__esModule=!0,n.EpisodicMetaGame=void 0;var a=function(e){var t,n;function a(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._currentEpisode=1,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getCurrentEpisode=function(){return this._currentEpisode},r.getCurrentAvailableEpisode=function(){return this.getModule("episodes").getCurrentAvailableEpisode()},r.setCurrentEpisode=function(e){this._currentEpisode=e},r.getProgressTag=function(e){return e.toString()},r._afterInit=function(){var t=this.getModule("episodes");if(t){this._currentEpisode=this.getCurrentAvailableEpisode();var n=this.getModule("progress"),o=t.getMaxAvailableLevel()+1;o<n.value&&n.setValue(o)}else cc.warn("Not found MetaModule episodes or progress");return e.prototype._afterInit.call(this)},a}(e("./MetaGame (@tapclap.game-kit.meta-game)").MetaGame);n.EpisodicMetaGame=a,cc._RF.pop()},{"./MetaGame (@tapclap.game-kit.meta-game)":"MetaGame (@tapclap.game-kit.meta-game)"}],"EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3f63a4HsQFSa4aCq3PFsTRu","EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)"),n.__esModule=!0,n.EpisodicRangeResolver=void 0;var a=function(e){var t,n;function a(t){var n,o=t.moduleResolver,a=t.metaGameResolver,r=t.useCurrent,i=void 0!==r&&r;return(n=e.call(this)||this)._moduleResolver=o,n._metaGameResolver=a,n._useCurrent=i,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.get=function(){var e=this._moduleResolver.get(),t=this._metaGameResolver.get(),n=this._useCurrent?t.getCurrentEpisode():e.getCurrentEpisode();return e.getAbsoluteLevelRangeByEpisode(n)},a}(e("./RangeResolver (@tapclap.game-kit.meta-game)").RangeResolver);n.EpisodicRangeResolver=a,cc._RF.pop()},{"./RangeResolver (@tapclap.game-kit.meta-game)":"RangeResolver (@tapclap.game-kit.meta-game)"}],"EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c45cbAaa/9f6I8Aqvw+NHSQ","EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.EpisodicSceneComponent=void 0;var i=e("./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),c=e("./EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),s=e("./EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)"),p=e("./SceneComponent (@tapclap.game-kit.scene-manager)"),l=e("./UIController (@tapclap.game-kit.ui)"),m=e("./CandyvalleyBarSceneComponent (scripts.scenes)"),u=e("./Inject (@tapclap.utils-js.inject)"),d=e("./ActionManager (@tapclap.game-kit.action-manager)"),y=e("./NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)"),f=e("./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)"),h=e("./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),g=e("./EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)"),v=e("./SceneBadgeComponent (scripts.badges)"),_=cc._decorator,b=_.ccclass,C=_.property,w=function(){function e(){this.key="",this.view=null}return r([C()],e.prototype,"key",void 0),r([C(y.NameplateListView)],e.prototype,"view",void 0),r([b("NameplateListViews")],e)}(),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._map=null,t._attemptsBar=null,t._coinsBar=null,t._currentLevelLabel=null,t._avatarPrefab=null,t._barNode=null,t._nameplateListViews=[],t._actions={},t._isLevelStarting=!1,t}return a(t,e),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._map.scrollView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bar",{get:function(){return this.node.getComponentInChildren(m.CandyvalleyBarSceneComponent)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e;this._friendsButton.active=this._featureFriends,null===(e=this._friendsButton.parent.getComponent(cc.Layout))||void 0===e||e.updateLayout()},t.prototype.handleButtonPlayClick=function(){var e=this,t=Promise.resolve(),n=this._metaGameManager.getCurrentMetaGame().getModule("episodes");if(n){var o=n.getCurrentAvailableEpisode()-1,a=n.getCurrentAvailableRelativeLevel()-1;t=this._map.scrollView.scrollToLevel(o,a)}t.then(function(){return e._startLevel()})},t.prototype.handleButtonSettingsClick=function(){this._actionManager.run(this._actions.windowMenu)},t.prototype.handleButtonLivesClick=function(){this._actionManager.run(this._actions.windowLivesShop)},t.prototype.handleButtonCoinsClick=function(){this._actionManager.run(this._actions.windowCoinsShop)},t.prototype.handleButtonFriendsClick=function(){this._actionManager.run(this._actions.windowFriends)},t.prototype.handleButtonRecipeClick=function(){this._actionManager.run(this._actions.windowEpisodes,{scrollView:this._map.scrollView})},t.prototype.init=function(){var e=this,t=this.getComponentInChildren(l.UIController),n=this._metaGameManager.getCurrentMetaGame(),o=n.getModule("episodes"),a=n.getModule("progress"),r=n.getModule("chart");this._actions=n.actions;var s=n.getModule("music");s&&s.play("meta");var p=Promise.resolve().then(function(){var t;if(e._avatarPrefab&&(null===(t=e._socialService)||void 0===t?void 0:t.getCurrentAdapter()))return e._getUserAvatarSprite().then(function(t){e._map.setAvatarNode(e._createUserAvatar(t))})}).then(function(){return e._map.setMetaGame(n),e._map.render()}).then(function(){e.schedule(function(){return e._metaEventManager.update()},1)}).then(function(){return e._nameplateListViews.forEach(function(t){var n=t.key,o=t.view;e._nameplateManager.setNameplateListView(o,n)}),e._nameplateManager.init()}).then(function(){return r.sync().catch(function(e){return console.error(e)})}).then(function(){return e._messageCenter.init().catch(function(e){return console.error(e)})}).then(function(){e.node.getComponentsInChildren(v.SceneBadgeComponent).forEach(function(e){return e.refresh()})});return this._map.node.on(i.EpisodicEpisodeComponent.EVENT_SELECT_LEVEL,this._startLevel.bind(this)),this._map.node.on(i.EpisodicEpisodeComponent.EVENT_SELECT_STARS_REWARD,function(t){e._actionManager.run(e._actions.windowEpisodesStarsRewardUnavailable,t)}),this._map.node.on(c.EpisodicLastEpisodeComponent.EVENT_SELECT,function(){o.getCurrentEpisode()>o.getCurrentAvailableEpisode()&&e._actionManager.run(e._actions.noEpisode)}),this.bar&&(this.bar.init(),this.bar.node.on(m.CandyvalleyBarSceneComponent.ATTEMPTS_TAP,function(){return e._actionManager.run(e._actions.windowLivesShop)}),this.bar.node.on(m.CandyvalleyBarSceneComponent.CURRENCY_TAP,function(){return e._actionManager.run(e._actions.windowCoinsShop)}),t&&(t.addHolder(Object.assign(new l.UIAnimationHolder,{key:"coins-bar",node:this.bar.currency.getIconNode(),highlight:this.bar.currency.node})),t.addHolder(Object.assign(new l.UIAnimationHolder,{key:"attempts-bar",node:this.bar.attempts.getIconNode(),highlight:this.bar.attempts.node})))),this._currentLevelLabel&&a&&(this._currentLevelLabel.string=Math.min(a.value,o.getMaxAvailableLevel()+1).toString()),p},t.prototype._getUserAvatarSprite=function(){return this._socialService.getCurrentAdapter().getUserInfo().then(function(e){return new Promise(function(t,n){e.photo?cc.assetManager.loadRemote(e.photo,{ext:".image"},function(e,o){!e&&o?t(new cc.SpriteFrame(o)):n()}):n()})}).catch(function(){return null})},t.prototype._createUserAvatar=function(e){var t,n=cc.instantiateFrom(this._avatarPrefab);return null===(t=n.getComponent(g.EpisodicAvatarComponent))||void 0===t||t.setAvatar(e),n},t.prototype._startLevel=function(e){var t=this;return void 0===e&&(e=0),this._isLevelStarting?Promise.resolve():(this._isLevelStarting=!0,this._actionManager.events.once(d.ActionManager.EVENT_AFTER_ACTION,function(e){var n=e.split(":")[0];[t._actions.windowStartLevel,t._actions.noEpisode,t._actions.startLevel].includes(n)&&(t._isLevelStarting=!1)}),this._actionManager.run(this._actions.startLevel,{levelNumber:e}))},t.prototype.run=function(){return this._actionManager.run(this._actions.runScene,{scene:this})},r([C({type:s.EpisodicMapComponent,visible:!0})],t.prototype,"_map",void 0),r([C({type:h.LivesAttemptsBarComponent,visible:!0})],t.prototype,"_attemptsBar",void 0),r([C({type:f.CoinsBarComponent,visible:!0})],t.prototype,"_coinsBar",void 0),r([C({type:cc.Label,visible:!0})],t.prototype,"_currentLevelLabel",void 0),r([C({type:cc.Prefab,visible:!0})],t.prototype,"_avatarPrefab",void 0),r([C({type:cc.Node,visible:!0})],t.prototype,"_barNode",void 0),r([C({type:[w],visible:!0})],t.prototype,"_nameplateListViews",void 0),r([C({type:cc.Node,visible:!0})],t.prototype,"_friendsButton",void 0),r([u.Inject("MetaGameManager")],t.prototype,"_metaGameManager",void 0),r([u.Inject("ActionManager")],t.prototype,"_actionManager",void 0),r([u.Inject("NameplateManager")],t.prototype,"_nameplateManager",void 0),r([u.Inject("MetaEventManager")],t.prototype,"_metaEventManager",void 0),r([u.Inject("SocialService")],t.prototype,"_socialService",void 0),r([u.Inject("UIManager")],t.prototype,"_uiManager",void 0),r([u.Inject("MessageCenter")],t.prototype,"_messageCenter",void 0),r([u.Inject("FeatureFriends")],t.prototype,"_featureFriends",void 0),r([b],t)}(p.SceneComponent);n.EpisodicSceneComponent=S,cc._RF.pop()},{"./ActionManager (@tapclap.game-kit.action-manager)":"ActionManager (@tapclap.game-kit.action-manager)","./CandyvalleyBarSceneComponent (scripts.scenes)":"CandyvalleyBarSceneComponent (scripts.scenes)","./CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)":"CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)","./EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)":"NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)","./SceneBadgeComponent (scripts.badges)":"SceneBadgeComponent (scripts.badges)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)","./UIController (@tapclap.game-kit.ui)":"UIController (@tapclap.game-kit.ui)"}],"EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"74eecadkQZE970+hQ1HzyZf","EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicScrollAdapter=void 0;var o=e("./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)"),a=e("./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),r=e("./Loader (@tapclap.game-kit.loader)"),i=e("./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),c=e("./EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)"),s=e("./EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)");function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var o=t,a=o.metaGame,r=o.map,i=o.holderPrefab,c=o.regularLevelPrefab,s=o.hardLevelPrefab,p=o.starsRewardPrefab,l=o.lastHolderPrefab,m=o.avatarComponent;return n._metaGame=a,n._map=r,n._holderPrefab=i,n._lastHolderPrefab=l,n._regularLevelPrefab=c,n._hardLevelPrefab=s,n._starsRewardPrefab=p,n._avatarComponent=m,n._episodeViews={},n._loadings={},n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var l=o.prototype;return l.isVisibleEpisode=function(e){var t=this._metaGame.getModule("episodes"),n=t.getCurrentEpisode()-1;return 0===e||e<n||e!==n||!t.hasNewEpisode()},l.isLoadingNow=function(e){return!!this._loadings[e]},l.createEpisode=function(e){var t=this,n=this._metaGame.getModule("episodes");return this._loadings[e]?this._loadings[e]:this.hasView(e)?Promise.resolve(this.getView(e)):e===n.getAvailableEpisodeCount()?(this._episodeViews[e]=this.createLastEpisode(),Promise.resolve(this._episodeViews[e])):(this._loadings[e]=this.preloadEpisode(e).then(function(){var n=t._metaGame.getModule("episodes");return t._episodeViews[e]=cc.instantiateFrom(n.getEpisodeResource(e+1)),t._renderEpisode(t._episodeViews[e],e),delete t._loadings[e],t._episodeViews[e]}),this._loadings[e])},l._renderEpisode=function(e,t){var n=this,o=this._metaGame.getModule("episodes"),a=this._metaGame.getModule("levels"),r=this._metaGame.getModule("stars"),c=this._metaGame.getModule("starsReward"),p=o.getAbsoluteLevelRangeByEpisode(t+1),l=e.getComponent(i.EpisodicEpisodeComponent);if(!l)throw new Error("Episode node must have component 'EpisodicEpisodeComponent'");l.setStarsRewardPrefab(this._starsRewardPrefab),l.renderStarsReward(r.getSumOfRange.apply(r,p),c.getCheckpoints());for(var m=o.getCurrentLevel(),u=p[0];u<=p[1];u++){var d,y=s.EpisodicLevelComponent.STATE.PASSED;t>o.getAvailableEpisodeCount()-1?y=s.EpisodicLevelComponent.STATE.DISABLED:m===u?y=s.EpisodicLevelComponent.STATE.ACTIVE:m<u&&(y=s.EpisodicLevelComponent.STATE.LOCKED);var f=null!=(d=a.getLevel(u))&&d.hard?this._hardLevelPrefab:this._regularLevelPrefab;l.renderLevel(o.getRelativeLevel(u)-1,u,y,f),r&&r.data[u]&&y===s.EpisodicLevelComponent.STATE.PASSED&&l.renderLevelStars(o.getRelativeLevel(u)-1,r.data[u])}l.node.on(i.EpisodicEpisodeComponent.EVENT_SELECT_LEVEL,function(e){n._map.node.emit(i.EpisodicEpisodeComponent.EVENT_SELECT_LEVEL,e)}),l.node.on(i.EpisodicEpisodeComponent.EVENT_SELECT_STARS_REWARD,function(e){n._map.node.emit(i.EpisodicEpisodeComponent.EVENT_SELECT_STARS_REWARD,e)})},l.createLastEpisode=function(){var e=cc.instantiateFrom(this._lastHolderPrefab),t=this._metaGame.getModule("episodes"),n=t.getCurrentAvailableEpisode(),o=e.getComponent(c.EpisodicLastEpisodeComponent);if(!o)throw new Error("Episode not have EpisodicLastEpisodeComponent");return o.setActiveEpisodeIndex(n%2),this._renderEpisode(e,t.getCurrentEpisode()-1),e},l.preloadEpisode=function(e){return this._loadings[e]?this._loadings[e]:this._episodeViews[e]||this._loadings[e]?Promise.resolve():(this._metaGame.setCurrentEpisode(e+1),this._metaGame.getDataToLoad().then(function(e){return r.Loader.load(e)}))},l._onCreateViewHolder=function(){return cc.instantiateFrom(this._holderPrefab).getComponent(a.RecyclerScrollViewHolderComponent)},l._onBindViewHolder=function(e,t,n){var o=this;void 0===n&&(n={});var r=Promise.resolve();if(e.getType()!==a.RecyclerScrollViewHolderComponent.VIEW_TYPE_PLACEHOLDER){var c=this._metaGame.getModule("episodes"),s=t===c.getAvailableEpisodeCount(),p=c.getCurrentEpisode()-1;if(s){var l=this._metaGame.getModule("progress");r=this.createEpisode(t).then(function(n){e.setView(n),l.hasChange||c.getCurrentEpisode()<=c.getCurrentAvailableEpisode()?(e.enableTransition(),p===t&&o._avatarComponent&&o._avatarComponent.setActive(!1)):(e.hideTransition(),p===t&&o._avatarComponent&&o._avatarComponent.setActive(!0))})}else this.hasView(t)||this.isLoadingNow(t)||this.createEpisode(t),this.isLoadingNow(t)&&(e.enableTransition(),r=this._loadings[t]),this.hasView(t)&&e.setView(this._episodeViews[t]),this.isVisibleEpisode(t)||e.enableTransition(),r=r.then(function(){e.getBindingAdapterPosition()===t&&(e.setView(o._episodeViews[t]),o.emit("changeItem",e.node),o.isVisibleEpisode(t)&&e.hideTransition())});p===t&&r.then(function(){var n=e.getView();if(n){var a=n.getComponent(i.EpisodicEpisodeComponent);if(a&&o._avatarComponent){var r=c.getRelativeLevel(c.getCurrentLevel())-1,p=a.getPinNodeByIndex(r);o._avatarComponent.attachToNode(p),s||o._avatarComponent.setActive(o.isVisibleEpisode(t))}}})}else e.enableTransition()},l.getViewLoadingPromise=function(e){var t=this._metaGame.getModule("episodes");return this.isLoadingNow(e)?this._loadings[e]:this.hasView(e)?Promise.resolve():e===t.getAvailableEpisodeCount()?Promise.resolve():Promise.reject()},l.hasView=function(e){return!!this.getView(e)},l.getView=function(e){return this._episodeViews[e]},l.getItemCount=function(){return this._metaGame.getModule("episodes").getAvailableEpisodeCount()+1},l.onViewDetached=function(e){e.resetTransition(),e.resetView()},l.getLoadingPromises=function(){return Object.values(this._loadings)},o}(o.RecyclerScrollAdapter);n.EpisodicScrollAdapter=l,cc._RF.pop()},{"./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)","./Loader (@tapclap.game-kit.loader)":"Loader (@tapclap.game-kit.loader)","./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)":"RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)","./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"}],"EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0b0f3LR1LdNgb57Y5L5U9Jf","EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicScrollViewComponent=void 0;var o,a,r,i,c,s,p,l=e("./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),m=e("./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)");function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var h=cc._decorator,g=h.ccclass,v=h.property,_=(o=(0,h.menu)("UI-Kit/ScrollView/EpisodicScrollViewComponent"),a=v({visible:!0,type:cc.Float,min:0,max:1,step:.05}),r=v({visible:!0,type:cc.Float,min:0,max:1,step:.05}),g(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return u(t=e.call.apply(e,[this].concat(o))||this,"_lastEpisodeOverscroll",s,d(t)),u(t,"_inLoadingEpisodeOverscroll",p,d(t)),t._adapter=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var a=o.prototype;return a.run=function(){var t=this;return e.prototype.run.call(this).then(function(){cc.find("Canvas").on(cc.Node.EventType.SIZE_CHANGED,function(){t._setScrollRestrictions()})})},a.setAdapter=function(t){var n=this;e.prototype.setAdapter.call(this,t),t.on("changeItem",function(){return n._setScrollRestrictions()})},a._onScrollRestrict=function(){var e=this._getHolderByPosition(this._adapter.getItemCount()-1);if(e){var t=e[this._lengthKey]-e[this._lengthKey]*this._lastEpisodeOverscroll;this._isInverted()?this._contentMaxPos-=t:this._contentMinPos+=t}if(this._scrollRestrictionEnabled){var n=this._content.children[this._content.childrenCount-1],o=this._content.children[0];if(this._isInverted()){var a=[o,n];n=a[0],o=a[1]}var r=this._getHolderComponent(n).getBindingAdapterPosition(),i=this._getHolderComponent(o).getBindingAdapterPosition();this._adapter.isLoadingNow(r)&&(this._contentMinPos+=n[this._lengthKey]-n[this._lengthKey]*this._inLoadingEpisodeOverscroll),this._adapter.isLoadingNow(i)&&(this._contentMaxPos-=o[this._lengthKey]-o[this._lengthKey]*this._inLoadingEpisodeOverscroll)}},a.scrollToHolder=function(t,n){var o=this;return void 0===n&&(n={}),this._disableScrollRestriction(),this.node.pauseSystemEvents(!0),e.prototype.scrollToHolder.call(this,t,n).then(function(){return o._adapter.getViewLoadingPromise(t)}).then(function(){return o._enableScrollRestriction()}).then(function(){return o.node.resumeSystemEvents(!0)})},a.scrollToLevel=function(e,t,n){var o=this;return void 0===n&&(n={force:!1,align:null,timeScale:1}),this._adapter.createEpisode(e).then(function(a){o._disableUtilizer();var r=Promise.resolve(),i=a.getComponent(m.EpisodicEpisodeComponent).getPinNodeByIndex(t).parent;if(i){if(!o.node.getBoundingBoxToWorld().contains(i.getBoundingBoxToWorld())){var c=i[o._coordinateKey]<0?-1:1;o._isInverted()&&(c*=-1);var s=Math.max(0,Math.min(e+c,o._adapter.getItemCount()-1));o._getHolderByPosition(s)||(s===o._adapter.getItemCount()-1?o.renderViewAtPosition(s):r=o._adapter.createEpisode(s).then(function(){o._getHolderByPosition(s)||o.renderViewAtPosition(s)}))}return r.then(function(){return o.scrollToHolder(e,Object.assign({target:i},n))})}return r.then(function(){return o.scrollToHolder(e,n)})})},a.openEpisode=function(e){var t=this._getHolderByPosition(e);if(t){var n=this._getHolderComponent(t);if(n)return n.hideTransition()}return Promise.resolve()},a._setScrollRestrictions=function(){var e=this._content.getBoundingBox(),t=this.node;e[this._lengthKey]>0&&(this._contentMaxPos=e[this._lengthKey]/2-t[this._lengthKey]/2,this._contentMinPos=-(e[this._lengthKey]/2-t[this._lengthKey]/2),this._onScrollRestrict())},o}(l.RecyclerScrollViewComponent),s=f(c.prototype,"_lastEpisodeOverscroll",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),p=f(c.prototype,"_inLoadingEpisodeOverscroll",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),i=c))||i)||i);n.EpisodicScrollViewComponent=_,cc._RF.pop()},{"./EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)":"EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)","./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"}],"EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m;function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"e01d8VLxFFM74Z+4zgXg6Va","EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)"),n.__esModule=!0,n.EpisodicStarsRewardComponent=void 0;var h=cc._decorator,g=h.ccclass,v=h.property,_=(o=(0,h.menu)("UI-Kit/MetaGame/Episodic/EpisodicStarsRewardComponent"),a=v({type:cc.Node,tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u043e\u0442\u043a\u0440\u044b\u0442\u043e\u0439 \u043a\u043e\u0440\u043e\u0431\u043a\u043e\u0439",visible:!0}),r=v({type:cc.Node,tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u0437\u0430\u043a\u0440\u044b\u0442\u043e\u0439 \u043a\u043e\u0440\u043e\u0431\u043a\u043e\u0439",visible:!0}),i=v({type:cc.Label,tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435",visible:!0}),g(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return u(t=e.call.apply(e,[this].concat(o))||this,"_openedNode",p,d(t)),u(t,"_closedNode",l,d(t)),u(t,"_labelNode",m,d(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var a=o.prototype;return a.showOpenedState=function(e){var t=this;void 0===e&&(e=!1),this._openedNode.active=!0,e?this._closedNode.active=!1:(this._openedNode.opacity=0,this._closedNode.runAction(cc.sequence([cc.fadeOut(1),cc.callFunc(function(){return t._closedNode.active=!1})])),this._openedNode.runAction(cc.fadeIn(1)))},a.showClosedState=function(e,t){void 0===e&&(e=0),void 0===t&&(t=60),this._closedNode.opacity=255,this._openedNode.active=!1,this._labelNode&&(this._labelNode.string=e+"/"+t)},o}(cc.Component),p=f(s.prototype,"_openedNode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=f(s.prototype,"_closedNode",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f(s.prototype,"_labelNode",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c);n.EpisodicStarsRewardComponent=_,cc._RF.pop()},{}],"EpisodicWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"d0342eZ5hhAu5ek8+Qr9Xhc","EpisodicWindowLayoutComponent (scripts.windows.layouts)"),n.__esModule=!0,n.EpisodicWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_=e("./EpisodeWindowItemComponent (scripts.windows.items)"),b=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),C=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function w(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var O=cc._decorator,R=O.ccclass,P=O.property,k=(o=P({visible:!0}),a=P({visible:!0}),r=P({type:[C.ButtonControlComponent],visible:!0}),i=P({type:cc.Node,visible:!0}),c=P({type:cc.Node,visible:!0}),s=P({type:cc.Material,visible:!0}),p=P({visible:!0}),R((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return w(t=e.call.apply(e,[this].concat(o))||this,"_rowLength",u,E(t)),w(t,"_duration",d,E(t)),w(t,"_buttons",y,E(t)),t._items=[],w(t,"_prevNavNode",f,E(t)),w(t,"_nextNavNode",h,E(t)),w(t,"_shadowMaterial",g,E(t)),w(t,"_shadowColor",v,E(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,x(t,n);var a,r,i=o.prototype;return i._createItem=function(){var e=cc.instantiateFrom(this._options.item.prefab).getComponent(_.EpisodeWindowItemComponent);if(e)return e;throw new Error("The prefab in path "+this._options.item.prefab+" not found!")},i._clearRows=function(){var e=this;return Promise.all(this._getRows().map(function(t){return new Promise(function(n){t.runAction(cc.sequence(cc.fadeOut(e._duration),cc.callFunc(function(){e._items=[],n(),t.removeAllChildren()})))})}))},i.getMaxVisibleEpisodesCount=function(){return this._getRows().length*this._rowLength},i.showItems=function(e,t,n){var o=this;return this._buttons.forEach(function(e){e.setInteractable(!1)}),this._clearRows().then(function(){for(var a=0;a<=t-e;a++){var r=o._createItem();r.setNumber(a+e,n),o._items.push(r),o._pushToRow(r.node,Math.floor(a/o._rowLength)),o._buttons.forEach(function(e){e.setInteractable(!0)})}}).then(function(){o._getRows().forEach(function(e){e.runAction(cc.fadeIn(o._duration))})})},i.toggleNavButton=function(e,t){var n="_"+e+"NavNode";this[n]&&(this[n].active=void 0!==t?t:!this[n].active)},i.initialize=function(t){var n=this;void 0===t&&(t={}),e.prototype.initialize.call(this,t),this._prevNavNode.on(cc.Node.EventType.TOUCH_END,function(){return n.window.events.emit("prevButtonClick")}),this._nextNavNode.on(cc.Node.EventType.TOUCH_END,function(){return n.window.events.emit("nextButtonClick")})},a=o,(r=[{key:"items",get:function(){return this._items}},{key:"shadowMaterial",get:function(){return this._shadowMaterial}},{key:"shadowColor",get:function(){return this._shadowColor}}])&&S(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(b.RowContentWindowLayoutComponent),u=A(m.prototype,"_rowLength",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=A(m.prototype,"_duration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),y=A(m.prototype,"_buttons",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=A(m.prototype,"_prevNavNode",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=A(m.prototype,"_nextNavNode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A(m.prototype,"_shadowMaterial",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A(m.prototype,"_shadowColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color(30,30,30,255)}}),l=m))||l);n.EpisodicWindowLayoutComponent=k,k.EVENT_PREV_BUTTON_CLICK="prevButtonClick",k.EVENT_NEXT_BUTTON_CLICK="nextButtonClick",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./EpisodeWindowItemComponent (scripts.windows.items)":"EpisodeWindowItemComponent (scripts.windows.items)","./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"89a12akUk1UMa96hcoaIIB4","EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.EqualTagExplodeSwapSystemHandler=void 0;var i=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),c=e("./TagComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t){var n=[e,t],o=r(n.map(function(e){var t;return null===(t=null==e?void 0:e.getEnabledComponentByClass(c.TagComponent))||void 0===t?void 0:t.value}),2),a=o[0],s=o[1];a&&s&&a===s&&n.forEach(function(e){return e.addComponent(i.ExplodeImmediateComponent.KEY,new i.ExplodeImmediateComponent)})},t}(e("./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)").SwapSystemHandler);n.EqualTagExplodeSwapSystemHandler=s,cc._RF.pop()},{"./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)":"SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)","./TagComponent (@tapclap.match-x.engine.components)":"TagComponent (@tapclap.match-x.engine.components)"}],"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";cc._RF.push(t,"8b5f8d0FStbQJIBQp+vZkrG","EventAnimation (@tapclap.match-x.engine.systems.game-action-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EventTriggerAnimation=n.EventListenAnimation=void 0;var r=e("./EventComponent (@tapclap.match-x.engine.components)"),i=e("./Animation (@tapclap.match-x.engine.systems.game-action-system)"),c=function(e){function t(t,n){var o=e.call(this)||this;n||(cc.warn("Event key not defined"),o._resolve()),o._entity=t,o._key=n;var a=o._entity.getComponentByClass(r.EventComponent);return a?a.on(o._key).then(function(){o._resolve()}):(cc.warn('Entity "'+o._entity.type+" hasn't event component\""),o._resolve()),o}return a(t,e),t.prototype.run=function(){return e.prototype.run.call(this)},t}(i.Animation);n.EventListenAnimation=c;var s=function(e){function t(t,n,o,a){void 0===o&&(o={}),void 0===a&&(a=!0);var r=e.call(this)||this;return r._entity=t,r._key=n,r._options=o,r._wait=a,r}return a(t,e),t.prototype.run=function(){var t=this,n=this._entity.getComponentByClass(r.EventComponent);if(!this._key)return cc.warn("Event key not defined"),this._resolve(),e.prototype.run.call(this);if(n){var o=n.emit(this._key,this._options);this._wait?o.then(function(){t._resolve()}):this._resolve()}else cc.warn('Entity "'+this._entity.type+" hasn't event component\""),this._resolve();return e.prototype.run.call(this)},t}(i.Animation);n.EventTriggerAnimation=s,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)","./EventComponent (@tapclap.match-x.engine.components)":"EventComponent (@tapclap.match-x.engine.components)"}],"EventComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c190d5sThlT2ISbixR37+7R","EventComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EventComponent=void 0;var r=e("./EventEmitter (@tapclap.utils-js.events)"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._events=new r.EventEmitter,t}return a(t,e),t.prototype.on=function(e){var t=this;return new Promise(function(n){t._events.on(e,n)})},t.prototype.emit=function(e,t){return void 0===t&&(t={}),this._events.emit(e,t)},t.KEY="event",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.EventComponent=i,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)","./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"EventEmitter (@tapclap.utils-js.events)":[function(e,t,n){"use strict";cc._RF.push(t,"f490dtpoG9fooWVo87lR2UH","EventEmitter (@tapclap.utils-js.events)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.EventEmitter=void 0;var a=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=0);var a={callback:t,context:n,priority:o};this._events[e]?(this._events[e].push(a),this._events[e].sort(function(e,t){return t.priority-e.priority})):this._events[e]=[a]},e.prototype.once=function(e,t,n,o){var a=this;void 0===n&&(n=null),void 0===o&&(o=0);var r=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return a.remove(e,r,n),t.apply(n,o)};this.on(e,r,n,o)},e.prototype.remove=function(e,t,n){var a,r;void 0===n&&(n=null);var i=e?[e]:Object.keys(this._events);try{for(var c=o(i),s=c.next();!s.done;s=c.next()){var p=s.value;this._events[p]&&(this._events[p]=this._events[p].filter(function(e){return t&&t!==e.callback||n&&n!==e.context}))}}catch(l){a={error:l}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(a)throw a.error}}},e.prototype.removeAll=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t,n,a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];var i=[];if(this._events[e]){var c=this._events[e].slice();try{for(var s=o(c),p=s.next();!p.done;p=s.next()){var l=p.value;i.push(l.callback.apply(l.context,a))}}catch(m){t={error:m}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}return Promise.all(i)},e}();n.EventEmitter=a,cc._RF.pop()},{}],"EventListener (@tapclap.utils-js.events)":[function(e,t,n){"use strict";cc._RF.push(t,"b725f1ONBRarLixMP60NVfT","EventListener (@tapclap.utils-js.events)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function a(){}Object.defineProperty(n,"__esModule",{value:!0}),n.EventListener=void 0,n.EventListener=a,a.prototype.listenTo=function(e,t,n){var o=this._listeningTargets||new Set;o.add(e),e.on(t,n,this),this._listeningTargets=o},a.prototype.stopListen=function(e,t,n){var a,r;if(e)e.remove(t,n,this);else if(this._listeningTargets){try{for(var i=o(this._listeningTargets),c=i.next();!c.done;c=i.next())c.value.remove(null,null,this)}catch(s){a={error:s}}finally{try{c&&!c.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}delete this._listeningTargets}},a.prototype.onDestroy=function(){this.stopListen()},cc._RF.pop()},{}],"EventObject (@tapclap.utils-js.events)":[function(e,t,n){"use strict";cc._RF.push(t,"08377v61YFcHJp16799v2ob","EventObject (@tapclap.utils-js.events)"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventObject=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)"),a=function(){function e(){this._events=new o.EventEmitter}return Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),e}();n.EventObject=a,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"b3ae5DoZI9fJblZQB8I1WcE","ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.ExpandShopItemComponent=void 0;var o,a=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),r=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.onLoad=function(){var t=this;this._button&&this._button.events.on(a.ButtonControlComponent.EVENT_CLICK,function(){t._windowLayout.window.events.emit(o.EVENT_SELECT,t)}),e.prototype.onLoad.call(this)},o}(r.ShopItemComponent))||o;n.ExpandShopItemComponent=c,c.EVENT_SELECT="expandEventSelect",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"71a23ac1XhbGpO/XObPLzGy","ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeAffectNeighborsComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeAffectNeighborsComponent=a,a.KEY="explodeAffectNeighbors",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6890aVbystZgpaBo50EqL2b","ExplodeAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.ExplodeAnimation=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this).addAction(cc.spawn([cc.fadeOut(.1).easing(cc.easeBackIn()),cc.scaleTo(.1,0,0).easing(cc.easeIn(2))]),t),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ActionAnimation (@tapclap.match-x.cocos.animations)").ActionAnimation);n.ExplodeAnimation=a,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)"}],"ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7f4f9k03s5WdryP/iPT0JJk","ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.ExplodeAnimationBuilder=void 0;var c=function(e){var t,n;function a(t){var n,o=t.creators,a=void 0===o?[]:o;return(n=e.call(this)||this)._creators=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.build=function(e){var t=[],n=e.data;if(n)for(var a,r=o(n);!(a=r()).done;)for(var i,c=0,s=o(a.value);!(i=s()).done;)for(var p,l=i.value,m=o(this._creators);!(p=m()).done;){var u=p.value,d=u.creator,y=u.options,f={cell:l.cell,entity:l.entity,remove:l.remove,blasted:l.blasted,blastedBy:l.blastedBy,affectedBy:l.affectedBy,isGoalTarget:l.isGoalTarget,input:l.input,loopIndex:l.loopIndex,index:c},h=new d(Object.assign(f,y)).create();h.length&&(t.push(h),c++)}return t},a}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.ExplodeAnimationBuilder=c,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"ExplodeAnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b31300j6mFZD53dzVGIsm4+","ExplodeAnimationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeAnimationComponent=void 0;var r=function(e){function t(t){var n,o=e.call(this)||this;return o._waitPrevAnimation=null!==(n=t.waitPrevAnimation)&&void 0!==n&&n,o}return a(t,e),Object.defineProperty(t.prototype,"waitPrevAnimation",{get:function(){return this._waitPrevAnimation},enumerable:!1,configurable:!0}),t.KEY="explodeAnimation",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeAnimationComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"703e3wl2PRXBq/yQtiKKTra","ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),n.__esModule=!0,n.ExplodeAnimationCreator=void 0;var o=e("./ExplodeAnimation (@tapclap.match-x.cocos.animations)"),a=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationCreator (@tapclap.match-x.cocos.animations.creators)"),i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),s=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),p=e("./AudioComponent (@tapclap.match-x.engine.components)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),u=e("./GoalAnimationComponent (@tapclap.match-x.engine.components)"),d=e("./MergePartComponent (@tapclap.match-x.engine.components)"),y=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=e("./AnimationComponent (@tapclap.match-x.engine.components)"),h=e("./ExplodeAnimationComponent (@tapclap.match-x.engine.components)"),g=e("./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"),v=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)");function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._cell=t.cell,n._entity=t.entity,n._remove=t.remove,n._blasted=t.blasted,n._blastedBy=t.blastedBy,n._affectedBy=t.affectedBy,n._input=t.input,n._index=t.index,n._loopIndex=t.loopIndex,n._excludeEntityTypes=t.excludeEntityTypes,n._audioEffectsPlayer=t.audioEffectsPlayer,n._sounds=t.sounds,n._soundKeys=t.soundKeys,n._isGoalTarget=t.isGoalTarget,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var b=r.prototype;return b.create=function(){var e=[],t=this._entity.getEnabledComponent("goal"),n=this._entity.getEnabledComponent("health"),_=this._entity.getComponent("render").node,b=new c.AnimationFactory(this._entity),C=new c.AnimationFactory(this._cell),w=this._entity.getComponent(u.GoalAnimationComponent.KEY);if(!this._excludeEntityTypes.includes(this._entity.type)){var S=null,E=this._getSoundKey(),x=this._entity.getComponent(p.AudioComponent.KEY);if(x){var A=this._remove?r.EXPLODE_SOUND_KEY:r.CHANGE_STATE_SOUND_KEY,O=n?A+"-"+n.getValue():""+A,R=x.getSound(O)||x.getSound(A);R&&(E=R)}if(!this._entity.getEnabledComponentByClass(d.MergePartComponent))if(this._remove){if(!t||w&&!w.state||!this._isGoalTarget)switch(!0){case b.hasAnimation(s.AnimationResolver.TYPE_EXPLODE):S=b.createAnimation(s.AnimationResolver.TYPE_EXPLODE,{event:"finish",timeScale:2});break;case b.hasAnimation(s.AnimationResolver.TYPE_FINAL):S=new l.ChainAnimation([b.createAnimation(s.AnimationResolver.TYPE_FINAL)]);break;default:S=new a.GroupAnimation([new o.ExplodeAnimation(_),C.createAnimation(s.AnimationResolver.TYPE_EXPLODE)])}}else if(!this._entity.getEnabledComponent(m.CellHealthComponent.KEY))switch(!0){case b.hasAnimation(s.AnimationResolver.TYPE_EXPLODE):S=b.createAnimation(s.AnimationResolver.TYPE_EXPLODE,{event:"finish"});break;case b.hasAnimation(s.AnimationResolver.TYPE_STATIC):S=b.createAnimation(s.AnimationResolver.TYPE_STATIC)}if(S&&b.hasAnimation(s.AnimationResolver.TYPE_EXPLODE_AFTER)&&(S=new l.ChainAnimation([S,b.createAnimation(s.AnimationResolver.TYPE_EXPLODE_AFTER)])),S){var P=this._entity.getEnabledComponentByClass(h.ExplodeAnimationComponent);if(P&&P.waitPrevAnimation){var k=this._entity.getEnabledComponentByClass(f.AnimationComponent);k&&(S=new l.ChainAnimation([new g.WaitPromiseAnimation(Promise.all(k.getAnimationsByTag("explode").map(function(e){return e.settled}))),S]))}var T=this._affectedBy||this._blastedBy,I=new l.ChainAnimation([T?new y.EventListenAnimation(T,"explode"):new v.DummyAnimation,this._audioEffectsPlayer.create(E,{mergable:0}),S,new y.EventTriggerAnimation(this._entity,"explode")]);e.push(new i.AnimationData(this._entity,I,"explode"))}}return e},b._getSoundKey=function(){return this._sounds[Math.min(this._loopIndex,this._sounds.length-1)]},r}(r.AnimationCreator);n.ExplodeAnimationCreator=b,b.EXPLODE_SOUND_KEY="explode",b.CHANGE_STATE_SOUND_KEY="changeState",cc._RF.pop()},{"./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./AnimationCreator (@tapclap.match-x.cocos.animations.creators)":"AnimationCreator (@tapclap.match-x.cocos.animations.creators)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeAnimation (@tapclap.match-x.cocos.animations)":"ExplodeAnimation (@tapclap.match-x.cocos.animations)","./ExplodeAnimationComponent (@tapclap.match-x.engine.components)":"ExplodeAnimationComponent (@tapclap.match-x.engine.components)","./GoalAnimationComponent (@tapclap.match-x.engine.components)":"GoalAnimationComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MergePartComponent (@tapclap.match-x.engine.components)":"MergePartComponent (@tapclap.match-x.engine.components)","./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"885fbrwXQ1ehokj5JbaMEF9","ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeAsCombinationComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeAsCombination",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.ExplodeAsCombinationComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"9fdfdmWMNle/YHUCE/pdRIo","ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeBeforeEmitOnEmptyTrackSystem=void 0;var i=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),p=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),l=e("./WalkOnTrackComponent (@tapclap.match-x.engine.components)"),m=e("./WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.process=function(){var e,t,n=this;try{for(var o=r(this._world.getComponentsByClass(c.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t;if(n._isEmptyTrack(e)){var o=null===(t=e.getComponentByClass(p.TrackStorageComponent).storage[0])||void 0===t?void 0:t.getEntity();if(o){var a=e.getComponentByClass(m.WalkOnTrackEntityTypeComponent).type,r=n._world.getComponent("goals").goals.find(function(e){return e.isGoalByType(a)});if(r&&r.counter<=n._getEntitiesCountOnType(a))return!1;n._explode(o)}}})}catch(i){e={error:i}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!1},t.prototype._isEmptyTrack=function(e){var t;if(e.getComponentByClass(s.StartTrackComponent)){var n=null===(t=e.getComponentByClass(p.TrackStorageComponent))||void 0===t?void 0:t.storage;if(n)return n.every(function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(l.WalkOnTrackComponent))})}return!1},t.prototype._getEntitiesCountOnType=function(e){var t,n,o={};try{for(var a=r(this._world.getComponentsByClass(c.GridComponent)),i=a.next();!i.done;i=a.next())i.value.grid.forEachEntities(function(e){e.getComponentByClass(l.WalkOnTrackComponent)&&(o[e.type]=void 0!==o[e.type]?++o[e.type]:1)})}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o[e]||0},t.prototype._explode=function(e){var t=new i.ExplodeImmediateOnceComponent;t.enable=!0,e.addComponent(i.ExplodeImmediateOnceComponent.KEY,t)},t.KEY="explodeBeforeEmitOnEmptyTrackSystem",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ExplodeBeforeEmitOnEmptyTrackSystem=u,cc._RF.pop()},{"./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)","./WalkOnTrackComponent (@tapclap.match-x.engine.components)":"WalkOnTrackComponent (@tapclap.match-x.engine.components)","./WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)":"WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)"}],"ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"70296HD34ZTTYeH6qlBOw5J","ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeBlastAsCombinationComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeBlastAsCombinationComponent=a,a.KEY="explodeBlastAsCombination",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeCollectionComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5585eIcUhZT+J3/PqN9Ekz3","ExplodeCollectionComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeCollectionComponent=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._models=new Set,t}return a(t,e),t.prototype.add=function(e){this._models.add(e)},t.prototype.reset=function(){this._models.clear()},Object.defineProperty(t.prototype,"models",{get:function(){return Array.from(this._models.values())},enumerable:!1,configurable:!0}),t.KEY="explodeCollection",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeCollectionComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeCollectionSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"9dae8zB36tUxZstYwAr0fSY","ExplodeCollectionSystem (@tapclap.match-x.engine.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeCollectionSystem=void 0;var i=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.process=function(){var e,t,n,o,a=this._world.getComponentByClass(s.ExplodeCollectionComponent);if(a)try{for(var i=r((null!==(o=null===(n=this._world.getState(c.ExplodeSystem.STATE))||void 0===n?void 0:n.data)&&void 0!==o?o:[]).flat()),p=i.next();!p.done;p=i.next()){var l=p.value;a.add(l)}}catch(m){e={error:m}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!1},t.prototype.postProcess=function(){var e=this._world.getComponentByClass(s.ExplodeCollectionComponent);e&&e.reset()},Object.defineProperty(t.prototype,"_collectionComponent",{get:function(){return this._world.getComponentByClass(s.ExplodeCollectionComponent)},enumerable:!1,configurable:!0}),t.KEY="explodeCollection",t.STATE="explodeCollection",t}(i.PipelineProcessSystem);n.ExplodeCollectionSystem=p,cc._RF.pop()},{"./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeCollectorSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"7f8c5SIJ21bVL0LtUjy1zPk","ExplodeCollectorSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.ExplodeCollectorSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)"),i=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var s=o.prototype;return s.process=function(){var e=new Map,t=this._world.getEnabledComponent("tiles").grid;this._resetGridEntityGoals();for(var n=0;n<t.rows;n++)for(var o=0;o<t.cols;o++)for(var s,p=t.getCell(n,o),l=c(p.entities);!(s=l()).done;){var m=s.value;if(m){var u=m.getEnabledComponent(a.GoalCollectorComponent.KEY),d=m.getEnabledComponent(r.ExplodeOnCompletedGoalComponent.KEY);if(u&&d&&u.isAllGoalsCompleted){var y=d.selfOnly;e.set(m,{entity:m,cell:p,selfOnly:y})}}}var f=Array.from(e.values());f.length>0&&this._world.pushState(i.ExplodeSystem.DO_STATE_KEY,f)},s._resetGridEntityGoals=function(){var e=this._world.getEnabledComponent("tiles").grid,t=e.getEnabledComponent("goals"),n=[];if(t)for(var o,a=c(t.goals);!(o=a()).done;){var r=o.value.collector;if(r){var i=r.getEnabledComponent("goalCollector");if(i&&i.isAllGoalsCompleted)for(var s,p=c(i.goals);!(s=p()).done;){var l=s.value;t.removeGoal(l),n.push(l)}}}for(var m=0;m<e.rows;m++)for(var u=0;u<e.cols;u++)for(var d,y=c(e.getCell(m,u).getEntitiesByComponentName("goal"));!(d=y()).done;){var f=d.value,h=f.getEnabledComponent("goal");n.includes(h.goal)&&f.removeComponent("goal")}},o}(o.PipelineProcessSystem);n.ExplodeCollectorSystem=m,m.KEY="explodeCollector",cc._RF.pop()},{"./ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)":"ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"84600DFk3lYKbWppQbjMR3a","ExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeComponent=void 0;var r=function(e){function t(t){var n,o=e.call(this)||this;return o._retriever=null!==(n=t.retriever)&&void 0!==n?n:{type:"single",allowComponents:[],disallowComponents:[]},o}return a(t,e),Object.defineProperty(t.prototype,"retriever",{get:function(){return this._retriever},set:function(e){this._retriever=e},enumerable:!1,configurable:!0}),t.KEY="explode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"a7ce4xI9N9SNpT3ntLNsWUK","ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeCoverEntitySystemStrategy=void 0;var i=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e){var n,o,a,s,p,l,m=[],u=new Set,d=(null===(l=null===(p=e.getState(c.ExplodeSystem.STATE))||void 0===p?void 0:p.data)||void 0===l?void 0:l.flat())||[];if(d.length>0){var y=new Set(d.filter(function(e){return e.entity.getComponentByClass(i.PreventCoverComponent)}).map(function(e){return e.cell})),f=d.filter(function(e){return e.blasted.length>0}).reverse();try{for(var h=r(f),g=h.next();!g.done;g=h.next()){var v=g.value,_=v.cell,b=v.entity,C=v.blasted;if((this._hasCoverEntityInCell(_)||u.has(_))&&!y.has(_))try{for(var w=(a=void 0,r(C)),S=w.next();!S.done;S=w.next()){var E=S.value.cell;!this._canCoverCell(E)||u.has(E)||y.has(E)||(m.push({cell:E,strategyKey:t.KEY,initiatorEntity:b,initiatorEvent:"explode"}),u.add(E))}}catch(x){a={error:x}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}}catch(A){n={error:A}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}return m},t.KEY="explodeCoverEntityStrategy",t}(e("./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)").CoverEntitySystemStrategy);n.ExplodeCoverEntitySystemStrategy=s,cc._RF.pop()},{"./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)"}],"ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7b253mZrQpVcJMo8HDnLpg9","ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeDeathEntityComponent=void 0;var r=function(e){function t(t){var n=(void 0===t?{removeComponents:[]}:t).removeComponents,o=void 0===n?[]:n,a=e.call(this)||this;return a._removeComponents=[],a._removeComponents=o,a}return a(t,e),Object.defineProperty(t.prototype,"removeComponents",{get:function(){return this._removeComponents},enumerable:!1,configurable:!0}),t.KEY="explodeDeathEntity",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeDeathEntityComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"c0711rH5CZUGq7z05Uh5/EX","ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeDeathEntitySystem=void 0;var i=e("./ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)"),p=e("./GridComponent (@tapclap.match-x.engine.components)"),l=e("./HealthComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=!1;if(!this._skipOnStates.some(function(e){var t;return null===(t=n._world.getState(e))||void 0===t?void 0:t.data}))try{for(var a=r(this._world.getEnabledComponentsByClass(p.GridComponent)),m=a.next();!m.done;m=a.next())m.value.grid.forEachEntities(function(e){var t,n,a,p,m=e.getEnabledComponentByClass(i.ExplodeDeathEntityComponent);if(m&&(null===(p=null===(a=e.getEnabledComponentByClass(l.HealthComponent))||void 0===a?void 0:a.isDeath)||void 0===p||p)){o=!0,e.addComponent(s.ExplodeOnDeathComponent.KEY,new s.ExplodeOnDeathComponent),e.addComponent(c.ExplodeImmediateComponent.KEY,new c.ExplodeImmediateComponent);try{for(var u=(t=void 0,r(m.removeComponents)),d=u.next();!d.done;d=u.next()){var y=d.value;e.removeComponent(y)}}catch(f){t={error:f}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}})}catch(u){e={error:u}}finally{try{m&&!m.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o},t.KEY="explodeDeathEntity",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ExplodeDeathEntitySystem=m,cc._RF.pop()},{"./ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)":"ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./ExplodeOnDeathComponent (@tapclap.match-x.engine.components)":"ExplodeOnDeathComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"e4520UDYvdarYKg2ce6va3y","ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeHandler=void 0;var o=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),a=function(){function e(){}return e.prototype.process=function(e,t,n){switch(n){case o.ExplodeSystem.TYPE_BLAST:return this._blast(e,t);case o.ExplodeSystem.TYPE_EXPLODE:return this._explode(e,t)}},e.prototype._explode=function(){return!1},e.prototype._blast=function(){return!1},e}();n.ExplodeHandler=a,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"}],"ExplodeImmediateComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"cd06dDYLj5Vs6x5qL7QPxTI","ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeImmediateComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeImmediateComponent=a,a.KEY="explodeImmediate",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c0311SJGT1Sw5e/mxu7CQqP","ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeImmediateOnceAfterChangeGroupComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeImmediateOnceAfterChangeGroup",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeImmediateOnceAfterChangeGroupComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)":[function(e,t,n){"use strict";cc._RF.push(t,"48238+fellV96W1Fc/TW5qH","ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeImmediateOnceAfterChangeGroupSystem=void 0;var i=e("./ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),s=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),p=e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),l=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n,o=(null===(n=this._world.getState(p.ChangeEntityGroupSystem.STATE))||void 0===n?void 0:n.data)||[];try{for(var a=r(o),s=a.next();!s.done;s=a.next()){var l=s.value.entity;if(l.getEnabledComponentByClass(i.ExplodeImmediateOnceAfterChangeGroupComponent)){var m=new c.ExplodeImmediateOnceComponent;m.enable=!0,l.addComponent(c.ExplodeImmediateOnceComponent.KEY,m)}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return!1},t.KEY="explodeImmediateOnceAfterChangeGroupSystem",t}(s.PipelineProcessSystem);n.ExplodeImmediateOnceAfterChangeGroupSystem=l,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ce6bbBblqVeC6WRTPOM0muy","ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeImmediateOnceComponent=void 0;var a=function(e){var t,n;function a(){var t;return(t=e.call(this)||this).enable=!1,t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)").ExplodeImmediateComponent);n.ExplodeImmediateOnceComponent=a,a.KEY="explodeImmediateOnce",cc._RF.pop()},{"./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)"}],"ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"45b95RXG4xXi6hjEEQ62Ejd","ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.ExplodeImmediateSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),i=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeComponent (@tapclap.match-x.engine.components)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.process=function(){var e=this._world.getComponent("tiles").grid,t=!1;if(e)for(var n=0;n<e.rows;n++)for(var o=0;o<e.cols;o++){var p=e.getCell(n,o);if(p){for(var l,m=s(p.getEntitiesByComponentName(r.ExplodeImmediateComponent.KEY));!(l=m()).done;){var u=l.value;u.getEnabledComponent(c.ExplodeComponent.KEY)?(this._world.pushState(a.ExplodeSystem.DO_STATE_KEY,[{cell:p,entity:u}]),t=!0):u.getComponent(c.ExplodeComponent.KEY)||u.removeComponent(r.ExplodeImmediateComponent.KEY)}for(var d,y=s(p.getEntitiesByComponentName(i.ExplodeImmediateOnceComponent.KEY));!(d=y()).done;){var f=d.value;if(f.getEnabledComponent(c.ExplodeComponent.KEY)){var h=f.getComponent(i.ExplodeImmediateOnceComponent.KEY);this._world.pushState(a.ExplodeSystem.DO_STATE_KEY,[{cell:p,entity:f}]),h&&(h.enable=!1,t=!0)}else f.getComponent(c.ExplodeComponent.KEY)||f.removeComponent(i.ExplodeImmediateOnceComponent.KEY)}}}return t},o}(o.PipelineProcessSystem);n.ExplodeImmediateSystem=u,u.KEY="ExplodeImmediateSystem",cc._RF.pop()},{"./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"dce6bgKy2BR+KlYFgzPXOkk","ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeJarjamAnimationBuilder=void 0;var s=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),p=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),l=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),m=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=e("./JarjamViewComponent (scripts.entity-view-components)"),h=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=function(e){function t(t){var n=e.call(this,{eventMap:"explode"})||this;return n._world=t.world,n._entityTypes=t.entityTypes,n._allowedRetrievers=t.allowedRetrievers,n}return a(t,e),t.prototype.build=function(e){var t,n,o,a=[],r=(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.flat())||[],l=function(e,t,n,o,r){var c=o||n,l=e.getComponentByClass(p.RenderComponent).node,g=new s.AnimationFactory(e),v=l.getComponent(f.JarjamViewComponent);if(g.hasAnimation("explode")&&v){var _=c?new d.EventListenAnimation(c,"explode"):new u.DummyAnimation;a.push({target:e,animation:new h.GroupAnimation([new m.ChainAnimation([_,new h.GroupAnimation([g.createAnimation("explode",{event:"finish",timeScale:2.5}),new y.FunctionAnimation(function(){return Promise.all(i([v.runAnimation(t,t,e)],r.map(function(e){var n=e.cell,o=e.entity;return v.runAnimation(t,n,o)})))})]),new d.EventTriggerAnimation(e,"explode")]),new u.DummyAnimation],!!c)})}};try{for(var g=c(r),v=g.next();!v.done;v=g.next()){var _=v.value;l(_.entity,_.cell,_.blastedBy,_.affectedBy,_.blasted)}}catch(b){t={error:b}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return[a]},t}(l.GameActionBuilder);n.ExplodeJarjamAnimationBuilder=g,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./JarjamViewComponent (scripts.entity-view-components)":"JarjamViewComponent (scripts.entity-view-components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"84e1e+HFetQgrjGIPm4dy6m","ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeLayerOnExplodeComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)").ExplodeLayerOnRemoveComponent);n.ExplodeLayerOnExplodeComponent=a,a.KEY="explodeLayerOnExplode",cc._RF.pop()},{"./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)":"ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)"}],"ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1c453ELbuZRP620T65g0xWF","ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeLayerOnRemoveComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=t.layers,a=void 0===o?[]:o,r=t.force,i=void 0!==r&&r;return(n=e.call(this)||this).layers=a,n.force=i,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeLayerOnRemoveComponent=a,a.KEY="explodeLayerOnRemove",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"6a6ab3xqW1UhYC/CQuvdjXb","ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeNextOnTrackOnExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeNextOnTrackOnExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeNextOnTrackOnExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"7dd85sIVedcC5UJTLyVHOxJ","ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeNextOnTrackOnExplodeSystem=void 0;var i=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodedByComponent (@tapclap.match-x.engine.components)"),l=e("./FinishTrackComponent (@tapclap.match-x.engine.components)"),m=e("./GridComponent (@tapclap.match-x.engine.components)"),u=e("./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)"),d=e("./TrackComponent (@tapclap.match-x.engine.components)"),y=e("./WalkComponent (@tapclap.match-x.engine.components)"),f=e("./WalkFinishComponent (@tapclap.match-x.engine.components)"),h=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),g=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),v=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),_=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.process=function(){var e,t,n,o,a,i=(null===(o=null===(n=this._world.getState(v.ExplodeSystem.STATE))||void 0===n?void 0:n.data)||void 0===o?void 0:o.flat())||[];try{for(var p=r(i),m=p.next();!m.done;m=p.next()){var u=m.value,d=u.cell,h=u.entity,g=h.getComponentByClass(y.WalkComponent),_=h.getComponentByClass(c.ExplodeNextOnTrackOnExplodeComponent);if(g&&_){var b=this._getNextCell(d,g.path);if(b){var C=h.getComponentByClass(s.ExplodeSelfOnNextTrackFinishComponent),w=null===(a=b.getEntity())||void 0===a?void 0:a.getComponentByClass(l.FinishTrackComponent);C&&w?(h.addComponent(f.WalkFinishComponent.KEY,new f.WalkFinishComponent),this._explode(d,h,b,b.getEntity())):this._explode(b,b.getEntity(),d,h)}}}}catch(S){e={error:S}}finally{try{m&&!m.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}return!1},t.prototype._getNextCell=function(e,t){var n,o,a=this;try{for(var i=r(this._world.getComponentsByClass(m.GridComponent)),c=i.next();!c.done;c=i.next()){var s=c.value.grid;return new h.NeighborRetriever({chunk:[e]}).retrieve(s).flat().find(function(e){return!t.includes(e)&&a._isValidCell(e)})}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},t.prototype._isValidCell=function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(u.PreventWalkExplodeComponent))&&e.entities.some(function(e){return e.getComponentByClass(d.TrackComponent)})},t.prototype._explode=function(e,n,o,a){if(n){var r=new i.ExplodeImmediateOnceComponent,c=new p.ExplodedByComponent;c.initiatorCell=o,c.initiatorEntity=a,r.enable=!0,n.addComponent(i.ExplodeImmediateOnceComponent.KEY,r),n.addComponent(p.ExplodedByComponent.KEY,c),this._world.setState(t.STATE,{targetCell:e,targetEntity:n,initiatorCell:o,initiatorEntity:a})}},t.KEY="explodeNextOnTrackOnExplodeSystem",t.STATE="explodeNextOnTrackOnExplodeSystemState",t}(g.PipelineProcessSystem);n.ExplodeNextOnTrackOnExplodeSystem=_,cc._RF.pop()},{"./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)":"ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodedByComponent (@tapclap.match-x.engine.components)":"ExplodedByComponent (@tapclap.match-x.engine.components)","./FinishTrackComponent (@tapclap.match-x.engine.components)":"FinishTrackComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)":"PreventWalkExplodeComponent (@tapclap.match-x.engine.components)","./TrackComponent (@tapclap.match-x.engine.components)":"TrackComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkFinishComponent (@tapclap.match-x.engine.components)":"WalkFinishComponent (@tapclap.match-x.engine.components)"}],"ExplodeOnBlastComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"33ca7Vf+/JaSb/fKNVedJHx","ExplodeOnBlastComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnBlastComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnBlastComponent=a,a.KEY="explodeOnBlast",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"22f1dd7NBtd0IbK/CTBfaac","ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnBlastNeighborComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)").ExplodeOnExplodeNeighborComponent);n.ExplodeOnBlastNeighborComponent=a,a.KEY="explodeOnBlastNeighbor",cc._RF.pop()},{"./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)"}],"ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4ba1aNO5XBSZ56ne92G7b1c","ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnCombinationComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnCombinationComponent=a,a.KEY="explodeOnCombination",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9a403gaYptXtKmtetG8q+zS","ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnCombinationNeighborComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)").ExplodeOnExplodeNeighborComponent);n.ExplodeOnCombinationNeighborComponent=a,a.KEY="explodeOnCombinationNeighbor",cc._RF.pop()},{"./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)"}],"ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"32184wVGAFZZIGiFf984RgE","ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.ExplodeOnCombinationSystem=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.process=function(){return console.warn("ExplodeOnCombinationSystem is deprecated, use ExplodeSystem instead"),!1},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ExplodeOnCombinationSystem=a,a.KEY="explodeOnCombination",a.STATE="explodeOnCombination",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"8e8ed3yrX5b14CJWVaNkKTx","ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnCompletedGoalComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=t.selfOnly,a=void 0===o||o;return(n=e.call(this)||this).selfOnly=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnCompletedGoalComponent=a,a.KEY="explodeOnCompletedGoal",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"24c49V0WZNawqHNg2PXVGx9","ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeOnCounterEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeOnCounterEnd",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnCounterEndComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"138b0DGy7RdfLv8gGjLXZwi","ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeOnCounterEndSystem=void 0;var i=e("./CounterComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)"),p=e("./GridComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n=!1;try{for(var o=r(this._world.getComponentsByClass(p.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){if(e.getComponentByClass(s.ExplodeOnCounterEndComponent)){var t=e.getComponentByClass(i.CounterComponent);t&&t.getValue()===t.getMinValue()&&(e.addComponent(c.ExplodeImmediateComponent.KEY,new c.ExplodeImmediateComponent),n=!0)}})}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t.KEY="ExplodeOnCounterEnd",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ExplodeOnCounterEndSystem=l,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)":"ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodeOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2d238oF5Ixbt7HDcG8LBcgK","ExplodeOnDeathComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnDeathComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnDeathComponent=a,a.KEY="explodeOnDeath",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5fee1tacXJWYZIOy6m3BF8l","ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnEndTurnComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnEndTurnComponent=a,a.KEY="explodeOnEndTurn",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"95e5ccOqJZXralamVQwgxg9","ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnExplodeNeighborComponent=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this).strategies=t.strategies||{default:{}},n.layers=t.layers||[],n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnExplodeNeighborComponent=a,a.KEY="explodeOnExplodeNeighbor",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnGroundComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c3bc06RiQ9QUIjJNCM5B3XZ","ExplodeOnGroundComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnGroundComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnGroundComponent=a,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnSwapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b7fa4pDMl9WEKbMRn1jsxg7","ExplodeOnSwapComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnSwapComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=t.components,a=void 0===o?[]:o;return(n=e.call(this)||this)._components=a,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"components",get:function(){return this._components}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnSwapComponent=r,r.KEY="explodeOnSwap",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b3345Xb5gpS5L1u+WEZAJwS","ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.ExplodeOnSwapSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),r=e("./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)"),i=e("./ExplodeImmediateComponent (@tapclap.match-x.engine.components)"),c=e("./PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.process=function(){var e=this._world.getState(a.SwapSystem.STATE_SWAP);if(null!=e&&e.data&&!e.data.some(function(e){return e.entity.getEnabledComponentByClass(c.PreventExplodeOnSwapComponent)}))for(var t,n=s(e.data);!(t=n()).done;){var o=t.value.entity;o.getEnabledComponent(r.ExplodeOnSwapComponent.KEY)&&o.addComponent(i.ExplodeImmediateComponent.KEY,new i.ExplodeImmediateComponent)}},o}(o.PipelineProcessSystem);n.ExplodeOnSwapSystem=u,u.KEY="explodeOnSwap",cc._RF.pop()},{"./ExplodeImmediateComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateComponent (@tapclap.match-x.engine.components)","./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)":"ExplodeOnSwapComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)":"PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"ExplodeOnTapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4e7ebbBE5tZkIK50Gu2UThV","ExplodeOnTapComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ExplodeOnTapComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOnTapComponent=a,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"dfd6a+1kCNZ3qmEnrsizDYe","ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.ExplodeOnTurnStateSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),r=e("./TurnStateComponent (@tapclap.match-x.engine.components)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,o=t.world,a=t.turnState,r=t.componentKey;return(n=e.call(this)||this)._world=o,n._turnState=a,n._componentKey=r,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.process=function(){var e=this._world.getComponent("tiles").grid,t=this._world.getEnabledComponentByClass(r.TurnStateComponent),n=!1;if(t&&t.state===this._turnState&&e)for(var o=0;o<e.rows;o++)for(var c=0;c<e.cols;c++){var s=e.getCell(o,c);if(s)for(var p,l=i(s.getEntitiesByComponentName(this._componentKey));!(p=l()).done;){var m=p.value.getComponent(a.ExplodeImmediateOnceComponent.KEY);m&&(m.enable=!0,n=!0)}}return n},o}(o.PipelineProcessSystem);n.ExplodeOnTurnStateSystem=l,l.KEY="explodeOnTurnState",cc._RF.pop()},{"./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"ExplodeOneCellComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"84545R1sh1UQJijkX3JFyeD","ExplodeOneCellComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeOneCellComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeOneCell",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeOneCellComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"e2b93NC5YVVHoQjBdN18DT7","ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeRetriever=void 0;var a=e("./GridComponent (@tapclap.match-x.engine.components)"),r=e("./InCombinationComponent (@tapclap.match-x.engine.components)"),i=e("./isExplodedComponent (@tapclap.match-x.engine.components)"),c=function(){function e(e){var t=e.cell,n=e.entity,o=e.validators,a=e.world;this._validators=null,this._cell=t,this._entity=n,this._validators=o,this._world=a}return Object.defineProperty(e.prototype,"cell",{get:function(){return this._cell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),e.prototype.filter=function(e){var t,n,c,s=this,p=new Set;try{for(var l=o(this._world.getComponentsByClass(a.GridComponent)),m=l.next();!m.done;m=l.next())m.value.grid.forEachEntities(function(e,t){(e.getEnabledComponentByClass(i.IsExplodedComponent)||e.getEnabledComponentByClass(r.InCombinationComponent))&&p.add(t)})}catch(d){t={error:d}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}var u=null!==(c=this._validators)&&void 0!==c?c:[];return e.filter(function(e){var t=[],n=function(n){switch(n){case"components":var o=s._validators[n]||{},a=o.allow,r=o.disallow;if(r&&r.some(function(t){var n;return!(null===(n=e.getEntity())||void 0===n?void 0:n.getEnabledComponentByClass(t))})&&t.push(!1),a){var i=!!a.some(function(t){var n;return null===(n=e.getEntity())||void 0===n?void 0:n.getEnabledComponentByClass(t)});t.push(i)}break;case"types":var c=s._validators[n]||{},p=(a=c.allow,c.disallow),l=e.invertedEntities,m=l.find(function(e){return!!p&&!!p.some(function(t){var n=t.replace(/\*/g,"[A-Za-z0-9]+"),o=new RegExp("^"+n+"$","g");return!!e.type.match(o)})});m&&t.push(l[0]!==m),a&&(i=a.some(function(e){var t=e.replace(/\*/g,"[A-Za-z0-9]+"),n=new RegExp("^"+t+"$","g");return l.some(function(e){return!!e.type.match(n)})}),t.push(i))}};for(var o in u)n(o);return t.push(!p.has(e)),t.every(function(e){return!0===e})})},e}();n.ExplodeRetriever=c,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./InCombinationComponent (@tapclap.match-x.engine.components)":"InCombinationComponent (@tapclap.match-x.engine.components)","./isExplodedComponent (@tapclap.match-x.engine.components)":"isExplodedComponent (@tapclap.match-x.engine.components)"}],"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"6995711m8lc0Lb1pYln5OMs","ExplodeRetrieverComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeRetrieverComponent=void 0;var r=function(e){function t(t){var n=t.type,o=t.options,a=void 0===o?{}:o,r=e.call(this)||this;return r._type=n,r._options=a,r}return a(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),t.KEY="explodeRetriever",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeRetrieverComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"d9e211kh0dR4pSvwYNWL52z","ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeSelfOnNextTrackFinishAnimationBuilder=void 0;var r=e("./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)"),i=e("./FinishTrackComponent (@tapclap.match-x.engine.components)"),c=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var t=[];if(e&&e.data){var n=e.data,o=n.targetEntity,a=n.initiatorCell;if(n.initiatorEntity.getComponentByClass(i.FinishTrackComponent)){var l=o.getEnabledComponentByClass(c.RenderComponent).node,m=new p.GroupAnimation([new s.FunctionAnimation(function(){return new r.PlanetarySwapAnimation(l,a.getComponentByClass(c.RenderComponent).node.getPosition(),!0,.25).run()})]);t.push({target:o,animation:m})}}return[t]},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.ExplodeSelfOnNextTrackFinishAnimationBuilder=l,cc._RF.pop()},{"./FinishTrackComponent (@tapclap.match-x.engine.components)":"FinishTrackComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)":"PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"aba0arZGExcvJDSSRTWSuQM","ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeSelfOnNextTrackFinishComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="explodeSelfOnNextTrackFinish",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodeSelfOnNextTrackFinishComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"07ed2ooXF1TL4Qf+zcaAJK1","ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.ExplodeStateModel=void 0;var a=function(){function e(e){var t=e.entity,n=void 0===t?null:t,o=e.cell,a=void 0===o?null:o,r=e.remove,i=void 0===r||r,c=e.blasted,s=void 0===c?[]:c,p=e.affected,l=void 0===p?[]:p,m=e.combination,u=void 0===m?[]:m,d=e.combinationType,y=void 0===d?null:d,f=e.combinationNeighbors,h=void 0===f?[]:f,g=e.blastNeighbors,v=void 0===g?[]:g,_=e.input,b=void 0===_?null:_,C=e.isBlast,w=void 0!==C&&C,S=e.blastedBy,E=void 0===S?null:S,x=e.affectedBy,A=void 0===x?null:x,O=e.loopIndex,R=void 0===O?0:O,P=e.grid,k=void 0===P?null:P,T=e.isGoalTarget,I=void 0!==T&&T;this._entity=n,this._cell=a,this._remove=i,this._blasted=s,this._affected=l,this._combination=u,this._combinationType=y,this._combinationNeighbors=h,this._blastNeighbors=v,this._input=b,this._entities=a.entities,this._isBlast=w,this._blastedBy=E,this._affectedBy=A,this._loopIndex=R,this._grid=k,this._isGoalTarget=I}var t,n;return t=e,(n=[{key:"entity",get:function(){return this._entity}},{key:"cell",get:function(){return this._cell}},{key:"remove",get:function(){return this._remove}},{key:"blasted",get:function(){return this._blasted}},{key:"affected",get:function(){return this._affected}},{key:"combination",get:function(){return this._combination}},{key:"combinationType",get:function(){return this._combinationType}},{key:"combinationNeighbors",get:function(){return this._combinationNeighbors}},{key:"blastNeighbors",get:function(){return this._blastNeighbors}},{key:"input",get:function(){return this._input}},{key:"entities",get:function(){return this._entities}},{key:"isBlast",get:function(){return this._isBlast}},{key:"blastedBy",get:function(){return this._blastedBy}},{key:"affectedBy",get:function(){return this._affectedBy}},{key:"loopIndex",get:function(){return this._loopIndex}},{key:"grid",get:function(){return this._grid}},{key:"isGoalTarget",get:function(){return this._isGoalTarget}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.ExplodeStateModel=a,cc._RF.pop()},{}],"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b4993VvrKNZcIshzCaHWWB6","ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),n.__esModule=!0,n.ExplodeSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)"),i=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),c=e("./ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)"),l=e("./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)"),m=e("./ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)"),u=e("./ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)"),d=e("./ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)"),y=e("./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)"),f=e("./PipelineSystem (@tapclap.match-x.engine.systems)"),h=e("./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)"),g=e("./GoalComponent (@tapclap.match-x.engine.components)"),v=e("./ExplodeOneCellComponent (@tapclap.match-x.engine.components)"),_=e("./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)"),b=e("./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)"),C=e("./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),w=e("./isExplodedComponent (@tapclap.match-x.engine.components)"),S=e("./GridComponent (@tapclap.match-x.engine.components)"),E=e("./ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)"),x=["cell","isCombination"];function A(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){var t,n;function o(t,n){var o,a=n.retrieverFactory,r=n.neighborRetrieverFactoryKey,i=n.singleRetrieverFactoryKey,c=n.handlers,s=void 0===c?[]:c,p=n.testers,l=void 0===p?[]:p,m=n.affectNeighborStrategies,u=void 0===m?{}:m;return(o=e.call(this)||this)._world=t,o._retrieverFactory=a,o._handlers=s,o._testers=l,o._affectNeighborStrategies=Object.assign({default:new h.AffectNeighborStrategy},u),o._neighborRetrieverFactoryKey=r,o._singleRetrieverFactoryKey=i,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,k(t,n);var R=o.prototype;return R.process=function(){var e=this._world.getEnabledComponent("tiles");if(e){var t=e.grid,n=this._process(t);if(n.length>0)return this._world.setState(o.STATE,[n]),!0}return!1},R._process=function(e){var t=this,n=new Map,h=[],S=new Map,R=new Map,P=new Set,k=new Set,T=function i(v){var E=v.cell,x=v.entity,A=v.isBlast,T=void 0!==A&&A,j=v.isCombination,L=void 0!==j&&j,F=v.combination,D=void 0===F?null:F,B=v.combinationType,G=void 0===B?null:B,N=v.input,W=v.blastedBy,H=void 0===W?null:W,V=v.affectedBy,K=void 0===V?null:V,U=v.force,Y=void 0!==U&&U,z=[],q=[],Z=[],X=n.get(x)||[];X.push(E),n.set(x,X);var J=x.getEnabledComponentByClass(a.ExplodeComponent),Q=!1,$=!1;(Y||J)&&function(){for(var n,r,d=T?o.TYPE_BLAST:o.TYPE_EXPLODE,f=O(t._handlers);!(r=f()).done;)r.value.process(E,x,d)&&($=!0);for(var h,g=O(t._testers);!(h=g()).done;)if(h.value.process(E,x,d)){Q=!0;break}($||Q)&&x.addComponent(w.IsExplodedComponent.KEY,new w.IsExplodedComponent);for(var v,_=x.getEnabledComponent(b.ExplodeRetrieverComponent.KEY),A=(null==_?void 0:_.type)||C.SingleExplodeRetriever.KEY,j=Object.assign({cell:E,entity:x,chunk:[E]},(null==_?void 0:_.options)||{}),F=t._retrieverFactory.create(A,j).retrieve(e),D=!!x.getEnabledComponent(m.ExplodeBlastAsCombinationComponent.KEY),B=new Set,W=function(){var e,t,n,o,a,r,i=v.value.getEntity();i&&((null==_?void 0:null==(e=_.options)?void 0:null==(t=e.disallowComponents)?void 0:t.some(function(e){return i.getEnabledComponent(e)}))?B.add(i):(null==_?void 0:null==(n=_.options)?void 0:null==(o=n.allowComponents)?void 0:o.length)>0&&((null==_?void 0:null==(a=_.options)?void 0:null==(r=a.allowComponents)?void 0:r.some(function(e){return i.getEnabledComponent(e)}))||B.add(i)))},V=O(F.flat());!(v=V()).done;)W();for(var U,Y=O(F);!(U=Y()).done;){for(var X,J=U.value,ee=O(J.filter(function(e){return e!==E}));!(X=ee()).done;){var te=X.value;if(!P.has(te)||!k.has(te))for(var ne,oe=O(te.invertedEntities);!(ne=oe()).done;){var ae=ne.value;S.has(ae)||ae===H||M(ae,te)||B.has(ae)||S.set(ae,x)}}for(var re,ie=O(J.filter(function(e){return e!==E}));!(re=ie()).done;){var ce=re.value;if(!P.has(ce)||!k.has(ce))for(var se,pe=O(ce.invertedEntities);!(se=pe()).done;){var le=se.value;if(le!==x&&le&&le.getEnabledComponent(l.ExplodeOnBlastComponent.KEY)&&!B.has(le)){var me={cell:ce,entity:le,isBlast:!D,isCombination:D,blastedBy:x},ue=M(le,ce)?null:i(me);if(ue){var de=S.get(le),ye=R.get(de)||[];ye.push(ue),R.set(de,ye);break}}}}}var fe=((n={})[p.ExplodeOnBlastNeighborComponent.KEY]=T,n[c.ExplodeOnCombinationNeighborComponent.KEY]=L,n[s.ExplodeOnExplodeNeighborComponent.KEY]=!T,n);if(x.getEnabledComponent(u.ExplodeAffectNeighborsComponent.KEY))for(var he,ge=O(t._retrieverFactory.create(t._neighborRetrieverFactoryKey,{cell:E,entity:x,chunk:[E]}).retrieve(e));!(he=ge()).done;)for(var ve,_e=function(){for(var e,n=ve.value,o=function(){var o=e.value;if(o.getEnabledComponent(a.ExplodeComponent.KEY)){var r={cell:n,entity:o,affectedBy:x},c=function(){for(var e=[],a=0,c=Object.entries(fe);a<c.length;a++){var s=c[a],p=s[0],l=s[1],m=o.getComponent(p);if(l&&m)for(var u in m.strategies){var d=t._affectNeighborStrategies[u];if(d&&d.compare(p,x,o)){if(m.layers.length>0){var y=m.layers.find(function(e){return n.getEntity(e)}),f=n.getEntity(y);Object.assign(r,{entity:f})}var h=M(r.entity,n)?null:i(r);h&&e.push(h)}}}return e}();if(c.length>0)return z.push.apply(z,c),"break"}L&&q.push({cell:n,combinationType:G}),T&&Z.push({cell:n})},r=O(n.invertedEntities);!(e=r()).done&&"break"!==o(););},be=O(he.value);!(ve=be()).done;)_e();if(Q){var Ce=x.getEnabledComponent(y.ExplodeLayerOnRemoveComponent.KEY);Ce&&I(Ce,{cell:E,input:N,affectedBy:K,blastedBy:H,force:Ce.force})}}();var ee=x.getEnabledComponent(d.ExplodeLayerOnExplodeComponent.KEY);if(I(ee,{cell:E,input:N,affectedBy:K,blastedBy:H}),Q||$){var te,ne,oe=t._world.getState(f.PipelineSystem.STATE),ae=oe&&oe.data&&oe.data.loopIndex,re=!(null!=(te=x.getEnabledComponentByClass(g.GoalComponent))&&null!=(ne=te.goal)&&ne.isCompleted&&!x.getEnabledComponentByClass(_.KeepGoalAfterCompleteComponent)),ie=new r.ExplodeStateModel({entity:x,cell:E,remove:Q,combination:D,combinationType:G,combinationNeighbors:q,blasted:R.get(x),blastNeighbors:Z,affected:z,input:N,isBlast:T,blastedBy:null===D?S.get(x)||H:null,affectedBy:K,loopIndex:ae,grid:e,isGoalTarget:re});return h.push(ie),ie}return null},I=function(e,t){var n=t.cell,o=t.input,a=t.affectedBy,r=t.blastedBy,i=t.force;if(e&&0!==e.layers.length)for(var c,s=[].concat(n.entities).reduce(function(e,t){return e[t.layer]=t,e},[]),p=O(e.layers);!(c=p()).done;){var l=s[c.value];!l||!i&&M(l,n)||T({cell:n,entity:l,input:o,affectedBy:a,blastedBy:r,force:i})}},M=function(e,t){if(n.has(e))return e.getComponentByClass(v.ExplodeOneCellComponent)||n.get(e).includes(t)},j=[],L=this._world.getState(o.DO_STATE_KEY);if(L&&L.data&&L.data.length>0)for(var F,D=O(L.data);!(F=D()).done;){var B=F.value,G=B.cell,N=B.input;P.add(G),j.push({cell:G,input:N})}var W=this._world.getState(i.CombinationSystem.STATE);if(W&&W.data)for(var H,V=O(W.data.combinations);!(H=V()).done;)for(var K,U=H.value,Y=U.chunk,z=U.type,q=O(Y);!(K=q()).done;){var Z=K.value.cell;P.add(Z),k.add(Z),j.push({cell:Z,isCombination:!0,combination:Y,combinationType:z})}for(var X=0,J=j;X<J.length;X++)for(var Q,$=J[X],ee=$.cell,te=$.isCombination,ne=A($,x),oe=O(ee.invertedEntities);!(Q=oe()).done;){var ae=Q.value;if(M(ae,ee)||T(Object.assign({cell:ee,entity:ae},ne,{isCombination:te||!!ae.getEnabledComponentByClass(E.ExplodeAsCombinationComponent)})))break}return h},R.postProcess=function(){for(var e,t=O(this._world.getComponentsByClass(S.GridComponent));!(e=t()).done;)e.value.grid.forEachEntities(function(e){return e.removeComponentByClass(w.IsExplodedComponent)})},o}(o.PipelineProcessSystem);n.ExplodeSystem=T,T.DO_STATE_KEY="doExplode",T.STATE="explode",T.KEY="explode",T.TYPE_EXPLODE="explode",T.TYPE_BLAST="blast",cc._RF.pop()},{"./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)":"AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)","./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)":"ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)","./ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)":"ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)","./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastComponent (@tapclap.match-x.engine.components)","./ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)":"ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)","./ExplodeOneCellComponent (@tapclap.match-x.engine.components)":"ExplodeOneCellComponent (@tapclap.match-x.engine.components)","./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","./ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)":"ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)":"KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./PipelineSystem (@tapclap.match-x.engine.systems)":"PipelineSystem (@tapclap.match-x.engine.systems)","./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./isExplodedComponent (@tapclap.match-x.engine.components)":"isExplodedComponent (@tapclap.match-x.engine.components)"}],"ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)":[function(e,t,n){"use strict";cc._RF.push(t,"a8fdcHw0yhWTIk13c86A8yr","ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)"),n.__esModule=!0,n.ExplodeTester=void 0;var o=e("./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)"),a=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)"),i=e("./HealthComponent (@tapclap.match-x.engine.components)"),c=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),s=e("./PostponeExplodeComponent (@tapclap.match-x.engine.components)");function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var l=o.prototype;return l._blast=function(e,t){var n=t.getEnabledComponent(a.ExplodeComponent.KEY),o=t.getEnabledComponentByClass(s.PostponeExplodeComponent),p=o&&o.enable||!1;if(n&&!t.getEnabledComponent(i.HealthComponent.KEY)&&!t.getEnabledComponent(c.CellHealthComponent.KEY))return!p&&t.getEnabledComponent(r.ExplodeOnBlastComponent.KEY)},l._explode=function(e,t){var n=t.getEnabledComponent(a.ExplodeComponent.KEY),o=t.getEnabledComponentByClass(s.PostponeExplodeComponent),r=o&&o.enable||!1;if(n&&!t.getEnabledComponent(i.HealthComponent.KEY)&&!t.getEnabledComponent(c.CellHealthComponent.KEY))return!r},o}(o.ExplodeHandler);n.ExplodeTester=l,cc._RF.pop()},{"./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)":"ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)","./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PostponeExplodeComponent (@tapclap.match-x.engine.components)":"PostponeExplodeComponent (@tapclap.match-x.engine.components)"}],"ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f757b7X7qpX2qlW+o/wWyuZ","ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodeWalkReplaceSystem=void 0;var i=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.process=function(){var e,t,n=!1;try{for(var o=r(this._world.getEnabledComponentsByClass(c.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t=e.getComponentByClass(i.ExplodeImmediateOnceComponent);(null==t?void 0:t.enable)&&(n=!0)})}catch(s){e={error:s}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t.KEY="explodeWalkReplaceSystem",t.STATE="explodeWalkReplaceSystemState",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ExplodeWalkReplaceSystem=s,cc._RF.pop()},{"./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ExplodedByComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"914b98tFjdUXa8JI0dj8WVO","ExplodedByComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExplodedByComponent=void 0;var r=function(e){function t(){var t=e.call(this)||this;return t._initiatorCell=null,t._initiatorEntity=null,t}return a(t,e),Object.defineProperty(t.prototype,"initiatorCell",{get:function(){return this._initiatorCell},set:function(e){this._initiatorCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initiatorEntity",{get:function(){return this._initiatorEntity},set:function(e){this._initiatorEntity=e},enumerable:!1,configurable:!0}),t.KEY="explodedBy",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ExplodedByComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)":[function(e,t,n){"use strict";cc._RF.push(t,"36346wPRolX2KkNWVzCWbix","FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FacebookInstantLauncher=void 0;var r,i=e("./PlatformLauncher (@tapclap.sdk-x.platform-launcher)"),c=e("./PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)");(function(e){e.IOS="IOS",e.ANDROID="ANDROID",e.WEB="WEB",e.MOBILE_WEB="MOBILE_WEB"})(r||(r={}));var s=function(e){function t(n){var o=void 0===n?{}:n,a=o.skipShortcutForPlatforms,r=o.sdkVersion,i=e.call(this)||this;return i._skipShortcutForPlatforms=[],i._skipShortcutForPlatforms=null!=a?a:[],i._sdkVersion=null!=r?r:t.FBINSTANT_SDK_VERSION,i}return a(t,e),t.prototype._getJavascriptSDK=function(){return"https://connect.facebook.net/en_US/fbinstant."+this._sdkVersion+".js"},t.prototype.init=function(){var e=this;return Promise.resolve().then(function(){return c.PlatformSDKLoader.loadSDK(e._getJavascriptSDK())}).then(function(){return FBInstant.initializeAsync()})},t.prototype.complete=function(){var e=this;return FBInstant.startGameAsync().then(function(){return e.getContext()}).then(function(t){if(!e._skipShortcutForPlatforms.includes(t))return FBInstant.canCreateShortcutAsync().then(function(e){return e&&FBInstant.createShortcutAsync().catch(function(){})}).catch(function(e){return console.log(e)})})},t.prototype.hasLoadingProgress=function(){return!1},t.prototype.setLoadingProgress=function(e){FBInstant.setLoadingProgress(100*e)},t.prototype.getContext=function(){return Promise.resolve(FBInstant.getPlatform())},t.FBINSTANT_SDK_VERSION="7.0",t.FBINSTANT_PLATFORM=r,t}(i.PlatformLauncher);n.FacebookInstantLauncher=s,cc._RF.pop()},{"./PlatformLauncher (@tapclap.sdk-x.platform-launcher)":"PlatformLauncher (@tapclap.sdk-x.platform-launcher)","./PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)":"PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)"}],"FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)":[function(e,t,n){"use strict";cc._RF.push(t,"453d4jDGg5carxh73iaeGg+","FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Object.defineProperty(n,"__esModule",{value:!0}),n.FactoryIdleAnimationHandler=void 0;var o=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),a=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),r=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=function(){function e(){}return e.prototype.schedule=function(e){var t=new o.AnimationFactory(e);if(t){var n=t.getIdleAnimator(),c=new r.FunctionAnimation(function(){var e=t.getAnimationItem(a.AnimationResolver.TYPE_IDLE);n&&e?n.scheduleAnimation(e):n&&n.resetAnimation()});return new i.AnimationData(null,c)}return null},e.prototype.reset=function(e){var t=new o.AnimationFactory(e);if(t){var n=t.getIdleAnimator(),a=new r.FunctionAnimation(function(){return n.resetAnimation()});return new i.AnimationData(null,a)}return null},e}();n.FactoryIdleAnimationHandler=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"04017or81BclYHr474JlONi","FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.FadeOutEntityRenderGameActionBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return void 0===t&&(t="entity"),(n=e.call(this)||this)._key=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){var t=this,n=[];if(e&&e.data)for(var o,c=function(){var e=o.value[t._key];e&&n.push([new r.AnimationData(e,new a.FunctionAnimation(function(){var t=e.getEnabledComponent("render").node;t.active=!0,t.opacity=0}))])},s=i(e.data);!(o=s()).done;)c();return n},o}(o.GameActionBuilder);n.FadeOutEntityRenderGameActionBuilder=l,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"FadeTransitionComponent (@tapclap.game-kit.ui.transition)":[function(e,t,n){"use strict";cc._RF.push(t,"647d8n6zRxIvqjeXflF8W4z","FadeTransitionComponent (@tapclap.game-kit.ui.transition)"),n.__esModule=!0,n.FadeTransitionComponent=void 0;var o,a=e("./TransitionComponent (@tapclap.game-kit.ui.transition)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=cc._decorator,c=(0,i.ccclass)(o=(0,i.menu)("UI-Kit/Transition/FadeTransitionComponent")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var a=o.prototype;return a.hide=function(){var e=this;return new Promise(function(t){var n=cc.sequence([cc.fadeOut(e._hideAnimationDuration),cc.callFunc(t),cc.callFunc(function(){return e.disable()})]);e.node.runAction(n)})},a.show=function(){var e=this;return new Promise(function(t){e.enable();var n=cc.sequence([cc.fadeIn(e._showAnimationDuration),cc.callFunc(t)]);e.node.runAction(n)})},a.enable=function(){e.prototype.enable.call(this),this.node.opacity=255},a.disable=function(){e.prototype.disable.call(this),this.node.opacity=0},o}(a.TransitionComponent))||o)||o;n.FadeTransitionComponent=c,cc._RF.pop()},{"./TransitionComponent (@tapclap.game-kit.ui.transition)":"TransitionComponent (@tapclap.game-kit.ui.transition)"}],"FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"3b1baHMVQ5WBoKNwFBkAjK7","FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FadeUIScenarioProducer=void 0;var r=e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)"),i=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),c=function(e){function t(t){var n=t.uiManager,o=t.backdropManager,a=e.call(this)||this;return a._uiManager=n,a._backdropManager=o,a}return a(t,e),t.prototype.produce=function(e){var t=this,n=new i.TutorialScenarioBuilder({backdropManager:this._backdropManager});switch(e.action){case"show":n.addAction(function(){t._uiManager.showUI(e.tags)});break;case"hide":default:n.addAction(function(){t._uiManager.hideUI(e.tags)})}return n.build()},t}(r.ScenarioProducer);n.FadeUIScenarioProducer=c,cc._RF.pop()},{"./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"FailWalkComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0cccfwUo05dLLUACmTI++0z","FailWalkComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FailWalkComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="failWalk",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.FailWalkComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"155532B2mJQHJwLmMydNRCU","FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.FailWalkInGridEdgeLockCreator=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createLock=function(e,t){var n,o,a=(null==t?void 0:t.components)||[];try{for(var i=r(a),c=i.next();!c.done;c=i.next()){var s=c.value;e.getComponent(s).enable=!1}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},t.KEY="failWalkInGridEdgeLockCreator",t}(e("./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)").EntityLockCreator);n.FailWalkInGridEdgeLockCreator=i,cc._RF.pop()},{"./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)":"EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)"}],"FailWalkLoseGameComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ed1e5r2H9pbbZrs4myaEkE3","FailWalkLoseGameComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FailWalkLoseGameComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="failWalkLoseGame",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.FailWalkLoseGameComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"b8865ZpOLFc94p+4bp3hy7Z","FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.FailWalkLoseGameStrategy=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./FailWalkComponent (@tapclap.match-x.engine.components)"),s=e("./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),p=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),l=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),m=e("./FailWalkLoseGameComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=e.call(this,{reason:t.reason})||this;return n._world=t.world,n}return a(t,e),t.prototype.isLose=function(){var e,t;try{for(var n=r(this._world.getEnabledComponentsByClass(i.GridComponent)),o=n.next();!o.done;o=n.next())return!!o.value.grid.findCell(function(e){var t,n,o=e.getEntity();if(o&&o.getComponentByClass(m.FailWalkLoseGameComponent)&&o.getComponentByClass(c.FailWalkComponent)){var a=null===(t=o.getComponentByClass(p.WalkDirectionComponent))||void 0===t?void 0:t.direction;return!(null===(n=o.getComponentByClass(l.DistanceToGridEdgeComponent))||void 0===n?void 0:n.getDistance(a))}})}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!1},t}(s.LoseGameStrategy);n.FailWalkLoseGameStrategy=u,cc._RF.pop()},{"./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./FailWalkComponent (@tapclap.match-x.engine.components)":"FailWalkComponent (@tapclap.match-x.engine.components)","./FailWalkLoseGameComponent (@tapclap.match-x.engine.components)":"FailWalkLoseGameComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)"}],"FeatureOfferState (scripts.offers.states)":[function(e,t,n){"use strict";cc._RF.push(t,"c79ebPF6ZZRzYK5OhWXC+AA","FeatureOfferState (scripts.offers.states)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FeatureOfferState=void 0;var r=function(e){function t(t){var n=t.value,o=e.call(this)||this;return o._value=n,o}return a(t,e),t.prototype.resolve=function(){return this._value},t}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.FeatureOfferState=r,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"Fetch (@tapclap.utils-js.fetch)":[function(e,t,n){"use strict";cc._RF.push(t,"a4949/lT3RPpb5rtPkrPMns","Fetch (@tapclap.utils-js.fetch)"),n.__esModule=!0,n.default=void 0;n.default=function(e,t){var n=void 0===t?{}:t,o=n.method,a=void 0===o?"get":o,r=n.credentials,i=void 0===r?null:r,c=n.headers,s=void 0===c?{}:c,p=n.body,l=void 0===p?null:p,m=n.timeout,u=void 0===m?0:m;return new Promise(function(t,n){var o=new XMLHttpRequest,r=[],c=[],p=function e(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(JSON.parse(o.responseText))},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:e,headers:{keys:function(){return r},entries:function(){return c},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var m in o.open(a,e,!0),o.timeout=u,o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){r.push(t=t.toLowerCase()),c.push([t,n]),s[t]=s[t]?s[t]+","+n:n}),t(p())},o.onerror=n,o.ontimeout=n,o.withCredentials="include"===i,s)o.setRequestHeader(m,s[m]);o.send(l)})},t.exports=n.default,cc._RF.pop()},{}],"FetchStorageService (scripts.service)":[function(e,t,n){"use strict";cc._RF.push(t,"09a05eoTlJa8LXMAwmrHvdo","FetchStorageService (scripts.service)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FetchStorageService=void 0;var r=function(e){function t(t){var n=t.service,o=t.storage,a=t.storageKey,r=t.options,i=e.call(this,r)||this;return i._service=n,i._storage=o,i._storageKey=a,i}return a(t,e),t.prototype.get=function(e){var t=this,n=e.endpoint,o=e.query;return Promise.resolve().then(function(){return t._service.get({endpoint:n,query:o}).then(function(e){return t._storage.setItem(t._storageKey,e),e})}).catch(function(e){return console.log(e),t._storage.getItem(t._storageKey).catch(function(e){return console.log(e)})})},t}(e("./Service (@tapclap.utils-js.service)").Service);n.FetchStorageService=r,cc._RF.pop()},{"./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)"}],"Filter (@tapclap.game-kit.filter)":[function(e,t,n){"use strict";cc._RF.push(t,"5c29fycDulBfqyJVGjaRF3A","Filter (@tapclap.game-kit.filter)"),n.__esModule=!0,n.Filter=void 0;var o=function(){function e(){}return e.prototype.filter=function(){throw new Error("Method filter not implemented")},e}();n.Filter=o,cc._RF.pop()},{}],"FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b51cefAYTpfYobKc0MrxxRl","FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.FinalAnimationCleanerBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),i=e("./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)");function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._match3Component=t.match3Component,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),o.prototype.build=function(e){var t=this,n=[];return e&&e.data&&e.data.result===r.WinLoseSystem.RESULT.LOSE&&n.push({animation:new a.FunctionAnimation(function(){return t._match3Component.game.getSystem(i.GameActionSystem.KEY).resetFinalQueue()})}),[n]},o}(o.GameActionBuilder);n.FinalAnimationCleanerBuilder=s,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":[function(e,t,n){"use strict";cc._RF.push(t,"3b062pQl2FU3YVWCYRqT/O0","FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.FinalContentAnimationComponent=n.ParallelAnimationKeys=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)"),p=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(){function e(){this.animationKeysList=[]}return r([u({type:[p.AnimationKey]})],e.prototype,"animationKeysList",void 0),r([m("ParallelAnimationKeys")],e)}();n.ParallelAnimationKeys=d;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelAnimationKeys=[],t}return a(t,e),t.prototype.runLabelDisappearance=function(e){var t=i(this._labelAnimationKeys,2),n=t[0],o=t[1],a=cc.tween(e).delay(this._labelDisappearanceDelay).parallel(cc.tween().to(n.animationKeysList[0].duration,{opacity:n.animationKeysList[0].opacity}),cc.tween().to(n.animationKeysList[0].duration,{scale:n.animationKeysList[0].scale}),cc.tween().by(n.animationKeysList[1].duration,{position:n.animationKeysList[1].position})).parallel(cc.tween().to(o.animationKeysList[0].duration,{opacity:o.animationKeysList[0].opacity}),cc.tween().to(o.animationKeysList[0].duration,{scale:o.animationKeysList[0].scale}),cc.tween().by(o.animationKeysList[1].duration,{position:o.animationKeysList[1].position}));return c.PromisifyTween.start(a)},t.prototype.runDelay=function(e){var t=this;return new Promise(function(n){return t.scheduleOnce(n,e)})},r([u({type:[d],visible:!0})],t.prototype,"_labelAnimationKeys",void 0),r([m],t)}(s.ContentAnimationComponent);n.FinalContentAnimationComponent=y,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)":"ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"FinalGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":[function(e,t,n){"use strict";cc._RF.push(t,"73c5cHzbVlQprm2Z8UgVlML","FinalGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.FinalGiftBoxAnimationComponent=void 0;var i=e("./SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)"),c=e("./DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._flags=null,t._stars=null,t._toRecivedChangingAnimation=null,t}return a(t,e),t.prototype.runOpening=function(){this._toRecivedChangingAnimation.runDisappearing()},t.prototype.setActive=function(t){this._flags&&(this._flags.active=t),this._stars&&(this._stars.active=t),e.prototype.setActive.call(this,t)},r([l({type:cc.Node,visible:!0})],t.prototype,"_flags",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_stars",void 0),r([l({type:i.SmoothTransitionAnimation,visible:!0})],t.prototype,"_toRecivedChangingAnimation",void 0),r([p],t)}(c.DefaultGiftBoxAnimationComponent);n.FinalGiftBoxAnimationComponent=m,cc._RF.pop()},{"./DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":"DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","./SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)":"SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)"}],"FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3d45cvCCYlVSIvOgpdC5jV6","FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.FinalUIAnimationBuilder=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._allowedResult=t.allowedResult||[],n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.build=function(e){var t=[[]];return e.data&&this._allowedResult.includes(e.data.result)&&(t=this._createAnimations()),t},a}(e("./UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)").UIAnimationBuilder);n.FinalUIAnimationBuilder=a,cc._RF.pop()},{"./UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"}],"FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"40dbauSow1fdK+J/jBA+Hl8","FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.FinishMatch3GameAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._game=t.game,n._level=t.level,n._result=t.result,n._reason=t.reason,n._beforeNextGame=t.beforeNextGame,n._states=t.states,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e={game:this._game,level:this._level,beforeNextGame:this._beforeNextGame};switch(this._result){case this._states.win:return this._caller.run(a.CALLER_WIN,e);case this._states.lose:if(!this._reason)throw new Error("Reason not defined");if(!this._caller.has(this._reason))throw new Error("Caller not defined: "+this._reason);return this._caller.run(this._reason,e);default:return Promise.resolve()}},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.FinishMatch3GameAction=a,a.STATE_WIN="win",a.STATE_LOSE="lose",a.CALLER_WIN="win",a.CALLER_LOSE="lose",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"FinishTrackComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7b35bJh+FdWe5cgvotC5dvD","FinishTrackComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FinishTrackComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="finishTrack",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.FinishTrackComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FireworkComponent (@tapclap.game-kit.ui.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"b9f74GB2BxIZrtB0FN0q7xP","FireworkComponent (@tapclap.game-kit.ui.animations)"),n.__esModule=!0,n.FireworkComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A=e("./Random (@tapclap.utils-js.random)");function O(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var T=cc._decorator,I=T.ccclass,M=T.property,j=(o=(0,T.menu)("Candyvalley/WinGameFirework"),a=M({type:cc.Prefab,visible:!0}),r=M({type:cc.Prefab,visible:!0}),i=M({type:[cc.Node],visible:!0}),c=M({type:[cc.Node],visible:!0}),s=M({type:cc.Integer,visible:!0}),p=M({type:[cc.SpriteFrame],visible:!0}),l=M({type:cc.Integer,visible:!0}),m=M({type:cc.Integer,visible:!0}),u=M({type:[cc.String],visible:!0}),d=M({type:[cc.String],visible:!0}),I(y=o((f=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return O(t=e.call.apply(e,[this].concat(o))||this,"_fusePrefab",h,R(t)),O(t,"_explodePrefab",g,R(t)),O(t,"_emissionAreas",v,R(t)),O(t,"_targetAreas",_,R(t)),O(t,"_speed",b,R(t)),O(t,"_particleSprites",C,R(t)),O(t,"_explodeMinRadius",w,R(t)),O(t,"_explodeMaxRadius",S,R(t)),O(t,"_launchSoundKey",E,R(t)),O(t,"_explodeSoundKey",x,R(t)),t._audioEffectsPlayer=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,P(t,n);var a=o.prototype;return a.launch=function(e){var t=this;void 0===e&&(e=1);for(var n=new A.Random,o=function(e){var t=n.getInteger(0,e.width)-e.width/2,o=n.getInteger(0,e.height)-e.height/2;return new cc.Vec2(t,o)},a=function(e){var t=n.getInteger(0,e.width)-e.width/2,o=n.getInteger(0,e.height)-e.height/2;return new cc.Vec2(t,o)},r=[],i=function(){var e=n.shuffle([].concat(t._emissionAreas)).pop(),i=n.shuffle([].concat(t._targetAreas)).pop(),c=cc.instantiateFrom(t._fusePrefab),s=cc.instantiateFrom(t._explodePrefab),p=o(i),l=a(e),m=e.convertToNodeSpaceAR(i.convertToWorldSpaceAR(p)),u=c.getComponent(cc.ParticleSystem),d=s.getComponent(cc.ParticleSystem);c.setPosition(l),s.setPosition(m),e.addChild(c),e.addChild(s);var y=l.lerp(m,.5),f=m.sub(l),h=Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2)),g=n.shuffle([].concat(t._particleSprites)).pop();r.push(new Promise(function(e){u.spriteFrame=g,u.resetSystem(),c.runAction(cc.sequence([cc.spawn([cc.callFunc(function(){return t._audioEffectsPlayer.play(t._getRandomSound(t._launchSoundKey),{mergable:.5})}),cc.bezierTo(h/t._speed,[l,y,m])]),cc.callFunc(function(){t._audioEffectsPlayer.play(t._getRandomSound(t._explodeSoundKey),{mergable:.5}),d.endRadiusVar=n.getInteger(t._explodeMinRadius,t._explodeMaxRadius),d.spriteFrame=g,d.resetSystem(),c.parent.removeChild(c),e()})]))}))},c=0;c<e;c++)i();return Promise.all(r)},a._getRandomSound=function(e){return e[Math.floor(Math.random()*e.length)]},a.setAudioEffectsPlayer=function(e){this._audioEffectsPlayer=e},o}(cc.Component),h=k(f.prototype,"_fusePrefab",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=k(f.prototype,"_explodePrefab",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=k(f.prototype,"_emissionAreas",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=k(f.prototype,"_targetAreas",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=k(f.prototype,"_speed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 450}}),C=k(f.prototype,"_particleSprites",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=k(f.prototype,"_explodeMinRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),S=k(f.prototype,"_explodeMaxRadius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),E=k(f.prototype,"_launchSoundKey",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=k(f.prototype,"_explodeSoundKey",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=f))||y)||y);n.FireworkComponent=j,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"FitContentComponent (@tapclap.game-kit.ui.canvas)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g;function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"a01fd3q1EhS659eDXVuYJ/4","FitContentComponent (@tapclap.game-kit.ui.canvas)"),n.__esModule=!0,n.FitContentComponent=void 0;var w=cc._decorator,S=w.ccclass,E=w.property,x=(o=(0,w.menu)("Game-Kit/Canvas/FitContentComponent"),a=E({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430 \u0432 \u0440\u0430\u043c\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043d\u0443\u0436\u043d\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"}),r=E({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c"}),i=E({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0437\u043c\u0435\u0440\u044f\u0442\u044c \u0434\u043b\u044f \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u043d\u0438\u044f"}),c=E({visible:!0,tooltip:"\u0422\u043e\u043b\u044c\u043a\u043e \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0442\u044c"}),s=E({visible:!0,tooltip:"\u0422\u043e\u043b\u044c\u043a\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0442\u044c"}),p=E({visible:!0}),S(l=o((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return v(t=e.call.apply(e,[this].concat(o))||this,"_targetNode",u,_(t)),v(t,"_fitNode",d,_(t)),v(t,"_measureNode",y,_(t)),v(t,"_decrease",f,_(t)),v(t,"_increase",h,_(t)),v(t,"_marginTop",g,_(t)),t._originalFitY=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a=o.prototype;return a.onLoad=function(){this._originalFitY=this._fitNode.y,this._targetNode||(this._targetNode=this.node.parent)},a.fit=function(){var e;this._fitNode.setScale(1);var t,n=this._targetNode.getComponent(cc.Widget);null!=n&&n.enabled&&(null==(t=this._targetNode.getComponent(cc.Widget))||t.updateAlignment()),null==(e=this._targetNode.getComponent(cc.Layout))||e.updateLayout();var o=this._targetNode.getContentSize(),a=this._measureNode.getBoundingBoxToWorld().size,r=o.width/a.width,i=o.height/a.height,c=Math.min(r,i);(this._decrease&&c<=1||this._increase&&c>=1||this._decrease&&this._increase)&&this._fitNode.setScale(c);var s=this._measureNode.parent.convertToWorldSpaceAR(this._measureNode.getPosition()),p=this._targetNode.parent.convertToWorldSpaceAR(this._targetNode.getPosition()),l=s.y+this._measureNode.height/2,m=p.y+this._targetNode.height/2;return m-l<this._marginTop&&(this._fitNode.y-=this._marginTop-(m-l)),!0},a.lateUpdate=function(){null!==this._originalFitY&&(this._fitNode.y=this._originalFitY),this.fit()},o}(cc.Component),u=C(m.prototype,"_targetNode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C(m.prototype,"_fitNode",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C(m.prototype,"_measureNode",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C(m.prototype,"_decrease",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h=C(m.prototype,"_increase",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=C(m.prototype,"_marginTop",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=m))||l)||l);n.FitContentComponent=x,cc._RF.pop()},{}],"FlexItemComponent (scripts.common.components.flex)":[function(e,t,n){"use strict";cc._RF.push(t,"c37c6UCDMRSV5mAPmWn2hbj","FlexItemComponent (scripts.common.components.flex)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.FlexItemComponent=n.FlexDirection=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu;(function(e){e[e.NONE=0]="NONE",e[e.ROW=1]="ROW",e[e.ROW_REVERSE=2]="ROW_REVERSE",e[e.COLUMN=3]="COLUMN",e[e.COLUMN_REVERSE=4]="COLUMN_REVERSE"})(n.FlexDirection||(n.FlexDirection={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grow=0,t.shrink=0,t.basis=0,t.useOrder=!1,t.order=0,t}return a(t,e),r([s()],t.prototype,"grow",void 0),r([s()],t.prototype,"shrink",void 0),r([s()],t.prototype,"basis",void 0),r([s()],t.prototype,"useOrder",void 0),r([s({visible:function(){return this.useOrder}})],t.prototype,"order",void 0),r([c,p("Flex/Item")],t)}(cc.Component);n.FlexItemComponent=l,cc._RF.pop()},{}],"FlexLayoutComponent (scripts.common.components.flex)":[function(e,t,n){"use strict";cc._RF.push(t,"99828oP7Ptcr4t/ZwJbrT3f","FlexLayoutComponent (scripts.common.components.flex)");var o,a,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.FlexLayoutComponent=n.FlexAlign=n.FlexDirection=void 0;var s,p,l=e("./FlexItemComponent (scripts.common.components.flex)"),m=cc._decorator,u=m.ccclass,d=m.property,y=m.menu,f=m.executeInEditMode;(function(e){e[e.NONE=0]="NONE",e[e.ROW=1]="ROW",e[e.ROW_REVERSE=2]="ROW_REVERSE",e[e.COLUMN=3]="COLUMN",e[e.COLUMN_REVERSE=4]="COLUMN_REVERSE"})(s=n.FlexDirection||(n.FlexDirection={})),function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(p=n.FlexAlign||(n.FlexAlign={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._direction=s.NONE,t._align=p.LEFT,t._wrap=!1,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){this._rearrangeFlexItems(),this._bindEvents()},t.prototype.onDestroy=function(){this._unbindEvents()},t.prototype._bindEvents=function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this._rearrangeFlexItems,this),this.node.on(cc.Node.EventType.CHILD_ADDED,this._rearrangeFlexItems,this),this.node.on(cc.Node.EventType.CHILD_REMOVED,this._rearrangeFlexItems,this),cc.view.on("canvas-resize",this._rearrangeFlexItems,this)},t.prototype._unbindEvents=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._rearrangeFlexItems,this),this.node.off(cc.Node.EventType.CHILD_ADDED,this._rearrangeFlexItems,this),this.node.off(cc.Node.EventType.CHILD_REMOVED,this._rearrangeFlexItems,this),cc.view.off("canvas-resize",this._rearrangeFlexItems,this)},t.prototype._getActiveChildren=function(){return this.node.children.filter(function(e){return e.active})},t.prototype._rearrangeFlexItems=function(){var e=n.DIRECTION_TO_MEASURMENT_MAP[this._direction];this._direction!==s.NONE&&this._getActiveChildren().length>0&&this._processFlexData(this._getFlexData(e))},t.prototype._getFlexData=function(e){var t,o,a=this,r=n.MEASURMENT_TO_AXIS_MAP[e],i={axes:[],mainAxis:r,measurment:e,crossMeasurment:"width"===e?"height":"width",crossAxis:"x"===r?"y":"x"},s=function(){return{freeSpace:a.node.getContentSize()[e],grow:0,shrink:0,items:[],crossAxisSize:0}},p=this._getActiveChildren().map(function(t){t.getComponent(l.FlexItemComponent)||(t.addComponent(l.FlexItemComponent),t.getComponent(l.FlexItemComponent).basis=t.getContentSize()[e]);var n=t.getComponent(l.FlexItemComponent),o=n.grow,a=n.shrink,r=n.basis,i=n.useOrder,c=n.order;return{node:t,grow:o,shrink:a,basis:r,order:i&&c}});p.sort(function(e,t){return e.order-t.order});var m=s();try{for(var u=c(p),d=u.next();!d.done;d=u.next()){var y=d.value;this._wrap&&m.freeSpace-y.basis<0&&(m.freeSpace=Math.max(0,m.freeSpace),i.axes.push(m),m=s()),m.grow+=y.grow,m.shrink+=y.shrink,m.freeSpace-=y.basis,m.crossAxisSize=Math.max(m.crossAxisSize,y.node[i.crossMeasurment]),m.items.push(y)}}catch(f){t={error:f}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(t)throw t.error}}return m.items.length>0&&(m.freeSpace=Math.max(0,m.freeSpace),i.axes.push(m)),i},t.prototype._processFlexData=function(e){var t=this,n=0;e.axes.forEach(function(o){var a=0;o.items.forEach(function(t){var n=t.node,r=t.grow,i=t.shrink,c=t.basis,s=r/o.grow||0,p=i/o.shrink||0,l=o.freeSpace>0?Math.round(c+s*o.freeSpace):Math.round(c-p*o.freeSpace);n[e.measurment]=l,a+=l});var r=0;switch(t._direction){case s.COLUMN:case s.ROW_REVERSE:o.items.reverse()}o.items.forEach(function(i){var c=i.node,s=t._getNodeAnchor(c,e.measurment),p=t._getNodeAnchor(c,e.crossMeasurment);c[e.mainAxis]=c[e.measurment]*s+r-a/2,c[e.crossAxis]=c[e.crossMeasurment]*p+n-o.crossAxisSize/2,r+=c[e.measurment]}),n+=o.crossAxisSize})},t.prototype._getNodeAnchor=function(e,t){return e.getAnchorPoint()[n.MEASURMENT_TO_AXIS_MAP[t]]},t.prototype.update=function(){},t.DIRECTION_TO_MEASURMENT_MAP=((a={})[s.ROW]="width",a[s.ROW_REVERSE]="width",a[s.COLUMN]="height",a[s.COLUMN_REVERSE]="height",a),t.MEASURMENT_TO_AXIS_MAP={width:"x",height:"y"},i([d({type:cc.Enum(s),visible:!0})],t.prototype,"_direction",void 0),i([d({type:cc.Enum(p),visible:!0})],t.prototype,"_align",void 0),i([d({visible:!0})],t.prototype,"_wrap",void 0),n=i([u,y("Flex/Layout"),f],t)}(cc.Component);n.FlexLayoutComponent=h,cc._RF.pop()},{"./FlexItemComponent (scripts.common.components.flex)":"FlexItemComponent (scripts.common.components.flex)"}],"FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"65767RBKFZbir00uOCUs0Df","FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.FlyOffOnDeathAnimationCreator=void 0;var i=e("./FlyOffOnDeathComponent (@tapclap.match-x.engine.components)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=e("./GoalComponent (@tapclap.match-x.engine.components)"),p=e("./GoalAnimationComponent (@tapclap.match-x.engine.components)"),l=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),m=e("./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),u=e("./AnimationData (@tapclap.match-x.cocos.animations)"),d=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),y=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),h=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),v=function(e){function t(t){var n=e.call(this,t)||this;return n._resolveDelay=t.resolveDelay||0,n}return a(t,e),t.prototype.create=function(){var e,n,o,a=null===(e=null==this?void 0:this._entity)||void 0===e?void 0:e.getEnabledComponent(i.FlyOffOnDeathComponent.KEY),r=t.flyTypes;if(!a||!r[a.type])return[];var m=null===(n=null==this?void 0:this._entity)||void 0===n?void 0:n.getEnabledComponent(c.HealthComponent.KEY);if(m&&!m.isDeath)return[];var v=this._entity.getEnabledComponent(s.GoalComponent.KEY),_=null===(o=null==v?void 0:v.goal)||void 0===o?void 0:o.collector,b=this._entity.getComponent(p.GoalAnimationComponent.KEY);if(_&&(!b||b.state)&&this._isGoalTarget)return[];var C=this._entity.getComponent(l.RenderComponent.KEY).node,w=r[a.type](C,a.options),S=this._affectedBy||this._blastedBy,E=new f.ChainAnimation([S?new h.EventListenAnimation(S,"explode"):new g.DummyAnimation,new y.GroupAnimation([w,new d.ActionAnimation(cc.delayTime(this._resolveDelay),C)],!0)]);return[new u.AnimationData(this._entity,E)]},t.flyTypes={fallDown:function(e,t){var n=r(t.offset,2),o=n[0],a=n[1],i=t.duration,c=t.rotation,s=t.scale,p=e.getPosition(),l=new cc.Vec2(p.x+o,Math.min(cc.winSize.height,p.y+a)),m=new cc.Vec2(p.x+2*o,-cc.winSize.height/2-e.height),u=cc.spawn([cc.callFunc(function(){return e.zIndex+=1e3}),cc.scaleTo(i/4,s,s),cc.rotateBy(i,c),cc.bezierTo(i,[p,l,m])]);return new d.ActionAnimation(u,e)}},t}(m.ExplodeAnimationCreator);n.FlyOffOnDeathAnimationCreator=v,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./FlyOffOnDeathComponent (@tapclap.match-x.engine.components)":"FlyOffOnDeathComponent (@tapclap.match-x.engine.components)","./GoalAnimationComponent (@tapclap.match-x.engine.components)":"GoalAnimationComponent (@tapclap.match-x.engine.components)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"FlyOffOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"31f1egj5bNUR4d8PqfQ4Sw6","FlyOffOnDeathComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.FlyOffOnDeathComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=t.type,a=t.options;return(n=e.call(this)||this).type=o,n.options=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.FlyOffOnDeathComponent=a,a.KEY="flyOffOnDeath",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"807ed+yqRdOkbpM6h0oXiN3","FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.FooterWindowLayoutComponent=void 0;var o,a,r,i,c,s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/WindowManager/FooterWindowLayoutComponent"),a=_({type:cc.Node,visible:!0}),g(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_controlHolder",c,l(t)),t._controls={},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a.initialize=function(t){if(void 0===t&&(t={}),e.prototype.initialize.call(this,t),void 0!==t.spacing){var n=this._controlHolder.getComponent(cc.Layout);n&&(n.spacingX=t.spacing,n.spacingY=t.spacing)}if(t.controls)for(var o=0,a=Object.entries(t.controls);o<a.length;o++){var r=a[o],i=r[0],c=r[1];this._controls[i]=this._instantiateControl(this._controlHolder,c)}},a.getControl=function(e){return this._controls[e]},a.toggleControl=function(e,t){var n=this.getControl(e);n&&(n.node.active=t)},a.show=function(e){void 0===e&&(e=0),this.node.runAction(cc.scaleTo(e,1,1))},a.hide=function(e){void 0===e&&(e=0),this.node.runAction(cc.scaleTo(e,1,0))},o}(s.WindowLayoutComponent),u=i.prototype,d=[a],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_controlHolder",e)||e},f)).initializer&&(Object.defineProperty(u,"_controlHolder",f),f=null),c=f,r=i))||r)||r);n.FooterWindowLayoutComponent=b,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"ForceSwapCoverComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"8ea95R/wDxStoWsV1770Fy1","ForceSwapCoverComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ForceSwapCoverComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="forceSwapCover",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ForceSwapCoverComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"FriendItemComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"ad9d97RuE9c4aMuJ8wgY/Xl","FriendItemComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.FriendItemComponent=void 0;var i=e("./AvatarComponent (scripts.common.components)"),c=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),s=e("./PlaceNumberComponent (scripts.windows.layouts.message-center)"),p=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._placeNumber=null,t._avatar=null,t._levelLabel=null,t._caption=null,t._coin=null,t._receivingCoinButton=null,t}return a(t,e),Object.defineProperty(t.prototype,"receivingCoinButton",{get:function(){return this._receivingCoinButton},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeNumber",{set:function(e){this._placeNumber.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"avatar",{set:function(e){this._avatar.setAvatar(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"level",{set:function(e){this._levelLabel.string=e.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{set:function(e){this._caption&&e&&this._caption.setString(e.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coin",{set:function(e){e&&(this._coin.active=e.active,this.receivingCoinButton.interactable=e.active)},enumerable:!1,configurable:!0}),t.prototype.init=function(t){e.prototype.init.call(this,t)},t.prototype.setState=function(t){var n;e.prototype.setState.call(this,t);var o=this._states[t];if(null===(n=this._data)||void 0===n?void 0:n.user){var a=this._data.user,r=a.placeNumber,i=a.avatar,c=a.level,s=a.label,p=a.coins;r&&(this.placeNumber=r),i&&(this.avatar=i),c&&(this.level=c),s&&(this.label=s),this._coin.active=!!p}o.label&&(this.label=o.label),o.caption&&(this.caption=o.caption)},t.EVENT_COIN="coin",r([u({type:s.PlaceNumberComponent,visible:!0})],t.prototype,"_placeNumber",void 0),r([u({type:i.AvatarComponent,visible:!0})],t.prototype,"_avatar",void 0),r([u({type:cc.Label,visible:!0})],t.prototype,"_levelLabel",void 0),r([u({type:p.I18NLabel,visible:!0})],t.prototype,"_caption",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_coin",void 0),r([u({type:cc.Button,visible:!0})],t.prototype,"_receivingCoinButton",void 0),r([m],t)}(c.MessageItemComponent);n.FriendItemComponent=d,cc._RF.pop()},{"./AvatarComponent (scripts.common.components)":"AvatarComponent (scripts.common.components)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)","./PlaceNumberComponent (scripts.windows.layouts.message-center)":"PlaceNumberComponent (scripts.windows.layouts.message-center)"}],"FriendWindowItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"79292kWOq9I87fZppafRE04","FriendWindowItemComponent (scripts.windows.items)"),n.__esModule=!0,n.FriendWindowItemComponent=n.CrownsConfig=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function P(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var k=cc._decorator,T=k.ccclass,I=k.property,M=(o=T("CrownsConfig"),a=I(cc.Integer),r=I(cc.SpriteFrame),o((s=P((c=function(){R(this,"level",s,this),R(this,"crownIcon",p,this)}).prototype,"level",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=P(c.prototype,"crownIcon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.CrownsConfig=M;var j=(l=I({type:cc.Label,visible:!0}),m=I({type:cc.Sprite,visible:!0}),u=I({type:cc.Label,visible:!0}),d=I({type:E.ButtonControlComponent,visible:!0}),y=I({type:cc.Sprite,visible:!0}),f=I({type:[M],visible:!0}),T((g=function(e){var t,n,o,a;function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return R(t=e.call.apply(e,[this].concat(o))||this,"_label",v,A(t)),R(t,"_avatar",_,A(t)),R(t,"_level",b,A(t)),R(t,"_button",C,A(t)),R(t,"_crownsIcon",w,A(t)),R(t,"_crownsConfig",S,A(t)),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,O(t,n),r.prototype.initCrown=function(e){var t=this,n=this._crownsConfig.find(function(n,o){return t._crownsConfig[o+1]?e>=n.level&&e<t._crownsConfig[o+1].level:e>=n.level});n&&(this._crownsIcon.node.active=!0,this._crownsIcon.spriteFrame=n.crownIcon)},o=r,(a=[{key:"name",get:function(){return this._label?this._label.string:""},set:function(e){this._label&&(this._label.string=e)}},{key:"level",get:function(){return this._level?this._level.string:""},set:function(e){this._level&&(this._level.string=e)}},{key:"avatar",get:function(){return this._avatar}},{key:"button",get:function(){return this._button}}])&&x(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),r}(cc.Component),v=P(g.prototype,"_label",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P(g.prototype,"_avatar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P(g.prototype,"_level",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P(g.prototype,"_button",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P(g.prototype,"_crownsIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P(g.prototype,"_crownsConfig",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=g))||h);n.FriendWindowItemComponent=j,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)"}],"FriendsScrollAdapter (scripts.windows.scroll-adapters)":[function(e,t,n){"use strict";cc._RF.push(t,"0acefzFu95c15MFBbjyudeD","FriendsScrollAdapter (scripts.windows.scroll-adapters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.FriendsScrollAdapter=void 0;var r=e("./MessageCenterScrollAdapter (scripts.windows.scroll-adapters)"),i=e("./CandyvalleyMessageHandler (scripts.message-center)"),c=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),s=function(e){function t(t){var n=e.call(this)||this;return n._messageCenter=t.messageCenter,n._chartModule=t.chartModuleResolver.get(),n}return a(t,e),t.prototype.init=function(){var e=this;return Promise.resolve().then(function(){return e._chartModule.getChartBuilder().setAvailableCurrentUser(!1).build()}).then(function(t){var n=t.map(function(e){return e.userInfo.id});return Promise.resolve().then(function(){return e._messageCenter.getLimits([i.CandyvalleyMessageHandler.MESSAGE_REQUEST],n)}).then(function(n){e._items=t.map(function(t,o){return{prefabKey:r.MessageCenterScrollAdapter.HOLDER_PREFAB_KEY_COMMON,states:e._getItemConfig(r.MessageCenterScrollAdapter.HOLDER_PREFAB_KEY_COMMON).states,state:n.isMessageAvailableFor(i.CandyvalleyMessageHandler.MESSAGE_REQUEST,t.userInfo.id)?c.MessageItemComponent.STATE_DEFAULT:c.MessageItemComponent.STATE_DISABLED,data:{user:{placeNumber:o+1,avatar:t.userInfo.photo,label:t.userInfo.name,level:t.meta.progress.value,id:t.userInfo.id,coins:!1}}}})})})},t}(r.MessageCenterScrollAdapter);n.FriendsScrollAdapter=s,cc._RF.pop()},{"./CandyvalleyMessageHandler (scripts.message-center)":"CandyvalleyMessageHandler (scripts.message-center)","./MessageCenterScrollAdapter (scripts.windows.scroll-adapters)":"MessageCenterScrollAdapter (scripts.windows.scroll-adapters)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)"}],"FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"059d7QKcQBEoKNFO6KpywTE","FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.FullscreenWindowComponent=void 0;var o,a,r,i,c,s,p,l=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.menu,C=v.property,w=(o=b("UI-Kit/WindowManager/FullscreenWindowComponent"),a=C({type:cc.Widget,visible:!0}),r=C({type:[cc.Layout],visible:!0}),_(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_bodyWidget",s,f(t)),y(t,"_bodyLayouts",p,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a._resizeWindow=function(){var e=cc.view.getVisibleSize();this.node.width=e.width,this.node.height=e.height},a.show=function(){var e=this;return new Promise(function(t){e.node.opacity=0,e.playSound("open"),e.node.runAction(cc.sequence([cc.fadeIn(.1).easing(cc.easeCubicActionOut()),cc.callFunc(t)]))})},a.hide=function(){var e=this;return new Promise(function(t){e.playSound("close"),e.node.runAction(cc.sequence([cc.fadeOut(.1).easing(cc.easeCubicActionIn()),cc.callFunc(t)]))})},a.updateTemplate=function(){e.prototype.updateTemplate.call(this);for(var t,n=m(this._bodyLayouts);!(t=n()).done;)t.value.updateLayout();this._bodyWidget&&this._bodyWidget.updateAlignment()},a.initialize=function(t,n){if(void 0===n&&(n={}),e.prototype.initialize.call(this,t,n),this._bodyWidget&&n.align)switch(n.align){case"top":this._bodyWidget.node.anchorY=1,this._bodyWidget.isAlignTop=!0;break;case"center":this._bodyWidget.node.anchorY=.5,this._bodyWidget.isAlignVerticalCenter=!0;break;case"bottom":this._bodyWidget.node.anchorY=0,this._bodyWidget.isAlignBottom=!0}},a.onLoad=function(){this._resizeWindow()},o}(l.WindowComponent),s=g(c.prototype,"_bodyWidget",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g(c.prototype,"_bodyLayouts",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=c))||i)||i);n.FullscreenWindowComponent=w,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"FunctionAction (@tapclap.game-kit.action-manager.actions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6d594kRDThSrZOqEqNC6HB4","FunctionAction (@tapclap.game-kit.action-manager.actions)"),n.__esModule=!0,n.FunctionAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._func=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return Promise.resolve().then(this._func)},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.FunctionAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a1e02MLpIBTuaD5b36V1xYO","FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.FunctionAnimation=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._func=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return Promise.resolve().then(this._func).then(this._resolve),e.prototype.run.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.FunctionAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"b69d1iF3O9Ai4r9j1YZ6ca3","FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.FunctionAnimationWindowLayoutComponent=void 0;var o,a,r,i,c,s=e("./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/WindowManager/FunctionAnimationWindowLayoutComponent"),a=_({type:cc.Component.EventHandler,visible:!0}),g(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_eventHandler",c,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype._doRunAnimation=function(){var e=this,t=Promise.resolve();if(this._eventHandler&&cc.isValid(this._eventHandler.target)){var n=this._eventHandler.target.getComponent(this._eventHandler._componentName);n&&cc.isValid(n)&&(t=t.then(function(){return n[e._eventHandler.handler].call(n)}))}t.then(function(){return e._resolve()})},o}(s.AnimationWindowLayoutComponent),u=i.prototype,d=[a],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_eventHandler",e)||e},f)).initializer&&(Object.defineProperty(u,"_eventHandler",f),f=null),c=f,r=i))||r)||r);n.FunctionAnimationWindowLayoutComponent=b,cc._RF.pop()},{"./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"FunctionLoadTask (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0971bbWlOFe64I1AACOe3WX","FunctionLoadTask (@tapclap.game-kit.loader)"),n.__esModule=!0,n.FunctionLoadTask=void 0;var r=function(e){var t,n,r,i;function c(t,n){var o;return(o=e.call(this)||this)._closure=t,o._description=n,o}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.load=function(){var e=this;return Promise.resolve().then(function(){return e._processProgress(0,1)}).then(this._closure).then(function(t){return Promise.resolve().then(function(){return e._processProgress(1,1)}).then(function(){return e._processComplete(null,t)})}).catch(function(t){return Promise.resolve().then(function(){return e._processProgress(1,1)}).then(function(){return e._processComplete(t)})})},r=c,(i=[{key:"description",get:function(){return"[function]: "+(this._description||this._closure.toString())}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./LoadTask (@tapclap.game-kit.loader)").LoadTask);n.FunctionLoadTask=r,cc._RF.pop()},{"./LoadTask (@tapclap.game-kit.loader)":"LoadTask (@tapclap.game-kit.loader)"}],"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"07e27g8xvpUD7sypj/s5fXu","GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),n.__esModule=!0,n.GameActionBuilder=void 0;var o=function(){function e(e){var t=(void 0===e?{eventMap:{}}:e).eventMap,n=void 0===t?{}:t;this._eventMap=n||{}}var t=e.prototype;return t.build=function(){return[]},t._getEventFromMap=function(e){return this._eventMap[e]},e}();n.GameActionBuilder=o,cc._RF.pop()},{}],"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d6e17HzkndR4KtdfHHZqcAP","GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.GameActionSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._animationPipeline=n,o._animationPipelineIndex=0,o._animationQueue=[],o._settledPromise=Promise.resolve(),o._skipAnimations=!1,o._finalQueue=[],o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r.setPipeline=function(e){this._animationPipeline=e},r.prepareQueue=function(e){var t=e;if(this._skipAnimations){for(var n,r=o(e);!(n=r()).done;)for(var i,c=o(n.value);!(i=c()).done;){var s=i.value.groups;if(s.length>0)for(var p,l=o(s);!(p=l()).done;)for(var m,u=o(p.value);!(m=u()).done;){var d=m.value,y=d.target,f=d.animation,h=d.tag;if(y){var g=y.getComponent("animation");g.removeAnimation(f),g.removeSettledAnimation(f),h&&g.removeTaggedAnimation(h,f),f.skip()}}}t=[]}else if(0===this._finalQueue.length)for(var v,_=o(e);!(v=_()).done;){for(var b,C=[],w=o(v.value);!(b=w()).done;){var S=b.value;S.skippable||(0===this._finalQueue.length&&(S.type=a.TYPE_WAIT),C.push(S))}C.length>0&&this._finalQueue.push(C)}return t},r._processAnimationQueue=function(e,t,n){var r=this;if(void 0===n&&(n=!1),e.length>0){for(var i,c=[],s=o(e.shift());!(i=s()).done;)for(var p,l=i.value,m=l.groups,u=l.type,d=[],y=[],f=[],h=function(){for(var e,t=p.value,n=o(t);!(e=n()).done;){var i=e.value.animation;y.push(i)}for(var s,l=function(){var e=s.value,t=e.target,n=e.animation;if(t){var o=t.getComponent("animation"),a=o.animations.findIndex(function(e){return e===n});if(a>0){var r=o.animations[a-1];y.includes(r)||d.push(r.wait)}}},m=o(t);!(s=m()).done;)l();var h=Promise.all(d),g=Promise.all(f);r._settledPromise=r._settledPromise.then(function(){return g});for(var v,_=function(){var e=v.value,t=e.target,n=e.animation,o=e.tag,i=u===a.TYPE_SETTLED?r._settledPromise:h;if(t){var s=t.getComponent("animation");c.push(i.then(function(){return n.run()}).then(function(){return s.removeAnimation(n)}).then(function(){n.settled.then(function(){s.removeSettledAnimation(n),o&&s.removeTaggedAnimation(o,n)})}))}else c.push(i.then(function(){return n.run()}));f.push(n.settled)},b=o(t);!(v=b()).done;)_()},g=o(m);!(p=g()).done;)h();Promise.all(c).then(function(){r._processAnimationQueue(r.prepareQueue(e),t)})}else this._world.unlockInput(),this._animationPipelineIndex>0&&this._animationPipelineIndex--,0===this._animationPipelineIndex&&(t||this.events.emit("end"))},r.skipAnimations=function(){this.events.emit("skip"),this._finalQueue.length>0&&(this._skipAnimations||(this._skipAnimations=!0,this._processAnimationQueue(this._finalQueue)))},r.resetFinalQueue=function(){this._finalQueue=[]},r._processState=function(){for(var e,t=[],n=o(this._animationPipeline);!(e=n()).done;){for(var r,i=[],c=o(e.value);!(r=c()).done;){var s=r.value,p=s.builder,l=s.state,m=s.type,u=void 0===m?a.TYPE_WAIT:m,d=s.skippable,y=void 0===d||d,f=[];if(l)for(var h,g=o(Array.isArray(l)?l:[l]);!(h=g()).done;){var v=h.value,_=this._world.getState(v);f.push(_)}if(0===f.length||f.some(function(e){return e})){var b=p.build.apply(p,f);if(b.length>0){for(var C,w=o(b);!(C=w()).done;)for(var S,E=o(C.value);!(S=E()).done;){var x=S.value,A=x.target,O=x.animation,R=x.tag;if(A){var P=A.getComponent("animation");if(!P)throw new Error("Target must has AnimationComponent");P.addAnimation(O),R&&P.addTaggedAnimation(R,O)}}i.push({type:u,skippable:y,groups:b})}}}i.length>0&&t.push(i)}this._animationQueue=this._animationQueue.concat(t)},r.hasActiveAnimationPipeline=function(){return 0!==this._animationPipelineIndex},r.animate=function(e){var t=this;void 0===e&&(e=!1),this._processState(),this._animationQueue.length>0?(this._animationPipelineIndex++,this._world.lockInput(),this._processAnimationQueue(this.prepareQueue(this._animationQueue),e),this._animationQueue=[]):Promise.resolve().then(function(){e||t.events.emit("end")})},r.preProcess=function(){this._animationQueue=[]},r.process=function(){return this._processState(),!1},r.postProcess=function(){this.animate()},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.GameActionSystem=c,c.KEY="gameAction",c.TYPE_SETTLED="settled",c.TYPE_WAIT="wait",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"513ccqnvIxWVIC7xoKDatW+","GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.GameCompletionGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n._computed=!1,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.compute=function(){var e=this._world.getState(a.CompletionSystem.STATE);if(!this._computed&&e&&e.data)return this._computed=!0,!0},o}(o.GameEventStrategy);n.GameCompletionGameEventStrategy=i,cc._RF.pop()},{"./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)":"CompletionSystem (@tapclap.match-x.engine.systems.completion-system)","./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"}],"GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"647865B7jpeNrD5JjARiw5+","GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),n.__esModule=!0,n.GameEventActionBuilder=void 0;var a=function(e){var t,n;function a(t){var n,o=t.event,a=t.builder;return(n=e.call(this)||this)._event=o,n._builder=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.build=function(e){var t=this;return e&&e.data&&e.data.find(function(e){return e&&e.key===t._event})?this._builder.build(e):[]},a}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.GameEventActionBuilder=a,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"GameEventModel (@tapclap.match-x.engine.systems.game-event-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"682257Le6JYWJt1cxzzU37R","GameEventModel (@tapclap.match-x.engine.systems.game-event-system)"),n.__esModule=!0,n.GameEventModel=void 0;var a=function(){function e(e,t){void 0===t&&(t={}),this._key=void 0,this._options=void 0,this._key=e,this._options=t}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"options",get:function(){return this._options}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.GameEventModel=a,cc._RF.pop()},{}],"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f9c78YxP3RWdb9acKqeB5yU","GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),n.__esModule=!0,n.GameEventStrategy=void 0;var o=function(){function e(){}return e.prototype.compute=function(){return null},e}();n.GameEventStrategy=o,cc._RF.pop()},{}],"GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)":[function(e,t,n){"use strict";cc._RF.push(t,"1b5199zVIRXkZmVN7K0zgiA","GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)"),n.__esModule=!0,n.GameEventSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./GameEventModel (@tapclap.match-x.engine.systems.game-event-system)"),r=e("./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o,a=void 0===n?{}:n,r=a.processStrategies,i=void 0===r?{}:r,c=a.postProcessStrategies,s=void 0===c?{}:c,p=a.ignoreCompletionCheck,l=void 0===p?[]:p,m=a.emptyStateKeys,u=void 0===m?[]:m;return(o=e.call(this)||this)._world=void 0,o._processStrategies=void 0,o._postProcessStrategies=void 0,o._world=t,o._processStrategies=i,o._postProcessStrategies=s,o._ignoreCompletionCheck=l,o._emptyStateKeys=u,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c.process=function(){this._process(this._processStrategies)},c.postProcess=function(){this._process(this._postProcessStrategies)},c._process=function(e){var t=this;if(this._emptyStateKeys.every(function(e){return!t._world.getState(e)})){for(var n=[],r=0,i=Object.keys(e);r<i.length;r++){var c=i[r];if(!this._isGameCompletion()||this._ignoreCompletionCheck.includes(c)){var s=e[c].compute();s&&n.push(new a.GameEventModel(c,s))}}n.length>0&&this._world.setState(o.STATE,n)}},c._isGameCompletion=function(){var e=this._world.getState(r.CompletionSystem.STATE);return!(!e||!e.data)},o}(o.PipelineProcessSystem);n.GameEventSystem=c,c.KEY="gameEvent",c.STATE="gameEvent",cc._RF.pop()},{"./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)":"CompletionSystem (@tapclap.match-x.engine.systems.completion-system)","./GameEventModel (@tapclap.match-x.engine.systems.game-event-system)":"GameEventModel (@tapclap.match-x.engine.systems.game-event-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"5d031HXnWJUdodmwESf9VIg","GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.GameForceEndHandler=void 0;var o=function(){function e(){}return e.prototype.handle=function(){return!1},e}();n.GameForceEndHandler=o,cc._RF.pop()},{}],"GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"a261e0wT89RRoHK7FZakGfH","GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GameOverAnimationBuilder=void 0;var r=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),i=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),s=function(e){function t(t){var n=e.call(this)||this;return n._actionManager=t.actionManager,n._match3Component=t.match3Component,n._level=t.level,n._finishAction=t.finishAction,n._firework=t.firework,n._uiManager=t.uiManager,n}return a(t,e),t.prototype.build=function(e){var t=this,n=[];if(e){var o=new i.FunctionAnimation(function(){var n=cc.sequence([cc.callFunc(function(){return t._uiManager.hideUI()}),cc.callFunc(function(){return t._firework.launch(10)}),cc.delayTime(3)]).repeatForever();e.data.result===c.WinLoseSystem.RESULT.WIN&&(t._match3Component.setCompletionFinished(),t._firework.node.runAction(n)),t._actionManager.run(t._finishAction,{game:t._match3Component.game,level:t._level,result:e.data.result,reason:e.data.reason,beforeNextGame:function(){return t._firework.node.stopAction(n)}})});n.push({animation:o})}return[n]},t}(r.GameActionBuilder);n.GameOverAnimationBuilder=s,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"98e43DndPRfxqxkxnLQ/V7q","GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GameOverCallbackGameActionBuilder=void 0;var r=function(e){function t(t){var n=t.callback,o=t.type,a=e.call(this)||this;return a._processed=!1,a._callback=n,a._type=o,a}return a(t,e),t.prototype.build=function(e){var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)===this._type&&this._callback&&!this._processed&&(this._processed=!0,this._callback()),[]},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.GameOverCallbackGameActionBuilder=r,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"GameOverSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"e34878f4opQCJYv2xXNkRWH","GameOverSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.GameOverSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.postProcess=function(){var e=this._world.getState(a.WinLoseSystem.STATE);if(e)switch(e.data.result){case a.WinLoseSystem.RESULT.WIN:this.emitEvent(o.EVENTS.WIN);break;case a.WinLoseSystem.RESULT.LOSE:this.emitEvent(o.EVENTS.LOSE)}},i.emitEvent=function(e){var t=this._world.getEnabledComponent("statistic");this.events.emit(e,t&&t.data)},o}(o.PipelineProcessSystem);n.GameOverSystem=i,i.KEY="gameOver",i.EVENTS={WIN:"win",LOSE:"lose",DEFEAT:"defeat"},cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4d822xPcohcPqwWI6U1n5u1","GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),n.__esModule=!0,n.GameStartAnimatorComponent=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("Match-X/StartAnimator/GameStartAnimator")(o=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._game=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.initial=function(){return Promise.resolve()},r.show=function(){return Promise.resolve()},r.hide=function(){return Promise.resolve()},r.setGame=function(e){this._game=e},o}(cc.Component))||o)||o;n.GameStartAnimatorComponent=i,cc._RF.pop()},{}],"GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";cc._RF.push(t,"279b6EmlUxcwZZKnb+xMU0n","GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)"),n.__esModule=!0,n.GameStartDecorator=void 0;var o=function(){function e(){}var t=e.prototype;return t.initial=function(){return Promise.resolve()},t.show=function(){return Promise.resolve()},t.hide=function(){return Promise.resolve()},e}();n.GameStartDecorator=o,cc._RF.pop()},{}],"GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b530efrKItXlI6XTzHqFh4x","GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.GameWinCongratulationsAnimationBuilder=void 0;var o=e("./AnimationData (@tapclap.match-x.cocos.animations)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),c=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),p=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)");function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function s(t){var n;return(n=e.call(this,t)||this)._firework=t.firework,n._wait=void 0===t.wait||t.wait,n}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),s.prototype.build=function(){var e=this,t=new c.GroupAnimation([new r.ChainAnimation([new c.GroupAnimation([new a.FunctionAnimation(function(){return e._firework.launch(5)}),new i.ActionAnimation(cc.delayTime(1),this._firework.node)],!0),new c.GroupAnimation([new a.FunctionAnimation(function(){return e._firework.launch(5)}),new i.ActionAnimation(cc.delayTime(1),this._firework.node)],!0),new a.FunctionAnimation(function(){return e._firework.launch(10)})]),new p.DummyAnimation],!this._wait);return[[new o.AnimationData(null,t)]]},s}(s.GameActionBuilder);n.GameWinCongratulationsAnimationBuilder=m,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"GatewayRequest (@tapclap.game-kit.service-gateway)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"68aecw4B6Bc5ord0T2phGEn","GatewayRequest (@tapclap.game-kit.service-gateway)"),n.__esModule=!0,n.GatewayRequest=void 0;var a=function(){function e(e,t){this._url=e,this._options=t}var t,n;return t=e,(n=[{key:"url",get:function(){return this._url}},{key:"options",get:function(){return this._options}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.GatewayRequest=a,cc._RF.pop()},{}],"GetterToDateRange (scripts.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"5bf173PFhdYDYvjHFejKmMu","GetterToDateRange (scripts.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.GetterToDateRange=void 0,n.GetterToDateRange=function(e){var t=e.get(),n=t.startDate,o=t.finishDate;return{startDate:new Date(n),finishDate:new Date(o)}},cc._RF.pop()},{}],"GetterToValue (@tapclap.utils-js.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"0cb72xx4w5bfa9USgTfKT5g","GetterToValue (@tapclap.utils-js.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.GetterToValue=void 0,n.GetterToValue=function(e){return e.get()},cc._RF.pop()},{}],"GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)":[function(e,t,n){"use strict";cc._RF.push(t,"2e10fIhp3BX7b7fpROGi/kF","GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.GiftBoxAnimationComponent=void 0;var i=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),c=e("./BounceAnimation (scripts.windows.items.daily-reward.animation)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._skeleton=null,t._idleAnimationKeys=[],t._idleDelay=0,t._idleCooldown=0,t._angleAnimation=null,t._glowSkeleton=null,t._glowAppearanceDuration=0,t._glowDisappearanceDuration=0,t}return a(t,e),t.prototype.setDefault=function(){},t.prototype.runGlow=function(){},t.prototype.runOpening=function(){},t.prototype.runIdle=function(){},t.prototype.setActive=function(){},r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_skeleton",void 0),r([l({type:[i.AnimationKey],visible:!0})],t.prototype,"_idleAnimationKeys",void 0),r([l({visible:!0,min:0})],t.prototype,"_idleDelay",void 0),r([l({visible:!0,min:0})],t.prototype,"_idleCooldown",void 0),r([l({type:c.BounceAnimation,visible:!0})],t.prototype,"_angleAnimation",void 0),r([l({type:sp.Skeleton,visible:!0})],t.prototype,"_glowSkeleton",void 0),r([l({visible:!0,min:0})],t.prototype,"_glowAppearanceDuration",void 0),r([l({visible:!0,min:0})],t.prototype,"_glowDisappearanceDuration",void 0),r([p],t)}(cc.Component);n.GiftBoxAnimationComponent=m,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./BounceAnimation (scripts.windows.items.daily-reward.animation)":"BounceAnimation (scripts.windows.items.daily-reward.animation)"}],"Goal (@tapclap.match-x.engine.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"558f9ZnT6ZcDp8XEau6IVyD","Goal (@tapclap.match-x.engine.goals)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Goal=void 0;var o=function(){function e(){this._collector=null}return Object.defineProperty(e.prototype,"collector",{get:function(){return this._collector},set:function(e){this._collector=e},enumerable:!1,configurable:!0}),e}();n.Goal=o,cc._RF.pop()},{}],"GoalAmountComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ba097bNinpWSoVANpeK5/NW","GoalAmountComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GoalAmountComponent=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._value=t.value||1,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getValue=function(){return this._value},a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GoalAmountComponent=a,a.KEY="goalAmount",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"2c46cxEEYlSY4+1GF8h9Os6","GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),n.__esModule=!0,n.GoalAmountRenderDecorator=void 0;var o=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),a=e("./GoalAmountComponent (@tapclap.match-x.engine.components)"),r=e("./MultiplierViewComponent (@tapclap.match-x.cocos.components)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.decorate=function(e,t,n){var o=n.getComponent(r.MultiplierViewComponent),i=t.getEnabledComponent(a.GoalAmountComponent.KEY);o&&i&&(o.setBackground(r.MultiplierViewComponent.TYPE_DEFAULT),o.setCounter(i.getValue()))},o}(o.EntityRenderDecorator);n.GoalAmountRenderDecorator=c,cc._RF.pop()},{"./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GoalAmountComponent (@tapclap.match-x.engine.components)":"GoalAmountComponent (@tapclap.match-x.engine.components)","./MultiplierViewComponent (@tapclap.match-x.cocos.components)":"MultiplierViewComponent (@tapclap.match-x.cocos.components)"}],"GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"ef7e9UIbYxdPIqMpYAo6AKP","GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.GoalAnimationBuilder=void 0;var s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),l=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),m=e("./AudioComponent (@tapclap.match-x.engine.components)"),u=e("./GoalAnimationComponent (@tapclap.match-x.engine.components)"),d=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),y=e("./GoalComponent (@tapclap.match-x.engine.components)"),f=e("./PostponeGoalComponent (@tapclap.match-x.engine.components)"),h=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),g=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),v=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),_=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),b=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),C=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),w=e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),S=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),E=e("./MoveToGoalAnimation (@tapclap.match-x.cocos.animations)"),x=function(e){function t(t){var n=t.goalsView,o=t.audioEffectsPlayer,a=t.soundKeys,r=t.sounds,i=t.resolveDelay,c=t.postpone,s=void 0!==c&&c,p=e.call(this)||this;return p._goalsView=n,p._audioEffectsPlayer=o,p._sounds=r||[],p._soundKeys=a||{},p._resolveDelay=i||0,p._postpone=s,p}return a(t,e),t.prototype.build=function(e,n){var o,a,i,g=this,x=[],A=new Set,O=((null==e?void 0:e.data)||[]).flat(),R=(null==n?void 0:n.data)||[],P=new Set,k=0,T=function(e,n,o,a,r,c,O){var T=n.getComponentByClass(f.PostponeGoalComponent);if(!I._postpone&&!T||I._postpone&&T){var M=new v.ChainAnimation,j=new C.GroupAnimation([],!0),L=function(e){return e&&M.add(e)},F=function(e){return e&&j.add(e)},D=n.getEnabledComponentByClass(y.GoalComponent);if(D){var B=D.goal,G=D.counter,N=D.diff;if(B&&B.collector&&o&&a&&!A.has(n)){A.add(n);var W=B.collector,H=W.getEnabledComponentByClass(h.RenderComponent);if(H){var V=c||O,K=null===(i=R.find(function(e){return e.chunkExplodeModels.find(function(e){return e.entity===n})}))||void 0===i?void 0:i.chunkExplodeModels.find(function(e){return e.entity===n}),U=n.getComponentByClass(u.GoalAnimationComponent),Y=new p.AnimationFactory(n),z=n.getEnabledComponentByClass(h.RenderComponent).node,q=W.getEnabledComponentByClass(d.GoalCollectorComponent),Z=Math.abs(10*k-1e3),X=null==U?void 0:U.zIndexBeforeMove,J=[],Q=[];V&&Q.push(new _.EventListenAnimation(V,"explode")),K&&Q.push(new _.EventListenAnimation(K.entity,"chunk-combine")),Q.length>0&&L(new C.GroupAnimation(Q,!0)),X&&L(new b.FunctionAnimation(function(){return z.zIndex=z.zIndex+Z}));var $=I._getEntityBodyNode(z,U),ee=!U||U.state;if(ee&&Y.hasAnimation(l.AnimationResolver.TYPE_FINAL)&&L(Y.createAnimation(l.AnimationResolver.TYPE_FINAL,{event:"finish"})),ee){if(J.push(new _.EventTriggerAnimation(n,"explode"),new b.FunctionAnimation(function(){var e,n=((null===(e=null==H?void 0:H.node)||void 0===e?void 0:e.getComponent(w.GoalCollectionViewComponent))||g._goalsView).getGoalView(B),o=n.getIconNode();return new E.MoveToGoalAnimation({entityNode:z,sourceNode:$,targetNode:o,duration:q?t.TO_BOSS_DURATION:t.TO_GOAL_DURATION,scale:q?t.TO_BOSS_PRESCALE:t.TO_GOAL_PRESCALE,delay:q?t.TO_BOSS_DELAY:t.TO_GOAL_DELAY,zIndex:X?void 0:Z,step:k++/10}).run().then(function(){n.setDiff(N),B.isCompleted&&G===B.counter&&(n.isCompleted()||(n.showCompletedIcon(),g._audioEffectsPlayer.play("taskCompleted")))})}),new _.EventTriggerAnimation(B.collector,"before-collect")),L(new C.GroupAnimation([new b.FunctionAnimation(function(){g._getSoundKey(r)&&g._audioEffectsPlayer.play(g._getSoundKey(r),{mergable:0})}),new C.GroupAnimation([new v.ChainAnimation(J),new S.ActionAnimation(cc.delayTime(I._resolveDelay),z)],!0)])),W&&!P.has(W)){var te=new p.AnimationFactory(W);q&&(L(new b.FunctionAnimation(function(){if(!q.isAllGoalsCompleted&&te.hasAnimation("collect")){var e=W.getEnabledComponentByClass(m.AudioComponent);if(e){var n=e.getSound(g._soundKeys[t.COLLECT_SOUND_KEY]);n&&g._audioEffectsPlayer.play(n)}(o=new v.ChainAnimation([new _.EventListenAnimation(W,"before-collect"),te.createAnimation("collect"),new _.EventTriggerAnimation(W,"collect")]))&&o.run()}var o})),P.add(W))}else{var ne=new p.AnimationFactory(e);ne.hasAnimation(l.AnimationResolver.TYPE_EXPLODE)&&F(ne.createAnimation(l.AnimationResolver.TYPE_EXPLODE))}F(M),x.push(new s.AnimationData(n,j))}else{var oe=n.getEnabledComponentByClass(y.GoalComponent),ae=oe.goal,re=oe.diff,ie=oe.counter;if(oe&&oe.goal.collector){var ce=oe.goal.collector.getEnabledComponentByClass(h.RenderComponent);ce&&x.push(new s.AnimationData(n,new b.FunctionAnimation(function(){var e,t=(null===(e=null==ce?void 0:ce.node)||void 0===e?void 0:e.getComponent(w.GoalCollectionViewComponent))||g._goalsView;if(t){var n=t.getGoalView(ae);n.setDiff(re),ae.isCompleted&&ie===ae.counter&&(n.isCompleted()||(n.showCompletedIcon(),g._audioEffectsPlayer.play("taskCompleted")))}})))}}}}}}},I=this;try{for(var M=r(O),j=M.next();!j.done;j=M.next()){var L=j.value;T(L.cell,L.entity,L.isGoalTarget,L.remove,L.loopIndex,L.affectedBy,L.blastedBy)}}catch(F){o={error:F}}finally{try{j&&!j.done&&(a=M.return)&&a.call(M)}finally{if(o)throw o.error}}return c(x.map(function(e){return[e]}))},t.prototype._getEntityBodyNode=function(e,t){var n=e.getChildByName("body");return(null==t?void 0:t.node)&&(n=e.name===t.node?e:e.getChildByName(t.node)),n},t.prototype._getSoundKey=function(e){return this._sounds[Math.min(e,this._sounds.length-1)]},t.TO_GOAL_DURATION=.8,t.TO_BOSS_DURATION=.8,t.TO_GOAL_PRESCALE=1.3,t.TO_BOSS_PRESCALE=1.3,t.TO_GOAL_DELAY=.2,t.TO_BOSS_DELAY=.2,t.COLLECT_SOUND_KEY="collect",t}(g.GameActionBuilder);n.GoalAnimationBuilder=x,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./AudioComponent (@tapclap.match-x.engine.components)":"AudioComponent (@tapclap.match-x.engine.components)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GoalAnimationComponent (@tapclap.match-x.engine.components)":"GoalAnimationComponent (@tapclap.match-x.engine.components)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MoveToGoalAnimation (@tapclap.match-x.cocos.animations)":"MoveToGoalAnimation (@tapclap.match-x.cocos.animations)","./PostponeGoalComponent (@tapclap.match-x.engine.components)":"PostponeGoalComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"GoalAnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a025e+z9F1ScYD/qfuBpYom","GoalAnimationComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GoalAnimationComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=void 0===t?{}:t,a=o.enable,r=void 0===a||a,i=o.zIndexBeforeMove,c=void 0!==i&&i,s=o.node,p=void 0===s?"":s;return(n=e.call(this)||this)._enable=r,n.zIndexBeforeMove=c,n.node=p,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"state",get:function(){return this._enable}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GoalAnimationComponent=r,r.KEY="goalAnimation",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GoalCollectionComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"4dacb02q2ZdGL1GHln9GRvc","GoalCollectionComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GoalCollectionComponent=void 0;var r=function(e){function t(t){var n=t.goals,o=void 0===n?[]:n,a=e.call(this)||this;return a._goals=new Set(o),a}return a(t,e),t.prototype.addGoal=function(e){this._goals.add(e)},t.prototype.removeGoal=function(e){this._goals.delete(e)},t.prototype.replaceGoal=function(e,t){this._goals.has(e)&&(this._goals.delete(e),this._goals.add(t))},Object.defineProperty(t.prototype,"goals",{get:function(){return Array.from(this._goals)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllGoalsCompleted",{get:function(){return this.goals.every(function(e){return!!e.isCompleted})},enumerable:!1,configurable:!0}),t.KEY="goalCollection",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GoalCollectionComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"2fa95cU23pEf43BM501o1bh","GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.GoalCollectionViewComponent=void 0;var i=e("./GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)"),c=e("./ViewComponent (@tapclap.match-x.cocos.components)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goalCounterPrefab=null,t.placeholders=[],t._goals=new Map,t}return a(t,e),t.prototype.addGoal=function(e,t){if(void 0===t&&(t=0),this.placeholders[t]){var n=this._prefabFactory.createNode(e.type),o=cc.instantiateFrom(this.goalCounterPrefab),a=o.getComponent(i.GoalCounterViewComponent);a&&(a.addIcon(n),a.setCounter(e.counter),a.setCounterValue(e.counter),a.setCounterMaxValue(e.total)),this._goals.set(e,a),this.placeholders[t].addChild(o)}},t.prototype.removeGoal=function(e){var t=this._goals.get(e);t&&(t.node.destroy(),this._goals.delete(e))},t.prototype.replaceGoal=function(e,t){var n=this._goals.get(e);if(n){var o=this.placeholders.findIndex(function(e){return e.children.includes(n.node)});this.removeGoal(e),this.addGoal(t,o)}},t.prototype.getGoals=function(){return Array.from(this._goals.values())},t.prototype.getGoalView=function(e){return this._goals.get(e)},t.prototype.setPrefabFactory=function(e){this._prefabFactory=e},r([l({type:cc.Prefab,displayName:"\u041f\u0440\u0435\u0444\u0430\u0431 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430"})],t.prototype,"goalCounterPrefab",void 0),r([l({type:[cc.Node],displayName:"\u041c\u0435\u0441\u0442\u0430 \u0434\u043b\u044f \u0446\u0435\u043b\u0435\u0439"})],t.prototype,"placeholders",void 0),r([p],t)}(c.ViewComponent);n.GoalCollectionViewComponent=m,cc._RF.pop()},{"./GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"60b86yqyuVTM7PLI8e14ORp","GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),n.__esModule=!0,n.GoalCollectorAnimationCreator=void 0;var o=e("./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),a=e("./AnimationData (@tapclap.match-x.cocos.animations)"),r=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),i=e("./PostponeExplodeComponent (@tapclap.match-x.engine.components)");function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._audioMap=t.collectorEntityTypeAudioMap||{},n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),o.prototype.create=function(){var e=[],t=new r.AnimationFactory(this._entity);if(this._remove&&this._entity.getEnabledComponent("render")){var n=this._entity.getEnabledComponent("goalCollector");if(n){var o=this._entity.getComponentByClass(i.PostponeExplodeComponent),c=this._audioMap[this._entity.type]||{};if(o&&!o.enable&&n.isAllGoalsCompleted&&t.hasAnimation("complete")){c.complete&&this._audioEffectsPlayer.play(c.complete);var s=t.createAnimation("complete");e.push(new a.AnimationData(this._entity,s))}}}return e},o}(o.ExplodeAnimationCreator);n.GoalCollectorAnimationCreator=s,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./PostponeExplodeComponent (@tapclap.match-x.engine.components)":"PostponeExplodeComponent (@tapclap.match-x.engine.components)"}],"GoalCollectorComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b1e8806ZMhbBqEstnYiwRVX","GoalCollectorComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GoalCollectorComponent=void 0;var r=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,{goals:[]})||this;return n._data=t,n}return a(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInited",{get:function(){return this._goals.size>0},enumerable:!1,configurable:!0}),t.KEY="goalCollector",t}(e("./GoalCollectionComponent (@tapclap.match-x.engine.components)").GoalCollectionComponent);n.GoalCollectorComponent=r,cc._RF.pop()},{"./GoalCollectionComponent (@tapclap.match-x.engine.components)":"GoalCollectionComponent (@tapclap.match-x.engine.components)"}],"GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"10465TM5OdSz4Y5G3qPf1yY","GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.GoalCompleteGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./GoalSystem (@tapclap.match-x.engine.systems)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=void 0,n._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.compute=function(){var e=this._world.getState(a.GoalSystem.COMPLETE_STATE),t=this._world.getComponent("goals");if(!t)throw new Error("Goals component not found in world");if(e&&e.data&&!t.isAllGoalsCompleted)return e},o}(o.GameEventStrategy);n.GoalCompleteGameEventStrategy=i,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","./GoalSystem (@tapclap.match-x.engine.systems)":"GoalSystem (@tapclap.match-x.engine.systems)"}],"GoalComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2708cCTtRdaOIPEeoq+f9PO","GoalComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GoalComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=t.goal,a=void 0===o?null:o;return(n=e.call(this)||this)._goal=a,n._counter=0,n._diff=0,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"goal",get:function(){return this._goal}},{key:"counter",get:function(){return this._counter},set:function(e){this._counter=e}},{key:"diff",get:function(){return this._diff},set:function(e){this._diff=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GoalComponent=r,r.KEY="goal",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"e9a1abv1mRHDZhI2UHW9Hqs","GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.GoalCounterViewComponent=void 0;var i=e("./ViewComponent (@tapclap.match-x.cocos.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.counter=null,t.completedIcon=null,t.changedAnimation=null,t.completedAnimation=null,t._counterValue=0,t._counterMaxValue=0,t._iconContent=null,t}return a(t,e),t.prototype.setCounter=function(e){this.counter&&(this.counter.getComponent(cc.Label).string=e.toString(),this._playAnimation(this.changedAnimation))},t.prototype.setCounterValue=function(e){this._counterValue=e},t.prototype.setCounterMaxValue=function(e){this._counterMaxValue=e},t.prototype.setDiff=function(e){this._counterValue+=e,this._counterValue=Math.min(Math.max(0,this._counterValue),this._counterMaxValue),this.setCounter(this._counterValue)},t.prototype.showCompletedIcon=function(){this.completedAnimation?this._playAnimation(this.completedAnimation):this.completedIcon&&(this.counter.active=!1,this.completedIcon.active=!0)},t.prototype.isCompleted=function(){return this.completedIcon&&this.completedIcon.active},t.prototype.addIcon=function(e){this.icon&&(this.icon.addChild(e),this._iconContent=e,e.zIndex=-1)},t.prototype.getIconNode=function(){return this._iconContent},t.prototype._playAnimation=function(e){if(e){var t=this.node.getComponent(cc.Animation)||this.node.addComponent(cc.Animation);t.addClip(e),t.playAdditive(e.name)}},r([p({type:cc.Node,displayName:"\u0418\u043a\u043e\u043d\u043a\u0430"})],t.prototype,"icon",void 0),r([p({type:cc.Node,displayName:"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"})],t.prototype,"counter",void 0),r([p({type:cc.Node,displayName:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u043e\u0441\u0442\u0438"})],t.prototype,"completedIcon",void 0),r([p({type:cc.AnimationClip,displayName:"\u0410\u043d\u0438\u043c\u0430\u0446\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})],t.prototype,"changedAnimation",void 0),r([p({type:cc.AnimationClip,displayName:"\u0410\u043d\u0438\u043c\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f"})],t.prototype,"completedAnimation",void 0),r([s],t)}(i.ViewComponent);n.GoalCounterViewComponent=l,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"GoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"0abd6wqFjJeWZGoJI3W9xvJ","GoalCreator (@tapclap.match-x.engine.goals.creators)"),n.__esModule=!0,n.GoalCreator=void 0;var o=function(){function e(){}return e.prototype.create=function(e){throw void 0===e&&(e={}),new Error("Method 'create' not implemented")},e}();n.GoalCreator=o,cc._RF.pop()},{}],"GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2f4ffV4zG9Pgqy7fDToZXJu","GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),n.__esModule=!0,n.GoalDataExtractor=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._getCellsWithGoal=function(e,t){return t.cells.filter(function(t){return!(!t.entity||t.entity.type!==e)||!(!t.randomEntities||!Object.keys(t.randomEntities).includes(e))||void 0})},r.extract=function(e,t){for(var n,a=t.key,r=t.grid,i=[],c=o(e[a]);!(n=c()).done;){var s=n.value,p=s.type,l=s.options,m=l.total||new Set(this._retrieveCellsWithGoal(p,l,e[r])).size;i.push({entity:l.entityType||l.type,total:m})}return i},r._retrieveCellsWithGoal=function(e,t,n){var o=this,a=[];switch(e){case"simple":a.push({});break;case"auto":a=this._getCellsWithGoal(t.entityType,n);break;case"overall":case"composite":a=t.goals.reduce(function(e,t){return e.push.apply(e,o._retrieveCellsWithGoal(t.type,t.options,n)),e},[])}return a},a}(e("./DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)").DataExtractor);n.GoalDataExtractor=c,cc._RF.pop()},{"./DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"}],"GoalDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6e2ba6if7dQ/7la/2kCIK5x","GoalDataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.GoalDataLoader=void 0;var c=function(e){var t,n;function a(t,n){var o;return(o=e.call(this)||this)._world=t,o._goalFactory=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.load=function(e,t){for(var n,a=this._world.getEnabledComponent(e),r=o(t);!(n=r()).done;){var i=n.value,c=this._goalFactory.create(i.type,i.options);c.collector=this._world,a.addGoal(c)}this._world.setState("load.goals",a.goals)},a}(e("./DataLoader (@tapclap.match-x.engine.systems.load-system)").DataLoader);n.GoalDataLoader=c,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)"}],"GoalFactory (@tapclap.match-x.engine.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"67554SfD4VRlqOfbyp5cfwu","GoalFactory (@tapclap.match-x.engine.goals)"),Object.defineProperty(n,"__esModule",{value:!0}),n.GoalFactory=void 0;var o=e("./AutoGoalCreator (@tapclap.match-x.engine.goals.creators)"),a=e("./SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)"),r=e("./CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)"),i=e("./OverallGoalCreator (@tapclap.match-x.engine.goals.creators)"),c=e("./CoverGoalCreator (@tapclap.match-x.engine.goals.creators)"),s=function(){function e(e,t){void 0===t&&(t={}),this._creators=Object.assign({auto:new o.AutoGoalCreator(e),cover:new c.CoverGoalCreator(e),simple:new a.SimpleGoalCreator,composite:new r.CompositeGoalCreator(this),overall:new i.OverallGoalCreator(this)},t)}return e.prototype.create=function(e,t){var n=this._creators[e];if(n)return n.create(t);throw new Error("Not found creator by type '"+t.type+"'")},e}();n.GoalFactory=s,cc._RF.pop()},{"./AutoGoalCreator (@tapclap.match-x.engine.goals.creators)":"AutoGoalCreator (@tapclap.match-x.engine.goals.creators)","./CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)":"CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)","./CoverGoalCreator (@tapclap.match-x.engine.goals.creators)":"CoverGoalCreator (@tapclap.match-x.engine.goals.creators)","./OverallGoalCreator (@tapclap.match-x.engine.goals.creators)":"OverallGoalCreator (@tapclap.match-x.engine.goals.creators)","./SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)":"SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)"}],"GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"98a74MuI/VamZgnQgQRW2Qv","GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GoalStartAnimationHandler=void 0;var r=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),i=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=function(e){function t(t){var n=e.call(this)||this;return n._audioEffectsPlayer=t.audioEffectsPlayer,n._goalsView=t.goalsView,n}return a(t,e),t.prototype.run=function(){var e=this,t=[];return this._goalsView&&this._goalsView.getGoals().forEach(function(n){var o=n.node;t.push(new i.ChainAnimation([new r.ActionAnimation(cc.delayTime(.15),o),e._audioEffectsPlayer&&e._audioEffectsPlayer.create("taskShowingBefore",{mergable:0}),new r.ActionAnimation(cc.scaleTo(.25,1.15,1.15),o),new r.ActionAnimation(cc.scaleTo(.15,1,1),o)]))}),new c.GroupAnimation([new i.ChainAnimation(t),new s.DummyAnimation],!0)},t.prototype.initial=function(){},t}(e("./StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)").StartAnimationHandler);n.GoalStartAnimationHandler=p,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)":"StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)"}],"GoalSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"6fb4axMr7JbPabwAOAgrj1S","GoalSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.GoalSystem=void 0;var o=e("./GoalComponent (@tapclap.match-x.engine.components)"),a=e("./GoalAmountComponent (@tapclap.match-x.engine.components)"),r=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),i=e("./World (@tapclap.match-x.engine.entities)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function s(t){var n;return(n=e.call(this,t.world,t.goalFactory)||this)._statesForProcessing=t.statesForProcessing,n}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var p=s.prototype;return p.process=function(){var e=this,t=new Set,n=new Set;this._statesForProcessing.forEach(function(o){var a=e._world.getState(o);a&&e._processState(a,t,n)}),this.prepare()},p._processState=function(e,t,n){for(var p,l=this,m=this._getGoals(),u=c(e.data);!(p=u()).done;){var d=p.value.entity;if(!n.has(d)){n.add(d);var y=d.getEnabledComponent(o.GoalComponent.KEY);if(y){var f=1,h=d.getEnabledComponent(a.GoalAmountComponent.KEY);h&&0!==h.getValue()&&(f=h.getValue());var g=d.getEnabledComponent(r.MultiplierComponent.KEY);g&&(f+=Math.sign(f)*g.getValue()),!y.goal.isCompleted&&y.goal.process(d,f)&&(y.counter=y.goal.counter,y.diff=-f,y.goal.collector&&(t.add(y.goal.collector),y.goal.isCompleted&&y.goal.collector instanceof i.World?this._world.pushState(s.COMPLETE_STATE,y.goal):y.goal.isCompleted&&e.data.forEach(function(e){var t=e.entity;return!n.has(t)&&l._setGoalComponent(m,t)})))}}}for(var v,_=c(t);!(v=_()).done;){var b=v.value,C=b.getEnabledComponent("goalCollector");C&&C.isAllGoalsCompleted&&this._world.pushState(s.COLLECTOR_COMPLETE_STATE,b)}},s}(e("./PrepareGoalSystem (@tapclap.match-x.engine.systems)").PrepareGoalSystem);n.GoalSystem=m,m.KEY="goal",m.COLLECTOR_COMPLETE_STATE="collectorCompletedGoal",m.COMPLETE_STATE="completedGoal",cc._RF.pop()},{"./GoalAmountComponent (@tapclap.match-x.engine.components)":"GoalAmountComponent (@tapclap.match-x.engine.components)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./PrepareGoalSystem (@tapclap.match-x.engine.systems)":"PrepareGoalSystem (@tapclap.match-x.engine.systems)","./World (@tapclap.match-x.engine.entities)":"World (@tapclap.match-x.engine.entities)"}],"GoalsBarRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c55feiEJHhSC5IjXzIeE5hi","GoalsBarRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.GoalsBarRenderer=void 0;var c=function(e){var t,n;function a(t){var n,o=t.goalsView,a=t.prefabFactory;return(n=e.call(this)||this)._goalsView=o,n._goalsView.setPrefabFactory(a),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.render=function(e){if(e&&e.data)for(var t,n=o(e.data);!(t=n()).done;){var a=t.value;this._goalsView.addGoal(a)}},a}(e("./Renderer (@tapclap.match-x.engine.systems.render-system)").Renderer);n.GoalsBarRenderer=c,cc._RF.pop()},{"./Renderer (@tapclap.match-x.engine.systems.render-system)":"Renderer (@tapclap.match-x.engine.systems.render-system)"}],"Grid (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"6f462RQjWNae715TuxiHGsj","Grid (@tapclap.match-x.engine.entities)"),n.__esModule=!0,n.Grid=void 0;var o=e("./SizeComponent (@tapclap.match-x.engine.components)"),a=e("./Entity (@tapclap.match-x.engine.entities)"),r=e("./Matrix (@tapclap.match-x.engine.models)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function a(t,n){var o;void 0===t&&(t="grid");var a=void 0===n?{}:n,i=a.rows,c=void 0===i?0:i,s=a.cols,p=void 0===s?0:s;return(o=e.call(this,t)||this)._rows=c,o._cols=p,o._cells=new r.Matrix(c,p),o._inverted=!1,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var c,s,m=a.prototype;return m.clean=function(){for(var e=new Set,t=0;t<this._rows;t++)for(var n=0;n<this._cols;n++)for(var o,a=i(this._cells[t][n].clean());!(o=a()).done;){var r=o.value;e.add(r)}return Array.from(e)},m.isContain=function(e,t){return e>=0&&e<this._rows&&t>=0&&t<this._cols},m.getCell=function(e,t,n){return void 0===n&&(n=!1),n&&this.inverted?this._cells[e][this.cols-1-t]:this._cells[e][t]},m.setEntity=function(e,t,n,a){void 0===a&&(a=!1);var r=e.getEnabledComponent(o.SizeComponent.KEY);if(r){var i=r.cols,c=r.rows;if(this.isContain(t+c-1,n+i-1)){for(var s=[],p=0;p<c;p++)for(var l=0;l<i;l++){var m=this.getCell(t+p,n+l,a);m.setEntity(e),s.push(m)}r.head=this.getCell(t,n,a),r.area=s}}else this.getCell(t,n,a).setEntity(e)},m.forEach=function(e,t){var n=e.begin.clone();do{for(var o=n.clone();this.isContain(o.y,o.x);)t(this._cells[o.y][o.x],o.y,o.x),o.x+=e.dirs[0].x,o.y+=e.dirs[0].y;if(e.dirs[1].isZero())break;n.x+=e.dirs[1].x,n.y+=e.dirs[1].y}while(this.isContain(n.y,n.x))},m.forEachEntities=function(e){for(var t=this,n=0;this.rows>n;n++)for(var o=function(o){var a=t.getCell(n,o);a.entities.forEach(function(t){e(t,a)})},a=0;this.cols>a;a++)o(a)},m.filterEntities=function(e){for(var t=[],n=0;this.rows>n;n++)for(var o=0;this.cols>o;o++)this.getCell(n,o).entities.forEach(function(n){e(n)&&t.push(n)});return t},m.filterCells=function(e){for(var t=[],n=0;this.rows>n;n++)for(var o=0;this.cols>o;o++){var a=this.getCell(n,o);e(this.getCell(n,o))&&t.push(a)}return t},m.findCell=function(e){for(var t=0;this.rows>t;t++)for(var n=0;this.cols>n;n++){var o=this.getCell(t,n);if(e(this.getCell(t,n)))return o}},c=a,(s=[{key:"inverted",get:function(){return this._inverted},set:function(e){this._inverted=e}},{key:"rows",get:function(){return this._rows}},{key:"cols",get:function(){return this._cols}},{key:"cells",get:function(){return this._cells}},{key:"visibleSize",get:function(){for(var e=this.rows,t=0,n=this.cols,o=0,a=0;this.rows>a;a++)for(var r=0;this.cols>r;r++)this.getCell(a,r).isEnabled&&(e=Math.min(e,a),t=Math.max(t,a),n=Math.min(n,r),o=Math.max(o,r));return{rows:t-e+1,cols:o-n+1,rowsOffset:e,colsOffset:n}}}])&&p(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),a}(a.Entity);n.Grid=m,cc._RF.pop()},{"./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","./SizeComponent (@tapclap.match-x.engine.components)":"SizeComponent (@tapclap.match-x.engine.components)"}],"GridChecker (@tapclap.match-x.engine.grid-checkers)":[function(e,t,n){"use strict";cc._RF.push(t,"3b456cTsshfAbpcdhbn+15Q","GridChecker (@tapclap.match-x.engine.grid-checkers)"),n.__esModule=!0,n.GridChecker=void 0;var o=function(){function e(){}return e.prototype.check=function(){},e}();n.GridChecker=o,cc._RF.pop()},{}],"GridComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"2e2f1QMlXVfP6BcPvhmIAYm","GridComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GridComponent=void 0;var o=e("./Component (@tapclap.match-x.engine.components)"),a=e("./Grid (@tapclap.match-x.engine.entities)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n,o,i;function c(){var t;return(t=e.call(this)||this)._grid=new a.Grid,t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),c.prototype.serialize=function(){for(var e=[],t=0;t<this.grid.rows;t++)for(var n=0;n<this.grid.cols;n++)for(var o,a=this.grid.getCell(t,n),i=r(a.entities);!(o=i()).done;){var c=o.value;e.push({row:t,col:n,state:a.state,entity:c.serialize()})}return{rows:this.grid.rows,cols:this.grid.cols,cells:e}},o=c,(i=[{key:"grid",get:function(){return this._grid},set:function(e){this._grid=e}}])&&s(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),c}(o.Component);n.GridComponent=l,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)","./Grid (@tapclap.match-x.engine.entities)":"Grid (@tapclap.match-x.engine.entities)"}],"GridDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b4dfbhLchxVOqW6LH27FBZQ","GridDataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.GridDataLoader=void 0;var o,a=(o=e("merge-options"))&&o.__esModule?o:{default:o},r=e("./DataLoader (@tapclap.match-x.engine.systems.load-system)"),i=e("./Cell (@tapclap.match-x.engine.entities)"),c=e("./Matrix (@tapclap.match-x.engine.models)"),s=e("./EntityPoolComponent (@tapclap.match-x.engine.components)"),p=e("./EntityProbabilityComponent (@tapclap.match-x.engine.components)"),l=e("./EntityCountLimitComponent (@tapclap.match-x.engine.components)"),m=e("./EntityComponentSetComponent (@tapclap.match-x.engine.components)");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t.world,n._entitySystem=t.entitySystem,n._random=t.random,n._gridCheckers=t.gridCheckers||[],n._postHandlers=t.postHandlers||[],n._probabilityFilter=t.probabilityFilter,n._attempts=t.attempts||o.START_ATTEMPTS,n._remainingAttempts=t.attempts||o.START_ATTEMPTS,n._removeShuffleOnStart=t.removeShuffleOnStart||!1,n._debug=t.debug||!1,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var r=o.prototype;return r._fillEntityPool=function(e,t){var n=e.getComponent(s.EntityPoolComponent.KEY);if(n)for(var o,a=u(t);!(o=a()).done;){for(var r,i=[],c=u(o.value);!(r=c()).done;){var p=r.value;i.push(this._entitySystem.createEntity(p,{},!0))}n.pushEntityGroup(i)}},r.load=function(e,t){var n=this,o=this._world.getEnabledComponent(e);o&&function(){var r=o.grid=n._entitySystem.createEntity("grid",{rows:t.rows,cols:t.cols},!0),s=r.getEnabledComponent(p.EntityProbabilityComponent.KEY),d=r.getEnabledComponent(l.EntityCountLimitComponent.KEY),y=r.getEnabledComponent(m.EntityComponentSetComponent.KEY),f=[];t.drop&&t.drop.entities&&f.push.apply(f,t.drop.entities),t.defaultComponents&&y&&(y.set=t.defaultComponents),t.inverted&&(r.inverted=!0);var h=new c.Matrix(r.rows,r.cols);if(t.cells)for(var g,v=u(t.cells);!(g=v()).done;){var _=g.value;h[_.row][_.col]=_}for(var b=0;b<r.rows;b++)for(var C=0;C<r.cols;C++){var w=r.cells[b][C]=n._entitySystem.createEntity("cell",{row:b,col:C},!0),S=h[b][C];S&&S.state===i.Cell.STATE_DISABLED&&(w.state=i.Cell.STATE_DISABLED)}if(t.cells)for(var E,x=u(t.cells);!(E=x()).done;){var A=E.value,O=r.getCell(A.row,A.col,!0);if(O.isEnabled){var R=void 0;switch(!0){case!!A.randomEntities:if("break"===function(){var e=Object.keys(A.randomEntities),t=function(){for(var t,n=u(f);!(t=n()).done;)for(var o,a=t.value,r=u(a);!(o=r()).done;){var i=o.value;if(e.includes(i))return f.splice(f.indexOf(a),1),i}}();if(!t){for(var o={},a=0,r=Object.entries(A.randomEntities);a<r.length;a++){var i=r[a],c=i[0],s=i[1].probability,p=void 0===s?1:s;o[c]=p}t=n._random.getProbability(o)}return t&&(R=n._entitySystem.createEntity(t,A.randomEntities[t])),"break"}())break;case!!A.entity:R=n._entitySystem.createEntity(A.entity.type,A.entity,!0)}if(R&&(r.setEntity(R,O.row,O.col,!0),n._removeShuffleOnStart)){var P=R.getEnabledComponent("shuffle");P&&(P.enable=!1)}}}if(s&&(t.probabilities&&(s.probabilities=(0,a.default)({},t.probabilities)),t.ignoredProbabilitiesOnInitialRandom&&(s.ignoredProbabilitiesOnInitialRandom=[].concat(t.ignoredProbabilitiesOnInitialRandom))),t.limits&&d&&(d.limits=t.limits),t.drop){if(t.drop.cells)for(var k,T=u(t.drop.cells);!(k=T()).done;){var I=k.value,M=r.getCell(I.row,I.col,!0);n._fillEntityPool(M,I.entities)}f&&n._fillEntityPool(r,f)}if(t.fill&&s)for(var j=0;j<r.rows;j++)for(var L=0;L<r.cols;L++){var F=r.getCell(j,L,!0),D=s.probabilities;if(n._probabilityFilter&&(D=n._probabilityFilter.filter(D)),F.isEnabled&&F.isEmpty){var B=n._entitySystem.createRandomEntity(D);F.setEntity(B)}}if(n._gridCheckers.some(function(e){return!e.check(r)})&&--n._remainingAttempts>0)n.load(e,t);else{n._debug&&console.log("Attempts to generate random level:",n._attempts-n._remainingAttempts);for(var G,N=u(n._postHandlers);!(G=N()).done;)G.value.process(r);n._world.setState("load."+e,r)}}()},o}(r.DataLoader);n.GridDataLoader=h,h.START_ATTEMPTS=50,cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)","./EntityComponentSetComponent (@tapclap.match-x.engine.components)":"EntityComponentSetComponent (@tapclap.match-x.engine.components)","./EntityCountLimitComponent (@tapclap.match-x.engine.components)":"EntityCountLimitComponent (@tapclap.match-x.engine.components)","./EntityPoolComponent (@tapclap.match-x.engine.components)":"EntityPoolComponent (@tapclap.match-x.engine.components)","./EntityProbabilityComponent (@tapclap.match-x.engine.components)":"EntityProbabilityComponent (@tapclap.match-x.engine.components)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","merge-options":3}],"GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"ac429pc6ENe9LhXRCqA8XoA","GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.GridDataLoaderPostHandler=void 0;var o=function(){function e(){}return e.prototype.process=function(){},e}();n.GridDataLoaderPostHandler=o,cc._RF.pop()},{}],"GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";cc._RF.push(t,"f62ceYc0LFfeZ5ns/U5uqBN","GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GridEntityCountLimitProbabilityFilter=void 0;var s=e("./DropComponent (@tapclap.match-x.engine.components)"),p=e("./EntityCountLimitComponent (@tapclap.match-x.engine.components)"),l=e("./GridComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n}return a(t,e),t.prototype.filter=function(e,t){var n,o;void 0===t&&(t=null);var a=function(n){var o,a,r=Object.assign({},e),l=n.getEnabledComponentByClass(p.EntityCountLimitComponent),m=[];if(n&&l){for(var u={},d=0;d<n.rows;d++)for(var y=function(e){var o=n.getCell(d,e,!0),a=i(o.entities),r=o.getEnabledComponentByClass(s.DropComponent);if(r&&r.entities.forEach(function(e){return a.push.apply(a,i(e))}),t){var c=t.get(d,e);c&&a.push(c)}a.forEach(function(e){var t=e.type,n=u[t]||0;u[t]=n+1})},f=0;f<n.cols;f++)y(f);try{for(var h=(o=void 0,c(l.limits)),g=h.next();!g.done;g=h.next()){var v=g.value,_=v.entities,b=v.amount;_.reduce(function(e,t){return e+(u[t]||0)},0)>=b&&m.push.apply(m,i(_))}}catch(C){o={error:C}}finally{try{g&&!g.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}return m.forEach(function(e){return delete r[e]}),{value:r}};try{for(var r=c(this._world.getEnabledComponentsByClass(l.GridComponent)),m=r.next();!m.done;m=r.next()){var u=a(m.value.grid);if("object"==typeof u)return u.value}}catch(d){n={error:d}}finally{try{m&&!m.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},t}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.GridEntityCountLimitProbabilityFilter=m,cc._RF.pop()},{"./DropComponent (@tapclap.match-x.engine.components)":"DropComponent (@tapclap.match-x.engine.components)","./EntityCountLimitComponent (@tapclap.match-x.engine.components)":"EntityCountLimitComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"GridEntityRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d615cjFEa9XiIaBSnPQEoc+","GridEntityRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.GridEntityRenderer=void 0;var c=function(e){var t,n;function a(t,n,o){var a;return void 0===o&&(o="entity"),(a=e.call(this,t,n)||this)._key=o,a}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.render=function(e){var t=this,n=function(e){e&&t._gridView.renderEntity(e,t._renderer)};if(e.data instanceof Array)for(var a,r=o(e.data);!(a=r()).done;)n(a.value[this._key]);else n(e.data[this._key])},a}(e("./GridRenderer (@tapclap.match-x.cocos.renderers)").GridRenderer);n.GridEntityRenderer=c,cc._RF.pop()},{"./GridRenderer (@tapclap.match-x.cocos.renderers)":"GridRenderer (@tapclap.match-x.cocos.renderers)"}],"GridRandomEntityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7d25b6jcUNdDLRAnsmGyMdW","GridRandomEntityComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GridRandomEntityComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GridRandomEntityComponent=a,a.KEY="gridRandomEntity",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7dbbaoU2J5Zz6Tuq48QyCET","GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)"),n.__esModule=!0,n.GridReadyAfterLockChecker=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._lockSystem=t.lockSystem,n._combinationSystem=t.combinationSystem,n._turnSystem=t.turnSystem,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.check=function(){return this._lockSystem.process(),!this._combinationSystem.hasCombinations()&&this._turnSystem.computeAvailableTurns()},a}(e("./GridChecker (@tapclap.match-x.engine.grid-checkers)").GridChecker);n.GridReadyAfterLockChecker=a,cc._RF.pop()},{"./GridChecker (@tapclap.match-x.engine.grid-checkers)":"GridChecker (@tapclap.match-x.engine.grid-checkers)"}],"GridRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4fe9c7cczleDqZdME9rug7h","GridRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.GridRenderer=void 0;var a=function(e){var t,n;function a(t,n){var o;return(o=e.call(this)||this)._gridView=t,o._renderer=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.render=function(e){this._gridView.renderGrid(e.data,this._renderer);var t=e.data.getEnabledComponent("render");t&&(t.node=this._gridView.node)},a}(e("./Renderer (@tapclap.match-x.engine.systems.render-system)").Renderer);n.GridRenderer=a,cc._RF.pop()},{"./Renderer (@tapclap.match-x.engine.systems.render-system)":"Renderer (@tapclap.match-x.engine.systems.render-system)"}],"GridViewComponent (@tapclap.match-x.cocos.components.grid)":[function(e,t,n){"use strict";cc._RF.push(t,"129eaRAqCJPRo30XUXdvw/G","GridViewComponent (@tapclap.match-x.cocos.components.grid)"),n.__esModule=!0,n.GridViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C=e("./CellViewComponent (@tapclap.match-x.cocos.components)"),w=e("./ViewComponent (@tapclap.match-x.cocos.components)"),S=e("./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)");function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=x(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function O(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var T=cc._decorator,I=T.ccclass,M=T.property,j=cc.Enum({OnTouchStart:1,OnTouchEnd:2}),L=(o=M({type:j}),a=M(),r=M(cc.Node),i=M(cc.Node),c=M(cc.Float),s=M({type:cc.Float,visible:!0}),p=M([S.GridViewDecoratorComponent]),l=M({type:[cc.Component.EventHandler],visible:!0}),I((u=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return O(t=e.call.apply(e,[this].concat(o))||this,"eventTrigger",d,R(t)),O(t,"draggable",y,R(t)),O(t,"cells",f,R(t)),O(t,"entities",h,R(t)),O(t,"scale",g,R(t)),O(t,"_startMoveBoundary",v,R(t)),O(t,"decorators",_,R(t)),O(t,"_renderHandlers",b,R(t)),t._isDragged=!1,t._startCell=null,t._currentCell=null,t._availableNodeHandler=null,t._grid=null,t._touchMoveProcessed=!1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,P(t,n);var a=o.prototype;return a._processNode=function(e,t,n){n.x=n.width*t.col+n.width/2-e.cols*n.width/2,n.y=-(n.height*t.row+n.height/2-e.rows*n.height/2)},a._renderGrid=function(e,t){for(var n=0;n<e.rows;n++)for(var o=0;o<e.cols;o++){var a=e.cells[n][o];t.render(a);var r=a.getComponent("render").node;this._processNode(e,a,r);for(var i,c=E(a.entities);!(i=c()).done;){var s=i.value;s&&(this.renderEntity(s,t),r.getComponent(C.CellViewComponent).setEntityPosition(s))}this.cells.addChild(r)}},a._executeDecorators=function(){for(var e,t=E(this.decorators);!(e=t()).done;)e.value.render(this._grid)},a._centerLayers=function(e){var t=e.visibleSize,n=this.cells.getBoundingBoxToWorld(),o=n.width/e.cols,a=n.height/e.rows,r=o*t.colsOffset,i=a*t.rowsOffset,c=o*t.cols,s=a*t.rows,p=(n.width-c)/2-r,l=(s-n.height)/2+i,m=cc.v2(p,l);this.cells.setPosition(m),this.entities.setPosition(m)},a._getCellByLocation=function(e,t){for(var n=0;n<e.rows;n++)for(var o=0;o<e.cols;o++){var a=e.cells[n][o];if(a){var r=a.getComponent("render").node;if(r.getBoundingBox().contains(t))return this._availableNodeHandler?this._availableNodeHandler(r)?a:this._currentCell:a}}return this._currentCell},a._onTouchStart=function(e,t,n){for(var a=this,r=0;r<e.rows;r++)for(var i=0;i<e.cols;i++)if(e.cells[r][i].entities.includes(t)){var c=function(){a._touchMoveProcessed=!1;var c=t.getEnabledComponent("size"),s=a.cells.convertToNodeSpaceAR(n.getLocation());if(c&&c.rows>1&&c.cols>1){var p=c.area.find(function(e){return e.getEnabledComponent("render").node.getBoundingBox().contains(s)});p&&(r=p.row,i=p.col)}return a._isDragged=!1,a._startCell=e.cells[r][i],a._currentCell=a._startCell,a.eventTrigger===j.OnTouchStart&&a.node.emit(o.EVENT_INPUT,{grid:e,cell:a._startCell,entity:t},n),{v:!0}}();if("object"==typeof c)return c.v}return!1},a._onTouchMove=function(e,t,n){this._startCell||this._currentCell||this._onTouchStart(e,t,n);var a=this.entities.convertToNodeSpaceAR(n.getLocation()),r=this._getCellByLocation(e,a),i=n.getStartLocation().sub(n.getLocation());if(!(Math.abs(i.x)+Math.abs(i.y)<=this._startMoveBoundary))if(this.draggable)this._isDragged||(this.node.emit(o.EVENT_DRAG_START,{startCell:this._startCell,grid:e,cell:r,entity:t,position:a},n),this._isDragged=!0),this.node.emit(o.EVENT_DRAG,{startCell:this._startCell,grid:e,cell:r,entity:t,position:a},n),this._currentCell!==r&&(this.node.emit(o.EVENT_DRAG_LEAVE,{startCell:this._startCell,grid:e,cell:this._currentCell,entity:t,position:a},n),this.node.emit(o.EVENT_DRAG_ENTER,{startCell:this._startCell,grid:e,cell:r,entity:t,position:a},n),this._currentCell=r);else if(this.eventTrigger===j.OnTouchStart){if(this._touchMoveProcessed)return!0;var c=this.entities.convertToNodeSpaceAR(n.getLocation());if(!t.getComponent("render").node.getBoundingBox().contains(c)){var s=r.getEntity();s&&s.getComponent("render").node.getBoundingBox().contains(c)&&(this._touchMoveProcessed=!0,this.node.emit(o.EVENT_INPUT,{grid:e,cell:r,entity:s,move:!0},n))}}},a._onTouchEnd=function(e,t,n){if(this._startCell&&this._currentCell){var a=this.entities.convertToNodeSpaceAR(n.getLocation());this._isDragged&&this.draggable?(this._isDragged=!1,this.node.emit(o.EVENT_DROP,{position:a,startCell:this._startCell,cell:this._currentCell,grid:e,entity:t},n)):this.eventTrigger===j.OnTouchEnd&&t.getComponent("render").node.getBoundingBox().contains(a)&&this.node.emit(o.EVENT_INPUT,{grid:e,cell:this._startCell,entity:t},n),this._startCell=null,this._currentCell=null}},a.setAvailableNodeHandler=function(e){this._availableNodeHandler=e},a.renderEntity=function(e,t){t.render(e);var n=e.getComponent("render").node;n.zIndex=e.layer,this.entities.getChildByUuid(n.uuid)||(this.entities.addChild(n),n.setScale(this.scale),n.on(cc.Node.EventType.TOUCH_START,this._onTouchStart.bind(this,this._grid,e)),n.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove.bind(this,this._grid,e)),n.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd.bind(this,this._grid,e)),n.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchEnd.bind(this,this._grid,e)))},a.renderGrid=function(e,t){this._grid=e,this._renderGrid(e,t),this._centerLayers(e),this._executeDecorators(),this._renderHandlers.forEach(function(e){return e.emit()});var n=0,o=0,a=0,r=0;this.cells.children.forEach(function(e){if(e.active){var t=e.getBoundingBoxToWorld();n=Math.min(n,e.x-t.width/2),a=Math.min(a,e.y-t.height/2),o=Math.max(o,e.x+t.width/2),r=Math.max(r,e.y+t.height/2)}}),this.node.setContentSize(o-n,r-a)},a.clean=function(){this.entities.removeAllChildren(!0),this.cells.removeAllChildren(!0)},o}(w.ViewComponent),d=k(u.prototype,"eventTrigger",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.OnTouchStart}}),y=k(u.prototype,"draggable",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=k(u.prototype,"cells",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=k(u.prototype,"entities",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=k(u.prototype,"scale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),v=k(u.prototype,"_startMoveBoundary",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.DEFAULT_START_MOVE_BOUNDARY}}),_=k(u.prototype,"decorators",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=k(u.prototype,"_renderHandlers",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=u))||m);n.GridViewComponent=L,L.EVENT_INPUT="input",L.EVENT_DRAG="drag",L.EVENT_DRAG_START="dragstart",L.EVENT_DRAG_ENTER="dragenter",L.EVENT_DRAG_LEAVE="dragleave",L.EVENT_DROP="drop",L.DEFAULT_START_MOVE_BOUNDARY=15,cc._RF.pop()},{"./CellViewComponent (@tapclap.match-x.cocos.components)":"CellViewComponent (@tapclap.match-x.cocos.components)","./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":"GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"3d3eaA9BLBCBaOW22je0LjO","GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)"),n.__esModule=!0,n.GridViewDecoratorComponent=void 0;var o,a=e("./ViewComponent (@tapclap.match-x.cocos.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.render=function(){},o}(a.ViewComponent))||o;n.GridViewDecoratorComponent=i,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"GroundSystem (@tapclap.match-x.engine.systems.ground-system)":[function(e,t,n){"use strict";cc._RF.push(t,"149a2IGfp9SGZ36JO+Cmzee","GroundSystem (@tapclap.match-x.engine.systems.ground-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GroundSystem=void 0;var i=e("./ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=function(e){function t(t){var n=t.world,o=t.strategies,a=e.call(this)||this;return a._world=n,a._strategies=o,a}return a(t,e),t.prototype.process=function(){var e,t,n=this;try{for(var o=r(this._strategies),a=o.next();!a.done;a=o.next()){var s=a.value.process();s&&s.forEach(function(e){var t=e.entity,o=e.cell;return n._world.pushState(c.ExplodeSystem.DO_STATE_KEY,new i.ExplodeStateModel({entity:t,cell:o,remove:!0}))})}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!1},t.KEY="ground",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.GroundSystem=s,cc._RF.pop()},{"./ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)":"ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)":[function(e,t,n){"use strict";cc._RF.push(t,"1a9f08xvwNSB4HHM8zHJO5I","GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.GroundSystemStrategy=void 0;n.GroundSystemStrategy=function(){},cc._RF.pop()},{}],"GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"8d02d3eVvtTQZSaJHtxylfh","GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)"),n.__esModule=!0,n.GroupAffectNeighborStrategy=void 0;var o=e("./GroupComponent (@tapclap.match-x.engine.components)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.compare=function(e,t,n){var a,r,i,c,s,p=null==(a=n.getComponent(e))?void 0:null==(r=a.strategies)?void 0:null==(i=r.group)?void 0:i.groups;if(p&&(0===p.length||p.includes(null==(c=t.getComponent("group"))?void 0:c.id)))return!0;var l=null==(s=n.getEnabledComponentByClass(o.GroupComponent))?void 0:s.id;return l>0?t.getComponent("group").id===l:void 0},r}(e("./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)").AffectNeighborStrategy);n.GroupAffectNeighborStrategy=r,cc._RF.pop()},{"./AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)":"AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"121a6kki6lXmKfrMiunYKEg","GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.GroupAnimation=void 0;var r=function(e){var t,n,r,i;function c(t,n){var o;return void 0===t&&(t=[]),void 0===n&&(n=!1),(o=e.call(this,t)||this)._resolveAny=n,o}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.run=function(){var t=this;return Promise.all(this._animations.map(function(e){return t._resolveAny?e.run().then(t._resolve):e.run()})).then(this._resolve),e.prototype.run.call(this)},r=c,(i=[{key:"settled",get:function(){return Promise.all(this._animations.map(function(e){return e.settled}))}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)").CompositeAnimation);n.GroupAnimation=r,cc._RF.pop()},{"./CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)":"CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"GroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f5941KEbi1Zt527nMdkdW7N","GroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GroupComponent=void 0;var r=function(e){function t(t){var n=t.id,o=void 0===n?0:n,a=e.call(this)||this;return a._id=o,a}return a(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._id=0},t.KEY="group",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GroupComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GroupEntityMapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d35970uCI1UQo3bJXzYgXiA","GroupEntityMapComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.GroupEntityMapComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=t.map,a=void 0===o?{}:o;return(n=e.call(this)||this).map=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.GroupEntityMapComponent=a,a.KEY="groupEntityMap",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"3bb36NG+1RY05i5HNAV3QKA","GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GroupEntityRenderDecorator=void 0;var r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./GroupEntityViewComponent (@tapclap.match-x.cocos.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.decorate=function(e,t,n){var o=t.getComponentByClass(r.GroupComponent),a=n.getComponent(i.GroupEntityViewComponent);o&&a&&a.setGroup(o.id)},t}(e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)").EntityRenderDecorator);n.GroupEntityRenderDecorator=c,cc._RF.pop()},{"./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupEntityViewComponent (@tapclap.match-x.cocos.components)":"GroupEntityViewComponent (@tapclap.match-x.cocos.components)"}],"GroupEntityViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0d3456MJrRf3I/+fWEAtRvQ","GroupEntityViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.GroupEntityViewComponent=void 0;var o,a=e("./ViewComponent (@tapclap.match-x.cocos.components)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=(0,cc._decorator.ccclass)(o=function(e){var t,n,o,a;function c(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._currentGroup=0,t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),c.prototype.setGroup=function(){throw new Error("Method not implemented")},o=c,(a=[{key:"currentGroup",get:function(){return this._currentGroup}}])&&r(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),c}(a.ViewComponent))||o;n.GroupEntityViewComponent=c,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"25313xE5Uhc2KssDJ16Mkhv","GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.GroupExplodeRetriever=void 0;var i=function(e){function t(t){var n=t.random,o=r(t,["random"]),a=e.call(this,o)||this;return a._random=n||null,a}return a(t,e),t.prototype.retrieve=function(e){var t=this._getGroup(e);if(this.cell&&t){for(var n=[],o=0;o<e.rows;o++)for(var a=0;a<e.rows;a++)if(e.isContain(o,a)){var r=e.getCell(o,a),i=r.getEntity();if(i){var c=i.getEnabledComponent("group");c&&c.id===t&&n.push(r)}}return[this.filter(n)]}return[]},t.prototype._getGroup=function(e){if(this.cell){var t=this.cell.getEntity().getEnabledComponent("group");if(t&&0!==t.id)return t.id;if(this._random){for(var n=new Set,o=0;o<e.rows;o++)for(var a=0;a<e.rows;a++)if(e.isContain(o,a)){var r=e.getCell(o,a).getEntity();if(r){var i=r.getEnabledComponent("group");i&&0!==i.id&&n.add(i.id)}}return this._random.shuffle(Array.from(n.values())).pop()}}return null},t.KEY="group",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.GroupExplodeRetriever=i,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"GroupRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"411d7jqc31f5ZPujvAEZRQA","GroupRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.GroupRetriever=void 0;var a=function(e){var t,n;function a(t,n){var o,a=(void 0===t?{}:t).cell,r=void 0===a?null:a,i=void 0===n?{}:n,c=i.random,s=i.allowRandom,p=void 0!==s&&s;return(o=e.call(this)||this)._cell=r,o._allowRandom=p,o._random=c,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.retrieve=function(e){var t=this._getGroup(e);if(this._cell&&t){for(var n=[],o=0;o<e.rows;o++)for(var a=0;a<e.rows;a++)if(e.isContain(o,a)){var r=e.getCell(o,a),i=r.getEntity();if(i){var c=i.getEnabledComponent("group");c&&c.id===t&&n.push(r)}}return[n]}return[]},r._getGroup=function(e){if(this._cell){var t=this._cell.getEntity().getEnabledComponent("group");if(t&&0!==t.id)return t.id;if(this._random){for(var n=new Set,o=0;o<e.rows;o++)for(var a=0;a<e.rows;a++)if(e.isContain(o,a)){var r=e.getCell(o,a).getEntity();if(r){var i=r.getEnabledComponent("group");i&&0!==i.id&&n.add(i.id)}}return this._random.shuffle(Array.from(n.values())).pop()}}return null},a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.GroupRetriever=a,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)":[function(e,t,n){"use strict";cc._RF.push(t,"cacf2sI+F9dYpDuvjIJ4VA3","GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},r=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GrowthBook=void 0;var c=e("./util (@tapclap.sdk-x.remote-config.growthbook.sdk)"),s=e("./mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)"),p="undefined"!=typeof window&&"undefined"!=typeof document,l=function(){function e(e){void 0===e&&(e={}),this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this.subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this.context=e}return e.prototype.render=function(){this._renderer&&this._renderer()},e.prototype.setFeatures=function(e){this.context.features=e,this.render()},e.prototype.setAttributes=function(e){this.context.attributes=e,this.render()},e.prototype.setAttributeOverrides=function(e){this._attributeOverrides=e,this.render()},e.prototype.setForcedVariations=function(e){this.context.forcedVariations=e||{},this.render()},e.prototype.setForcedFeatures=function(e){this._forcedFeatureValues=e,this.render()},e.prototype.getAttributes=function(){return o(o({},this.context.attributes),this._attributeOverrides)},e.prototype.getFeatures=function(){return this.context.features||{}},e.prototype.subscribe=function(e){var t=this;return this.subscriptions.add(e),function(){t.subscriptions.delete(e)}},e.prototype.getAllResults=function(){return new Map(this.assigned)},e.prototype.destroy=function(){this.subscriptions.clear(),this.assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),p&&window._growthbook===this&&delete window._growthbook},e.prototype.setRenderer=function(e){this._renderer=e},e.prototype.forceVariation=function(e,t){this.context.forcedVariations=this.context.forcedVariations||{},this.context.forcedVariations[e]=t,this.render()},e.prototype.run=function(e){var t=this._run(e),n=e.key,o=this.assigned.get(n);return o&&o.result.inExperiment===t.inExperiment&&o.result.variationId===t.variationId||(this.assigned.set(n,{experiment:e,result:t}),this.subscriptions.forEach(function(n){try{n(e,t)}catch(o){console.error(o)}})),t},e.prototype.trackFeatureUsage=function(e,t){var n=this;if("override"!==t.source){var o=JSON.stringify(t.value);if(this._trackedFeatures[e]!==o){if(this._trackedFeatures[e]=o,this.context.onFeatureUsage)try{this.context.onFeatureUsage(e,t)}catch(a){}p&&window.fetch&&(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout(function(){n._rtTimer=0;var e=r(n._rtQueue);n._rtQueue=[],n.context.realtimeKey&&window.fetch("https://rt.growthbook.io/?key="+n.context.realtimeKey+"&events="+encodeURIComponent(JSON.stringify(e)),{cache:"no-cache",mode:"no-cors"}).catch(function(){})},this.context.realtimeInterval||2e3)))}}},e.prototype.getFeatureResult=function(e,t,n,o,a,r){void 0===a&&(a=null),void 0===r&&(r=null);var i={value:t,on:!!t,off:!t,source:n,ruleId:o||""};return a&&(i.experiment=a),r&&(i.experimentResult=r),this.trackFeatureUsage(e,i),i},e.prototype.isOn=function(e){return this.evalFeature(e).on},e.prototype.isOff=function(e){return this.evalFeature(e).off},e.prototype.getFeatureValue=function(e,t){var n;return null!==(n=this.evalFeature(e).value)&&void 0!==n?n:t},e.prototype.feature=function(e){return this.evalFeature(e)},e.prototype.evalFeature=function(e){var t,n,o;if(this._forcedFeatureValues.has(e))return this.getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this.context.features||!this.context.features[e])return this.getFeatureResult(e,null,"unknownFeature");var a=this.context.features[e];if(a.rules)try{for(var r=i(a.rules),s=r.next();!s.done;s=r.next()){var p=s.value;if(!p.condition||this.conditionPasses(p.condition)){if("force"in p){if("coverage"in p){var l=this.getHashAttribute(p.hashAttribute).hashValue;if(!l)continue;if(c.hash(l+e)>p.coverage)continue}return this.getFeatureResult(e,p.force,"force",p.id)}if(p.variations){var m={variations:p.variations,key:p.key||e};"coverage"in p&&(m.coverage=p.coverage),p.weights&&(m.weights=p.weights),p.hashAttribute&&(m.hashAttribute=p.hashAttribute),p.namespace&&(m.namespace=p.namespace);var u=this.run(m);if(u.inExperiment)return this.getFeatureResult(e,u.value,"experiment",p.id,m,u)}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this.getFeatureResult(e,null!==(o=a.defaultValue)&&void 0!==o?o:null,"defaultValue")},e.prototype.conditionPasses=function(e){return s.evalCondition(this.getAttributes(),e)},e.prototype._run=function(e){var t=e.key,n=e.variations.length;if(n<2)return this.getResult(e);if(!1===this.context.enabled)return this.getResult(e);e=this.mergeOverrides(e);var o=c.getQueryStringOverride(t,this.getContextUrl(),n);if(null!==o)return this.getResult(e,o);if(this.context.forcedVariations&&t in this.context.forcedVariations){var a=this.context.forcedVariations[t];return this.getResult(e,a)}if("draft"===e.status||!1===e.active)return this.getResult(e);var r=this.getHashAttribute(e.hashAttribute).hashValue;if(!r)return this.getResult(e);if(e.namespace&&!c.inNamespace(r,e.namespace))return this.getResult(e);if(e.include&&!c.isIncluded(e.include))return this.getResult(e);if(e.condition&&!this.conditionPasses(e.condition))return this.getResult(e);if(e.groups&&!this.hasGroupOverlap(e.groups))return this.getResult(e);if(e.url&&!this.urlIsValid(e.url))return this.getResult(e);var i=c.getBucketRanges(n,e.coverage||1,e.weights),s=c.hash(r+t),p=c.chooseVariation(s,i);if(p<0)return this.getResult(e);if("force"in e)return this.getResult(e,e.force);if(this.context.qaMode)return this.getResult(e);if("stopped"===e.status)return this.getResult(e);var l=this.getResult(e,p,!0);return this.track(e,l),l},e.prototype.log=function(e,t){this.debug&&(this.context.log?this.context.log(e,t):console.log(e,t))},e.prototype.track=function(e,t){if(this.context.trackingCallback){var n=e.key,o=t.hashAttribute+t.hashValue+n+t.variationId;if(!this._trackedExperiments.has(o)){this._trackedExperiments.add(o);try{this.context.trackingCallback(e,t)}catch(a){console.error(a)}}}},e.prototype.mergeOverrides=function(e){var t=e.key,n=this.context.overrides;return n&&n[t]&&"string"==typeof(e=Object.assign({},e,n[t])).url&&(e.url=c.getUrlRegExp(e.url)),e},e.prototype.getHashAttribute=function(e){var t=e||"id",n="";return this._attributeOverrides[t]?n=this._attributeOverrides[t]:this.context.attributes?n=this.context.attributes[t]||"":this.context.user&&(n=this.context.user[t]||""),{hashAttribute:t,hashValue:n}},e.prototype.getResult=function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=!1);var o=!0;(t<0||t>=e.variations.length)&&(t=0,o=!1);var a=this.getHashAttribute(e.hashAttribute),r=a.hashAttribute,i=a.hashValue;return{inExperiment:o,hashUsed:n,variationId:t,value:e.variations[t],hashAttribute:r,hashValue:i}},e.prototype.getContextUrl=function(){return this.context.url||(p?window.location.href:"")},e.prototype.urlIsValid=function(e){var t=this.getContextUrl();if(!t)return!1;var n=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!e.test(t)||!!e.test(n)},e.prototype.hasGroupOverlap=function(e){for(var t=this.context.groups||{},n=0;n<e.length;n++)if(t[e[n]])return!0;return!1},e}();n.GrowthBook=l,cc._RF.pop()},{"./mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)":"mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)","./util (@tapclap.sdk-x.remote-config.growthbook.sdk)":"util (@tapclap.sdk-x.remote-config.growthbook.sdk)"}],"GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)":[function(e,t,n){"use strict";cc._RF.push(t,"41dbaTa6a5dXYgWi2+3xosC","GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)"),Object.defineProperty(n,"__esModule",{value:!0}),n.GrowthbookRemoteConfig=void 0;var o=e("./GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)"),a=function(){function e(t){var n,a=this;this._httpClient=t.httpClient,this._syncService=t.syncService,this._apiUrl=t.apiUrl,this._apiKey=t.apiKey,this._syncTypeKey=t.syncTypeKey||e.SYNC_KEY,this._userAttributesResolver=t.userAttributesResolver,this._analyticsService=t.analyticsService,this._analyticsEventOptions=null!==(n=t.analyticsEventOptions)&&void 0!==n?n:{event:"experiments",map:{experimentId:"experimentId",variationId:"variationId"}},this._growthbookSDK=new o.GrowthBook({trackingCallback:function(e,t){var n,o,r,i,c,s,p;a._analyticsService&&(null===(o=a._analyticsEventOptions)||void 0===o?void 0:o.event)&&(null===(r=a._analyticsEventOptions)||void 0===r?void 0:r.map)&&(null===(c=null===(i=a._analyticsEventOptions)||void 0===i?void 0:i.map)||void 0===c?void 0:c.experimentId)&&(null===(p=null===(s=a._analyticsEventOptions)||void 0===s?void 0:s.map)||void 0===p?void 0:p.variationId)&&a._analyticsService.logEvent(a._analyticsEventOptions.event,((n={})[a._analyticsEventOptions.map.experimentId]=e.key,n[a._analyticsEventOptions.map.variationId]=t.variationId,n))}})}return e.prototype.init=function(){var e=this;return this._getData().then(function(t){return e._syncData({type:e._syncTypeKey,features:t}).then(function(){return t})}).catch(function(){return e._getFallbackData()}).then(function(t){return e._growthbookSDK.setFeatures(t)}).catch(function(){throw new Error("GrowthbookRemoteConfig cannot get list of features")}).then(function(){e._userAttributesResolver&&e._growthbookSDK.setAttributes(e._userAttributesResolver.getAttributes())})},e.prototype.fetch=function(){return Promise.resolve()},e.prototype.getBoolean=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:Boolean(t._getValue(e))}})},e.prototype.getInteger=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:Number(t._getValue(e))}})},e.prototype.getDouble=function(e){return this.getInteger(e)},e.prototype.getString=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:String(t._getValue(e))}})},e.prototype.getJSON=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:t._getValue(e)}})},e.prototype.setApiKey=function(e){this._apiKey=e},e.prototype.setApiUrl=function(e){this._apiUrl=e},e.prototype._getData=function(){if(!this._apiUrl||!this._apiKey)throw new Error("growthbookApiKey or growthbookApiUrl not defined in remoteConfig");return this._httpClient.request(this._apiUrl+"/api/features/"+this._apiKey).then(function(e){return e.features})},e.prototype._getFallbackData=function(){return this._syncService&&this._syncTypeKey?this._syncService.getData(this._syncTypeKey).then(function(e){return e||{}}):Promise.resolve({})},e.prototype._syncData=function(e){return this._syncService?this._syncService.updateData(e):Promise.resolve()},e.prototype._getValue=function(e){var t=this._growthbookSDK.getFeatureValue(e,void 0);if(void 0===t)throw new Error("Value for '"+e+"' not defined");return t},e.SYNC_KEY="growthbook",e}();n.GrowthbookRemoteConfig=a,cc._RF.pop()},{"./GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)":"GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)"}],"GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"a5c01qnoLJVqIlMaqDU3Dpb","GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GumAnimationBuilder=void 0;var i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=function(e){function t(t){var n=t.strategyKey,o=t.duration,a=void 0===o?.1:o,r=e.call(this)||this;return r._strategyKey=n,r._duration=a,r}return a(t,e),t.prototype.build=function(e){var t,n,o,a=[];if((null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.length)>0){var c=function(e){if(e.strategyKey===y._strategyKey){var t=new d.GroupAnimation([new p.ChainAnimation([e.initiatorEntity?new m.EventListenAnimation(e.initiatorEntity,e.initiatorEvent):new l.DummyAnimation,new u.FunctionAnimation(function(){var t,n=null!==(t=e.fromCell)&&void 0!==t?t:e.cell,o=e.entity.getEnabledComponentByClass(s.RenderComponent).node,a=n.getEnabledComponentByClass(s.RenderComponent).node,r=o.zIndex;o.setSiblingIndex(o.parent.children.findIndex(function(e){return e.zIndex===r})),o.setPosition(a.getPosition())}),new d.GroupAnimation([y._createShowAnimation(e),new l.DummyAnimation],!0)]),new l.DummyAnimation],!!e.initiatorEntity);a.push(new i.AnimationData(e.entity,t))}},y=this;try{for(var f=r(e.data),h=f.next();!h.done;h=f.next())c(h.value)}catch(g){t={error:g}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}}return[a]},t.prototype._createShowAnimation=function(e){return new c.AnimationFactory(e.entity).createAnimation("show")},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.GumAnimationBuilder=y,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"21dbb3THAdQC4kHqwN7krco","GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.GumGoalAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./GoalComponent (@tapclap.match-x.engine.components)"),l=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),u=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=function(e){function t(t){var n=t.goalsView,o=t.audioEffectsPlayer,a=(t.resolveDelay,e.call(this)||this);return a._goalsView=n,a._audioEffectsPlayer=o,a}return a(t,e),t.prototype.build=function(e){var t,n,o,a,i,d=this,y=(null==e?void 0:e.data.flat())||[],f=[],h=function(e,t){var n=null===(o=e.getEnabledComponentByClass(c.RenderComponent))||void 0===o?void 0:o.node,r=null===(a=t.getEnabledComponentByClass(c.RenderComponent))||void 0===a?void 0:a.node;if(n&&r){var y=e.getEnabledComponentByClass(c.RenderComponent).node.getPosition();r.setPosition(y);var h=t.getEnabledComponentByClass(p.GoalComponent);if(h&&(null===(i=null==h?void 0:h.goal)||void 0===i?void 0:i.collector)){var g=h.goal,v=h.diff,_=h.counter,b=h.goal.collector.getEnabledComponentByClass(c.RenderComponent);b&&f.push(new s.AnimationData(t,new u.ChainAnimation([new l.FunctionAnimation(function(){var e,t=(null===(e=null==b?void 0:b.node)||void 0===e?void 0:e.getComponent(m.GoalCollectionViewComponent))||d._goalsView;if(t){var n=t.getGoalView(g);n.setDiff(v),g.isCompleted&&_===g.counter&&(n.isCompleted()||(n.showCompletedIcon(),d._audioEffectsPlayer.play("taskCompleted")))}})])))}}};try{for(var g=r(y),v=g.next();!v.done;v=g.next()){var _=v.value;h(_.cell,_.entity)}}catch(b){t={error:b}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return[f]},t}(i.GameActionBuilder);n.GumGoalAnimationBuilder=d,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"HasAdActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"92e09Qyv/xf7K3YcISaPlsD","HasAdActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HasAdActionCondition=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._adService=t.adService,n}return a(t,e),t.prototype.check=function(){return Promise.resolve(this._adService.hasAd())},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.HasAdActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"HasAdOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a27ef+VAj5FnpN/PTtmeUEe","HasAdOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.HasAdOfferState=void 0;var a=function(e){var t,n;function a(t){var n,o=t.adService;return(n=e.call(this)||this)._adService=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.resolve=function(){return this._adService.isAvailable()&&this._adService.hasAd()},a}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.HasAdOfferState=a,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"25152vBsOpfWZZnEvcLJTtv","HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),n.__esModule=!0,n.HasNotAttemptsActionCondition=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._attempts=t.moduleResolvers.attempts.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.check=function(){return!this._attempts.hasAttempt()},a}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.HasNotAttemptsActionCondition=a,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"3678eQjh5JCJK0SyTAYizcI","HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.HeaderWindowLayoutComponent=void 0;var o,a,r,i,c,s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),p=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d,y,f,h,g=cc._decorator,v=g.ccclass,_=g.menu,b=g.property,C=(o=_("UI-Kit/WindowManager/HeaderWindowLayoutComponent"),a=b({type:cc.Label,visible:!0}),v(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_title",c,m(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var a=o.prototype;return a.initialize=function(t){void 0===t&&(t={}),e.prototype.initialize.call(this,t),this.setTitle(t.title||"")},a.setTitle=function(e,t){void 0===t&&(t={});var n=this._title.getComponent(p.I18NLabel);n?n.setString(e,t):this._title.string=e},o}(s.WindowLayoutComponent),d=i.prototype,y=[a],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),void 0===(h=y.slice().reverse().reduce(function(e,t){return t(d,"_title",e)||e},h)).initializer&&(Object.defineProperty(d,"_title",h),h=null),c=h,r=i))||r)||r);n.HeaderWindowLayoutComponent=C,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"97903zPeSdYFZ6F/t8RXMMU","HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.HealthAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./HealthViewComponent (scripts.common.components)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),l=function(e){function t(t){var n=(void 0===t?{}:t).entityTypes,o=void 0===n?[]:n,a=e.call(this)||this;return a._entityTypes=[],a._entityTypes=o,a}return a(t,e),t.prototype.build=function(e){var t=this,n=[];return e.data&&n.push({animation:new s.FunctionAnimation(function(){var n,o,a=t._entityTypes.length&&e.data.filter(function(e){var n=e.entity;return t._entityTypes.includes(n.type)})||e.data;try{for(var i=r(a),s=i.next();!s.done;s=i.next()){var l=s.value,m=l.entity,u=l.value,d=m.getEnabledComponentByClass(p.RenderComponent).node;if(d){var y=d.getComponent(c.HealthViewComponent);y&&y.setValue(Math.max(1,u))}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}})}),[n]},t}(i.GameActionBuilder);n.HealthAnimationBuilder=l,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./HealthViewComponent (scripts.common.components)":"HealthViewComponent (scripts.common.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"7b964EXCm1QJam0/Ac1J6jS","HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)"),n.__esModule=!0,n.HealthAnimationResolver=void 0;var o=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),a=e("./HealthComponent (@tapclap.match-x.engine.components)");function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function c(t){var n,a;return(a=e.call(this,t)||this)._defaultTemplate="$key-$current",a._templates=((n={})[o.AnimationResolver.TYPE_EXPLODE]="$key-$prev-$current",n),a._getters={current:a._getIndex.bind(r(a)),prev:a._getPrevIndex.bind(r(a))},a}n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=c.prototype;return s._getIndex=function(e){return e.getEnabledComponent(a.HealthComponent.KEY).getValue()},s._getPrevIndex=function(e){return e.getEnabledComponent(a.HealthComponent.KEY).getPrevValue()},c}(o.AnimationResolver);n.HealthAnimationResolver=c,cc._RF.pop()},{"./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)"}],"HealthComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9902edsVF1R67uOASaLZwbB","HealthComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.HealthComponent=void 0;var r=function(e){var t,n;function r(t){var n;return void 0===t&&(t={value:1}),(n=e.call(this,t)||this)._prevValue=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.setValue=function(t){this._prevValue=this.getValue(),e.prototype.setValue.call(this,t)},s.getPrevValue=function(){return this._prevValue},i=r,(c=[{key:"isDeath",get:function(){return this.getValue()<=this.getMinValue()}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./ValueComponent (@tapclap.match-x.engine.components)").ValueComponent);n.HealthComponent=r,r.KEY="health",cc._RF.pop()},{"./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)"}],"HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"47251uBnxVaW6SXiLEUdIH+","HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)"),n.__esModule=!0,n.HealthRenderDecorator=void 0;var o=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),a=e("./HealthComponent (@tapclap.match-x.engine.components)"),r=e("./HealthViewComponent (scripts.common.components)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.decorate=function(e,t,n){var o=n.getComponent(r.HealthViewComponent),i=t.getEnabledComponent(a.HealthComponent.KEY);i&&o&&o.setValue(i.getValue())},o}(o.EntityRenderDecorator);n.HealthRenderDecorator=c,c.KEY="health",cc._RF.pop()},{"./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./HealthViewComponent (scripts.common.components)":"HealthViewComponent (scripts.common.components)"}],"HealthSystem (@tapclap.match-x.engine.systems.health-system)":[function(e,t,n){"use strict";cc._RF.push(t,"7a57b9iChRRy72Zut6P4o/j","HealthSystem (@tapclap.match-x.engine.systems.health-system)"),n.__esModule=!0,n.HealthSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./HealthComponent (@tapclap.match-x.engine.components)"),r=e("./HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)"),i=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.process=function(){for(var e,t=this._world.getEnabledComponent("tiles").grid,n=(null==(e=this._world.getState(i.ExplodeSystem.STATE))?void 0:e.data.flat())||[],s=new Set(n.map(function(e){return e.entity})),p=0;p<t.rows;p++)for(var l=0;l<t.cols;l++)for(var m,u=t.getCell(p,l),d=c(u.entities);!(m=d()).done;){var y=m.value,f=y.getEnabledComponentByClass(a.HealthComponent);f&&null!==f.getPrevValue()&&f.getValue()!==f.getPrevValue()&&this._world.pushState(o.STATE,new r.HealthSystemStateModel({cell:u,entity:y,value:f.getValue(),prevValue:f.getPrevValue(),isExploded:s.has(y)}))}for(var h,g=c(n);!(h=g()).done;){var v=h.value,_=v.cell,b=v.entity,C=v.remove,w=b.getEnabledComponentByClass(a.HealthComponent);C&&w&&this._world.pushState(o.STATE,new r.HealthSystemStateModel({cell:_,entity:b,value:w.getValue(),prevValue:w.getPrevValue(),isExploded:!0}))}},o}(o.PipelineProcessSystem);n.HealthSystem=m,m.KEY="healthSystem",m.STATE="health",cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)":"HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e4f83GSC29UZK6M3bbrE1Bm","HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)"),n.__esModule=!0,n.HealthSystemStateModel=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this,t)||this)._prevValue=t.prevValue,n._value=t.value,n._isExploded=t.isExploded,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"value",get:function(){return this._value}},{key:"prevValue",get:function(){return this._prevValue}},{key:"isExploded",get:function(){return this._isExploded}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./StateModel (@tapclap.match-x.engine.components.state)").StateModel);n.HealthSystemStateModel=r,cc._RF.pop()},{"./StateModel (@tapclap.match-x.engine.components.state)":"StateModel (@tapclap.match-x.engine.components.state)"}],"HealthViewComponent (scripts.common.components)":[function(e,t,n){"use strict";cc._RF.push(t,"42922QEnmNZs7obRGRfQW4l","HealthViewComponent (scripts.common.components)"),n.__esModule=!0,n.HealthViewComponent=void 0;var o,a=e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o}(a.StepCounterViewComponent))||o;n.HealthViewComponent=i,cc._RF.pop()},{"./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)"}],"HeartClipIdleViewComponent (scripts.common.match3-game.components.entities.heart)":[function(e,t,n){"use strict";cc._RF.push(t,"8f712vZCfxQ47B5mNlSNizb","HeartClipIdleViewComponent (scripts.common.match3-game.components.entities.heart)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.HeartClipIdleViewComponent=void 0;var i=e("./GroupEntityViewComponent (@tapclap.match-x.cocos.components)"),c=e("./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=cc._decorator,l=p.ccclass,m=p.menu,u=p.property,d=function(){function e(){this.idleClip=null,this.groupKey=""}return r([u(cc.AnimationClip)],e.prototype,"idleClip",void 0),r([u(cc.String)],e.prototype,"groupKey",void 0),r([l("HeartClipIdleViewComponentConfig")],e)}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationConfig=[],t._animationClip=null,t}return a(t,e),t.prototype.run=function(e){var t,n=null===(t=e.getComponentByClass(s.RenderComponent))||void 0===t?void 0:t.node.getComponent(i.GroupEntityViewComponent).currentGroup;if(n>0){var o=this._animationConfig.find(function(e){var t=e.groupKey;return Number(t)===Number(n)}).idleClip;this.playIdleAnimation(o,e)}},r([u({type:[d],visible:!0})],t.prototype,"_animationConfig",void 0),r([u({type:cc.AnimationClip,visible:!1,override:!0})],t.prototype,"_animationClip",void 0),r([l,m("EntityViews/Heart/HeartClipIdleViewComponent")],t)}(c.ClipIdleViewComponent);n.HeartClipIdleViewComponent=y,cc._RF.pop()},{"./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":"ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","./GroupEntityViewComponent (@tapclap.match-x.cocos.components)":"GroupEntityViewComponent (@tapclap.match-x.cocos.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"HeartGroupEntityViewComponent (scripts.common.match3-game.components.entities.heart)":[function(e,t,n){"use strict";cc._RF.push(t,"ef24ajkA+NVjKsEtNO1Y0ex","HeartGroupEntityViewComponent (scripts.common.match3-game.components.entities.heart)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.HeartGroupEntityViewComponent=void 0;var i=e("./GroupEntityViewComponent (@tapclap.match-x.cocos.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.menu,m=function(){function e(){this.changeStartClip=null,this.changeEndClip=null,this.groupKey=""}return r([p(cc.AnimationClip)],e.prototype,"changeStartClip",void 0),r([p(cc.AnimationClip)],e.prototype,"changeEndClip",void 0),r([p(cc.String)],e.prototype,"groupKey",void 0),r([s("HeartConfigKeyProperty")],e)}(),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t._skinGroupMap=[],t._changeStartAnimation=null,t}return a(t,e),t.prototype.setGroup=function(e){var t=this;return new Promise(function(n){var o=t._skinGroupMap.find(function(t){var n=t.groupKey;return Number(n)===Number(e)});if(o&&t.target){var a=o.changeStartClip,r=o.changeEndClip,i=t.target.getClips();i.includes(r)||t.target.addClip(r),i.includes(a)||t.target.addClip(a),t._changeStartAnimation||(t._changeStartAnimation=a),t.target.play(t._changeStartAnimation.name),t.target.once(cc.Animation.EventType.FINISHED,function(){t.target.play(r.name)}),t._changeStartAnimation=a;var c=t._changeStartAnimation.duration/t._changeStartAnimation.speed+r.duration/r.speed;t.scheduleOnce(function(){t._currentGroup=e,n()},c)}})},r([p(cc.Animation)],t.prototype,"target",void 0),r([p({type:[m],visible:!0})],t.prototype,"_skinGroupMap",void 0),r([s,l("EntityViews/Heart/HeartGroupEntityViewComponent")],t)}(i.GroupEntityViewComponent);n.HeartGroupEntityViewComponent=u,cc._RF.pop()},{"./GroupEntityViewComponent (@tapclap.match-x.cocos.components)":"GroupEntityViewComponent (@tapclap.match-x.cocos.components)"}],"HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"4f687HTBYteJ7Q8DXhlJWHL","HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.HelpAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n,o=t.component,a=t.factory,r=t.delay,i=void 0===r?5:r;return(n=e.call(this)||this)._component=o,n._factory=a,n._delay=i,n._animation=null,n._scheduleFunc=null,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i._scheduleHelpAnimation=function(e,t){var n=this;void 0===t&&(t=!0),this._scheduleFunc&&this._component.unschedule(this._scheduleFunc),this._scheduleFunc=function(){n._animation=n._factory.createHelpAnimation(e),n._animation.run()},this._component.scheduleOnce(this._scheduleFunc,t?this._delay:0)},i._unscheduleHelpAnimation=function(){this._scheduleFunc&&this._component.unschedule(this._scheduleFunc),this._animation&&(this._animation.stop(),this._animation=null)},i.build=function(e){var t=this,n=[];if(e&&e.data){this._unscheduleHelpAnimation();for(var o,i=function(){var e=o.value,r=e.help,i=e.delay,c=e.turn;r&&n.push({animation:new a.FunctionAnimation(function(){t._scheduleHelpAnimation(c,i)})})},c=r(e.data);!(o=c()).done;)i()}return[n]},o}(o.GameActionBuilder);n.HelpAnimationBuilder=p,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"HelpAnimationFactory (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"f39a2IiLQ5UIrJvosBjPCtz","HelpAnimationFactory (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.HelpAnimationFactory=void 0;var o=e("./SwapHelpAnimation (@tapclap.match-x.cocos.animations)"),a=function(){function e(e){void 0===e&&(e={}),this._options=e}return e.prototype.createHelpAnimation=function(e){switch(e.type){case"swap":return new o.SwapHelpAnimation(e,this._options[e.type])}throw new Error("Not found animation by type: "+e.type)},e}();n.HelpAnimationFactory=a,cc._RF.pop()},{"./SwapHelpAnimation (@tapclap.match-x.cocos.animations)":"SwapHelpAnimation (@tapclap.match-x.cocos.animations)"}],"HelpStrategy (@tapclap.match-x.engine.systems.help-system)":[function(e,t,n){"use strict";cc._RF.push(t,"58b8aMUrWpXPamqxBnUJbNf","HelpStrategy (@tapclap.match-x.engine.systems.help-system)"),n.__esModule=!0,n.HelpStrategy=void 0;var o=function(){function e(){}var t=e.prototype;return t.hasHelp=function(){return!0},t.hasDelay=function(){return!0},e}();n.HelpStrategy=o,cc._RF.pop()},{}],"HelpSystem (@tapclap.match-x.engine.systems.help-system)":[function(e,t,n){"use strict";cc._RF.push(t,"e4989CMoExW66L4aXnUkL4F","HelpSystem (@tapclap.match-x.engine.systems.help-system)"),n.__esModule=!0,n.HelpSystem=void 0;var o=e("./GridComponent (@tapclap.match-x.engine.components)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t,n){var o;return void 0===n&&(n=null),(o=e.call(this)||this)._world=t,o._helpStrategy=n,o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var i=r.prototype;return i._hasHelpDelay=function(){return!this._helpStrategy||this._helpStrategy.hasDelay()},i._setHelpTurnState=function(e){for(var t,n=[],r=a(this._world.getEnabledComponentsByClass(o.GridComponent));!(t=r()).done;){var i=t.value.grid.getEnabledComponent("turn");if(i){var c=i.currentAvailableTurn;c&&n.push({help:e,delay:this._hasHelpDelay(),turn:{type:c.type,cellA:c.a,cellB:c.b,entityA:c.a.getEntity(),entityB:c.b.getEntity()}})}}n.length>0&&this._world.setState("help",n)},i.enableHelp=function(){this._helpStrategy?this._setHelpTurnState(this._helpStrategy.hasHelp()):this._setHelpTurnState(!0)},i.disableHelp=function(){this._setHelpTurnState(!1)},i.preProcess=function(){this.disableHelp()},i.postProcess=function(){this.enableHelp()},r}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.HelpSystem=s,s.KEY="help",s.STATE="help",cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"ac5f4BqoLNbY6hIvLtevKGp","HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.HeroAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)"),i=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)");function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var o=t,a=o.heroComponent,r=o.heroBalloonComponent,i=o.reactions,c=void 0===i?[]:i,s=o.immediatelyEnd,p=void 0===s||s;return n._heroComponent=a,n._heroBalloonComponent=r,n._reactions=c,n._immediatelyEnd=p,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var p=o.prototype;return p._getReaction=function(){return this._reactions[0]},p._createAnimation=function(){return o.createAnimation({heroComponent:this._heroComponent,heroBalloonComponent:this._heroBalloonComponent,reaction:this._getReaction(),immediatelyEnd:this._immediatelyEnd})},p.build=function(){return[[new r.AnimationData(null,this._createAnimation())]]},o.createAnimation=function(e){void 0===e&&(e={});var t=e,n=t.heroComponent,o=t.heroBalloonComponent,r=t.reaction,s=t.immediatelyEnd,p=void 0===s||s;return new i.GroupAnimation([new c.DummyAnimation,new a.FunctionAnimation(function(){return new Promise(function(e){r.speech?n.spine?n.spine.setStartListener(function(t){t.animation.name===r.animation?(o.setText(r.speech,r.speechParams),o.show().then(e)):e()}):(o.setText(r.speech,r.speechParams),o.show().then(e),e()):e(),n.spine&&n.runAnimation(r.animation,{add:r.add})})})],p)},o}(o.GameActionBuilder);n.HeroAnimationBuilder=p,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"HeroBalloonComponent (@tapclap.game-kit.ui.hero)":[function(e,t,n){"use strict";cc._RF.push(t,"5b0d0gkUVZLKr8oRDjrkVgu","HeroBalloonComponent (@tapclap.game-kit.ui.hero)"),n.__esModule=!0,n.HeroBalloonComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var C=cc._decorator,w=C.ccclass,S=C.property,E=(o=(0,C.menu)("UI-Kit/Hero/HeroBalloonComponent"),a=S({type:cc.Node,visible:!0}),r=S({type:h.I18NLabel,visible:!0}),i=S({type:cc.Float,visible:!0}),c=S({type:cc.Float,visible:!0}),s=S({type:cc.Float,visible:!0}),w(p=o((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return g(t=e.call.apply(e,[this].concat(o))||this,"_balloon",m,v(t)),g(t,"_label",u,v(t)),g(t,"_showDuration",d,v(t)),g(t,"_hideDuration",y,v(t)),g(t,"_duration",f,v(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var a=o.prototype;return a._runAction=function(e){e.setTag(o.ACTION_TAG),this._balloon.runAction(e)},a._stopAction=function(){this._balloon.stopActionByTag(o.ACTION_TAG)},a.onLoad=function(){var e=this;this._balloon.opacity=0,this.node.on(cc.Node.EventType.TOUCH_END,function(){e.hide()})},a.setText=function(e,t){return this._label?this._label.setString(e,t):cc.warn("I18Label isn't setted"),this},a.show=function(e,t){var n=this;return void 0===e&&(e=this._duration),void 0===t&&(t=!0),new Promise(function(o){n._stopAction();var a=[cc.fadeTo(.3,1),cc.fadeIn(t?n._showDuration:0),cc.callFunc(o)];e>0&&a.push(cc.delayTime(e),cc.callFunc(function(){return n.hide()})),n._runAction(cc.sequence(a))})},a.hide=function(e){var t=this;return void 0===e&&(e=!0),new Promise(function(n){t._stopAction();var o=cc.sequence([cc.fadeOut(e?t._hideDuration:0),cc.callFunc(n)]);t._runAction(o)})},o}(cc.Component),m=b(l.prototype,"_balloon",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=b(l.prototype,"_label",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b(l.prototype,"_showDuration",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=b(l.prototype,"_hideDuration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=b(l.prototype,"_duration",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),p=l))||p)||p);n.HeroBalloonComponent=E,E.ACTION_TAG=1,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"47859zFhSZUSpVBjOWg/gGM","HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.HeroCandyThrowAnimationBuilder=void 0;var o=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),a=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),r=e("./Random (@tapclap.utils-js.random)"),i=e("./HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function i(){return e.apply(this,arguments)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),i.prototype._createThrowAnimations=function(e,t,n,i){for(var p,l=[],m=new r.Random,u=0,d=s(e.data);!(p=d()).done;){var y=p.value,f=y.targetCell,h=y.newEntity,g=y.prevEntity;if(["candy"].includes(h.type)){var v=new c.AnimationFactory(h),_=h.getComponent("render").node,b=g.getComponent("render").node,C=f.getComponent("render").node;_.scale=0,_.zIndex=50;var w=m.shuffle(["P","R","Y"])[0],S=_.parent.convertToNodeSpaceAR(C.parent.convertToWorldSpaceAR(C.position)),E=v.createAnimation("fly",{loop:!0,skin:w}),x=this._getDuration(S,this._speed);l.push({target:h,animation:new o.ChainAnimation([this._getEmitEntityAnimation(i,_,t,u/20),E,this._getMoveEntityAnimation(x,_,S,u),new a.ActionAnimation(cc.scaleTo(.1,0,0),b)])}),u++}}return l},i}(i.HeroEntityThrowAnimationBuilder);n.HeroCandyThrowAnimationBuilder=u,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"HeroComponent (@tapclap.game-kit.ui.hero)":[function(e,t,n){"use strict";cc._RF.push(t,"1fa374oSHVIRIceffCBBDG4","HeroComponent (@tapclap.game-kit.ui.hero)"),n.__esModule=!0,n.HeroComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h=e("./HeroBalloonComponent (@tapclap.game-kit.ui.hero)");function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.property,x=(o=(0,w.menu)("UI-Kit/Hero/HeroComponent"),a=E({type:h.HeroBalloonComponent,visible:!0}),r=E({type:sp.Skeleton,visible:!0}),i=E({visible:!0}),c=E({type:cc.Float,visible:!0}),s=E({type:cc.Float,visible:!0}),S(p=o((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return g(t=e.call.apply(e,[this].concat(o))||this,"_balloon",m,_(t)),g(t,"_spine",u,_(t)),g(t,"_idleAnimationKey",d,_(t)),g(t,"_waitingDelay",y,_(t)),g(t,"_waitingInterval",f,_(t)),t._waitingCallback=null,t._defaultTrack=0,t._waiting=!0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a,r,i=o.prototype;return i._schedule=function(){this._waiting&&this._waitingCallback&&this.schedule(this._waitingCallback,this._waitingInterval,cc.macro.REPEAT_FOREVER,this._waitingDelay)},i.runAnimation=function(e,t){var n=void 0===t?{}:t,o=n.loop,a=void 0!==o&&o,r=(n.force,this._spine.getCurrent(this._defaultTrack));r&&r.animation.name!==e&&(this._spine.setAnimation(this._defaultTrack,e,a),this._spine.addAnimation(this._defaultTrack,this._idleAnimationKey,!0))},i.isAnimating=function(){if(!this._spine)return!1;var e=this._spine.getCurrent(this._defaultTrack);return e&&e.animation&&e.animation.name!==this._idleAnimationKey},i.setWaitingCallback=function(e,t){void 0===t&&(t=!1),this._waitingCallback&&this.stopScheduleTimer(),e?(this._waitingCallback=e,t||this._schedule()):this._waitingCallback=null},i.stopScheduleTimer=function(){this.unschedule(this._waitingCallback)},i.restartScheduleTimer=function(){this.stopScheduleTimer(),this._schedule()},i.say=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!1),this.stopScheduleTimer(),this.balloon&&(this.balloon.setText(e).show(t,n),this._waiting=!!t)},i.silent=function(e){void 0===e&&(e=!1),this.balloon&&this.balloon.hide(e),this._waiting=!0},a=o,(r=[{key:"spine",get:function(){return this._spine}},{key:"balloon",get:function(){return this._balloon}}])&&v(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),m=C(l.prototype,"_balloon",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=C(l.prototype,"_spine",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C(l.prototype,"_idleAnimationKey",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"idle"}}),y=C(l.prototype,"_waitingDelay",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),f=C(l.prototype,"_waitingInterval",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),p=l))||p)||p);n.HeroComponent=x,cc._RF.pop()},{"./HeroBalloonComponent (@tapclap.game-kit.ui.hero)":"HeroBalloonComponent (@tapclap.game-kit.ui.hero)"}],"HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"d6052HTS3Jcha+bcQQZ/zEu","HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.HeroEntityThrowAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),s=e("./Random (@tapclap.utils-js.random)"),p=e("./SpineAnimation (@tapclap.match-x.cocos.animations)"),l=e("./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./AnimationData (@tapclap.match-x.cocos.animations)");function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t){var n;n=e.call(this)||this;var o=t.world,a=t.spine,r=t.fallbackEmitNode,i=t.animationKey,c=void 0===i?null:i,s=t.boneKey,p=void 0===s?null:s,l=t.slotKey,m=void 0===l?null:l,u=t.idleAnimationKeys,d=void 0===u?[]:u,y=t.speed,f=void 0===y?1500:y,h=t.audioEffectsPlayer;return n._world=o,n._spine=a,n._fallbackEmitNode=r,n._animationKey=c,n._boneKey=p,n._slotKey=m,n._idleAnimationKeys=d,n._speed=f,n._audioEffectsPlayer=h,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var d=o.prototype;return d.build=function(e){var t=this,n=[],o=new s.Random,i=this._world.getComponent("tiles").grid.getComponent("render");if(this._spine&&this._animationKey){var c=new p.SpineAnimation(this._spine,{animationName:this._animationKey,loop:!1,event:"throw"}),l=new a.ChainAnimation([c,this._audioEffectsPlayer.create("heroThrow")]),u=new r.FunctionAnimation(function(){c.settled.then(function(){new p.SpineAnimation(t._spine,{animationName:o.shuffle(t._idleAnimationKeys).pop(),loop:!0}).run()})}),d=this._createThrowAnimations(e,l,u,i.node);d.length>0&&n.push([new m.AnimationData(null,l),new m.AnimationData(null,u)],d)}else{var y=this._audioEffectsPlayer.create("heroThrow"),f=this._createThrowAnimations(e,y,null,i.node);f.length>0&&n.push([new m.AnimationData(null,y)],f)}return n},d._createThrowAnimations=function(){return[]},d._getEmitPosition=function(){var e=this._fallbackEmitNode.getPosition(),t=null;if(this._spine&&(e=this._spine.node.getPosition(),this._boneKey&&(t=this._spine.findBone(this._boneKey)),!t&&this._slotKey)){var n=this._spine.findSlot(this._slotKey);n&&(t=n.bone)}var o=t?new cc.Vec2(t.worldX,t.worldY):e;return(this._spine?this._spine.node:this._fallbackEmitNode.parent).convertToWorldSpaceAR(o)},d._getDuration=function(e,t){var n=this._getEmitPosition().subSelf(e);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))/t},d._getEmitEntityAnimation=function(e,t,n,o){var i=this;return void 0===n&&(n=null),void 0===o&&(o=0),new a.ChainAnimation([new l.WaitAnimation(n),new c.ActionAnimation(cc.delayTime(o),t),new r.FunctionAnimation(function(){t.scaleX=.2,t.scaleY=.2,t.setPosition(e.convertToNodeSpaceAR(i._getEmitPosition()))})])},d._getMoveEntityAnimation=function(e,t,n,o){return void 0===o&&(o=0),new i.GroupAnimation([new c.ActionAnimation(cc.rotateBy(e,360+30*o),t),new r.FunctionAnimation(function(){return new c.ActionAnimation(cc.moveTo(e,n),t).run()}),new c.ActionAnimation(cc.scaleTo(.5,3,3),t),new c.ActionAnimation(cc.scaleTo(.5,1,1),t)])},o}(o.GameActionBuilder);n.HeroEntityThrowAnimationBuilder=d,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)","./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"dfe1dN/gIpWkr9MPIx8xw8M","HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.HeroScheduleWaitingAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._heroComponent=void 0,n._heroComponent=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.build=function(){var e=this,t=new a.FunctionAnimation(function(){return e._heroComponent.restartScheduleTimer()});return[[new r.AnimationData(null,t)]]},o}(o.GameActionBuilder);n.HeroScheduleWaitingAnimationBuilder=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"29bfcOySZdG1Yt3SH5dGcuB","HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.HightlightScenarioProducer=void 0;var o=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n,o=t.targetResolver,a=t.backdropManager;return(n=e.call(this)||this)._targetResolver=o,n._backdropManager=a,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.produce=function(e){var t=new o.TutorialScenarioBuilder({backdropManager:this._backdropManager,targetResolver:this._targetResolver});switch(e.action){case"unhighlight":t.removeHighlight(e.targets);break;default:t.addHighlight(e.targets)}return t.build()},r}(e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)").ScenarioProducer);n.HightlightScenarioProducer=r,cc._RF.pop()},{"./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"HttpClient (@tapclap.utils-js.http-client)":[function(e,t,n){"use strict";cc._RF.push(t,"68657i2LY5YQKTOOd/ll/di","HttpClient (@tapclap.utils-js.http-client)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.HttpClientRequestError=n.HttpClient=n.HttpClientError=void 0;var i,c=e("./URL (@tapclap.utils-js.url)");(function(e){e.ERROR_TYPE_CLIENT="ERROR_TYPE_CLIENT",e.ERROR_TYPE_SERVER="ERROR_TYPE_SERVER",e.ERROR_TYPE_UNAUTHORIZED="ERROR_TYPE_UNAUTHORIZED",e.ERROR_TYPE_TIMEOUT="ERROR_TYPE_TIMEOUT",e.ERROR_TYPE_OTHER="ERROR_TYPE_OTHER"})(i=n.HttpClientError||(n.HttpClientError={}));var s=function(){function e(t,n){var o,a,r,i,c,s;void 0===n&&(n={}),this._headers={},this._stringifyBody=!1,this._queryParams={},this._overrideMethods=[],this._statusErrorMap={},this._fetch=t,this._credentials=null!==(o=n.credentials)&&void 0!==o?o:"",this._headers=null!==(a=n.headers)&&void 0!==a?a:{},this._stringifyBody=null!==(r=n.stringifyBody)&&void 0!==r&&r,this._queryParams=null!==(i=n.queryParams)&&void 0!==i?i:{},this._overrideMethods=null!==(c=n.overrideMethods)&&void 0!==c?c:[],this._statusErrorMap=Object.assign({},e.DEFAULT_STATUS_ERROR_MAP,null!==(s=n.statusErrorMap)&&void 0!==s?s:{})}return e.prototype.addQueryParam=function(e,t){this._queryParams[e]=t},e.prototype.request=function(e,t){var n,o,a,r=this;void 0===t&&(t={});var s=null!==(n=t.method)&&void 0!==n?n:"get",l=Object.assign({},this._headers,null!==(o=t.headers)&&void 0!==o?o:{}),m=null!==(a=t.credentials)&&void 0!==a?a:this._credentials,u=this._stringifyBody?JSON.stringify(t.body):t.body,d=null;try{d=new c.URL(e.toString())}catch(h){d=e}var y={method:s.toUpperCase(),credentials:m,headers:l,body:u};for(var f in this._overrideMethods.includes(s)&&(y.headers["X-HTTP-Method-Override"]=y.method,y.method="POST"),this._queryParams)Object.prototype.hasOwnProperty.call(this._queryParams,f)&&d.searchParams.append(f,this._queryParams[f]);return this._fetch(d.toString(),y).catch(function(e){switch(e.type){case"timeout":throw new p(i.ERROR_TYPE_TIMEOUT);default:throw new p(i.ERROR_TYPE_OTHER)}}).then(function(e){var t,n;if(e.ok){var o="text";return((null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.search("json"))>-1||(null===(n=e.headers.get("content-disposition"))||void 0===n?void 0:n.search(".json"))>-1)&&(o="json"),e[o]()}var a=parseInt(e.status),c=r._getErrorTypeByStatusCode(a)||i.ERROR_TYPE_OTHER,s="Request: ["+y.method+"] "+d.toString()+"\n"+e.statusText;throw new p(c,s,e.status)})},e.prototype._getErrorTypeByStatusCode=function(e){var t,n,o=e.toString();if(this._statusErrorMap[o])return this._statusErrorMap[o];try{for(var a=r(Object.keys(this._statusErrorMap)),i=a.next();!i.done;i=a.next()){var c=i.value,s=new RegExp(c.replaceAll("*","\\d"));if(o.match(s))return this._statusErrorMap[c]}}catch(p){t={error:p}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.DEFAULT_STATUS_ERROR_MAP={"4**":i.ERROR_TYPE_CLIENT,401:i.ERROR_TYPE_UNAUTHORIZED,"5**":i.ERROR_TYPE_SERVER},e}();n.HttpClient=s;var p=function(e){function t(n,o,a){void 0===a&&(a=null);var r=e.call(this,o)||this;return r.name=t.NAME+":"+n,r.type=n,r.code=a,r}return a(t,e),t.NAME="HttpClientRequestError",t}(Error);n.HttpClientRequestError=p,cc._RF.pop()},{"./URL (@tapclap.utils-js.url)":"URL (@tapclap.utils-js.url)"}],"HttpGateway (@tapclap.game-kit.service-gateway)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6c6e05ANwhbkoCN16sCvsCY","HttpGateway (@tapclap.game-kit.service-gateway)"),n.__esModule=!0,n.HttpGateway=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._httpClient=t.httpClient,n._configService=t.configService,n._urlConfigKey=t.urlConfigKey,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._request=function(e,t){var n=this;return void 0===t&&(t={}),Promise.resolve().then(function(){return n._httpClient.request(new URL(""+n._getServerUrl()+e),t)})},r.isAvailable=function(){return!0},r.handshake=function(e){e.token&&this._httpClient.addQueryParam("token",e.token)},r.post=function(e,t){return void 0===t&&(t={}),this._request(e,{method:"post",body:t})},r.get=function(e){return this._request(e,{method:"get"})},r.put=function(e,t){return void 0===t&&(t={}),this._request(e,{method:"put",body:t})},r.patch=function(e,t){return void 0===t&&(t={}),this._request(e,{method:"patch",body:t})},r.delete=function(e,t){return void 0===t&&(t={}),this._request(e,{method:"delete",body:t})},r._getServerUrl=function(){return this._configService.getValue(this._urlConfigKey).toString()},a}(e("./ServiceGateway (@tapclap.game-kit.service-gateway)").ServiceGateway);n.HttpGateway=a,cc._RF.pop()},{"./ServiceGateway (@tapclap.game-kit.service-gateway)":"ServiceGateway (@tapclap.game-kit.service-gateway)"}],"I18N (@tapclap.game-kit.i18n)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"c1bbfEu709HX6yQM/m8Tg5A","I18N (@tapclap.game-kit.i18n)"),n.__esModule=!0,n.TranslationSegmentProvider=n.I18N=void 0;var c=function(){function e(){}return e.prototype.getSegment=function(){return""},e}();n.TranslationSegmentProvider=c;var s=function(){function e(e){var t=void 0===e?{}:e,n=t.providers,o=void 0===n?{}:n,a=t.parsers,r=void 0===a?[]:a,i=t.random,c=t.fallbackLanguage,s=t.segmentRegexp;this._config={},this._defaultLanguage="",this._fallbackLanguage=c,this._providers=o,this._parsers=r,this._random=i,this._segmentRegexp=s||/^(\$){(.*)}$/}var t,n,a=e.prototype;return a._getPath=function(e){for(var t=e.split("."),n=0;n<t.length;n++){var o=t[n].match(this._segmentRegexp);if(o&&o.length>0){var a=this._providers[o[2]];if(!a)throw new Error("Not found TranslationSegmentProvider: "+t[n].slice(1));t[n]=a.getSegment()}}return t},a._template=function(e,t,n){void 0===t&&(t={});for(var a,r=e,i=o(this._parsers);!(a=i()).done;)r=a.value.parse(r,t,n);return r},a._getTranslation=function(e,t,n){if(void 0===n&&(n=!0),!e)throw new Error("Default lang wasn't set");for(var a,r=this._config[e],i=o(this._getPath(t));!(a=i()).done;){var c=a.value;if(!r)break;r=r[c],Array.isArray(r)&&(r=this._random.sample(r)),this._fallbackLanguage&&this._fallbackLanguage!==e&&!r&&(r=this._getTranslation(this._fallbackLanguage,t,n))}return!r&&n?t:r},a._initParsers=function(){var e=this;return Promise.all(this._parsers.map(function(t){return t.init(e)}))},a.isTranslationExist=function(e){return!!this._getTranslation(this._defaultLanguage,e,!1)},a.t=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=null);var o={};n||(n=this.getDefaultLanguage());for(var a=0,r=Object.entries(t);a<r.length;a++){var i=r[a],c=i[0],s=i[1];o[c]="string"==typeof s?this._getTranslation(n,s):s}return this._template(this._getTranslation(n,e.toString()),o,n)},a.getDefaultLanguage=function(){return this._defaultLanguage||this._fallbackLanguage},a.setDefaultLanguage=function(e){this._defaultLanguage=e},a.registerLanguage=function(e,t,n){if(void 0===n&&(n=""),n){for(var o=this._getPath(n),a=this._config[e]||{},r=a,i=0;i<o.length-1;i++)r[o[i]]||(r[o[i]]={}),r=r[o[i]];r[o[o.length-1]]=t,this._config[e]=a}else this._config[e]=Object.assign(this._config[e]||{},t)},a.getAvailableLanguages=function(){return Object.keys(this._config)},a.init=function(){return this._initParsers()},t=e,(n=[{key:"availableLanguages",get:function(){return this.getAvailableLanguages()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.I18N=s,cc._RF.pop()},{}],"I18NAppLoader (scripts.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"fec3cPG5iRVhKClojTyVR5Z","I18NAppLoader (scripts.loader)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NAppLoader=void 0;var i=e("./AppLoader (scripts.loader)"),c=e("./BundleLoadTask (@tapclap.game-kit.loader)"),s=function(e){function t(t){var n=e.call(this)||this;return n._i18n=t.i18n,n._localeResolver=t.localeResolver,n._storage=t.storage,n._analyticsService=t.analyticsService,n._configService=t.configService,n._defaultLanguage=t.defaultLanguage,n._namespaces=t.namespaces,n._availableLanguages=t.availableLanguages,n._languageSettingsEnabled=t.languageSettingsEnabled,n}return a(t,e),t.prototype.load=function(){var e=this;return this.beforeLoad().then(function(){return e._configService.getValue("debug")||e._languageSettingsEnabled?e._loadAllLanguages():e._loadOneLanguage()})},t.prototype.beforeLoad=function(){var e=this;return Promise.resolve().then(function(){return e._localeResolver.getLocale()}).then(function(t){return e._storage.getItem("locale").then(function(e){return e||t})}).then(function(e){if(cc.sys.isBrowser){var t=new URLSearchParams(window.location.search);t.get("locale")&&(e=t.get("locale"))}return e}).then(function(t){var n=e._availableLanguages.includes(t)?t:e._defaultLanguage;return e._i18n.setDefaultLanguage(n)})},t.prototype._loadOneLanguage=function(){var e=this;return Promise.all(this._namespaces.map(function(t){var n=t.namespace,o=t.path;return new c.BundleLoadTask(o+"/"+e._i18n.getDefaultLanguage(),{asFile:!0}).load().then(function(t){e._i18n.registerLanguage(t.name,t.json,n)})}))},t.prototype._loadAllLanguages=function(){var e=this;return Promise.all(this._namespaces.map(function(t){var n=t.namespace,o=t.path;return new c.BundleLoadTask(o).load().then(function(t){var o,a;try{for(var i=r(t),c=i.next();!c.done;c=i.next()){var s=c.value;e._i18n.registerLanguage(s.name,s.json,n)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}})}))},t}(i.AppLoader);n.I18NAppLoader=s,cc._RF.pop()},{"./AppLoader (scripts.loader)":"AppLoader (scripts.loader)","./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)"}],"I18NComponent (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"6203cwmXlFPL4cVULk6gQId","I18NComponent (@tapclap.game-kit.i18n.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NComponent=void 0;var i=e("./Inject (@tapclap.utils-js.inject)"),c=e("./I18NProperty (@tapclap.game-kit.i18n.components)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=[],t}return a(t,e),t.prototype._getOptionsByLanguageCode=function(e){return this.options.find(function(t){return t.languageCode===e})},t.prototype.onLoad=function(){this.render()},Object.defineProperty(t.prototype,"defaultLanguage",{get:function(){return this.i18n.getDefaultLanguage()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"option",{get:function(){return this._getOptionsByLanguageCode(this.defaultLanguage)},enumerable:!1,configurable:!0}),t.prototype.render=function(){},r([l({type:[c.I18NProperty],override:!0})],t.prototype,"options",void 0),r([i.Inject("I18N")],t.prototype,"i18n",void 0),r([p],t)}(cc.Component);n.I18NComponent=m,cc._RF.pop()},{"./I18NProperty (@tapclap.game-kit.i18n.components)":"I18NProperty (@tapclap.game-kit.i18n.components)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)"}],"I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)":[function(e,t,n){"use strict";cc._RF.push(t,"1df8aSK/QVIoK7e8Sg9ZnAH","I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)"),n.__esModule=!0,n.I18NDateTemplateParser=void 0;var o=e("./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)"),a=e("./TimeDuration (@tapclap.utils-js.time-duration)"),r=e("./DurationFormatter (@tapclap.game-kit.ui.formatters)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._i18n=null,n._daysKey=t.daysKey,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c._getReplacements=function(e,t,n){var o=this;return(this._getMatches(e,t,n)||[]).map(function(e){var t=e.substring,n=e.options;return{substring:t,replace:o._formatDuration(n)}})},c._formatDuration=function(e){var t=void 0===e?[]:e,n=t[0],o=t[1],i=void 0===o?3:o,c=new a.TimeDuration(parseInt(n));return i>0&&this._daysKey&&c.getDays()>=i?this._i18n.t(this._daysKey,{value:Math.ceil(c.getHours()/24)}):r.DurationFormatter.format(n)},c.init=function(t){return this._i18n=t,e.prototype.init.call(this,t)},o}(o.I18NRegexpTemplateParser);n.I18NDateTemplateParser=c,cc._RF.pop()},{"./DurationFormatter (@tapclap.game-kit.ui.formatters)":"DurationFormatter (@tapclap.game-kit.ui.formatters)","./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)":"I18NRegexpTemplateParser (@tapclap.game-kit.i18n)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"30dc17SsddX/JNy94DvcZjY","I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NDevConsoleMenuGenerator=void 0;var i=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),c=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./I18NComponent (@tapclap.game-kit.i18n.components)"),p=function(e){function t(t){var n=t.i18n,o=t.storage,a=e.call(this)||this;return a._i18n=n,a._storage=o,a}return a(t,e),t.prototype.generate=function(){var e,t,n={};try{for(var o=r(this._i18n.getAvailableLanguages()),a=o.next();!a.done;a=o.next()){var i=a.value;n[i]={title:i,closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:this._setLocale.bind(this,i)})}}}catch(s){e={error:s}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t.prototype._setLocale=function(e){var t,n;this._i18n.setDefaultLanguage(e),this._storage.setItem("locale",e);var o=cc.director.getScene().getComponentsInChildren(s.I18NComponent);try{for(var a=r(o),i=a.next();!i.done;i=a.next())i.value.render()}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t}(i.DevConsoleMenuGenerator);n.I18NDevConsoleMenuGenerator=p,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)"}],"I18NLabel (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"910d1qznTZP7KgDsTltcGxN","I18NLabel (@tapclap.game-kit.i18n.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NLabel=void 0;var i=e("./I18NComponent (@tapclap.game-kit.i18n.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.requireComponent,m=c.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.options=[],t._key="",t._params={},t}return a(t,e),Object.defineProperty(t.prototype,"_label",{get:function(){return this.node.getComponent(cc.Label)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"string",{set:function(e){this.setString(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalString",{get:function(){var e=this.node.getComponent(cc.Label);return this._key||e&&e.string},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var t=this.node.getComponent(cc.Label);t&&!this._key&&(this._key=t.string),e.prototype.onLoad.call(this)},t.prototype.render=function(){var e=this.node.getComponent(cc.Label);e&&(e.string=this.i18n.t(this._key,this._params))},t.prototype.setString=function(e,t){if(void 0===t&&(t={}),!this._label)throw new Error("Cannot find node with component 'Label'");this._key=e,this._params=t,this._label.string=this.i18n.t(e,t)},t.prototype.setParams=function(e){void 0===e&&(e={}),this.setString(this.originalString,e)},r([p({type:[cc.String],override:!0,visible:!1})],t.prototype,"options",void 0),r([p({visible:!0})],t.prototype,"_key",void 0),r([p()],t.prototype,"_params",void 0),r([s,l(cc.Label),m("I18N/Label")],t)}(i.I18NComponent);n.I18NLabel=u,cc._RF.pop()},{"./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)"}],"I18NNodeSize (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"055cfyhRDBPMKajGmlOQU5j","I18NNodeSize (@tapclap.game-kit.i18n.components)"),n.__esModule=!0,n.I18NNodeSize=void 0;var o,a,r,i,c=e("./I18NComponent (@tapclap.game-kit.i18n.components)"),s=e("./I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:[s.I18NNodeSizeProperty],override:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"options",i,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.render=function(){var e=this.option;e&&(e.size&&(this.node.width=e.width,this.node.height=e.height),e.position&&(this.node.x=e.x,this.node.y=e.y),e.position&&(this.node.x=e.x,this.node.y=e.y))},o}(c.I18NComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"options",e)||e},f)).initializer&&(Object.defineProperty(u,"options",f),f=null),i=f,a=r))||a);n.I18NNodeSize=v,cc._RF.pop()},{"./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)","./I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)":"I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)"}],"I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7d0a53EPVtN/4QyjulU+ZCD","I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)"),n.__esModule=!0,n.I18NNodeSizeProperty=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E=e("./I18NProperty (@tapclap.game-kit.i18n.components)");function x(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var P=cc._decorator,k=P.ccclass,T=P.property,I=(o=k("I18NNodeSizeProperty"),a=T(cc.Boolean),r=T({visible:function(){return this.size}}),i=T({visible:function(){return this.size}}),c=T(cc.Boolean),s=T({visible:function(){return this.position}}),p=T({visible:function(){return this.position}}),l=T(cc.Boolean),m=T({visible:function(){return this.scale}}),u=T({visible:function(){return this.scale}}),o((y=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return x(t=e.call.apply(e,[this].concat(o))||this,"size",f,A(t)),x(t,"width",h,A(t)),x(t,"height",g,A(t)),x(t,"position",v,A(t)),x(t,"x",_,A(t)),x(t,"y",b,A(t)),x(t,"scale",C,A(t)),x(t,"scaleY",w,A(t)),x(t,"scaleX",S,A(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,O(t,n),o}(E.I18NProperty),f=R(y.prototype,"size",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=R(y.prototype,"width",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=R(y.prototype,"height",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=R(y.prototype,"position",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=R(y.prototype,"x",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=R(y.prototype,"y",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=R(y.prototype,"scale",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=R(y.prototype,"scaleY",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=R(y.prototype,"scaleX",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=y))||d);n.I18NNodeSizeProperty=I,cc._RF.pop()},{"./I18NProperty (@tapclap.game-kit.i18n.components)":"I18NProperty (@tapclap.game-kit.i18n.components)"}],"I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e5a834ul1VH1J0h85cdevBC","I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)"),n.__esModule=!0,n.I18NParamsTemplateParser=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.parse=function(e,t){for(var n=0,o=Object.entries(t);n<o.length;n++){var a=o[n],r=a[0],i=a[1];e=e.replace(new RegExp("{{"+r+"}}","g"),i)}return e},a}(e("./I18NTemplateParser (@tapclap.game-kit.i18n)").I18NTemplateParser);n.I18NParamsTemplateParser=a,cc._RF.pop()},{"./I18NTemplateParser (@tapclap.game-kit.i18n)":"I18NTemplateParser (@tapclap.game-kit.i18n)"}],"I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"94346aDXNlHYKOEEwjz6b0u","I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)"),n.__esModule=!0,n.I18NPluralTemplateParser=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getReplacements=function(e,t,n){var o=this,a=this._getMatches(e,t,n);return a?a.map(function(e){var t=e.substring,n=e.options,a=n[0],r=n.slice(1);return{substring:t,replace:o._plural(Math.abs(parseInt(a)),r).replace("%d",a)}}):[]},r._plural=function(e,t){var n,o=Math.abs(e)%100,a=o%10;return o>10&&o<20?t[t.length-1]:a>1&&a<5?null!=(n=t[1])?n:t[t.length-1]:1===a?t[0]:t[t.length-1]},a}(e("./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)").I18NRegexpTemplateParser);n.I18NPluralTemplateParser=a,cc._RF.pop()},{"./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)":"I18NRegexpTemplateParser (@tapclap.game-kit.i18n)"}],"I18NProperty (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";var o,a,r,i,c;function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}cc._RF.push(t,"d14833IHeREA7V+QbM0dQUo","I18NProperty (@tapclap.game-kit.i18n.components)"),n.__esModule=!0,n.I18NProperty=void 0;var p,l,m,u,d=cc._decorator,y=d.ccclass,f=d.property,h=(o=y("I18NProperty"),a=f(),o((p=(i=function(){s(this,"languageCode",c,this)}).prototype,l=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},u={},Object.keys(m).forEach(function(e){u[e]=m[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),void 0===(u=l.slice().reverse().reduce(function(e,t){return t(p,"languageCode",e)||e},u)).initializer&&(Object.defineProperty(p,"languageCode",u),u=null),c=u,r=i))||r);n.I18NProperty=h,cc._RF.pop()},{}],"I18NRegexpTemplateParser (@tapclap.game-kit.i18n)":[function(e,t,n){"use strict";cc._RF.push(t,"25db9SB1cRaDoACAfR/3CZ2","I18NRegexpTemplateParser (@tapclap.game-kit.i18n)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NRegexpTemplateParser=void 0;var i=function(e){function t(t){var n=e.call(this)||this;if(void 0===t.prefix)throw new Error("Prefix is undefined");return n._regexpGlobal=t.regexpGlobal||new RegExp("\\$"+t.prefix+"\\[(.*?)\\]","g"),n._regexpLocal=t.regexpLocal||new RegExp("\\$"+t.prefix+"\\[(.*?)\\]"),n}return a(t,e),t.prototype.parse=function(e,t,n){return this._replace(e,this._getReplacements(e,t,n))},t.prototype._getReplacements=function(){return[]},t.prototype._getMatches=function(e){var t=this;return(e.match(this._regexpGlobal)||[]).filter(function(e){return e}).map(function(e){return{substring:e,values:e.match(t._regexpLocal)[1]}}).map(function(e){return{substring:e.substring,options:e.values.split(",").map(function(e){var t=e.match(/^\s*(.*?)\s*$/);return Array.isArray(t)?t[1]:e})}})},t.prototype._replace=function(e,t){var n,o;void 0===t&&(t=[]);try{for(var a=r(t),i=a.next();!i.done;i=a.next()){var c=i.value,s=c.substring,p=c.replace;e=e.replace(s,p)}}catch(l){n={error:l}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return e},t}(e("./I18NTemplateParser (@tapclap.game-kit.i18n)").I18NTemplateParser);n.I18NRegexpTemplateParser=i,cc._RF.pop()},{"./I18NTemplateParser (@tapclap.game-kit.i18n)":"I18NTemplateParser (@tapclap.game-kit.i18n)"}],"I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5365frtBNtVQa2l6A5VU0FH","I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)"),n.__esModule=!0,n.I18NResourceHandler=void 0;var c=function(e){var t,n;function a(t){var n,o=t.i18n;return(n=e.call(this)||this)._i18n=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.handleArray=function(e,t){for(var n,a=o(e);!(n=a()).done;){var r=n.value,i=r.name,c=r.json;this._i18n.registerLanguage(i,c,t.dest)}return Promise.resolve([])},a}(e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)").MetaModuleResourceHandler);n.I18NResourceHandler=c,cc._RF.pop()},{"./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"}],"I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"69f6bC9XxFPq4CelEkiJaQe","I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)"),n.__esModule=!0,n.I18NSexTemplateParser=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._socialService=t.socialService,n._orderMap=t.orderMap,n._userInfo=null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getReplacements=function(e,t,n){var o=this;return(this._getMatches(e,t,n)||[]).map(function(e){var t=e.substring,n=e.options;return{substring:t,replace:o._detectDeclination(n)}})},r._detectDeclination=function(e){return e[this._orderMap.indexOf(this._userInfo.sex)]||e[0]},r.init=function(){var e=this;return this._socialService.getCurrentAdapter().getUserInfo().then(function(t){return e._userInfo=t})},a}(e("./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)").I18NRegexpTemplateParser);n.I18NSexTemplateParser=a,cc._RF.pop()},{"./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)":"I18NRegexpTemplateParser (@tapclap.game-kit.i18n)"}],"I18NSprite (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"62a2457J1xOa7wm3AOSooDF","I18NSprite (@tapclap.game-kit.i18n.components)"),n.__esModule=!0,n.I18NSprite=void 0;var o,a,r,i,c,s=e("./I18NComponent (@tapclap.game-kit.i18n.components)"),p=e("./I18NSpriteProperty (@tapclap.game-kit.i18n.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d,y,f,h,g=cc._decorator,v=g.ccclass,_=g.property,b=(o=(0,g.requireComponent)(cc.Sprite),a=_({type:[p.I18NSpriteProperty],override:!0}),v(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"options",c,m(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),o.prototype.render=function(){var e=this.node.getComponent(cc.Sprite);this.option&&e&&(e.spriteFrame=this.option.spriteFrame)},o}(s.I18NComponent),d=i.prototype,y=[a],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),void 0===(h=y.slice().reverse().reduce(function(e,t){return t(d,"options",e)||e},h)).initializer&&(Object.defineProperty(d,"options",h),h=null),c=h,r=i))||r)||r);n.I18NSprite=b,cc._RF.pop()},{"./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)","./I18NSpriteProperty (@tapclap.game-kit.i18n.components)":"I18NSpriteProperty (@tapclap.game-kit.i18n.components)"}],"I18NSpriteProperty (@tapclap.game-kit.i18n.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c89aeAyt55Pvpi26Kj9juAz","I18NSpriteProperty (@tapclap.game-kit.i18n.components)"),n.__esModule=!0,n.I18NSpriteProperty=void 0;var o,a,r,i,c,s=e("./I18NProperty (@tapclap.game-kit.i18n.components)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=h.property,_=(o=g("I18NSpriteProperty"),a=v(cc.SpriteFrame),o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"spriteFrame",c,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o}(s.I18NProperty),u=i.prototype,d=[a],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"spriteFrame",e)||e},f)).initializer&&(Object.defineProperty(u,"spriteFrame",f),f=null),c=f,r=i))||r);n.I18NSpriteProperty=_,cc._RF.pop()},{"./I18NProperty (@tapclap.game-kit.i18n.components)":"I18NProperty (@tapclap.game-kit.i18n.components)"}],"I18NTemplateParser (@tapclap.game-kit.i18n)":[function(e,t,n){"use strict";cc._RF.push(t,"f0370IzwdpI16pK1upG6MrU","I18NTemplateParser (@tapclap.game-kit.i18n)"),n.__esModule=!0,n.I18NTemplateParser=void 0;var o=function(){function e(){}var t=e.prototype;return t.parse=function(e){return e},t.init=function(){return Promise.resolve()},e}();n.I18NTemplateParser=o,cc._RF.pop()},{}],"I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)":[function(e,t,n){"use strict";cc._RF.push(t,"efa3dJtDK9StpEDBtwRB7pG","I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.I18NTimeTemplateParser=void 0;var i=function(e){function t(t){var n=e.call(this,t)||this;return n._timeLtHour=t.timeLtHour||3600,n._timeLtDay=t.timeLtDay||86400,n._timeGtDay=t.timeGtDay||86400,n._timeLtHourKey=t.timeLtHourKey||"timeLtHour",n._timeLtDayKey=t.timeLtDayKey||"timeLtDay",n._timeGtDayKey=t.timeGtDayKey||"timeGtDay",n}return a(t,e),t.prototype._getReplacements=function(e,t,n){var o=this;return(this._getMatches(e,t,n)||[]).map(function(e){var t=e.substring,n=e.options;return{substring:t,replace:o._formatTime(n)}})},t.prototype._formatTime=function(e){var t=r(void 0===e?[]:e,1)[0],n=Number(t),o=this._convertTime(n),a=o.d,i=o.h,c=o.m,s=o.s,p="";switch(!0){case n<this._timeLtHour:p=this._i18n.t(this._timeLtHourKey,{m:c,s:s});break;case n<this._timeLtDay:p=this._i18n.t(this._timeLtDayKey,{h:i,m:c});break;case n>=this._timeGtDay:p=this._i18n.t(this._timeGtDayKey,{d:a,h:i})}return p},t.prototype._convertTime=function(e){e=Math.round(e);var t=Math.floor(e/86400),n=Math.floor(e/3600)%24,o=Math.floor(e/60)%60,a=e%60,r=function(e){return e>9?e.toString():"0"+e};return{d:t,h:r(n),m:r(o),s:r(a)}},t.prototype.init=function(t){return this._i18n=t,e.prototype.init.call(this,t)},t}(e("./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)").I18NRegexpTemplateParser);n.I18NTimeTemplateParser=i,cc._RF.pop()},{"./I18NRegexpTemplateParser (@tapclap.game-kit.i18n)":"I18NRegexpTemplateParser (@tapclap.game-kit.i18n)"}],"I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9cba2zI5gVT+rqrYNEjLT9/","I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)"),n.__esModule=!0,n.I18NTranslationHandler=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._i18n=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.translate=function(e){return this._i18n.t(e)},a}(e("./TranslationHandler (@tapclap.game-kit.translation-handler)").TranslationHandler);n.I18NTranslationHandler=a,cc._RF.pop()},{"./TranslationHandler (@tapclap.game-kit.translation-handler)":"TranslationHandler (@tapclap.game-kit.translation-handler)"}],"IAnalyticsProvider (@tapclap.sdk-x.analytics-service)":[function(e,t,n){"use strict";cc._RF.push(t,"85e6dOSgwRan4GF2/zQl/uY","IAnalyticsProvider (@tapclap.sdk-x.analytics-service)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IAuthHandler (@tapclap.sdk-x.auth-service)":[function(e,t,n){"use strict";cc._RF.push(t,"fbd614c3f9ZQosgISWhmiGI","IAuthHandler (@tapclap.sdk-x.auth-service)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IAuthStorage (@tapclap.sdk-x.auth-service)":[function(e,t,n){"use strict";cc._RF.push(t,"b0e8c04LLdQsqhTSf6Cyt+D","IAuthStorage (@tapclap.sdk-x.auth-service)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IGetter (@tapclap.utils-js.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"79235/rPy1X3oF8mrhcGnKq","IGetter (@tapclap.utils-js.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IGoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"fbbbapHt7RSGZGgyJeoeLn7","IGoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IGoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"03e62hPWVBd95ds/Zv+frfn","IGoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)":[function(e,t,n){"use strict";cc._RF.push(t,"867fcive41eyZlzRxrRpYto","IIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IMetaTask (@tapclap.game-kit.meta-task-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"015ae0KGC1eJZMcZdlDW4eE","IMetaTask (@tapclap.game-kit.meta-task-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IPriceFormatter (@tapclap.sdk-x.payment-service.price-formatter)":[function(e,t,n){"use strict";cc._RF.push(t,"8cc65WvUFFbpLnRS+XG4alF","IPriceFormatter (@tapclap.sdk-x.payment-service.price-formatter)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IRemoteConfig (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"1f7f9ssqsNRqr27WL/ffA0I","IRemoteConfig (@tapclap.sdk-x.remote-config)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IRemoteConfigFallback (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"862eeEf0ghfRpORZzYbxe+2","IRemoteConfigFallback (@tapclap.sdk-x.remote-config)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IUserAttributesResolver (@tapclap.sdk-x.remote-config.growthbook)":[function(e,t,n){"use strict";cc._RF.push(t,"24d0dKSPX9UsbR1lSXvxgOI","IUserAttributesResolver (@tapclap.sdk-x.remote-config.growthbook)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IUserFactory (@tapclap.game-kit.user-service)":[function(e,t,n){"use strict";cc._RF.push(t,"13c39/k5TtSy7oq5AGTwrKT","IUserFactory (@tapclap.game-kit.user-service)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IUtmProvider (@tapclap.sdk-x.utm)":[function(e,t,n){"use strict";cc._RF.push(t,"01f20wwBY9bX7Myu7pTs35y","IUtmProvider (@tapclap.sdk-x.utm)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"IconComponent (@tapclap.game-kit.ui.icons)":[function(e,t,n){"use strict";cc._RF.push(t,"5b6835vOaZG8rvKZZ1Edet7","IconComponent (@tapclap.game-kit.ui.icons)"),n.__esModule=!0,n.IconComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./KeySpriteFrame (@tapclap.game-kit.ui.common)");function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.menu,x=w.executeInEditMode,A=w.property,O=(o=E("UI-Kit/Icons/IconComponent"),a=A({type:cc.Sprite,visible:!0}),r=A(),i=A(),c=A({type:[d.KeySpriteFrame],visible:!0}),S(s=x(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return g(t=e.call.apply(e,[this].concat(o))||this,"_iconSprite",l,_(t)),g(t,"_icon",m,_(t)),g(t,"_icons",u,_(t)),t._originalMaterial=null,t._originalColor=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a,r,i=o.prototype;return i.setIcon=function(e,t){void 0===t&&(t=!1),this._icon=e;var n=this._icons.find(function(t){return t.key===e});this._iconSprite.spriteFrame=n?n.spriteFrame:null,t||(this.node.active=!!n,this.node.emit(o.EVENT_CHANGE_ICON,this._icon))},i.initialize=function(e){if(e.icons)for(var t,n=y(e.icons);!(t=n()).done;){var o=t.value;this._icons.push(new d.KeySpriteFrame(o.key,o.spriteFrame))}},i.setSize=function(e){this.node.setContentSize(e,e)},i.setShadow=function(e,t){var n=this;void 0===t&&(t={material:null,color:null});var o=t,a=o.material,r=o.color;e&&(this._originalColor=this.node.color,this._originalMaterial=this._iconSprite.getMaterial(0));var i=this.getComponent(cc.Sprite),c=e?r:this._originalColor,s=e?a:this._originalMaterial;c&&function(e){var t=e.clone();t.a=255,n.node.opacity=255*e.a,n.node.color=t}(c),s&&i.setMaterial(0,s),i.srcBlendFactor=e?770:1},a=o,(r=[{key:"icon",get:function(){return this._icon},set:function(e){this.setIcon(e)}}])&&v(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),l=C(p.prototype,"_iconSprite",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C(p.prototype,"_icon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C(p.prototype,"icon",[i],Object.getOwnPropertyDescriptor(p.prototype,"icon"),p.prototype),u=C(p.prototype,"_icons",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=p))||s)||s)||s);n.IconComponent=O,O.EVENT_CHANGE_ICON="changeIcon",cc._RF.pop()},{"./KeySpriteFrame (@tapclap.game-kit.ui.common)":"KeySpriteFrame (@tapclap.game-kit.ui.common)"}],"IconSpinnerComponent (@tapclap.game-kit.ui.spinner)":[function(e,t,n){"use strict";cc._RF.push(t,"9b53cGMCI9Om6FpMCVumcnW","IconSpinnerComponent (@tapclap.game-kit.ui.spinner)"),n.__esModule=!0,n.IconSpinnerComponent=void 0;var o,a,r,i,c,s,p,l,m,u=e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)"),d=e("./IconComponent (@tapclap.game-kit.ui.icons)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.menu,C=v.property,w=(o=b("UI-Kit/Spinner/IconSpinnerComponent"),a=C({type:d.IconComponent,visible:!0}),r=C({type:[cc.String],visible:!0}),i=C({visible:!0}),_(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_iconComponent",p,f(t)),y(t,"_spinningIcons",l,f(t)),y(t,"_animationDuration",m,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a.onLoad=function(){this._iconComponent&&(this._onUpdateIcon(this._iconComponent.icon),this._iconComponent.node.on(d.IconComponent.EVENT_CHANGE_ICON,this._onUpdateIcon,this))},a._onUpdateIcon=function(e){this.hide(),this._spinningIcons.includes(e)&&this.show()},a.show=function(){if(this._iconComponent){var e=cc.rotateBy(this._animationDuration,-360).easing(cc.easeBackOut()).repeatForever();e.setTag(o.ACTION_TAG),this._iconComponent.node.runAction(e)}return Promise.resolve()},a.hide=function(){return this._iconComponent&&(this._iconComponent.node.stopActionByTag(o.ACTION_TAG),this._iconComponent.node.angle=0),Promise.resolve()},o}(u.SpinnerComponent),p=g(s.prototype,"_iconComponent",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=g(s.prototype,"_spinningIcons",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=g(s.prototype,"_animationDuration",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),c=s))||c)||c);n.IconSpinnerComponent=w,w.ACTION_TAG=1,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)"}],"IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)":[function(e,t,n){"use strict";cc._RF.push(t,"fc0bceOJFJBzagDiVA5M/Nv","IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)"),n.__esModule=!0,n.IconTextWidget=void 0;var o,a,r,i,c,s,p,l=e("./IconComponent (@tapclap.game-kit.ui.icons)"),m=e("./LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)");function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.property,w=(o=(0,_.menu)("UI-Kit/Icons/IconTextWidget"),a=C({type:cc.Prefab,visible:!0}),r=C({type:cc.Prefab,visible:!0}),b(i=o((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return f(t=e.call.apply(e,[this].concat(o))||this,"_labelPrefab",s,h(t)),f(t,"_iconPrefab",p,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=o.prototype;return a.setItems=function(e){void 0===e&&(e=[]);for(var t,n=u(e);!(t=n()).done;){var o=t.value;if(o.icon){var a=this._createIcon(o.icon.key,o.icon.size);this.node.addChild(a.node)}if(o.text){var r=this._createLabel(o.text);this.node.addChild(r.node)}}this.node.active=e.length>0},a.clearItems=function(){this.node.removeAllChildren(),this.node.active=!1},a._createLabel=function(e){var t=cc.instantiateFrom(this._labelPrefab).getComponent(m.LabelStyleWidget);return t.style="brown",t.text=e,t},a._createIcon=function(e,t){if(void 0===t)throw new Error("Size of icon not passed");var n=cc.instantiateFrom(this._iconPrefab).getComponent(l.IconComponent);return n.icon=e,n.setSize(t),n},o}(cc.Component),s=v(c.prototype,"_labelPrefab",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v(c.prototype,"_iconPrefab",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i)||i);n.IconTextWidget=w,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)":"LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)"}],"IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f88191RCPZc44W6MRLCLAxT","IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.IdleAnimationSystem=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.world,o=t.observableStates,a=void 0===o?[]:o,r=t.random,i=t.limitParallelIdles,c=void 0===i?5:i,s=e.call(this)||this;return s._world=n,s._observableStates=a,s._random=r,s._limitParallelIdles=c,s}return a(t,e),t.prototype.process=function(){var e,n,o,a,c=this,s=this._observableStates.map(function(e){return c._world.getState(e)}).filter(function(e){return e&&e.data}).map(function(e){return e.data.flat()}).map(function(e){return e.filter(function(e){return(void 0===e?{entity:null}:e).entity}).map(function(e){return e.entity})}).flat(),p=[],l=this._world.getComponentsByClass(i.GridComponent);try{for(var m=r(l),u=m.next();!u.done;u=m.next())for(var d=u.value.grid,y=0;y<d.rows;y++)for(var f=0;f<d.cols;f++){var h=d.getCell(y,f);if(h)try{for(var g=(o=void 0,r(h.entities)),v=g.next();!v.done;v=g.next()){var _=v.value;p.push(_)}}catch(b){o={error:b}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}}}catch(C){e={error:C}}finally{try{u&&!u.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}return this._world.setState(t.STATE_RESET,s),this._world.setState(t.STATE_SCHEDULE,this._random.shuffle(p).slice(0,this._limitParallelIdles)),!1},t.KEY="idleAnimation",t.STATE_RESET="reset",t.STATE_SCHEDULE="schedule",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.IdleAnimationSystem=c,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"7460cQqvw5FRYgVZ5nZORRO","IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.IdleAnimator=void 0;var o,a=e("./ViewComponent (@tapclap.match-x.cocos.components)"),r=e("./Random (@tapclap.utils-js.random)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=cc._decorator,s=(0,c.ccclass)(o=(0,c.menu)("Game-Kit/IdleAnimator")(o=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._animationItem=null,t._animationKey=null,t._animation=null,t._scheduleCallback=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var a=o.prototype;return a._setAnimation=function(e){var t=e.idle&&0===e.delayFrom&&0===e.delayTo;this._animationItem=e,this._animationKey=e.key,this._animation=e.create({loop:t})},a.scheduleAnimation=function(e){e!==this._animationItem&&(this._setAnimation(e),this._runAnimation())},a._createScheduleCallback=function(){var e=this;this._scheduleCallback=function(){e._animation.run(),e._runAnimation()}},a._runAnimation=function(){if(this._scheduleCallback&&this.unschedule(this._scheduleCallback),this._createScheduleCallback(),this._animationItem.idle&&0===this._animationItem.delayFrom&&0===this._animationItem.delayTo)this._animation.run();else{var e=(new r.Random).getFloat(this._animationItem.delayFrom,this._animationItem.delayTo);this.scheduleOnce(this._scheduleCallback,e)}},a.resetAnimation=function(){var e=this,t=this._animation;if(!t)return Promise.resolve();var n=!t._options||t._options.idle;return t.active&&n?this._animation.stop(!0).then(function(){e._animationItem=null,e._animationKey=null,e._animation=null,e._scheduleCallback&&(e.unschedule(e._scheduleCallback),e._scheduleCallback=null)}):Promise.resolve()},o}(a.ViewComponent))||o)||o;n.IdleAnimator=s,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"929b6XMBHdXy5xq7XpcwtKT","IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.IdleViewComponent=void 0;var i=e("./ViewComponent (@tapclap.match-x.cocos.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetNode=null,t._useDelay=!1,t._delayFrom=0,t._delayTo=0,t}return a(t,e),Object.defineProperty(t.prototype,"delayFrom",{get:function(){return this._delayFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delayTo",{get:function(){return this._delayTo},enumerable:!1,configurable:!0}),t.prototype.run=function(){throw new Error("Method not implemented")},t.prototype.reset=function(){throw new Error("Method not implemented")},r([p({type:cc.Node,visible:!0})],t.prototype,"_targetNode",void 0),r([p({visible:!0})],t.prototype,"_useDelay",void 0),r([p({tooltip:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u043c",displayName:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043e\u0442 (\u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445)",visible:function(){return this._useDelay}})],t.prototype,"_delayFrom",void 0),r([p({tooltip:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u043c",displayName:"\u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u0434\u043e (\u0432 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445)",visible:function(){return this._useDelay}})],t.prototype,"_delayTo",void 0),r([s],t)}(i.ViewComponent);n.IdleViewComponent=l,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"0b78aSt6VNQYYglZxtmGQhJ","ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ImagePublicationResolver=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._map=t.map||{},n._params=t.params||{},n}return a(t,e),t.prototype.resolve=function(e,t){var n,o,a=this._map[e],i=Object.assign({},this._params,t);if(a)try{for(var c=r(Object.keys(i)),s=c.next();!s.done;s=c.next()){var p=s.value;a=a.replace("{{"+p+"}}",i[p])}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return{image:a}},t}(e("./PublicationResolver (@tapclap.game-kit.publication-manager)").PublicationResolver);n.ImagePublicationResolver=i,cc._RF.pop()},{"./PublicationResolver (@tapclap.game-kit.publication-manager)":"PublicationResolver (@tapclap.game-kit.publication-manager)"}],"ImageWindowItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"1ba91P8ky9A9KJkjbbhcRTu","ImageWindowItemComponent (scripts.windows.items)"),n.__esModule=!0,n.ImageWindowItemComponent=void 0;var o,a,r,i,c=e("./IconComponent (@tapclap.game-kit.ui.icons)");function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m,u,d,y,f=cc._decorator,h=f.ccclass,g=(o=(0,f.property)({type:c.IconComponent,visible:!0}),h((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_icon",i,p(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.setImage=function(e){this._icon.icon=e},o}(cc.Component),m=r.prototype,u=[o],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_icon",e)||e},y)).initializer&&(Object.defineProperty(m,"_icon",y),y=null),i=y,a=r))||a);n.ImageWindowItemComponent=g,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)"}],"ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"54a84Trio5R+ZbxRiqxKX3P","ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.ImageWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),f=e("./KeySpriteFrame (@tapclap.game-kit.ui.common)"),h=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function g(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var C=cc._decorator,w=C.ccclass,S=C.property,E=(o=(0,C.menu)("Game-Kit/window-layouts/ImageWindowLayoutComponent"),a=S({type:[f.KeySpriteFrame],visible:!0}),r=S({type:cc.Node,visible:!0}),i=S({type:cc.Sprite,visible:!0}),c=S({type:cc.Label,visible:!0}),w(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return g(t=e.call.apply(e,[this].concat(o))||this,"_images",l,v(t)),g(t,"_imageHolder",m,v(t)),g(t,"_sprite",u,v(t)),g(t,"_label",d,v(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var a=o.prototype;return a.onStart=function(){this._imageHolder.active=!1,this._label.node.active=!1},a.setImage=function(e){if(this._sprite){var t=this._images.find(function(t){return t.key===e});t&&(this._sprite.spriteFrame=t.spriteFrame,this._imageHolder.active=!0)}},a.setText=function(e){if(this._label){var t=this._label.getComponent(y.I18NLabel);t?t.setString(e):this._label.string=e,this._label.node.active=!0}},o}(h.WindowLayoutComponent),l=b(p.prototype,"_images",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=b(p.prototype,"_imageHolder",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=b(p.prototype,"_sprite",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b(p.prototype,"_label",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=p))||s)||s);n.ImageWindowLayoutComponent=E,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./KeySpriteFrame (@tapclap.game-kit.ui.common)":"KeySpriteFrame (@tapclap.game-kit.ui.common)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"InCombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"fcb2aXW1LxQRqZeU8cph/kw","InCombinationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.InCombinationComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="inCombination",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.InCombinationComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"68390/YjYNczb58MqqnZYkA","InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.InGridEdgeEmitTargetStrategy=void 0;var i=e("./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./SwapComponent (@tapclap.match-x.engine.components)"),p=e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),l=e("./LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this,t)||this;return n._excludedEntityComponents=[],n._excludedEntityTypes=[],n._world=t.world,n._random=t.random,n}return a(t,e),t.prototype.getEmitTarget=function(e){var t,n,o,a,s,p=this,l=[],m=function(t){var n,r=(null===(a=null===(o=null==e?void 0:e.entity)||void 0===o?void 0:o.getComponentByClass(i.EmitInGridEdgeComponent))||void 0===a?void 0:a.direction)||(null===(s=u._world.getComponentByClass(i.EmitInGridEdgeComponent))||void 0===s?void 0:s.direction);r&&((n={})[i.EmitInGridEdgeComponentDirections.TOP]=function(){return p._getCells(t,"col",!1)},n[i.EmitInGridEdgeComponentDirections.BOTTOM]=function(){return p._getCells(t,"col",!0)},n[i.EmitInGridEdgeComponentDirections.LEFT]=function(){return p._getCells(t,"row",!1)},n[i.EmitInGridEdgeComponentDirections.RIGHT]=function(){return p._getCells(t,"row",!0)},n)[r]().forEach(function(t){var n=t.getEntity(e.entity.layer);n&&p._isCorrectEntity(n,p._excludedEntityTypes)&&l.push(t)})},u=this;try{for(var d=r(this._world.getComponentsByClass(c.GridComponent)),y=d.next();!y.done;y=d.next())m(y.value.grid)}catch(f){t={error:f}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return this._random.sample(l)},t.prototype._getCells=function(e,t,n){void 0===t&&(t="col"),void 0===n&&(n=!1);var o=[],a="col"===t?"cols":"rows",r=e.filterCells(function(e){var t,n;return(null===(t=e.getEntity())||void 0===t?void 0:t.getEnabledComponentByClass(s.SwapComponent))||(null===(n=e.getEntity())||void 0===n?void 0:n.getEnabledComponentByClass(l.LockEmitInGridEdgeComponent))}).sort(function(e,n){return e[t]-n[t]});n&&r.reverse();for(var i=function(e){var n=r.find(function(n){return n[t]===e});n&&o.push(n)},c=0;c<e[a];c++)i(c);return o},t}(p.EmitTargetStrategy);n.InGridEdgeEmitTargetStrategy=m,cc._RF.pop()},{"./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)":"EmitInGridEdgeComponent (@tapclap.match-x.engine.components)","./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)":"LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)","./SwapComponent (@tapclap.match-x.engine.components)":"SwapComponent (@tapclap.match-x.engine.components)"}],"IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0ad13lQYj5XvJAG6luLUlf3","IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.IncreaseAttemptsAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._attempts=t.attemptsModuleResolver.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._attempts&&this._attempts.increase(),Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.IncreaseAttemptsAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)":[function(e,t,n){"use strict";cc._RF.push(t,"44468f/V9hStozN104YfHe3","IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IncreaseEntityDropAfterRemoveCounterProbabilityFilter=void 0;var r=function(e){function t(t){var n=t.dropAfterRemoveSystem,o=e.call(this)||this;return o._dropAfterRemoveSystem=n,o}return a(t,e),t.prototype.filter=function(e){return this._dropAfterRemoveSystem.processAfterDrop(),e},t}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.IncreaseEntityDropAfterRemoveCounterProbabilityFilter=r,cc._RF.pop()},{"./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"IncreaseLevelStartCountAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"e41daCC5iJYWJ7WWvYGIarT","IncreaseLevelStartCountAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IncreaseLevelStartCountAction=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._storage=t.storage,n._storageKey=t.storageKey,n._countForResetValue=t.countForResetValue,n}return a(t,e),t.prototype.run=function(){var e=this;return this._storage.getItem(this._storageKey).then(function(t){return void 0===t&&(t=1),e._setStorage(Number(t))})},t.prototype._setStorage=function(e){var t=e===this._countForResetValue?1:++e;this._storage.setItem(this._storageKey,t)},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.IncreaseLevelStartCountAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4a194rqpGVQVa/u+QUitUcs","IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.IncreaseProgressByLevelAction=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._progress=t.progressModuleResolver.get(),n._metaGame=t.metaGameResolver.get(),n._level=t.level,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._canProgressIncrease=function(){return parseInt(this._progress.value)===parseInt(this._level.number)},r.run=function(){return this._progress&&this._canProgressIncrease()&&(this._progress.increase(),this._caller.has(a.CALLER_ON_INCREASE))?this._caller.run(a.CALLER_ON_INCREASE):Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.IncreaseProgressByLevelAction=a,a.CALLER_ON_INCREASE="onIncrease",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"83b37EdcmNVzr7P29ZnYBft","InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.InheritGroupOnSwapComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.InheritGroupOnSwapComponent=a,a.KEY="inheritGroupOnSwap",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"5a527jKOFFR4LuGlCt+t0oT","InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.InheritGroupSwapSystemHandler=void 0;var r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t){var n=[e,t],o=n.find(function(e){return null==e?void 0:e.getEnabledComponentByClass(i.InheritGroupOnSwapComponent)});if(o){var a=n.find(function(e){return e!==o});if(o&&a){var c=o.getEnabledComponentByClass(r.GroupComponent),s=a.getEnabledComponentByClass(r.GroupComponent);c&&s&&(c.id=s.id)}}},t}(e("./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)").SwapSystemHandler);n.InheritGroupSwapSystemHandler=c,cc._RF.pop()},{"./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)":"InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)","./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)":"SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)"}],"InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":[function(e,t,n){"use strict";cc._RF.push(t,"ba6a1B2FGJfWaTZVEXb1SX7","InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),n.__esModule=!0,n.InitialRandomProbabilityFilter=void 0;var o=e("./EntityProbabilityComponent (@tapclap.match-x.engine.components)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._gridComponent=t.gridComponent,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.filter=function(e){var t=Object.assign({},e),n=this._gridComponent.grid.getEnabledComponent(o.EntityProbabilityComponent.KEY);return n&&n.ignoredProbabilitiesOnInitialRandom.forEach(function(e){delete t[e]}),t},r}(e("./ProbabilityFilter (@tapclap.match-x.engine.helpers)").ProbabilityFilter);n.InitialRandomProbabilityFilter=r,cc._RF.pop()},{"./EntityProbabilityComponent (@tapclap.match-x.engine.components)":"EntityProbabilityComponent (@tapclap.match-x.engine.components)","./ProbabilityFilter (@tapclap.match-x.engine.helpers)":"ProbabilityFilter (@tapclap.match-x.engine.helpers)"}],"Inject (@tapclap.utils-js.inject)":[function(e,t,n){"use strict";cc._RF.push(t,"b1ba2VoBJ9QKZHy/rz+KfnY","Inject (@tapclap.utils-js.inject)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Inject=void 0;var o=Symbol();function a(e,t){return e||("_"===t[0]?t.substring(1):t)}function r(e,t){void 0===e&&(e=void 0),void 0===t&&(t=!0);var n=Symbol();return function(o,i){return Object.defineProperty(o,i,{get:function(){if(void 0===this[n]){var o=r.getRegistry();if(o){var c=o.getInject(a(e,i));return t&&(this[n]=c),c}throw new Error("Not found inject registry, need call Inject.setRegistry()")}return this[n]}})}}n.Inject=r,r.setRegistry=function(e){r[o]=e},r.getRegistry=function(){return r[o]},cc._RF.pop()},{}],"Input (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";cc._RF.push(t,"70ff1/bSgFfN7VaI57+5kQM","Input (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.Input=void 0;var o,a=(o=e("merge-options"))&&o.__esModule?o:{default:o};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(e){var t=void 0===e?{}:e,n=t.type,o=void 0===n?"":n,a=t.data,r=void 0===a?{}:a;this._type=o,this._data=r}var t,n,o=e.prototype;return o.isEqual=function(e){if(this.type===e.type){for(var t=0,n=Object.entries(this.data);t<n.length;t++){var o=n[t],a=o[0],r=o[1];if(e.data[a]!==r)return!1}return!0}return!1},o.toJSON=function(){return(0,a.default)({},{type:this.type,data:this.data})},t=e,(n=[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Input=i,i.TYPE_RAW="raw",i.TYPE_DRAG="drag",i.TYPE_DRAG_START="dragstart",i.TYPE_DRAG_ENTER="dragenter",i.TYPE_DRAG_LEAVE="dragleave",i.TYPE_DROP="drop",cc._RF.pop()},{"merge-options":3}],"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":[function(e,t,n){"use strict";cc._RF.push(t,"924922OVt5S/YXbaz1jcBDA","InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.InputCallbackDevConsoleCommand=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._placeholder=t.placeholder,n}return a(t,e),t.prototype.execute=function(){var e=this;return this.devConsoleComponent.showEditbox(this._placeholder).then(function(t){if(e._callback)return e._callback(t,e._devConsoleComponent)})},t}(e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)").CallbackDevConsoleCommand);n.InputCallbackDevConsoleCommand=r,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"}],"InputComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7b93fV2Z2tURaanbNsDmlvP","InputComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.InputComponent=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._currentInput=null,t._prevInput=null,t._handler=null,t._countLock=0,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.reset=function(){this._currentInput=null,this._prevInput=null,this._handler=null},s.lock=function(){this._countLock++,this.enable=!1},s.unlock=function(){this._countLock=Math.max(--this._countLock,0),0===this._countLock&&(this.enable=!0)},s.resetLock=function(){this._countLock=0,this.enable=!0},i=r,(c=[{key:"isHandled",get:function(){return!!this._handler}},{key:"handler",get:function(){return this._handler},set:function(e){this._handler=e}},{key:"currentInput",get:function(){return this._currentInput},set:function(e){this._currentInput=e}},{key:"prevInput",get:function(){return this._prevInput},set:function(e){this._prevInput=e}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Component (@tapclap.match-x.engine.components)").Component);n.InputComponent=r,r.KEY="input",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"InputHandler (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";cc._RF.push(t,"a8a08g9YXRdlbvYM3Bkg2pe","InputHandler (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.InputHandler=void 0;var o=function(){function e(){}var t=e.prototype;return t.capture=function(){return!0},t.handle=function(){return!1},e}();n.InputHandler=o,cc._RF.pop()},{}],"InputHandlerComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f6080XNagtbEYM89qjG3NM9","InputHandlerComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.InputHandlerComponent=void 0;var a=function(e){var t,n;function a(t){var n,o=void 0===t?{}:t,a=o.allowInputHandlers,r=void 0===a?[]:a,i=o.disallowInputHandlers,c=void 0===i?[]:i;return(n=e.call(this)||this)._allowInputHandlers=r||[],n._disallowInputHandlers=c||[],n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.isInputAllowed=function(e,t){var n=function(n){return n.find(function(n){var o=n.split(":"),a=o[0],r=o[1];if(a===e)return!r||r===t})};return this._allowInputHandlers.length>0?n(this._allowInputHandlers):!n(this._disallowInputHandlers)},a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.InputHandlerComponent=a,a.KEY="inputHandler",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":[function(e,t,n){"use strict";cc._RF.push(t,"74577qbc8Nbtot1y4x58wGK","InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandlerEffectVerifier=void 0;var i=e("./InputHandlerComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.canApply=function(e,t){var n,o;try{for(var a=r(e.invertedEntities),c=a.next();!c.done;c=a.next()){var s=c.value.getEnabledComponentByClass(i.InputHandlerComponent);return!s||s.isInputAllowed(t.handler,t.name)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},t}(e("./EffectVerifier (@tapclap.match-x.engine.effects)").EffectVerifier);n.InputHandlerEffectVerifier=c,cc._RF.pop()},{"./EffectVerifier (@tapclap.match-x.engine.effects)":"EffectVerifier (@tapclap.match-x.engine.effects)","./InputHandlerComponent (@tapclap.match-x.engine.components)":"InputHandlerComponent (@tapclap.match-x.engine.components)"}],"InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b1d53vCuqBb4J+dOtdVOR/7","InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.InputLockAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./AnimationData (@tapclap.match-x.cocos.animations)"),r=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n,o=t.match3Component,a=t.lock,r=void 0!==a&&a;return(n=e.call(this)||this)._match3Component=o,n._lock=r,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.build=function(){var e=this;return[[new a.AnimationData(null,new r.FunctionAnimation(function(){e._lock?e._match3Component.lockInputNodes():e._match3Component.unlockInputNodes()}))]]},o}(o.GameActionBuilder);n.InputLockAnimationBuilder=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)":[function(e,t,n){"use strict";cc._RF.push(t,"3a1ecYtNwhMuZGKI/bJgZif","InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)"),n.__esModule=!0,n.InputScenarioProducer=void 0;var o=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n,o=t.targetResolver,a=t.backdropManager;return(n=e.call(this)||this)._targetResolver=o,n._backdropManager=a,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.produce=function(e){var t=new o.TutorialScenarioBuilder({backdropManager:this._backdropManager,targetResolver:this._targetResolver}),n=e.targets||[];switch(e.action){case"wait":t.addWaitInput(n);break;case"attach":t.attachInput(n);break;case"detach":t.detachInput(n);break;case"lock":t.lockInput();break;case"unlock":t.unlockInput()}return t.build()},r}(e("./ScenarioProducer (@tapclap.game-kit.scenario-manager)").ScenarioProducer);n.InputScenarioProducer=r,cc._RF.pop()},{"./ScenarioProducer (@tapclap.game-kit.scenario-manager)":"ScenarioProducer (@tapclap.game-kit.scenario-manager)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"}],"InputSystem (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";cc._RF.push(t,"56903axYMBY7IaibnPYmPxV","InputSystem (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.InputSystem=void 0;var o=e("./System (@tapclap.match-x.engine.systems)"),a=e("./InputHandler (@tapclap.match-x.engine.systems.input-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[new a.InputHandler]),(o=e.call(this)||this)._world=t,o._handlers=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.process=function(e,t){void 0===t&&(t=!1);var n=this._world.getComponent("input");if(n&&(n.enable||t)){n.isHandled&&n.reset(),n.prevInput=n.currentInput,n.currentInput=e;for(var a,i=!1,c=r(this._handlers);!(a=c()).done;){var s=a.value;if(s.capture(n.currentInput,n.prevInput,this._world)&&(i=!0),s.handle(n.currentInput,n.prevInput,this._world)){i=!0,n.handler=s;break}}if(i)return this._world.setState(o.STATE,{input:n,world:this._world}),this.events.emit("input"),!0}return!1},o}(o.System);n.InputSystem=p,p.KEY="input",p.STATE="input",cc._RF.pop()},{"./InputHandler (@tapclap.match-x.engine.systems.input-system)":"InputHandler (@tapclap.match-x.engine.systems.input-system)","./System (@tapclap.match-x.engine.systems)":"System (@tapclap.match-x.engine.systems)"}],"InstanceBuilderDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";cc._RF.push(t,"f44cbW5Gy1CrrjFGX5FdIZV","InstanceBuilderDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceBuilderDI=void 0;var o=e("./InstanceRawDI (@tapclap.utils-js.di)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(){function e(e){var t=void 0===e?{}:e,n=t.commands,o=void 0===n?[]:n,a=t.ctx,r=void 0===a?{}:a,i=t.builders,c=void 0===i?{}:i,s=t.from,p=void 0===s?null:s,l=t.fromType,m=void 0===l?null:l,u=t.ref,d=void 0===u?null:u;t.lazy,this._commands=o,this._ref=d,this._from=p,this._fromType=m,this._ctx=r,this._builders=c,this._lazy=!1}var t=e.prototype;return t._addCommand=function(e,t){this._commands.push({type:e,options:t})},t._setValue=function(e,t){this._addCommand("setValue",{property:e,value:t})},t.ctor=function(e){if("function"!=typeof e)throw new Error("ctor must be function");return this._setValue("ctor",e),this},t.args=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._setValue("args",t),this},t.setArg=function(e,t,n,a){if(void 0===t&&(t=0),void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===t)throw new Error("Arg index undefined");var r="object"==typeof e?Object.assign({},e):e;return a&&("object"==typeof r?Object.keys(r).forEach(function(e){return r[e]=new o.InstanceRawDI(r[e])}):r=new o.InstanceRawDI(r)),this._addCommand("setArgValue",{index:t,value:r,merge:n}),this},t.mergeArgs=function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(function(t,n){return e.setArg(t,n,!0)}),this},t.mergeArgsWithWrap=function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach(function(t,n){return e.setArg(t,n,!0,!0)}),this},t.addArgs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._addCommand("addArgs",{args:t}),this},t.singleton=function(e){return void 0===e&&(e=!0),this._setValue("singleton",e),this},t.lazy=function(e){return void 0===e&&(e=!0),this._lazy=e,this},t.ctx=function(e){return this._ctx=e,this},t.fromBuilder=function(t){return this._ref&&this._throwRefFromConflictError(),this._fromType=e.FROM_BUILDER,this._from=t,this},t.fromCtx=function(t){return this._ref&&this._throwRefFromConflictError(),this._fromType=e.FROM_CTX,this._from=t,this},t.from=function(t){return this._ref&&this._throwRefFromConflictError(),this._fromType=e.FROM_DI,this._from=t,this},t.builders=function(e){return this._builders=e,this},t.ref=function(e){return this._from&&this._throwRefFromConflictError(),this._ref=e,this},t.getCommands=function(){return this._commands},t.getRef=function(){return this._ref},t.getBuilders=function(){return this._builders},t.getFrom=function(){return this._from},t.getFromType=function(){return this._fromType},t.getCtx=function(){return this._ctx},t.getLazy=function(){return this._lazy},t.applyBuilder=function(e){var t;return Object.assign({},e.getCtx(),this._ctx),Object.assign({},e.getBuilders(),this._builders),this._lazy=e.getLazy(),(t=this._commands).push.apply(t,e.getCommands()),this},t.snapshot=function(){return new e({commands:this._commands.map(function(e){return Object.assign({},e)}),ctx:Object.assign({},this._ctx),builders:Object.assign({},this._builders),from:this._from,fromType:this._fromType,ref:this._ref,lazy:this._lazy})},t.create=function(){for(var e,t={args:[]},n=a(this._commands);!(e=n()).done;){var o=e.value,r=o.type,i=o.options;switch(r){case"setValue":var c=i.property,s=i.value,p=s;Array.isArray(s)?p=[].concat(s):"object"==typeof s&&(p=Object.assign({},s)),t[c]=p;break;case"setArgValue":var l=i.index,m=i.value,u=i.merge;t.args[l]=u?Object.assign({},t.args[l]||{},m):m;break;case"addArgs":t.args=t.args.concat(i.args);break;default:throw new Error("Unknown command "+r)}}return t},t._throwRefFromConflictError=function(){throw new Error("\u041d\u0435\u043b\u044c\u0437\u044f \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c from (from, fromBuilder, fromCtx) \u0438 ref (cfg, ctx)")},e}();n.InstanceBuilderDI=c,c.FROM_BUILDER="builder",c.FROM_CTX="ctx",c.FROM_DI="di",cc._RF.pop()},{"./InstanceRawDI (@tapclap.utils-js.di)":"InstanceRawDI (@tapclap.utils-js.di)"}],"InstanceContainerDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";cc._RF.push(t,"f2e96GhgTpF+oaImq4DF1xO","InstanceContainerDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceContainerDI=void 0;var o=e("./InstanceBuilderDI (@tapclap.utils-js.di)"),a=e("./InstanceRawDI (@tapclap.utils-js.di)"),r=e("./InstanceFunctionDI (@tapclap.utils-js.di)"),i=e("./InstanceObjectDI (@tapclap.utils-js.di)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(){return(l=m()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&u(a,n.prototype),a}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(){function e(e,t,n){void 0===n&&(n=0),this._di=e,this._key=t,this._ctx={},this._rawCtx={},this._builders={},this._level=n}var t=e.prototype;return t.createInstance=function(e){var t=this,n=(e=this._processBuilder(e)).getRef();if(n){if(!n.absolute)return this._ctx[n.key];if(!n.key)return this._di}var o=e.create();if(o.singleton){var a=this._di.getSingleton(this._key);if(a)return a}var r=o.args.map(function(e,n){return t._processParam(e,"arg:"+n)}),i=l(o.ctor,r).valueOf();return o.singleton&&this._di.setSingleton(this._key,i),i},t._processBuilder=function(e){var t=e.getRef(),n=e.getFrom(),o=e.getBuilders(),a=e.getCtx();if(o&&Object.assign(this._builders,o),a){Object.assign(this._rawCtx,a);for(var r=0,i=Object.keys(a);r<i.length;r++){var c=i[r];this._ctx[c]=this._processParam(a[c],"ctx:"+c)}}if(t&&t.absolute&&t.key){this._key=t.key;var s=this._di.getConfig(t.key),p=s.snapshot().ctx(Object.assign({},e.getCtx(),s.getCtx()));return this._processBuilder(p)}return n?this._processBuilder(this._processFrom(n,e.getFromType()).snapshot().applyBuilder(e)):e},t._processFrom=function(e,t){var n=null;switch(t){case o.InstanceBuilderDI.FROM_BUILDER:n=this._builders[e].snapshot();break;case o.InstanceBuilderDI.FROM_CTX:n=this._rawCtx[e].snapshot();break;case o.InstanceBuilderDI.FROM_DI:n=this._di.getConfig(e).snapshot().singleton(!1);break;default:throw new Error("Unknown 'fromType' "+t+" of "+e)}return n},t._processParam=function(t,n){return t instanceof a.InstanceRawDI?t.value:t instanceof r.InstanceFunctionDI?t.func.apply(t,this._processArrayParam(t.args).valueOf()):t instanceof i.InstanceObjectDI?this._processObjectParam(t.value):t instanceof o.InstanceBuilderDI?t.getLazy()?t:new e(this._di,n,this._level+1).configure({ctx:this._ctx,rawCtx:this._rawCtx,builders:this._builders}).createInstance(t):Array.isArray(t)?this._processArrayParam(t):"object"==typeof t&&t?this._processObjectParam(t):t},t.processParam=function(e){return this._processParam(e,this._key)},t._processObjectParam=function(e){for(var t={},n=0,o=Object.keys(e);n<o.length;n++){var a=o[n];t[a]=this._processParam(e[a],a)}return t},t._processArrayParam=function(e){for(var t,n=[],o=0,a=c(e);!(t=a()).done;){var r=t.value;n.push(this._processParam(r,o++))}return n},t.configure=function(e){var t=e.ctx,n=void 0===t?{}:t,o=e.rawCtx,a=void 0===o?{}:o,r=e.builders,i=void 0===r?{}:r;return this._ctx=n,this._rawCtx=a,this._builders=i,this},e}();n.InstanceContainerDI=d,cc._RF.pop()},{"./InstanceBuilderDI (@tapclap.utils-js.di)":"InstanceBuilderDI (@tapclap.utils-js.di)","./InstanceFunctionDI (@tapclap.utils-js.di)":"InstanceFunctionDI (@tapclap.utils-js.di)","./InstanceObjectDI (@tapclap.utils-js.di)":"InstanceObjectDI (@tapclap.utils-js.di)","./InstanceRawDI (@tapclap.utils-js.di)":"InstanceRawDI (@tapclap.utils-js.di)"}],"InstanceFunctionDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"bbebfA7JmpXY70ySRaBMR2v","InstanceFunctionDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceFunctionDI=void 0;var a=function(){function e(e){this._func=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this._args=n,this._parsedArgs=[]}var t,n;return t=e,(n=[{key:"func",get:function(){return this._func}},{key:"args",get:function(){return this._args}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.InstanceFunctionDI=a,cc._RF.pop()},{}],"InstanceObjectDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"fb1af8BiDdTcrilwpMXhkSm","InstanceObjectDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceObjectDI=void 0;var a=function(){function e(e){this._value=e}var t,n;return t=e,(n=[{key:"value",get:function(){return this._value}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.InstanceObjectDI=a,cc._RF.pop()},{}],"InstanceRawDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"d4d55WossBOQZYshDFRsqDd","InstanceRawDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceRawDI=void 0;var a=function(){function e(e){this._value=e}var t,n;return t=e,(n=[{key:"value",get:function(){return this._value}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.InstanceRawDI=a,cc._RF.pop()},{}],"InstanceReferenceDI (@tapclap.utils-js.di)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"b361b+++q1OhLOIDAw1yrQI","InstanceReferenceDI (@tapclap.utils-js.di)"),n.__esModule=!0,n.InstanceReferenceDI=void 0;var a=function(){function e(e,t){void 0===t&&(t=!0),this._absolute=t,this._self=void 0===e,this._key=e}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"absolute",get:function(){return this._absolute}},{key:"self",get:function(){return this._self}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.InstanceReferenceDI=a,cc._RF.pop()},{}],"InteractiveScrollbarComponent (scripts.common.scroll)":[function(e,t,n){"use strict";cc._RF.push(t,"686dfIQnIZar7qA05FQ2EIW","InteractiveScrollbarComponent (scripts.common.scroll)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.InteractiveScrollbarComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._scrollView=null,t._offsetY=15,t}return a(t,e),t.prototype._subscribeDrag=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this._handleDrag,this)},t.prototype._handleDrag=function(e){this._scrollView&&this._scrollView.stopAutoScroll(),this._processVerticalScroll(e.getDeltaY())},t.prototype._processVerticalScroll=function(e){if(this._scrollView){var t=this._scrollView.getScrollOffset(),n=(e>0?-this._offsetY:this._offsetY)*Math.abs(e),o=new cc.Vec2(t.x,t.y+n);this._scrollView.scrollToOffset(o)}},t.prototype.start=function(){this._subscribeDrag()},r([s({visible:!0,type:cc.ScrollView})],t.prototype,"_scrollView",void 0),r([s({visible:!0,type:cc.Float})],t.prototype,"_offsetY",void 0),r([c,p("Metas/Scroll/InteractiveScrollbarComponent")],t)}(cc.Component);n.InteractiveScrollbarComponent=l,cc._RF.pop()},{}],"InterstitialAdCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"5d903mJSGtS9ag9qPulkQXE","InterstitialAdCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.InterstitialAdCondition=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._adProvider=t.adProvider,n._commonCondition=t.commonCondition,n._conditionsByAdProvider=t.conditionsByAdProvider,n}return a(t,e),t.prototype.setActionKey=function(e){this._actionKey=e},t.prototype.check=function(){var e=this;return this._commonCondition.check().then(function(t){if(t){var n=e._adProvider.getType(),o=e._getConditionByProviderType(n);if(o)return o.check()}return!1})},t.prototype._getConditionByProviderType=function(e){var t,n=this;return e in this._conditionsByAdProvider||(e="default"),null===(t=this._conditionsByAdProvider[e].find(function(e){return e.actionKey===n._actionKey}))||void 0===t?void 0:t.condition},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.InterstitialAdCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"InterstitialAdConditionAction (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"6a6cdC/sItfqZ10/GzJlDEg","InterstitialAdConditionAction (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.InterstitialAdConditionAction=void 0;var r=e("./ConditionalAction (@tapclap.game-kit.action-manager)"),i=function(e){function t(t){var n=e.call(this,t)||this;return n._actionKey=t.actionKey,n}return a(t,e),t.prototype.run=function(){var e=this;this._condition.setActionKey(this._actionKey);var t=function(t){if(e._caller.has(t))return e._caller.run(t)};return Promise.resolve().then(function(){return e._condition.check()}).then(function(n){return n?console.log("showInterstitialAd====>",e._actionKey):console.log("noInterstitialAd====>",e._actionKey),t(n?r.ConditionalAction.CALLER_TRUE:r.ConditionalAction.CALLER_FALSE)})},t}(r.ConditionalAction);n.InterstitialAdConditionAction=i,cc._RF.pop()},{"./ConditionalAction (@tapclap.game-kit.action-manager)":"ConditionalAction (@tapclap.game-kit.action-manager)"}],"IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2c83fkVNsZETavw8PmpcJVp","IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)"),n.__esModule=!0,n.IntervalRewardMetaModule=void 0;var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._dateOfClaim=new Date,n._nextRewardIndex=0,n._delayTimeout=t.delayTimeout,n._resetTimeout=t.resetTimeout,n._cycleCount=t.cycleCount,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.init=function(t){var n=void 0===t?{}:t,o=n.dateOfClaim,a=void 0===o?new Date:o,r=n.nextRewardIndex,i=void 0===r?0:r;return this._dateOfClaim=new Date(a),this._nextRewardIndex=i,(this._dateOfClaim.getTime()+1e3*this._resetTimeout.getDuration()<(new Date).getTime()||!this._isAvailable)&&(this._nextRewardIndex=0),e.prototype.init.call(this,this.serialize())},s.hasReward=function(){var e=this;return Promise.resolve().then(function(){return e._getServerCurrentTime()}).then(function(t){return e._dateOfClaim.getTime()+1e3*e._delayTimeout.getDuration()<t})},s.resetReward=function(){this._dateOfClaim=new Date,this._nextRewardIndex=(this._nextRewardIndex+1)%this._cycleCount,this.emitChange(),this.getService().save(this.serialize())},s.getRewardIndex=function(){return this._nextRewardIndex},s.serialize=function(){return{dateOfClaim:this._dateOfClaim.toString(),nextRewardIndex:this._nextRewardIndex}},s.replaceDateOfRewardClaim=function(e){return this._dateOfClaim=e,this.emitChange(),this.getService().save(this.serialize())},s.reset=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=new Date),this._dateOfClaim=t,this._nextRewardIndex=e,this._isAvailable||(this._nextRewardIndex=0),this.emitChange(),this.getService().save(this.serialize())},s._getServerCurrentTime=function(){return this.getService().get().then(function(e){return e&&e.serverTime?new Date(e.serverTime):Date.now()}).catch(function(e){return console.error(e),Date.now()})},i=r,(c=[{key:"cycleCount",get:function(){return this._cycleCount}},{key:"_isAvailable",get:function(){return this._nextRewardIndex>=0&&this._nextRewardIndex<this._cycleCount}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)").RewardMetaModule);n.IntervalRewardMetaModule=r,cc._RF.pop()},{"./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"}],"IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"90d59wDJg5UyJl2Xusi9Qr9","IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IntervalMetaModuleDevConsoleMenuGenerator=void 0;var r=e("./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),i=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)"),p=function(e){function t(t){var n=e.call(this,t)||this;return n._instance=s.IntervalRewardMetaModule,n}return a(t,e),t.prototype.generate=function(){var e=this;return{reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new i.CallbackDevConsoleCommand({callback:function(){e._module.reset().then(function(){return e._restartCurrentMetaGame()})}})},setLevel:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u0442\u0443 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f",command:new c.InputCallbackDevConsoleCommand({placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434",callback:function(t){var n=new Date((new Date).getTime()-864e5*t);e._module.reset(e._module.getRewardIndex(),n).then(function(){return e._restartCurrentMetaGame()})}})}}},t}(r.MetaModuleDevConsoleMenuGenerator);n.IntervalMetaModuleDevConsoleMenuGenerator=p,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)":"IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)","./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"}],"JarjamSpineViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"35b0fdxHrBTu5ndb1MTAztJ","JarjamSpineViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.JarjamSpineViewComponent=void 0;var i=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),c=e("./JarjamViewComponent (scripts.entity-view-components)"),s=e("./Entity (@tapclap.match-x.engine.entities)"),p=cc._decorator,l=p.ccclass,m=p.property,u=p.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._prefab=null,t._finishAnimationKey="",t._skinKey="",t}return a(t,e),t.prototype.runAnimation=function(e,t,n){var o=this;return new Promise(function(a){var r=n.getComponentByClass(i.RenderComponent).node,c=t.getComponentByClass(i.RenderComponent).node,p=cc.instantiateFrom(o._prefab),l=p.getComponentInChildren(sp.Skeleton),m=o.detectDirection(e,t);if(l.setEventListener(function(e,t){t.data.name===o._finishAnimationKey&&a()}),l.setCompleteListener(function(){p.runAction(cc.sequence([cc.fadeOut(.3),cc.callFunc(function(){return p.destroy()})]))}),m){l.defaultAnimation=m,l.defaultSkin=o._skinKey,p.active=!0;var u=c.parent.convertToWorldSpaceAR(c.getPosition());p.setPosition(r.parent.convertToNodeSpaceAR(u)),r.parent.addChild(p,s.Entity.LAYER_LOWER)}else a()})},r([m({type:cc.Prefab,visible:!0})],t.prototype,"_prefab",void 0),r([m({visible:!0})],t.prototype,"_finishAnimationKey",void 0),r([m({visible:!0})],t.prototype,"_skinKey",void 0),r([l,u("EntityViews/Jarjam/SpineView")],t)}(c.JarjamViewComponent);n.JarjamSpineViewComponent=d,cc._RF.pop()},{"./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./JarjamViewComponent (scripts.entity-view-components)":"JarjamViewComponent (scripts.entity-view-components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"JarjamViewComponent (scripts.entity-view-components)":[function(e,t,n){"use strict";cc._RF.push(t,"387bf/7eHZR3oq1QQFrqoX0","JarjamViewComponent (scripts.entity-view-components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.JarjamViewComponent=n.DIRECTION=void 0;var c,s=cc._decorator.ccclass;(function(e){e.center="center",e.top="up",e.right="right",e.bottom="down",e.left="left"})(c=n.DIRECTION||(n.DIRECTION={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.detectDirection=function(e,t){var n=e.row,o=e.col,a=t.row,r=t.col,s=i([n-a,o-r],2),p=s[0],l=s[1];switch(!0){case p<0:return c.right;case p>0:return c.left;case l<0:return c.bottom;case l>0:return c.top;case 0===p&&0===l:return c.center;case 0!==p&&0!==l:return null}},t.DIRECTION=c,r([s],t)}(cc.Component);n.JarjamViewComponent=p,cc._RF.pop()},{}],"JsonRemoteConfig (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"64a06YfdxpbT7UCi6XQ5/Zr","JsonRemoteConfig (@tapclap.sdk-x.remote-config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.JsonRemoteConfig=void 0;var o=function(){function e(e){var t=e.httpClient,n=e.url,o=e.defaults,a=void 0===o?{}:o;this._httpClient=t,this._url=n,this._config=Object.assign({},null!=a?a:{})}return e.prototype.init=function(){return this.fetch()},e.prototype.fetch=function(){var e=this;return this._httpClient.request(this._url).then(function(t){Object.assign(e._config,t)}).catch(function(){throw new Error("JsonRemoteConfig fetch failed for url: "+e._url)})},e.prototype.getBoolean=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:Boolean(t._getValue(e))}})},e.prototype.getInteger=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:Number(t._getValue(e))}})},e.prototype.getDouble=function(e){return this.getInteger(e)},e.prototype.getString=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:String(t._getValue(e))}})},e.prototype.getJSON=function(e){var t=this;return Promise.resolve().then(function(){return{key:e,value:t._getValue(e)}})},e.prototype._getValue=function(e){if(void 0===this._config[e])throw new Error("Value for '"+e+"' not defined");return this._config[e]},e}();n.JsonRemoteConfig=o,cc._RF.pop()},{}],"KawaseBlurComponent (scripts.common.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5b737cPkVBc/Jo2FcsaoMYz","KawaseBlurComponent (scripts.common.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderTexture=null,t.sprite=null,t.material=null,t.passes=5,t}return a(t,e),t.prototype.start=function(){var e=this.sprite.node;this.onDestroy();var t=new cc.RenderTexture,n=new cc.RenderTexture;this.initRenderTexture(e,t);var o=this.material;o.setProperty("resolution",cc.v2(e.width,e.height));for(var a=1;a<this.passes;a++){var r=a%2==0,i=r&&n||t,c=r&&t||n;o.setProperty("offset",a),this._renderWithMaterial(i,c,o)}this.sprite.spriteFrame=new cc.SpriteFrame(n),this._renderTexture=n,t.destroy()},t.prototype.onDestroy=function(){this._renderTexture&&this._renderTexture.destroy()},t.prototype.initRenderTexture=function(e,t){var n=Math.floor(e.height);return t.initWithSize(Math.floor(e.width),n),this._renderToTexture(e,t)},t.prototype._renderToTexture=function(e,t,n){var o=new cc.Node;o.setParent(e);var a=o.addComponent(cc.Camera);return a.clearFlags|=cc.Camera.ClearFlags.COLOR,a.backgroundColor=cc.Color.TRANSPARENT,a.zoomRatio=cc.winSize.height/(n||e.height),a.targetTexture=t,a.render(e),o.destroy(),t},t.prototype._renderWithMaterial=function(e,t,n){var o=new cc.Node;o.setParent(cc.Canvas.instance.node);var a=o.addComponent(cc.Sprite);a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1,a.spriteFrame=new cc.SpriteFrame(e);var r=e.height;return t.initWithSize(e.width,r),a.setMaterial(0,n),this._renderToTexture(o,t,r),o.destroy(),t},r([s(cc.Sprite)],t.prototype,"sprite",void 0),r([s(cc.Material)],t.prototype,"material",void 0),r([s({type:cc.Integer,range:[3,9,2]})],t.prototype,"passes",void 0),r([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],"KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"dd44f7GVBBTb5iaGNXe5P8G","KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.KeepGoalAfterCompleteComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="keepGoalAfterComplete",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.KeepGoalAfterCompleteComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"KeyNode (@tapclap.game-kit.ui.common)":[function(e,t,n){"use strict";cc._RF.push(t,"ecdceWxM5ldAIE0IFIafiHg","KeyNode (@tapclap.game-kit.ui.common)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.KeyNode=void 0;var a=cc._decorator,r=a.ccclass,i=a.property,c=function(){function e(){this.key="",this.node=null}return o([i(cc.String)],e.prototype,"key",void 0),o([i(cc.Node)],e.prototype,"node",void 0),o([r("KeyNode")],e)}();n.KeyNode=c,cc._RF.pop()},{}],"KeySpriteFrame (@tapclap.game-kit.ui.common)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p;function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"414eepRXyRC2Z3YMjm+w+Co","KeySpriteFrame (@tapclap.game-kit.ui.common)"),n.__esModule=!0,n.KeySpriteFrame=void 0;var u=cc._decorator,d=u.ccclass,y=u.property,f=(o=d("KeySpriteFrame"),a=y(),r=y(cc.SpriteFrame),o((s=m((c=function(){l(this,"key",s,this),l(this,"spriteFrame",p,this);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],a=t[1];this.key=o,this.spriteFrame=a}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=m(c.prototype,"spriteFrame",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.KeySpriteFrame=f,cc._RF.pop()},{}],"KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"15dc30Vk+5VLZ39xG2C/zgf","KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.KitchenTimerEntityComponentLevelRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e,t){return{addMovesOnExplode:{movesCount:t.addMovesAmount[e.col+"-"+e.row]}}},t}(e("./EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)").EntityComponentLevelRetriever);n.KitchenTimerEntityComponentLevelRetriever=r,cc._RF.pop()},{"./EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":"EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)"}],"KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"fcc4dBvPHJbaL55oKuxbDTS","KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.KitchenTimerEntityRenderDecorator=void 0;var r=e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)"),i=e("./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),c=e("./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.decorate=function(e,t,n){var o=n.getComponent(r.StepCounterViewComponent),a=t.getComponentByClass(c.AddMovesOnExplodeComponent);o&&a&&o.setValue(a.movesCount)},t.KEY="kitchen-timer",t}(i.EntityRenderDecorator);n.KitchenTimerEntityRenderDecorator=s,cc._RF.pop()},{"./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)":"AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)","./EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)"}],"LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x;function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function k(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"e58f8D30kxK6ITz57iYlf5d","LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)"),n.__esModule=!0,n.LabelStyleWidget=void 0;var T=cc._decorator,I=T.ccclass,M=T.property,j=T.menu,L=(o=I("StyleLabel"),a=M(cc.String),r=M(cc.Color),i=M(cc.Color),c=M(cc.Integer),s=M(cc.Integer),p=M(cc.Integer),o((u=k((m=function(){P(this,"key",u,this),P(this,"textColor",d,this),P(this,"outLineColor",y,this),P(this,"outLineWidth",f,this),P(this,"fontSize",h,this),P(this,"lineHeight",g,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=k(m.prototype,"textColor",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),y=k(m.prototype,"outLineColor",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),f=k(m.prototype,"outLineWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),h=k(m.prototype,"fontSize",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),g=k(m.prototype,"lineHeight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),l=m))||l),F=(v=j("UI-Kit/Label/LabelStyle"),_=M({type:cc.Label,visible:!0}),b=M({type:[L],visible:!0}),C=M({type:cc.String,visible:!0}),I(w=v((S=function(e){var t,n,o,a;function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return P(t=e.call.apply(e,[this].concat(o))||this,"_label",E,O(t)),P(t,"_styles",x,O(t)),t._style="",t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n),o=r,(a=[{key:"text",get:function(){return this._label?this._label.string:""},set:function(e){this._label&&(this._label.string=e)}},{key:"style",get:function(){return this._style},set:function(e){this._style=e;var t=this._styles.find(function(t){return t.key===e});if(t){var n=this._label.node.getComponent(cc.LabelOutline);this._label.node.color=t.textColor,this._label.fontSize=t.fontSize,this._label.lineHeight=t.lineHeight,n.color=t.outLineColor,n.width=t.outLineWidth}}}])&&A(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),r}(cc.Component),E=k(S.prototype,"_label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=k(S.prototype,"_styles",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k(S.prototype,"style",[C],Object.getOwnPropertyDescriptor(S.prototype,"style"),S.prototype),w=S))||w)||w);n.LabelStyleWidget=F,cc._RF.pop()},{}],"LabelsWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"37fa97kolFdZa7kTjFQoGMZ","LabelsWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.LabelsWindowLayoutComponent=void 0;var i=e("./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._labelsList=[],t}return a(t,e),t.prototype.setLabelsValues=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._labelsList.forEach(function(t,n){e[n]&&(t.string=e[n].toString())})},r([p({type:[cc.Label],visible:!0})],t.prototype,"_labelsList",void 0),r([s],t)}(i.FooterWindowLayoutComponent);n.LabelsWindowLayoutComponent=l,cc._RF.pop()},{"./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"LanguageSettingsWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"bfd3aLtz1hcS5lAuUqF83pF","LanguageSettingsWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageSettingsWindowAction=void 0;var c=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),s=e("./I18NComponent (@tapclap.game-kit.i18n.components)"),p=function(e){function t(t){var n=t.i18n,o=t.storage,a=t.changingLanguageCallback,i=r(t,["i18n","storage","changingLanguageCallback"]),c=e.call(this,i)||this;return c._i18n=n,c._storage=o,c._changingLanguageCallback=a,c}return a(t,e),t.prototype._configureWindow=function(e){var t=this,n=e.getLayout("content"),o=function(e){var n,o;t._i18n.setDefaultLanguage(e),t._changingLanguageCallback(),t._storage.setItem("locale",e);var a=cc.director.getScene().getComponentsInChildren(s.I18NComponent);try{for(var r=i(a),c=r.next();!c.done;c=r.next())c.value.render()}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}},a=this._i18n.getAvailableLanguages().map(function(e){return{key:e,name:t._i18n.t("languageName",{},e)}});n.setLaguages(a,function(){o(this.localeKey),e.emitEventClose()})},t}(c.WindowAction);n.LanguageSettingsWindowAction=p,cc._RF.pop()},{"./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"LanguageSettingsWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"0730aHt52hUkpUmpbXNblft","LanguageSettingsWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageSettingsWindowLayoutComponent=void 0;var c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),p=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._layout=null,t._defaultButtonPrefab=null,t._scrollView=null,t._buttonOptions={},t}return a(t,e),t.prototype.initialize=function(t){var n=this;void 0===t&&(t={}),this._scrollView.enabled=!1,this._window.events.on(p.WindowComponent.EVENT_SHOWN,function(){n._scrollView.enabled=!0}),e.prototype.initialize.call(this,t),void 0!==t.spacing&&this._layout&&(this._layout.spacingX=t.spacing,this._layout.spacingY=t.spacing),t.languageButton&&(this._buttonOptions=t.languageButton)},t.prototype.setLaguages=function(e,t){var n=this;e.forEach(function(e){var o=e.key,a=e.name,i=n._buttonOptions.prefab||n._defaultButtonPrefab,c=cc.instantiateFrom(i).getComponent(s.ButtonControlComponent);c.initialize(r(r({},n._buttonOptions),{label:a})),c.events.on(s.ButtonControlComponent.EVENT_CLICK,t,{localeKey:o}),n._layout.node.addChild(c.node)})},i([u({type:cc.Layout,visible:!0})],t.prototype,"_layout",void 0),i([u({type:cc.Prefab,visible:!0})],t.prototype,"_defaultButtonPrefab",void 0),i([u({type:cc.ScrollView,visible:!0})],t.prototype,"_scrollView",void 0),i([m],t)}(c.WindowLayoutComponent);n.LanguageSettingsWindowLayoutComponent=d,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"cb47fkhe1NS3aZfa6ZsbLP/","LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),n.__esModule=!0,n.LastLevelInEpisodeActionCondition=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._progress=t.moduleResolvers.progress.get(),n._episodes=t.moduleResolvers.episodes.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.check=function(){return this._progress.value>this._episodes.getMaxAvailableLevel()&&this._progress.hasChange},a}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.LastLevelInEpisodeActionCondition=a,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)":[function(e,t,n){"use strict";cc._RF.push(t,"c80169nph1dkLjXN4TOmLtY","LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)"),n.__esModule=!0,n.LegacyEntityRetriever=void 0;var o=function(){function e(e){this._map=e}return e.prototype.getByCode=function(e){return this._map[e]},e}();n.LegacyEntityRetriever=o,cc._RF.pop()},{}],"LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)":[function(e,t,n){"use strict";cc._RF.push(t,"530262REd5Ytb8JOrecvo0n","LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)"),n.__esModule=!0,n.LegacyEpisodicLevelsResourceHandler=void 0;var o=e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"),a=e("./GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),r=e("./EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),i=e("./ResourceLoadTask (@tapclap.game-kit.loader)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._moduleResolver=t.moduleResolver,n._converter=t.converter,n._levelsPerEpisode=void 0!==t.levelsPerEpisode?t.levelsPerEpisode:20,n._taskResourcePrefix=void 0!==t.taskResourcePrefix?t.taskResourcePrefix:"task",n._resourceManager=t.resourceManager,n._postfixParamKey=t.postfixParamKey,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var s=o.prototype;return s.handleArray=function(e,t){var n,o=this;void 0===e&&(e=[]),void 0===t&&(t={});var a=null==(n=t)?void 0:n.params[this._postfixParamKey];return this._prepareAssets(e,a).then(function(e){var n=o._moduleResolver.get(),a=o._convertLevels(parseInt(t.dest),e),r=new Set;Object.values(a).forEach(function(e){e.goals.map(function(t){return e.resources[o._taskResourcePrefix+"-"+t.entity]}).forEach(function(e){return r.add(e)})}),n.setData(a);var c=Array.from(r.values()).map(function(e){return new i.ResourceLoadTask(e)});return Promise.resolve(c)})},s.isHandled=function(e){void 0===e&&(e={});for(var t=this._moduleResolver.get(),n=parseInt(e.dest),o=this._levelsPerEpisode*(n-1)+1,a=this._levelsPerEpisode*(n-1)+this._levelsPerEpisode,r=o;r<=a;r++)if(!t.getLevel(r))return!1;return!0},s._prepareAssets=function(e,t){void 0===t&&(t=null);for(var n,o={levels:null,about:null},a=["about",t].filter(function(e){return e}).join("-"),r=["levels",t].filter(function(e){return e}).join("-"),i=c(e);!(n=i()).done;){var s=n.value;switch(s.name){case a:o.about=s.json;break;case r:o.levels=s.json}}return o.about&&o.levels?Promise.resolve(o):this._prepareAssets(e)},s._convertLevels=function(e,t){for(var n={},o=1;o<=this._levelsPerEpisode;o++){var a=(e-1)*this._levelsPerEpisode+o,r=this._converter.convert(Object.assign({},t,{levelNumber:o}));n[a]=this.createLevel(r,a)}return n},s.createLevel=function(e,t){for(var n,o=a.GoalDataExtractor.extract(e,{key:"goals",grid:"tiles"}),i={},s=c(r.EntityDataExtractor.extract(e,{grids:["tiles"]}));!(n=s()).done;){var p=n.value;i[p]=this._resourceManager.getResource(p)}for(var l,m=c(o);!(l=m()).done;){var u=l.value,d=this._taskResourcePrefix+"-"+u.entity;i[d]=this._resourceManager.getResource(d)}return{data:e,goals:o,resources:i,number:t,hard:e.hard}},o}(o.MetaModuleResourceHandler);n.LegacyEpisodicLevelsResourceHandler=m,cc._RF.pop()},{"./EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","./GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)","./ResourceLoadTask (@tapclap.game-kit.loader)":"ResourceLoadTask (@tapclap.game-kit.loader)"}],"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":[function(e,t,n){"use strict";cc._RF.push(t,"ec9edQWPlxU7aT8ZDdDrpdA","LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"),n.__esModule=!0,n.LegacyLevelComponentRetriever=void 0;var o=function(){function e(){}return e.prototype.retrieve=function(){return{}},e}();n.LegacyLevelComponentRetriever=o,cc._RF.pop()},{}],"LegacyLevelConverter (@tapclap.match-x.engine.level-converter)":[function(e,t,n){"use strict";cc._RF.push(t,"12426DV1mRWBZ9P/Oli4TZd","LegacyLevelConverter (@tapclap.match-x.engine.level-converter)"),n.__esModule=!0,n.LegacyLevelConverter=void 0;var o=e("./LevelConverter (@tapclap.match-x.engine.level-converter)"),a=e("./Cell (@tapclap.match-x.engine.entities)"),r=e("./Matrix (@tapclap.match-x.engine.models)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._entityMap=t.entityMap,n._boosterMap=t.boosterMap,n._bossGoals=t.bossGoals,n._pearls=t.pearls,n._autoProbability=t.autoProbability,n._randomSeed=t.randomSeed,n._probabilities={},n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var c=o.prototype;return c._createMatrix=function(e){var t=new r.Matrix(this._rows,this._cells);return e&&e.forEach(function(e,n){e.split("").forEach(function(e,o){t[n][o]=e})}),t},c._retrieveProbabilities=function(e){for(var t,n=i(this._levelData.colors.split(""));!(t=n()).done;){var o=t.value;this._probabilities[this._getEntityConfig(o).type]={probability:1,amount:1/0}}for(var a=0;a<this._rows;a++)for(var r=0;r<this._cols;r++){var c=e[a][r];this._autoProbability.includes(c)&&(this._probabilities[this._getEntityConfig(c).type]={probability:1,amount:1/0})}},c._retrieveGridSize=function(){var e=this;this._levelData.map.forEach(function(t,n){t.split("").forEach(function(t,o){n>e._rows&&(e._rows=n),o>e._cols&&(e._cols=o)})}),this._rows++,this._cols++},c._retrieveDisabledCells=function(e){for(var t=0;t<this._rows;t++)for(var n=0;n<this._cols;n++)" "===e[t][n]&&this._cells.push({row:t,col:n,state:a.Cell.STATE_DISABLED})},c._retrieveEntities=function(e){for(var t=0;t<this._rows;t++)for(var n=0;n<this._cols;n++){var o=void 0,a=void 0,r=e[t][n];switch(r){case".":case"":case" ":case"0":case"g":o=null,a={};break;case"a":if(this._bossSet)continue;o=this._getEntityConfig(r),a={components:{goalCollector:{goals:this._createBossGoals(this._levelData.bossName)}}},this._bossSet=!0;break;default:void 0!==r&&(o=this._getEntityConfig(r))}o&&this._cells.push({row:t,col:n,entity:Object.assign({},o,a)})}},c._retrieveGoals=function(e){var t=this;this._levelData.task.forEach(function(n){t._goals.push(t._formatGoal(n,e))})},c._formatGoal=function(e,t){var n;switch(e.type){case"CollectColor":n={type:"simple",options:{entityType:this._getEntityConfig(e.cell).type,total:parseInt(e.amount)}};break;case"CollectType":n={type:"auto",options:{entityType:this._getEntityConfig(e.cell).type}};break;case"CollectPearl":n={type:"auto",options:{entityType:this._getEntityAsPearl(t).type}};break;default:throw new Error("Not exist case for type: "+e.type)}return n},c._createBossGoals=function(e){var t=[],n=this._bossGoals[e];if(n)for(var o,a=i(n.split(""));!(o=a()).done;){var r=o.value,c={type:"simple",options:{entityType:this._getEntityConfig(r).type,total:this._levelData.bossLife}};t.push(c)}return t},c._getEntityConfig=function(e){if("a"===e&&(e=this._levelData.bossName),this._entityMap[e])return this._entityMap[e];throw new Error("Entity for code '"+e+"' not found")},c._getEntityAsPearl=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(this._pearls.includes(e[t][n]))return this._getEntityConfig(e[t][n])},c._retrieveTutorial=function(){var e=function(e,t){return{input:!!t,row:e.y,col:e.x}};if(this._forceData)for(var t,n=i(this._forceData);!(t=n()).done;){var o=t.value,a=o.cells,r=o.lightCells,c=o.powerUpForce,s=o.cssClass,p=o.pointer,l=[],m=[];a&&l.push.apply(l,a.map(function(t){return e(t,!0)})),r&&l.push.apply(l,r.map(function(t){return e(t,!1)})),p&&m.push({offset:p.offset,cells:p.cells.map(function(e){return{row:e.y,col:e.x}})});var u={key:s,type:c?"booster":"raw",data:{targets:[{grid:"tiles",pointers:m,cells:l}]}};c?u.data.booster=this._boosterMap[c]:u.data.input="swap",this._tutorial.push(u)}},c._resetData=function(){this._bossSet=!1,this._rows=0,this._cols=0,this._probabilities={},this._cells=[],this._goals=[],this._tutorial=[],this._levelData={},this._forceData=[]},c.convert=function(e){this._resetData(),e.levels&&(this._levelData=e.levels[e.levelNumber]),e.about.force&&(this._forceData=e.about.force[e.levelNumber]),this._retrieveGridSize();var t=this._createMatrix(this._levelData.map),n=this._createMatrix(this._levelData.floorAttribute),o=this._createMatrix(this._levelData.decorators);return this._retrieveDisabledCells(t),this._retrieveEntities(t),this._retrieveEntities(n),this._retrieveEntities(o),this._retrieveProbabilities(t),this._retrieveGoals(t),this._retrieveTutorial(),{randomSeed:this._randomSeed,tiles:{rows:this._rows,cols:this._cols,probabilities:this._probabilities,cells:this._cells,fill:!0,drop:{cells:[],entities:[]}},goals:this._goals,score:{max:1/0,targetValue:this._levelData.score},stars:{max:3,targetValue:this._levelData.score},moves:{value:this._levelData.moves,max:1/0},tutorial:this._tutorial}},o}(o.LevelConverter);n.LegacyLevelConverter=l,cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./LevelConverter (@tapclap.match-x.engine.level-converter)":"LevelConverter (@tapclap.match-x.engine.level-converter)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"LegacyLevelConverterV2 (@tapclap.match-x.engine.level-converter)":[function(e,t,n){"use strict";cc._RF.push(t,"c1ecdWJ/UlUoZoYPh0GNqVN","LegacyLevelConverterV2 (@tapclap.match-x.engine.level-converter)"),n.__esModule=!0,n.LegacyLevelConverterV2=void 0;var o=e("./LegacyLevelConverter (@tapclap.match-x.engine.level-converter)"),a=e("./Cell (@tapclap.match-x.engine.entities)"),r=e("./Matrix (@tapclap.match-x.engine.models)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,a,r,i;return(i=e.call(this)||this)._boosterMap=t.boosterMap,i._complexTaskMap=t.complexTaskMap,i._bossGoals=t.bossGoals,i._pearls=t.pearls||[],i._autoProbability=t.autoProbability||[],i._autoBossGoalProbability=t.autoBossGoalProbability||[],i._randomSeed=t.randomSeed,i._processOnceCodes=t.processOnceCodes||[],i._disabledCellCodes=t.disabledCellCodes||[],i._ignoredEntityCodes=(t.ignoredEntityCodes||[]).concat(i._disabledCellCodes),i._bossHolderCodes=t.bossHolderCodes||[],i._defaultTaskCellAttribute=t.defaultTaskCellAttribute,i._defaultFloorAttributeCode=t.defaultFloorAttributeCode,i._defaultProbabilityConfig=t.defaultProbabilityConfig,i._defaultBossEntityProbabilityConfig=t.defaultBossEntityProbabilityConfig,i._entityColorMap=t.entityColorMap||{},i._combineTypes=t.combineTypes||{},i._entityCountLimitForGroupCodes=t.entityCountLimitForGroupCodes||[],i._componentRetrievers=t.componentRetrievers||[],i._emitStrategyRetrievers=t.emitStrategyRetrievers||{},i._decoratorNameToCodeMap=t.decoratorNameToCodeMap||{},i._configByCondition=t.configByCondition||[],i._sameGoalByGroupCodes=t.sameGoalByGroupCodes||[],i._goalEntityRetrievers=t.goalEntityRetrievers||[],i._bossComplexTargetIcons=t.bossComplexTargetIcons||{},i._candyBombByColor=t.candyBombByColor||{},i._entityRetrievers=Object.assign(((n={})[o.TYPE_MAP]=null,n[o.TYPE_DECORATORS]=null,n[o.TYPE_FLOOR_ATTRIBUTE]=null,n[o.TYPE_CELL_ATTRIBUTE]=null,n),t.entityRetrievers||{}),i._entityRandom=Object.assign(((a={})[o.TYPE_MAP]={},a[o.TYPE_DECORATORS]={},a[o.TYPE_FLOOR_ATTRIBUTE]={},a[o.TYPE_CELL_ATTRIBUTE]={},a),t.entityRandom||{}),i._entityCodeCounts=((r={})[o.TYPE_MAP]={},r[o.TYPE_DECORATORS]={},r[o.TYPE_FLOOR_ATTRIBUTE]={},r[o.TYPE_CELL_ATTRIBUTE]={},r),i._probabilities={},i._limits=[],i._ignoredProbabilitiesOnInitialRandom=[],i._tutorialEmitStrategies=t.tutorialEmitStrategies||[],i}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var c=o.prototype;return c._createMatrix=function(e){var t=new r.Matrix;return e&&e.forEach(function(e,n){e.split("").forEach(function(e,o){t[n]||(t[n]=[]),t[n][o]=e})}),t},c._retrieveProbabilities=function(e){for(var t,n=this,a=this._levelData.colors.split(""),r=i(a);!(t=r()).done;){var c=t.value,s=Object.assign({},this._defaultProbabilityConfig),p=this._retrieveEntity(o.TYPE_MAP,c);p&&(this._probabilities[p.type]=s)}for(var l=0;l<this._rows;l++)for(var m=0;m<this._cols;m++){var u=e[l][m];if(this._getAutoProbability().includes(u)){var d=this._entityRandom[o.TYPE_MAP][u];d?function(){for(var e,t=Object.keys(d),o=[],r=i(a);!(e=r()).done;){var c=e.value;if(n._entityColorMap[c]){var s=n._entityColorMap[c].filter(function(e){return t.includes(e)});o.push.apply(o,s)}}for(var p=0,l=o;p<l.length;p++){var m=l[p];n._probabilities[m]=Object.assign({},n._defaultProbabilityConfig,d[m])}}():this._probabilities[this._retrieveEntity(o.TYPE_MAP,u).type]=Object.assign({},this._defaultProbabilityConfig)}}this._levelData.bossName&&this._levelData.bossLife>0&&this._autoBossGoalProbability.includes(this._levelData.bossName)&&this._getBossEntityNameList().map(function(e){n._probabilities[e]=Object.assign({},n._defaultBossEntityProbabilityConfig),n._ignoredProbabilitiesOnInitialRandom.push(e)})},c._retrieveGridSize=function(){var e=this;this._levelData.map.forEach(function(t,n){t.split("").forEach(function(t,o){n>e._rows&&(e._rows=n),o>e._cols&&(e._cols=o)})}),this._rows++,this._cols++},c._getBossEntityNameList=function(){var e=this._levelData.colors.split(""),t=[],n=this._bossGoals[this._levelData.bossName];if(n)for(var o,a=i(n);!(o=a()).done;){var r=o.value;if(r.colors.length>0)for(var c,s=i(e);!(c=s()).done;){var p=c.value,l=r.code+"-"+p,m=this._retrieveEntity(r.layer,l);m&&t.push(m.type)}else t.push(this._retrieveEntity(r.layer,r.code).type)}return t},c._retrieveDisabledCells=function(e){for(var t=0;t<this._rows;t++)for(var n=0;n<this._cols;n++)this._disabledCellCodes.includes(e[t][n])&&this._cells.push({row:t,col:n,state:a.Cell.STATE_DISABLED})},c._retrieveEntities=function(e,t){for(var n=e[t],a=[],r=0;r<this._rows;r++)for(var c=0;c<this._cols;c++){var s=void 0,p=void 0,l=n[r][c],m={row:r,col:c};switch(!0){case this._ignoredEntityCodes.includes(l)||a.includes(l):s=null,p={};break;case this._bossHolderCodes.includes(l):if(this._bossSet)continue;s=this._retrieveEntity(o.TYPE_BOSSES,this._levelData.bossName),p={components:{goalCollector:{goals:this._createBossGoals()}}},this._bossSet=!0;break;default:if(void 0!==l){var u=this._combineTypes[t];if(u){var d=e[u],y=d[r]&&d[r][c];y&&!this._ignoredEntityCodes.includes(y)&&(s=this._retrieveEntity(u,l+"-"+y));var f=[].concat(this._levelData.colors.split(""),this._ignoredEntityCodes);if(!s&&!f.includes(y))continue}else this._entityRandom[t][l]||(s=this._retrieveEntity(t,l))}}if(s&&this._processOnceCodes.includes(l)&&a.push(l),s)m.entity=Object.assign({},s,p);else if(this._entityRandom[t]&&this._entityRandom[t][l]){for(var h,g={},v=[],_=i(this._levelData.colors.split(""));!(h=_()).done;){var b=h.value;v.push.apply(v,this._entityColorMap[b])}for(var C=0,w=Object.entries(this._entityRandom[t][l]);C<w.length;C++){var S=w[C],E=S[0],x=S[1];v.includes(E)&&(g[E]=Object.assign({},this._defaultProbabilityConfig,x))}m.randomEntities=g}(m.entity||m.randomEntities)&&this._cells.push(m)}},c._getPropertyByConditions=function(e){var t=this,n={};return this._configByCondition.filter(function(e){return(0,e.condition)(t._levelData)}).forEach(function(e){var t=e.config;return m(n,t)}),n[e]},c._getAutoProbability=function(){return[].concat(this._autoProbability,this._getPropertyByConditions("autoProbability")||[])},c._getEntityCountLimitForGroupCodes=function(){return[].concat(this._entityCountLimitForGroupCodes,this._getPropertyByConditions("entityCountLimitForGroupCodes")||[])},c._retrieveDefaultComponents=function(){for(var e=this,t={},n=0,a=Object.entries(this._entityCodeCounts);n<a.length;n++)for(var r=a[n],i=r[0],c=r[1],s=function(){var n=l[p],a=(e._componentRetrievers[i]||[]).filter(function(e){return e.codes.includes(n)});if(a.length>0){var r=a.map(function(t){return t.retriever.retrieve(e._levelData,e._forceData)}),c=new Set,s=e._bossHolderCodes.includes(n),m=i;s&&(m=o.TYPE_BOSSES,n=e._levelData.bossName);var u=e._retrieveEntity(m,n);u&&c.add(u.type),!s&&e._entityRandom[m][n]&&Object.keys(e._entityRandom[m][n]).forEach(function(e){return c.add(e)}),Array.from(c).forEach(function(e){var n=t[e]||{};t[e]=Object.assign.apply(Object,[n].concat(r))})}},p=0,l=Object.keys(c);p<l.length;p++)s();return t},c._retrieveGoals=function(e){var t=this;this._levelData.task.forEach(function(n){var o=t._formatGoal(n,e);o&&t._goals.push(o)})},c._retrieveFrozenObjects=function(){if(Array.isArray(this._levelData.objects))for(var e,t=i(this._levelData.objects.filter(function(e){return"FrozenObject"===e.code}));!(e=t()).done;){var n=e.value,a=this._retrieveEntity(o.TYPE_MAP,n.name);a?this._cells.push({col:n.x,row:n.y,entity:a}):console.error("Not found entity: "+n.name)}},c._retrieveLimits=function(){var e=this,t=[];this._getEntityCountLimitForGroupCodes().forEach(function(n){var a=[];n.forEach(function(t){a.push.apply(a,e._retrievePossibleEntityTypes(o.TYPE_MAP,t))}),t.push({entities:Array.from(new Set(a)),amount:n.reduce(function(t,n){return t+(e._entityCodeCounts[o.TYPE_MAP][n]||0)},0)})}),this._limits=t.filter(function(e){return e.amount>0})},c._calculateCodesCount=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++)for(var o=n[t],a=o[0],r=o[1],i=0;i<this._rows;i++)for(var c=0;c<this._cols;c++){var s=r[i]&&r[i][c];if(void 0!==s){var p=this._entityCodeCounts[a][s]||0;this._entityCodeCounts[a][s]=p+1}}},c._getFormatGoalEntityRetrieverType=function(e){var t=this;return function(e){for(var n,o=i(t._goalEntityRetrievers);!(n=o()).done;){var a=(0,n.value)(e);if(a)return a}}(e)||o.TYPE_MAP},c._formatGoal=function(e,t){var n,a=e.cell||e.name,r=this._bossHolderCodes.includes(a),c=r?o.TYPE_BOSSES:this._getFormatGoalEntityRetrieverType(e),s=this._getEntityRetriever(c),p=Number.isInteger(parseInt(e.amount))&&!o.TASK_TYPES_TO_PROCESS.includes(e.type)?"CollectColor":e.type;r&&(a=this._levelData.bossName),e.decorator&&(a=this._decoratorNameToCodeMap[e.decorator]);var l,m=s.getByCode(a);switch(p){case"CollectColor":if(m){var u,d,y=null==m?void 0:null==(u=m.components)?void 0:null==(d=u.group)?void 0:d.id,f=[m.type];if(y)for(var h,g=i(this._sameGoalByGroupCodes);!(h=g()).done;){var v,_,b=h.value,C=s.getByCode(b);(null==C?void 0:null==(v=C.components)?void 0:null==(_=v.group)?void 0:_.id)==y&&(f.push(C.type),this._candyBombByColor[y]&&f.push(this._candyBombByColor[y]))}n={type:"simple",options:{type:m.type,entityTypes:f,total:parseInt(e.amount)}}}else console.error("Cannot create goal for code: "+a);break;case"CollectMorphColor":m?n={type:"simple",options:{type:m.type,entityTypes:[m.type],total:parseInt(e.amount)}}:console.error("Cannot create goal for code: "+a);break;case"CollectType":case"CollectObject":m?n={type:"auto",options:{entityType:s.getByCode(a).type}}:console.error("Cannot create goal for code: "+a);break;case"CollectPearl":var w=this._getEntityAsPearl(t);w&&(n={type:"auto",options:{entityType:w.type}});break;case"ClearCellAttributes":var S=this._getEntityRetriever(o.TYPE_CELL_ATTRIBUTE),E=this._entityRandom[o.TYPE_CELL_ATTRIBUTE],x=e.cell||this._defaultTaskCellAttribute,A=[];E&&E[x]&&Object.keys(E[x]).length>0&&(A=Object.keys(E[x])),A.length>0&&(n={type:"composite",options:{goals:function(e){return e.map(function(e){return{type:"auto",options:{entityType:e}}})}(A),type:S.getByCode(x).type}});break;case"CollectComplexTask":n={type:"composite",options:{goals:(l=e.parts,l.split("").map(function(e){var t=s.getByCode(e);return t||(console.error("Cannot create simpe task in complex task, code: "+e+". fallback to Y"),t={type:"Y"}),{type:"simple",options:{type:t.type,entityTypes:[t.type],total:1}}})),type:this._complexTaskMap[e.taskName]}};break;case"ClearFloorAttributes":var O=this._getEntityRetriever(o.TYPE_FLOOR_ATTRIBUTE).getByCode(this._defaultFloorAttributeCode);O?n=e.amount&&{type:"simple",options:{type:O.type,entityTypes:[O.type],total:Number(e.amount)}}||{type:"auto",options:{entityType:O.type}}:console.error("Cannot create ClearFloorAttributes goal for code: "+this._defaultFloorAttributeCode);break;default:console.error("Not exist case for type: "+e.type)}return n},c._createBossGoals=function(){var e=[],t=this._getBossEntityNameList();if(t){var n={type:"simple",options:{entityTypes:t,total:this._levelData.bossLife,type:t.length>1?this._bossComplexTargetIcons[this._levelData.bossName]:null}};e.push(n)}return e},c._getEntityAsPearl=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(this._pearls.includes(e[t][n]))return this._retrieveEntity(o.TYPE_MAP,e[t][n])},c._retrieveTutorial=function(){var e=function(e,t){return{input:!!t,row:e.y,col:e.x}};if(this._forceData)for(var t,n=i(this._forceData);!(t=n()).done;){var o=t.value,a=o.cells,r=o.lightCells,c=o.powerUpForce,s=o.cssClass,p=o.pointer,l=[],m=[];a&&l.push.apply(l,a.map(function(t){return e(t,!0)})),r&&l.push.apply(l,r.map(function(t){return e(t,!1)})),p&&m.push({offset:p.offset,cells:p.cells.map(function(e){return{row:e.y,col:e.x}})});var u=c?"booster":0===l.length&&0===m.length?"speech":"raw",d={key:s,type:u,completeImmediately:"speech"===u,data:{waitInputOnCells:a&&a.length>0,targets:[{grid:"tiles",pointers:m,cells:l}]}};this._tutorialEmitStrategies[s]&&this._emitStrategies.push(this._tutorialEmitStrategies[s]),c?d.data.booster=this._boosterMap[c]:d.data.input=a&&a.length>0?"swap":"input",this._tutorial.push(d)}},c._resetData=function(){var e=this;this._bossSet=!1,this._rows=0,this._cols=0,this._probabilities={},this._cells=[],this._goals=[],this._tutorial=[],this._levelData={},this._forceData=[],this._limits=[],this._defaultComponents={},this._stack=[],this._emitStrategies=[],this._ignoredProbabilitiesOnInitialRandom=[],Object.keys(this._entityCodeCounts).forEach(function(t){return e._entityCodeCounts[t]={}})},c.convert=function(e){this._resetData(),e.levels&&(this._levelData=e.levels[e.levelNumber]),e.about.force&&(this._forceData=e.about.force[e.levelNumber]),this._retrieveGridSize();var t={};if(this._levelData.map){var n=t[o.TYPE_MAP]=this._createMatrix(this._levelData.map);this._retrieveDisabledCells(n),this._retrieveEntities(t,o.TYPE_MAP),this._calculateCodesCount(t),this._retrieveGoals(n),this._retrieveProbabilities(n),this._retrieveFrozenObjects(),this._retrieveLimits(),this._retrieveTutorial(),this._retrieveEmitStrategies()}return this._levelData.floorAttribute&&(t[o.TYPE_FLOOR_ATTRIBUTE]=this._createMatrix(this._levelData.floorAttribute),this._retrieveEntities(t,o.TYPE_FLOOR_ATTRIBUTE)),this._levelData.decorators&&(t[o.TYPE_DECORATORS]=this._createMatrix(this._levelData.decorators),this._retrieveEntities(t,o.TYPE_DECORATORS)),this._levelData.cellAttribute&&(t[o.TYPE_CELL_ATTRIBUTE]=this._createMatrix(this._levelData.cellAttribute),this._retrieveEntities(t,o.TYPE_CELL_ATTRIBUTE),this._calculateCodesCount(t),this._retrieveProbabilities(t[o.TYPE_CELL_ATTRIBUTE])),{randomSeed:this._randomSeed,tiles:{rows:this._rows,cols:this._cols,probabilities:this._probabilities,limits:this._limits,defaultComponents:this._retrieveDefaultComponents(),cells:this._cells,fill:!0,drop:{cells:[],entities:e.about&&e.about.stack&&e.about.stack[e.levelNumber]?this._retrieveLevelStack(e.about.stack[e.levelNumber]):[]},ignoredProbabilitiesOnInitialRandom:this._ignoredProbabilitiesOnInitialRandom},goals:this._goals,score:{max:1/0,targetValue:this._levelData.score},stars:{max:3,targetValue:this._levelData.score},moves:{max:1/0,value:this._levelData.moves},tutorial:{steps:this._tutorial},candyContent:this._levelData.candyContent,emitByStrategy:this._emitStrategies,hard:(e.about.specialLevelsNew||[]).includes(e.levelNumber)}},c._retrieveEmitStrategies=function(){for(var e=0,t=Object.entries(this._emitStrategyRetrievers);e<t.length;e++){var n=t[e],o=n[0],a=n[1];this._levelData[o]&&this._emitStrategies.push(a)}},c._retrieveLevelStack=function(e){var t=this;return e.split("").map(function(e){for(var n=t._entityColorMap[e],a=Object.keys(t._entityCodeCounts[o.TYPE_MAP]),r=[],i=0,c=Object.entries(t._entityRandom[o.TYPE_MAP]);i<c.length;i++){var s=c[i],p=s[0],l=s[1],m=Object.keys(l);a.includes(p)&&r.push(m.find(function(e){return n.includes(e)}))}var u=r.shift();return u?[u]:[]}).filter(function(e){return e.length>0})},c._retrieveEntity=function(e,t){var n=this._getEntityRetriever(e);if(!n)throw new Error("Entity retriever for "+e+" not defined");return n.getByCode(t)},c._retrievePossibleEntityTypes=function(e,t){var n=new Set,o=this._retrieveEntity(e,t);o&&n.add(o.type);var a=this._entityRandom[e][t];return a&&Object.keys(a).forEach(function(e){return n.add(e)}),Array.from(n)},c._getEntityRetriever=function(e){return this._entityRetrievers[e]},o}(o.LegacyLevelConverter);n.LegacyLevelConverterV2=l;var m=function e(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];for(var r=0,i=o;r<i.length;r++)for(var c=i[r],s=0,p=Object.entries(c);s<p.length;s++){var l=p[s],m=l[0],u=l[1],d=t[m];Array.isArray(d)&&Array.isArray(u)?t[m]=[].concat(d,u):t[m]=d&&u&&"object"==typeof d&&"object"==typeof u?e(d,u):u}return t};l.TYPE_MAP="map",l.TYPE_DECORATORS="decorators",l.TYPE_FLOOR_ATTRIBUTE="floorAttribute",l.TYPE_CELL_ATTRIBUTE="cellAttribute",l.TYPE_BOSSES="bosses",l.TASK_TYPES_TO_PROCESS=["CollectMorphColor","ClearFloorAttributes"],cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./LegacyLevelConverter (@tapclap.match-x.engine.level-converter)":"LegacyLevelConverter (@tapclap.match-x.engine.level-converter)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"10fcbnGL69dj5CgbsHLdQyX","LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LemonLegacyLevelComponentRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e){if(!e.lemonDrop)return{dropAfterRemove:void 0}},t}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.LemonLegacyLevelComponentRetriever=r,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"LevelConverter (@tapclap.match-x.engine.level-converter)":[function(e,t,n){"use strict";cc._RF.push(t,"4e860Pf5+NUcLiGJ7NrNHBh","LevelConverter (@tapclap.match-x.engine.level-converter)"),n.__esModule=!0,n.LevelConverter=void 0;var o=function(){function e(){}return e.prototype.convert=function(e){return e},e}();n.LevelConverter=o,cc._RF.pop()},{}],"LevelConverterConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"cb8aex8LOpSd7abpvNCy5jf","LevelConverterConfig (scripts.config)"),n.__esModule=!0,n.LevelConverterConfig=void 0;var o,a,r,i,c,s=e("./LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)"),p=e("./CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)"),l=e("./MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),m=e("./BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),u=e("./ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),d=e("./CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),y=e("./DI (@tapclap.utils-js.di)"),f=e("./EmitComponent (@tapclap.match-x.engine.components)"),h=e("./Match3GameConfig (scripts.common.match3-game)"),g=e("./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)"),v=e("./AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),_=e("./ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),b=e("./MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),C=e("./ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),w=e("./PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),S=e("./LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),E=e("./KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)"),x=e("./BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)"),A=e("./BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),O=e("./PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),R=e("./EntityWrapperContentComponent (@tapclap.match-x.engine.components)"),P=e("./Entity (@tapclap.match-x.engine.entities)");function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var T={A:h.COLORS.VIOLET,G:h.COLORS.GREEN,R:h.COLORS.PINK,O:h.COLORS.ORANGE,C:h.COLORS.WHITE,B:h.COLORS.BLUE,W:h.COLORS.BROWN,P:h.COLORS.PURPLE,Y:h.COLORS.YELLOW},I={explodeOnDeath:{},explodeOnBlast:{},explodeOnCombination:{},reduceHealthOnBlast:{}},M={map:{"@":{type:"super-1"},A:{type:"entity-1",components:{group:{id:T.A}}},G:{type:"entity-2",components:{group:{id:T.G}}},R:{type:"entity-3",components:{group:{id:T.R}}},O:{type:"entity-4",components:{group:{id:T.O}}},C:{type:"entity-5",components:{group:{id:T.C}}},B:{type:"entity-6",components:{group:{id:T.B}}},W:{type:"entity-7",components:{group:{id:T.W}}},P:{type:"entity-8",components:{group:{id:T.P}}},Y:{type:"entity-9",components:{group:{id:T.Y}}},t:{type:"coffeebean"},m:{type:"rabbit",components:{health:{value:4}}},v:{type:"rabbit",components:{health:{value:3}}},x:{type:"rabbit",components:{health:{value:2}}},z:{type:"rabbit",components:{health:{value:1}}},F:{type:"cup"},c:{type:"cracker"},S:{type:"cheese"},q:{type:"nut",components:{health:{value:3}}},y:{type:"nut",components:{health:{value:2}}},r:{type:"nut",components:{health:{value:1}}},"\u0411":{type:"strawberry",components:{health:{value:1}}},"\u0410":{type:"strawberry",components:{health:{value:2}}},4:{type:"strawberry",components:{health:{value:3}}},w:{type:"chocolatePot",components:{health:{value:4},preventCover:{}}},e:{type:"chocolatePot",components:{health:{value:1},preventCover:{}}},j:{type:"cookie-1"},h:{type:"cookie-2"},g:{type:"cookie-3"},"\u0446":{type:"cake-mini-topping"},"\u0443":{type:"cake-mini-syrup"},"\u043a":{type:"cake-mini-biscuit"},k:{type:"snowman-head"},l:{type:"snowman-center"},b:{type:"snowman-bottom"},D:{type:"lemon-blue",components:{group:{id:T.B}}},E:{type:"lemon-yellow",components:{group:{id:T.Y}}},J:{type:"lemon-purple",components:{group:{id:T.P}}},"*-A":{type:"jellybear-violet"},"*-G":{type:"jellybear-green"},"*-O":{type:"jellybear-orange"},"*-R":{type:"jellybear-pink"},"*-C":{type:"jellybear-white"},"b-A":{type:"parrot-violet"},"b-G":{type:"parrot-green"},"b-O":{type:"parrot-orange"},"b-R":{type:"parrot-pink"},"b-C":{type:"parrot-white"},5:{type:"heart",components:{group:{id:h.COLORS.PINK}}},6:{type:"heart",components:{group:{id:h.COLORS.GREEN}}},7:{type:"heart",components:{group:{id:h.COLORS.WHITE}}},8:{type:"heart",components:{group:{id:h.COLORS.VIOLET}}},9:{type:"heart",components:{group:{id:h.COLORS.ORANGE}}},d:{type:"bday-cake"},"\u041c":{type:"ladybug-house"},I:{type:"color-flower"},H:{type:"color-flower",components:{group:{id:h.COLORS.GREEN}}},"%":{type:"mixer"},"^":{type:"peacock"},p:{type:"candybox"},"]":{type:"ladybug"},"\u263b":{type:"bee"},butterfly:{type:"butterfly"},";":{type:"candywrapper"},"\u03c0":{type:"candy-pink"},"\xf8":{type:"candy-orange"},"\u221a":{type:"candy-violet"},V:{type:"wall"},"\u0430":{type:"snail",components:{health:{value:3,max:3}}},n:{type:"snail",components:{health:{value:2,max:3}}},s:{type:"snail",components:{health:{value:1,max:3}}},M:{type:"sweet-tooth"},L:{type:"machinegum"},U:{type:"lollipop"},"d-A":{type:"croissant-violet",components:{health:{value:3}}},"d-G":{type:"croissant-green",components:{health:{value:3}}},"d-R":{type:"croissant-pink",components:{health:{value:3}}},"d-O":{type:"croissant-orange",components:{health:{value:3}}},"d-C":{type:"croissant-white",components:{health:{value:3}}},"c-A":{type:"croissant-violet",components:{health:{value:2}}},"c-G":{type:"croissant-green",components:{health:{value:2}}},"c-R":{type:"croissant-pink",components:{health:{value:2}}},"c-O":{type:"croissant-orange",components:{health:{value:2}}},"c-C":{type:"croissant-white",components:{health:{value:2}}},"e-A":{type:"croissant-violet",components:{health:{value:1}}},"e-G":{type:"croissant-green",components:{health:{value:1}}},"e-R":{type:"croissant-pink",components:{health:{value:1}}},"e-O":{type:"croissant-orange",components:{health:{value:1}}},"e-C":{type:"croissant-white",components:{health:{value:1}}},"\u0445":{type:"hamster"},"\u043b":{type:"beehive",components:{health:{value:3,max:3}}},"\u0435":{type:"beehive",components:{health:{value:2,max:3}}},"\u0439":{type:"beehive",components:{health:{value:1,max:3}}},Q:[{type:"cupcake-bottom"},{type:"cupcake"}],T:[{type:"cupcake-bottom"},{type:"cupcake",components:{health:{value:1}}}],Z:{type:"cupcake"},"p-A":{type:"popcorn-violet"},"p-G":{type:"popcorn-green"},"p-O":{type:"popcorn-orange"},"p-R":{type:"popcorn-pink"},"p-C":{type:"popcorn-white"},"f-A":{type:"fish-violet"},"f-C":{type:"fish-white"},"f-G":{type:"fish-green"},"f-O":{type:"fish-orange"},"f-R":{type:"fish-pink"},"\u044f":{type:"jarjam-pink"},"\u0442":{type:"jarjam-green"},"\u0447":{type:"jarjam-violet"},"\u044c":{type:"jarjam-white"},"\u043c":{type:"jarjam-orange"},"+":{type:"kitchen-timer"},"\u0444-A":{type:"bombribbons-violet"},"\u0444-G":{type:"bombribbons-green"},"\u0444-R":{type:"bombribbons-pink"},"\u0444-O":{type:"bombribbons-orange"},"\u0444-C":{type:"bombribbons-white"},"\u042f":{type:"bombribbons-violet"},"\u041f":{type:"bombribbons-orange"},"\u0422":{type:"bombribbons-pink"},"\u0427":{type:"bombribbons-white"},"\u042c":{type:"bombribbons-green"},"{":{type:"pacman-start"},"}":{type:"pacman-finish"},"/":{type:"pacman"},"\u0660":{type:"catinbox",components:{lock:{layers:[P.Entity.LAYER_DEFAULT],components:["explode"],removeSelf:!0}}},"\u0666":{type:"catinbox"}},decorators:{"*":{type:"blocker-1",components:k({health:{value:1}},I,{goalAmount:{value:1}})},"@":{type:"blocker-1",components:k({health:{value:2}},I,{goalAmount:{value:2}})},"^":{type:"white-chocolate",components:{health:{value:2}}},"]":{type:"ladybug"},E:{type:"bee"},b:{type:"bubble"},"#":{type:"cotton"},B:{type:"caramel-blue",components:{group:{id:h.COLORS.BLUE}}},W:{type:"caramel-brown",components:{group:{id:h.COLORS.BROWN}}},G:{type:"caramel-green",components:{group:{id:h.COLORS.GREEN}}},O:{type:"caramel-orange",components:{group:{id:h.COLORS.ORANGE}}},R:{type:"caramel-pink",components:{group:{id:h.COLORS.PINK}}},P:{type:"caramel-purple",components:{group:{id:h.COLORS.PURPLE}}},A:{type:"caramel-violet",components:{group:{id:h.COLORS.VIOLET}}},C:{type:"caramel-white",components:{group:{id:h.COLORS.WHITE}}},Y:{type:"caramel-yellow",components:{group:{id:h.COLORS.YELLOW}}}},floor:{1:{type:"jelly"},2:{type:"honeycomb"},3:{type:"pink-jelly"},4:{type:"gum"},5:{type:"pacman-track"}},cellAttribute:{b:{type:"parrot"},"*":{type:"jellybear"},c:{type:"croissant"},d:{type:"croissant"},e:{type:"croissant"},p:{type:"popcorn"},"f-A":{type:"fish-violet"},"f-C":{type:"fish-white"},"f-G":{type:"fish-green"},"f-O":{type:"fish-orange"},"f-R":{type:"fish-pink"}},bosses:{panda:{type:"boss-panda"},penguin:{type:"boss-penguin"},kitty:{type:"boss-kitty"},raccoon:{type:"boss-raccoon"},owl:{type:"boss-owl"},mousy:{type:"boss-mousy"},angrybubble:{type:"boss-angrybubble"},"color-flower":{type:"boss-color-flower"},chameleon:{type:"boss-chameleon"},piggy:{type:"boss-piggy"},fox:{type:"boss-fox"},pinata:{type:"boss-pinata"},nutcracker:{type:"boss-nutcracker"}},targets:{p:{type:"popcornTarget"}}},j=((o={})[p.CandyvalleyLegacyLevelConverter.TYPE_MAP]={X:{"bubble-violet":{},"bubble-green":{},"bubble-pink":{},"bubble-white":{},"bubble-yellow":{},"bubble-blue":{},"bubble-purple":{}},"!":{"bubble-violet":{},"bubble-green":{},"bubble-pink":{},"bubble-white":{},"bubble-yellow":{},"bubble-blue":{},"bubble-purple":{}},"\u0444":{"bombribbons-violet":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-green":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-pink":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-orange":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-white":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}}}},o[p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE]={"*":{"jellybear-violet":{},"jellybear-green":{},"jellybear-orange":{},"jellybear-pink":{},"jellybear-white":{}},b:{"parrot-violet":{},"parrot-green":{},"parrot-orange":{},"parrot-pink":{},"parrot-white":{}},d:{"croissant-violet":{components:{health:{value:3}}},"croissant-green":{components:{health:{value:3}}},"croissant-pink":{components:{health:{value:3}}},"croissant-orange":{components:{health:{value:3}}},"croissant-white":{components:{health:{value:3}}}},c:{"croissant-violet":{components:{health:{value:2}}},"croissant-green":{components:{health:{value:2}}},"croissant-pink":{components:{health:{value:2}}},"croissant-orange":{components:{health:{value:2}}},"croissant-white":{components:{health:{value:2}}}},e:{"croissant-violet":{components:{health:{value:1}}},"croissant-green":{components:{health:{value:1}}},"croissant-pink":{components:{health:{value:1}}},"croissant-orange":{components:{health:{value:1}}},"croissant-white":{components:{health:{value:1}}}},f:{"fish-violet":{},"fish-green":{},"fish-orange":{},"fish-pink":{},"fish-white":{}},p:{"popcorn-violet":{},"popcorn-green":{},"popcorn-orange":{},"popcorn-pink":{},"popcorn-white":{}},"\u044a":{"jarjam-pink":{},"jarjam-green":{},"jarjam-violet":{},"jarjam-white":{},"jarjam-orange":{}},"\u0444":{"bombribbons-violet":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-green":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-pink":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-orange":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}},"bombribbons-white":function(e){return{components:(new A.BombRibbonsLegacyLevelComponentRetriever).retrieve(e)}}}},o),L={A:["entity-1","jellybear-violet","bubble-violet","fish-violet","parrot-violet","croissant-violet","popcorn-violet","jarjam-violet","bombribbons-violet"],G:["entity-2","jellybear-green","bubble-green","fish-green","parrot-green","croissant-green","popcorn-green","jarjam-green","bombribbons-green"],R:["entity-3","jellybear-pink","bubble-pink","fish-pink","parrot-pink","croissant-pink","popcorn-pink","jarjam-pink","bombribbons-pink"],O:["entity-4","jellybear-orange","fish-orange","parrot-orange","croissant-orange","popcorn-orange","jarjam-orange","bombribbons-orange"],C:["entity-5","jellybear-white","bubble-white","fish-white","parrot-white","croissant-white","popcorn-white","jarjam-white","bombribbons-white"],B:["entity-6","bubble-blue"],W:["entity-7"],P:["entity-8","bubble-purple"],Y:["entity-9","bubble-yellow"]},F={baseEntities:["entity-1","entity-2","entity-3","entity-4","entity-5","entity-6","entity-7","entity-8","entity-9","coffeebean"],sizedCodes:{I:{width:2,height:2},H:{width:2,height:2},"%":{width:2,height:2},"^":{width:2,height:2},L:{width:2,height:2}},boosterMap:{deleteCellPowerUp:"trowel",deleteColorPowerUp:"cat",deleteRowPowerUp:"cart",addBonusPowerUp:"plusone"},complexTaskMap:{cakefish:"cake-mini",cake:"cake-mini",snowman:"snowman",cookie:"cookie"},defaultFloorAttributeCode:"2",bossGoals:{panda:[{code:"R",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],penguin:[{code:"A",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],owl:[{code:"t",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],raccoon:[{code:"c",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],kitty:[{code:"f",colors:["A","G","R","O","C","B","W","P","Y"],layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE}],mousy:[{code:"S",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],piggy:[{code:"C",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],fox:[{code:"O",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}],nutcracker:[{code:"q",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP},{code:"y",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP},{code:"r",colors:[],layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP}]},bossComplexTargetIcons:{kitty:"fish"},pearls:["m","v","x","z"],autoProbability:[{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u044f",ignoreOnInitialRandom:!0,considerColorOnly:!0,ignoreColorInclude:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0442",ignoreOnInitialRandom:!0,considerColorOnly:!0,ignoreColorInclude:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0447",ignoreOnInitialRandom:!0,considerColorOnly:!0,ignoreColorInclude:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u044c",ignoreOnInitialRandom:!0,considerColorOnly:!0,ignoreColorInclude:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u043c",ignoreOnInitialRandom:!0,considerColorOnly:!0,ignoreColorInclude:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444",ignoreOnInitialRandom:!0,considerColorOnly:!0},{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"p",ignoreOnInitialRandom:!0,considerColorOnly:!0}],autoBossGoalProbability:{raccoon:function(e){var t=e.map.flat().join("").split("").filter(function(e){return"c"===e}).length;return{probability:.25,amount:e.bossLife-t}},kitty:function(e){var t=e.cellAttribute.flat().join("").split("").filter(function(e){return"f"===e}).length;return{probability:1,amount:e.bossLife-t}},mousy:function(e){return{amount:e.map.flat().join("").split("").filter(function(e){return"S"===e}).length>0?0:Math.floor(e.bossLife/10)+1}}},processOnceCodes:[],disabledCellCodes:[" "],ignoredEntityCodes:[".","","0","i","o"],bossHolderCodes:["a"],entityRetrievers:y.DI.raw((a={},a[p.CandyvalleyLegacyLevelConverter.TYPE_MAP]=new s.LegacyEntityRetriever(M.map),a[p.CandyvalleyLegacyLevelConverter.TYPE_DECORATORS]=new s.LegacyEntityRetriever(Object.assign({},M.map,M.decorators)),a[p.CandyvalleyLegacyLevelConverter.TYPE_FLOOR_ATTRIBUTE]=new s.LegacyEntityRetriever(M.floor),a[p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE]=new s.LegacyEntityRetriever(M.cellAttribute),a[p.CandyvalleyLegacyLevelConverter.TYPE_BOSSES]=new s.LegacyEntityRetriever(M.bosses),a)),combineTypes:(r={},r[p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE]=[p.CandyvalleyLegacyLevelConverter.TYPE_MAP],r),entityRandom:j,entityCountLimitForGroupCodes:[],entityCountLimitForGroupCodesByGoals:[{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,codes:["/"]}],defaultTaskCellAttribute:"*",defaultProbabilityConfig:{probability:1,amount:1/0},defaultBossEntityProbabilityConfig:{probability:.5,amount:1/0},levelDataProbability:[{types:["jarjam-pink","jarjam-green","jarjam-violet","jarjam-white","jarjam-orange"],configKey:"barrelsProbablity"},{types:["bombribbons-violet","bombribbons-green","bombribbons-pink","bombribbons-orange","bombribbons-white"],configKey:"bombRibbonsProbablity"}],entityColorMap:L,colorCodesReplacementMap:{"\u043f":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"p"},"\u044f":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u044f"},"\u0442":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0442"},"\u0447":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0447"},"\u044c":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u044c"},"\u043c":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u043c"},d:{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"d"},c:{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"c"},e:{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"e"},"\u0444":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444"}},componentRetrievers:y.DI.raw((i={},i[p.CandyvalleyLegacyLevelConverter.TYPE_MAP]=[{codes:["a"],retriever:new v.AngrybubbleHealthLegacyLevelComponentRetriever},{codes:["%"],retriever:new l.MixerMovesLegacyLevelComponentRetriever},{codes:["X"],retriever:new m.BombMovesLegacyLevelComponentRetriever},{codes:["!"],retriever:new m.BombMovesLegacyLevelComponentRetriever(!0)},{codes:["w","e"],retriever:new u.ChocolatePotLegacyLevelComponentRetriever},{codes:["I"],retriever:new _.ColorFlowerLegacyLevelComponentRetriever(h.COLORS)},{codes:["L"],retriever:new b.MachineGumLegacyLevelComponentRetriever(T,h.GROUP_MAP,L)},{codes:["a"],retriever:new C.ChameleonLegacyLevelComponentRetriever({symbolToColorMap:T,entitiesMap:M.map})},{codes:["D","E","J"],retriever:new S.LemonLegacyLevelComponentRetriever},{codes:["\u0444"],retriever:new A.BombRibbonsLegacyLevelComponentRetriever,ignoreOnStart:!0}],i[p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE]=[{codes:["p"],retriever:new w.PopcornLegacyLevelComponentRetriever}],i)),levelComponentRetrievers:y.DI.raw([{types:["kitchen-timer"],retriever:new E.KitchenTimerEntityComponentLevelRetriever},{types:["bombribbons-green","bombribbons-orange","bombribbons-pink","bombribbons-violet","bombribbons-white"],retriever:new x.BombRibbonsEntityComponentLevelRetriever}]),emitStrategyRetrievers:{squirrel:function(e){var t;return{strategyKey:"onTurnInterval",strategyOptions:{value:null!=(t=e.squirrelMoves)?t:4},emitOptions:{type:f.EmitComponent.TYPE_RANDOM,target:"random",entities:{nut:{amount:1,options:{components:{health:{value:3}}}}}}}}},tutorialEmitStrategies:{Squirell:{strategyKey:"onSpecificTurn",strategyOptions:{value:1},emitOptions:{type:f.EmitComponent.TYPE_RANDOM,target:"random",entities:{nut:{amount:1,options:{components:{health:{value:3}}}}}}}},decoratorNameToCodeMap:{mouse:"]",crabee:"\u263b"},sameGoalByGroupCodes:["D","E","J"],configByCondition:[],goalEntityRetrievers:[function(e){return"ribbon"===e.css?p.CandyvalleyLegacyLevelConverter.TYPE_DECORATORS:"bird"===e.attribute?p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE:"FillCarpet"===e.type?p.CandyvalleyLegacyLevelConverter.TYPE_FLOOR_ATTRIBUTE:void 0}],candyBombByColor:(c={},c[T.A]="candy-violet",c[T.G]="candy-green",c[T.R]="candy-pink",c[T.O]="candy-orange",c[T.C]="candy-white",c[T.B]="candy-blue",c[T.W]="candy-brown",c[T.P]="candy-purple",c[T.Y]="candy-yellow",c),symbolToColorMap:T,snailGoalCode:"\u0430",combos:M.combos,groupProbabilityByEntityType:[{divideOnTotal:!0,types:["popcorn-violet","popcorn-green","popcorn-orange","popcorn-pink","popcorn-white"]},{divideOnTotal:!0,types:["fish-violet","fish-white","fish-green","fish-orange","fish-pink"]},{types:["jarjam-pink","jarjam-green","jarjam-violet","jarjam-white","jarjam-orange"]},{types:["bombribbons-violet","bombribbons-green","bombribbons-pink","bombribbons-orange","bombribbons-white"]}],gumGoalCode:"4",match3GameConfig:h.Match3GameConfig};n.LevelConverterConfig=F;var D=new d.CandyWrapperLegacyLevelComponentRetriever({entities:M,entityRandom:j,emitComponentKey:g.EmitOnDeathBeforeMoveComponent.KEY,wrapperContentComponentKey:R.EntityWrapperContentComponent.KEY,entityColorMap:L,componentRetrievers:F.componentRetrievers,componentOptionsParsers:[{types:["kitchen-timer"],parse:function(e){return{addMovesOnExplode:{movesCount:e}}}},{types:["bombribbons"],parse:function(e){return{counter:{min:0,value:e}}}}],converter:function(e,t){void 0===e&&(e=p.CandyvalleyLegacyLevelConverter.TYPE_MAP);var n={"\u043d":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"d"},"\u0440":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"e"},"\u0441":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"c"},"\u043f":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"p"},"\u044a":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"\u044a"},"\u0444":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,code:"\u0444"},"key-A":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"*-A"},"key-G":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"*-G"},"key-O":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"*-O"},"key-R":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"*-R"},"key-C":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"*-C"},"cfg-\u042f":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444-A"},"cfg-\u041f":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444-O"},"cfg-\u0422":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444-R"},"cfg-\u0427":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444-C"},"cfg-\u042c":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"\u0444-G"},"popcorn-A":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"p-A"},"popcorn-G":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"p-G"},"popcorn-O":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"p-O"},"popcorn-R":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"p-R"},"popcorn-C":{layer:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,code:"p-C"}};if(n[t])return n[t];if(n[e+"-"+t])return n[e+"-"+t];var o={attr:p.CandyvalleyLegacyLevelConverter.TYPE_CELL_ATTRIBUTE,map:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,croissant:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,cell:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,cfg:p.CandyvalleyLegacyLevelConverter.TYPE_MAP,decorator:p.CandyvalleyLegacyLevelConverter.TYPE_DECORATORS};if(o[e])return{code:t,layer:o[e]};console.error("Cannot format candwrapper content",{type:e,code:t})}});F.componentRetrievers.value[p.CandyvalleyLegacyLevelConverter.TYPE_MAP].push({codes:[";"],retriever:D}),F.componentRetrievers.value[p.CandyvalleyLegacyLevelConverter.TYPE_MAP].push({codes:["a"],retriever:new O.PinataLegacyLevelComponentRetriever({candyWrapperComponentRetriever:D})}),cc._RF.pop()},{"./AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":"BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)","./BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)":"CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)","./ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)","./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)":"EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./EntityWrapperContentComponent (@tapclap.match-x.engine.components)":"EntityWrapperContentComponent (@tapclap.match-x.engine.components)","./KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)":"KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)","./LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)":"LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)","./LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)","./MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","./PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":"PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"}],"LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"57c37FQJZ5aHIf0vVrk6aY2","LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.LevelHasPartForCraftGameForceEndHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e){var t=e.getModule("progress"),n=e.getModule("craft"),o=e.getModule("episodes"),a=e.getModule("levels");if(t&&n&&o&&a){var r=a.getLastLevel();if(r){var i=r.number,c=o.getRelativeLevel(i);if(i===t.value-1&&t.hasChange&&n.hasPartOnLevel(c))return n.isFinalPart(c)&&n.setThingMustCrafted(),!0}}return!1},a}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.LevelHasPartForCraftGameForceEndHandler=a,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"LevelIsHardActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"0bba1SC1dNTebFNT5vbvAOg","LevelIsHardActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LevelIsHardActionCondition=void 0;var r=function(e){function t(t){var n=t.levelsModuleResolver,o=e.call(this)||this;return o._levels=n.get(),o}return a(t,e),t.prototype.check=function(){var e=this;return Promise.resolve().then(function(){var t=e._levels.getLastLevel();return!(!t||!t.hard)})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.LevelIsHardActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"eebf1/CYo9W6IPHNs/ORuvC","LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.LevelIsHardAndNeedTutorialGameForceEndHandler=void 0;var a=function(e){var t,n;function a(t){var n,o=t.userManager,a=t.tutorialKey;return(n=e.call(this)||this)._userManager=o,n._tutorialKey=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e){var t=this._userManager.getCurrentUser(),n=e.getModule("progress"),o=e.getModule("levels");return!(!n||!o)&&o.getLevel(n.value).hard&&!t.settings.get(this._tutorialKey)},a}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.LevelIsHardAndNeedTutorialGameForceEndHandler=a,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"LevelStartCountActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"90fabmmAW5TcKYrwVt/Tw/i","LevelStartCountActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LevelStartCountActionCondition=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._storage=t.storage,n._rules=t.rules,n._storageKey=t.storageKey,n}return a(t,e),t.prototype.check=function(){var e=this;return this._storage.getItem(this._storageKey).then(function(t){return!(t%e._rules.count)})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.LevelStartCountActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"de44fuKxrRVkL4KmFjp5FF4","LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)"),n.__esModule=!0,n.LevelsMetaModule=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._data={},n._resourceManager=t.resourceManager,n._lastLevel=null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getLastLevel=function(){return this._lastLevel},r.setLastLevel=function(e){this._lastLevel=e},r.getLevel=function(e){return this._data[e]},r.setData=function(e){void 0===e&&(e={}),Object.assign(this._data,e)},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.LevelsMetaModule=a,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"LimitOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"fb3edxauTJPT4iSgCg9KRZf","LimitOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.LimitOfferState=void 0;var a=function(e){var t,n;function a(t){var n,o=t.limit;return(n=e.call(this)||this)._limit=o,n._value=o,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.update=function(){this._value=Math.max(--this._value,0)},r.reset=function(){this._value=this._limit},r.resolve=function(){return this._value>0},a}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.LimitOfferState=a,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";cc._RF.push(t,"05892/GHrZbRaGr/tTvV6+W","LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LimitPerTimeOfferState=void 0;var r=function(e){function t(t){var n=t.userManager,o=t.spec,a=t.name,r=t.limit,i=t.cooldownTime,c=t.delayTime,s=e.call(this)||this;return s._hasReseted=!1,s._spec=o,s._name=a,s._limit=r,s._cooldownTime=i,s._delayTime=c||0,s._userManager=n,s._user=s._userManager.getCurrentUser(),s}return a(t,e),t.prototype.update=function(){this._user&&(this._user.items.add({spec:this._spec,name:this._name,amount:1}),this._hasReseted=!1)},t.prototype._reset=function(){this._user&&(this._user.items.substract({spec:this._spec,name:this._name,amount:this._getItem().amount}),this._hasReseted=!0)},t.prototype.resolve=function(){return!(!this._user||!this._getItem()||(this._getTimeSinceLastUpdate()>this._cooldownTime&&this._reset(),this._getItem().amount>=this._limit||0!==this._delayTime&&!1===this._hasReseted&&this._getTimeSinceLastUpdate()<=this._delayTime))},t.prototype._getTimeSinceLastUpdate=function(){return Date.now()-this._getItem().updatedAt.getTime()},t.prototype._getItem=function(){return this._user.items.get(this._spec,this._name)},t}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.LimitPerTimeOfferState=r,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":[function(e,t,n){"use strict";cc._RF.push(t,"06cfc9X6qZGp6Jv1Nf1TwrV","LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),n.__esModule=!0,n.LivesAttemptsBarComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S=e("./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),E=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function R(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var P=cc._decorator,k=P.ccclass,T=P.menu,I=P.property,M=(o=k("LivesAttemptsStyle"),a=I(),r=I(cc.Font),i=I(),c=I({type:cc.Label.VerticalAlign}),o((l=R((p=function(){O(this,"type",l,this),O(this,"font",m,this),O(this,"fontSize",u,this),O(this,"verticalAlign",d,this)}).prototype,"type",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=R(p.prototype,"font",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=R(p.prototype,"fontSize",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 35}}),d=R(p.prototype,"verticalAlign",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.Label.VerticalAlign.CENTER}}),s=p))||s),j=(y=T("UI-Kit/AttemptsBar/LivesAttemptsBarComponent"),f=I({type:[M],visible:!0}),h=I({type:cc.Label,visible:!0}),g=I({type:E.I18NLabel,visible:!0}),k(v=y((_=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return O(t=e.call.apply(e,[this].concat(o))||this,"_styles",b,x(t)),O(t,"_countAttempts",C,x(t)),O(t,"_info",w,x(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,A(t,n);var a=o.prototype;return a._getCountAttemptsString=function(e){var t=e.getCountAttempts();return t===1/0?"\u221e":t},a._updateInfoString=function(e){var t=e.getTimer();e.hasMaxAttempts()&&e.isMaxAttempts()?this._info.setString("livesBar.max"):t?this._info.setString("livesBar.time",{value:t.getTime()}):this._info.setString("")},a._onChangeState=function(e){var t=this._styles.find(function(t){return t.type===e.type});t&&this._countAttempts&&(this._countAttempts.font=t.font,this._countAttempts.fontSize=t.fontSize,this._countAttempts.verticalAlign=t.verticalAlign)},a._onUpdateState=function(e){this._countAttempts&&(this._countAttempts.string=this._getCountAttemptsString(e)),this._info&&this._updateInfoString(e)},o}(S.AttemptsBarComponent),b=R(_.prototype,"_styles",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=R(_.prototype,"_countAttempts",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R(_.prototype,"_info",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v)||v);n.LivesAttemptsBarComponent=j,cc._RF.pop()},{"./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"LoadSystem (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9d02cz4sx5b1YFSkcHXi0sJ","LoadSystem (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.LoadSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return(o=e.call(this)||this)._world=t,o._loaders=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.load=function(e){for(var t,n=o(this._loaders);!(t=n()).done;){var a=t.value,r=a.key,i=a.loader;e[r]&&i.load(r,e[r])}this._world.setState("load",this._world),this.events.emit("load")},a}(e("./System (@tapclap.match-x.engine.systems)").System);n.LoadSystem=c,c.KEY="load",cc._RF.pop()},{"./System (@tapclap.match-x.engine.systems)":"System (@tapclap.match-x.engine.systems)"}],"LoadTask (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b2c96ia/EJGl4MkMJbNjCW/","LoadTask (@tapclap.game-kit.loader)"),n.__esModule=!0,n.LoadTask=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._completed=0,t._total=0,t._finished=!1,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s._processComplete=function(e,t){var n=this;return Promise.resolve().then(function(){return n.emit(r.EVENT_SUBTASKS_REQUEST,e,t)}).then(function(e){return n.emit(r.EVENT_SUBTASKS_PROCESS,e)}).then(function(){return n._finished=!0}).then(function(){return n.emit(r.EVENT_COMPLETE,e,t,n)}).then(function(){return t})},s._processProgress=function(e,t){this._completed=e,this._total=t,this.emit(r.EVENT_PROGRESS,this)},s.load=function(){throw new Error("Load method not implemented")},r.load=function(e){return new this.prototype.constructor(e).load()},i=r,(c=[{key:"finished",get:function(){return this._finished}},{key:"completed",get:function(){return this._completed}},{key:"total",get:function(){return this._total}},{key:"description",get:function(){return"[unnamed]"}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.LoadTask=r,r.EVENT_PROGRESS="progress",r.EVENT_COMPLETE="complete",r.EVENT_SUBTASKS_REQUEST="subtasks_request",r.EVENT_SUBTASKS_PROCESS="subtasks_process",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"Loader (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"f4374mcYMlMYbZYBCC6WfME","Loader (@tapclap.game-kit.loader)"),n.__esModule=!0,n.Loader=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)"),a=e("./LoadTask (@tapclap.game-kit.loader)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._isStopped=!1,n._tasks=[],n._queue=t,n._tasksInProgress=new Set,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c,s,p=o.prototype;return p._onProgress=function(){this._isStopped||this.emit(o.EVENT_PROGRESS,this.progress)},p._onComplete=function(e,t,n){e&&this.emit(o.EVENT_ERROR,e,t,n),this.isComplete&&!this._isStopped&&this.emit(o.EVENT_COMPLETE)},p._startLoad=function(e){var t=this;this._tasks.push(e),e.on(a.LoadTask.EVENT_PROGRESS,this._onProgress.bind(this)),e.on(a.LoadTask.EVENT_COMPLETE,this._onComplete.bind(this)),e.on(a.LoadTask.EVENT_COMPLETE,function(){t._tasksInProgress.delete(e),t.emit(o.EVENT_FINISH_TASK,e)}),e.on(a.LoadTask.EVENT_SUBTASKS_PROCESS,function(e){void 0===e&&(e=[]),e.forEach(function(e){void 0===e&&(e=[]),e.forEach(function(e){return t._startLoad(e)})})}),this.emit(o.EVENT_START_TASK,e),this._tasksInProgress.add(e),e.load()},p.getTasksInProgress=function(){return[].concat(Array.from(this._tasksInProgress))},p.load=function(){var e=this;return new Promise(function(t){if(0===e._queue.length)t();else{for(;e._queue.length>0;)e._startLoad(e._queue.shift());e.once(o.EVENT_COMPLETE,function(){t()})}})},p.stop=function(){this._isStopped=!0},o.load=function(e){return new o(e).load()},c=o,(s=[{key:"totalCount",get:function(){return this._tasks.reduce(function(e,t){return e+t.total},0)}},{key:"completedCount",get:function(){return this._tasks.reduce(function(e,t){return e+t.completed},0)}},{key:"progress",get:function(){return this.completedCount/this.totalCount}},{key:"isComplete",get:function(){return!this._tasks.find(function(e){return!e.finished})}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),o}(o.EventEmitter);n.Loader=c,c.EVENT_START_TASK="start",c.EVENT_FINISH_TASK="finish",c.EVENT_COMPLETE="complete",c.EVENT_PROGRESS="progress",c.EVENT_ERROR="error",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./LoadTask (@tapclap.game-kit.loader)":"LoadTask (@tapclap.game-kit.loader)"}],"LocalConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"d6bd6fxK0JQrrdIgya4Lzn+","LocalConfig (scripts.config)"),n.__esModule=!0,n.default=void 0;var o,a=(o=e("./LocalConfig.yandex.app (scripts.config)"))&&o.__esModule?o:{default:o},r=Object.assign({},a.default);n.default=r,t.exports=n.default,cc._RF.pop()},{"./LocalConfig.yandex.app (scripts.config)":"LocalConfig.yandex.app (scripts.config)"}],"LocalConfig.yandex.app (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"19a35dXlFxYqZWxyftyTKe/","LocalConfig.yandex.app (scripts.config)"),n.__esModule=!0,n.default=void 0;var o=e("./DI (@tapclap.utils-js.di)"),a=e("./CandyvalleyUserAuthHandler (scripts.auth-service)"),r=e("./AuthService (@tapclap.sdk-x.auth-service)"),i=e("./SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)"),c=e("./PaymentValidationService (@tapclap.sdk-x.payment-service)"),s=e("./ApplicationPaymentProvider (@tapclap.game-kit.payment)"),p=e("./RemoteConfigService (@tapclap.game-kit.config-service)"),l=e("./StorageAdapter (@tapclap.game-kit.data-storage.adapters)"),m=e("./JsonRemoteConfig (@tapclap.sdk-x.remote-config)"),u=e("./DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)"),d=e("./SocialService (@tapclap.sdk-x.social-service)"),y=e("./SocialRequest (@tapclap.sdk-x.social-service)"),f=e("./YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)"),h=e("./YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)"),g=e("./YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)"),v=e("./DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)"),_=e("./YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)"),b=e("./YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)"),C=e("./YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)"),w=e("./YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)"),S=e("./ApplicationServerConfig (scripts.config)"),E=e("./ServicesConfig (scripts.config)"),x=e("./WindowConfig (scripts.config)"),A=e("./DefaultsRemoteConfig (scripts.config)"),O=e("./StorageForcedKeys (scripts.config)"),R=e("./YandexGamesStorage (@tapclap.game-kit.data-storage)"),P=e("./PlatformRemoteConfig (scripts.platform)");["dailyReward","craft","craftPart","episodesStarsRewardAvailable","thousandthsLevelReward"].forEach(function(e){var t,n,o,a;return null==x.WindowConfig||null==(t=x.WindowConfig[e])||null==(n=t.layouts)||null==(o=n.footer)||null==(a=o.controls)||delete a.share});var k=Object.assign({},E.ServicesConfig,{CommonRemoteConfig:o.DI.singleton(m.JsonRemoteConfig,{httpClient:o.DI.cfg("HttpClient"),url:"./config.json",defaults:Object.assign({},A.DefaultsRemoteConfig,{clickhouseEventPrefix:"ya_",sharingDisabled:!1})}),WindowConfig:o.DI.singleton(function(){return x.WindowConfig}),SocialService:o.DI.singleton(d.SocialService,[o.DI.instance(w.YandexGamesSocialAdapter,{sdk:o.DI.cfg("PlatformSDK"),avatarSize:"medium",localeMap:{ja:"jp",zh:"zh-Hant"}})]),PlatformSDK:o.DI.singleton(f.YandexGamesPlatformSDK,{scopes:!0}),PlatformLauncher:o.DI.instance(h.YandexGamesLauncher,{sdk:o.DI.cfg("PlatformSDK")}),AuthHandler:o.DI.singleton(a.CandyvalleyUserAuthHandler,{userService:o.DI.cfg("UserService"),userManager:o.DI.cfg("UserManager"),userFactory:o.DI.cfg("UserFactory"),ignoredPayloadTypes:[w.YandexGamesSocialAdapter.ADAPTER_TYPE]}),AuthService:o.DI.singleton(r.AuthService,{providers:[o.DI.instance(g.YandexGamesAuthProvider,{sdk:o.DI.cfg("PlatformSDK"),requireAuth:!1}),o.DI.instance(v.DialogYandexGamesAuthProvider,{sdk:o.DI.cfg("PlatformSDK")}),o.DI.instance(i.SocialAuthProvider,o.DI.cfg("SocialService"),w.YandexGamesSocialAdapter.ADAPTER_TYPE)],storage:o.DI.singleton(u.DefaultAuthStorage,[g.YandexGamesAuthProvider.PROVIDER_TYPE,w.YandexGamesSocialAdapter.ADAPTER_TYPE]),handler:o.DI.cfg("AuthHandler")}),PaymentProvider:o.DI.instance(_.YandexGamesPaymentProvider,{sdk:o.DI.cfg("PlatformSDK")}),PaymentValidationService:o.DI.instance(c.PaymentValidationService,{gateway:o.DI.cfg("ServiceGateway"),root:"purchase",ignorePurchaseTypes:[s.ApplicationPaymentProvider.PROVIDER_TYPE]}),ConfigService:o.DI.singleton(p.RemoteConfigService,"./config.json",S.ApplicationServerConfig),RewardedAdProvider:o.DI.instance(b.YandexGamesRewardedAdProvider,{sdk:o.DI.cfg("PlatformSDK")}),InterstitialAdProvider:o.DI.instance(C.YandexGamesInterstitialAdProvider,{sdk:o.DI.cfg("PlatformSDK")}),SocialRequest:o.DI.instance(y.SocialRequest,{i18n:o.DI.cfg("I18N")}),RawStorageAdapter:o.DI.instance(l.StorageAdapter),ObjectStorageAdapter:o.DI.instance(l.StorageAdapter),"Config.Orientation":o.DI.instance(function(){var e,t,n,o=/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1,a=(null==(e=window)?void 0:null==(t=e.navigator)?void 0:null==(n=t.userAgent)?void 0:n.search("iPad;"))>-1,r="LANDSCAPE";switch(!0){case o||a:case cc.sys.isMobile:r="PORTRAIT";break;case cc.sys.isBrowser:r="LANDSCAPE"}return new String(r)}),PlatformStorage:o.DI.singleton(R.YandexGamesStorage,{sdk:o.DI.cfg("PlatformSDK"),forcedKeys:O.StorageForcedKeys}),PlatformRemoteConfig:o.DI.instance(P.PlatformRemoteConfig,{config:{friends:!1}})});n.default=k,t.exports=n.default,cc._RF.pop()},{"./ApplicationPaymentProvider (@tapclap.game-kit.payment)":"ApplicationPaymentProvider (@tapclap.game-kit.payment)","./ApplicationServerConfig (scripts.config)":"ApplicationServerConfig (scripts.config)","./AuthService (@tapclap.sdk-x.auth-service)":"AuthService (@tapclap.sdk-x.auth-service)","./CandyvalleyUserAuthHandler (scripts.auth-service)":"CandyvalleyUserAuthHandler (scripts.auth-service)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)":"DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)","./DefaultsRemoteConfig (scripts.config)":"DefaultsRemoteConfig (scripts.config)","./DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)":"DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)","./JsonRemoteConfig (@tapclap.sdk-x.remote-config)":"JsonRemoteConfig (@tapclap.sdk-x.remote-config)","./PaymentValidationService (@tapclap.sdk-x.payment-service)":"PaymentValidationService (@tapclap.sdk-x.payment-service)","./PlatformRemoteConfig (scripts.platform)":"PlatformRemoteConfig (scripts.platform)","./RemoteConfigService (@tapclap.game-kit.config-service)":"RemoteConfigService (@tapclap.game-kit.config-service)","./ServicesConfig (scripts.config)":"ServicesConfig (scripts.config)","./SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)":"SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)","./SocialRequest (@tapclap.sdk-x.social-service)":"SocialRequest (@tapclap.sdk-x.social-service)","./SocialService (@tapclap.sdk-x.social-service)":"SocialService (@tapclap.sdk-x.social-service)","./StorageAdapter (@tapclap.game-kit.data-storage.adapters)":"StorageAdapter (@tapclap.game-kit.data-storage.adapters)","./StorageForcedKeys (scripts.config)":"StorageForcedKeys (scripts.config)","./WindowConfig (scripts.config)":"WindowConfig (scripts.config)","./YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)":"YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)","./YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":"YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)","./YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)":"YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)","./YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)":"YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)","./YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)":"YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)","./YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":"YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)","./YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)":"YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)","./YandexGamesStorage (@tapclap.game-kit.data-storage)":"YandexGamesStorage (@tapclap.game-kit.data-storage)"}],"LocalStorage (@tapclap.game-kit.data-storage)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0aa3d0EolFBbqfFdpHN1k+p","LocalStorage (@tapclap.game-kit.data-storage)"),n.__esModule=!0,n.LocalStorage=void 0;var a=function(e){var t,n;function a(){var t;return(t=e.call(this)||this)._storage=cc.sys.localStorage,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getItem=function(e){var t=this;return Promise.resolve().then(function(){return JSON.parse(t._storage.getItem(t._getKey(e)))}).catch(function(e){return cc.warn(e)})},r.setItem=function(e,t){var n=this;return Promise.resolve().then(function(){return n._storage.setItem(n._getKey(e),JSON.stringify(t))})},r.removeItem=function(e){return this._storage.removeItem(this._getKey(e)),Promise.resolve()},r.clear=function(){var e=this;return this.getKeys().then(function(t){return Promise.all(t.map(function(t){return e.removeItem(t)}))})},r.getKeys=function(){var e=this;return Promise.resolve().then(function(){return Object.keys(e._storage).filter(function(t){return t.split(e._separator)[0]===e._prefix}).map(function(t){return t.split(e._separator).splice(1).join(e._separator)})})},a}(e("./DataStorage (@tapclap.game-kit.data-storage)").DataStorage);n.LocalStorage=a,cc._RF.pop()},{"./DataStorage (@tapclap.game-kit.data-storage)":"DataStorage (@tapclap.game-kit.data-storage)"}],"LocaleResolver (@tapclap.game-kit.locale-resolver)":[function(e,t,n){"use strict";cc._RF.push(t,"f6562A9gj1PWKwlnyS47kZz","LocaleResolver (@tapclap.game-kit.locale-resolver)"),n.__esModule=!0,n.LocaleResolver=void 0;var o=function(){function e(){}var t=e.prototype;return t.getLocale=function(){return Promise.resolve()},t.getDefaultLocale=function(){return""},e}();n.LocaleResolver=o,cc._RF.pop()},{}],"LocaleResolver (@tapclap.sdk-x.locale-resolver)":[function(e,t,n){"use strict";cc._RF.push(t,"467dcpA+xVf8aQRb27qqizD","LocaleResolver (@tapclap.sdk-x.locale-resolver)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LocaleResolver=void 0;var c=function(){function e(e){this._defaultLocale=null==e?void 0:e.defaultLocale,this._localeMap=null==e?void 0:e.localeMap,this._findMatch=(null==e?void 0:e.findMatch)||!0}return e.prototype.getLocale=function(){var e;return o(this,void 0,Promise,function(){var t,n,o,c,s,p,l,m,u,d,y,f,h,g;return a(this,function(a){switch(a.label){case 0:return[4,this._getLocale()];case 1:if(!(t=null!==(e=a.sent())&&void 0!==e?e:this._defaultLocale))throw new Error("Cannot retrieve locale from resolver and cannot find default locale!");if(this._localeMap){if(this._localeMap[t])return[2,this._localeMap[t]];if(this._findMatch){n=/([A-Za-z]+)/g,o=r(t.toLowerCase().match(n),2),c=o[0],s=o[1],p=void 0;try{for(l=i(Object.keys(this._localeMap)),m=l.next();!m.done;m=l.next())if(u=m.value,d=r(u.toLowerCase().match(n),2),y=d[0],f=d[1],c===y&&(p=u,s===f))return[2,this._localeMap[u]]}catch(v){h={error:v}}finally{try{m&&!m.done&&(g=l.return)&&g.call(l)}finally{if(h)throw h.error}}if(p)return[2,this._localeMap[p]]}}return[2,t]}})})},e.prototype.getDefaultLocale=function(){return this._defaultLocale},e.prototype._getLocale=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,this.getDefaultLocale()]})})},e}();n.LocaleResolver=c,cc._RF.pop()},{}],"LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"709faJa++ZffI3+YyQYaBZs","LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockAnimationBuilder=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(){return[]},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.LockAnimationBuilder=r,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"LockAnimationResolver (scripts.common.match3-game.animation-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"e465dtSjUpQZZUxGrlQi2bS","LockAnimationResolver (scripts.common.match3-game.animation-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockAnimationResolver=void 0;var r=function(e){function t(t){var n=t.componentKey,o=e.call(this,{defaultTemplate:"$key-$lock"})||this;return o._componentKey=n,o._getters={lock:o._getLock.bind(o)},o}return a(t,e),t.prototype._getLock=function(e){return e.getComponent(this._componentKey).enable?"":"lock"},t.prototype.getAnimationKey=function(t,n){return e.prototype.getAnimationKey.call(this,t,n).split("-").filter(function(e){return e}).join("-")},t}(e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)").AnimationResolver);n.LockAnimationResolver=r,cc._RF.pop()},{"./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)"}],"LockComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0e892Z5PKBYDJipeh7yOndd","LockComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.LockComponent=void 0;var o=e("./Cell (@tapclap.match-x.engine.entities)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n,i,c;function s(t){var n,a=void 0===t?{}:t,r=a.type,i=void 0===r?"":r,c=a.layers,s=void 0===c?[o.Cell.LAYER_DEFAULT]:c,p=a.components,l=void 0===p?[]:p,m=a.removeSelf,u=void 0===m||m;return(n=e.call(this)||this)._type=i,n._layers=s,n._components=l,n._removeSelf=u,n}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),s.prototype.serialize=function(){return{type:this.type}},i=s,(c=[{key:"type",get:function(){return this._type}},{key:"layers",get:function(){return this._layers}},{key:"components",get:function(){return this._components}},{key:"removeSelf",get:function(){return this._removeSelf}}])&&a(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),s}(e("./Component (@tapclap.match-x.engine.components)").Component);n.LockComponent=i,i.KEY="lock",cc._RF.pop()},{"./Cell (@tapclap.match-x.engine.entities)":"Cell (@tapclap.match-x.engine.entities)","./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"e77880jdq5e0oiyq8bQaYNq","LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockEmitInGridEdgeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="lockEmitInGridEdge",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.LockEmitInGridEdgeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"8c5d7urM1VfHIzhKV+mHICM","LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockExplodeForTurnCountEntityLockCreator=void 0;var r=e("./LockComponent (@tapclap.match-x.engine.components)"),i=e("./UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createLock=function(e,t){e.addComponent(r.LockComponent.KEY,new r.LockComponent(t.lock)),e.addComponent(i.UnlockAfterExplodeComponent.KEY,new i.UnlockAfterExplodeComponent(t.unlockAfterExplode))},t}(e("./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)").EntityLockCreator);n.LockExplodeForTurnCountEntityLockCreator=c,cc._RF.pop()},{"./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)":"EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)":"UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)"}],"LockInputAction (@tapclap.game-kit.action-manager.actions.ui)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1c5c4EtfT5QtLeXriT3OPOH","LockInputAction (@tapclap.game-kit.action-manager.actions.ui)"),n.__esModule=!0,n.LockInputAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._backdropManager=t.backdropManager,n._lockInput=t.lockInput,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._backdropManager&&(this._lockInput?this._backdropManager.enable():this._backdropManager.disable()),Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.LockInputAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"LockOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ad3f6TA8wRSApYt36ZTgBDE","LockOnExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnExplodeComponent=void 0;var r=function(e){function t(t){var n=t.lockCreator,o=e.call(this)||this;return o.lockCreator=n,o}return a(t,e),t.KEY="lockOnExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.LockOnExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f777eh/+ZJbcJ8vyHnZo4Bk","LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnExplodeSystem=void 0;var i=e("./LockOnExplodeComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=function(e){function t(t){var n=e.call(this,{world:t.world})||this;return n._world=t.world,n._entityLockFactory=t.entityLockFactory,n}return a(t,e),t.prototype.process=function(){var e,t,n,o,a=(null===(o=null===(n=this._world.getState(c.ExplodeSystem.STATE))||void 0===n?void 0:n.data)||void 0===o?void 0:o.flat())||[];try{for(var s=r(a),p=s.next();!p.done;p=s.next()){var l=p.value,m=l.entity,u=l.grid,d=l.cell,y=m.getComponentByClass(i.LockOnExplodeComponent);y&&(this._entityLockFactory.createLock(m,y.lockCreator),this._lock(u,d,m))}}catch(f){e={error:f}}finally{try{p&&!p.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return!1},t.KEY="LockOnExplodeSystem",t}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.LockOnExplodeSystem=s,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./LockOnExplodeComponent (@tapclap.match-x.engine.components)":"LockOnExplodeComponent (@tapclap.match-x.engine.components)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)"}],"LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b0826hZrgBdcKb75KSdND/w","LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnFailWalkInGridEdgeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="lockOnFailWalkInGridEdge",t}(e("./LockComponent (@tapclap.match-x.engine.components)").LockComponent);n.LockOnFailWalkInGridEdgeComponent=r,cc._RF.pop()},{"./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)"}],"LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"eb4ebw5aF9dO63Q4lffG744","LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnFailWalkInGridEdgeSystem=void 0;var r=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),i=e("./LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)"),c=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),s=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)"),p=function(e){function t(t){var n=e.call(this,t.world)||this;return n._entityLockFactory=t.entityLockFactory,n._world=t.world,n}return a(t,e),t.prototype.process=function(){var e,t,n,o=(null===(e=this._world.getState(s.WalkSystem.STATE_FAIL))||void 0===e?void 0:e.data)||[];if(o.length){var a=o.find(function(e){return e.getComponentByClass(i.LockOnFailWalkInGridEdgeComponent)});if(a){var p=a.getComponentByClass(i.LockOnFailWalkInGridEdgeComponent),l=null===(t=a.getComponentByClass(c.WalkDirectionComponent))||void 0===t?void 0:t.direction;(null===(n=a.getComponentByClass(r.DistanceToGridEdgeComponent))||void 0===n?void 0:n.getDistance(l))||this._entityLockFactory.createLock(a,p)}}return!1},t.KEY=Symbol("LockOnFailWalkInGridEdge"),t}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.LockOnFailWalkInGridEdgeSystem=p,cc._RF.pop()},{"./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)":"LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)"}],"LockOnWalkFinishComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5dc6cPnZYBf/5yVLJhaucSH","LockOnWalkFinishComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnWalkFinishComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="lockOnWalkFinish",t}(e("./LockComponent (@tapclap.match-x.engine.components)").LockComponent);n.LockOnWalkFinishComponent=r,cc._RF.pop()},{"./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)"}],"LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"abdecYeENdYkosxHz/w/EPC","LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LockOnWalkFinishSystem=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./LockOnWalkFinishComponent (@tapclap.match-x.engine.components)"),s=e("./WalkFinishComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(t){var n=e.call(this,t.world)||this;return n._world=t.world,n._entityLockFactory=t.entityLockFactory,n}return a(t,e),t.prototype.process=function(){var e,t,n=this;try{for(var o=r(this._world.getComponentsByClass(i.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t=e.getComponentByClass(s.WalkFinishComponent),o=e.getComponentByClass(c.LockOnWalkFinishComponent);t&&n._entityLockFactory.createLock(e,o)})}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!1},t.KEY=Symbol("LockOnWalkFinish"),t}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.LockOnWalkFinishSystem=p,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockOnWalkFinishComponent (@tapclap.match-x.engine.components)":"LockOnWalkFinishComponent (@tapclap.match-x.engine.components)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./WalkFinishComponent (@tapclap.match-x.engine.components)":"WalkFinishComponent (@tapclap.match-x.engine.components)"}],"LockSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"05ef52FRhNR+JLPqoT7lQ/s","LockSystem (@tapclap.match-x.engine.systems.lock-system)"),n.__esModule=!0,n.LockSystem=void 0;var o=e("./GridComponent (@tapclap.match-x.engine.components)"),a=e("./LockComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._world=t,o._locks=n,o}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var c=i.prototype;return c._getLock=function(e){return this._locks[e.type]||e},c._processComponents=function(e,t,n){var o=t.getEnabledComponent(a.LockComponent.KEY);if(n&&(o=t.getComponent(a.LockComponent.KEY)),o){var i=!1,c=this._getLock(o),s=c.layers,p=c.components;if(s&&p)for(var l,m=r(s);!(l=m()).done;){var u=l.value,d=e.getEntity(u);if(d)for(var y,f=r(p);!(y=f()).done;){var h=y.value,g=d.getComponent(h);g&&g.enable!==n&&(g.enable=n,i=!0)}}return n&&o.removeSelf&&t.removeComponent(a.LockComponent.KEY),i}return!1},c._lock=function(e,t,n){this._processComponents(t,n,!1)&&this._world.pushState(i.STATE_LOCK,{grid:e,cell:t,entity:n})},c._unlock=function(e,t,n){this._processComponents(t,n,!0)&&this._world.pushState(i.STATE_UNLOCK,{grid:e,cell:t,entity:n})},c.process=function(){for(var e,t=r(this._world.getEnabledComponentsByClass(o.GridComponent));!(e=t()).done;)for(var n=e.value.grid,a=0;a<n.rows;a++)for(var i=0;i<n.cols;i++)for(var c,s=n.getCell(a,i),p=r(s.invertedEntities);!(c=p()).done;){var l=c.value;this._lock(n,s,l)}return!1},i}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.LockSystem=p,p.KEY=Symbol("LockSystem.KEY"),p.STATE_LOCK=Symbol("LockSystem.STATE_LOCK"),p.STATE_UNLOCK=Symbol("LockSystem.STATE_UNLOCK"),cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"LogMatch3GameLoseAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"04f38jGWlFaErHmzOGOqW+4","LogMatch3GameLoseAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.LogMatch3GameLoseAction=void 0;var r=function(e){function t(t){var n=t.sceneManager,o=e.call(this)||this;return o._sceneManager=n,o}return a(t,e),t.prototype.run=function(){return this._sceneManager.getCurrentSceneComponent().logLoseEvent(),Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.LogMatch3GameLoseAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)":[function(e,t,n){"use strict";cc._RF.push(t,"4d871zKxDdQf5GmmlJeJOaa","LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LootBoxUnpacker=void 0;var a=function(){function e(e){this._backdropManager=e.backdropManager,this._uiManager=e.uiManager,this._uiHolderKeyResolver=e.uiHolderKeyResolver}return e.prototype.setUnpackerView=function(e){this._unpackerView=e},e.prototype.unpack=function(e){var t=this,n=e.box,a=e.userItems,r=e.userItemHandler,i=void 0===r?function(){}:r;return n?Promise.resolve().then(function(){return t._unpackerView.enable()}).then(function(){return t._unpackerView.cloneLootBox(n)}).then(function(e){return t._backdropManager.highlight(e),e}).then(function(e){return t._unpackerView.moveLootBoxToCenter(e)}).then(function(e){var n,r,c=[];try{for(var s=o(a),p=s.next();!p.done;p=s.next()){var l=p.value,m=t._unpackerView.addUserItem(l);t._backdropManager.highlight(m),t._backdropManager.highlight(t._unpackerView),c.push({userItemComponent:m,userItem:l})}}catch(u){n={error:u}}finally{try{p&&!p.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return t._unpackerView.splash(e).then(function(){return t._unpackerView.waitClaimTap().then(function(){return c.forEach(function(e){var n=e.userItemComponent,o=e.userItem,a=t._uiHolderKeyResolver.resolve(o.spec+":"+o.name);t._uiManager.addClaimAnimation({target:a,node:n.node,clone:!1,callback:function(){return i(o)}})}),t._uiManager.playClaimAnimations().then(function(){t._backdropManager.unhighlight(e),t._backdropManager.unhighlight(t._unpackerView),t._unpackerView.clear(),t._unpackerView.disable()})})})}):Promise.resolve()},e}();n.LootBoxUnpacker=a,cc._RF.pop()},{}],"LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)":[function(e,t,n){"use strict";cc._RF.push(t,"12584D50j9X1apMCtxqCqXX","LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.LootBoxUnpackerView=void 0;var i=e("./TimeDuration (@tapclap.utils-js.time-duration)"),c=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),s=e("./TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),p=e("./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),l=e("./LootBoxView (@tapclap.game-kit.ui.loot-box)"),m=cc._decorator,u=m.ccclass,d=m.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parentNode=null,t._userItemPrefab=null,t._splashDelay=3,t._radiusCoef=4,t._labelColor=new cc.Color(255,255,255,255),t._userItemComponents=[],t}return a(t,e),t.prototype.onLoad=function(){this.node.active=!1},t.prototype.getTargetNode=function(){return this._parentNode||this.node},t.prototype.enable=function(){return this.node.active=!0,Promise.resolve()},t.prototype.disable=function(){return this.node.active=!1,Promise.resolve()},t.prototype.cloneLootBox=function(e){var t=this;return new Promise(function(n){var o=t.getTargetNode(),a=e.node,r=a.parent.convertToWorldSpaceAR(a.getPosition()),i=o.convertToNodeSpaceAR(r),c=cc.instantiate(a);o.addChild(c),c.setPosition(i),n(c.getComponent(l.LootBoxView))})},t.prototype.moveLootBoxToCenter=function(e){return new Promise(function(t){var n=e.node.getPosition(),o=cc.sequence([cc.spawn([cc.bezierTo(.5,[n,new cc.Vec2(n.x,0),new cc.Vec2(0,0)]),cc.sequence([cc.scaleTo(.3,1.25,1.25),cc.scaleTo(.2,1,1)])]),cc.callFunc(function(){return t(e)})]);e.node.runAction(o)})},t.prototype.addUserItem=function(e){var t=cc.instantiate(this._userItemPrefab),n=t.getComponent(p.UserItemInfoComponent);if(!n)throw new Error("UserItemPrefab must has UserItemInfoComponent");return n.setIcon(e.spec+":"+e.name),n.setIconScale(2.5),n.setLabelScale(1.5),n.setLabelColor(this._labelColor),n.setMeasureColor(this._labelColor),n.setMultiplySignColor(this._labelColor),e instanceof c.CountableUserItem&&(n.setValue(e.amount),n.setMeasure("")),e instanceof s.TimedUserItem&&(n.setValue((new i.TimeDuration(e.duration).getMinutes()/60).toString()),n.setMeasure("h")),t.setScale(0),this.node.addChild(t),this._userItemComponents.push(n),n},t.prototype.splash=function(e){var t=this;return e.animateIdle(),new Promise(function(n){t.scheduleOnce(function(){return e.animateExplode(function(){return n()})},t._splashDelay)}).then(function(){var e=0,n=360/t._userItemComponents.length,o=t._userItemComponents.length-1==0?0:Math.min(t.node.height,t.node.width)/t._radiusCoef;t._userItemComponents.forEach(function(t){var a=o*Math.cos(cc.misc.degreesToRadians(e)),r=o*Math.sin(cc.misc.degreesToRadians(e));t.node.setPosition(a,r),e+=n,t.node.setScale(1)}),t._userItemComponents=[]})},t.prototype.waitClaimTap=function(){var e=this;return new Promise(function(t){e.node.on(cc.Node.EventType.TOUCH_END,t)})},t.prototype.fadeOutUserItems=function(){var e=this._userItemComponents.map(function(e){return new Promise(function(t){e.node.runAction(cc.sequence([cc.fadeOut(1),cc.callFunc(t)]))})});return Promise.all(e).then(function(){})},t.prototype.clear=function(){this.node.destroyAllChildren()},r([d({type:cc.Node,visible:!0})],t.prototype,"_parentNode",void 0),r([d({type:cc.Prefab,visible:!0})],t.prototype,"_userItemPrefab",void 0),r([d({visible:!0})],t.prototype,"_splashDelay",void 0),r([d({visible:!0})],t.prototype,"_radiusCoef",void 0),r([d({visible:!0})],t.prototype,"_labelColor",void 0),r([u],t)}(cc.Component);n.LootBoxUnpackerView=y,cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./LootBoxView (@tapclap.game-kit.ui.loot-box)":"LootBoxView (@tapclap.game-kit.ui.loot-box)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./TimedUserItem (@tapclap.game-kit.user-item-manager.items)":"TimedUserItem (@tapclap.game-kit.user-item-manager.items)","./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"}],"LootBoxView (@tapclap.game-kit.ui.loot-box)":[function(e,t,n){"use strict";cc._RF.push(t,"73ac0QaIQRfk5PjI8/eCSV8","LootBoxView (@tapclap.game-kit.ui.loot-box)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.LootBoxView=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.animateStatic=function(){},t.prototype.animateIdle=function(){},t.prototype.animateExplode=function(){},r([i],t)}(cc.Component);n.LootBoxView=c,cc._RF.pop()},{}],"LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"7ab1f2OR9pWBLfLJfHXDbt4","LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),n.__esModule=!0,n.LoseGameStrategy=void 0;var a=function(){function e(e){this._reason=e.reason}var t,n;return e.prototype.isLose=function(){return!1},t=e,(n=[{key:"reason",get:function(){return this._reason}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.LoseGameStrategy=a,cc._RF.pop()},{}],"LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)":[function(e,t,n){"use strict";cc._RF.push(t,"914c3omJ6hZR4jcJoxa4+mt","LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)"),n.__esModule=!0,n.LoseLevelBombExplodeWindowLayoutComponent=void 0;var o,a,r,i,c=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:c.I18NLabel,visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_movesLabel",i,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.setMovesCount=function(e){this._movesLabel.setParams({value:e.toString()})},o}(s.WindowLayoutComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_movesLabel",e)||e},f)).initializer&&(Object.defineProperty(u,"_movesLabel",f),f=null),i=f,a=r))||a);n.LoseLevelBombExplodeWindowLayoutComponent=v,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)":[function(e,t,n){"use strict";cc._RF.push(t,"e49c5EImddagYh9mNgf6jmO","LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)"),n.__esModule=!0,n.LoseLevelParrotFailWalkLayoutComponent=void 0;var o,a,r,i,c=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:c.I18NLabel,visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_movesLabel",i,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.setMovesCount=function(e){this._movesLabel.setParams({value:e.toString()})},o}(s.WindowLayoutComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_movesLabel",e)||e},f)).initializer&&(Object.defineProperty(u,"_movesLabel",f),f=null),i=f,a=r))||a);n.LoseLevelParrotFailWalkLayoutComponent=v,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":[function(e,t,n){"use strict";var o,a,r,i,c,s;function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"8b74c4u0BxLUYraKj6LQRJQ","LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),n.__esModule=!0,n.LoseLevelState=void 0;var d=cc._decorator,y=d.ccclass,f=d.property,h=(o=f({type:[cc.Node],visible:!0}),a=f({visible:!0}),y((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_nodes",c,l(t)),p(t,"_durationStateAnimation",s,l(t)),t._stateNodes=[],t._windowLayout=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a._getNodes=function(){return[].concat(this._nodes,this._stateNodes)},a._hideNode=function(e){var t=this;return e.active?new Promise(function(n){e.runAction(cc.sequence([cc.scaleTo(t._durationStateAnimation,0).easing(cc.easeBackIn()),cc.callFunc(function(){return e.active=!1}),cc.callFunc(n)]))}):Promise.resolve()},a._showNode=function(e){var t=this;return new Promise(function(n){e.active=!0,e.scale=0,e.runAction(cc.sequence([cc.scaleTo(t._durationStateAnimation,1).easing(cc.easeBackOut()),cc.callFunc(n)]))})},a.setWindowLayout=function(e){this._windowLayout=e},a.setData=function(){},a.show=function(){var e=this;return Promise.all(this._getNodes().map(function(t){return e._showNode(t)}))},a.hide=function(){var e=this;return Promise.all(this._getNodes().map(function(t){return e._hideNode(t)}))},a.initialize=function(){},o}(cc.Component),c=u(i.prototype,"_nodes",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=u(i.prototype,"_durationStateAnimation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),r=i))||r);n.LoseLevelState=h,cc._RF.pop()},{}],"LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":[function(e,t,n){"use strict";cc._RF.push(t,"8d785gjmrtN3p3z8AZCPIa5","LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),n.__esModule=!0,n.LoseLevelWindowLayoutComponent=void 0;var o,a,r,i,c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=e("./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:[s.LoseLevelState],visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_states",i,l(t)),t._prevState=-1,t._currentState=-1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a.setState=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1),this._prevState=this._currentState,this._currentState=e;var o=this._states[this._currentState];o&&o.setData(t),n||this.updateState()},a.updateState=function(){var e=this._states[this._prevState],t=this._states[this._currentState],n=Promise.resolve();return e&&(n=n.then(function(){return e.hide()})),t&&(n=n.then(function(){return t.show()})),n},a.initialize=function(t){var n=this;void 0===t&&(t={}),e.prototype.initialize.call(this,t),Object.values(this._states).forEach(function(e){e.initialize(),e.setWindowLayout(n)})},o}(c.WindowLayoutComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_states",e)||e},f)).initializer&&(Object.defineProperty(u,"_states",f),f=null),i=f,a=r))||a);n.LoseLevelWindowLayoutComponent=v,v.STATE_BEFORE_LOSE=0,v.STATE_AFTER_LOSE=1,cc._RF.pop()},{"./LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"00f0b0yt1NaAoREUDXbf29g","LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.LoseReasonWindowSceneResourcesResolver=void 0;var c=e("./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),s=e("./Match3GameConfig (scripts.common.match3-game)"),p=function(e){function t(t){var n=e.call(this)||this;return n._windowKeys=t.windowKeys,n._levels=t.levels.get(),n._reason=t.reason,n}return a(t,e),t.prototype.getLoadTasks=function(e){return"Match3Game"===e.scene&&this._hasReason()?this._createTasks(this._windowKeys,e.windowConfig):Promise.resolve([])},t.prototype._hasReason=function(){for(var e=this._getEntityTypes(),t=0;t<e.length;t++)if(e[t].search(this._reason)>-1)return!0;return!1},t.prototype._getEntityTypes=function(){var e=this._levels.getLastLevel(),t=e.data;if(e){var n=new Set,o=[],a=t.tiles,c=t.emitByStrategy;a.cells.forEach(function(e){e.entity&&(n.add(e.entity.type),e.entity.components&&o.push.apply(o,i(Object.entries(e.entity.components)))),e.randomEntities&&Object.entries(e.randomEntities).forEach(function(e){var t=r(e,1)[0];n.add(t)})}),Object.values(a.defaultComponents).forEach(function(e){o.push.apply(o,i(Object.entries(e)))}),Object.entries(a.probabilities).map(function(e){var t=r(e,1)[0];n.add(t)}),a.drop.entities.flat().forEach(function(e){n.add(e)}),c.forEach(function(e){var t=e.emitOptions;t.entities&&Object.entries(t.entities).forEach(function(e){var t=r(e,1)[0];n.add(t)})}),Array.from(n.values()).forEach(function(e){o.push.apply(o,i(Object.entries(s.Match3GameConfig.entities[e].components)))});var p=function(e){e.filter(function(e){var t=r(e,2),n=t[0],o=t[1];return n.toLowerCase().search("emit")>-1&&void 0!==o.entities}).forEach(function(e){var t=r(e,2)[1];t.entities&&(Object.keys(t.entities).forEach(function(e){n.has(e)||(n.add(e),p(Object.entries(s.Match3GameConfig.entities[e].components)))}),Object.values(t.entities).forEach(function(e){var t=e.options;t&&t.components&&p(Object.entries(t.components))}))})};return p(o),Array.from(n.values())}},t}(c.SceneResourcesResolver);n.LoseReasonWindowSceneResourcesResolver=p,cc._RF.pop()},{"./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)","./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"0fdd802zLpVvrK4ZQ1kPMdB","MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MachineGumLegacyLevelComponentRetriever=void 0;var r=e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"),i=e("./Match3GameConfig (scripts.common.match3-game)"),c=function(e){function t(t,n,o){void 0===t&&(t={}),void 0===n&&(n={});var a=e.call(this)||this;return a._symbolToGroupIdMap=t,a._groupMap=n,a._entityColorMap=o,a}return a(t,e),t.prototype.retrieve=function(e){var t,n,o=this,a=e.colors.split("");return{emitOnDeath:{type:"random",target:"random",emitCount:1,entities:(t=e.bombExplodeMoves,n={},a.forEach(function(e){var a,r=o._groupMap[o._symbolToGroupIdMap[e]];if(r){var i="bubble-"+r.toLowerCase();(null===(a=o._entityColorMap[e])||void 0===a?void 0:a.includes(i))&&(n["bubble-"+r.toLowerCase()]={amount:1/0,options:{components:{counter:{value:t}}}})}}),n),state:i.TURN_STATES.FINISH,turnNumber:5}}},t}(r.LegacyLevelComponentRetriever);n.MachineGumLegacyLevelComponentRetriever=c,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)"}],"ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a7d15KYgBVS2p9WGGKYdVA+","ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ManageComponentsOnSwapComponent=void 0;var r=function(e){function t(t){var n=t.conditions,o=void 0===n?[]:n,a=e.call(this)||this;return a._conditions=o,a}return a(t,e),Object.defineProperty(t.prototype,"conditions",{get:function(){return this._conditions},enumerable:!1,configurable:!0}),t.KEY="manageComponentsOnSwap",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ManageComponentsOnSwapComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"5b016rV40hS0KelkP6OvK+S","ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ManageComponentsSwapSystemHandler=void 0;var i=function(e){function t(t){var n=t.trigger,o=e.call(this)||this;return o._trigger=n,o}return a(t,e),t.prototype.process=function(e,t){var n,o,a=this,i=[e,t].filter(function(e){return e}).map(function(e){var t=e.getEnabledComponentByClass(a._trigger);return{entity:e,component:t,conditions:null==t?void 0:t.conditions}}).filter(function(e){return e.component}),c=function(e,t){var n,o,a=null===(p=i.find(function(t){return t.entity!==e}))||void 0===p?void 0:p.entity;if(a)try{for(var c=(n=void 0,r(t)),s=c.next();!s.done;s=c.next()){var p=s.value,l=p.hasComponents,m=void 0===l?[]:l,u=p.addComponents,d=void 0===u?[]:u,y=p.removeComponents,f=void 0===y?[]:y,h=p.entityTypes;(void 0===h?[]:h).includes(a.type)&&m.every(function(t){return e.getEnabledComponentByClass(t)})&&(f.forEach(function(t){return e.removeComponentByClass(t)}),d.forEach(function(t){var n=t.component,o=t.options;return e.addComponent(n.KEY,new n(o))}))}}catch(g){n={error:g}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}};try{for(var s=r(i),p=s.next();!p.done;p=s.next()){var l=p.value;c(l.entity,l.conditions)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t}(e("./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)").SwapSystemHandler);n.ManageComponentsSwapSystemHandler=i,cc._RF.pop()},{"./SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)":"SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)"}],"MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d992a+kHOtAcaQlPi/+Sc5C","MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)"),n.__esModule=!0,n.MaskRenderComponent=void 0;var r=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.getSpriteFrame=function(){var e=this.node.getContentSize(),t=this.node.getComponent(cc.Camera);if(!t)throw new Error("Node have not component cc.Camera");var n=new cc.RenderTexture;n.initWithSize(e.width,e.height),t.targetTexture=n,t._camera._node=this.node,t.render();var o=new cc.SpriteFrame;return o.setTexture(n),o},r.remove=function(){this.node.parent.removeChild(this.node)},o}(cc.Component))||o;n.MaskRenderComponent=r,cc._RF.pop()},{}],"Match3Game (scripts.common.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"b01cchiwpVWB7oVfJOSDdPA","Match3Game (scripts.common.match3-game)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.Match3Game=void 0;var c=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),s=e("./HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)"),p=e("./ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)"),l=e("./BoosterFactory (@tapclap.match-x.engine.boosters)"),m=e("./BoosterInputHandler (@tapclap.match-x.engine.boosters)"),u=e("./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)"),d=e("./CombinationComponent (@tapclap.match-x.engine.components)"),y=e("./ComponentFactory (@tapclap.match-x.engine.components)"),f=e("./CounterComponent (@tapclap.match-x.engine.components)"),h=e("./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)"),g=e("./EmitOnDeathComponent (@tapclap.match-x.engine.components)"),v=e("./EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)"),_=e("./EmitOnExplodeComponent (@tapclap.match-x.engine.components)"),b=e("./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)"),C=e("./EmitOnGameStartComponent (@tapclap.match-x.engine.components)"),w=e("./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)"),S=e("./EmitOnTurnComponent (@tapclap.match-x.engine.components)"),E=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),x=e("./ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)"),A=e("./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)"),O=e("./GridComponent (@tapclap.match-x.engine.components)"),R=e("./GroupComponent (@tapclap.match-x.engine.components)"),P=e("./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)"),k=e("./AnimationComponentCreator (@tapclap.match-x.engine.components.render)"),T=e("./ShuffleComponent (@tapclap.match-x.engine.components)"),I=e("./SwapComponent (@tapclap.match-x.engine.components)"),M=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),j=e("./TutorialComponent (@tapclap.match-x.engine.components)"),L=e("./Engine (@tapclap.match-x.engine)"),F=e("./EntityFactory (@tapclap.match-x.engine.entities)"),D=e("./GoalFactory (@tapclap.match-x.engine.goals)"),B=e("./GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)"),G=e("./CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)"),N=e("./CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),W=e("./GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),H=e("./InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),V=e("./RetrieverFactory (@tapclap.match-x.engine.retrievers)"),K=e("./InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),U=e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),Y=e("./ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)"),z=e("./CleanStateSystem (@tapclap.match-x.engine.systems)"),q=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),Z=e("./AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),X=e("./EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)"),J=e("./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)"),Q=e("./CounterSystem (@tapclap.match-x.engine.systems.counter-system)"),$=e("./ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"),ee=e("./OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),te=e("./OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),ne=e("./OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),oe=e("./OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),ae=e("./OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),re=e("./SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"),ie=e("./RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"),ce=e("./EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),se=e("./EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),pe=e("./RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),le=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),me=e("./WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)"),ue=e("./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)"),de=e("./ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)"),ye=e("./EntitySystem (@tapclap.match-x.engine.systems.entity-system)"),fe=e("./ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)"),he=e("./ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)"),ge=e("./ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)"),ve=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),_e=e("./ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)"),be=e("./PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)"),Ce=e("./ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)"),we=e("./GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)"),Se=e("./CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)"),Ee=e("./DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)"),xe=e("./ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)"),Ae=e("./ExplodeCollectorSystem (@tapclap.match-x.engine.systems)"),Oe=e("./ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)"),Re=e("./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)"),Pe=e("./GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)"),ke=e("./AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Te=e("./GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Ie=e("./GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Me=e("./MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),je=e("./PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Le=e("./SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Fe=e("./SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),De=e("./SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),Be=e("./GameOverSystem (@tapclap.match-x.engine.systems)"),Ge=e("./GoalSystem (@tapclap.match-x.engine.systems)"),Ne=e("./GroundSystem (@tapclap.match-x.engine.systems.ground-system)"),We=e("./SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)"),He=e("./OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)"),Ve=e("./HealthSystem (@tapclap.match-x.engine.systems.health-system)"),Ke=e("./HelpSystem (@tapclap.match-x.engine.systems.help-system)"),Ue=e("./TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)"),Ye=e("./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)"),ze=e("./InputSystem (@tapclap.match-x.engine.systems.input-system)"),qe=e("./SwapInputHandler (@tapclap.match-x.engine.systems.input-system)"),Ze=e("./TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)"),Xe=e("./EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)"),Je=e("./GoalDataLoader (@tapclap.match-x.engine.systems.load-system)"),Qe=e("./GridDataLoader (@tapclap.match-x.engine.systems.load-system)"),$e=e("./RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)"),et=e("./LoadSystem (@tapclap.match-x.engine.systems.load-system)"),tt=e("./TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)"),nt=e("./TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)"),ot=e("./ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)"),at=e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)"),rt=e("./UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)"),it=e("./UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)"),ct=e("./ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)"),st=e("./ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)"),pt=e("./MoveSystem (@tapclap.match-x.engine.systems.move-system)"),lt=e("./ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)"),mt=e("./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)"),ut=e("./MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"),dt=e("./MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"),yt=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)"),ft=e("./BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),ht=e("./CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),gt=e("./DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),vt=e("./SyncPipelineSystem (scripts.common.match3-game.systems)"),_t=e("./PrepareGoalSystem (@tapclap.match-x.engine.systems)"),bt=e("./RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)"),Ct=e("./OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)"),wt=e("./OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)"),St=e("./OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)"),Et=e("./RemoveSystem (@tapclap.match-x.engine.systems)"),xt=e("./RenderSystem (@tapclap.match-x.engine.systems.render-system)"),At=e("./ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)"),Ot=e("./ResetSystem (@tapclap.match-x.engine.systems.reset-system)"),Rt=e("./ScoreSystem (@tapclap.match-x.engine.systems.score-system)"),Pt=e("./ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)"),kt=e("./ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)"),Tt=e("./ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)"),It=e("./ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)"),Mt=e("./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"),jt=e("./ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)"),Lt=e("./StarSystem (@tapclap.match-x.engine.systems)"),Ft=e("./StartSystem (@tapclap.match-x.engine.systems.start-system)"),Dt=e("./StatisticSystem (@tapclap.match-x.engine.systems)"),Bt=e("./StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)"),Gt=e("./OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)"),Nt=e("./OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)"),Wt=e("./SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)"),Ht=e("./PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"),Vt=e("./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"),Kt=e("./EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)"),Ut=e("./InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)"),Yt=e("./ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)"),zt=e("./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)"),qt=e("./ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)"),Zt=e("./SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)"),Xt=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),Jt=e("./TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)"),Qt=e("./CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)"),$t=e("./RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)"),en=e("./CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)"),tn=e("./CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)"),nn=e("./OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)"),on=e("./SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)"),an=e("./TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)"),rn=e("./TurnSelector (@tapclap.match-x.engine.systems.turn-system)"),cn=e("./TurnSystem (@tapclap.match-x.engine.systems.turn-system)"),sn=e("./BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),pn=e("./RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),ln=e("./SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),mn=e("./TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)"),un=e("./UpdateMultiplierSystem (@tapclap.match-x.engine.systems)"),dn=e("./NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),yn=e("./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),fn=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)"),hn=e("./OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),gn=e("./FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),vn=e("./ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),_n=e("./ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),bn=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),Cn=e("./AbstractFactory (@tapclap.utils-js.abstract-factory)"),wn=e("./Random (@tapclap.utils-js.random)"),Sn=e("./WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)"),En=e("./WorldGroupsComponent (@tapclap.match-x.engine.components)"),xn=e("./TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)"),An=e("./AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)"),On=e("./Match3GameConfig (scripts.common.match3-game)"),Rn=e("./EmitBeforeExplodeSystem (scripts.common.match3-game.systems)"),Pn=e("./EmitBeforeMoveSystem (scripts.common.match3-game.systems)"),kn=e("./ExplodeCollectionSystem (@tapclap.match-x.engine.systems)"),Tn=e("./RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)"),In=e("./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),Mn=e("./OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),jn=e("./OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),Ln=e("./ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)"),Fn=e("./EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),Dn=e("./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)"),Bn=e("./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),Gn=e("./DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),Nn=e("./RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),Wn=e("./DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)"),Hn=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),Vn=e("./DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)"),Kn=e("./WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)"),Un=e("./RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)"),Yn=e("./WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)"),zn=e("./OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),qn=e("./LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)"),Zn=e("./FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)"),Xn=e("./EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)"),Jn=e("./RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)"),Qn=e("./RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)"),$n=e("./LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)"),eo=e("./LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)"),to=e("./UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)"),no=e("./WalkComponent (@tapclap.match-x.engine.components)"),oo=e("./LockAnimationResolver (scripts.common.match3-game.animation-resolvers)"),ao=e("./EmitAfterEmitSystem (scripts.common.match3-game.systems)"),ro=e("./OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)"),io=e("./EmitAfterEmitComponent (@tapclap.match-x.engine.components)"),co=e("./EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)"),so=e("./ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)"),po=e("./EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)"),lo=e("./HealthComponent (@tapclap.match-x.engine.components)"),mo=e("./ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)"),uo=e("./Booster (@tapclap.match-x.engine.boosters)"),yo=e("./RemoveEntityEffect (@tapclap.match-x.engine.effects)"),fo=e("./RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)"),ho=e("./RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)"),go=e("./AddMultiplierMinValueEffect (scripts.common.match3-game.effects)"),vo=e("./CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)"),_o=e("./InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)"),bo=e("./EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)"),Co=e("./EmitBeforeWalkSystem (scripts.common.match3-game.systems)"),wo=e("./StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)"),So=e("./MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)"),Eo=e("./EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)"),xo=e("./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"),Ao=e("./NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Oo=e("./ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),Ro=e("./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),Po=e("./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),ko=e("./CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)"),To=e("./CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),Io=e("./BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),Mo=e("./ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),jo=e("./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),Lo=e("./MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"),Fo=e("./NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),Do=e("./OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),Bo=e("./BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)"),Go=e("./BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)"),No=e("./OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)"),Wo=e("./TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)"),Ho=e("./OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)"),Vo=e("./OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),Ko=e("./LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)"),Uo=e("./PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),Yo=e("./OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)"),zo=e("./ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)"),qo=e("./EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),Zo=e("./CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)"),Xo=e("./EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)"),Jo=e("./ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)"),Qo=e("./OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)"),$o=e("./ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)"),ea=e("./EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)"),ta=e("./OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),na=e("./CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)"),oa=e("./CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)"),aa=e("./ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)"),ra=e("./DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)"),ia=e("./ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)"),ca=e("./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),sa=e("./CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),pa=e("./DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),la=e("./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),ma=e("./GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),ua=e("./AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),da=e("./RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),ya=e("./EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),fa=e("./RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),ha=e("./EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)"),ga=e("./EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)"),va=e("./OnTurnEndWalkSystem (scripts.common.match3-game.systems)"),_a=e("./SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)"),ba=e("./SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)"),Ca=e("./IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)"),wa=e("./RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)"),Sa=e("./SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"),Ea=e("./ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)"),xa=e("./TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)"),Aa=e("./ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)"),Oa=function(e){function t(n){var o,a,r,L,Oa,Ra,Pa,ka,Ta=e.call(this)||this;n.randomSeed=(null!==(ka=n.randomSeed)&&void 0!==ka?ka:Math.random()).toString(),console.log("randomSeed",n.randomSeed);var Ia=new y.ComponentFactory(n.componentClassRegister,{animation:new k.AnimationComponentCreator({animationResolverFactory:new Cn.AbstractFactory({default:{class:c.AnimationResolver,options:{}},health:{class:s.HealthAnimationResolver,options:{}},counterRatio:{class:p.ValueComponentRatioAnimationResolver,options:{componentKey:f.CounterComponent.KEY}},distanceToGridEdge:{class:Kn.WalkDistanceToGridEdgeAnimationResolver,options:{}},lockWalk:{class:oo.LockAnimationResolver,options:{componentKey:no.WalkComponent.KEY}},toggleLock:{class:Aa.ToggleLockAnimationResolver,options:{}}})})}),Ma=new F.EntityFactory(Ia,n.entityClassRegister,n.entities),ja=Ta._world=Ma.create("world"),La=new V.RetrieverFactory({random:new wn.Random(n.randomSeed)}),Fa=new Cn.AbstractFactory(((o={})[On.RetrieverFactoryKeys.COMBINATION]={class:sa.CombinationExplodeRetriever,options:{world:ja}},o[On.RetrieverFactoryKeys.SINGLE]={class:ca.SingleExplodeRetriever,options:{world:ja}},o[On.RetrieverFactoryKeys.DIAGONAL]={class:pa.DiagonalExplodeRetriever,options:{world:ja,size:1}},o[On.RetrieverFactoryKeys.NEIGHBOR]={class:la.NeighborExplodeRetriever,options:{world:ja,dirs:la.NeighborExplodeRetriever.DIRECTION_4}},o[On.RetrieverFactoryKeys.NEIGHBOR_NO_FILTER]={class:Ao.NeighborNoFilterExplodeRetriever,options:{world:ja,dirs:Ao.NeighborNoFilterExplodeRetriever.DIRECTION_4}},o[On.RetrieverFactoryKeys.GROUP]={class:ma.GroupExplodeRetriever,options:{world:ja}},o[On.RetrieverFactoryKeys.RANDOM_GROUP]={class:ma.GroupExplodeRetriever,options:{world:ja,random:new wn.Random(n.randomSeed)}},o[On.RetrieverFactoryKeys.ALL]={class:ua.AllExplodeRetriever,options:{world:ja}},o[On.RetrieverFactoryKeys.RADIAL_SQUARE]={class:da.RadialSquareExplodeRetriever,options:{world:ja,radius:1}},o[On.RetrieverFactoryKeys.EMPTY_CELL]={class:ya.EmptyCellExplodeRetriever,options:{world:ja,limit:0}},o[On.RetrieverFactoryKeys.RANDOM_CELL]={class:fa.RandomCellExplodeRetriever,options:{world:ja,explodeCount:1,random:new wn.Random(n.randomSeed)}},o)),Da=new D.GoalFactory(ja),Ba=new ye.EntitySystem({world:ja,factory:Ma,random:new wn.Random(n.randomSeed),entityCreateHandlers:[new de.ComponentInjectEntityCreateHandler({gridComponent:Ta._world.getComponent("tiles")})]}),Ga=new vo.CompositeEffectVerifier([new bo.EmptyGroupEffectVerifier,new _o.InputHandlerEffectVerifier]),Na=new l.BoosterFactory({trowel:{class:uo.Booster,options:{effect:{class:yo.RemoveEntityEffect,options:{verifier:Ga}}}},cat:{class:uo.Booster,options:{effect:{class:fo.RemoveEntityByGroupEffect,options:{retrieverFactory:La,verifier:Ga}}}},cart:{class:uo.Booster,options:{effect:{class:ho.RemoveEntityInColumnEffect,options:{verifier:Ga}}}},plusone:{class:uo.Booster,options:{effect:{class:go.AddMultiplierMinValueEffect}}}});Ta.addSystem(Jt.TurnStateSystem.KEY,new Jt.TurnStateSystem({world:ja,states:On.Match3GameConfig.turnStateConfig})),Ta.addSystem(ye.EntitySystem.KEY,Ba),Ta.addSystem(ze.InputSystem.KEY,new ze.InputSystem(ja,[new Ze.TutorialInputHandler({world:ja,gridKeys:["tiles"]}),new qe.SwapInputHandler,new m.BoosterInputHandler(Na,!1)])),Ta.addSystem(Xt.SwapSystem.KEY,new Xt.SwapSystem({world:ja,strategies:[new qt.ComponentSwapSystemStrategy({component:I.SwapComponent})],handlers:[new Kt.EqualTagExplodeSwapSystemHandler,new Ut.InheritGroupSwapSystemHandler,new Yt.ManageComponentsSwapSystemHandler({trigger:P.ManageComponentsOnSwapComponent})]})),Ta.addSystem(zt.RevertSwapSystem.KEY,new zt.RevertSwapSystem(ja,Ta.getSystem("swap"),[q.CombinationSystem.STATE,ve.ExplodeSystem.STATE])),Ta.addSystem(Zt.SwapAttemptsSystem.KEY,new Zt.SwapAttemptsSystem(ja)),Ta.addSystem(mn.TutorialSystem.KEY,new mn.TutorialSystem(ja,{raw:new pn.RawInputTutotialStepStrategy,booster:new sn.BoosterTutorialStepStrategy,speech:new ln.SpeechTutorialStepStrategy})),Ta.addSystem(Ke.HelpSystem.KEY,new Ke.HelpSystem(ja,new Ue.TutorialHelpStrategy(Ta._world))),Ta.addSystem(q.CombinationSystem.KEY,new q.CombinationSystem(ja,{retrieverFactory:La,patterns:n.patterns})),Ta.addSystem(Vt.SuperEntitySystem.KEY,new Vt.SuperEntitySystem({world:ja,random:new wn.Random(n.randomSeed),entitySystem:Ta.getSystem("entity"),config:n.superEntities})),Ta.addSystem(ko.CoverEntitySystem.KEY,new ko.CoverEntitySystem({world:ja,entitySystem:Ta.getSystem("entity"),coverEntityType:"gum",strategies:[new Io.BoosterCoverEntitySystemStrategy,new jo.SwapCoverEntitySystemStrategy,new To.CombinationCoverEntitySystemStrategy,new Mo.ExplodeCoverEntitySystemStrategy],needleStates:[q.CombinationSystem.STATE,ve.ExplodeSystem.STATE]})),Ta.addSystem(Ht.PostSuperEntitySystem.KEY,new Ht.PostSuperEntitySystem({world:ja,postHandlers:[new Wt.SumMultiplierPostSuperEntityHandler({world:ja,combinationTypes:["square"],mode:Wt.SumMultiplierPostSuperEntityHandler.MODE_PERMANENT})]})),Ta.addSystem(ha.EntityDropSystem.KEY,new ha.EntityDropSystem({strategies:[new ga.EntityDropAfterRemoveSystemStrategy({world:ja,entitySystem:Ta.getSystem(ye.EntitySystem.KEY),random:new wn.Random(n.randomSeed)}),new Xo.EntityEmitAfterRemoveSystemStrategy({world:ja,entitySystem:Ta.getSystem(ye.EntitySystem.KEY),entitiesConfig:On.Match3GameConfig.entities,random:new wn.Random(n.randomSeed)})]})),Ta.addSystem(Qo.OnSkipExplodeStateMoveSystem.KEY,new Qo.OnSkipExplodeStateMoveSystem(ja,new lt.ThroughMoveStrategy({entitySystem:Ta.getSystem(ye.EntitySystem.KEY),probabilityFilter:new N.CompositeProbabilityFilter([new G.CollectorGoalEntityProbabilityFilter({gridComponent:Ta.world.getComponent("tiles")}),new Fn.EntityByGoalProbabilityFilter({world:ja,gridComponent:Ta.world.getComponent("tiles"),random:new wn.Random(n.randomSeed)}),new Ca.IncreaseEntityDropAfterRemoveCounterProbabilityFilter({dropAfterRemoveSystem:Ta.getSystem(ha.EntityDropSystem.KEY)})]),random:new wn.Random(n.randomSeed)}))),Ta.addSystem(cn.TurnSystem.KEY,new cn.TurnSystem(ja,new en.CompositeTurnStrategy([new an.TutorialTurnStrategy(ja),new on.SwapTurnStrategy(Ta.getSystem("swap"),[new tn.CombinationSwapTurnResolver(Ta.getSystem("combination")),new nn.OneOfEachComponentSwapTurnResolver([[A.ExplodeOnSwapComponent],[d.CombinationComponent]]),new nn.OneOfEachComponentSwapTurnResolver([[A.ExplodeOnSwapComponent],[A.ExplodeOnSwapComponent]]),new nn.OneOfEachComponentSwapTurnResolver([[P.ManageComponentsOnSwapComponent],[P.ManageComponentsOnSwapComponent]])])]),new Qt.CompositeTurnSelector([new $t.RandomTurnSelector(new wn.Random(n.randomSeed)),new rn.TurnSelector]))),Ta.addSystem(at.LockSystem.KEY,new at.LockSystem(ja)),Ta.addSystem(rt.UnlockOnExplodeSystem.KEY,new rt.UnlockOnExplodeSystem(ja)),Ta.addSystem(it.UnlockOnWalkSystem.KEY,new it.UnlockOnWalkSystem(ja)),Ta.addSystem(Mt.ShuffleSystem.KEY,new Mt.ShuffleSystem({world:ja,random:new wn.Random(n.randomSeed),gridChecker:new B.GridReadyAfterLockChecker({turnSystem:Ta.getSystem(cn.TurnSystem.KEY),combinationSystem:Ta.getSystem(q.CombinationSystem.KEY),lockSystem:Ta.getSystem(at.LockSystem.KEY)}),strategy:new jt.ComponentShuffleSystemStrategy({combinationSystem:Ta.getSystem("combination"),random:new wn.Random(n.randomSeed),componentKeys:[T.ShuffleComponent.KEY]})})),Ta.addSystem(Et.RemoveSystem.KEY,new Et.RemoveSystem(ja)),Ta.addSystem(z.CleanStateSystem.KEY,new z.CleanStateSystem(ja)),Ta.addSystem(at.LockSystem.KEY,new at.LockSystem(ja)),Ta.addSystem(yt.MultiplierSystem.KEY,new yt.MultiplierSystem(ja,[new ft.BlastMultiplierSystemStrategy(ja,{exceptEntityTypes:["candy","super-1","candy-blue","candy-brown","candy-green","candy-orange","candy-pink","candy-purple","candy-violet","candy-white","candy-yellow"]}),new ht.CombinationMultiplierSystemStrategy(ja,n.multiplierPatterns),new gt.DeathMultiplierSystemStrategy(ja)])),Ta.addSystem(xt.RenderSystem.KEY,new xt.RenderSystem(ja,n.renderPipeline)),Ta.addSystem(Re.GameActionSystem.KEY,new Re.GameActionSystem(ja)),Ta.addSystem(et.LoadSystem.KEY,new et.LoadSystem(ja,[{key:"groups",loader:new Sn.WorldGroupsDataLoader(ja,En.WorldGroupsComponent)},{key:"tiles",loader:new Qe.GridDataLoader({world:ja,random:new wn.Random(n.randomSeed),entitySystem:Ta.getSystem("entity"),gridCheckers:[new B.GridReadyAfterLockChecker({turnSystem:Ta.getSystem(cn.TurnSystem.KEY),combinationSystem:Ta.getSystem(q.CombinationSystem.KEY),lockSystem:Ta.getSystem(at.LockSystem.KEY)})],postHandlers:[new $e.RandomHealthGridDataLoaderPostHandler({random:new wn.Random(n.randomSeed)}),new Tn.RandomColorGridDataLoaderPostHandler({worldGroupsComponent:Ta.world.getComponent("worldGroups"),random:new wn.Random(n.randomSeed)}),new Vn.DimensionsGridDataLoaderPostHandler({world:ja}),new co.EmptyEntityGridDataLoaderPostHandler({world:ja,entitySystem:Ba,entityTypes:["beehive"]}),new Wo.TrackDataLoaderPostHandler({world:ja,retrieverFactory:La})],probabilityFilter:new N.CompositeProbabilityFilter([new W.GridEntityCountLimitProbabilityFilter({world:ja}),new H.InitialRandomProbabilityFilter({gridComponent:Ta.world.getComponent("tiles")})]),attempts:500})},{key:"goals",loader:new Je.GoalDataLoader(ja,Da)},{key:"score",loader:new tt.TargetValueComponentDataLoader(ja)},{key:"stars",loader:new tt.TargetValueComponentDataLoader(ja)},{key:"moves",loader:new ot.ValueComponentDataLoader(ja)},{key:"tutorial",loader:new nt.TutorialDataLoader(ja)},{key:"emitByStrategy",loader:new Xe.EmitByStrategyDataLoader(ja)},{key:"startBoosters",loader:new wo.StartBoostersDataLoader(ja)}])),Ta.addSystem(ct.ModifyEntityOnDeathSystem.KEY,new ct.ModifyEntityOnDeathSystem({world:ja,componentFactory:Ia})),Ta.addSystem(Ne.GroundSystem.KEY,new Ne.GroundSystem({world:ja,strategies:[new We.SimpleColumnGroundSystemStrategy({world:ja}),new He.OverEntityColumnGroundSystemStrategy({world:ja})]})),Ta.addSystem(Q.CounterSystem.KEY,new Q.CounterSystem(ja,[new $.ReduceCounterOnTurnStrategy({world:ja,stateKeys:[Xt.SwapSystem.KEY,ve.ExplodeSystem.KEY,q.CombinationSystem.KEY]})])),Ta.addSystem(Oo.ChangeEntityGroupOnCombinationNeighborSystem.KEY,new Oo.ChangeEntityGroupOnCombinationNeighborSystem({world:ja,random:new wn.Random(n.randomSeed),retrieverFactory:La})),Ta.addSystem(Ro.ChangeEntityGroupOnCounterValueChangeSystem.KEY,new Ro.ChangeEntityGroupOnCounterValueChangeSystem({value:0,world:ja,random:new wn.Random(n.randomSeed),turnStates:[On.TURN_STATES.FINISH,On.TURN_STATES.END],skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,J.CompletionSystem.STATE,fn.WalkSystem.STATE,pt.MoveSystem.STATE]})),Ta.addSystem(Po.ChangeEntityGroupOnHealthReduceSystem.KEY,new Po.ChangeEntityGroupOnHealthReduceSystem({world:ja,random:new wn.Random(n.randomSeed)}));var Wa={world:ja,pathStrategies:(a={},a[dn.NeighborWalkPathStrategy.KEY]=new dn.NeighborWalkPathStrategy,a[Gn.DirectionWalkPathStrategy.KEY]=new Gn.DirectionWalkPathStrategy,a[Nn.RandomWalkPathStrategy.KEY]=new Nn.RandomWalkPathStrategy,a),replaceStrategies:(r={},r[yn.EmptyWalkReplaceStrategy.KEY]=new yn.EmptyWalkReplaceStrategy,r[In.ReplaceWalkReplaceStrategy.KEY]=new In.ReplaceWalkReplaceStrategy,r[Bn.SwapWalkReplaceStrategy.KEY]=new Bn.SwapWalkReplaceStrategy,r),sortStrategies:(L={},L[Yn.WalkDirectionWalkSortStrategy.KEY]=new Yn.WalkDirectionWalkSortStrategy({sorters:{UP:function(e,t){return e.cell.row-t.cell.row},DOWN:function(e,t){return t.cell.row-e.cell.row},RIGHT:function(e,t){return e.cell.col-t.cell.col},LEFT:function(e,t){return t.cell.col-e.cell.col}}}),L[Un.RandomWalkSortStrategy.KEY]=new Un.RandomWalkSortStrategy({random:new wn.Random(n.randomSeed)}),L),random:new wn.Random(n.randomSeed),skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE,pt.MoveSystem.STATE_DROP,fn.WalkSystem.STATE]};Ta.addSystem(va.OnTurnEndWalkSystem.KEY+":0",new va.OnTurnEndWalkSystem(Object.assign({},Wa,{order:0,skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP]}))),[1,2].forEach(function(e){Ta.addSystem(va.OnTurnEndWalkSystem.KEY+":"+e,new va.OnTurnEndWalkSystem(Object.assign({},Wa,{order:e})))}),Ta.addSystem(va.OnTurnEndWalkSystem.KEY+":3",new va.OnTurnEndWalkSystem(Object.assign({},Wa,{order:3,skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE,pt.MoveSystem.STATE_DROP,fn.WalkSystem.STATE,ve.ExplodeSystem.STATE,U.ChangeEntityGroupSystem.STATE]}))),Ta.addSystem(Yo.OnExplodeNextOnTrackWalkSystem.KEY,new Yo.OnExplodeNextOnTrackWalkSystem({world:ja,pathStrategies:(Oa={},Oa[Uo.PathWalkPathStrategy.KEY]=new Uo.PathWalkPathStrategy,Oa),replaceStrategies:(Ra={},Ra[qo.EmptyNextTrackWalkReplaceStrategy.KEY]=new qo.EmptyNextTrackWalkReplaceStrategy,Ra),sortStrategies:(Pa={},Pa[Un.RandomWalkSortStrategy.KEY]=new Un.RandomWalkSortStrategy({random:new wn.Random(n.randomSeed)}),Pa),random:new wn.Random(n.randomSeed)})),Ta.addSystem(qn.LockOnFailWalkInGridEdgeSystem.KEY,new qn.LockOnFailWalkInGridEdgeSystem({entityLockFactory:new Xn.EntityLockFactory({failWalkInGridEdgeLockCreator:new Zn.FailWalkInGridEdgeLockCreator}),world:ja})),Ta.addSystem(Ge.GoalSystem.KEY,new Ge.GoalSystem({world:ja,goalFactory:Da,statesForProcessing:[Et.RemoveSystem.STATE,ko.CoverEntitySystem.STATE]})),Ta.addSystem(Ln.ChangeGoalSystem.KEY,new Ln.ChangeGoalSystem({world:Ta.world,random:new wn.Random(n.randomSeed)})),Ta.addSystem(_t.PrepareGoalSystem.KEY,new _t.PrepareGoalSystem(ja,Da)),Ta.addSystem(Ae.ExplodeCollectorSystem.KEY,new Ae.ExplodeCollectorSystem(ja)),Ta.addSystem(un.UpdateMultiplierSystem.KEY,new un.UpdateMultiplierSystem(ja)),Ta.addSystem(he.ExplodeOnSwapSystem.KEY,new he.ExplodeOnSwapSystem(ja)),Ta.addSystem(Ot.ResetSystem.KEY,new Ot.ResetSystem(ja,[new At.ResetDefaultStrategy(ja,[q.CombinationSystem.STATE,ve.ExplodeSystem.STATE],R.GroupComponent.KEY),new At.ResetDefaultStrategy(ja,[q.CombinationSystem.STATE,ve.ExplodeSystem.STATE],E.ExplodeComponent.KEY)])),Ta.addSystem(Oe.ExplodeOnCombinationSystem.KEY,new Oe.ExplodeOnCombinationSystem(ja)),Ta.addSystem(ve.ExplodeSystem.KEY,new ve.ExplodeSystem(ja,{retrieverFactory:Fa,neighborRetrieverFactoryKey:On.RetrieverFactoryKeys.NEIGHBOR_NO_FILTER,singleRetrieverFactoryKey:On.RetrieverFactoryKeys.SINGLE,handlers:[new Ce.ReduceHealthHandler(ja),new be.PostponeExplodeHandler(ja)],testers:[new Ee.DeathTester,new xe.ExplodeTester],affectNeighborStrategies:{group:new we.GroupAffectNeighborStrategy,currentGroup:new Se.CurrentGroupAffectNeighborStrategy}})),Ta.addSystem(ue.EntityDeathSystem.KEY,new ue.EntityDeathSystem(ja)),Ta.addSystem("SimpleShuffleSystem",new Mt.ShuffleSystem({world:ja,random:new wn.Random(n.randomSeed),gridChecker:new _a.SimpleGridReadyAfterLockChecker({turnSystem:Ta.getSystem(cn.TurnSystem.KEY),lockSystem:Ta.getSystem(at.LockSystem.KEY)}),strategy:new ba.SimpleComponentShuffleSystemStrategy({random:new wn.Random(n.randomSeed),componentKeys:[T.ShuffleComponent.KEY]})})),Ta.addSystem(ia.ShuffleOnDeathOnEndTurnSystem.KEY,new ia.ShuffleOnDeathOnEndTurnSystem({world:ja,skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE,uo.Booster.STATE_BOOSTER],shuffleSystem:Ta.getSystem("SimpleShuffleSystem")})),Ta.addSystem(bt.RecoveryHealthSystem.KEY,new bt.RecoveryHealthSystem({world:ja,strategies:[new Ct.OnDeathRecoveryHealthSystemStrategy,new wt.OnTurnCountAfterExplodeRecoveryHealthSystemStrategy,new St.OnEmitRecoveryHealthSystemStrategy(ja)]})),Ta.addSystem(Ve.HealthSystem.KEY,new Ve.HealthSystem(ja)),Ta.addSystem(Rt.ScoreSystem.KEY,new Rt.ScoreSystem(ja,[new Tt.ScoreSystemGoalGroupStrategy(n.score.group),new Pt.ScoreSystemEntityTypeStrategy(n.score.entityType),new kt.ScoreSystemGoalEntityTypeStrategy(n.score.goalEntityType),new It.ScoreSystemOnHealthReduceStrategy])),Ta.addSystem(Lt.StarSystem.KEY,new Lt.StarSystem(ja,n.starsCheckpoints)),Ta.addSystem(mt.MovesReducingSystem.KEY,new mt.MovesReducingSystem(ja,[new dt.MovesReducingByStateStrategy(ja,[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP],[zt.RevertSwapSystem.STATE]),new ut.MovesReducingByEntityCount(ja,["candy"]),new Lo.MovesReducingByExplodeEntityStrategy(ja)])),Ta.addSystem(bn.WinLoseSystem.KEY,new bn.WinLoseSystem(ja,[new hn.OutOfMovesStrategy({movesComponent:ja.getEnabledComponent("moves"),reason:t.LOSE_REASONS.OUT_OF_MOVES}),new _n.ZeroCounterStrategy({world:ja,entityTypes:On.Match3GameConfig.bombEntities,reason:t.LOSE_REASONS.BOMB_EXPLODE}),new gn.FailWalkLoseGameStrategy({world:ja,reason:t.LOSE_REASONS.PARROT_FAIL_WALK}),new vn.ShuffleFailLoseGameStrategy({world:ja,reason:t.LOSE_REASONS.SHUFFLE_FAIL})])),Ta.addSystem(Y.ChangeRetrieverOnSwapWithSystem.KEY,new Y.ChangeRetrieverOnSwapWithSystem(ja,n.entityRetrieverCombinations)),Ta.addSystem(Dt.StatisticSystem.KEY,new Dt.StatisticSystem(ja)),Ta.addSystem(Be.GameOverSystem.KEY,new Be.GameOverSystem(ja)),Ta.addSystem(J.CompletionSystem.KEY,new J.CompletionSystem(ja,{actions:[new An.AddComponentsLayersCompletionSystemAction({world:ja,componentFactory:Ia,entityTypes:["super-1","candy-blue","candy-yellow","candy-purple","candy-brown","candy-green","candy-orange","candy-pink","candy-violet","candy-white"],direction:An.AddComponentsLayersCompletionSystemAction.UP,componentsConfig:{explodeImmediate:{}}}),new Z.AddComponentsCompletionSystemAction({world:ja,componentFactory:Ia,entityTypes:["super-1","candy-blue","candy-yellow","candy-purple","candy-brown","candy-green","candy-orange","candy-pink","candy-violet","candy-white"],resetEntityTypes:["super-1"],componentsConfig:{explodeImmediate:{}}}),new X.EmitEntityCompletionSystemAction({world:ja,maxCountPerCycle:7,entityKey:["candy"],targetStrategy:"random"})],emptyStateKeys:[ve.ExplodeSystem.STATE]})),Ta.addSystem(fe.ExplodeImmediateSystem.KEY,new fe.ExplodeImmediateSystem(ja)),Ta.addSystem(kn.ExplodeCollectionSystem.KEY,new kn.ExplodeCollectionSystem({world:ja})),Ta.addSystem(ge.ExplodeOnTurnStateSystem.KEY,new ge.ExplodeOnTurnStateSystem({world:ja,turnState:On.TURN_STATES.FINISH,componentKey:x.ExplodeOnEndTurnComponent.KEY})),Ta.addSystem(Pe.GameEventSystem.KEY,new Pe.GameEventSystem(ja,{processStrategies:{fiveMoves:new Me.MovesCountGameEventStrategy(ja,5),autocombination:new ke.AutoCombinationGameEventStrategy(ja,5),booster:new Le.SpecificInputBoosterGameEventStrategy(ja,{boosters:["trowel","cat","plusone","cart"]}),swap:new De.SwapSpecificEntitiesGameEventStrategy(ja,["super-1"]),goalcomplete:new Ie.GoalCompleteGameEventStrategy(ja),swapattempts:new Fe.SwapAttemptsGameEventStrategy(ja,3),gamecompletion:new Te.GameCompletionGameEventStrategy(ja)},postProcessStrategies:{postprocess:new je.PostProcessGameEventStrategy},ignoreCompletionCheck:["gamecompletion"],emptyStateKeys:[bn.WinLoseSystem.STATE]})),Ta.addSystem(Ft.StartSystem.KEY,new Ft.StartSystem({world:ja,game:Ta})),Ta.addSystem(Ye.IdleAnimationSystem.KEY,new Ye.IdleAnimationSystem({world:ja,observableStates:[Xt.SwapSystem.STATE_SWAP,pt.MoveSystem.STATE_DROP,ve.ExplodeSystem.STATE,pt.MoveSystem.STATE,bt.RecoveryHealthSystem.STATE,Ve.HealthSystem.STATE,U.ChangeEntityGroupSystem.STATE,fn.WalkSystem.STATE,fn.WalkSystem.STATE_CHANGE_STAGE],random:new wn.Random(n.randomSeed),limitParallelIdles:300}));var Ha={strategies:{random:new pe.RandomComponentEmitTargetStrategy({random:new wn.Random(n.randomSeed),exceptedEntityComponents:[u.CanBeReplacedByEmitComponent]}),emitter:new ce.EmitterComponentEmitTargetStrategy,inGridEdge:new K.InGridEdgeEmitTargetStrategy({world:ja,random:new wn.Random(n.randomSeed),exceptedEntityComponents:[u.CanBeReplacedByEmitComponent]}),neighbor:new Fo.NeighborEmitTargetStrategy({exceptedEntityComponents:[u.CanBeReplacedByEmitComponent]}),candybox:new oa.CandyboxEmitTargetStrategy({random:new wn.Random(n.randomSeed),exceptedEntityComponents:[u.CanBeReplacedByEmitComponent],world:ja}),bombribbon:new Bo.BombRibbonsEmitTargetStrategy,cotton:new Zo.CottonEmitTargetStrategy({random:new wn.Random(n.randomSeed)}),onTrack:new Ho.OnTrackEmitTargetStrategy({world:ja,random:new wn.Random(n.randomSeed)}),randomByGroup:new wa.RandomByGroupEmitTargetStrategy({groupMap:On.GROUP_MAP,random:new wn.Random(n.randomSeed)})},emitStrategies:{random:new ie.RandomEntityEmitStrategy({entitySystem:Ba}),candybox:new na.CandyboxEmitStrategy({world:ja,entitySystem:Ba}),bombribbon:new Go.BombRibbonsEmitStrategy({entitySystem:Ba}),sequentially:new Sa.SequentiallyFromEntitiesEmitStrategy({entitySystem:Ba})}};return Ta.addSystem(Rn.EmitBeforeExplodeSystem.KEY,new Rn.EmitBeforeExplodeSystem(ja,Ba,{strategies:{group:new se.EmitterGroupIdEmitTargetStrategy({random:new wn.Random(n.randomSeed)})},emitStrategies:{random:new re.SameGroupFromSetEntityEmitStrategy({entitySystem:Ba})},producers:[new ne.OnEntityTriggerEmitProducer({observableComponent:w.EmitOnSwapBeforeExplodeComponent})]})),Ta.addSystem(le.EmitSystem.KEY,new le.EmitSystem(ja,Ba,Object.assign({},Ha,{producers:[new oe.AfterTutorialWorldEmitProducer({emitComponent:C.EmitOnGameStartComponent,gridComponent:O.GridComponent,tutorialComponent:Ta._world.getEnabledComponentByClass(j.TutorialComponent),skipStates:[ve.ExplodeSystem.STATE]}),new me.WorldEmitProducer({emitComponent:b.EmitOnGameCompletionComponent,gridComponent:O.GridComponent,skipStates:[ve.ExplodeSystem.STATE]}),new me.WorldEmitProducer({emitComponent:S.EmitOnTurnComponent,gridComponent:O.GridComponent,skipStates:[ve.ExplodeSystem.STATE]}),new me.WorldEmitProducer({emitComponent:Dn.EmitOnTurnEndComponent,gridComponent:O.GridComponent,skipStates:[ve.ExplodeSystem.STATE]}),new Do.OnEndCounterEmitProducer({gridComponent:Ta.world.getComponent("tiles")}),new ae.OnTurnEmitProducer({gridKeys:["tiles"],movesReducingSystem:Ta.getSystem(mt.MovesReducingSystem.KEY)}),new ee.OnEntityDeathEmitProducer({turnStatesForEmit:[On.TURN_STATES.FINISH,On.TURN_STATES.BOOSTER_FINISH],turnStateComponent:Ta._world.getEnabledComponentByClass(M.TurnStateComponent),observableComponent:g.EmitOnDeathComponent}),new te.OnEntityExplodeEmitProducer({observableComponent:_.EmitOnExplodeComponent}),new zn.OnTurnEndEmitByGroupNonExplodeProducer({world:ja,turnStates:[On.TURN_STATES.FINISH]}),new jn.OnTurnEndAndCounterEndEmitProducer({world:ja,skipOnStates:[pt.MoveSystem.STATE],turnStates:[On.TURN_STATES.FINISH]}),new Vo.OnTurnEndAndEmptyTrackEmitProducer({world:ja,turnStates:[On.TURN_STATES.FINISH,On.TURN_STATES.BOOSTER_FINISH],skipOnStates:[pt.MoveSystem.STATE]}),new ta.OnTurnEndAndExplodeEmitProducer({world:ja,skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE,uo.Booster.STATE_BOOSTER]})]}))),Ta.addSystem(Pn.EmitBeforeMoveSystem.KEY,new Pn.EmitBeforeMoveSystem(ja,Ba,Object.assign({},Ha,{producers:[new ee.OnEntityDeathEmitProducer({turnStatesForEmit:[On.TURN_STATES.FINISH,On.TURN_STATES.BOOSTER_FINISH],turnStateComponent:Ta._world.getEnabledComponentByClass(M.TurnStateComponent),observableComponent:h.EmitOnDeathBeforeMoveComponent}),new te.OnEntityExplodeEmitProducer({observableComponent:v.EmitOnExplodeBeforeMoveComponent})]}))),Ta.addSystem(Co.EmitBeforeWalkSystem.KEY,new Co.EmitBeforeWalkSystem(ja,Ba,Object.assign({},Ha,{producers:[new Mn.OnTurnEndAndDeathEmitProducer({world:ja,turnStates:[On.TURN_STATES.FINISH,On.TURN_STATES.BOOSTER_FINISH],skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,J.CompletionSystem.STATE,fn.WalkSystem.STATE,pt.MoveSystem.STATE]})]}))),Ta.addSystem(Bt.StrategicEmitSystem.KEY,new Bt.StrategicEmitSystem({world:ja,factory:new Cn.AbstractFactory({onTurnInterval:{class:Nt.OnTurnIntervalStrategicEmitStrategy,options:{world:ja,movesReducingSystem:Ta.getSystem(mt.MovesReducingSystem.KEY),skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,J.CompletionSystem.STATE,fn.WalkSystem.STATE,pt.MoveSystem.STATE]}},onSpecificTurn:{class:Gt.OnSpecificTurnStrategicEmitStrategy,options:{world:ja,movesReducingSystem:Ta.getSystem(mt.MovesReducingSystem.KEY),skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,J.CompletionSystem.STATE,fn.WalkSystem.STATE,pt.MoveSystem.STATE]}},onEmptyTrackByProbability:{class:No.OnEmptyTrackByProbabilityStrategy,options:{world:ja,probabilityFilter:new N.CompositeProbabilityFilter([new ea.EntityAsGoalProbabilityFilter({world:ja}),new W.GridEntityCountLimitProbabilityFilter({world:ja}),new Fn.EntityByGoalProbabilityFilter({world:ja,gridComponent:Ta.world.getComponent("tiles"),random:new wn.Random(n.randomSeed)})]),skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP,fn.WalkSystem.STATE,fn.WalkSystem.STATE_CHANGE_STAGE,le.EmitSystem.STATE_EMIT,ve.ExplodeSystem.STATE]}}})})),Ta.addSystem(xn.TurnCountAfterExplodeSystem.KEY,new xn.TurnCountAfterExplodeSystem({world:ja,increasingTurnStates:[On.TURN_STATES.FINISH]})),Ta.addSystem(Wn.DistanceToGridEdgeSystem.KEY,new Wn.DistanceToGridEdgeSystem({world:ja,observableComponent:Hn.DistanceToGridEdgeComponent})),Ta.addSystem(Jn.RemoveOnWalkSystem.KEY,new Jn.RemoveOnWalkSystem({world:ja,handlers:[new Qn.RemoveNeighborsOnWalkSystemHandler]})),Ta.addSystem(ao.EmitAfterEmitSystem.KEY,new ao.EmitAfterEmitSystem(ja,Ba,Object.assign({},Ha,{producers:[new ro.OnEntityEmitAfterEmitProducer({observableComponent:io.EmitAfterEmitComponent})]}))),Ta.addSystem($n.LockOnExplodeSystem.KEY,new $n.LockOnExplodeSystem({world:ja,entityLockFactory:new Xn.EntityLockFactory({onExplode:new eo.LockExplodeForTurnCountEntityLockCreator})})),Ta.addSystem(to.UnlockAfterExplodeSystem.KEY,new to.UnlockAfterExplodeSystem({world:ja})),Ta.addSystem(so.ReplaceEntityOnTurnEndSystem.KEY,new so.ReplaceEntityOnTurnEndSystem({world:ja,strategyFactory:new Cn.AbstractFactory({entityGroup:{class:po.EntityGroupReplaceEntitySystemStrategy,options:{world:ja,random:new wn.Random(n.randomSeed),entityFactory:Ma,replaceComponents:[lo.HealthComponent,f.CounterComponent]}}}),startOnStates:[Xt.SwapSystem.STATE_SWAP],skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP,fn.WalkSystem.STATE_CHANGE_STAGE,fn.WalkSystem.STATE,le.EmitSystem.STATE_EMIT,ve.ExplodeSystem.STATE]})),Ta.addSystem(xo.StartBoosterSystem.KEY,new xo.StartBoosterSystem({world:ja,tutorialComponent:Ta._world.getEnabledComponentByClass(j.TutorialComponent),skipStates:[ve.ExplodeSystem.STATE],strategyFactory:new Cn.AbstractFactory({superTile:{class:Eo.EmitStartBoosterStrategy,options:{entityType:"super-1",emitCount:1,isRandomFromLevelColors:!1,groupColors:On.GROUP_MAP,targetEmitStrategy:"randomByGroup",emitStrategy:"sequentially"}},candybomb:{class:Eo.EmitStartBoosterStrategy,options:{entityType:"candy",emitCount:2,isRandomFromLevelColors:!0,random:new wn.Random(n.randomSeed),groupColors:On.GROUP_MAP,targetEmitStrategy:"randomByGroup",emitStrategy:"sequentially"}},addmoves:{class:So.MovesCounterStartBoosterStrategy,options:{movesCount:3}}})})),Ta.addSystem(mo.ExplodeImmediateOnceAfterChangeGroupSystem.KEY,new mo.ExplodeImmediateOnceAfterChangeGroupSystem({world:ja})),Ta.addSystem(st.ModifyEntityOnChangeGroupSystem.KEY,new st.ModifyEntityOnChangeGroupSystem({world:ja,componentFactory:Ia})),Ta.addSystem(_e.ExplodeOnCounterEndSystem.KEY,new _e.ExplodeOnCounterEndSystem({world:ja})),Ta.addSystem(Ko.LockOnWalkFinishSystem.KEY,new Ko.LockOnWalkFinishSystem({entityLockFactory:new Xn.EntityLockFactory({failWalkInGridEdgeLockCreator:new Zn.FailWalkInGridEdgeLockCreator}),world:ja})),Ta.addSystem(zo.ExplodeWalkReplaceSystem.KEY,new zo.ExplodeWalkReplaceSystem({world:ja})),Ta.addSystem(Jo.ExplodeNextOnTrackOnExplodeSystem.KEY,new Jo.ExplodeNextOnTrackOnExplodeSystem({world:ja})),Ta.addSystem($o.ExplodeBeforeEmitOnEmptyTrackSystem.KEY,new $o.ExplodeBeforeEmitOnEmptyTrackSystem({world:ja})),Ta.addSystem(aa.ExplodeDeathEntitySystem.KEY,new aa.ExplodeDeathEntitySystem({world:ja,skipOnStates:[ve.ExplodeSystem.STATE,Xt.SwapSystem.STATE_SWAP,ze.InputSystem.STATE,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE]})),Ta.addSystem(ra.DestroyAfterEmitSystem.KEY,new ra.DestroyAfterEmitSystem({world:ja})),Ta.addSystem(Ea.ToggleLockOnTurnEndSystem.KEY,new Ea.ToggleLockOnTurnEndSystem({entityLockFactory:new Xn.EntityLockFactory({onTurnEnd:new xa.TurnEndLockCreator}),world:ja,skipOnStates:[ze.InputSystem.STATE,Xt.SwapSystem.STATE_SWAP,le.EmitSystem.STATE_EMIT,pt.MoveSystem.STATE,pt.MoveSystem.STATE_DROP,fn.WalkSystem.STATE,ve.ExplodeSystem.STATE,U.ChangeEntityGroupSystem.STATE],turnStates:[On.TURN_STATES.FINISH,On.TURN_STATES.END]})),Ta.addSystem(vt.SyncPipelineSystem.KEY,new vt.SyncPipelineSystem({world:ja,pipeline:i([ct.ModifyEntityOnDeathSystem.KEY,Ne.GroundSystem.KEY,Xt.SwapSystem.KEY,Y.ChangeRetrieverOnSwapWithSystem.KEY,Rn.EmitBeforeExplodeSystem.KEY,_t.PrepareGoalSystem.KEY,q.CombinationSystem.KEY,he.ExplodeOnSwapSystem.KEY,fe.ExplodeImmediateSystem.KEY,Ae.ExplodeCollectorSystem.KEY,ve.ExplodeSystem.KEY,Jo.ExplodeNextOnTrackOnExplodeSystem.KEY,$o.ExplodeBeforeEmitOnEmptyTrackSystem.KEY,Jt.TurnStateSystem.KEY,Rt.ScoreSystem.KEY,Lt.StarSystem.KEY,yt.MultiplierSystem.KEY,Et.RemoveSystem.KEY,Yo.OnExplodeNextOnTrackWalkSystem.KEY,at.LockSystem.KEY,rt.UnlockOnExplodeSystem.KEY,$n.LockOnExplodeSystem.KEY,Vt.SuperEntitySystem.KEY,ko.CoverEntitySystem.KEY,Q.CounterSystem.KEY,ue.EntityDeathSystem.KEY,Pn.EmitBeforeMoveSystem.KEY,_t.PrepareGoalSystem.KEY,Ge.GoalSystem.KEY,Oo.ChangeEntityGroupOnCombinationNeighborSystem.KEY,st.ModifyEntityOnChangeGroupSystem.KEY,pt.MoveSystem.KEY,Co.EmitBeforeWalkSystem.KEY,_t.PrepareGoalSystem.KEY],[0,1,2,3].map(function(e){return va.OnTurnEndWalkSystem.KEY+":"+e}),[Jn.RemoveOnWalkSystem.KEY,qn.LockOnFailWalkInGridEdgeSystem.KEY,it.UnlockOnWalkSystem.KEY,at.LockSystem.KEY,Ko.LockOnWalkFinishSystem.KEY,kn.ExplodeCollectionSystem.KEY,J.CompletionSystem.KEY,mn.TutorialSystem.KEY,xn.TurnCountAfterExplodeSystem.KEY,to.UnlockAfterExplodeSystem.KEY,xo.StartBoosterSystem.KEY,Bt.StrategicEmitSystem.KEY,bt.RecoveryHealthSystem.KEY,Ve.HealthSystem.KEY,le.EmitSystem.KEY,_t.PrepareGoalSystem.KEY,at.LockSystem.KEY,ao.EmitAfterEmitSystem.KEY,Ln.ChangeGoalSystem.KEY,zo.ExplodeWalkReplaceSystem.KEY,ge.ExplodeOnTurnStateSystem.KEY,un.UpdateMultiplierSystem.KEY,Ht.PostSuperEntitySystem.KEY,so.ReplaceEntityOnTurnEndSystem.KEY,un.UpdateMultiplierSystem.KEY,_t.PrepareGoalSystem.KEY,cn.TurnSystem.KEY,ia.ShuffleOnDeathOnEndTurnSystem.KEY,Mt.ShuffleSystem.KEY,Ot.ResetSystem.KEY,zt.RevertSwapSystem.KEY,Zt.SwapAttemptsSystem.KEY,mt.MovesReducingSystem.KEY,Ro.ChangeEntityGroupOnCounterValueChangeSystem.KEY,Po.ChangeEntityGroupOnHealthReduceSystem.KEY,mo.ExplodeImmediateOnceAfterChangeGroupSystem.KEY,Wn.DistanceToGridEdgeSystem.KEY,Ea.ToggleLockOnTurnEndSystem.KEY,bn.WinLoseSystem.KEY,xt.RenderSystem.KEY,Dt.StatisticSystem.KEY,Be.GameOverSystem.KEY,Pe.GameEventSystem.KEY,Ye.IdleAnimationSystem.KEY,Ke.HelpSystem.KEY,_e.ExplodeOnCounterEndSystem.KEY,aa.ExplodeDeathEntitySystem.KEY,ra.DestroyAfterEmitSystem.KEY,Re.GameActionSystem.KEY,ha.EntityDropSystem.KEY,z.CleanStateSystem.KEY]).map(function(e){return Ta.getSystem(e)})})),Ta}return a(t,e),Object.defineProperty(t.prototype,"world",{get:function(){return this._world},enumerable:!1,configurable:!0}),t.prototype.load=function(e){this.getSystem(Ft.StartSystem.KEY).load(e)},t.prototype.start=function(){return this.getSystem(Ft.StartSystem.KEY).start(),Promise.resolve()},t.prototype.setTutorialEnable=function(e){this.getSystem(mn.TutorialSystem.KEY).setTutorialEnable(e)},t.prototype.input=function(e,t){void 0===t&&(t=!1);var n=this.getSystem(ze.InputSystem.KEY).process(e,t);return n&&this.getSystem(vt.SyncPipelineSystem.KEY).process(),n},t.prototype.initGameActionSystem=function(e){this.getSystem(Re.GameActionSystem.KEY).setPipeline(e)},t.prototype.win=function(){this.world.setState(bn.WinLoseSystem.STATE,{result:bn.WinLoseSystem.RESULT.WIN}),this.getSystem(vt.SyncPipelineSystem.KEY).process()},t.prototype.getScore=function(){var e=this.world.getEnabledComponent("score");return e?e.getValue():0},t.prototype.getStars=function(){var e=this.world.getEnabledComponent("stars");return e?e.getValue():0},t.prototype.getGoals=function(){return this._world.getComponent("goals").goals},t.prototype.getMoves=function(){return this._world.getComponent("moves").getValue()},t.prototype.setMoves=function(e){this.getSystem(mt.MovesReducingSystem.KEY).setMoves(Number(e))},t.prototype.runPipeline=function(){this.getSystem(vt.SyncPipelineSystem.KEY).process()},t.LOSE_REASONS={OUT_OF_MOVES:"outOfMoves",BOMB_EXPLODE:"bombExplode",PARROT_FAIL_WALK:"parrotFailWalk",SHUFFLE_FAIL:"shuffleFail"},t}(L.Engine);n.Match3Game=Oa,cc._RF.pop()},{"./AbstractFactory (@tapclap.utils-js.abstract-factory)":"AbstractFactory (@tapclap.utils-js.abstract-factory)","./AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":"AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","./AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)":"AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)","./AddMultiplierMinValueEffect (scripts.common.match3-game.effects)":"AddMultiplierMinValueEffect (scripts.common.match3-game.effects)","./AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./AnimationComponentCreator (@tapclap.match-x.engine.components.render)":"AnimationComponentCreator (@tapclap.match-x.engine.components.render)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","./BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)":"BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)","./BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":"BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)","./BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./BoosterFactory (@tapclap.match-x.engine.boosters)":"BoosterFactory (@tapclap.match-x.engine.boosters)","./BoosterInputHandler (@tapclap.match-x.engine.boosters)":"BoosterInputHandler (@tapclap.match-x.engine.boosters)","./BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","./CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)","./CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)":"CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)","./CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":"CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","./ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)":"ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)","./ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)":"ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)","./CleanStateSystem (@tapclap.match-x.engine.systems)":"CleanStateSystem (@tapclap.match-x.engine.systems)","./CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)":"CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)","./CombinationComponent (@tapclap.match-x.engine.components)":"CombinationComponent (@tapclap.match-x.engine.components)","./CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","./CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)":"CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)","./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./CompletionSystem (@tapclap.match-x.engine.systems.completion-system)":"CompletionSystem (@tapclap.match-x.engine.systems.completion-system)","./ComponentFactory (@tapclap.match-x.engine.components)":"ComponentFactory (@tapclap.match-x.engine.components)","./ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)":"ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)","./ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)":"ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)","./ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)":"ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)","./CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":"CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","./CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":"CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","./CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)":"CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)","./CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)":"CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)","./CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":"CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./CounterSystem (@tapclap.match-x.engine.systems.counter-system)":"CounterSystem (@tapclap.match-x.engine.systems.counter-system)","./CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)","./CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)":"CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)","./DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":"DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","./DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)":"DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)","./DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)":"DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)","./DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":"DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","./DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)":"DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)","./EmitAfterEmitComponent (@tapclap.match-x.engine.components)":"EmitAfterEmitComponent (@tapclap.match-x.engine.components)","./EmitAfterEmitSystem (scripts.common.match3-game.systems)":"EmitAfterEmitSystem (scripts.common.match3-game.systems)","./EmitBeforeExplodeSystem (scripts.common.match3-game.systems)":"EmitBeforeExplodeSystem (scripts.common.match3-game.systems)","./EmitBeforeMoveSystem (scripts.common.match3-game.systems)":"EmitBeforeMoveSystem (scripts.common.match3-game.systems)","./EmitBeforeWalkSystem (scripts.common.match3-game.systems)":"EmitBeforeWalkSystem (scripts.common.match3-game.systems)","./EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)":"EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)","./EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)":"EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","./EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)":"EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)","./EmitOnDeathComponent (@tapclap.match-x.engine.components)":"EmitOnDeathComponent (@tapclap.match-x.engine.components)","./EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)","./EmitOnExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)":"EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)","./EmitOnGameStartComponent (@tapclap.match-x.engine.components)":"EmitOnGameStartComponent (@tapclap.match-x.engine.components)","./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)","./EmitOnTurnComponent (@tapclap.match-x.engine.components)":"EmitOnTurnComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndComponent (@tapclap.match-x.engine.components)","./EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)":"EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)":"EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)","./EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":"EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","./EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./Engine (@tapclap.match-x.engine)":"Engine (@tapclap.match-x.engine)","./EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":"EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","./EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":"EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)":"EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)","./EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)":"EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)","./EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)":"EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)","./EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)":"EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)","./EntityFactory (@tapclap.match-x.engine.entities)":"EntityFactory (@tapclap.match-x.engine.entities)","./EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)":"EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)","./EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)":"EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)","./EntitySystem (@tapclap.match-x.engine.systems.entity-system)":"EntitySystem (@tapclap.match-x.engine.systems.entity-system)","./EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":"EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","./ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)":"ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)","./ExplodeCollectionSystem (@tapclap.match-x.engine.systems)":"ExplodeCollectionSystem (@tapclap.match-x.engine.systems)","./ExplodeCollectorSystem (@tapclap.match-x.engine.systems)":"ExplodeCollectorSystem (@tapclap.match-x.engine.systems)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)":"ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)","./ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)":"ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)","./ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)":"ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)","./ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)":"ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)","./ExplodeOnSwapComponent (@tapclap.match-x.engine.components)":"ExplodeOnSwapComponent (@tapclap.match-x.engine.components)","./ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)":"ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)","./ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)","./FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":"FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","./FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","./GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)":"GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)","./GameOverSystem (@tapclap.match-x.engine.systems)":"GameOverSystem (@tapclap.match-x.engine.systems)","./GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./GoalDataLoader (@tapclap.match-x.engine.systems.load-system)":"GoalDataLoader (@tapclap.match-x.engine.systems.load-system)","./GoalFactory (@tapclap.match-x.engine.goals)":"GoalFactory (@tapclap.match-x.engine.goals)","./GoalSystem (@tapclap.match-x.engine.systems)":"GoalSystem (@tapclap.match-x.engine.systems)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GridDataLoader (@tapclap.match-x.engine.systems.load-system)":"GridDataLoader (@tapclap.match-x.engine.systems.load-system)","./GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":"GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","./GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)":"GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)","./GroundSystem (@tapclap.match-x.engine.systems.ground-system)":"GroundSystem (@tapclap.match-x.engine.systems.ground-system)","./GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)":"GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)":"HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./HealthSystem (@tapclap.match-x.engine.systems.health-system)":"HealthSystem (@tapclap.match-x.engine.systems.health-system)","./HelpSystem (@tapclap.match-x.engine.systems.help-system)":"HelpSystem (@tapclap.match-x.engine.systems.help-system)","./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)":"IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)","./InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)":"IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)","./InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":"InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","./InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)":"InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","./InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)":"InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","./InputSystem (@tapclap.match-x.engine.systems.input-system)":"InputSystem (@tapclap.match-x.engine.systems.input-system)","./LoadSystem (@tapclap.match-x.engine.systems.load-system)":"LoadSystem (@tapclap.match-x.engine.systems.load-system)","./LockAnimationResolver (scripts.common.match3-game.animation-resolvers)":"LockAnimationResolver (scripts.common.match3-game.animation-resolvers)","./LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":"LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","./LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":"LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","./LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)":"LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)","./LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)":"LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)":"ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)","./ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)":"ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)","./ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)":"ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)","./ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)":"ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)","./MoveSystem (@tapclap.match-x.engine.systems.move-system)":"MoveSystem (@tapclap.match-x.engine.systems.move-system)","./MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)":"MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)","./MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","./MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","./MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)":"MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":"OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","./OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":"OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","./OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)":"OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)","./OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)":"OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)","./OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)":"OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)","./OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)":"OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)","./OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)":"OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)","./OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":"OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","./OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./OnTurnEndWalkSystem (scripts.common.match3-game.systems)":"OnTurnEndWalkSystem (scripts.common.match3-game.systems)","./OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)":"OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)","./OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)":"OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)","./OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","./OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)":"OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)","./PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":"PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)","./PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)":"PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)","./PrepareGoalSystem (@tapclap.match-x.engine.systems)":"PrepareGoalSystem (@tapclap.match-x.engine.systems)","./RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":"RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","./RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":"RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","./RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":"RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","./RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":"RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","./RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":"RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","./RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)":"RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)","./RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":"RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)","./RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","./RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)","./ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)":"ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)","./ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)":"ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)","./RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)":"RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)","./RemoveEntityEffect (@tapclap.match-x.engine.effects)":"RemoveEntityEffect (@tapclap.match-x.engine.effects)","./RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)":"RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)","./RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)":"RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)","./RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)":"RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)","./RemoveSystem (@tapclap.match-x.engine.systems)":"RemoveSystem (@tapclap.match-x.engine.systems)","./RenderSystem (@tapclap.match-x.engine.systems.render-system)":"RenderSystem (@tapclap.match-x.engine.systems.render-system)","./ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)":"ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)","./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)":"ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)","./ResetSystem (@tapclap.match-x.engine.systems.reset-system)":"ResetSystem (@tapclap.match-x.engine.systems.reset-system)","./RetrieverFactory (@tapclap.match-x.engine.retrievers)":"RetrieverFactory (@tapclap.match-x.engine.retrievers)","./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)":"RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)","./SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":"SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","./ScoreSystem (@tapclap.match-x.engine.systems.score-system)":"ScoreSystem (@tapclap.match-x.engine.systems.score-system)","./ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)","./ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)","./ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)","./ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)","./SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":"SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","./ShuffleComponent (@tapclap.match-x.engine.components)":"ShuffleComponent (@tapclap.match-x.engine.components)","./ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","./ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)","./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)","./SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)":"SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)","./SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)":"SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)","./SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)":"SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)","./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","./StarSystem (@tapclap.match-x.engine.systems)":"StarSystem (@tapclap.match-x.engine.systems)","./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)","./StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)":"StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)","./StartSystem (@tapclap.match-x.engine.systems.start-system)":"StartSystem (@tapclap.match-x.engine.systems.start-system)","./StatisticSystem (@tapclap.match-x.engine.systems)":"StatisticSystem (@tapclap.match-x.engine.systems)","./StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)":"StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)","./SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)":"SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)","./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":"SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)","./SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapComponent (@tapclap.match-x.engine.components)":"SwapComponent (@tapclap.match-x.engine.components)","./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./SwapInputHandler (@tapclap.match-x.engine.systems.input-system)":"SwapInputHandler (@tapclap.match-x.engine.systems.input-system)","./SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)":"SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)","./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./SyncPipelineSystem (scripts.common.match3-game.systems)":"SyncPipelineSystem (scripts.common.match3-game.systems)","./TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)":"TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)","./ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)":"ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)","./ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)":"ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)","./ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)":"ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)","./TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":"TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","./TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)":"TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)","./TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":"TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","./TurnSelector (@tapclap.match-x.engine.systems.turn-system)":"TurnSelector (@tapclap.match-x.engine.systems.turn-system)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)","./TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)":"TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)","./TurnSystem (@tapclap.match-x.engine.systems.turn-system)":"TurnSystem (@tapclap.match-x.engine.systems.turn-system)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)","./TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)":"TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)","./TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)":"TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)","./TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)":"TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)","./TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)":"TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)","./TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)":"TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)","./UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":"UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","./UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":"UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","./UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)":"UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)","./UpdateMultiplierSystem (@tapclap.match-x.engine.systems)":"UpdateMultiplierSystem (@tapclap.match-x.engine.systems)","./ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)":"ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)","./ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)":"ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":"WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)","./WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)":"WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)","./WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)":"WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)","./WorldGroupsComponent (@tapclap.match-x.engine.components)":"WorldGroupsComponent (@tapclap.match-x.engine.components)","./WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)":"WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)","./ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"}],"Match3GameComponent (scripts.scenes.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"6f77b2OiBxDB6EC8zveG3vx","Match3GameComponent (scripts.scenes.match3-game)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.Match3GameComponent=void 0;var p=e("./BundleLoadTask (@tapclap.game-kit.loader)"),l=e("./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),m=e("./SceneComponent (@tapclap.game-kit.scene-manager)"),u=e("./UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)"),d=e("./FireworkComponent (@tapclap.game-kit.ui.animations)"),y=e("./ArrowComponent (@tapclap.game-kit.ui.arrow)"),f=e("./HeroBalloonComponent (@tapclap.game-kit.ui.hero)"),h=e("./HeroComponent (@tapclap.game-kit.ui.hero)"),g=e("./ThemeControllerComponent (@tapclap.game-kit.ui.themes)"),v=e("./TransitionComponent (@tapclap.game-kit.ui.transition)"),_=e("./UserItemManager (@tapclap.game-kit.user-item-manager)"),b=e("./BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),C=e("./DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),w=e("./EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),S=e("./EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),E=e("./EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)"),x=e("./FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)"),A=e("./ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),O=e("./FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)"),R=e("./FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),P=e("./GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),k=e("./GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),T=e("./GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),I=e("./HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),M=e("./HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),j=e("./HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),L=e("./InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),F=e("./CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),D=e("./RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),B=e("./ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),G=e("./SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),N=e("./StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),W=e("./StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),H=e("./SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),V=e("./TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),K=e("./CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)"),U=e("./StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)"),Y=e("./WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),z=e("./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),q=e("./GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)"),Z=e("./HelpAnimationFactory (@tapclap.match-x.cocos.animations)"),X=e("./BoostersViewComponent (@tapclap.match-x.cocos.components)"),J=e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),Q=e("./GridViewComponent (@tapclap.match-x.cocos.components.grid)"),$=e("./MovesCounterViewComponent (@tapclap.match-x.cocos.components)"),ee=e("./MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)"),te=e("./SelectionViewComponent (@tapclap.match-x.cocos.components)"),ne=e("./DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),oe=e("./BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)"),ae=e("./PrefabFactory (@tapclap.match-x.cocos.prefab-factory)"),re=e("./CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),ie=e("./CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),ce=e("./CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),se=e("./GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),pe=e("./GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)"),le=e("./EntityRenderer (@tapclap.match-x.cocos.renderers)"),me=e("./GoalsBarRenderer (@tapclap.match-x.cocos.renderers)"),ue=e("./GridEntityRenderer (@tapclap.match-x.cocos.renderers)"),de=e("./GridRenderer (@tapclap.match-x.cocos.renderers)"),ye=e("./MovesCounterRenderer (@tapclap.match-x.cocos.renderers)"),fe=e("./WorldRenderer (@tapclap.match-x.cocos.renderers)"),he=e("./Booster (@tapclap.match-x.engine.boosters)"),ge=e("./CounterComponent (@tapclap.match-x.engine.components)"),ve=e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),_e=e("./ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"),be=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),Ce=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),we=e("./GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),Se=e("./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)"),Ee=e("./GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)"),xe=e("./HealthSystem (@tapclap.match-x.engine.systems.health-system)"),Ae=e("./HelpSystem (@tapclap.match-x.engine.systems.help-system)"),Oe=e("./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)"),Re=e("./Input (@tapclap.match-x.engine.systems.input-system)"),Pe=e("./InputSystem (@tapclap.match-x.engine.systems.input-system)"),ke=e("./LoadSystem (@tapclap.match-x.engine.systems.load-system)"),Te=e("./MoveSystem (@tapclap.match-x.engine.systems.move-system)"),Ie=e("./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)"),Me=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)"),je=e("./RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)"),Le=e("./RemoveSystem (@tapclap.match-x.engine.systems)"),Fe=e("./ScoreSystem (@tapclap.match-x.engine.systems.score-system)"),De=e("./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"),Be=e("./StartSystem (@tapclap.match-x.engine.systems.start-system)"),Ge=e("./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"),Ne=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),We=e("./TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)"),He=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)"),Ve=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),Ke=e("./EventListener (@tapclap.utils-js.events)"),Ue=e("./Match3Game (scripts.common.match3-game)"),Ye=e("./Match3GameConfig (scripts.common.match3-game)"),ze=e("./EmitBeforeExplodeSystem (scripts.common.match3-game.systems)"),qe=e("./ActionConstants (scripts.config)"),Ze=e("./EntitySkinConfig (scripts.config)"),Xe=e("./AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Je=e("./AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Qe=e("./BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),$e=e("./CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),et=e("./CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),tt=e("./ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),nt=e("./DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),ot=e("./GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)"),at=e("./HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),rt=e("./HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),it=e("./MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),ct=e("./MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),st=e("./SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),pt=e("./SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),lt=e("./ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),mt=e("./BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)"),ut=e("./FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)"),dt=e("./HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)"),yt=e("./AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),ft=e("./ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),ht=e("./ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)"),gt=e("./ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),vt=e("./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)"),_t=e("./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),bt=e("./ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Ct=e("./ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)"),wt=e("./ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)"),St=e("./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)"),Et=e("./FailWalkComponent (@tapclap.match-x.engine.components)"),xt=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),At=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),Ot=e("./DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Rt=e("./RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)"),Pt=e("./RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)"),kt=e("./RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Tt=e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)"),It=e("./LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Mt=e("./UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),jt=e("./UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Lt=e("./ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Ft=e("./ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)"),Dt=e("./EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)"),Bt=e("./ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Gt=e("./ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Nt=e("./FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Wt=e("./PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Ht=e("./DebugLevelNumber (scripts.scenes)"),Vt=e("./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)"),Kt=e("./StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)"),Ut=e("./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"),Yt=e("./ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),zt=e("./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),qt=e("./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),Zt=e("./ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),Xt=e("./CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)"),Jt=e("./GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Qt=e("./GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),$t=e("./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),en=e("./BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),tn=e("./CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),nn=e("./ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),on=e("./SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),an=e("./KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)"),rn=e("./MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),cn=e("./BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),sn=e("./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)"),pn=e("./EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)"),ln=e("./GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)"),mn=e("./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)"),un=e("./ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),dn=e("./ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)"),yn=e("./PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),fn=e("./ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)"),hn=e("./Inject (@tapclap.utils-js.inject)"),gn=e("./PrefabThemeComponent (@tapclap.game-kit.ui.themes)"),vn=e("./ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),_n=e("./ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)"),bn=e("./ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),Cn=cc._decorator,wn=Cn.ccclass,Sn=Cn.property,En=Cn.mixins,xn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiles=null,t.selection=null,t._shuffle=null,t._arrow=null,t._firework=null,t._tapToSkip=null,t._squirrel=null,t._inputLockNodes=[],t._startAnimator=null,t._animationHolders=[],t._themeController=null,t._level=null,t._selectedBoosterKey=null,t._completionFinished=!1,t._match3Game=null,t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"selectedBoosterKey",{get:function(){return this._selectedBoosterKey},enumerable:!1,configurable:!0}),t.prototype.exit=function(){return this._actionManager.run(qe.ACTIONS.WINDOW_MENU,{control:{key:"exit",event:"exit",caller:"quit",options:{level:this._level}},showSkins:!0})},t.prototype._getProgress=function(){var e=this._metaGameManager.getCurrentMetaGame().getModule("progress");return e?e.value:0},t.prototype._isTutorialAvailable=function(e){var t,n,o=e.data.tutorial,a=this._userManager.getCurrentUser();if(o&&o.steps&&o.steps.length>0)try{for(var r=c(o.steps),i=r.next();!i.done;i=r.next()){var s=i.value;if("booster"===s.type){var p=a.items.get("booster",s.data.booster);if(!p||0===p.amount)return!1}}}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this._getProgress()<=e.number||0===e.number},t.prototype._createMatch3=function(e,t){var n=this;if(cc.director.getScene().getComponentInChildren(Ht.DebugLevelNumber).node.active=!1,this._configService.getValue("debug")){var o=cc.director.getScene().getComponentInChildren(Ht.DebugLevelNumber);o&&(o.node.active=!0,o.setLevel(e.number+" ["+Math.ceil(e.number/20)+" / "+e.number%20+"]"))}return Promise.resolve().then(function(){var o,a,r=n._prefabFactory=new ae.PrefabFactory(t),i=((o={cell:new re.CellRenderDecorator,counter:new ce.CounterRenderDecorator})[dt.HealthRenderDecorator.KEY]=new dt.HealthRenderDecorator,o.goalAmount=new se.GoalAmountRenderDecorator,o.group=new pe.GroupEntityRenderDecorator,o.collector=new ie.CollectorRenderDecorator(r),o[ht.ColorFlowerEntityRenderDecorator.KEY]=new ht.ColorFlowerEntityRenderDecorator({groupMap:Ye.COLORS}),o[wt.ChameleonEntityRenderDecorator.KEY]=new wt.ChameleonEntityRenderDecorator,o[an.KitchenTimerEntityRenderDecorator.KEY]=new an.KitchenTimerEntityRenderDecorator,o),c=new le.EntityRenderer({prefabFactory:n._prefabFactory,entityDecorators:i}),s=new le.EntityRenderer({prefabFactory:n._prefabFactory,entityDecorators:i,nodeActivity:!1});n._forceEntityRenderer=new le.EntityRenderer({prefabFactory:n._prefabFactory,entityDecorators:i,forceRender:!0});var p=Object.assign({renderPipeline:(a={load:new fe.WorldRenderer(n.node),"load.tiles":new de.GridRenderer(n.tiles,c),"load.goals":new me.GoalsBarRenderer({goalsView:n.goalsView,prefabFactory:r})},a[ke.LoadSystem.KEY+".moves"]=new ye.MovesCounterRenderer(n.movesCounterView),a[Te.MoveSystem.STATE_DROP]=new ue.GridEntityRenderer(n.tiles,s),a[Ge.SuperEntitySystem.STATE]=new ue.GridEntityRenderer(n.tiles,s),a[be.EmitSystem.STATE_EMIT]=new ue.GridEntityRenderer(n.tiles,s,"newEntity"),a[ze.EmitBeforeExplodeSystem.STATE_EMIT]=new ue.GridEntityRenderer(n.tiles,s,"newEntity"),a[Ft.ReplaceEntitySystem.STATE]=new ue.GridEntityRenderer(n.tiles,s),a[Xt.CoverEntitySystem.STATE]=new ue.GridEntityRenderer(n.tiles,s),a)},Ye.Match3GameConfig);n._match3Game=new Ue.Match3Game(p),n._configureGameActionPipeline(),n.tiles.node.on("input",n._onInputTile.bind(n)),n._match3Game.setTutorialEnable(n._isTutorialAvailable(e));var l=Object.assign({},e.data);return n._bindUserItemsToGame(),n._listenStartBoosters(),n._match3Game.load({levelData:l})})},t.prototype._bindUserItemsToGame=function(){var e=this,t=this._getUserItemManager(),n=this._match3Game,o=function(o){n.setMoves(o.amount),t.delete(o.spec,o.name),e._logEvent({buy_moves:1})};this.listenTo(t,"add:match3:moves",o),this.listenTo(t,"change:match3:moves",o),o=function(o){var a=n.world.getComponent("tiles").grid,r=o.amount,i=[];if(r>0){for(var c=0;c<a.rows;c++)for(var s=0;s<a.cols;s++){var p=a.getCell(c,s);p&&p.entities.forEach(function(e){if(Ye.Match3GameConfig.bombEntities.includes(e.type)){var t=e.getEnabledComponent(ge.CounterComponent.KEY);if(t){i.push(e);var n=t.getValue()+r;n>t.getMaxValue()&&t.setMaxValue(n),t.setValue(n)}}})}i.length>0&&n.world.setState(_e.ReduceCounterOnTurnStrategy.STATE,i)}t.delete(o.spec,o.name),e._logEvent({buy_bombs:1})},this.listenTo(t,"add:match3:bombMoves",o),this.listenTo(t,"change:match3:bombMoves",o),o=function(){for(var e,t,o=n.world.getComponent("tiles").grid,a=[],r=!1,i=0;i<o.rows;i++)for(var c=0;c<o.cols;c++){var s=o.getCell(i,c);if(s){var p=s.getEntity();if(p&&Ye.Match3GameConfig.parrotEntities.includes(p.type)&&p.getComponentByClass(Et.FailWalkComponent)){var l=null===(e=p.getEnabledComponentByClass(xt.WalkDirectionComponent))||void 0===e?void 0:e.direction;(null===(t=p.getEnabledComponentByClass(At.DistanceToGridEdgeComponent))||void 0===t?void 0:t.getDistance(l))||(r?p.removeComponentByClass(Et.FailWalkComponent):(a.push({cell:s,entity:p}),r=!0))}}}a.length>0&&n.world.pushState(Ce.ExplodeSystem.DO_STATE_KEY,a)},this.listenTo(t,"add:match3:parrotFailWalk",o),this.listenTo(t,"change:match3:parrotFailWalk",o)},t.prototype._getUserItemManager=function(){return this._userManager.getCurrentUser().items},t.prototype._configureGameActionPipeline=function(){var e,t,n,o,a,r,i,c=this,p=function(e){return Ye.naturalColors.map(function(t){var n=s(t,1)[0];return e+"-"+n.toLocaleLowerCase()})};this._firework.setAudioEffectsPlayer(this._audioEffectsPlayer),this._startAnimator.setGame(this.game),[new oe.BorderGameStartDecorator({game:this.game})].forEach(function(e){return c._startAnimator.addDecorator(e)});var m=[[{state:Te.MoveSystem.STATE_DROP,builder:new E.EntityRenderGameActionBuilder},{state:Ft.ReplaceEntitySystem.STATE,builder:new E.EntityRenderGameActionBuilder},{state:Ge.SuperEntitySystem.STATE,builder:new E.EntityRenderGameActionBuilder},{state:be.EmitSystem.STATE_EMIT,builder:new E.EntityRenderGameActionBuilder("newEntity")},{state:ze.EmitBeforeExplodeSystem.STATE_EMIT,builder:new E.EntityRenderGameActionBuilder("newEntity")},{state:Xt.CoverEntitySystem.STATE,builder:new x.FadeOutEntityRenderGameActionBuilder}],[{builder:new L.InputLockAnimationBuilder({match3Component:this,lock:!0})},{state:Oe.IdleAnimationSystem.STATE_RESET,builder:new Bt.ChainIdleAnimationGameActionBuilder({stage:Bt.ChainIdleAnimationGameActionBuilder.STAGE_RESET,handlers:[new Gt.ViewIdleAnimationHandler,new Nt.FactoryIdleAnimationHandler]})}],[{builder:new vn.ZIndexAnimationBuilder({world:this.world})}],[{state:Be.StartSystem.STATE,builder:new W.StartAnimationBuilder({startAnimator:this._startAnimator,heroAnimation:M.HeroAnimationBuilder.createAnimation({heroComponent:this.heroView,heroBalloonComponent:this.heroBalloonView,reaction:{animation:"anim"}}),audioEffectsPlayer:this._audioEffectsPlayer,backdropManager:this._backdropManager,handlers:[[new ln.GoalStartAnimationHandler({audioEffectsPlayer:this._audioEffectsPlayer,goalsView:this.goalsView}),new pn.EntityStartAnimationHandler({world:this.game.world})]]})}],[{state:Ee.GameEventSystem.STATE,builder:new we.GameEventActionBuilder({event:"gamecompletion",builder:new k.GameWinCongratulationsAnimationBuilder({firework:this._firework,wait:!1})})},{state:Ee.GameEventSystem.STATE,builder:new we.GameEventActionBuilder({event:"gamecompletion",builder:new V.TapToSkipMessageAnimationBuilder({transitionComponent:this._tapToSkip,uiManager:this._uiManager})})},{state:Ee.GameEventSystem.STATE,builder:new we.GameEventActionBuilder({event:"gamecompletion",builder:new G.SkipAnimationBuilder({match3Component:this,gameActionSystem:this.game.getSystem(Se.GameActionSystem.KEY)})})}],[{state:We.TutorialSystem.STATE_COMPLETE_TUTORIAL_STEP,builder:new K.CompleteTutorialAnimationBuilder({scenarioBuilder:new l.TutorialScenarioBuilder({backdropManager:this._backdropManager}),hero:this.heroView,arrow:this._arrow})}],[{state:Pe.InputSystem.STATE,builder:new et.CandyvalleySelectionAnimationBuilder({selectionView:this.selection,audioEffectsPlayer:this._audioEffectsPlayer})},{state:Ne.SwapSystem.STATE_SWAP,builder:new H.SwapAnimationBuilder({speed:.25,exceptEntityPair:[[["super-1"],["super-1"]]],audioEffectsPlayer:this._audioEffectsPlayer})},{state:[Xt.CoverEntitySystem.STATE,Ne.SwapSystem.STATE_SWAP],builder:new on.SwapGumAnimationBuilder({strategyKey:$t.SwapCoverEntitySystemStrategy.KEY,duration:.33})},{state:Xt.CoverEntitySystem.STATE,builder:new Qt.GumAnimationBuilder({strategyKey:tn.CombinationCoverEntitySystemStrategy.KEY,duration:.1})},{state:Xt.CoverEntitySystem.STATE,builder:new Qt.GumAnimationBuilder({strategyKey:nn.ExplodeCoverEntitySystemStrategy.KEY,duration:.1})},{state:Xt.CoverEntitySystem.STATE,builder:new Qt.GumAnimationBuilder({strategyKey:en.BoosterCoverEntitySystemStrategy.KEY,duration:.1})}],[{state:[Ne.SwapSystem.STATE_SWAP,Ce.ExplodeSystem.STATE],builder:new nt.DoubleExplodeAnimationBuilder({world:this.world,entityType:"super-1",backdropFadeDuration:1,backdropManager:this._backdropManager,audioEffectsPlayer:this._audioEffectsPlayer})}],[{state:Ce.ExplodeSystem.STATE,builder:new A.ExplodeAnimationBuilder({creators:[{creator:q.GoalCollectorAnimationCreator,options:{audioEffectsPlayer:this._audioEffectsPlayer}}]})}],[{state:Ce.ExplodeSystem.STATE,builder:new jt.UpdateZIndexAnimationBuilder({entityTypes:["blocker-1"].flat()})},{state:he.Booster.STATE_BOOSTER,builder:new b.BoosterAnimationBuilder({factory:this._boosterAnimationFactory,prefabs:{trowel:"prefabs/boosters/trowel",cart:"prefabs/boosters/cart",cat:"prefabs/boosters/cat"},allowBoosters:["trowel","cart","cat"],game:this.game})},{state:Xt.CoverEntitySystem.STATE,builder:new Jt.GumGoalAnimationBuilder({goalsView:this.goalsView,audioEffectsPlayer:this._audioEffectsPlayer,resolveDelay:.5})},{state:Ce.ExplodeSystem.STATE,builder:new gt.ChangeSkinBeforeCollectEntityAnimationBuilder({world:this.world,groupMap:Ye.GROUP_MAP})},{state:Ce.ExplodeSystem.STATE,builder:new Yt.ExplodeJarjamAnimationBuilder({world:this.world,entityTypes:Ye.naturalColors.map(function(e){return"jarjam-"+s(e,1)[0].toLowerCase()}),allowedRetrievers:[Ye.RetrieverFactoryKeys.NEIGHBOR]})},{state:Ce.ExplodeSystem.STATE,builder:new A.ExplodeAnimationBuilder({creators:[{creator:mt.BirthdayCakeExplodeAnimationCreator,options:{entityType:"bday-cake"}}]})},{state:Ce.ExplodeSystem.STATE,builder:new lt.ChocolatePotAnimationBuilder({state:Ce.ExplodeSystem.STATE})},{state:Ce.ExplodeSystem.STATE,builder:new yn.PinataAnimationBuilder({state:Ce.ExplodeSystem.STATE})},{state:Ce.ExplodeSystem.STATE,builder:new jt.UpdateZIndexAnimationBuilder({entityTypes:[p("caramel")].flat()})},{state:Ce.ExplodeSystem.STATE,builder:new Wt.PopcornAnimationBuilder({world:this.world,partPrefabPath:"prefabs-entities/popcorn/popcornPart",explodingPartPrefabPath:"prefabs-entities/popcorn/popcornExplodingPart",sound:"popcornExplode",audioEffectsPlayer:this._audioEffectsPlayer})},{state:[Ce.ExplodeSystem.STATE,ze.EmitBeforeExplodeSystem.STATE_EMIT,Ne.SwapSystem.STATE_SWAP],builder:new pt.SuperExplodeAnimationBuilder({world:this.world,audioEffectsPlayer:this._audioEffectsPlayer,partPrefabPath:"prefabs/ui/SuperPart2",starPrefabPath:"prefabs/ui/SuperPart",allowedRetrievers:[Ye.RetrieverFactoryKeys.GROUP,Ye.RetrieverFactoryKeys.RANDOM_GROUP],backdropManager:this._backdropManager})},{state:Ce.ExplodeSystem.STATE,builder:new $e.CandyExplodeAnimationBuilder({entityTypes:["candy","candy-blue","candy-yellow","candy-purple","candy-brown","candy-green","candy-orange","candy-pink","candy-violet","candy-white"],audioEffectsPlayer:this._audioEffectsPlayer,sounds:["finalCandyExplode1","finalCandyExplode2","finalCandyExplode3","finalCandyExplode4","finalCandyExplode5"],eventMap:(e={},e[$e.CandyExplodeAnimationBuilder.EVENT_EXPLODE]=Ye.ANIMATION_EVENTS.EXPLODE,e)})},{state:Ce.ExplodeSystem.STATE,builder:new A.ExplodeAnimationBuilder({creators:[{creator:z.ExplodeAnimationCreator,options:{audioEffectsPlayer:this._audioEffectsPlayer,excludeEntityTypes:["candy","super-1","kitchen-timer",p("candy"),p("jarjam"),p("popcorn")].flat(),sounds:["explode1","explode2","explode3","explode4","explode5"],soundKeys:(t={},t[z.ExplodeAnimationCreator.EXPLODE_SOUND_KEY]=Ye.AudioTypeConfig.EXPLODE,t[z.ExplodeAnimationCreator.CHANGE_STATE_SOUND_KEY]=Ye.AudioTypeConfig.CHANGE_STATE,t),spineFinishEvent:"finish",spineTimeScale:2}},{creator:Ot.DecorAnimationBuilder,options:{world:this.world,decor:[{name:"nut",states:{1:"prefabs-entities/nut/nut-shell-decorator"}}]}},{creator:ut.FlyOffOnDeathAnimationCreator,options:{resolveDelay:.2}}]})},{state:Ge.SuperEntitySystem.STATE,builder:new w.EmitEntityAnimationBuilder({audioEffectsPlayer:this._audioEffectsPlayer,defaultDuration:.08,durationByEntityTypes:{"super-1":.1},soundKeys:(n={},n[w.EmitEntityAnimationBuilder.EMIT_SOUND_KEY]=Ye.AudioTypeConfig.EMIT,n),singleExplodeRetriverFactoryKey:Ye.RetrieverFactoryKeys.SINGLE})},{state:Ce.ExplodeSystem.STATE,builder:new Xe.AfterExplodeAnimationBuilder({config:{"candy-yellow":.2,"candy-blue":.2,"candy-purple":.2,"candy-brown":.2,"candy-green":.2,"candy-orange":.2,"candy-pink":.2,"candy-violet":.2,"candy-white":.2}})},{state:[Ce.ExplodeSystem.STATE,Ge.SuperEntitySystem.STATE,Xt.CoverEntitySystem.STATE],builder:new T.GoalAnimationBuilder({goalsView:this.goalsView,resolveDelay:.2,audioEffectsPlayer:this._audioEffectsPlayer,sounds:["explode1","explode2","explode3","explode4","explode5"],soundKeys:(o={},o[z.ExplodeAnimationCreator.EXPLODE_SOUND_KEY]=Ye.AudioTypeConfig.EXPLODE,o[z.ExplodeAnimationCreator.CHANGE_STATE_SOUND_KEY]=Ye.AudioTypeConfig.CHANGE_STATE,o[T.GoalAnimationBuilder.COLLECT_SOUND_KEY]=Ye.AudioTypeConfig.COLLECT,o)})},{state:[ve.ChangeEntityGroupSystem.STATE,xe.HealthSystem.STATE,Ce.ExplodeSystem.STATE],builder:new tt.ChangeEntityGroupAnimationBuilder({audioEffectsPlayer:this._audioEffectsPlayer,soundKeys:(a={},a[tt.ChangeEntityGroupAnimationBuilder.CHANGE_SOUND_KEY]=Ye.AudioTypeConfig.CHANGE_GROUP,a),triggers:[qt.ChangeEntityGroupOnHealthReduceSystem.KEY,Zt.ChangeEntityGroupOnCombinationNeighborSystem.KEY],groupMap:Ye.COLORS})},{state:[Ce.ExplodeSystem.STATE,Ge.SuperEntitySystem.STATE,Xt.CoverEntitySystem.STATE],builder:new T.GoalAnimationBuilder({goalsView:this.goalsView,resolveDelay:.2,audioEffectsPlayer:this._audioEffectsPlayer,sounds:["explode1","explode2","explode3","explode4","explode5"],soundKeys:(r={},r[z.ExplodeAnimationCreator.EXPLODE_SOUND_KEY]=Ye.AudioTypeConfig.EXPLODE,r[z.ExplodeAnimationCreator.CHANGE_STATE_SOUND_KEY]=Ye.AudioTypeConfig.CHANGE_STATE,r[T.GoalAnimationBuilder.COLLECT_SOUND_KEY]=Ye.AudioTypeConfig.COLLECT,r),postpone:!0})},{state:Fe.ScoreSystem.STATE,builder:new N.StarProgressAnimationBuilder({component:this.progressView,checkpoints:Ye.Match3GameConfig.starsCheckpoints,eventOnShowStar:ee.MultipleProgressStarViewComponent.EVENT_SHOW_STAR,audioEffectsPlayer:this._audioEffectsPlayer})},{state:Me.MultiplierSystem.STATE,builder:new ct.MultiplierAnimationBuilder({parentNode:this.tiles.entities,multiplierPrefab:cc.getAssetFrom("prefabs/ui/Multiplier"),tileHighLightPrefab:cc.getAssetFrom("prefabs/ui/MultiplierHilight"),multiplierStarPrefabMap:{default:cc.getAssetFrom("prefabs/ui/MultiplierStar"),peacock:cc.getAssetFrom("prefabs-entities/peacock/feather")},combinationForAnimating:["column-4","row-4","peacock"],plusOneBoosterButtonNode:this.boostersView.getViewNode("plusone"),audioEffectsPlayer:this._audioEffectsPlayer})},{state:[Ie.MovesReducingSystem.STATE_ALL,Ie.MovesReducingSystem.STATE,Ce.ExplodeSystem.STATE],builder:new rn.MovesCounterWithInitiatorAnimationBuilder({movesCounterView:this.movesCounterView,countdownColorValue:5,lowColor:[255,0,0,255],highColor:[255,255,255,255]})}],[{state:Ct.ChangeGoalSystem.STATE,builder:new bt.ChameleonAnimationBuilder},{state:xe.HealthSystem.STATE,builder:new at.HealthAnimationBuilder({entityTypes:["bee","boss-angrybubble"]})}],[{state:be.EmitSystem.STATE_EMIT,builder:new S.EmitEntityByEntityAnimationBuilder({stage:Ye.EmitStagesList.BEFORE_MOVE,audioEffectsPlayer:this._audioEffectsPlayer,emitSoundKey:Ye.AudioTypeConfig.EMIT,duration:.2})}],[{state:He.WalkSystem.STATE+":"+mn.WalkOnNextTrackEntityExplodeComponent.KEY,builder:new Y.WalkAnimationBuilder({speed:1.2})},{state:dn.ExplodeNextOnTrackOnExplodeSystem.STATE,builder:new un.ExplodeSelfOnNextTrackFinishAnimationBuilder({})},{state:Te.MoveSystem.STATE,builder:new F.CandyvalleyMoveAnimationBuilder({world:this.world,audioEffectsPlayer:this._audioEffectsPlayer})},{state:be.EmitSystem.STATE_EMIT,builder:new Je.AfterTurnAnimationBuilder},{state:be.EmitSystem.STATE_EMIT,builder:new lt.ChocolatePotAnimationBuilder({state:be.EmitSystem.STATE_EMIT})},{state:be.EmitSystem.STATE_EMIT,builder:new yn.PinataAnimationBuilder({state:be.EmitSystem.STATE_EMIT})},{state:_n.ToggleLockOnTurnEndSystem.STATE,builder:new bn.ToggleLockOnTurnEndAnimationBuilder({})}],[{state:be.EmitSystem.STATE_EMIT,builder:new S.EmitEntityByEntityAnimationBuilder({stage:Ye.EmitStagesList.BEFORE_WALK,audioEffectsPlayer:this._audioEffectsPlayer,emitSoundKey:Ye.AudioTypeConfig.EMIT,duration:.7})}],[{state:be.EmitSystem.STATE_EMIT,builder:new rt.HeroCandyThrowAnimationBuilder({world:this.world,spine:this.heroView.spine,audioEffectsPlayer:this._audioEffectsPlayer,fallbackEmitNode:this.heroView.node,speed:2e3})},{state:Oe.IdleAnimationSystem.STATE_SCHEDULE,builder:new lt.ChocolatePotAnimationBuilder({state:Oe.IdleAnimationSystem.STATE_SCHEDULE})},{state:Ut.StartBoosterSystem.STATE,builder:new Kt.StartBoosterAnimationBuilder({factory:this._startBoosterAnimationFactory,world:this.world,movesCounterView:this.movesCounterView,progressView:this.progressView})},{state:Ft.ReplaceEntitySystem.STATE,builder:new Lt.ReplaceEntityByEntityAnimationBuilder({triggers:[Dt.EntityGroupReplaceEntitySystemStrategy.KEY]})},{state:be.EmitSystem.STATE_EMIT,builder:new st.SquirrelThrowNutAnimationBuilder({world:this.world,spine:this._squirrel,boneKey:"nut",startAnimationKey:"show",throwAnimationKey:"throw",throwAnimationEvent:"throw",finishAnimationKey:"hide",audioEffectsPlayer:this._audioEffectsPlayer,speed:2e3})},{state:je.RecoveryHealthSystem.STATE,builder:new D.RecoveryHealthAnimationBuilder({triggers:[vt.RecoveryHealthOnDeathComponent.KEY,_t.RecoveryHealthOnReachTurnCountAfterExplodeComponent.KEY]})},{state:xe.HealthSystem.STATE,builder:new at.HealthAnimationBuilder({entityTypes:["chocolatePot","machinegum","mixer"]})},{state:He.WalkSystem.STATE+":"+Vt.WalkOnTurnEndComponent.KEY,builder:new Y.WalkAnimationBuilder({speed:1.2})},{state:He.WalkSystem.STATE_FAIL,builder:new ft.ParrotDestroyAnimationBuilder}],[{state:Rt.RemoveOnWalkSystem.STATE+":"+Pt.RemoveNeighborsOnWalkSystemHandler.KEY,builder:new kt.RemoveOnWalkAnimationBuilder}],[{state:be.EmitSystem.STATE_EMIT,builder:new cn.BombribbonsAnimationBuilder({stage:Ye.EmitStagesList.BOMB_RIBBONS,explosionPrefab:"prefabs-entities-bombribbons/bombribbonsExplosion",trigger:sn.EmitOnTurnEndAndCounterEndComponent.KEY,sound:"bombrobbons",audioEffectsPlayer:this._audioEffectsPlayer})},{state:be.EmitSystem.STATE_EMIT,builder:new S.EmitEntityByEntityAnimationBuilder({stage:Ye.EmitStagesList.AFTER_WALK,audioEffectsPlayer:this._audioEffectsPlayer,emitSoundKey:Ye.AudioTypeConfig.EMIT,duration:.2})},{state:be.EmitSystem.STATE_EMIT,builder:new yt.AddParrotOnGridAnimationBuilder({triggers:[St.EmitOnTurnEndComponent.KEY],speed:.5,world:this.world})}],[{state:[ve.ChangeEntityGroupSystem.STATE,xe.HealthSystem.STATE,Ce.ExplodeSystem.STATE],builder:new tt.ChangeEntityGroupAnimationBuilder({audioEffectsPlayer:this._audioEffectsPlayer,soundKeys:(i={},i[tt.ChangeEntityGroupAnimationBuilder.CHANGE_SOUND_KEY]=Ye.AudioTypeConfig.CHANGE_GROUP,i),triggers:[zt.ChangeEntityGroupOnCounterValueChangeSystem.KEY],groupMap:Ye.COLORS})}],[{state:_e.ReduceCounterOnTurnStrategy.STATE,builder:new Qe.BombAnimationBuilder}],[{state:fn.ShuffleOnDeathOnEndTurnSystem.STATE_PREFIX+":mixer",builder:new it.MixerAnimationBuilder},{state:De.ShuffleSystem.STATE,builder:new B.ShuffleAnimationBuilder({spine:this._shuffle,audioEffectsPlayer:this._audioEffectsPlayer})}],[{builder:new j.HeroScheduleWaitingAnimationBuilder(this.heroView)}],[{state:Ve.WinLoseSystem.STATE,type:Se.GameActionSystem.TYPE_SETTLED,skippable:!1,builder:new R.FinalUIAnimationBuilder({match3Component:this,allowedResult:[Ve.WinLoseSystem.RESULT.WIN],holders:this._animationHolders})},{builder:new L.InputLockAnimationBuilder({match3Component:this,lock:!1})},{state:Ve.WinLoseSystem.STATE,type:Se.GameActionSystem.TYPE_SETTLED,skippable:!1,builder:new P.GameOverAnimationBuilder({actionManager:this._actionManager,finishAction:qe.ACTIONS.FINISH_MATCH3_GAME,match3Component:this,level:this._level,firework:this._firework,uiManager:this._uiManager})},{state:Ve.WinLoseSystem.PRE_STATE,builder:new ot.GameOverCallbackGameActionBuilder({callback:function(){c._logEvent({moves_left:c.game.getMoves(),win:1})},type:Ve.WinLoseSystem.RESULT.WIN})},{state:Ve.WinLoseSystem.STATE,skippable:!1,builder:new O.FinalAnimationCleanerBuilder({match3Component:this})}],[{state:We.TutorialSystem.STATE_START_TUTORIAL_STEP,builder:new U.StartTutorialAnimationBuilder({scenarioBuilder:new l.TutorialScenarioBuilder({backdropManager:this._backdropManager}),hero:this.heroView,arrow:this._arrow,boostersView:this.boostersView,targets:[this.selection.node,this.heroView.node,this.heroBalloonView.node],boosterArrowAngle:90,boosterArrowOffset:cc.v2(-1,0)})}],[{state:Oe.IdleAnimationSystem.STATE_SCHEDULE,builder:new Bt.ChainIdleAnimationGameActionBuilder({stage:Bt.ChainIdleAnimationGameActionBuilder.STAGE_SCHEDULE,handlers:[new Gt.ViewIdleAnimationHandler,new Nt.FactoryIdleAnimationHandler]})},{state:Ae.HelpSystem.STATE,builder:new I.HelpAnimationBuilder({component:this,factory:new Z.HelpAnimationFactory})}],[{state:Tt.LockSystem.STATE_LOCK,builder:new It.LockAnimationBuilder},{state:Tt.LockSystem.STATE_UNLOCK,builder:new Mt.UnlockAnimationBuilder}],[{state:Le.RemoveSystem.STATE,builder:new C.DestroyAnimationBuilder}]];this._match3Game.initGameActionSystem(m)},t.prototype._purchaseBooster=function(e){this._actionManager.run(qe.ACTIONS.PURCHASE_BOOSTER,{booster:e})},t.prototype._createBoosters=function(){var e,t,n=this;if(this.boostersView){var o=this._userManager.getCurrentUser(),a=function(e){r.boostersView.addBooster(e,function(){if(n._selectedBoosterKey&&n._selectedBoosterKey===e)return n.boostersView.setBoosterActive(e,!1),void(n._selectedBoosterKey=null);n._selectedBoosterKey&&(n.boostersView.setBoosterActive(n._selectedBoosterKey,!1),n._selectedBoosterKey=null),t.amount>0?(n._selectedBoosterKey=e,n.boostersView.setBoosterActive(e,!0),n._processBooster()):n._purchaseBooster(e)});var t=o.items.get("booster",e);r.boostersView.setBoosterCount(e,t.amount),r.boostersView.setEnableBooster(e,t.isAvailable()),t.availability&&r.boostersView.setLockLevelBooster(e,t.availability.value),r.listenTo(t,"change",function(t){n.boostersView.setBoosterCount(e,t.amount)})},r=this;try{for(var i=c(Ye.Match3GameConfig.boosters),s=i.next();!s.done;s=i.next())a(s.value)}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}},t.prototype._processBooster=function(e){if(void 0===e&&(e=void 0),this._selectedBoosterKey&&(e||"plusone"===this._selectedBoosterKey)){if(this._match3Game.input(new Re.Input({type:"booster",data:Object.assign({name:this._selectedBoosterKey},e)}))){var t=this._userManager.getCurrentUser(),n=t.items.create({spec:"booster",name:this._selectedBoosterKey,amount:1});t.items.spend([n])}this.boostersView.setBoosterActive(this._selectedBoosterKey,!1),this._selectedBoosterKey=null}},t.prototype._onInputTile=function(e){this._selectedBoosterKey?this._processBooster(e):this._match3Game.input(new Re.Input({type:"raw",data:e}))},t.prototype._listenStartBoosters=function(){var e=this,t=this._match3Game.getSystem(Ut.StartBoosterSystem.KEY);this.listenTo(t.events,"compensation:start:booster",function(t){e._actionManager.run(qe.ACTIONS.COMPENSATION_START_BOOSTER,{boosterKey:t})})},Object.defineProperty(t.prototype,"game",{get:function(){return this._match3Game},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"world",{get:function(){return this._match3Game.world},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tapToSkip",{get:function(){return this._tapToSkip},enumerable:!1,configurable:!0}),t.prototype.lockInputNodes=function(){this._inputLockNodes.forEach(function(e){return e.active=!0})},t.prototype.unlockInputNodes=function(){this._inputLockNodes.forEach(function(e){return e.active=!1})},t.prototype.setCompletionFinished=function(){this._completionFinished=!0},t.prototype.isCompletionFinished=function(){return this._completionFinished},t.prototype.init=function(e){var t,n,o=this,a=e.level,r=e.prefabs,i=(e.backgroundIndex,e.theme),s=void 0===i?"theme-default":i;this._level=a;var p=this._metaGameManager.getCurrentMetaGame(),l={},m=p.getModule("currentLevel");m&&m.setValue(this._level.number);try{for(var u=c(Object.keys(r)),d=u.next();!d.done;d=u.next()){var y=d.value;l[y]=r[y]}}catch(f){t={error:f}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return this._themeController&&s&&"theme-default"!==s&&this._themeController.setTheme(s),this.node.getComponentsInChildren(gn.PrefabThemeComponent).forEach(function(e){e.updatePrefab()}),this._createBoosters(),this.unlockInputNodes(),Promise.resolve().then(function(){return o._createMatch3(a,l)})},t.prototype.run=function(){var e=this,t=this._metaGameManager.getCurrentMetaGame().getModule("music");return t&&t.play(this._level.hard?"hardLevel":"regularLevel"),this._match3Game.start().then(function(){var t;e._startDate=new Date,e._logEvent();var o=e._userManager.getCurrentUser();if(e._level.data.startBoosters){var a={};null===(t=e._level.data.startBoosters)||void 0===t||t.forEach(function(e){var t=o.items.get("startbooster",e),r=n.SPEND_USERITEM_ANALYTICS_MAP[t.spec+":"+t.name];t&&void 0!==r&&(a[r]=1)}),e._logEvent(a)}e.listenTo(o.items,_.UserItemManager.EVENT_SPEND,function(t){var o=t.items,a=(i(t,["items"]),{});o.forEach(function(e){var t=e.spec,o=e.name,r=e.amount,i=n.SPEND_USERITEM_ANALYTICS_MAP[t+":"+o];void 0!==i&&(a[i]=r)}),e._logEvent(a)}),e.listenTo(o.items,_.UserItemManager.EVENT_CHARGE,function(t){t.items;var n=i(t,["items"]),o=n&&n.product;o&&"coins"===o.currency&&e._logEvent({charge:o.price})})})},t.prototype._logEvent=function(e){if(void 0===e&&(e={}),this._analyticsService){var t=this._metaGameManager.getCurrentMetaGame(),o=new Date,a=this._lastLogDate||o,r=Object.assign({group_tag:t.getProgressGroupTag(this._level.number),tag:t.getProgressTag(this._level.number),start_date:this._startDate.toISOString(),duration:Math.floor((o.getTime()-a.getTime())/1e3),durationInSec:1},e);this._analyticsService.logEvent(n.GAME_SESSION_ANALYTICS_KEY,r),this._lastLogDate=o}},t.prototype.logLoseEvent=function(){var e=0,t=0;this.game.getGoals().forEach(function(n){var o=n.total,a=void 0===o?0:o,r=n.count;e+=a,t+=void 0===r?0:r}),this._logEvent({completed_goals_percentage:Math.round(t/e*100),win:-1})},t.prototype.reskin=function(e){var t=this;void 0===e&&(e="default");var n=Ze.EntitySkinConfig[e],o={};if(n&&this._forceEntityRenderer){var a=Promise.resolve([]);return void 0!==n.entities&&(a=Promise.all(Object.entries(n.entities).map(function(e){var t=s(e,2),n=t[0],a=t[1];return new p.BundleLoadTask(a).load().then(function(e){var t=s(e,1)[0];o[n]=t})}))),a.then(function(){t._prefabFactory.setPrefabs(o),void 0!==n.entities&&(t.tiles.clean(),t.tiles.renderGrid(t.game.world.getComponent("tiles").grid,t._forceEntityRenderer)),t.game.runPipeline()})}return Promise.reject()},Object.defineProperty(t.prototype,"goalsView",{get:function(){return this._findComponent(J.GoalCollectionViewComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressView",{get:function(){return this._findComponent(ee.MultipleProgressStarViewComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boostersView",{get:function(){return this._findComponent(X.BoostersViewComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movesCounterView",{get:function(){return this._findComponent($.MovesCounterViewComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heroView",{get:function(){return this._findComponent(h.HeroComponent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heroBalloonView",{get:function(){return this._findComponent(f.HeroBalloonComponent)},enumerable:!1,configurable:!0}),t.prototype._findComponent=function(e){return this.node.getComponentsInChildren(e).filter(function(e){return e.enabledInHierarchy})[0]},t.GAME_SESSION_ANALYTICS_KEY="match3_session",t.SPEND_USERITEM_ANALYTICS_MAP={"booster:trowel":"booster_1","booster:cart":"booster_2","booster:cat":"booster_3","booster:plusone":"booster_4","match3:moves":"buy_moves","match3:bombMoves":"buy_bombs","currency:coins":"charge","startbooster:superTile":"start_booster_super_tile","startbooster:candybomb":"start_booster_candy_bomb","startbooster:addmoves":"start_booster_add_moves"},r([Sn(Q.GridViewComponent)],t.prototype,"tiles",void 0),r([Sn(te.SelectionViewComponent)],t.prototype,"selection",void 0),r([Sn({type:sp.Skeleton,visible:!0})],t.prototype,"_shuffle",void 0),r([Sn({type:y.ArrowComponent,visible:!0})],t.prototype,"_arrow",void 0),r([Sn({type:d.FireworkComponent,visible:!0})],t.prototype,"_firework",void 0),r([Sn({type:v.TransitionComponent,visible:!0})],t.prototype,"_tapToSkip",void 0),r([Sn({type:cc.Node,visible:!0})],t.prototype,"_squirrel",void 0),r([Sn({type:[cc.Node],visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u0434\u043b\u044f \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0439, \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432\u044b\u0448\u0435 backdrop"})],t.prototype,"_inputLockNodes",void 0),r([Sn({type:ne.DecoratedGameStartAnimatorComponent,visible:!0})],t.prototype,"_startAnimator",void 0),r([Sn({type:[u.UIAnimationSceneHolder],visible:!0})],t.prototype,"_animationHolders",void 0),r([Sn({type:g.ThemeControllerComponent,visible:!0})],t.prototype,"_themeController",void 0),r([hn.Inject("AnalyticsService")],t.prototype,"_analyticsService",void 0),r([hn.Inject("ActionManager")],t.prototype,"_actionManager",void 0),r([hn.Inject("MetaGameManager")],t.prototype,"_metaGameManager",void 0),r([hn.Inject("UserManager")],t.prototype,"_userManager",void 0),r([hn.Inject("BackdropManager")],t.prototype,"_backdropManager",void 0),r([hn.Inject("ConfigService")],t.prototype,"_configService",void 0),r([hn.Inject("AudioEffectsPlayer")],t.prototype,"_audioEffectsPlayer",void 0),r([hn.Inject("BoosterAnimationFactory")],t.prototype,"_boosterAnimationFactory",void 0),r([hn.Inject("StartBoosterAnimationFactory")],t.prototype,"_startBoosterAnimationFactory",void 0),r([hn.Inject("UIManager")],t.prototype,"_uiManager",void 0),n=r([wn,En(Ke.EventListener)],t)}(m.SceneComponent);n.Match3GameComponent=xn,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ArrowComponent (@tapclap.game-kit.ui.arrow)":"ArrowComponent (@tapclap.game-kit.ui.arrow)","./BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)":"BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)","./BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)","./BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./BoostersViewComponent (@tapclap.match-x.cocos.components)":"BoostersViewComponent (@tapclap.match-x.cocos.components)","./BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)":"BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)","./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)":"ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)","./ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":"ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","./ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)":"ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)","./ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":"ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","./CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)":"CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)","./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)","./DebugLevelNumber (scripts.scenes)":"DebugLevelNumber (scripts.scenes)","./DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","./DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./EmitBeforeExplodeSystem (scripts.common.match3-game.systems)":"EmitBeforeExplodeSystem (scripts.common.match3-game.systems)","./EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndComponent (@tapclap.match-x.engine.components)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)":"EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)","./EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)":"EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)","./EntityRenderer (@tapclap.match-x.cocos.renderers)":"EntityRenderer (@tapclap.match-x.cocos.renderers)","./EntitySkinConfig (scripts.config)":"EntitySkinConfig (scripts.config)","./EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)":"EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)","./EventListener (@tapclap.utils-js.events)":"EventListener (@tapclap.utils-js.events)","./ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)":"ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)","./ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)":"FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)","./FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)":"FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)","./FailWalkComponent (@tapclap.match-x.engine.components)":"FailWalkComponent (@tapclap.match-x.engine.components)","./FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)":"FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)","./FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./FireworkComponent (@tapclap.game-kit.ui.animations)":"FireworkComponent (@tapclap.game-kit.ui.animations)","./FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)":"FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)","./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","./GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)":"GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)","./GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)":"GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)","./GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","./GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)":"GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)","./GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)":"GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)","./GoalsBarRenderer (@tapclap.match-x.cocos.renderers)":"GoalsBarRenderer (@tapclap.match-x.cocos.renderers)","./GridEntityRenderer (@tapclap.match-x.cocos.renderers)":"GridEntityRenderer (@tapclap.match-x.cocos.renderers)","./GridRenderer (@tapclap.match-x.cocos.renderers)":"GridRenderer (@tapclap.match-x.cocos.renderers)","./GridViewComponent (@tapclap.match-x.cocos.components.grid)":"GridViewComponent (@tapclap.match-x.cocos.components.grid)","./GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)":"GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","./GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)":"HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)","./HealthSystem (@tapclap.match-x.engine.systems.health-system)":"HealthSystem (@tapclap.match-x.engine.systems.health-system)","./HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./HelpAnimationFactory (@tapclap.match-x.cocos.animations)":"HelpAnimationFactory (@tapclap.match-x.cocos.animations)","./HelpSystem (@tapclap.match-x.engine.systems.help-system)":"HelpSystem (@tapclap.match-x.engine.systems.help-system)","./HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./HeroBalloonComponent (@tapclap.game-kit.ui.hero)":"HeroBalloonComponent (@tapclap.game-kit.ui.hero)","./HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./HeroComponent (@tapclap.game-kit.ui.hero)":"HeroComponent (@tapclap.game-kit.ui.hero)","./HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)":"IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./Input (@tapclap.match-x.engine.systems.input-system)":"Input (@tapclap.match-x.engine.systems.input-system)","./InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./InputSystem (@tapclap.match-x.engine.systems.input-system)":"InputSystem (@tapclap.match-x.engine.systems.input-system)","./KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":"KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","./LoadSystem (@tapclap.match-x.engine.systems.load-system)":"LoadSystem (@tapclap.match-x.engine.systems.load-system)","./LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./Match3Game (scripts.common.match3-game)":"Match3Game (scripts.common.match3-game)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)","./MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./MoveSystem (@tapclap.match-x.engine.systems.move-system)":"MoveSystem (@tapclap.match-x.engine.systems.move-system)","./MovesCounterRenderer (@tapclap.match-x.cocos.renderers)":"MovesCounterRenderer (@tapclap.match-x.cocos.renderers)","./MovesCounterViewComponent (@tapclap.match-x.cocos.components)":"MovesCounterViewComponent (@tapclap.match-x.cocos.components)","./MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)":"MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)","./MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)":"MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)","./MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./PrefabFactory (@tapclap.match-x.cocos.prefab-factory)":"PrefabFactory (@tapclap.match-x.cocos.prefab-factory)","./PrefabThemeComponent (@tapclap.game-kit.ui.themes)":"PrefabThemeComponent (@tapclap.game-kit.ui.themes)","./RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)","./ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)":"ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)","./RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)":"RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)","./RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)":"RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)","./RemoveSystem (@tapclap.match-x.engine.systems)":"RemoveSystem (@tapclap.match-x.engine.systems)","./ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)":"ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)","./ScoreSystem (@tapclap.match-x.engine.systems.score-system)":"ScoreSystem (@tapclap.match-x.engine.systems.score-system)","./SelectionViewComponent (@tapclap.match-x.cocos.components)":"SelectionViewComponent (@tapclap.match-x.cocos.components)","./ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)","./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)","./SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)":"StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)","./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)","./StartSystem (@tapclap.match-x.engine.systems.start-system)":"StartSystem (@tapclap.match-x.engine.systems.start-system)","./StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)":"StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)","./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":"SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)","./SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","./SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)","./TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ThemeControllerComponent (@tapclap.game-kit.ui.themes)":"ThemeControllerComponent (@tapclap.game-kit.ui.themes)","./ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)":"ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)","./TransitionComponent (@tapclap.game-kit.ui.transition)":"TransitionComponent (@tapclap.game-kit.ui.transition)","./TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)","./TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)":"TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)","./UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)":"UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)","./UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./UserItemManager (@tapclap.game-kit.user-item-manager)":"UserItemManager (@tapclap.game-kit.user-item-manager)","./ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)":"ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)","./WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)","./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)":"WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)","./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)":"WalkOnTurnEndComponent (@tapclap.match-x.engine.components)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)","./WorldRenderer (@tapclap.match-x.cocos.renderers)":"WorldRenderer (@tapclap.match-x.cocos.renderers)","./ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)"}],"Match3GameConfig (scripts.common.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"e658ahWKa1WXb+9gVgFH2lX","Match3GameConfig (scripts.common.match3-game)");var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G,N,W,H,V,K=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},U=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.Match3GameConfig=n.RetrieverFactoryKeys=n.naturalColors=n.EmitStagesList=n.GROUP_MAP=n.ANIMATION_EVENTS=n.TURN_STATES=n.GOALS_COLORS=n.COLORS=n.AudioTypeConfig=void 0;var Y,z=e("./Vector2D (@tapclap.match-x.engine.models)"),q=e("./Entity (@tapclap.match-x.engine.entities)"),Z=e("./RetrieverFactory (@tapclap.match-x.engine.retrievers)"),X=e("./ComponentClassRegister (@tapclap.match-x.engine.components)"),J=e("./EntityClassRegister (@tapclap.match-x.engine.entities)"),Q=e("./TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)"),$=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),ee=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),te=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),ne=e("./InputSystem (@tapclap.match-x.engine.systems.input-system)"),oe=e("./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)"),ae=e("./HealthComponent (@tapclap.match-x.engine.components)"),re=e("./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)"),ie=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),ce=e("./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)"),se=e("./TagComponent (@tapclap.match-x.engine.components)"),pe=e("./CombinationComponent (@tapclap.match-x.engine.components)"),le=e("./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)"),me=e("./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),ue=e("./NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),de=e("./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),ye=e("./ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)"),fe=e("./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),he=e("./DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),ge=e("./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)"),ve=e("./WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)"),_e=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),be=e("./FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)"),Ce=e("./RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)"),we=e("./RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),Se=e("./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)"),Ee=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),xe=e("./AnimationComponent (@tapclap.match-x.engine.components)"),Ae=e("./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)"),Oe=e("./CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Re=e("./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Pe=e("./DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),ke=e("./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Te=e("./GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Ie=e("./AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Me=e("./RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),je=e("./EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Le=e("./RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"),Fe=e("./ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)"),De=e("./KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)"),Be=e("./PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)"),Ge=e("./EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),Ne=e("./Patterns (@tapclap.match-x.engine.chunk-classifier)"),We=e("./ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)");n.AudioTypeConfig={EXPLODE:"explode",CHANGE_STATE:"changeState",CHANGE_GROUP:"changeGroup",COLLECT:"collect",EMIT:"emit"},n.COLORS={VIOLET:1,GREEN:2,PINK:3,ORANGE:4,WHITE:5,BLUE:6,BROWN:7,PURPLE:8,YELLOW:9,COFFEE_BEAN:10},n.GOALS_COLORS=[n.COLORS.BLUE,n.COLORS.BROWN,n.COLORS.PURPLE,n.COLORS.YELLOW,n.COLORS.COFFEE_BEAN],n.TURN_STATES={INPUT:"input",SWAP:"swap",BOOSTER:"booster",RUNTIME:"runtime",FINISH:"finish",BOOSTER_FINISH:"booster_finish",END:"end",BOOSTER_END:"booster_end"},n.ANIMATION_EVENTS={EXPLODE:"explode"},n.GROUP_MAP=Object.fromEntries(Object.entries(n.COLORS).map(function(e){return e.reverse()})),function(e){e.BEFORE_MOVE="BEFORE_MOVE",e.BEFORE_WALK="BEFORE_WALK",e.AFTER_WALK="AFTER_WALK",e.BOMB_RIBBONS="BOMB_RIBBONS"}(Y=n.EmitStagesList||(n.EmitStagesList={})),n.naturalColors=Object.entries(n.COLORS).filter(function(e){return K(e,2)[1]<10});var He,Ve=n.naturalColors.map(function(e){return"candy-"+K(e,1)[0].toLowerCase()});n.RetrieverFactoryKeys={COMBINATION:Oe.CombinationExplodeRetriever.KEY,SINGLE:Re.SingleExplodeRetriever.KEY,DIAGONAL:Pe.DiagonalExplodeRetriever.KEY,NEIGHBOR:ke.NeighborExplodeRetriever.KEY,NEIGHBOR_NO_FILTER:ke.NeighborExplodeRetriever.KEY,GROUP:Te.GroupExplodeRetriever.KEY,RANDOM_GROUP:"randomGroup",ALL:Ie.AllExplodeRetriever.KEY,RADIAL_SQUARE:Me.RadialSquareExplodeRetriever.KEY,EMPTY_CELL:je.EmptyCellExplodeRetriever.KEY,RANDOM_CELL:Le.RandomCellExplodeRetriever.KEY},n.Match3GameConfig={componentClassRegister:X.ComponentClassRegister,entityClassRegister:J.EntityClassRegister,entities:{world:{components:{input:{},state:{},tiles:{},score:{},stars:{},moves:{},goals:{},statistic:{},tutorial:{},emitByStrategy:{strategies:[{strategyKey:"onEmptyTrackByProbability",emitOptions:{emitCount:1,target:"onTrack",type:"random",entities:{pacman:{amount:1/0}}}}]},render:{type:"world"},animation:{},turnState:{},worldGroups:{},event:{},explodeCollection:{},entityTypeGroups:{groups:{}},emitInGridEdge:{direction:1}}},grid:{components:{entityPool:{},goals:{},entityProbability:{},entityCountLimit:{},entityComponentSet:{},direction:{direction:z.Vector2D.DOWN},groupEntityMap:{map:(o={},o[n.COLORS.VIOLET]="entity-1",o[n.COLORS.GREEN]="entity-2",o[n.COLORS.PINK]="entity-3",o[n.COLORS.ORANGE]="entity-4",o[n.COLORS.WHITE]="entity-5",o[n.COLORS.BLUE]="entity-6",o[n.COLORS.BROWN]="entity-7",o[n.COLORS.PURPLE]="entity-8",o[n.COLORS.YELLOW]="entity-9",o[n.COLORS.COFFEE_BEAN]="coffeebean",o)},render:{},turn:{},dimensions:{},combinationsPriorities:{data:(a={},a[Ne.PatternsEnum.ROW5]=0,a[Ne.PatternsEnum.COLUMN5]=0,a[Ne.PatternsEnum.SQUARE]=1,a)}}},cell:{components:{entityPool:{},drop:{},render:{type:"cell",decorators:["cell"]},animation:{}}},"entity-1":{components:{event:{},swap:{},group:{id:n.COLORS.VIOLET},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-2":{components:{event:{},swap:{},group:{id:n.COLORS.GREEN},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-3":{components:{event:{},swap:{},group:{id:n.COLORS.PINK},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-4":{components:{event:{},swap:{},group:{id:n.COLORS.ORANGE},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-5":{components:{event:{},swap:{},group:{id:n.COLORS.WHITE},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-6":{components:{event:{},swap:{},group:{id:n.COLORS.BLUE},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-7":{components:{event:{},swap:{},group:{id:n.COLORS.BROWN},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-8":{components:{event:{},swap:{},group:{id:n.COLORS.PURPLE},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},"entity-9":{components:{event:{},swap:{},group:{id:n.COLORS.YELLOW},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},canBeCovered:{},allowWalk:{}}},heart:{components:{event:{},swap:{},counter:{max:2,value:2},group:{},onCounterValueChangeGroup:{groups:[n.COLORS.VIOLET,n.COLORS.GREEN,n.COLORS.PINK,n.COLORS.ORANGE,n.COLORS.WHITE]},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},reduceCounterOnTurn:{},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity",decorators:["group"]},animation:{},audio:{sounds:(r={},r[n.AudioTypeConfig.CHANGE_GROUP]="heartChangeGroup",r)},notReplaceByStartBooster:{}}},rabbit:{components:{event:{},health:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},explodeOnDeath:{},render:{type:"entity"},animation:{resolver:"health"},preventCover:{}}},cup:{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},cracker:{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"cookie-1":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"cookie-2":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"cookie-3":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},nut:{components:{event:{},swap:{},health:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},preventExplodeOnSwap:{},move:{},explodeOnCombinationNeighbor:{},explodeOnDeath:{},explodeOnBlast:{},render:{type:"entity"},animation:{resolver:"health"},flyOffOnDeath:{type:"fallDown",options:{offset:[90,250],rotation:-180,duration:.7,scale:1.2}},canBeCovered:{},preventCover:{}}},strawberry:{components:{event:{},preventWalkExplode:{},health:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},explodeOnExplodeNeighbor:{strategies:{group:{groups:[n.COLORS.BROWN]}}},explodeOnDeath:{},explodeOnBlast:{},render:{type:"entity"},animation:{resolver:"health"},preventCover:{}}},chocolatePot:{components:{event:{},preventWalkExplode:{},health:{max:4},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},recoveryHealthOnEmit:{},emitOnTurnEndAndDeath:{type:"random",target:"random",emitCount:4,entities:{"entity-7":{amount:1/0}}},emitTarget:{excludeEntityTypes:["entity-7"]},emitStage:{stages:(i={},i[Y.BEFORE_WALK]=!0,i)},render:{type:"entity",decorators:["health"]},animation:{},audio:{sounds:(c={},c[n.AudioTypeConfig.CHANGE_STATE]="chocolatePotChangeState",c[n.AudioTypeConfig.EMIT]="chocolatePotEmit",c)},preventCover:{},static:{}}},bee:{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER],components:["move","explodeOnBlast","explodeOnEndTurn","shuffle","swap","canBeReplacedByEmit","canBeReplacedByWalk","walk","explodeOnGround","emitOnTurn",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},health:{value:3},explode:{},explodeOnBlast:{},reduceHealthOnBlast:{},reduceHealthOnExplode:{},explodeOnDeath:{},walk:{pathStrategyKey:ue.NeighborWalkPathStrategy.KEY,replaceStrategyKey:de.EmptyWalkReplaceStrategy.KEY,sort:Ce.RandomWalkSortStrategy.KEY,order:0},preventWalkPath:{},preventCover:{},walkOnTurnEnd:{},emitOnTurn:{type:"random",target:"emitter",emitCount:1,entities:{honeycomb:{amount:1/0}},state:n.TURN_STATES.FINISH,turnNumber:1},emitTarget:{layer:q.Entity.LAYER_LOWER},emitStage:{stages:(s={},s[Y.AFTER_WALK]=!0,s)},animation:{},goalAnimation:{node:"entity"},render:{type:"entity"},flyOffOnDeath:{type:"fallDown",options:{offset:[90,250],rotation:-180,duration:.7,scale:1.2}},emitAfterEmit:{type:"random",target:"emitter",emitCount:1,entities:{honeycomb:{amount:1/0}},state:n.TURN_STATES.FINISH,turnNumber:1},zIndex:{value:8}}},honeycomb:{layer:q.Entity.LAYER_LOWER,components:{event:{},lock:{layers:[q.Entity.LAYER_FLOOR],components:["explode"],removeSelf:!1},explode:{},explodeLayerOnRemove:{layers:[q.Entity.LAYER_FLOOR]},animation:{},goalAnimation:{enable:!1},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"}}},jelly:{layer:q.Entity.LAYER_LOWER,components:{event:{},animation:{},inputHandler:{disallowInputHandlers:["booster"]},multiplierHold:{},render:{type:"entity"}}},"pink-jelly":{layer:q.Entity.LAYER_LOWER,components:(p={},p[Se.ReplaceEntityOnTurnEndComponent.KEY]={strategy:"entityGroup",layers:[q.Entity.LAYER_DEFAULT]},p[Ee.RenderComponent.KEY]={type:"entity"},p[xe.AnimationComponent.KEY]={},p)},gum:{layer:q.Entity.LAYER_LOWER,components:{event:{},animation:{},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"},cover:{}}},"blocker-1":{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER],components:["move","shuffle","swap","multiplier","canBeReplacedByEmit","canBeReplacedByWalk","explodeOnGround","walk",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},preventWalkPath:{},preventCover:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombination:{},explode:{},health:{},reduceHealthOnBlast:{},reduceHealthOnExplode:{},render:{type:"entity"},animation:{resolver:"health"},goalAnimation:{enable:!1},audio:{sounds:(l={},l[n.AudioTypeConfig.CHANGE_STATE+"-1"]="ribbon1",l[n.AudioTypeConfig.EXPLODE]="ribbon0",l)},zIndex:{value:7}}},"white-chocolate":{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR],components:["move","explodeImmediate","explodeOnCombination","explodeOnBlast","explodeOnGround","shuffle","swap","multiplier","canBeReplacedByEmit","canBeReplacedByWalk","explodeOnEndTurn","group","combination","walk","lock",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},preventWalkPath:{},preventCover:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},explodeOnCombination:{},explodeAnimation:{waitPrevAnimation:!0},explode:{},health:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},render:{type:"entity"},animation:{resolver:"health"},goalAnimation:{enable:!1},zIndex:{value:7}}},"super-1":{components:(m={event:{},swap:{},move:{},group:{},shuffle:{},inheritGroupOnSwap:{},explode:{},explodeRetriever:{type:n.RetrieverFactoryKeys.RANDOM_GROUP,options:{allowComponents:[pe.CombinationComponent.KEY]}},explodeAffectNeighbors:{},explodeBlastAsCombination:{},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explodeAsCombination:{},inputHandler:{allowInputHandlers:["booster:trowel","booster:cart"]},explodeOnBlast:{},explodeOnSwap:{components:["group"]},render:{type:"entity"},animation:{},audio:{sounds:(u={},u[n.AudioTypeConfig.EMIT]="superTileEmit",u)}},m[re.ManageComponentsOnSwapComponent.KEY]={conditions:[{entityTypes:Ve,hasComponents:[ie.ExplodeComponent],addComponents:[{component:ce.EmitOnSwapBeforeExplodeComponent,options:{type:"random",target:"group",emitCount:1/0,entities:(He={},Ve.forEach(function(e){return He[e]={amount:1/0,probability:1}}),He)}}]}]},m.canBeCovered={},m.canBeReplacedByWalk={},m.forceSwapCover={},m.zIndex={value:7},m)},candywrapper:{components:{event:{},health:{value:2},swap:{},move:{},reduceHealthOnBlast:{},reduceHealthOnExplode:{},explodeOnCombinationNeighbor:{},explode:{},explodeOnBlast:{},preventExplodeOnSwap:{},emitOnDeathBeforeMove:{type:"random",target:"emitter",emitCount:1,entities:{}},destroyAfterEmit:{},shuffle:{},emitTarget:{layer:q.Entity.LAYER_UPPER},emitStage:{stages:(d={},d[Y.BEFORE_MOVE]=!0,d)},render:{type:"entity"},animation:{resolver:"health"},canBeCovered:{},preventCover:{},entityWrapperContent:{}}},candy:{components:{explode:{},explodeRetriever:{type:n.RetrieverFactoryKeys.RADIAL_SQUARE},explodeImmediate:{},render:{type:"entity"},animation:{},event:{}}},"cake-mini-topping":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},cheese:{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},multiplierHold:{},bossMultiplierComponent:{},multiplier:{},multiplierOnCombinationComponent:{},multiplierOnBlastComponent:{},canBeCovered:{},preventCover:{},dropAfterRemove:{passDropRange:[2,4],limitByGoal:!0}}},"cake-mini-syrup":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"cake-mini-biscuit":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"snowman-head":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"snowman-center":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},"snowman-bottom":{components:{event:{},preventWalkExplode:{},swap:{},move:{},explode:{},preventExplodeOnSwap:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnGround:{},render:{type:"entity"},animation:{},canBeCovered:{},preventCover:{}}},butterfly:{layer:q.Entity.LAYER_FLOOR,components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},animation:{},goalAnimation:{zIndexBeforeMove:!0},render:{type:"entity"},explode:{},explodeImmediate:{}}},candybox:{components:{event:{},health:{value:3},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},emitOnTurnEndAndExplode:{type:"candybox",target:"candybox",emitCount:3},explodeDeathEntity:{removeComponents:["emitOnTurnEndAndExplode"]},emitStage:{stages:(y={},y[Y.AFTER_WALK]=!0,y)},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"},animation:{resolver:"health"},preventCover:{},emitAnimation:{flyDuration:1}}},"cupcake-bottom":{layer:q.Entity.LAYER_DEFAULT,components:{event:{},preventWalkExplode:{},health:{value:1},reduceHealthOnExplode:{},recoveryHealthOnDeath:{},explode:{},explodeOnBlast:{},explodeOnEndTurn:{},explodeImmediateOnce:{},emitOnDeath:{type:"random",target:"emitter",emitCount:1,entities:{cupcake:{amount:1/0}}},emitTarget:{layer:q.Entity.LAYER_UPPER},emitStage:{stages:(f={},f[Y.BEFORE_MOVE]=!0,f)},render:{type:"entity"},animation:{},preventCover:{},static:{}}},cupcake:{layer:q.Entity.LAYER_UPPER,components:(h={event:{},preventWalkExplode:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER],components:["explodeOnBlast","explodeOnCombination","explodeOnEndTurn"],removeSelf:!1},health:{value:2},reduceHealthOnBlast:{},reduceHealthOnExplode:{},explode:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},explodeLayerOnRemove:{layers:[q.Entity.LAYER_DEFAULT]},render:{type:"entity"},animation:{resolver:"health"}},h[Ae.KeepGoalAfterCompleteComponent.KEY]={},h)},lollipop:{components:{event:{},swap:{},move:{},shuffle:{},group:{},health:{value:3},explodeOnCombinationNeighbor:{strategies:{currentGroup:{}}},explodeLayerOnExplode:{layers:[]},explodeLayerOnRemove:{layers:[q.Entity.LAYER_UPPER],force:!0},lock:{layers:[q.Entity.LAYER_UPPER],components:["explode"]},onExplodeCombinationNeighborChangeGroup:{},explodeImmediateOnceAfterChangeGroup:{},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity",decorators:["group"]},animation:{resolver:"health"},modifyEntityOnChangeGroup:{add:["explode","explodeOnDeath","explodeOnBlast","reduceHealthOnBlast","reduceHealthOnExplode"],remove:["onExplodeCombinationNeighborChangeGroup","inputHandler"]},preventWalkPath:{},preventCover:{}}},"boss-panda":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(g={},g[n.AudioTypeConfig.COLLECT]="bossPandaCollect",g)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},"boss-penguin":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(v={},v[n.AudioTypeConfig.COLLECT]="bossPandaCollect",v)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},"boss-kitty":{components:(_={event:{},preventWalkExplode:{},changeSkinBeforeCollectEntity:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(b={},b[n.AudioTypeConfig.COLLECT]="bossPandaCollect",b)}},_[oe.BossEntityDropComponent.KEY]={},_.goalAnimation={zIndexBeforeMove:!0},_.preventCover={},_)},"boss-raccoon":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(C={},C[n.AudioTypeConfig.COLLECT]="bossPandaCollect",C)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},"boss-owl":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(w={},w[n.AudioTypeConfig.COLLECT]="bossPandaCollect",w)},preventCover:{}}},"boss-mousy":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(S={},S[n.AudioTypeConfig.COLLECT]="bossPandaCollect",S)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},ladybug:{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER],components:["move","explodeOnBlast","explodeOnEndTurn","shuffle","swap","canBeReplacedByEmit","canBeReplacedByWalk","explodeOnGround","walk",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},preventWalkPath:{},preventCover:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombination:{},explode:{},health:{value:2},reduceHealthOnExplode:{},reduceHealthOnBlast:{},render:{type:"entity"},animation:{resolver:"health"},walk:{pathStrategyKey:ue.NeighborWalkPathStrategy.KEY,replaceStrategyKey:de.EmptyWalkReplaceStrategy.KEY,sort:Ce.RandomWalkSortStrategy.KEY,order:1},walkOnTurnEnd:{},zIndex:{value:8}}},coffeebean:{components:{event:{},swap:{},group:{id:n.COLORS.COFFEE_BEAN},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},canBeCovered:{},canBeReplacedByEmit:{},canBeReplacedByWalk:{},allowWalk:{}}},"bday-cake":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},cellHealth:{values:[2,2,2,2]},explode:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},render:{type:"entity"},animation:{},preventCover:{}}},"ladybug-house":{components:{event:{},preventWalkExplode:{},health:{value:3},randomHealth:{from:0,to:3},inputHandler:{disallowInputHandlers:["booster"]},reduceHealthOnExplode:{},recoveryHealthOnDeath:{},explode:{},explodeOnEndTurn:{},explodeImmediateOnce:{},emitOnDeath:{type:"random",target:"emitter",emitCount:1,entities:{ladybug:{amount:1/0}}},emitTarget:{layer:q.Entity.LAYER_UPPER},emitStage:{stages:(E={},E[Y.BEFORE_WALK]=!0,E)},render:{type:"entity"},animation:{resolver:"health"},audio:{sounds:{}},preventCover:{},static:{}}},mixer:{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},inputHandler:{disallowInputHandlers:["booster"]},explode:{},explodeOnEndTurn:{},explodeImmediateOnce:{},reduceHealthOnExplode:{},shuffleGridOnDeathOnTurnEnd:{},recoveryHealthOnDeath:{},animation:{},render:{type:"entity",decorators:["health"]},preventCover:{},static:{}}},peacock:{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},inputHandler:{disallowInputHandlers:["booster"]},animation:{},render:{type:"entity"},explode:{},explodeOnExplodeNeighbor:{},health:{value:1},reduceHealthOnExplode:{},emitMultiplierOnDeath:{count:3,amount:5},recoveryHealthOnDeath:{},preventCover:{},static:{}}},bubble:{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER],components:["move","explodeOnBlast","shuffle","swap","multiplier","canBeReplacedByEmit","canBeReplacedByWalk","walk",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},preventWalkPath:{},preventCover:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnCombination:{},explode:{},render:{type:"entity"},animation:{}}},"boss-angrybubble":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"entity",decorators:["health"]},multiplier:{enable:!1},explode:{},explodeOnCombinationNeighbor:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explodeOnBlast:{},explodeOnDeath:{},emitOnTurn:{type:"random",target:"random",emitCount:1,entities:{bubble:{amount:1/0}},state:n.TURN_STATES.FINISH,turnNumber:3},emitTarget:{layer:q.Entity.LAYER_UPPER,excludeEntityTypes:["bubble","boss-angrybubble"]},emitStage:{stages:(x={},x[Y.BEFORE_WALK]=!0,x)},animation:{},audio:{sounds:(A={},A[n.AudioTypeConfig.COLLECT]="bossPandaCollect",A)},addScoreOnValueReduce:{value:1e3,componentKey:ae.HealthComponent.KEY},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},"color-flower":{components:{preventWalkExplode:{},size:{rows:2,cols:2},health:{value:8},inputHandler:{disallowInputHandlers:["booster:cat","booster:multiplier"]},group:{},randomGroup:{groups:[n.COLORS.GREEN,n.COLORS.PINK,n.COLORS.VIOLET,n.COLORS.ORANGE,n.COLORS.WHITE,n.COLORS.BLUE,n.COLORS.BROWN,n.COLORS.PURPLE,n.COLORS.YELLOW]},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},postponeGoal:{},explodeOneCell:{},explodeOnCombinationNeighbor:{strategies:{currentGroup:{}}},onHealthReduceChangeGroup:{groups:[n.COLORS.GREEN,n.COLORS.PINK,n.COLORS.VIOLET,n.COLORS.ORANGE,n.COLORS.WHITE,n.COLORS.BLUE,n.COLORS.BROWN,n.COLORS.PURPLE,n.COLORS.YELLOW]},explodeOnDeath:{},explodeOnBlast:{},render:{type:"entity",decorators:["color-flower"]},animation:{},event:{},audio:{sounds:(O={},O[n.AudioTypeConfig.CHANGE_GROUP]="flowerChangeGroup",O)},preventCover:{},notReplaceByStartBooster:{}}},"boss-fox":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(R={},R[n.AudioTypeConfig.COLLECT]="bossPandaCollect",R)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},wall:{components:{event:{},preventWalkExplode:{},preventWalkPath:{},render:{type:"entity"},animation:{},preventCover:{},static:{},zIndex:{value:0},lockEmitInGridEdge:{}}},snail:{components:{event:{},explodeLayerOnRemove:{layers:[]},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},explodeOnDeath:{},render:{type:"entity"},animation:{resolver:"health"},health:{value:3,max:3},reduceHealthOnExplode:{},reduceHealthOnBlast:{},turnCountAfterExplode:{},recoveryHealthOnReachTurnCountAfterExplode:{recoveryStep:1,turnCountTarget:3},preventCover:{}}},"sweet-tooth":{layer:q.Entity.LAYER_DEFAULT,components:{event:{},preventWalkExplode:{},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"},animation:{},walk:{pathStrategyKey:ue.NeighborWalkPathStrategy.KEY,replaceStrategyKey:me.ReplaceWalkReplaceStrategy.KEY,sort:Ce.RandomWalkSortStrategy.KEY,order:2},walkOnTurnEnd:{},preventWalkPath:{},preventCover:{}}},machinegum:{components:{preventWalkExplode:{},size:{rows:2,cols:2},inputHandler:{disallowInputHandlers:["booster"]},health:{value:5},explode:{},explodeOnEndTurn:{},explodeImmediateOnce:{},reduceHealthOnExplode:{},recoveryHealthOnDeath:{},animation:{resolver:"health"},render:{type:"entity",decorators:["health"]},emitTarget:{layer:q.Entity.LAYER_LOWER,excludeEntityTypes:["bubble-violet","bubble-green","bubble-pink","bubble-white","bubble-blue","bubble-purple","bubble-yellow"]},emitStage:{stages:(P={},P[Y.BEFORE_WALK]=!0,P)},preventCover:{},static:{}}},"boss-chameleon":{components:{preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector",ye.ChameleonEntityRenderDecorator.KEY]},multiplier:{enable:!1},explode:{postpone:!0},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(k={},k[n.AudioTypeConfig.COLLECT]="bossPandaCollect",k)},event:{},preventCover:{}}},cotton:{layer:q.Entity.LAYER_UPPER,components:{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR],components:["move","explodeOnBlast","explodeOnCombination","explodeImmediate","shuffle","swap","multiplier","canBeReplacedByEmit","canBeReplacedByWalk","explodeOnEndTurn","group","combination","walk","lock","explodeOnGround",Se.ReplaceEntityOnTurnEndComponent.KEY],removeSelf:!1},preventWalkPath:{},preventCover:{},explode:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},explodeOnBlastNeighbor:{},render:{type:"entity"},emitByGroup:{type:"random",target:"cotton",emitCount:1,entities:{cotton:{amount:1/0}},groupKey:"cotton"},emitStage:{stages:(T={},T[Y.AFTER_WALK]=!0,T)},emitOnNonGroupExplode:{},emitTarget:{layer:q.Entity.LAYER_UPPER,excludeEntityTypes:["cotton"],includeEntityTypes:["entity-1","entity-2","entity-3","entity-4","entity-5","entity-6","entity-7","entity-8","entity-9","coffeebean","super-1","nut","cup","cookie-1","cookie-2","cookie-3","jellybear-violet","jellybear-green","jellybear-pink","jellybear-orange","jellybear-white","heart","cracker","cake-mini-biscuit","cake-mini-syrup","cake-mini-topping","lemon-blue","lemon-purple","lemon-yellow","snowman-head","snowman-center","snowman-bottom","fish-violet","fish-green","fish-pink","fish-orange","fish-white","parrot-violet","parrot-green","parrot-pink","parrot-orange","parrot-white","cheese","sweet-tooth","croissant-violet","croissant-green","croissant-pink","croissant-orange","croissant-white","hamster","lollipop","popcorn-violet","popcorn-green","popcorn-pink","popcorn-orange","popcorn-white","jarjam-violet","jarjam-green","jarjam-pink","jarjam-orange","jarjam-white","kitchen-timer"]},emitAnimation:{skipFlyAnimation:!0,fadeInDuration:1},animation:{},goalAnimation:{enable:!1},audio:{sounds:(I={},I[n.AudioTypeConfig.CHANGE_STATE+"-1"]="ribbon1",I[n.AudioTypeConfig.EXPLODE]="ribbon0",I)},zIndex:{value:7}}},hamster:{layer:q.Entity.LAYER_DEFAULT,components:{event:{},preventWalkExplode:{},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"},explode:{},explodeOnBlast:{},explodeOnCombinationNeighbor:{},lockOnExplode:{lockCreator:{type:"onExplode",lock:{layers:[q.Entity.LAYER_DEFAULT],components:["walk"]},unlockAfterExplode:{turnCount:1}}},health:{value:1/0},reduceHealthOnExplode:{},reduceHealthOnBlast:{},animation:{resolver:"lockWalk"},walk:{pathStrategyKey:we.RandomWalkPathStrategy.KEY,replaceStrategyKey:me.ReplaceWalkReplaceStrategy.KEY,sort:Ce.RandomWalkSortStrategy.KEY,order:2},walkOnTurnEnd:{},preventWalkPath:{},turnCountAfterExplode:{},removeNeighborsOnWalk:{asSquare:!0},preventCover:{}}},beehive:{layer:q.Entity.LAYER_DEFAULT,components:{event:{},preventWalkExplode:{},inputHandler:{disallowInputHandlers:["booster"]},reduceHealthOnExplode:{},recoveryHealthOnDeath:{},explode:{},explodeOnEndTurn:{},explodeImmediateOnce:{},emitOnDeathBeforeMove:{type:"random",target:"emitter",emitCount:1,entities:{bee:{amount:1/0}}},emitTarget:{layer:q.Entity.LAYER_UPPER},emitStage:{stages:(M={},M[Y.AFTER_WALK]=!0,M)},render:{type:"entity"},animation:{resolver:"health"},emitAnimation:{flyDuration:.5,linearFlight:!0,fadeInDuration:1,initialScale:.6},preventWalkPath:{},audio:{sounds:{}},preventCover:{},static:{}}},"empty-entity":{layer:q.Entity.LAYER_LOWER,components:{event:{},animation:{},render:{type:"entity"}}},"boss-piggy":{components:{event:{},preventWalkExplode:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(j={},j[n.AudioTypeConfig.COLLECT]="bossPiggyCollect",j)},goalAnimation:{zIndexBeforeMove:!0}}},"kitchen-timer":{components:{event:{},swap:{},explode:{},explodeOnCombinationNeighbor:{layers:[q.Entity.LAYER_UPPER,q.Entity.LAYER_DEFAULT]},explodeOnBlast:{},preventExplodeOnSwap:{},move:{},shuffle:{},render:{type:"counter",decorators:[De.KitchenTimerEntityRenderDecorator.KEY]},animation:{},addMovesOnExplode:{event:"explode"},preventCover:{}}},"pacman-track":{layer:q.Entity.LAYER_LOWER,components:{event:{},animation:{},inputHandler:{disallowInputHandlers:["booster"]},render:{type:"entity"},walkPath:{},track:{}}},"pacman-start":{components:{event:{},preventWalkExplode:{},preventWalkPath:{},render:{type:"entity"},inputHandler:{disallowInputHandlers:["booster"]},animation:{},startTrack:{},trackStorage:{},emitTarget:{layer:q.Entity.LAYER_DEFAULT},emitStage:{stages:(L={},L[Y.AFTER_WALK]=!0,L)},emitAnimation:{flyDuration:.5,linearFlight:!0,fadeInDuration:1,emitterZIndex:q.Entity.LAYER_UPPER+1},walkOnTrackEntityType:{type:"pacman"}}},"pacman-finish":{components:{event:{},preventWalkPath:{},render:{type:"entity"},inputHandler:{disallowInputHandlers:["booster"]},animation:{},finishTrack:{}}},pacman:{layer:q.Entity.LAYER_DEFAULT,components:{event:{},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},reduceHealthOnExplode:{},reduceHealthOnBlast:{},walkOnExplode:{},explodeNextOnTrackOnExplode:{},explodeSelfOnNextTrackFinish:{},walk:{pathStrategyKey:Be.PathWalkPathStrategy.KEY,replaceStrategyKey:Ge.EmptyNextTrackWalkReplaceStrategy.KEY,sort:Ce.RandomWalkSortStrategy.KEY,order:1},walkOnNextTrackEntityExplode:{},preventWalkPath:{},animation:{},goalAnimation:{zIndexBeforeMove:!0},render:{type:"entity"},walkOnTrack:{},health:{value:1/0},lockOnWalkFinish:{components:["health"],type:be.FailWalkInGridEdgeLockCreator.KEY}}},"boss-pinata":{components:{event:{},size:{rows:2,cols:2},render:{type:"entity",decorators:["health"]},multiplier:{enable:!1},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},explodeDeathEntity:{removeComponents:["emitOnTurnEndAndExplode"]},reduceHealthOnExplode:{},reduceHealthOnBlast:{},emitOnTurnEndAndExplode:{type:"random",target:"random",emitCount:1,entities:{candywrapper:{amount:1/0}}},emitStage:{stages:(F={},F[Y.AFTER_WALK]=!0,F)},emitAnimation:{flyDuration:1},emitTarget:{layer:q.Entity.LAYER_DEFAULT},animation:{},audio:{sounds:(D={},D[n.AudioTypeConfig.EMIT]="pinataEmit",D)}}},"boss-nutcracker":{components:{event:{},size:{rows:2,cols:2},render:{type:"collector",decorators:["collector"]},multiplier:{enable:!1},explode:{},preventWalkExplode:{},postponeExplode:{},inputHandler:{disallowInputHandlers:["booster"]},explodeOnCompletedGoal:{},goalCollector:{},animation:{},audio:{sounds:(B={},B[n.AudioTypeConfig.COLLECT]="bossPandaCollect",B)},goalAnimation:{zIndexBeforeMove:!0},preventCover:{}}},catinbox:{layer:q.Entity.LAYER_DEFAULT,components:{event:{},preventWalkExplode:{},preventWalkPath:{},preventCover:{},render:{type:"entity"},animation:{resolver:We.ToggleLockAnimationResolver.KEY},static:{},explode:{},explodeOnCombinationNeighbor:{},explodeOnBlast:{},toggleLockOnTurnEnd:{lockCreator:{type:"onTurnEnd",lock:{layers:[q.Entity.LAYER_DEFAULT],components:["explode"],removeSelf:!0}}},zIndex:{value:8}}}},patterns:[{type:"row-3",data:[[1,1,1]]},{type:"row-4",data:[[1,1,1,1]]},{type:"column-3",data:[[1],[1],[1]]},{type:"column-4",data:[[1],[1],[1],[1]]},{type:"column-5",data:[[1],[1],[1],[1],[1]]},{type:"square",data:[[1,1],[1,1]]},{type:"row-5",data:[[1,1,1,1,1]]}],superEntities:{"row-5":{1:"super-1",2:"super-1",3:"super-1",4:"super-1",5:"super-1",6:"super-1",7:"super-1",8:"super-1",9:"super-1",10:"super-1"},"column-5":{1:"super-1",2:"super-1",3:"super-1",4:"super-1",5:"super-1",6:"super-1",7:"super-1",8:"super-1",9:"super-1",10:"super-1"},square:{}},multiplierPatterns:{"row-3":1,"column-3":1,"row-4":2,"column-4":2,"row-5":1,"column-5":1,square:2},entityRetrieverCombinations:[{types:["super-1","super-1"],retriever:[Z.RetrieverFactory.RETRIEVER_ALL,Z.RetrieverFactory.RETRIEVER_SINGLE]}],score:{group:1e3,goalEntityType:{bee:3e3,nut:1e3},entityType:{"boss-kitty":1e4,"boss-panda":1e4,"boss-raccoon":1e4,"boss-owl":1e4,"boss-mousy":1e4,"boss-angrybubble":9e3,"bubble-yellow":1e3,"bubble-violet":1e3,"bubble-green":1e3,"bubble-pink":1e3,"bubble-white":1e3,"bubble-blue":1e3,"bubble-purple":1e3,"bday-cake":1e3,"cake-mini-topping":1e3,"cake-mini-syrup":1e3,"cake-mini-biscuit":1e3,"snowman-head":1e3,"snowman-center":1e3,"snowman-bottom":1e3,ladybug:3e3,butterfly:250,honeycomb:1e3,candywrapper:1e3,"cookie-1":1e3,"cookie-2":1e3,"cookie-3":1e3,cracker:1e3,cup:1e3,cupcake:1e3,strawberry:1e3,rabbit:1e3,"lemon-blue":100,"lemon-yellow":100,"lemon-purple":100,"croissant-violet":1e3,"croissant-green":1e3,"croissant-pink":1e3,"croissant-orange":1e3,"croissant-white":1e3,"popcorn-violet":1e3,"popcorn-green":1e3,"popcorn-pink":1e3,"popcorn-orange":1e3,"popcorn-white":1e3,"croissant-blue":1e3,"croissant-brown":1e3,"croissant-purple":1e3,"croissant-yellow":1e3,"bombribbons-violet":1e3,"bombribbons-green":1e3,"bombribbons-pink":1e3,"bombribbons-orange":1e3,"bombribbons-white":1e3}},starsCheckpoints:[.5,.75,1],boosters:["trowel","cat","cart","plusone"],bombEntities:n.naturalColors.map(function(e){return"bubble-"+K(e,1)[0].toLowerCase()}),parrotEntities:n.naturalColors.map(function(e){return"parrot-"+K(e,1)[0].toLowerCase()}),turnStateConfig:(G={},G[n.TURN_STATES.INPUT]=new Q.TurnStateSystemConfig({includes:[ne.InputSystem.STATE],excludes:[$.SwapSystem.STATE_SWAP,ee.ExplodeSystem.STATE,te.CombinationSystem.STATE],deps:[]}),G[n.TURN_STATES.SWAP]=new Q.TurnStateSystemConfig({includes:[$.SwapSystem.STATE_SWAP,ee.ExplodeSystem.STATE],excludes:[],deps:[]}),G[n.TURN_STATES.BOOSTER]=new Q.TurnStateSystemConfig({includes:[ne.InputSystem.STATE,ee.ExplodeSystem.STATE],excludes:[$.SwapSystem.STATE_SWAP],deps:[]}),G[n.TURN_STATES.RUNTIME]=new Q.TurnStateSystemConfig({includes:[ee.ExplodeSystem.STATE,te.CombinationSystem.STATE],excludes:[],deps:[],stop:!0}),G[n.TURN_STATES.FINISH]=new Q.TurnStateSystemConfig({includes:[],excludes:[$.SwapSystem.STATE_SWAP,ee.ExplodeSystem.STATE,te.CombinationSystem.STATE],deps:[n.TURN_STATES.SWAP,n.TURN_STATES.RUNTIME],stop:!0}),G[n.TURN_STATES.BOOSTER_FINISH]=new Q.TurnStateSystemConfig({includes:[],excludes:[$.SwapSystem.STATE_SWAP,ee.ExplodeSystem.STATE,te.CombinationSystem.STATE],deps:[n.TURN_STATES.BOOSTER],stop:!0}),G[n.TURN_STATES.END]=new Q.TurnStateSystemConfig({includes:[],excludes:[],deps:[n.TURN_STATES.FINISH]}),G[n.TURN_STATES.BOOSTER_END]=new Q.TurnStateSystemConfig({includes:[],excludes:[],deps:[n.TURN_STATES.BOOSTER_FINISH]}),G)},n.naturalColors.forEach(function(e){var t,o,a=K(e,2),r=a[0],i=a[1],c="candy-"+r.toLowerCase();n.Match3GameConfig.entities[c]={components:(t={event:{},group:{id:i},move:{},swap:{},swapMerge:{removeOneWithSameTag:!0},combination:{compareType:"byGroup"},explode:{},explodeRetriever:{type:n.RetrieverFactoryKeys.NEIGHBOR},explodeOnBlast:{},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explodeAffectNeighbors:{},animation:{},render:{type:"entity"},audio:{sounds:(o={},o[n.AudioTypeConfig.EMIT]="candyEmit",o)},goalAnimation:{enable:!1},shuffle:{}},t[se.TagComponent.KEY]={value:"candy"},t[re.ManageComponentsOnSwapComponent.KEY]={conditions:[{entityTypes:["candy-blue","candy-yellow","candy-purple","candy-brown","candy-green","candy-orange","candy-pink","candy-violet","candy-white"],addComponents:[{component:ie.ExplodeComponent,options:{retriever:{type:Z.RetrieverFactory.RETRIEVER_RADIAL_SQUARE,radius:1}}}]}]},t.canBeCovered={},t.canBeReplacedByWalk={},t.allowWalk={},t.notReplaceByStartBooster={},t.zIndex={value:7},t)},n.Match3GameConfig.superEntities.square[i]=c});var Ke=function(e,t,o,a){void 0===o&&(o=q.Entity.LAYER_DEFAULT),void 0===a&&(a=[]),n.naturalColors.filter(function(e){var t=K(e,2),n=(t[0],t[1]);return!a.includes(n)}).forEach(function(a){var r=K(a,2),i=r[0],c=r[1],s=e+"-"+i.toLowerCase(),p="function"==typeof t?t(i,c):t;n.Match3GameConfig.entities[s]={layer:o,components:Object.assign({},p,{group:{id:c}})}})};Ke("parrot",{entityPrefix:{value:"parrot"},event:{},swap:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{resolver:_e.DistanceToGridEdgeComponent.KEY},walkDirection:{direction:z.Vector2D.UP},skipAfterTurnAnimation:{},emitInGridEdge:{direction:le.EmitInGridEdgeComponentDirections.BOTTOM},emitAfterRemove:{passDropRange:[0,0],limitByGoal:!0},emitOnTurnEnd:{},walk:{pathStrategyKey:he.DirectionWalkPathStrategy.KEY,replaceStrategyKey:fe.SwapWalkReplaceStrategy.KEY,sort:ve.WalkDirectionWalkSortStrategy.KEY,order:3},preventWalkPath:{},walkOnTurnEnd:{},distanceToGridEdge:{},distanceToGridEdgeAnimation:{value:2,comparer:ge.DistanceToGridEdgeAnimationComponentComparer.LESS},lockOnFailWalkInGridEdge:{components:["move","swap","explodeOnCombination","group","shuffle","combination"],type:be.FailWalkInGridEdgeLockCreator.KEY},failWalkLoseGame:{},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("jellybear",{event:{},swap:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},canBeCovered:{},allowWalk:{},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("fish",{event:{},swap:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},flyOffOnDeath:{type:"fallDown",options:{offset:[90,250],rotation:-180,duration:.7,scale:1.2}},canBeCovered:{},allowWalk:{},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("croissant",{entityPrefix:{value:"croissant"},health:{},swap:{},move:{},shuffle:{},event:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},reduceHealthOnExplode:{},reduceHealthOnBlast:{},explode:{},explodeOnBlast:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnDeath:{},render:{type:"entity"},animation:{resolver:"health"},explodeAnimation:{waitPrevAnimation:!0},canBeCovered:{},allowWalk:{},dropAfterRemove:{passDropRange:[1,2],limitByGoal:!0,entityOptions:{health:{value:3}}},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("caramel",function(e){return{event:{},lock:{layers:[q.Entity.LAYER_DEFAULT,q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR],components:["lock","move","explodeOnCombination","explodeOnBlast","explodeOnGround","explodeImmediate","shuffle","swap","multiplier","combination","group","canBeReplacedByEmit","canBeReplacedByWalk","walk"],removeSelf:!1},preventWalkPath:{},preventCover:{},explode:{},explodeOnDeath:{},explodeOnBlast:{},explodeOnExplodeNeighbor:{strategies:{group:{groups:[e]}}},render:{type:"entity"},animation:{},goalAnimation:{enable:!1},zIndex:{value:7}}},q.Entity.LAYER_UPPER),Ke("bubble",{event:{},swap:{},counter:{value:5},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},reduceCounterOnTurn:{},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"counter",decorators:["counter"]},animation:{resolver:"counterRatio"}},q.Entity.LAYER_DEFAULT,[n.COLORS.BROWN,n.COLORS.ORANGE]),Ke("lemon",{entityPrefix:{value:"lemon"},event:{},swap:{},group:{id:n.COLORS.BLUE},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity",decorators:["goalAmount"]},animation:{},goalAmount:{value:-3},canBeCovered:{},dropAfterRemove:{passDropRange:[20,25],limitByGoal:!0}},q.Entity.LAYER_DEFAULT,[n.COLORS.VIOLET,n.COLORS.GREEN,n.COLORS.PINK,n.COLORS.ORANGE,n.COLORS.WHITE,n.COLORS.BROWN,n.COLORS.COFFEE_BEAN]),Ke("jarjam",{entityPrefix:{value:"jarjam"},event:{},move:{},swap:{},combination:{compareType:"byGroup"},explode:{retriever:{type:Z.RetrieverFactory.RETRIEVER_NEIGHBOR}},explodeOnCombination:{},explodeOnBlast:{},explodeBlastAsCombination:{},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explodeAffectNeighbors:{},explodeRetriever:{type:n.RetrieverFactoryKeys.NEIGHBOR},animation:{},render:{type:"entity"},audio:{sounds:(N={},N[n.AudioTypeConfig.EMIT]="candyEmit",N)},shuffle:{},canBeCovered:{},canBeReplacedByWalk:{},allowWalk:{},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("popcorn",{entityPrefix:{value:"popcorn"},event:{},swap:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},explode:{},explodeRetriever:{type:"randomCell",options:{explodeCount:2,validators:{components:{allow:[Fe.ExplodeOnCombinationComponent]},types:{disallow:["popcorn-*","super-1"]}}}},explodeBlastAsCombination:{},explodeAffectNeighbors:{},explodeOnCombination:{},explodeOnBlast:{},move:{},shuffle:{},render:{type:"entity"},animation:{},canBeCovered:{},canBeReplacedByWalk:{},allowWalk:{},notReplaceByStartBooster:{}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS),Ke("bombribbons",function(e,t){var o,a;return{counter:{min:0,value:3},swap:{},move:{},shuffle:{},event:{},combination:{compareType:"byGroup"},explodeLayerOnRemove:{layers:[q.Entity.LAYER_LOWER,q.Entity.LAYER_FLOOR]},reduceCounterOnTurn:{},explode:{},explodeOnBlast:{},explodeOnCombination:{},explodeAffectNeighbors:{},render:{type:"counter",decorators:["counter"]},animation:{},emitOnTurnEndAndCounterEnd:{type:"bombribbon",target:"bombribbon",emitCount:6,entities:(o={"blocker-1":{amount:5,options:{components:{health:{value:1}}}}},o["entity-"+t]={amount:1},o),state:n.TURN_STATES.FINISH,counterNumber:0},emitTarget:{layer:q.Entity.LAYER_UPPER,includeEntityTypes:["entity-1","entity-2","entity-3","entity-4","entity-5","entity-6","entity-7","entity-8","entity-9","coffeebean","super-1","jellybear-violet","jellybear-green","jellybear-pink","jellybear-orange","jellybear-white","heart","bubble-violet","bubble-green","bubble-pink","bubble-white","bubble-blue","bubble-purple","bubble-yellow","lemon-blue","lemon-purple","lemon-yellow","fish-violet","fish-green","fish-pink","fish-orange","fish-white","parrot-violet","parrot-green","parrot-pink","parrot-orange","parrot-white","croissant-violet","croissant-green","croissant-pink","croissant-orange","croissant-white","lollipop","popcorn-violet","popcorn-green","popcorn-pink","popcorn-orange","popcorn-white","jarjam-violet","jarjam-green","jarjam-pink","jarjam-orange","jarjam-white","kitchen-timer"]},emitStage:{stages:(a={},a[Y.BOMB_RIBBONS]=!0,a)}}},q.Entity.LAYER_DEFAULT,n.GOALS_COLORS);var Ue=n.Match3GameConfig.entities.world.components.entityTypeGroups.groups;try{for(var Ye=U(Object.entries(n.Match3GameConfig.entities)),ze=Ye.next();!ze.done;ze=Ye.next()){var qe=K(ze.value,2),Ze=qe[0],Xe=qe[1].components,Je=Ze.split("-"),Qe=Je[0],$e=null===(V=null==Xe?void 0:Xe.group)||void 0===V?void 0:V.id;Qe&&$e&&Je.length>1&&(Ue[Qe]||(Ue[Qe]={}),Ue[Qe][Ze]=$e)}}catch(et){W={error:et}}finally{try{ze&&!ze.done&&(H=Ye.return)&&H.call(Ye)}finally{if(W)throw W.error}}cc._RF.pop()},{"./AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./AnimationComponent (@tapclap.match-x.engine.components)":"AnimationComponent (@tapclap.match-x.engine.components)","./BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)":"BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)","./ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":"ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","./CombinationComponent (@tapclap.match-x.engine.components)":"CombinationComponent (@tapclap.match-x.engine.components)","./CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./ComponentClassRegister (@tapclap.match-x.engine.components)":"ComponentClassRegister (@tapclap.match-x.engine.components)","./DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./EmitInGridEdgeComponent (@tapclap.match-x.engine.components)":"EmitInGridEdgeComponent (@tapclap.match-x.engine.components)","./EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)","./EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./EntityClassRegister (@tapclap.match-x.engine.entities)":"EntityClassRegister (@tapclap.match-x.engine.entities)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)":"ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":"FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","./GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./InputSystem (@tapclap.match-x.engine.systems.input-system)":"InputSystem (@tapclap.match-x.engine.systems.input-system)","./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)":"KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)","./KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)":"KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","./ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)":"ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)","./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./Patterns (@tapclap.match-x.engine.chunk-classifier)":"Patterns (@tapclap.match-x.engine.chunk-classifier)","./RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":"RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","./RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":"RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)":"ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)","./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./RetrieverFactory (@tapclap.match-x.engine.retrievers)":"RetrieverFactory (@tapclap.match-x.engine.retrievers)","./SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./TagComponent (@tapclap.match-x.engine.components)":"TagComponent (@tapclap.match-x.engine.components)","./ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)":"ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)","./TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)":"TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)","./Vector2D (@tapclap.match-x.engine.models)":"Vector2D (@tapclap.match-x.engine.models)","./WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":"WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)"}],"Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"5fa2aVxyKZalZXMx0NiPJ3m","Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.Match3GameDevConsoleMenuGenerator=void 0;var r=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),i=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=function(e){function t(t){var n=e.call(this)||this;return n._sceneComponentInstance=t.sceneComponentInstance,n._keys=t.keys,n._sceneManager=t.sceneManager,n}return a(t,e),t.prototype.generate=function(){var e=this,t=this._sceneManager.getCurrentSceneComponent();if(t instanceof this._sceneComponentInstance&&"game"in t){var n=t.game,o=function(){n.world.setState(e._keys.winLoseSystem.state,{result:e._keys.winLoseSystem.win}),n.getSystem("pipeline").process()},a=function(t){void 0===t&&(t="outOfMoves"),n.world.setState(e._keys.winLoseSystem.state,{result:e._keys.winLoseSystem.lose,reason:t}),n.getSystem("pipeline").process()};return{setMoves:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0445\u043e\u0434\u044b",command:new i.InputCallbackDevConsoleCommand({placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0445\u043e\u0434\u043e\u0432",callback:function(e){n.setMoves(e),n.getSystem("pipeline").process()}})},win:{title:"\u0412\u044b\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c",closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:o})},winWithCandy:{title:"\u0412\u044b\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0441 \u0434\u043e\u043f\u0430\u0434\u0435\u043d\u0438\u0435\u043c \u043a\u043e\u043d\u0444\u0435\u0442",command:new i.InputCallbackDevConsoleCommand({placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043d\u0444\u0435\u0442",callback:function(t,o){var a=parseInt(t);if(Number.isInteger(a)||(a=5),a>0){n.getSystem(e._keys.movesReducingSystem.state).setMoves(a);var r=n.world.getComponent("goals");r.goals.forEach(function(e){return r.removeGoal(e)}),o.hide(),n.getSystem("pipeline").process()}}})},winWithStars:{title:"\u0412\u044b\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c (\u0437\u0432\u0435\u0437\u0434\u044b)",command:new i.InputCallbackDevConsoleCommand({callback:function(e,t){n.world.getEnabledComponent("stars").setValue(parseInt(e)),t.hide(),o()}})},winWithScores:{title:"\u0412\u044b\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c (\u043e\u0447\u043a\u0438)",command:new i.InputCallbackDevConsoleCommand({callback:function(t,a){var r=n.world.getEnabledComponent("score");r.setValue(parseInt(t)),n.world.setState(e._keys.scoreSystem.state,{prevValue:0,targetValue:r.targetValue,value:r.getValue()}),a.hide(),o()}})},lose:{title:"\u041f\u0440\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c",closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:function(){return a("outOfMoves")}})},loseBombExplode:{title:"\u041f\u0440\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e \u0431\u043e\u043c\u0431\u0430\u043c",closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:function(){return a("bombExplode")}})},loseParrotFailWalk:{title:"\u041f\u0440\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u043e \u043f\u043e\u043f\u0443\u0433\u0430\u044f\u043c",closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:function(){return a("parrotFailWalk")}})},shuffle:{title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0448\u0430\u0442\u044c",closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:function(){n.world.setState(e._keys.shuffleSystem.doState,{}),n.getSystem("pipeline").process()}})}}}return{}},t}(r.DevConsoleMenuGenerator);n.Match3GameDevConsoleMenuGenerator=s,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"}],"Matrix (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,c(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,e)})(e)}function a(){return(a=r()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&i(a,n.prototype),a}).apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}cc._RF.push(t,"390dbOoY0NY0aiug9aBrwEr","Matrix (@tapclap.match-x.engine.models)"),n.__esModule=!0,n.Matrix=void 0;var s=function(e){var t,n;function o(t,n,o){var a;void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=void 0),a=e.call(this)||this;for(var r=0;r<t;r++){for(var i=[],c=0;c<n;c++)o instanceof Function?i.push(o(r,c)):i.push(o);a.push(i)}return a}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o}(o(Array));n.Matrix=s,cc._RF.pop()},{}],"MatrixIterator (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"29952K6WupROoKuVT4QIrYx","MatrixIterator (@tapclap.match-x.engine.models)"),n.__esModule=!0,n.MatrixIterator=void 0;var a=function(){function e(e,t){void 0===t&&(t=[]),this._begin=e,this._dirs=t}var t,n;return t=e,(n=[{key:"begin",get:function(){return this._begin}},{key:"dirs",get:function(){return this._dirs}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.MatrixIterator=a,cc._RF.pop()},{}],"MatrixIteratorFactory (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";cc._RF.push(t,"73927Y6xGJYa6atVdYEWPRA","MatrixIteratorFactory (@tapclap.match-x.engine.models)"),n.__esModule=!0,n.MatrixIteratorFactory=void 0;var o=e("./MatrixIterator (@tapclap.match-x.engine.models)"),a=e("./Vector2D (@tapclap.match-x.engine.models)"),r=function(){function e(){}return e.createMoveIterator=function(e,t){if(e)switch(!0){case e.isEqual(a.Vector2D.DOWN):return new o.MatrixIterator(a.Vector2D.ZERO,[a.Vector2D.DOWN,a.Vector2D.RIGHT]);case e.isEqual(a.Vector2D.UP):return new o.MatrixIterator(new a.Vector2D(0,t.rows-1),[a.Vector2D.UP,a.Vector2D.RIGHT]);case e.isEqual(a.Vector2D.RIGHT):return new o.MatrixIterator(a.Vector2D.ZERO,[a.Vector2D.RIGHT,a.Vector2D.DOWN]);case e.isEqual(a.Vector2D.LEFT):return new o.MatrixIterator(new a.Vector2D(t.cols-1,0),[a.Vector2D.LEFT,a.Vector2D.DOWN])}throw new Error("Not found Array2DIterator for direction: "+e)},e.createInverseMoveIterator=function(t,n){return e.createMoveIterator(t.inverse(),n)},e.createDropIterator=function(e,t){if(e)switch(!0){case e.isEqual(a.Vector2D.DOWN):return new o.MatrixIterator(a.Vector2D.ZERO,[a.Vector2D.UP,a.Vector2D.RIGHT]);case e.isEqual(a.Vector2D.UP):return new o.MatrixIterator(new a.Vector2D(0,t.rows-1),[a.Vector2D.DOWN,a.Vector2D.RIGHT]);case e.isEqual(a.Vector2D.RIGHT):return new o.MatrixIterator(a.Vector2D.ZERO,[a.Vector2D.DOWN,a.Vector2D.LEFT]);case e.isEqual(a.Vector2D.LEFT):return new o.MatrixIterator(new a.Vector2D(t.cols-1,0),[a.Vector2D.DOWN,a.Vector2D.RIGHT])}throw new Error("Not found Array2DIterator for direction: "+e)},e.createCellIterator=function(e,t){if(e)switch(!0){case e.isEqual(a.Vector2D.DOWN):return new o.MatrixIterator(new a.Vector2D(t.col,t.row),[a.Vector2D.DOWN,a.Vector2D.ZERO]);case e.isEqual(a.Vector2D.UP):return new o.MatrixIterator(new a.Vector2D(t.col,t.row),[a.Vector2D.UP,a.Vector2D.ZERO]);case e.isEqual(a.Vector2D.RIGHT):return new o.MatrixIterator(new a.Vector2D(t.col,t.row),[a.Vector2D.RIGHT,a.Vector2D.ZERO]);case e.isEqual(a.Vector2D.LEFT):return new o.MatrixIterator(new a.Vector2D(t.col,t.row),[a.Vector2D.LEFT,a.Vector2D.ZERO])}throw new Error("Not found Array2DIterator for direction: "+e)},e}();n.MatrixIteratorFactory=r,cc._RF.pop()},{"./MatrixIterator (@tapclap.match-x.engine.models)":"MatrixIterator (@tapclap.match-x.engine.models)","./Vector2D (@tapclap.match-x.engine.models)":"Vector2D (@tapclap.match-x.engine.models)"}],"MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)":[function(e,t,n){"use strict";cc._RF.push(t,"ed4edNDiMlaC6/cmO7u8kQL","MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MemoryAuthStorage=void 0;var r=function(){function e(){this._state=new Set}return e.prototype.getAuthorizedProviders=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,Array.from(this._state)]})})},e.prototype.addAuthorizedProvider=function(e){return o(this,void 0,Promise,function(){return a(this,function(){return this._state.add(e),[2]})})},e.prototype.removeAuthorizedProvider=function(e){return o(this,void 0,Promise,function(){return a(this,function(){return this._state.delete(e),[2]})})},e}();n.MemoryAuthStorage=r,cc._RF.pop()},{}],"MenuWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"5f93cwNG3lFrrLZyfk9wFIO","MenuWindowLayoutComponent (scripts.windows.layouts)"),n.__esModule=!0,n.MenuWindowLayoutComponent=n.MenuControl=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),f=e("./ControlComponent (@tapclap.game-kit.ui.controls)");function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var b=cc._decorator,C=b.ccclass,w=b.property,S=(o=C("MenuControl"),a=w(),r=w(f.ControlComponent),o((s=_((c=function(){v(this,"key",s,this),v(this,"control",p,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=_(c.prototype,"control",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.MenuControl=S;var E=(l=w({type:[S],visible:!0}),C((u=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return v(t=e.call.apply(e,[this].concat(o))||this,"_controls",d,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=o.prototype;return a.setControlToggled=function(e,t){var n=this.getControl(e);n&&(n.toggled=t)},a.setControlLabel=function(e,t){var n=this.getControl(e);n&&(n.label=t)},a.getControl=function(e){var t=this._controls.find(function(t){return t.key===e});return t?t.control:null},a.setSocialState=function(){},a.setSocial=function(){},o}(y.WindowLayoutComponent),d=_(u.prototype,"_controls",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=u))||m);n.MenuWindowLayoutComponent=E,cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"MergeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"424ddhzEn1WJ6TLjGOEO1rA","MergeComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MergeComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=(void 0===t?{}:t).entityType,a=void 0===o?"":o;return(n=e.call(this)||this)._entityType=a,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"entityType",get:function(){return this._entityType}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MergeComponent=r,r.KEY="merge",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MergePartComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"464b5X8JbZVz7se/iZBuSXn","MergePartComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MergePartComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="mergePart",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MergePartComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"Message (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"2294eydBhNZd4MBnPD+rfrg","Message (@tapclap.game-kit.message-center)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Message=void 0;var o=function(){function e(e){var t=e.userFrom,n=e.userTo,o=e.type,a=e.updatedAt;this._userFrom=t,this._userTo=n,this._type=o,this._updatedAt=a}return Object.defineProperty(e.prototype,"id",{get:function(){return this._userFrom+":"+this._userTo+":"+this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userFrom",{get:function(){return this._userFrom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userTo",{get:function(){return this._userTo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),e}();n.Message=o,cc._RF.pop()},{}],"MessageCenter (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"612faSkMGZU84HxwodDJi/w","MessageCenter (@tapclap.game-kit.message-center)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenter=void 0;var a=e("./MessageRequest (@tapclap.game-kit.message-center)"),r=function(){function e(e){var t=e.messageService,n=e.messageHandler;this._messageService=t,this._messageHandler=n,this._messages=new Set}return e.prototype._fetch=function(){var e=this;return Promise.resolve().then(function(){return e._messageService.getMessages()}).then(function(t){return e._messages=new Set(t)}).then(function(){return Promise.resolve()})},e.prototype._check=function(e){var t=this,n=e.filter(function(e){return!t._messages.has(e)});return n.length>0?Promise.reject("Not found messages: "+n.map(function(e){return e.id})):Promise.resolve()},e.prototype._createRequest=function(e,t){if(0===e.length)return Promise.reject("Messages array is empty");var n=o(t?["userFrom","userTo"]:["userTo","userFrom"],2),r=n[0],i=n[1],c=e[0][r],s=e[0].type;return e.find(function(e){return e[r]!==c||e.type!==s})?Promise.reject("Messages is invalid for request"):Promise.resolve(new a.MessageRequest({userId:c,type:s,users:e.map(function(e){return e[i]})}))},e.prototype._handle=function(e){return this._messageHandler?this._messageHandler.handle(e):Promise.resolve()},e.prototype._remove=function(e){var t=this;return e.forEach(function(e){return t._messages.delete(e)}),Promise.resolve()},e.prototype.init=function(){return this._fetch()},e.prototype.getMessages=function(){return Array.from(this._messages.values())},e.prototype.getLimits=function(e,t){return this._messageService.getLimits(e,t)},e.prototype.send=function(e){var t=this;return Promise.resolve().then(function(){return t._createRequest(e,!0)}).then(function(e){return t._messageService.send(e)})},e.prototype.read=function(e){var t=this;return Promise.resolve().then(function(){return t._check(e)}).then(function(){return t._createRequest(e,!1)}).then(function(n){return Promise.resolve().then(function(){return t._handle(e)}).then(function(){return t._messageService.read(n)}).then(function(){return t._remove(e)})})},e}();n.MessageCenter=r,cc._RF.pop()},{"./MessageRequest (@tapclap.game-kit.message-center)":"MessageRequest (@tapclap.game-kit.message-center)"}],"MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"1632aHrCrBaiaRBx8ZZaJkp","MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenterDevConsoleMenuGenerator=void 0;var r=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),i=function(e){function t(t){var n,o=e.call(this)||this;return o._gateway=t.gateway,o._path=null!==(n=t.path)&&void 0!==n?n:"/messages/reset",o}return a(t,e),t.prototype.generate=function(){var e=this;return{resetFromMe:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u043c\u0435\u043d\u044f",closeBefore:!0,command:new r.CallbackDevConsoleCommand({callback:function(){return e._gateway.delete(e._path,{target:"from"})}})},resetToMe:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043c\u043d\u0435",closeBefore:!0,command:new r.CallbackDevConsoleCommand({callback:function(){return e._gateway.delete(e._path,{target:"to"})}})}}},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.MessageCenterDevConsoleMenuGenerator=i,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MessageCenterLayoutComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"379f23nWbVXyqkD3/3b88P6","MessageCenterLayoutComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenterLayoutComponent=void 0;var i=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),c=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),s=e("./OrientationNodeComponent (scripts.responsive)"),p=e("./TabComponent (scripts.views.message-center)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._content=null,t._tabButtonPrefab=null,t._tabButtonsContainer=null,t._currentTabKey="",t._defaultTabKey="",t._tabOptions={},t._tabLayouts={},t._tabButtons={},t._adapters={},t}return a(t,e),t.prototype.setAdapter=function(e,t){this._adapters[e]=t},t.prototype.initialize=function(t){var n=this;e.prototype.initialize.call(this,t),this._defaultTabKey=t.defaultTabKey;var o=function(e){a._tabOptions[e]=t.tabs[e];var o=t.tabs[e],r=cc.instantiateFrom(t.tabsButtonPrefab.prefab),i=r.getComponent(c.ButtonControlComponent),s=r.getComponent(p.TabComponent),l=a._getTabButtonsContainer();i.label=o.label.toString(),i.icon=o.icon,s.setBadgeActivity(o.badge),l.addChild(r),i.events.on(c.ButtonControlComponent.EVENT_CLICK,function(){i.toggled=!0,n._currentTabKey!==e&&n.setActiveTab(e)}),a._tabButtons[e]=i},a=this;for(var r in t.tabs)o(r)},t.prototype.initializeTabs=function(e){void 0===e&&(e=this._defaultTabKey);var t=[];for(var n in this._tabOptions){var o=this._tabOptions[n],a=this._tabLayouts[n]=this._instantiateLayout(this._content,{prefab:o.prefab,adapter:this._adapters[n],adapterOptions:{contentConfig:o.content,holderPrefab:o.contentHolder.prefab}});this._changeTabActivity(n,!1),t.push(a.initAdapter())}return this.setActiveTab(null!=e?e:this._defaultTabKey),Promise.all(t).then(function(){return Promise.resolve()})},t.prototype.setActiveTab=function(e){this._currentTabKey!==e&&(this._changeTabActivity(this._currentTabKey,!1),this._changeTabActivity(e,!0),this._currentTabKey=e)},t.prototype._changeTabActivity=function(e,t){this._tabLayouts[e]&&this._tabButtons[e]&&(this._tabLayouts[e].node.active=t,this._tabButtons[e].toggled=t)},t.prototype._getTabButtonsContainer=function(){return this._tabButtonsContainer.getOrientationConfig()},r([u({type:cc.Node,visible:!0})],t.prototype,"_content",void 0),r([u({type:cc.Prefab,visible:!0})],t.prototype,"_tabButtonPrefab",void 0),r([u({type:s.OrientationNodeComponent,visible:!0})],t.prototype,"_tabButtonsContainer",void 0),r([m],t)}(i.WindowLayoutComponent);n.MessageCenterLayoutComponent=d,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./OrientationNodeComponent (scripts.responsive)":"OrientationNodeComponent (scripts.responsive)","./TabComponent (scripts.views.message-center)":"TabComponent (scripts.views.message-center)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"MessageCenterSceneBadgeComponent (scripts.badges)":[function(e,t,n){"use strict";cc._RF.push(t,"e9aa1kGqe5f8I8dsq9TJg6h","MessageCenterSceneBadgeComponent (scripts.badges)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenterSceneBadgeComponent=void 0;var i=e("./Inject (@tapclap.utils-js.inject)"),c=e("./SceneBadgeComponent (scripts.badges)"),s=e("./DIConfig (scripts.config)"),p=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._getActivity=function(){return this._messageCenter.getMessages().length>0},r([i.Inject(s.DIConfig.MessageCenter)],t.prototype,"_messageCenter",void 0),r([p],t)}(c.SceneBadgeComponent);n.MessageCenterSceneBadgeComponent=l,cc._RF.pop()},{"./DIConfig (scripts.config)":"DIConfig (scripts.config)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./SceneBadgeComponent (scripts.badges)":"SceneBadgeComponent (scripts.badges)"}],"MessageCenterScrollAdapter (scripts.windows.scroll-adapters)":[function(e,t,n){"use strict";cc._RF.push(t,"aae72n02M5ZAKdtN+sfwoVT","MessageCenterScrollAdapter (scripts.windows.scroll-adapters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenterScrollAdapter=void 0;var c=e("./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)"),s=e("./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),p=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cache=[],t._contentConfig=[],t._items=[],t}return a(t,e),t.prototype.setContentConfig=function(e){this._contentConfig=e},t.prototype.setHolderPrefab=function(e){this._holderPrefab=e},t.prototype._onCreateViewHolder=function(){return cc.instantiateFrom(this._holderPrefab).getComponent(s.RecyclerScrollViewHolderComponent)},t.prototype._onBindViewHolder=function(e,t){this._getContent(t).setParent(e.node)},t.prototype._getContent=function(e){return this._getCachedContent(e)||this._createContent(e)},t.prototype._createContent=function(e){var t=this._items[e].prefabKey,n=this._getItemConfig(t).prefab,o=cc.instantiateFrom(n);return this._initContent(o,e),this._cacheContent(o,e),o},t.prototype._getCachedContent=function(e){return this._cache[e]},t.prototype._cacheContent=function(e,t){this._cache[t]=e},t.prototype._getItemConfig=function(e){return void 0===e&&(e=t.HOLDER_PREFAB_KEY_COMMON),this._contentConfig.find(function(t){return t.type===e})},t.prototype._initContent=function(e,t){var n=this;e.getComponent(p.MessageItemComponent).init(this._items[t]),e.on(p.MessageItemComponent.EVENT_KEY,function(e){var t=e.event,o=i(e,["event"]);return n.emit(t,r(r({},o),{adapter:n}))})},t.prototype._getHolderPositionByItemData=function(e){return this._items.findIndex(function(t){return t.data===e})},t.prototype._findItemByData=function(e){return this._items.find(function(t){return t.data===e})},t.prototype.removeItem=function(e){var t=this._getHolderPositionByItemData(e);if(t>-1){var n=this._cache[t].parent;if(n){var o=n.getComponent(s.RecyclerScrollViewHolderComponent);o&&(this._items.splice(t,1),this._cache.splice(t,1),this.emit(c.RecyclerScrollAdapter.EVENT_ITEM_REMOVED,o.getLayoutPosition()))}}},t.prototype.getItemCount=function(){return this._items.length},t.prototype.reset=function(){this._cache=[]},t.prototype.onViewAttached=function(){},t.prototype.onViewDetached=function(e){e.node.removeAllChildren(!1)},t.prototype.onViewRecycled=function(){},t.prototype.init=function(){return Promise.resolve()},t.HOLDER_PREFAB_KEY_COMMON="common",t}(c.RecyclerScrollAdapter);n.MessageCenterScrollAdapter=l,cc._RF.pop()},{"./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)","./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)":"RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)","./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"}],"MessageCenterWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"cafcdWqLM9Xeqjq1XNrv6kM","MessageCenterWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MessageCenterWindowAction=n.FromOfferMessageCenterWindowCurrentTabResolver=n.MessageCenterWindowCurrentTabResolver=void 0;var r=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),i=function(){};n.MessageCenterWindowCurrentTabResolver=i;var c=function(e){function t(t){var n=e.call(this)||this;return n._messageCenter=t.messageCenter,n._messageTypes=t.messageTypes,n._tabKey=t.tabKey,n}return a(t,e),t.prototype.resolve=function(){var e=this;if(this._messageCenter.getMessages().filter(function(t){var n=t.type;return e._messageTypes.includes(n)}).length>0)return this._tabKey},t}(i);n.FromOfferMessageCenterWindowCurrentTabResolver=c;var s=function(e){function t(t){var n,o=e.call(this,t)||this;return o._eventHandlers=[],o._currentTabResolvers={},o._adapters=t.adapters,o._messageCenter=t.messageCenter,o._eventHandlers=t.eventHandlers,o._badgeRefresher=t.badgeRefresher,o._currentTabResolvers=null!==(n=t.currentTabResolvers)&&void 0!==n?n:{},o._currentTabResolverKey=t.currentTabResolverKey,o}return a(t,e),t.prototype._configureWindow=function(e){var t,n=this,o=e.getLayout("content");for(var a in this._adapters){var r=this._adapters[a];o.setAdapter(a,r);var i=function(e){var t=c._eventHandlers[e];r.on(e,function(e){t.handle(e)})},c=this;for(var s in this._eventHandlers)i(s)}var p=null===(t=this._currentTabResolvers[this._currentTabResolverKey])||void 0===t?void 0:t.resolve();o.initializeTabs(p).then(function(){n._badgeRefresher.refresh()}),this._caller&&e.events.on("invite",function(){return n._caller.run("invite").catch(function(){})})},t}(r.WindowAction);n.MessageCenterWindowAction=s,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"MessageEventHandler (scripts.message-center.event-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"ed066C9po5d04Nevly7maK3","MessageEventHandler (scripts.message-center.event-handlers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageEventHandler=void 0;n.MessageEventHandler=function(){},cc._RF.pop()},{}],"MessageHandler (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"2c04eOFKbVb6aayy4R/FaOk","MessageHandler (@tapclap.game-kit.message-center)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;n.MessageHandler=function(){},cc._RF.pop()},{}],"MessageItemComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"dd8feTK2wFQZIKPKxvZ8p8a","MessageItemComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageItemComponent=void 0;var c=e("./ControlComponent (@tapclap.game-kit.ui.controls)"),s=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),p=e("./UIElement (scripts.common.components)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elements=[],t._label=null,t._buttonsContainer=null,t._controls={},t._data={},t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"buttonsContainer",{get:function(){return this._buttonsContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{set:function(e){this._label&&e&&this._label.setString(e.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"windowEvents",{set:function(e){this._windowEvents=e},enumerable:!1,configurable:!0}),t.prototype.init=function(e){var t=e.data,n=e.state,o=e.states;this._data=t,this._states=o,this.setState(n)},t.prototype.setState=function(e){var t=this;this._elements.forEach(function(n){var o=n.element,a=n.key;return o.active=t._states[e].elements.includes(a)}),this._createControls(this._states[e].controls)},t.prototype.setDisabledControl=function(e,t){this._getControl(e).setDisabled(t)},t.prototype.setInteractableControl=function(e,t){this._getControl(e).setInteractable(t)},t.prototype.setGrayscaleControl=function(e,t){this._getControl(e).setGrayscale(t)},t.prototype.setStyleControl=function(e,t){this._getControl(e).style=t},t.prototype.setLabelControl=function(e,t){this._getControl(e).label=t},t.prototype._getControl=function(e){return this._controls[e]},t.prototype._createControls=function(e){var t,o,a=this;this._buttonsContainer.removeAllChildren();var r=function(e){var t=e.key,o=e.prefab,r=e.grayscale,i=e.events,p=void 0===i?{}:i,l=cc.instantiateFrom(o),m=l.getComponent(c.ControlComponent);if(m.initialize(e),m.setGrayscale(r),e.events){var u=function(e){m.events.on(e,function(){a.node.emit(n.EVENT_KEY,{event:p[e],data:a._data,view:a})})};for(var d in p)u(d)}s._buttonsContainer.height=Math.max(s._buttonsContainer.height,l.height),s._buttonsContainer.width=Math.max(s._buttonsContainer.width,l.width),s._controls[t]=m,s._buttonsContainer.addChild(l)},s=this;try{for(var p=i(e),l=p.next();!l.done;l=p.next())r(l.value)}catch(m){t={error:m}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(t)throw t.error}}},t.STATE_DEFAULT="default",t.STATE_DISABLED="disabled",t.EVENT_KEY="action",r([u({type:[p.UIElement],visible:!0})],t.prototype,"_elements",void 0),r([u({type:s.I18NLabel,visible:!0})],t.prototype,"_label",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_buttonsContainer",void 0),n=r([m],t)}(cc.Component);n.MessageItemComponent=d,cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./UIElement (scripts.common.components)":"UIElement (scripts.common.components)"}],"MessageLimits (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"63f96wbPxZZQYfSo8Dehpu9","MessageLimits (@tapclap.game-kit.message-center)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageLimits=void 0;var a=function(){function e(e){this._limits={},this._limits=Object.entries(e).reduce(function(e,t){var n=o(t,2),a=n[0],r=n[1],i=r.messageCount,c=r.users;return e[a]={messageCount:i,users:new Set(c)},e},{})}return e.prototype.isMessageAvailableFor=function(e,t){var n=this._limits[e];return!!n&&n.messageCount>0&&n.users.has(t)},e.prototype.isMessageAvailable=function(e){var t=this._limits[e];return!!t&&t.messageCount>0&&t.users.size>0},e.prototype.getMessageCount=function(e){var t=this._limits[e];return t?t.messageCount:0},e.prototype.getMessageUsers=function(e){var t=this._limits[e];return t?Array.from(t.users):[]},e}();n.MessageLimits=a,cc._RF.pop()},{}],"MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"341c1VgEsBcCoNMRhJ2V2lD","MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MessagePublicationResolver=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._i18n=t.i18n,n._keys=t.keys||[],n}return a(t,e),t.prototype.resolve=function(e,t){var n,o,a={};try{for(var i=r(this._keys),c=i.next();!c.done;c=i.next()){var s=c.value;a[s]=this._i18n.t([e,s].join("."),t)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},t}(e("./PublicationResolver (@tapclap.game-kit.publication-manager)").PublicationResolver);n.MessagePublicationResolver=i,cc._RF.pop()},{"./PublicationResolver (@tapclap.game-kit.publication-manager)":"PublicationResolver (@tapclap.game-kit.publication-manager)"}],"MessageRequest (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"bf642Kjm4BYiLMBFSEiR08f","MessageRequest (@tapclap.game-kit.message-center)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageRequest=void 0;var o=function(){function e(e){var t=e.userId,n=e.type,o=e.users;this._userId=t,this._type=n,this._users=o}return Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"users",{get:function(){return this._users},enumerable:!1,configurable:!0}),e.prototype.isValid=function(){return!!this._userId&&!!this._type&&this._users.length>0},e.prototype.toJSON=function(){return{userId:this.userId,type:this.type,users:this.users}},e}();n.MessageRequest=o,cc._RF.pop()},{}],"MessageService (@tapclap.game-kit.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"26ca4s1x+hYkZGmlEqy1oAd","MessageService (@tapclap.game-kit.message-center)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MessageService=void 0;n.MessageService=function(){},cc._RF.pop()},{}],"MessagesScrollAdapter (scripts.windows.scroll-adapters)":[function(e,t,n){"use strict";cc._RF.push(t,"abf63OT09BWR5mGSzq8/YL6","MessagesScrollAdapter (scripts.windows.scroll-adapters)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.MessagesScrollAdapter=void 0;var c=e("./MessageCenterScrollAdapter (scripts.windows.scroll-adapters)"),s=e("./CandyvalleyMessageHandler (scripts.message-center)"),p=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),l=e("./ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)"),m=function(e){function t(t){var n=t.messageCenter,o=t.chartModuleResolver,a=t.attemptsModuleResolver,r=e.call(this)||this;return r._messageCenter=n,r._chartModule=o.get(),r._attempts=a.get(),r._messages=[],r._chartItemsMap=new Map,r}return a(t,e),t.prototype._retrieveChartItemsMap=function(){var e=this;return Promise.resolve().then(function(){return e._chartModule.getChartBuilder().setAvailableCurrentUser(!1).build()}).then(function(t){e._chartItemsMap=new Map(t.map(function(e){return[e.userInfo.id,e]}))})},t.prototype._initMessageCenter=function(){return this._messageCenter.init()},t.prototype.init=function(){var e=this;return Promise.all([this._retrieveChartItemsMap(),this._initMessageCenter()]).then(function(){return Promise.resolve()}).then(function(){var t;e._cache=[],e._items=[];var n=e._preparePinnedItemData(),o=e._prepareRegularItemsData();n&&e._items.push(n),o.length>0&&(t=e._items).push.apply(t,i(o))})},t.prototype._preparePinnedItemData=function(){var e=this,n=this._attempts.getState(),o=n.getMaxAttempts()-n.getCountAttempts(),a=this._messageCenter.getMessages().filter(function(t){return t.type===s.CandyvalleyMessageHandler.MESSAGE_RESPONSE&&e._chartItemsMap.get(t.userFrom)}).map(function(t){var n;return{message:t,avatar:null===(n=e._chartItemsMap.get(t.userFrom))||void 0===n?void 0:n.userInfo.photo}});if(a.length>0)return{type:"pinned",prefabKey:t.HOLDER_PREFAB_KEY_PINNED,states:this._getItemConfig(t.HOLDER_PREFAB_KEY_PINNED).states,state:o>0?p.MessageItemComponent.STATE_DEFAULT:p.MessageItemComponent.STATE_DISABLED,data:{messages:a}}},t.prototype._prepareRegularItemsData=function(){var e=this,t=this._messageCenter.getMessages().filter(function(t){return t.type===s.CandyvalleyMessageHandler.MESSAGE_REQUEST&&e._chartItemsMap.get(t.userFrom)}).map(function(t){return e._prepareRegularItemData(t,e._chartItemsMap)});return t.length>0?t:[]},t.prototype._prepareRegularItemData=function(e,n){var o=n.get(e.userFrom);return{type:"regular",prefabKey:t.HOLDER_PREFAB_KEY_COMMON,states:this._getItemConfig(t.HOLDER_PREFAB_KEY_COMMON).states,state:p.MessageItemComponent.STATE_DEFAULT,data:{message:e,user:{label:o.userInfo.name,avatar:o.userInfo.photo,level:o.meta.progress.value}}}},t.prototype.updateItem=function(e){if("pinned"===this._findItemByData(e).type){var t=this._getHolderPositionByItemData(e),n=this._cache[t].getComponent(l.ReceivingLivesMessageItemComponent),o=this._preparePinnedItemData();o?(o.data.messages.length>0&&n.setData(o.data),this._items[t]=o):this.removeItem(e)}},t.HOLDER_PREFAB_KEY_PINNED="pinned",t}(c.MessageCenterScrollAdapter);n.MessagesScrollAdapter=m,cc._RF.pop()},{"./CandyvalleyMessageHandler (scripts.message-center)":"CandyvalleyMessageHandler (scripts.message-center)","./MessageCenterScrollAdapter (scripts.windows.scroll-adapters)":"MessageCenterScrollAdapter (scripts.windows.scroll-adapters)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)","./ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)":"ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)"}],"MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"0119dQOWrhSzoMOOk/bVo5v","MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MetaActionDevConsoleMenuGenerator=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._metaGame=null,t}return a(t,e),t.prototype.setMetaGame=function(e){this._metaGame=e},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.MetaActionDevConsoleMenuGenerator=r,cc._RF.pop()},{"./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"9a97ctv67JRD5M6Qc4/GLV2","MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MetaActionsDevConsoleMenuGenerator=void 0;var r=function(e){function t(t){var n=t.metaGameManager,o=t.generators,a=void 0===o?{}:o,r=e.call(this)||this;return r._metaGameManager=n,r._generators=a,r}return a(t,e),t.prototype.generate=function(){var e=this._metaGameManager.getCurrentMetaGame();if(e){var t=this._generators[e.key];if(t)return t.setMetaGame(e),t.generate()}return{}},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.MetaActionsDevConsoleMenuGenerator=r,cc._RF.pop()},{"./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MetaEvent (scripts.meta-events.event)":[function(e,t,n){"use strict";cc._RF.push(t,"057e8KrN3xQ0pAztjI9MtSq","MetaEvent (scripts.meta-events.event)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEvent=void 0;var r=e("./TimeDuration (@tapclap.utils-js.time-duration)"),i=function(e){function t(t){var n=t.key,o=t.duration,a=t.cooldown,r=t.startedAt,i=t.availabilityProgress,c=void 0===i?0:i,s=e.call(this)||this;return s._startedAt=null,s._key=n,s._duration=o,s._cooldown=a,s._startedAt=r,s._availabilityProgress=c,s}return a(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedAt",{get:function(){return this._startedAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftTimeDuration",{get:function(){return new r.TimeDuration((this.finishingAt.getTime()-Date.now())/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finishingAt",{get:function(){return new Date(this._startedAt.getTime()+this._duration.getMilliseconds())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expirationAt",{get:function(){return new Date(this.finishingAt.getTime()+this._cooldown.getMilliseconds())},enumerable:!1,configurable:!0}),t.prototype.init=function(){return this._inited=!0,Promise.resolve()},t.prototype.run=function(){return this._setState(t.STATE_ACTIVE),this._startedAt=new Date,Promise.resolve()},t.prototype.isExpired=function(){return!!this._startedAt&&new Date>this.expirationAt},t.prototype.isFinished=function(){if(this._startedAt){var e=new Date;return e>this.finishingAt&&e<this.expirationAt}return!1},t.prototype.isActive=function(){if(this._startedAt){var e=new Date;return e>=this._startedAt&&e<this.finishingAt}return!1},t.prototype.isReady=function(){return this.isExpired()},t.prototype.update=function(){this._inited&&(this._state===t.STATE_ACTIVE&&this.isFinished()&&(this._setState(t.STATE_FINISHED),this.emit(t.EVENT_FINISH,this)),this._state===t.STATE_FINISHED&&this.isExpired()&&(this._setState(t.STATE_EXPIRE),this.emit(t.EVENT_EXPIRE,this)),this._state===t.STATE_READY&&this.isAvailable()&&this.emit(t.EVENT_READY,this))},t.prototype._setState=function(e){this._state=e},t.EVENT_READY="ready",t.EVENT_COMPLETE="complete",t.EVENT_FINISH="finish",t.EVENT_EXPIRE="expire",t.STATE_READY=0,t.STATE_ACTIVE=1,t.STATE_COMPLETED=2,t.STATE_FINISHED=3,t.STATE_EXPIRE=4,t}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.MetaEvent=i,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"MetaEventBranch (scripts.meta-events.branch)":[function(e,t,n){"use strict";cc._RF.push(t,"a9d77V+qxdSJqcd2eAUgy86","MetaEventBranch (scripts.meta-events.branch)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventBranch=void 0;var o=e("./MetaEvent (scripts.meta-events.event)"),a=function(){function e(e){var t=e.events,n=e.startAt,o=e.repeat;this._activeEvent=null,this._events=t,this._startAt=n,this._repeat=null!=o&&o}return e.prototype.init=function(){return this._process()},e.prototype.update=function(){this._events.forEach(function(e){return e.update()})},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!1,configurable:!0}),e.prototype._initEvent=function(e){var t=this;return e.once(o.MetaEvent.EVENT_READY,this._onEventReady.bind(this)),e.once(o.MetaEvent.EVENT_COMPLETE,this._onEventComplete.bind(this)),e.once(o.MetaEvent.EVENT_EXPIRE,this._onEventExpire.bind(this)),e.once(o.MetaEvent.EVENT_FINISH,this._onEventFinish.bind(this)),e.init().then(function(){if(e.isAvailable())return t._activeEvent=e,e.run()})},e.prototype._onEventReady=function(){if(!this._activeEvent)return this._process()},e.prototype._onEventComplete=function(){return this._process()},e.prototype._onEventExpire=function(){return this._process()},e.prototype._onEventFinish=function(){return this._process()},e.prototype._process=function(){var e=this._getActualEvent();return e?this._initEvent(e):Promise.resolve()},e}();n.MetaEventBranch=a,cc._RF.pop()},{"./MetaEvent (scripts.meta-events.event)":"MetaEvent (scripts.meta-events.event)"}],"MetaEventBranchDataHandler (scripts.utils.data-handler)":[function(e,t,n){"use strict";cc._RF.push(t,"1ae9ahfHqNUaZcLMI2OqdBW","MetaEventBranchDataHandler (scripts.utils.data-handler)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventBranchDataHandler=void 0;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t=e.startAt,n=(e.type,i(e,["startAt","type"]));return r(r({},n),{startAt:new Date(t)})},t}(e("./DataHandler (scripts.utils.data-handler)").DataHandler);n.MetaEventBranchDataHandler=c,cc._RF.pop()},{"./DataHandler (scripts.utils.data-handler)":"DataHandler (scripts.utils.data-handler)"}],"MetaEventConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"cf08cY7Hp9aB7rQnJe1oXHy","MetaEventConfig (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventConfig=void 0;var o=e("./DataStorage (@tapclap.game-kit.data-storage)"),a=e("./DI (@tapclap.utils-js.di)"),r=e("./MetaEventManager (scripts.meta-events)"),i=e("./FetchStorageService (scripts.service)"),c=e("./MetaObjectFactory (scripts.utils)"),s=e("./MetaEventBranchDataHandler (scripts.utils.data-handler)"),p=e("./MetaEventDataHandler (scripts.utils.data-handler)"),l=e("./Service (@tapclap.utils-js.service)"),m=e("./CakeRewardMetaEvent (scripts.meta-events.event)"),u=e("./PiggybankMetaEvent (scripts.meta-events.event)"),d=e("./GetterToValue (@tapclap.utils-js.getters)"),y=e("./MetaModuleGetter (@tapclap.game-kit.getters)"),f=e("./SingleMetaEventBranch (scripts.meta-events.branch)");n.MetaEventConfig={MetaEventManager:a.DI.singleton(r.MetaEventManager,{branchFactory:a.DI.cfg("MetaEventBranchFactory"),eventFactory:a.DI.cfg("MetaEventFactory"),service:a.DI.cfg("MetaEventService")}),MetaEventService:a.DI.instance(i.FetchStorageService,{service:a.DI.instance(l.Service,{gateway:a.DI.cfg("ServiceGateway")}),storage:a.DI.instance(o.DataStorage),storageKey:"..."}),MetaEventBranchFactory:a.DI.instance(c.MetaObjectFactory,a.DI.instance(s.MetaEventBranchDataHandler),{di:a.DI.self(),config:a.DI.raw({single:a.DI.instance(f.SingleMetaEventBranch)})}),MetaEventFactory:a.DI.instance(c.MetaObjectFactory,a.DI.instance(p.MetaEventDataHandler),{di:a.DI.self(),config:a.DI.raw({cakeReward:a.DI.instance(m.CakeRewardMetaEvent,{progressMetaModule:a.DI.instance(d.GetterToValue,a.DI.instance(y.MetaModuleGetter,a.DI.cfg("MetaGameManager"),"progress")),episodesMetaModule:a.DI.instance(d.GetterToValue,a.DI.instance(y.MetaModuleGetter,a.DI.cfg("MetaGameManager"),"episodes")),cakeRewardMetaModule:a.DI.instance(d.GetterToValue,a.DI.instance(y.MetaModuleGetter,a.DI.cfg("MetaGameManager"),"cakeReward"))}),piggybank:a.DI.instance(u.PiggybankMetaEvent,{piggybankMetaModule:a.DI.instance(d.GetterToValue,a.DI.instance(y.MetaModuleGetter,a.DI.cfg("MetaGameManager"),"piggybank")),progressMetaModule:a.DI.instance(d.GetterToValue,a.DI.instance(y.MetaModuleGetter,a.DI.cfg("MetaGameManager"),"progress"))})})})},cc._RF.pop()},{"./CakeRewardMetaEvent (scripts.meta-events.event)":"CakeRewardMetaEvent (scripts.meta-events.event)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DataStorage (@tapclap.game-kit.data-storage)":"DataStorage (@tapclap.game-kit.data-storage)","./FetchStorageService (scripts.service)":"FetchStorageService (scripts.service)","./GetterToValue (@tapclap.utils-js.getters)":"GetterToValue (@tapclap.utils-js.getters)","./MetaEventBranchDataHandler (scripts.utils.data-handler)":"MetaEventBranchDataHandler (scripts.utils.data-handler)","./MetaEventDataHandler (scripts.utils.data-handler)":"MetaEventDataHandler (scripts.utils.data-handler)","./MetaEventManager (scripts.meta-events)":"MetaEventManager (scripts.meta-events)","./MetaModuleGetter (@tapclap.game-kit.getters)":"MetaModuleGetter (@tapclap.game-kit.getters)","./MetaObjectFactory (scripts.utils)":"MetaObjectFactory (scripts.utils)","./PiggybankMetaEvent (scripts.meta-events.event)":"PiggybankMetaEvent (scripts.meta-events.event)","./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)","./SingleMetaEventBranch (scripts.meta-events.branch)":"SingleMetaEventBranch (scripts.meta-events.branch)"}],"MetaEventDataHandler (scripts.utils.data-handler)":[function(e,t,n){"use strict";cc._RF.push(t,"a8d2bdWJLVXI6TzzUZFO2rz","MetaEventDataHandler (scripts.utils.data-handler)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventDataHandler=void 0;var c=e("./DataHandler (scripts.utils.data-handler)"),s=e("./TimeDuration (@tapclap.utils-js.time-duration)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t=e.duration,n=e.cooldown,o=e.startedAt,a=i(e,["duration","cooldown","startedAt"]);return r(r({},a),{duration:new s.TimeDuration(t),cooldown:new s.TimeDuration(n),startedAt:o?new Date(o):null})},t}(c.DataHandler);n.MetaEventDataHandler=p,cc._RF.pop()},{"./DataHandler (scripts.utils.data-handler)":"DataHandler (scripts.utils.data-handler)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"MetaEventGetter (scripts.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"ec2c4NPlzhWh6MvKmAfm8dO","MetaEventGetter (scripts.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventGetter=void 0;var o=function(){function e(e,t){this._metaEventManager=e,this._metaEventKey=t}return e.prototype.get=function(){return this._metaEventManager.getMetaEventByKey(this._metaEventKey)},e}();n.MetaEventGetter=o,cc._RF.pop()},{}],"MetaEventManager (scripts.meta-events)":[function(e,t,n){"use strict";cc._RF.push(t,"499a1h4/EZRQKdrWyKRYnf3","MetaEventManager (scripts.meta-events)");var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventManager=void 0;var r=function(){function e(e){var t=e.branchFactory,n=e.eventFactory,o=e.service;this._branches=[],this._branchFactory=t,this._eventFactory=n,this._service=o,this._events=new Map}return Object.defineProperty(e.prototype,"branches",{get:function(){return this._branches},enumerable:!1,configurable:!0}),e.prototype.getMetaEventByKey=function(e){return this._events.get(e)},e.prototype.init=function(){var e=this;return Promise.resolve().then(function(){return e._service.get({endpoint:["meta-events"],query:{}})}).then(function(t){return Promise.all(t.map(function(t){var n=t.events,r=a(t,["events"]);return new Promise(function(t){var a=n.map(function(t){return e._createEvent(t)}),i=e._createBranch(r.type,o(o({},r),{events:a}));a.forEach(function(t){e._events.set(t.key,t)}),i.init().then(function(){return t(i)})})}))}).then(function(t){e._branches=t})},e.prototype._createBranch=function(e,t){return this._branchFactory.create(e,[t],{rawWrap:!0,merge:!0})},e.prototype._createEvent=function(e){return this._eventFactory.create(e.key,[e],{rawWrap:!0,merge:!0})},e.prototype.update=function(){this.branches.forEach(function(e){return e.update()})},e}();n.MetaEventManager=r,cc._RF.pop()},{}],"MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"eb8ffcRBldcC40eQ0BHqSWb","MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaEventsDevConsoleMenuGenerator=void 0;var i=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),c=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./Inject (@tapclap.utils-js.inject)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.generate=function(){var e={};return this._metaEventManager.branches.forEach(function(t){t.events.forEach(function(t){e[t.key]={title:t.key,closeBefore:!0,command:new c.CallbackDevConsoleCommand({callback:function(){t.restart()}})}})}),e},r([s.Inject("MetaEventManager")],t.prototype,"_metaEventManager",void 0),t}(i.DevConsoleMenuGenerator);n.MetaEventsDevConsoleMenuGenerator=p,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)"}],"MetaGame (@tapclap.game-kit.meta-game)":[function(e,t,n){"use strict";cc._RF.push(t,"db70fp5X0tAXKOxrxUW73Ib","MetaGame (@tapclap.game-kit.meta-game)"),n.__esModule=!0,n.MetaGame=void 0;var o=e("./EventObject (@tapclap.utils-js.events)"),a=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;for(var o in void 0===t&&(t={}),(n=e.call(this)||this)._scene=null,n._key=null,n._active=!1,n._service=null,n._modules={},n._devConsoleMenuGenerator=null,n._key=t.key,n._scene=t.scene,n._service=t.service,n._devConsoleMenuGenerator=t.devConsoleMenuGenerator,n._actions=t.actions,t.modules)n._registerModule(o,t.modules[o]);return n._devConsoleMenuGenerator&&n._devConsoleMenuGenerator.setMetaGame(p(n)),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var i,c,m=o.prototype;return m._registerModule=function(e,t){this._modules[e]=t,this._modules[e].setMetaGame(this)},m.getModule=function(e){return this._modules[e]},m.enable=function(){this.active=!0},m.disable=function(){this.active=!1},m.isActive=function(){return this._active},m._beforeInit=function(){return Promise.resolve()},m._afterInit=function(){return Promise.resolve()},m.getDataToLoad=function(){return Promise.all(Object.values(this._modules).map(function(e){return e.getDataToLoad()})).then(function(e){return e.flat()})},m.init=function(){for(var e=this,t=function(t){var n;e._service.save(((n={})[t]=e._serializeModule(t),n))},n=function(){var n=r[o];e._modules[n].events.on(a.MetaModule.EVENT_CHANGE,function(){t(n)})},o=0,r=Object.keys(this._modules);o<r.length;o++)n();return Promise.resolve().then(function(){return e._beforeInit()}).then(function(){return e._service.syncData()}).then(function(n){return void 0===n&&(n={}),Promise.all(Object.keys(e._modules).map(function(o){return e._modules[o].init(n[o]).then(function(e){!n[o]&&e&&t(o)}).catch(function(e){return console.error(e)})}))}).then(function(){return e._afterInit()})},m.release=function(){return Promise.all(Object.values(this._modules).map(function(e){return e.release()}))},m._serializeModule=function(e){return this._modules[e].serialize()},m.serialize=function(e){void 0===e&&(e=[]);for(var t,n={},o=r(e||Object.keys(this._modules));!(t=o()).done;){var a=t.value,i=this._serializeModule(a);i&&Object.keys(i).length>0&&(n[a]=i)}return n},m.getProgressGroupTag=function(){return this._key},m.getProgressTag=function(){return 0},m.getDevConsoleItems=function(){return this._devConsoleMenuGenerator?this._devConsoleMenuGenerator.generate():{}},i=o,(c=[{key:"actions",get:function(){return this._actions}},{key:"key",get:function(){return this._key}},{key:"modules",get:function(){return Object.assign({},this._modules)}},{key:"scene",get:function(){return this._scene}}])&&s(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),o}(o.EventObject);n.MetaGame=m,cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"MetaGameConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"cfcf45Z1GVYoprc4dl4umOQ","MetaGameConfig (scripts.config)"),n.__esModule=!0,n.MetaGameConfig=void 0;var o=e("./DI (@tapclap.utils-js.di)"),a=e("./MetaGameManager (@tapclap.game-kit.meta-game)"),r=e("./CommonMetaGameConfig (scripts.config.meta-games)"),i=e("./LevelConverterConfig (scripts.config)"),c=e("./PrefabResourcesConfig (scripts.config)"),s=e("./ApplicationConfigShortcuts (scripts.config)"),p=e("./ResourceManager (@tapclap.game-kit.resource-manager)"),l=e("./CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)"),m=e("./LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)"),u={MetaGameManager:o.DI.singleton(a.MetaGameManager,{di:o.DI.self(),metaGamesConfig:["CommonMetaGame"],defaultMetaGameKey:"common"}),CommonMetaGame:r.CommonMetaGameConfig,CandyvalleyLegacyLevelConverter:o.DI.instance(l.CandyvalleyLegacyLevelConverter,i.LevelConverterConfig),LegacyEpisodicLevelsResourceHandler:o.DI.instance(m.LegacyEpisodicLevelsResourceHandler,{moduleResolver:(0,s.moduleResolver)("levels",r.key),converter:o.DI.cfg("CandyvalleyLegacyLevelConverter"),resourceManager:o.DI.instance(p.ResourceManager,c.PrefabResourcesConfig),postfixParamKey:"POSTFIX"})};n.MetaGameConfig=u,cc._RF.pop()},{"./ApplicationConfigShortcuts (scripts.config)":"ApplicationConfigShortcuts (scripts.config)","./CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)":"CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)","./CommonMetaGameConfig (scripts.config.meta-games)":"CommonMetaGameConfig (scripts.config.meta-games)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)":"LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)","./LevelConverterConfig (scripts.config)":"LevelConverterConfig (scripts.config)","./MetaGameManager (@tapclap.game-kit.meta-game)":"MetaGameManager (@tapclap.game-kit.meta-game)","./PrefabResourcesConfig (scripts.config)":"PrefabResourcesConfig (scripts.config)","./ResourceManager (@tapclap.game-kit.resource-manager)":"ResourceManager (@tapclap.game-kit.resource-manager)"}],"MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"fd41c2wwzZRJaWeM4zde/eG","MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaGameDevConsoleMenuGenerator=void 0;var i=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),c=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=function(e){function t(t){var n=e.call(this)||this;return n._metaGame=null,n._startScene=t.startScene,n._sceneManager=t.sceneManager,n}return a(t,e),t.prototype.setMetaGame=function(e){this._metaGame=e},t.prototype.generate=function(){var e,t,n=this,o=this._metaGame.modules,a={reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new c.CallbackDevConsoleCommand({callback:function(){var e=Object.values(n._metaGame.modules).map(function(e){return e.reset()});Promise.all(e).then(function(){return n._sceneManager.loadScene(n._startScene)})}})}};try{for(var i=r(Object.keys(o)),s=i.next();!s.done;s=i.next()){var p=s.value,l=o[p].getDevConsoleItems();Object.keys(l).length>0&&(a[p]={title:p,items:l})}}catch(m){e={error:m}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return a},t}(i.DevConsoleMenuGenerator);n.MetaGameDevConsoleMenuGenerator=s,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MetaGameManager (@tapclap.game-kit.meta-game)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d81c71OsWlLtJkSvUkXuWVL","MetaGameManager (@tapclap.game-kit.meta-game)"),n.__esModule=!0,n.MetaGameManager=void 0;var r=function(e){var t,n;function r(t){var n,o=void 0===t?{}:t,a=o.di,r=o.metaGamesConfig,i=o.defaultMetaGameKey,c=void 0===i?"":i;return(n=e.call(this)||this)._di=a,n._metaGames=[],n._metaGamesConfig=r,n._defaultMetaGameKey=c,n._currentMetaGame=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.getMetaGame=function(e){return void 0===e&&(e=this._defaultMetaGameKey),this._metaGames.find(function(t){return t.key===e})},s.getCurrentMetaGame=function(){return this._currentMetaGame},s.setCurrentMetaGame=function(e){var t=this;this._currentMetaGame!==e&&(this._currentMetaGame?this._currentMetaGame.release():Promise.resolve()).then(function(){t._currentMetaGame=e,t.events.emit(r.EVENT_CHANGE_CURRENT_META_GAME,e)})},s.createMetaGames=function(){var e=this;this._metaGames=this._metaGamesConfig.map(function(t){return e._di.create(t)}),this._defaultMetaGameKey&&this.setCurrentMetaGame(this.getMetaGame(this._defaultMetaGameKey))},s.init=function(){return Promise.all(this._metaGames.map(function(e){return e.init()}))},i=r,(c=[{key:"metaGames",get:function(){return this._metaGames}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.MetaGameManager=r,r.EVENT_CHANGE_CURRENT_META_GAME="changeCurrentMetaGame",cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"MetaGameOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"55b8dhdh7RINZozfVGA4AoS","MetaGameOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.MetaGameOfferState=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._options=t,n._game=t.game,n._module=t.module,n._metaGameManager=t.metaGameManager,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._doResolve=function(){return!1},r.resolve=function(){var e=this._metaGameManager.getMetaGame(this._game);return!!e&&this._doResolve(e.getModule(this._module))},a}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.MetaGameOfferState=a,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"MetaGameResolver (@tapclap.game-kit.meta-game)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"f82fbN9VDta5KBULxEM8snh","MetaGameResolver (@tapclap.game-kit.meta-game)"),n.__esModule=!0,n.MetaGameResolver=void 0;var a=function(){function e(e){var t=e.metaGameManager,n=e.metaGameKey;this._metaGameManager=t,this._metaGameKey=n}var t,n;return e.prototype.get=function(){var e=this._metaGameManager.getCurrentMetaGame();if(this._metaGameKey&&!(e=this._metaGameManager.getMetaGame(this._metaGameKey)))throw new Error("MetaGame with key "+this._metaGameKey+" is not resolved");return e},t=e,(n=[{key:"metaGameKey",get:function(){var e=this._metaGameKey;if(!e){var t=this._metaGameManager.getCurrentMetaGame();t&&(e=t.key)}return e}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.MetaGameResolver=a,cc._RF.pop()},{}],"MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"2a5efjnkitZ1pXO/FVlH9NI","MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaGamesDevConsoleMenuGenerator=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._metaGameManager=t.metaGameManager,n}return a(t,e),t.prototype.generate=function(){var e,t,n={};try{for(var o=r(this._metaGameManager.metaGames),a=o.next();!a.done;a=o.next()){var i=a.value;n[i.key]={title:i.key,items:i.getDevConsoleItems()}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.MetaGamesDevConsoleMenuGenerator=i,cc._RF.pop()},{"./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MetaModule (@tapclap.game-kit.meta-game.meta-modules)":[function(e,t,n){"use strict";function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1e538F2kYhIkpkVW3ypO+HR","MetaModule (@tapclap.game-kit.meta-game.meta-modules)"),n.__esModule=!0,n.MetaModule=void 0;var r=function(e){var t,n;function r(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._metaGame=null,n._service=t.service,n._resourceResolver=t.resourceResolver,n._resources=new Map,n._devConsoleMenuGenerator=t.devConsoleMenuGenerator,n._devConsoleMenuGenerator&&n._devConsoleMenuGenerator.setModule(o(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i.getMetaGame=function(){return this._metaGame},i.setMetaGame=function(e){this._metaGame=e},i.getService=function(){return this._service},i.getDataToLoad=function(e){return void 0===e&&(e=[]),this._resourceResolver?this._resourceResolver.createTasks():Promise.resolve(e)},i.init=function(e){return void 0===e&&(e=null),Promise.resolve(e)},i.setResource=function(e,t){return this._resources.set(e.toString(),t)},i.getResource=function(e){return this._resources.get(e.toString())},i.release=function(){return Promise.resolve()},i.emitChange=function(){this.events.emit(r.EVENT_CHANGE)},i.serialize=function(){return null},i.resetState=function(){},i.reset=function(){return Promise.resolve()},i.getDevConsoleItems=function(){return this._devConsoleMenuGenerator?this._devConsoleMenuGenerator.generate():{}},r}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.MetaModule=r,r.EVENT_CHANGE="change",cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"a8a6cPdKBhQ4INoobWcWwK0","MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MetaModuleDevConsoleMenuGenerator=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._module=null,n._runMetaGameAction=t.runMetaGameAction,n._instance=t.instance||null,n._actionManager=t.actionManager,n}return a(t,e),t.prototype.setModule=function(e){if(this._instance&&!(e instanceof this._instance))throw new Error("Passed module is not needle instance");this._module=e},t.prototype._restartCurrentMetaGame=function(){return this._actionManager.run(this._runMetaGameAction,{metaGame:this._module.getMetaGame()})},t}(e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)").DevConsoleMenuGenerator);n.MetaModuleDevConsoleMenuGenerator=r,cc._RF.pop()},{"./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"MetaModuleGetter (@tapclap.game-kit.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"19b4abX0M5Xr4wgBDAtRkGX","MetaModuleGetter (@tapclap.game-kit.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MetaModuleGetter=void 0;var o=function(){function e(e,t){this._metaGameManager=e,this._metaModule=t}return e.prototype.get=function(){return this._metaGameManager.getCurrentMetaGame().getModule(this._metaModule)},e}();n.MetaModuleGetter=o,cc._RF.pop()},{}],"MetaModuleResolver (@tapclap.game-kit.meta-game)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"601beH+QW1cSLfTlVRRGVxd","MetaModuleResolver (@tapclap.game-kit.meta-game)"),n.__esModule=!0,n.MetaModuleResolver=void 0;var a=function(){function e(e){var t=e.metaGameManager,n=e.metaModuleKey,o=e.metaGameKey;this._metaGameManager=t,this._metaModuleKey=n,this._metaGameKey=o}var t,n;return e.prototype.get=function(){var e=this._metaGameManager.getCurrentMetaGame();if(this._metaGameKey&&!(e=this._metaGameManager.getMetaGame(this._metaGameKey)))throw new Error("MetaGame with key "+this._metaGameKey+" is not resolved");return e.getModule(this._metaModuleKey)},t=e,(n=[{key:"metaModuleKey",get:function(){return this._metaModuleKey}},{key:"metaGameKey",get:function(){var e=this._metaGameKey;if(!e){var t=this._metaGameManager.getCurrentMetaGame();t&&(e=t.key)}return e}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.MetaModuleResolver=a,cc._RF.pop()},{}],"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"64eb1BcyNZTM5wIpqZUCFNI","MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"),n.__esModule=!0,n.MetaModuleResourceHandler=void 0;var a=function(e){var t,n;function a(t){var n,o=(void 0===t?{}:t).moduleResolver;return(n=e.call(this)||this)._moduleResolver=o,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getModule=function(){return this._moduleResolver.get()},r._setResourceToModule=function(e,t){var n=this._getModule();n&&n.setResource(e,t)},a}(e("./ResourceHandler (@tapclap.game-kit.resource-manager)").ResourceHandler);n.MetaModuleResourceHandler=a,cc._RF.pop()},{"./ResourceHandler (@tapclap.game-kit.resource-manager)":"ResourceHandler (@tapclap.game-kit.resource-manager)"}],"MetaObjectFactory (scripts.utils)":[function(e,t,n){"use strict";cc._RF.push(t,"ea5c0eAHWRe76cXllZsm4SW","MetaObjectFactory (scripts.utils)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaObjectFactory=void 0;var i=function(e){function t(t,n){var o=n.di,a=n.config,r=n.ctx,i=e.call(this,o,a,r)||this;return i._dataHandler=t,i}return a(t,e),t.prototype.create=function(t,n,o){var a=r(n,1)[0];return e.prototype.create.call(this,t,[this._dataHandler.handle(a)],o)},t}(e("./ObjectFactory (@tapclap.utils-js.di)").ObjectFactory);n.MetaObjectFactory=i,cc._RF.pop()},{"./ObjectFactory (@tapclap.utils-js.di)":"ObjectFactory (@tapclap.utils-js.di)"}],"MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5c88eax3+haJbKy1k62x0k6","MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)"),n.__esModule=!0,n.MetaProgressAvailability=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this,t)||this)._metaGameManager=t.metaGameManager,n._metaGameKey=t.metaGameKey||c.DEFAULT_METAGAME_KEY,n._metaModuleKey=t.metaGameKey||c.DEFAULT_METAMODULE_KEY,n._value=t.value,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.isAvailable=function(){return this._metaGameManager.getMetaGame(this._metaGameKey).getModule(this._metaModuleKey).value>=this._value},r=c,(i=[{key:"value",get:function(){return this._value}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./UserItemAvailability (@tapclap.game-kit.user-item-manager)").UserItemAvailability);n.MetaProgressAvailability=r,r.DEFAULT_METAGAME_KEY="common",r.DEFAULT_METAMODULE_KEY="progress",cc._RF.pop()},{"./UserItemAvailability (@tapclap.game-kit.user-item-manager)":"UserItemAvailability (@tapclap.game-kit.user-item-manager)"}],"MetaTaskAction (@tapclap.game-kit.meta-task-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"f2b5cfPCiJTsJi8izx4FDnE","MetaTaskAction (@tapclap.game-kit.meta-task-manager)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MetaTaskAction=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._metaTaskManager=t.metaTaskManager,n._metaGameManager=t.metaGameManager,n._event=t.event,n._payload=t.payload,n}return a(t,e),t.prototype.run=function(){var e=Object.assign({},this._payload,{metaGame:this._metaGameManager.getCurrentMetaGame()});return this._metaTaskManager.emitEvent(this._event,e),Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.MetaTaskAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"MetaTaskConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"7c2d39Ll+5exaEc8UUP1mnZ","MetaTaskConfig (scripts.config)"),n.__esModule=!0,n.WIN_LEVEL=n.LOSE_LEVEL=void 0,n.WIN_LEVEL="winLevel",n.LOSE_LEVEL="loseLevel",cc._RF.pop()},{}],"MetaTaskManager (@tapclap.game-kit.meta-task-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"750ecrcdiFbUZwD0EACHyLq","MetaTaskManager (@tapclap.game-kit.meta-task-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MetaTaskManager=void 0;var o=function(){function e(){this._tasks=new Map}return e.prototype.emitEvent=function(e,t){var n=this;this._tasks.forEach(function(o,a){o.includes(e)&&a.onEvent(e,t),a.isCompleted()&&n._tasks.delete(a)})},e.prototype.registerTask=function(e,t){void 0===t&&(t=[]),this._tasks.set(e,t)},e.prototype.unregisterTask=function(e){this._tasks.delete(e)},e}();n.MetaTaskManager=o,cc._RF.pop()},{}],"MinProgressOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";cc._RF.push(t,"6606aCTkAFCKIK91zaEtAmJ","MinProgressOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.MinProgressOfferState=void 0;var o=e("./MetaGameOfferState (@tapclap.game-kit.offer-manager.states)"),a=e("./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype._doResolve=function(e){return e instanceof a.ProgressMetaModule&&e.value>=this._options.value},o}(o.MetaGameOfferState);n.MinProgressOfferState=i,cc._RF.pop()},{"./MetaGameOfferState (@tapclap.game-kit.offer-manager.states)":"MetaGameOfferState (@tapclap.game-kit.offer-manager.states)","./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)":"ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)"}],"MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b52cdJCopVTDqW/Amc5JKDn","MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.MixerAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)"),i=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./ActionAnimation (@tapclap.match-x.cocos.animations)");function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,o=(void 0===t?{}:t).duration,a=void 0===o?.8:o;return(n=e.call(this)||this)._duration=a,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){var t=[],n=null==e?void 0:e.data,o=new a.AnimationFactory(n);return t.push(new r.AnimationData(n,new c.GroupAnimation([new i.ChainAnimation([o.createAnimation("starter"),o.createAnimation("fullSpeed"),o.createAnimation("fullSpeed"),o.createAnimation("fullSpeed"),o.createAnimation("preEnd"),o.createAnimation("end"),o.createAnimation("idleAnimation",{loop:!0})]),new s.ActionAnimation(cc.delayTime(this._duration))],!0))),[t]},o}(o.GameActionBuilder);n.MixerAnimationBuilder=l,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"8ad119lnKpa8K/Wao1ELMnO","MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)"),n.__esModule=!0,n.MixerMovesLegacyLevelComponentRetriever=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e,t){var n=e.mixerMoves||a.DEFAULT;return t&&t.some(function(e){return"MixerTut"===e.cssClass})&&(n=1),{health:{value:n,max:e.mixerMoves||a.DEFAULT}}},a}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.MixerMovesLegacyLevelComponentRetriever=a,a.DEFAULT=5,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)":[function(e,t,n){"use strict";cc._RF.push(t,"27bf4kTS3RViplLijR4umDb","MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MockAdProvider=void 0;var r=function(e){function t(t){var n=void 0===t?{}:t,o=n.isAvailable,a=void 0===o||o,r=n.adRevenue,i=e.call(this)||this;return i._isAvailable=a,i._adRevenue=r,i}return a(t,e),t.prototype.isAvailable=function(){return this._isAvailable},t.prototype.init=function(){return Promise.resolve()},t.prototype.loadAd=function(){return this._isAvailable?Promise.resolve():Promise.reject()},t.prototype.showAd=function(){return this._isAvailable?Promise.resolve(this._adRevenue):Promise.reject()},t.PROVIDER_TYPE="mock",t}(e("./AdProvider (@tapclap.sdk-x.ad-service)").AdProvider);n.MockAdProvider=r,cc._RF.pop()},{"./AdProvider (@tapclap.sdk-x.ad-service)":"AdProvider (@tapclap.sdk-x.ad-service)"}],"MockNotificationAdapter (scripts.social-service.adapters)":[function(e,t,n){"use strict";cc._RF.push(t,"7593aybBP5f/JT9ReHhi3+f","MockNotificationAdapter (scripts.social-service.adapters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MockNotificationAdapter=void 0;var o=function(){function e(){}return e.prototype.canSubscribe=function(){return Promise.resolve(!0)},e.prototype.subscribe=function(){return Promise.resolve()},e.prototype.unsubscribe=function(){return Promise.resolve()},e}();n.MockNotificationAdapter=o,cc._RF.pop()},{}],"MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)":[function(e,t,n){"use strict";cc._RF.push(t,"33982vyrk9Y05UroTQ7B8zM","MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)"),n.__esModule=!0,n.MockPaymentProvider=void 0;var o=e("./PaymentProvider (@tapclap.sdk-x.payment-service)"),a=e("./Purchase (@tapclap.sdk-x.payment-service)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._purchases=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.getProducts=function(e){return Promise.resolve(e)},i.getPurchases=function(){return Promise.resolve(this._purchases)},i.purchase=function(e){if(this._purchases.some(function(t){return t.productId===e.id}))return Promise.reject();var t=new a.Purchase(this.getType(),e.id,e.serialize(),String(Math.round(1e6*Math.random())));return this._purchases.push(t),Promise.resolve(t)},i.consume=function(e){return this._purchases=this._purchases.filter(function(t){return t.productId!==e.productId}),Promise.resolve()},i.isAvailable=function(){return!0},o}(o.PaymentProvider);n.MockPaymentProvider=i,i.PROVIDER_TYPE="mock",cc._RF.pop()},{"./PaymentProvider (@tapclap.sdk-x.payment-service)":"PaymentProvider (@tapclap.sdk-x.payment-service)","./Purchase (@tapclap.sdk-x.payment-service)":"Purchase (@tapclap.sdk-x.payment-service)"}],"MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"66ebfx0VtJbr4e+UUNb00Ew","MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)"),n.__esModule=!0,n.MockPaymentValidationService=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._valid=void 0===t.valid||t.valid,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.verify=function(e,t){return cc.log("Mock payment validation service",e,t),this._valid?Promise.resolve({amount:1e3,currency:"USD"}):Promise.reject("Mock validation failed")},a}(e("./PaymentValidationService (@tapclap.sdk-x.payment-service)").PaymentValidationService);n.MockPaymentValidationService=a,cc._RF.pop()},{"./PaymentValidationService (@tapclap.sdk-x.payment-service)":"PaymentValidationService (@tapclap.sdk-x.payment-service)"}],"MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)":[function(e,t,n){"use strict";cc._RF.push(t,"a9dbfPPaShPgqLpPE+drvMI","MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)"),n.__esModule=!0,n.MockSocialAdapter=void 0;var o=e("./SocialAdapter (@tapclap.sdk-x.social-service)"),a=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),r=e("./ScriptLoader (@tapclap.utils-js.script-loader)"),i=e("./URLSearchParams (@tapclap.utils-js.url)"),c=e("./UserInfo (@tapclap.sdk-x.social-service)");function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=1,l=1e3,m=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._options=Object.assign({fingerprintSrc:"https://cdn.jsdelivr.net/npm/fingerprintjs2@2.1.0/dist/fingerprint2.min.js",appFriendsCount:l,defaultUserId:p},t),n._userId="",n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var m=o.prototype;return m._loadFingerprint=function(){var e=this;return this._options.fingerprintSrc?Promise.resolve().then(function(){return r.ScriptLoader.loadScript(e._options.fingerprintSrc)}).then(function(){return new Promise(function(e){window.requestIdleCallback?window.requestIdleCallback(e):e()})}):Promise.resolve()},m._getUserId=function(){var e=new i.URLSearchParams(window.location.search);if(e.has("userId"))return Promise.resolve(e.get("userId"));var t=window.Fingerprint2;return t?Promise.resolve().then(function(){return t.getPromise({})}).then(function(){return t.getPromise({excludes:{enumerateDevices:!0}})}).then(function(e){return e.map(function(e){return e.value})}).then(function(e){return t.x64hash128(e.join(""),31)}):Promise.resolve(this._options.defaultUserId)},m.init=function(){var e=this;return Promise.resolve().then(function(){return e._loadFingerprint()})},m.login=function(){var e=this;return Promise.resolve().then(function(){return e._getUserId()}).then(function(t){return e._userId=t}).then(function(t){return new a.AuthPayload({type:e.getType(),userId:t})})},m.getUserInfo=function(){return Promise.resolve(new c.UserInfo({id:this._options.defaultUserId,name:"Current User"}))},m.getAppFriends=function(){for(var e=[],t=this._options.defaultUserId;e.length<this._options.appFriendsCount;)this._userId.toString()!==t.toString()&&e.push(new c.UserInfo({id:t.toString(),name:"User "+t})),t++;return Promise.resolve(e)},o}(o.SocialAdapter);n.MockSocialAdapter=m,m.ADAPTER_TYPE="mock",cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)","./ScriptLoader (@tapclap.utils-js.script-loader)":"ScriptLoader (@tapclap.utils-js.script-loader)","./SocialAdapter (@tapclap.sdk-x.social-service)":"SocialAdapter (@tapclap.sdk-x.social-service)","./URLSearchParams (@tapclap.utils-js.url)":"URLSearchParams (@tapclap.utils-js.url)","./UserInfo (@tapclap.sdk-x.social-service)":"UserInfo (@tapclap.sdk-x.social-service)"}],"MockUtmProvider (@tapclap.sdk-x.utm.providers)":[function(e,t,n){"use strict";cc._RF.push(t,"17facTSwaxZy52ffjgkeAgB","MockUtmProvider (@tapclap.sdk-x.utm.providers)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.MockUtmProvider=void 0;var r=function(){function e(e){void 0===e&&(e={}),this._utm=e}return e.prototype.getUtm=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,this._utm]})})},e.prototype.setUtm=function(e){this._utm=e},e}();n.MockUtmProvider=r,cc._RF.pop()},{}],"Model (@tapclap.utils-js.data)":[function(e,t,n){"use strict";cc._RF.push(t,"e8affrMd1VFBaeqFUuOmJhz","Model (@tapclap.utils-js.data)"),n.__esModule=!0,n.Model=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)"),a=e("./PatchHelper (@tapclap.utils-js.data)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var a,r;void 0===t&&(t={}),void 0===n&&(n={}),(r=e.call(this)||this)._properties={},r._prevProperties={},r._changedProperties={},r._options={};var i=t[o.UPDATED_AT_KEY]?new Date(t[o.UPDATED_AT_KEY]):new Date,c=Object.assign({},t,((a={})[o.UPDATED_AT_KEY]=i,a));return r._options=Object.assign({},n),r._aliases={},r.assign(c,!1),r._prevProperties=Object.assign({},r._properties),r}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._definePropertyDescriptor=function(e,t){void 0===t&&(t=null);var n=t||e,o=Object.getPrototypeOf(this),a=Object.getOwnPropertyDescriptor(o,n),r=a&&a.get||this._get.bind(this,e),i=a&&a.set||this._set.bind(this,e);Object.defineProperty(this,n,{get:r,set:i})},i._get=function(e){return this._properties[e]},i._set=function(e,t,n){var a;void 0===n&&(n=!1),this._isChanged(e,t)&&(this._prevProperties[e]=this._properties[e],this._properties[e]=t,this._changedProperties=((a={})[e]=t,a),n||(e!==o.UPDATED_AT_KEY&&(this._prevProperties[o.UPDATED_AT_KEY]=this._properties[e],this._properties[o.UPDATED_AT_KEY]=new Date,this._changedProperties[o.UPDATED_AT_KEY]=this._properties[o.UPDATED_AT_KEY]),this.emit("change",this),this.emit("change:"+e,this,t)))},i._isChanged=function(e,t){return this._properties[e]!==t||!Object.prototype.hasOwnProperty.call(this._properties,e)},i.set=function(e){void 0===e&&(e={});for(var t={},n=0,o=Object.entries(e);n<o.length;n++){var a=o[n],r=a[0],i=a[1];this._isChanged(r,i)&&(this._set(r,i,!0),t[r]=i)}this._changedProperties=t,Object.entries(t).length&&this.emit("change",this)},i.assign=function(e,t){for(var n in void 0===t&&(t=!0),e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=this._aliases[n]||n;t?Object.prototype.hasOwnProperty.call(this._properties,n)&&(this[o]=e[n]):(this._definePropertyDescriptor(n,this._aliases[n]),this._set(o,e[n],!0))}},i.serialize=function(){return Object.assign({},this._properties)},i.getPrevProperties=function(){return Object.assign({},this._prevProperties)},i.getChangedProperties=function(){return Object.assign({},this._changedProperties)},i.getPatchOperations=function(){for(var e=this.getChangedProperties(),t=this.getPrevProperties(),n={},o=0,r=Object.keys(e);o<r.length;o++){var i=r[o];n[i]=t[i]}return a.PatchHelper.diff(e,n)},o}(o.EventEmitter);n.Model=i,i.UPDATED_AT_KEY="updatedAt",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./PatchHelper (@tapclap.utils-js.data)":"PatchHelper (@tapclap.utils-js.data)"}],"ModernWindowComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"94e07ccNttTbY27Q41Ib39N","ModernWindowComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ModernWindowComponent=void 0;var c=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),s=e("./ControlComponent (@tapclap.game-kit.ui.controls)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._additionalButton=null,t}return a(t,e),t.prototype.initialize=function(t,n){var o=this,a=n.additionalButton;if(a){var r=cc.instantiateFrom(a.prefab),c=r.getComponent(s.ControlComponent);this._additionalButton.node.addChild(r),a.events&&Object.entries(a.events).forEach(function(e){var t=i(e,2),n=t[0],a=t[1];c.events.on(n,o.events.emit.bind(o.events,a))})}e.prototype.initialize.call(this,t,n)},r([m({type:cc.Button,visible:!0})],t.prototype,"_additionalButton",void 0),r([l],t)}(c.WindowComponent);n.ModernWindowComponent=u,cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ModifyEntityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"3a86b960c1RIqExxk7KOrKw","ModifyEntityComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntityComponent=void 0;var i=function(e){function t(t){var n=t.add,o=void 0===n?[]:n,a=t.remove,i=void 0===a?[]:a,c=e.call(this)||this;return c._add=o.reduce(function(e,t){if("string"==typeof t)e[t]={};else{var n=r(t,2),o=n[0],a=n[1];e[o]=a}return e},{}),c._remove=i,c}return a(t,e),Object.defineProperty(t.prototype,"add",{get:function(){return this._add},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remove",{get:function(){return this._remove},enumerable:!1,configurable:!0}),t.KEY="modifyEntity",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ModifyEntityComponent=i,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"49ada1I2/dUS6a1LeFAp4XR","ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntityOnChangeGroupComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="modifyEntityOnChangeGroup",t}(e("./ModifyEntityComponent (@tapclap.match-x.engine.components)").ModifyEntityComponent);n.ModifyEntityOnChangeGroupComponent=r,cc._RF.pop()},{"./ModifyEntityComponent (@tapclap.match-x.engine.components)":"ModifyEntityComponent (@tapclap.match-x.engine.components)"}],"ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"cb61cd+VxFaf636U4No51v+","ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntityOnChangeGroupSystem=void 0;var r=e("./ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)"),i=e("./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)"),c=e("./ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(){var e,t=this;return((null===(e=this._world.getState(i.ChangeEntityGroupSystem.KEY))||void 0===e?void 0:e.data)||[]).forEach(function(e){var n=e.entity,o=n.getEnabledComponentByClass(c.ModifyEntityOnChangeGroupComponent);o&&t._processComponents(n,o)}),!1},t.KEY="modifyEntityOnChangeGroup",t}(r.ModifyEntitySystem);n.ModifyEntityOnChangeGroupSystem=s,cc._RF.pop()},{"./ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)":"ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","./ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)":"ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)","./ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)":"ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)"}],"ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"24761veQsZd+b3UV1svTbii","ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntityOnDeathComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="modifyEntityOnDeath",t}(e("./ModifyEntityComponent (@tapclap.match-x.engine.components)").ModifyEntityComponent);n.ModifyEntityOnDeathComponent=r,cc._RF.pop()},{"./ModifyEntityComponent (@tapclap.match-x.engine.components)":"ModifyEntityComponent (@tapclap.match-x.engine.components)"}],"ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"fd261b3yqtWsY5nZw6KO8aE","ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntityOnDeathSystem=void 0;var i=e("./ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=e("./ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)"),p=e("./GridComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(){var e,t,n=this;try{for(var o=r(this._world.getEnabledComponentsByClass(p.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t=e.getEnabledComponent(c.HealthComponent.KEY),o=e.getEnabledComponent(s.ModifyEntityOnDeathComponent.KEY);o&&(null==t?void 0:t.isDeath)&&n._processComponents(e,o)})}catch(i){e={error:i}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!1},t.KEY="modifyEntityOnDeath",t}(i.ModifyEntitySystem);n.ModifyEntityOnDeathSystem=l,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)":"ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)","./ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)":"ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)"}],"ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"850a398X8ZS6ZKPB3lmIl2K","ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ModifyEntitySystem=void 0;var c=function(e){function t(t){var n=t.world,o=t.componentFactory,a=e.call(this)||this;return a._world=n,a._componentFactory=o,a}return a(t,e),t.prototype.process=function(){return!1},t.prototype._processComponents=function(e,t){var n,o,a,c,s=!1;try{for(var p=r(Object.entries(t.add)),l=p.next();!l.done;l=p.next()){var m=i(l.value,2),u=m[0],d=m[1];e.getEnabledComponent(u)||(e.addComponent(u,this._componentFactory.create(u,d)),s=!0)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}try{for(var y=r(t.remove),f=y.next();!f.done;f=y.next())u=f.value,e.getEnabledComponent(u)&&(e.removeComponent(u),s=!0)}catch(g){a={error:g}}finally{try{f&&!f.done&&(c=y.return)&&c.call(y)}finally{if(a)throw a.error}}return s},t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ModifyEntitySystem=c,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"MorphComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"afb10GxmOpfl4t4Nfkd8Dld","MorphComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MorphComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return void 0===t&&(t={groups:[1],type:"random"}),(n=e.call(this,t)||this)._groups=t.groups,n._type=t.type,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"groups",get:function(){return this._groups}},{key:"type",get:function(){return this._type}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MorphComponent=r,r.KEY="morph",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MorphOnCounterValueComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d8bdf/Zd1RY1pghnrTtw2Kq","MorphOnCounterValueComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MorphOnCounterValueComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return void 0===t&&(t={value:0}),(n=e.call(this,t)||this)._value=t.value,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"value",get:function(){return this._value}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MorphOnCounterValueComponent=r,r.KEY="morphOnCounterValue",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MorphViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5d0bayxYGJKQLx6jmUa5QuL","MorphViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.MorphViewComponent=void 0;var o,a=e("./ViewComponent (@tapclap.match-x.cocos.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.setEntityGroup=function(){},o}(a.ViewComponent))||o;n.MorphViewComponent=i,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"MotionClipSceneTransitionComponent (scripts.scenes)":[function(e,t,n){"use strict";cc._RF.push(t,"78aaajQTFpVc58gP4h5W/Hr","MotionClipSceneTransitionComponent (scripts.scenes)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.MotionClipSceneTransitionComponent=void 0;var i=e("./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),c=e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._hintNode=null,t._hintShowDuration=.5,t._hintHideDuration=.25,t._hintShowDelay=5,t._spinnerComponent=null,t._schedulerCallback=null,t._animation=null,t}return a(t,e),t.prototype.onLoad=function(){this.node.zIndex=1e3,this._animation=this.node.getComponent(cc.Animation)},t.prototype.show=function(){var e=this;return this._schedulerCallback=function(){return e.showHint()},this.scheduleOnce(this._schedulerCallback,this._hintShowDelay),new Promise(function(t){e._animation.play("transition-show"),e._animation.once(cc.Animation.EventType.FINISHED,function(){t()})})},t.prototype.hide=function(){var e=this;return this.hideHint().then(function(){return new Promise(function(t){e._animation.play("transition-hide"),e._animation.once(cc.Animation.EventType.FINISHED,function(){t()})})})},t.prototype.showHint=function(){var e=this;return new Promise(function(t){e._hintNode.runAction(cc.sequence([cc.spawn([cc.callFunc(function(){return e._spinnerComponent.show()}),cc.fadeIn(e._hintShowDuration)]),cc.callFunc(function(){return t()})]))})},t.prototype.hideHint=function(){var e=this;return this.unschedule(this._schedulerCallback),new Promise(function(t){0===e._hintNode.opacity?t():(e._hintNode.stopAllActions(),e._hintNode.runAction(cc.sequence([cc.fadeOut(e._hintHideDuration),cc.callFunc(t)])))})},t.prototype.reset=function(){this.disable()},r([l({type:cc.Node,visible:!0})],t.prototype,"_hintNode",void 0),r([l({type:cc.Float,visible:!0})],t.prototype,"_hintShowDuration",void 0),r([l({type:cc.Float,visible:!0})],t.prototype,"_hintHideDuration",void 0),r([l({type:cc.Float,visible:!0})],t.prototype,"_hintShowDelay",void 0),r([l({type:c.SpinnerComponent,visible:!0})],t.prototype,"_spinnerComponent",void 0),r([p],t)}(i.SceneTransitionComponent);n.MotionClipSceneTransitionComponent=m,cc._RF.pop()},{"./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":"SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)"}],"MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":[function(e,t,n){"use strict";cc._RF.push(t,"8446fGtPgVMOJjYklafiXOV","MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),n.__esModule=!0,n.MotionSceneTransitionComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O=e("./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),R=e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)");function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function L(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var F=cc._decorator,D=F.ccclass,B=F.property,G=(o=D("Motion"),a=B(cc.Node),r=B(cc.Vec2),o((s=L((c=function(){j(this,"node",s,this),j(this,"direction",p,this)}).prototype,"node",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=L(c.prototype,"direction",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i),N=(l=D("MotionLayer"),m=B([G]),l((y=L((d=function(){j(this,"motions",y,this)}).prototype,"motions",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d))||u),W=(f=B({type:cc.Float,visible:!0}),h=B({type:[N],visible:!0}),g=B({type:cc.Node,visible:!0}),v=B({type:cc.Float,visible:!0}),_=B({type:R.SpinnerComponent,visible:!0}),D((C=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return j(t=e.call.apply(e,[this].concat(o))||this,"_animationLayerDelay",w,I(t)),j(t,"_motionLayers",S,I(t)),j(t,"_hintNode",E,I(t)),j(t,"_hintShowDelay",x,I(t)),j(t,"_spinnerComponent",A,I(t)),t._schedulerCallback=null,t._initialPosition=[],t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,M(t,n);var a=o.prototype;return a.onLoad=function(){this.node.zIndex=1e3;for(var e=0;e<this._motionLayers.length;e++)for(var t,n=P(this._motionLayers[e].motions);!(t=n()).done;){var o=t.value.node;this._initialPosition.push({node:o,position:o.position.clone()})}},a._getOutsidePosition=function(e,t){var n=cc.view.getVisibleSize();return cc.v2(n.width/2,n.height/2).add(cc.v2(e.width/2,e.height/2)).scale(t).add(e.position)},a.show=function(){var e=this,t=[];this._schedulerCallback=function(){return e.showHint()},this.scheduleOnce(this._schedulerCallback,this._hintShowDelay);for(var n=function(n){for(var o,a=function(){var a=o.value,r=a.node,i=a.direction,c=r.position;r.position=e._getOutsidePosition(r,i),t.push(new Promise(function(t){r.runAction(cc.sequence([cc.delayTime(e._showAnimationDuration/e._motionLayers.length*n*e._animationLayerDelay),cc.moveTo(e._showAnimationDuration,c).easing(cc.easeSineOut()),cc.callFunc(t)]))}))},r=P(e._motionLayers[n].motions);!(o=r()).done;)a()},o=0;o<this._motionLayers.length;o++)n(o);return Promise.all(t)},a.hide=function(){var e=this;return this.hideHint().then(function(){for(var t=[],n=0;n<e._motionLayers.length;n++)for(var o,a=function(){var n=o.value,a=n.node,r=n.direction,i=e._getOutsidePosition(a,r);t.push(new Promise(function(t){a.runAction(cc.sequence([cc.moveTo(e._hideAnimationDuration,i).easing(cc.easeSineIn()),cc.callFunc(t)]))}))},r=P(e._motionLayers[n].motions);!(o=r()).done;)a();return Promise.all(t)})},a.showHint=function(){var e=this;return new Promise(function(t){e._hintNode.runAction(cc.sequence([cc.spawn([cc.callFunc(function(){return e._spinnerComponent.show()}),cc.fadeIn(1)]),cc.callFunc(function(){return t()})]))})},a.hideHint=function(){var e=this;return this.unschedule(this._schedulerCallback),new Promise(function(t){e._hintNode.runAction(cc.sequence([cc.fadeOut(1),cc.callFunc(t)]))})},a.enable=function(){e.prototype.enable.call(this)},a.disable=function(){e.prototype.disable.call(this)},a.reset=function(){this._initialPosition.forEach(function(e){var t=e.node,n=e.position;return t.setPosition(n)}),this.disable()},o}(O.SceneTransitionComponent),w=L(C.prototype,"_animationLayerDelay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),S=L(C.prototype,"_motionLayers",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=L(C.prototype,"_hintNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=L(C.prototype,"_hintShowDelay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),A=L(C.prototype,"_spinnerComponent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b);n.MotionSceneTransitionComponent=W,cc._RF.pop()},{"./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":"SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)"}],"MoveAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a4febDZyYlb17aaBe39pUSI","MoveAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.MoveAnimation=void 0;var c=function(e){var t,n;function a(t,n,a,r,i){var c;void 0===i&&(i=.05),c=e.call(this)||this;for(var s,p=[],l=o(n);!(s=l()).done;){var m=s.value;m?p.push(cc.moveTo(i,m.x,m.y)):p.push(cc.delayTime(i))}if(r){var u=n.find(function(e){return!!e});t.opacity=0,t.setPosition(u.getPosition().addSelf(cc.v2(-1*u.width*a.x,u.height*a.y)));var d=n.findIndex(function(e){return!!e});-1!==d&&(p[d]=cc.spawn(p[d],cc.fadeIn(i)))}if(p.length){var y=p.length>1?cc.sequence(p):p[0];c.addAction(y,t)}return c}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a}(e("./ActionAnimation (@tapclap.match-x.cocos.animations)").ActionAnimation);n.MoveAnimation=c,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)"}],"MoveComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bb8ca5aByNc0Y76lG+WQuAP","MoveComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MoveComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._dropped=!1,t._path=[],t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.reset=function(){this._dropped=!1,this._path=[]},r=c,(i=[{key:"dropped",get:function(){return this._dropped},set:function(e){this._dropped=e}},{key:"path",get:function(){return this._path},set:function(e){this._path=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MoveComponent=r,r.KEY="move",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MoveMatrix (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";cc._RF.push(t,"f4821O6QKdQd4dLphge64cd","MoveMatrix (@tapclap.match-x.engine.models)"),n.__esModule=!0,n.MoveMatrix=void 0;var o=e("./Matrix (@tapclap.match-x.engine.models)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=void 0),this._count=0,this._matrix=new o.Matrix(e,t,n)}var t,n,r=e.prototype;return r.get=function(e,t){return this._matrix[e][t]},r.set=function(e,t,n){this._count++,this._matrix[e][t]=n},r.remove=function(e,t){this._count--,this._matrix[e][t]=void 0},r.has=function(e,t){return!!this.get(e,t)},t=e,(n=[{key:"count",get:function(){return this._count}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.MoveMatrix=r,cc._RF.pop()},{"./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"MoveStrategy (@tapclap.match-x.engine.systems.move-system)":[function(e,t,n){"use strict";cc._RF.push(t,"e9711mIrPBQxLg6n96qj742","MoveStrategy (@tapclap.match-x.engine.systems.move-system)"),n.__esModule=!0,n.MoveStrategy=void 0;var o=function(){function e(){}var t=e.prototype;return t.prepare=function(){},t.drop=function(){return[]},t.move=function(){return!1},e}();n.MoveStrategy=o,cc._RF.pop()},{}],"MoveSystem (@tapclap.match-x.engine.systems.move-system)":[function(e,t,n){"use strict";cc._RF.push(t,"e5570xNA7lZ3rmOo2c57u+N","MoveSystem (@tapclap.match-x.engine.systems.move-system)"),n.__esModule=!0,n.MoveSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./MatrixIteratorFactory (@tapclap.match-x.engine.models)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var o;return(o=e.call(this)||this)._world=t,o._moveStrategy=n,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._extractMove=function(e){var t=[],n=e.getEnabledComponent("direction");return n&&e.forEach(a.MatrixIteratorFactory.createInverseMoveIterator(n.direction,e),function(e){if(e.isFill){var o=e.getEntity().getEnabledComponent("move");if(o&&o.path.length&&o.path.find(function(e){return!!e})){for(var a=o.path.length-1;a>=0&&!o.path[a];)a--;o.path=o.path.slice(0,a+1),t.push({start:o.start,direction:n.direction,entity:e.getEntity(),path:o.path,dropped:o.dropped})}}}),t},i.process=function(){var e=this._world.getEnabledComponent("tiles");if(e){var t=e.grid;this._moveStrategy.prepare(t);do{var n=this._moveStrategy.drop(t);n.length>0&&this._world.pushState(o.STATE_DROP,n)}while(this._moveStrategy.move(t));var a=this._extractMove(t);return a.length>0&&this._world.setState("move",a),a.length>0}return!1},o}(o.PipelineProcessSystem);n.MoveSystem=i,i.KEY="move",i.STATE="move",i.STATE_DROP="drop",cc._RF.pop()},{"./MatrixIteratorFactory (@tapclap.match-x.engine.models)":"MatrixIteratorFactory (@tapclap.match-x.engine.models)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"MoveToGoalAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"363ae9lUe9VUbEzmw1H8jn1","MoveToGoalAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.MoveToGoalAnimation=void 0;var a=function(e){var t,n;function a(t){var n,o=t.entityNode,a=t.sourceNode,r=void 0===a?null:a,i=t.targetNode,c=void 0===i?null:i,s=t.duration,p=void 0===s?1:s,l=t.scale,m=void 0===l?void 0:l,u=t.delay,d=void 0===u?0:u,y=t.zIndex,f=void 0===y?void 0:y,h=t.step,g=void 0===h?0:h;return(n=e.call(this)||this)._entityNode=o,n._sourceNode=r,n._targetNode=c,n._duration=p,n._scale=m,n._delay=d,n._zIndex=f,n._step=g,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getAction=function(){var e=this,t=[],n=this._sourceNode.getBoundingBoxToWorld(),o=this._targetNode.getBoundingBoxToWorld(),a=this._sourceNode.getPosition(),r=this._sourceNode.parent.convertToNodeSpaceAR(this._targetNode.parent.convertToWorldSpaceAR(this._targetNode.getPosition())),i=this._duration,c=i/2,s=i/4*3;this._zIndex&&t.push(cc.callFunc(function(){return e._entityNode.zIndex=e._entityNode.zIndex+e._zIndex})),t.push(cc.delayTime(this._step*this._delay)),t.push(cc.scaleTo(0,1)),t.push(cc.callFunc(function(){return e._entityNode.runAction(cc.fadeIn(0))})),this._scale&&t.push(cc.spawn([cc.scaleBy(c/2,this._scale,this._scale).easing(cc.easeIn(2)),cc.moveBy(c/2,0,(n.height*this._scale-n.height)/2).easing(cc.easeIn(2))]));var p=new cc.Vec2(r.x/2,Math.max(a.y,r.y));return t.push(cc.spawn([cc.scaleTo(s,o.width/n.width,o.height/n.height).easing(cc.easeIn(2)),cc.bezierTo(s,[a,p,r]).easing(cc.easeIn(2))])),t},r.run=function(){var t=this,n=this._getAction(),o=null;return n.length>1?o=cc.sequence([cc.sequence(n),cc.fadeOut(0),cc.callFunc(function(){t._entityNode.pauseSystemEvents(!0)})]):1===n.length&&(o=n[0]),o&&this.addAction(o,this._sourceNode),e.prototype.run.call(this)},a}(e("./ActionAnimation (@tapclap.match-x.cocos.animations)").ActionAnimation);n.MoveToGoalAnimation=a,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)"}],"MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"74a69leycJfs4vV5Ps/p6A3","MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.MovesCountGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var o;return(o=e.call(this)||this)._world=t,o._count=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.compute=function(){var e=this._world.getState(a.MovesReducingSystem.STATE),t=e&&e.data;return Boolean(t&&t.value===this._count)},o}(o.GameEventStrategy);n.MovesCountGameEventStrategy=i,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","./MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)":"MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)"}],"MovesCounterRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d7bffDR1+BWfbVKu4skR6om","MovesCounterRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.MovesCounterRenderer=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._movesCounterView=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.render=function(e){e&&e.data&&this._movesCounterView.setCount(e.data.getValue())},a}(e("./Renderer (@tapclap.match-x.engine.systems.render-system)").Renderer);n.MovesCounterRenderer=a,cc._RF.pop()},{"./Renderer (@tapclap.match-x.engine.systems.render-system)":"Renderer (@tapclap.match-x.engine.systems.render-system)"}],"MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)":[function(e,t,n){"use strict";cc._RF.push(t,"f8e80W02lxdJ6W6aDYY7RT3","MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MovesCounterStartBoosterStrategy=void 0;var r=e("./StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)"),i=e("./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"),c=function(e){function t(t){var n=e.call(this,t)||this;return n._movesCount=t.movesCount,n._stateData={type:t.startBoosterType,value:0,prevValue:0},n}return a(t,e),t.prototype.apply=function(){var e=this._world.getComponent("moves");if(e){this._stateData.prevValue=e.getValue();var t=e.getValue()+this._movesCount;return e.setValue(t),this._stateData.value=t,this._world.pushState(i.StartBoosterSystem.STATE,this._stateData),!0}return!1},t}(r.StartBoosterStrategy);n.MovesCounterStartBoosterStrategy=c,cc._RF.pop()},{"./StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)","./StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)":"StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)"}],"MovesCounterViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";var o,a,r,i;function c(){return(c=s()?Reflect.construct.bind():function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&m(a,n.prototype),a}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a8addtYTFpTV61eY+JYD25G","MovesCounterViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.MovesCounterViewComponent=void 0;var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:cc.Label,visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_label",i,l(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a.setCount=function(e){this._label.string=e},a.setColor=function(e){this._label.node.color=c(cc.Color,e)},o}(cc.Component),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_label",e)||e},f)).initializer&&(Object.defineProperty(u,"_label",f),f=null),i=f,a=r))||a);n.MovesCounterViewComponent=v,cc._RF.pop()},{}],"MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"3d1d0XxWUdbr4tp+dLo83yS","MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MovesCounterWithInitiatorAnimationBuilder=void 0;var i=e("./CounterAnimation (@tapclap.match-x.cocos.animations)"),c=e("./MoveToGoalAnimation (@tapclap.match-x.cocos.animations)"),s=e("./GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),p=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=function(e){function t(t){var n=e.call(this)||this;return n._movesCounterView=t.movesCounterView,n._countdownColorValue=t.countdownColorValue,n._highColor=t.highColor,n._lowColor=t.lowColor,n}return a(t,e),t.prototype.build=function(e,t,n){var o,a,f,h,g=this,v=(null===(f=null==n?void 0:n.data)||void 0===f?void 0:f.flat())||[],_=[],b=0,C=function(e,t,n){return new i.CounterAnimation(e,t,n,function(e){g._countdownColorValue&&g._lowColor&&e<=g._countdownColorValue?g._movesCounterView.setColor(g._lowColor):g._movesCounterView.setColor(g._highColor),g._movesCounterView.setCount(e.toString())})},w=function(e){var t=e.value,n=e.prevValue,o=e.initiatorEntity,a=e.initiatorEvent,r=n-t==1?0:.25;if(o&&a){var i=v.find(function(e){return e.entity===o}),f=(null==i?void 0:i.blastedBy)||(null==i?void 0:i.affectedBy),h=o.getEnabledComponentByClass(p.RenderComponent).node;_.push({target:o,animation:new y.GroupAnimation([new l.ChainAnimation([f?new u.EventListenAnimation(f,a):new m.DummyAnimation,new d.FunctionAnimation(function(){var e=g._getEntityBodyNode(h);return new c.MoveToGoalAnimation({entityNode:h,sourceNode:e,targetNode:g._movesCounterView.node,duration:s.GoalAnimationBuilder.TO_GOAL_DURATION,scale:s.GoalAnimationBuilder.TO_GOAL_PRESCALE,delay:s.GoalAnimationBuilder.TO_GOAL_DELAY,zIndex:Math.abs(10*b-1e3),step:b++/10}).run()}),C(t,n,r)]),new m.DummyAnimation],!!f)})}else _.push({animation:C(t,n,r)})};try{for(var S=r(e.data),E=S.next();!E.done;E=S.next())w(E.value)}catch(R){o={error:R}}finally{try{E&&!E.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}if(0===(null===(h=null==e?void 0:e.data)||void 0===h?void 0:h.length)&&(null==t?void 0:t.data)){var x=(null==t?void 0:t.data)||{},A=x.value,O=x.prevValue;_.push({animation:C(A,O,0)})}return[_]},t.prototype._getEntityBodyNode=function(e){var t=e.getChildByName("body");return t.parent=e.parent,t.setPosition(e.getPosition()),t.zIndex=e.zIndex+1,t},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.MovesCounterWithInitiatorAnimationBuilder=f,cc._RF.pop()},{"./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./CounterAnimation (@tapclap.match-x.cocos.animations)":"CounterAnimation (@tapclap.match-x.cocos.animations)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":"GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MoveToGoalAnimation (@tapclap.match-x.cocos.animations)":"MoveToGoalAnimation (@tapclap.match-x.cocos.animations)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"37c6cFo811Wb4xPnZf43sOy","MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MovesReducingByEntityCount=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t,n){var o=e.call(this)||this;return o._world=t,o._entityTypes=n,o}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=0;try{for(var a=r(this._world.getComponentsByClass(i.GridComponent)),c=a.next();!c.done;c=a.next())c.value.grid.forEachEntities(function(e){return n._entityTypes.includes(e.type)&&o++})}catch(s){e={error:s}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0!==o?[{isTurn:!1,isCommitable:!0,moves:-o}]:[]},t}(e("./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)").MovesReducingStrategy);n.MovesReducingByEntityCount=c,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"}],"MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"dc934AId6ld/agaWcue+BGT","MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MovesReducingByExplodeEntityStrategy=void 0;var r=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),i=e("./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype.process=function(){var e,t=(null===(e=this._world.getState(r.ExplodeSystem.STATE))||void 0===e?void 0:e.data.flat())||[],n=[];return t.forEach(function(e){var t=e.entity.getComponentByClass(i.AddMovesOnExplodeComponent);t&&n.push({moves:t.movesCount,isTurn:!1,initiatorEntity:e.entity,initiatorEvent:t.event})}),n},t.KEY="movesReducingByExplodeEntity",t}(e("./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)").MovesReducingStrategy);n.MovesReducingByExplodeEntityStrategy=c,cc._RF.pop()},{"./AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)":"AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"}],"MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"935fcvdB5dfirKnOA65FUXU","MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MovesReducingByStateStrategy=void 0;var r=function(e){function t(t,n,o){void 0===n&&(n=[]),void 0===o&&(o=[]);var a=e.call(this)||this;return a._exceptedStateKeys=[],a._cancelableStateKeys=[],a._world=t,a._exceptedStateKeys=n,a._cancelableStateKeys=o,a}return a(t,e),t.prototype.process=function(){var e=this,t=function(t){var n;return null===(n=e._world.getState(t))||void 0===n?void 0:n.data},n=this._cancelableStateKeys.some(t),o=this._exceptedStateKeys.every(t),a=!n&&o?1:0;return 0!==a?[{isTurn:!0,isCommitable:!0,moves:-a}]:[]},t}(e("./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)").MovesReducingStrategy);n.MovesReducingByStateStrategy=r,cc._RF.pop()},{"./MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":"MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"}],"MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"5bb2axM87hdIIqjFZoaRMIM","MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)"),Object.defineProperty(n,"__esModule",{value:!0}),n.MovesReducingStrategy=void 0;n.MovesReducingStrategy=function(){},cc._RF.pop()},{}],"MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)":[function(e,t,n){"use strict";cc._RF.push(t,"0f214xBGexVLovTL+OQJpxv","MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.MovesReducingSystem=void 0;var i=function(e){function t(t,n){void 0===n&&(n=[]);var o=e.call(this)||this;return o._turnNumber=0,o._world=t,o._strategies=n,o._turnNumber=0,o}return a(t,e),t.prototype.getMoves=function(){return this._world.getComponent("moves")},t.prototype.getMovesLeft=function(){return this.getMoves().getValue()},t.prototype.getTurnNumber=function(){return this._turnNumber},t.prototype.setMoves=function(e){var n=this.getMoves(),o=n.getValue();n.setValue(e),this._world.setState(t.STATE,{value:e,prevValue:o,turnNumber:this._turnNumber})},t.prototype.process=function(){var e,n,o,a,i=[],c=this.getMovesLeft(),s=!1,p=!1;try{for(var l=r(this._strategies),m=l.next();!m.done;m=l.next()){var u=m.value.process();try{for(var d=(o=void 0,r(u)),y=d.next();!y.done;y=d.next()){var f=y.value;s=s||f.moves<0&&f.isTurn,p=!f.isCommitable||f.isCommitable;var h={prevValue:c,value:c+f.moves,initiatorEntity:f.initiatorEntity,initiatorEvent:f.initiatorEvent};i.push(h),c+=f.moves}}catch(g){o={error:g}}finally{try{y&&!y.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}catch(v){e={error:v}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s&&(this._turnNumber+=1),p&&this.setMoves(c),this._world.setState(t.STATE_ALL,i),!1},t.KEY="movesReducing",t.STATE="movesReducing",t.STATE_ALL="movesReducingStateAll",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.MovesReducingSystem=i,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f5a12Z4dq5eyYx2UwqCkhJN","MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.MultipleProgressStarViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w=e("./ViewComponent (@tapclap.match-x.cocos.components)"),S=e("./ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)");function E(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var R=cc._decorator,P=R.ccclass,k=R.property,T=(o=(0,R.menu)("Match-X/ui/MultipleProgressStarViewComponent"),a=k({type:[cc.Node],visible:!0}),r=k({visible:!0}),i=k({type:cc.SpriteFrame,visible:function(){return this._replaceSpriteOnActivate}}),c=k({visible:!0}),s=k({visible:!0}),p=k({visible:!0}),l=k({visible:!0}),m=k({type:[cc.ProgressBar],visible:!0}),P(u=o((d=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return E(t=e.call.apply(e,[this].concat(o))||this,"_stars",y,x(t)),E(t,"_replaceSpriteOnActivate",f,x(t)),E(t,"_activeSpriteFrame",h,x(t)),E(t,"_startScale",g,x(t)),E(t,"_middleScale",v,x(t)),E(t,"_finishScale",_,x(t)),E(t,"_animationDuration",b,x(t)),E(t,"_progressBars",C,x(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,A(t,n);var a=o.prototype;return a.onLoad=function(){var e=this;this._stars.forEach(function(t){return t.setScale(e._startScale)})},a.activateStar=function(e){var t=this,n=this.getStarByIndex(e);if(n)return new Promise(function(e){var a=cc.sequence([cc.scaleTo(t._animationDuration,t._middleScale,t._middleScale),cc.callFunc(function(){if(t._activeSpriteFrame){var e=n.getComponent(cc.Sprite);e&&(e.spriteFrame=t._activeSpriteFrame)}t.node.emit(o.EVENT_SHOW_STAR)}),cc.scaleTo(t._animationDuration,t._finishScale,t._finishScale),cc.callFunc(e)]).easing(cc.easeInOut(1));n.runAction(a)})},a.getStarByIndex=function(e){return this._stars[e]},a.setProgress=function(e,t){var n=this,o=this._progressBars[e];return o&&1!==o.progress?new S.ProgressBarAnimation(o,t).run().then(function(){if(1===t)return n.activateStar(e)}):Promise.resolve()},o}(w.ViewComponent),y=O(d.prototype,"_stars",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=O(d.prototype,"_replaceSpriteOnActivate",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=O(d.prototype,"_activeSpriteFrame",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=O(d.prototype,"_startScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=O(d.prototype,"_middleScale",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),_=O(d.prototype,"_finishScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=O(d.prototype,"_animationDuration",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),C=O(d.prototype,"_progressBars",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d))||u)||u);n.MultipleProgressStarViewComponent=T,T.EVENT_SHOW_STAR="show_star",cc._RF.pop()},{"./ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"2be67utsWpVDq8TyNJuEGo1","MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.MultiplierAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./MultiplierStarAnimation (scripts.scenes.match3-game.animations)"),c=e("./MultiplierViewComponent (@tapclap.match-x.cocos.components)"),s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./MultiplierHoldComponent (@tapclap.match-x.engine.components)"),l=e("./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),m=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)");function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){var t,n;function o(t){var n,o=t.multiplierPrefab,a=t.tileHighLightPrefab,r=t.multiplierStarPrefabMap,i=t.parentNode,c=t.combinationForAnimating,s=void 0===c?[]:c,p=t.plusOneBoosterButtonNode,l=t.audioEffectsPlayer;return(n=e.call(this)||this)._mutltiplierPrefab=o,n._tileHighLightPrefab=a,n._multiplierStarPrefabMap=r,n._parentNode=i,n._combinationForAnimating=s,n._plusOneBoosterButtonNode=p,n._audioEffectsPlayer=l,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),o.prototype.build=function(e){var t=this,n=e.data,d=[],y=!1;n.forEach(function(e){var n=e.targetEntity,f=e.combinationCenterCell,h=e.value,g=e.minValue,v=e.affectedByBooster,_=e.combinationType;v&&(y=!0);var b=n.getComponent("render").node,C=b.getChildByName("body"),w=C.getChildByName(t._mutltiplierPrefab.name);w||(w=cc.instantiateFrom(t._mutltiplierPrefab),C.addChild(w));var S=t._multiplierStarPrefabMap[_]||t._multiplierStarPrefabMap.default,E=cc.instantiateFrom(S);if(w){var x=new a.FunctionAnimation(function(){if(w){var e=w.getComponent(c.MultiplierViewComponent);if(e){var o=cc.instantiateFrom(t._tileHighLightPrefab),a=Number(e.labelNode.string);switch(h>0&&h!==a&&(C.removeChild(C.getChildByName(t._tileHighLightPrefab.name)),w.getChildByName("counter").runAction(cc.spawn([cc.sequence([cc.scaleTo(.2,1.2),cc.scaleTo(.2,1)]),cc.callFunc(function(){C.addChild(o,C.zIndex-1)})]))),e.setCounter(h),!0){case!!n.getComponentByClass(p.MultiplierHoldComponent):e.setBackground(c.MultiplierViewComponent.TYPE_DEFAULT);break;case g>0&&h===g:e.setBackground(c.MultiplierViewComponent.TYPE_PERMANENT);break;case g>0&&h>g:e.setBackground(c.MultiplierViewComponent.TYPE_BOTH);break;default:e.setBackground(c.MultiplierViewComponent.TYPE_DEFAULT)}w.active=h>0}}});if(v||f&&t._combinationForAnimating.includes(_)){var A;A=v?t._plusOneBoosterButtonNode:f.getComponent("render").node;var O=E.getComponent(l.AnimationFactoryComponent),R=null==O?void 0:O.getAnimationItem(o.KEY_STAR_FADEOUT),P=(null==R?void 0:R.create())||new m.DummyAnimation,k=new r.ChainAnimation([new i.MultiplierStarAnimation(E,t._parentNode,A,b),new u.GroupAnimation([new r.ChainAnimation([P,new a.FunctionAnimation(function(){return E.destroy()})]),x],!0)]);d.push(new s.AnimationData(n,k))}else d.push(new s.AnimationData(n,x))}});var f=[];return d.length>0&&y&&f.push(new s.AnimationData(null,this._audioEffectsPlayer.create("applyBoosterPlusOne",{mergable:0}))),f.push.apply(f,d),[f]},o}(o.GameActionBuilder);n.MultiplierAnimationBuilder=y,y.KEY_STAR_FADEOUT="fadeOut",cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MultiplierHoldComponent (@tapclap.match-x.engine.components)":"MultiplierHoldComponent (@tapclap.match-x.engine.components)","./MultiplierStarAnimation (scripts.scenes.match3-game.animations)":"MultiplierStarAnimation (scripts.scenes.match3-game.animations)","./MultiplierViewComponent (@tapclap.match-x.cocos.components)":"MultiplierViewComponent (@tapclap.match-x.cocos.components)"}],"MultiplierComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"66b33e/HG9Rp7eF9xrK02ln","MultiplierComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MultiplierComponent=void 0;var r=function(e){var t,n;function r(t){var n,o=(void 0===t?{}:t).enable,a=void 0===o||o;return(n=e.call(this)||this)._maxValue=9,n._chunk=null,n._enable=a,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.addValue=function(e){return this.setValue(this.getValue()+e),this.getValue()},s.reset=function(){this._chunk=null,this.setValue(this.getMinValue())},s.setMinValue=function(e){this._minValue>this._maxValue&&(this._maxValue=this._minValue),this._minValue=e},i=r,(c=[{key:"value",get:function(){return this.getValue()}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./ValueComponent (@tapclap.match-x.engine.components)").ValueComponent);n.MultiplierComponent=r,r.KEY="multiplier",cc._RF.pop()},{"./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)"}],"MultiplierHoldComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"44cb7y7cC5bKKR3LiL2W4uv","MultiplierHoldComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MultiplierHoldComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="multiplierHold",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MultiplierHoldComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MultiplierOnBlastComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"56d24Ogv0Zek7j76Y+tZTqr","MultiplierOnBlastComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MultiplierOnBlastComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MultiplierOnBlastComponent=a,a.KEY="multiplierOnBlastComponent",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"58105ZRhCdUkY9Ay1m00A6T","MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.MultiplierOnCombinationComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.MultiplierOnCombinationComponent=a,a.KEY="multiplierOnCombinationComponent",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"MultiplierStarAnimation (scripts.scenes.match3-game.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"76d23BzakVVrJB5fWF82jdW","MultiplierStarAnimation (scripts.scenes.match3-game.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MultiplierStarAnimation=void 0;var r=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),i=e("./Entity (@tapclap.match-x.engine.entities)"),c=function(e){function t(t,n,o,a){var r=e.call(this)||this;return r._multiplierStarNode=t,r._parentNode=n,r._startNode=o,r._targetNode=a,r}return a(t,e),t.prototype._getAction=function(){this._parentNode.getChildByUuid(this._multiplierStarNode.uuid)||this._parentNode.addChild(this._multiplierStarNode);var e=null;e=this._startNode&&this._startNode.parent?this._startNode.parent.convertToWorldSpaceAR(this._startNode.position):new cc.Vec2(cc.winSize.width/2,cc.winSize.height/2);var n=this._targetNode.parent.convertToWorldSpaceAR(this._targetNode.position),o=this._multiplierStarNode.parent.convertToNodeSpaceAR(n);this._multiplierStarNode.scale=0,this._multiplierStarNode.zIndex=i.Entity.LAYER_UPPER+10,this._multiplierStarNode.setPosition(this._multiplierStarNode.parent.convertToNodeSpaceAR(e));var a=e.sub(n).mag()/t.SPEED;return cc.spawn([cc.scaleTo(.05,1,1),cc.moveTo(a,cc.v2(o))])},t.prototype.run=function(){return this.addAction(this._getAction(),this._multiplierStarNode),e.prototype.run.call(this)},t.SPEED=1e3,t}(r.ActionAnimation);n.MultiplierStarAnimation=c,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)"}],"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":[function(e,t,n){"use strict";cc._RF.push(t,"3c7a8rrPI5VO7Q5JurQeFob","MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)"),n.__esModule=!0,n.MultiplierSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),i=e("./Booster (@tapclap.match-x.engine.boosters)"),c=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._strategies=n,o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var p=o.prototype;return p.process=function(){if(this._world.getState(i.Booster.STATE_BOOSTER))return!1;var e=this._world.getEnabledComponent("tiles").grid,t=new Map,n=this._world.getState(r.ExplodeSystem.STATE);if(n&&n.data){this._world.getState("input")&&this._resetMultipliers();for(var p,l=s(this._strategies);!(p=l()).done;)for(var m,u=s(p.value.compute());!(m=u()).done;){var d=m.value;if(t.has(d.entity)){var y=d.entity.getEnabledComponent(a.MultiplierComponent.KEY);y&&t.get(d.entity)&&y.getValue()>t.get(d.entity).value&&t.set(d.entity,d)}else t.set(d.entity,d)}for(var f=0;f<e.rows;f++)for(var h=0;h<e.cols;h++)for(var g,v=s(e.getCell(f,h).entities);!(g=v()).done;){var _=g.value;if(!t.has(_)){var b=_.getEnabledComponent(a.MultiplierComponent.KEY);b&&t.set(_,new c.MultiplierSystemModel(_,b.getValue(),b.getMinValue()))}}}this._world.setState(o.STATE,Array.from(t.values()))},p._resetMultipliers=function(){for(var e,t=this._world.getState(r.ExplodeSystem.STATE),n=this._world.getComponent("tiles").grid,o=new Set,i=s(t.data);!(e=i()).done;)for(var c,p=s(e.value);!(c=p()).done;){var l=c.value.entity;o.add(l)}for(var m=0;m<n.rows;m++)for(var u=0;u<n.cols;u++){var d=n.getCell(m,u),y=d.getEntity();if(y&&!o.has(y)){var f=y.getEnabledComponent(a.MultiplierComponent.KEY),h=d.getEntitiesByComponentName("multiplierHold").length>0;f&&!h&&f.reset()}}},p.postProcess=function(e){if(e)for(var t=this._world.getComponent("tiles").grid,n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++){var i=t.getCell(n,r),c=i.getEntity();if(c){var s=c.getEnabledComponent(a.MultiplierComponent.KEY),p=i.getEntitiesByComponentName("multiplierHold").length>0;s&&p&&s.getValue()>0&&this._world.pushState(o.STATE_HOLD,{cell:i,entity:c})}}},o}(o.PipelineProcessSystem);n.MultiplierSystem=u,u.KEY="multiplier",u.STATE=Symbol("multiplier"),u.STATE_HOLD=Symbol("multiplierHold"),cc._RF.pop()},{"./Booster (@tapclap.match-x.engine.boosters)":"Booster (@tapclap.match-x.engine.boosters)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"51a15qfYtpfJK4Yf+BRdR0d","MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)"),n.__esModule=!0,n.MultiplierSystemModel=void 0;var a=function(){function e(e,t,n,o,a){void 0===n&&(n=0),void 0===o&&(o=null),void 0===a&&(a=null),this._entity=e,this._value=t,this._minValue=n,this._combinationType=o,this._combinationCenterCell=a}var t,n;return t=e,(n=[{key:"entity",get:function(){return this._entity}},{key:"targetEntity",get:function(){return this.entity}},{key:"value",get:function(){return this._value}},{key:"minValue",get:function(){return this._minValue}},{key:"combinationType",get:function(){return this._combinationType}},{key:"combinationCenterCell",get:function(){return this._combinationCenterCell}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.MultiplierSystemModel=a,cc._RF.pop()},{}],"MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"8b550uGDmpW4KwwcIEiuUPG","MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)"),n.__esModule=!0,n.MultiplierSystemStrategy=void 0;var o=function(){function e(e,t){void 0===t&&(t=!1),this._world=e,this._uniqueTargetMode=t}return e.prototype.compute=function(){return[]},e}();n.MultiplierSystemStrategy=o,cc._RF.pop()},{}],"MultiplierViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"0d302xseLJKFYCU99yaPfpo","MultiplierViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.MultiplierViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.property,C=(o=b(d.TypeSpriteFrame),a=b(cc.Sprite),r=b(cc.Label),i=b(cc.Boolean),_((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"backgrounds",p,f(t)),y(t,"backgroundNode",l,f(t)),y(t,"labelNode",m,f(t)),y(t,"startEnabled",u,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a.onLoad=function(){this.node.active=this.startEnabled},a.setCounter=function(e){this.labelNode.string=String(e)},a.setBackground=function(e){var t=this.backgrounds.find(function(t){return t.type===e});if(t&&t.spriteFrame){var n=this.backgroundNode.getComponent(cc.Sprite);n&&(n.spriteFrame=t.spriteFrame)}},o}(cc.Component),p=g(s.prototype,"backgrounds",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=g(s.prototype,"backgroundNode",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g(s.prototype,"labelNode",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g(s.prototype,"startEnabled",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=s))||c);n.MultiplierViewComponent=C,C.TYPE_DEFAULT="default",C.TYPE_PERMANENT="permanent",C.TYPE_BOTH="both",cc._RF.pop()},{"./TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)":"TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)"}],"MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5a38dwJH9FDqYJtH5mZF712","MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)"),n.__esModule=!0,n.MusicMetaModule=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._audioManager=t.audioManager,n._random=t.random,n._playlists=t.playlists,n._currentTrackIndexByPlaylist={},n._currentPlaybackId=-1,n._currentPlaylistKey=null,n._lastPlaylistKey=null,n._userSettings=t.userSettings,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.init=function(){return this._shufflePlaylists(),this._setCurrentTrackIds(),e.prototype.init.call(this)},r.play=function(e){var t=this,n=this._playlists[e];if(this._lastPlaylistKey=e,n&&this._userSettings.get("music")&&(this._currentPlaylistKey&&this._currentPlaylistKey!==e&&this.stop(),this._currentPlaylistKey!==e||-1===this._currentPlaybackId)){var o=this._audioManager.play(n[this._currentTrackIndexByPlaylist[e]]);o>-1&&(this._currentPlaylistKey=e,this._currentPlaybackId=o,this._audioManager.setFinishListener(this._currentPlaybackId,function(){t._currentPlaybackId=-1,t._incrementTrackId(e),t.play(e)}))}},r.resume=function(){this.play(this._lastPlaylistKey)},r.stop=function(){this._audioManager.stop(this._currentPlaybackId),this._currentPlaybackId=-1,this._currentPlaylistKey=null},r.release=function(){return this.stop(),e.prototype.release.call(this)},r._shufflePlaylists=function(){var e=this;Object.values(this._playlists).forEach(function(t){return e._random.shuffle(t)})},r._setCurrentTrackIds=function(){var e=this;Object.keys(this._playlists).forEach(function(t){return e._currentTrackIndexByPlaylist[t]=0})},r._incrementTrackId=function(e){var t=this._currentTrackIndexByPlaylist[e]+1;t>this._playlists[e].length-1&&(t=0),this._currentTrackIndexByPlaylist[e]=t},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.MusicMetaModule=a,a.NAME="music",cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"Nameplate (@tapclap.game-kit.ui.nameplate-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"0a974/kBuJSf68NJ5azhr8B","Nameplate (@tapclap.game-kit.ui.nameplate-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Nameplate=void 0;var o=function(){function e(e){var t=e.key;this._key=t}return Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),e}();n.Nameplate=o,cc._RF.pop()},{}],"NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)":[function(e,t,n){"use strict";cc._RF.push(t,"f998aCAPRhfZKTV9zrV1i33","NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.NameplateListView=n.NameplatePrefab=void 0;var i=e("./NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(){function e(){this.key="",this.prefab=null}return r([p()],e.prototype,"key",void 0),r([p({type:cc.Prefab})],e.prototype,"prefab",void 0),r([s("NameplatePrefab")],e)}();n.NameplatePrefab=l;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._prefabs=[],t}var n;return a(t,e),n=t,t.prototype.add=function(e){var t=this,o=this._prefabs.find(function(t){var n=t.key;return e.key===n}).prefab;if(o){var a=cc.instantiate(o),r=a.getComponent(i.NameplateView);r&&(r.setModel(e),r.updateView(),this.schedule(function(){return r.updateView()},1,cc.macro.REPEAT_FOREVER),this.node.addChild(a),a.on(i.NameplateView.EVENT_TOUCH,function(){return t.node.emit(n.EVENT_TOUCH,e)}))}},t.prototype.delete=function(){},r([p({type:[l],visible:!0})],t.prototype,"_prefabs",void 0),n=r([s],t)}(cc.Component);n.NameplateListView=m,m.EVENT_TOUCH="touch_end",cc._RF.pop()},{"./NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)":"NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)"}],"NameplateManager (@tapclap.game-kit.ui.nameplate-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"5b4496p8dNdQYd5Ao58N7E2","NameplateManager (@tapclap.game-kit.ui.nameplate-manager)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.NameplateManager=void 0;var a=e("./NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)"),r=function(){function e(e){var t=e.nameplates,n=void 0===t?{}:t,o=e.actionManager,a=e.handlers,r=void 0===a?{}:a;this._nameplates={},this._views={},this._defaultViewKey="default",this._nameplates=n,this._handlers=r,this._actionManager=o}return e.prototype.registerNameplate=function(e,t){void 0===t&&(t=this._defaultViewKey),this._views[t].add(e)},e.prototype.unregisterNameplate=function(e,t){void 0===t&&(t=this._defaultViewKey),this._views[t].delete(e)},e.prototype.setNameplateListView=function(e,t){void 0===t&&(t=this._defaultViewKey),this._views[t]=e},e.prototype.init=function(){var e=this;Array.isArray(this._nameplates)?(this._nameplates.forEach(function(t){e.registerNameplate(t)}),this._subscribeViewToClickEvent(this._views[this._defaultViewKey])):Object.entries(this._nameplates).forEach(function(t){var n=o(t,2),a=n[0];n[1].forEach(function(t){e.registerNameplate(t,a)}),e._subscribeViewToClickEvent(e._views[a])})},e.prototype._subscribeViewToClickEvent=function(e){var t=this;e.node.on(a.NameplateListView.EVENT_TOUCH,function(e){var n=t._handlers[e.key],o=n.action,a=n.options;t._actionManager.run(o,a)})},e}();n.NameplateManager=r,cc._RF.pop()},{"./NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)":"NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)"}],"NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)":[function(e,t,n){"use strict";cc._RF.push(t,"45ea74vfUNarb1283YT2SCx","NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.NameplateView=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=e("./BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._durationLabel=null,t._durationLabelContainer=null,t._badge=null,t._model=null,t}var n;return a(t,e),n=t,t.prototype.onLoad=function(){this.updateView()},t.prototype.setModel=function(e){this._model=e},t.prototype.onClick=function(){this.node.emit(n.EVENT_TOUCH)},t.prototype.updateView=function(){if(this._model&&this._durationLabel&&(this.node.active=this._model.active,this._model.active)){var e=this._model.timeLeft.getDuration();this._setActiveBadge(this._model.badge),e===1/0?null!==this._durationLabelContainer&&(this._durationLabelContainer.active=!1):(null!==this._durationLabelContainer&&(this._durationLabelContainer.active=!0),this._durationLabel.setParams({timeLeft:e}))}},t.prototype._setActiveBadge=function(e){this._badge&&this._badge.setActive(e)},t.EVENT_TOUCH="event_touch",r([l({type:i.I18NLabel,visible:!0})],t.prototype,"_durationLabel",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_durationLabelContainer",void 0),r([l({type:c.BadgeView,visible:!0})],t.prototype,"_badge",void 0),n=r([p],t)}(cc.Component);n.NameplateView=m,cc._RF.pop()},{"./BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)":"BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"NeedPiggybankTutorialActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"8b226ETfT1eh4Tr98bfrpCt","NeedPiggybankTutorialActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NeedPiggybankTutorialActionCondition=void 0;var r=function(e){function t(t){var n=t.storage,o=t.storagePrefixKey,a=e.call(this)||this;return a._storage=n,a._tutorialPassedFlagKey=o+":tutorial:passed",a}return a(t,e),t.prototype.check=function(){var e=this;return this._storage.getItem(this._tutorialPassedFlagKey).then(function(t){return t||e._storage.setItem(e._tutorialPassedFlagKey,!0),!t})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.NeedPiggybankTutorialActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)":[function(e,t,n){"use strict";cc._RF.push(t,"d5134zELulZiqL3IDD1uTGm","NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NeedShowCakeRewardWindowActionCondition=void 0;var r=function(e){function t(t){var n=t.progressModuleResolver,o=t.cakeRewardModuleResolver,a=e.call(this)||this;return a._cakeReward=o.get(),a._progress=n.get(),a}return a(t,e),t.prototype.check=function(){return this._cakeReward.isActive()&&this._cakeReward.prevPhaseIndex!==this._cakeReward.currentPhaseIndex&&this._progress.hasChange},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.NeedShowCakeRewardWindowActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"87e93lXWi9bFKoq7qU6dmgQ","NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)"),n.__esModule=!0,n.NeedTutorialForHardLevelActionCondition=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._progress=t.moduleResolvers.progress.get(),n._levels=t.moduleResolvers.levels.get(),n._userManager=t.userManager,n._tutorialKey=t.tutorialKey,n._saveState=t.saveState||!1,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.check=function(){var e=this._levels.getLevel(this._progress.value),t=this._userManager.getCurrentUser(),n=t.settings.get(this._tutorialKey);return!(!e||!e.hard||n||(t.settings.set(this._tutorialKey,!0),0))},a}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.NeedTutorialForHardLevelActionCondition=a,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"NeighborCellsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"553965qHoldyJnCDQa+7FHP","NeighborCellsComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NeighborCellsComponent=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._directions=t.directions,n}return a(t,e),Object.defineProperty(t.prototype,"directions",{get:function(){return this._directions},enumerable:!1,configurable:!0}),t.KEY="neighborCells",t}(e("./EmitComponent (@tapclap.match-x.engine.components)").EmitComponent);n.NeighborCellsComponent=r,cc._RF.pop()},{"./EmitComponent (@tapclap.match-x.engine.components)":"EmitComponent (@tapclap.match-x.engine.components)"}],"NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"57a60sDX6FXPacgWqwKZHvh","NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.NeighborEmitTargetStrategy=void 0;var c=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),s=e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),p=e("./SingleRetriever (@tapclap.match-x.engine.retrievers)"),l=function(e){function t(t){var n=e.call(this,t)||this;return n._dirs=t.dirs||c.NeighborRetriever.DIRECTION_4,n}return a(t,e),t.prototype.getEmitTarget=function(e){var t,n=e.cell,o=e.grid;if(this._emitData!==e){this._emitData=e,this._cells=new c.NeighborRetriever({chunk:[n],dirs:this._dirs}).retrieve(o).flat();var a=new p.SingleRetriever({cell:n}).retrieve(o).flat();(t=this._cells).push.apply(t,i(a))}for(;this._cells.length>0;){var r=this._cells.pop(),s=r.getEntity(e.entity.layer);if(s&&this._isCorrectEntity(s,this._excludedEntityTypes))return r}return null},t}(s.EmitTargetStrategy);n.NeighborEmitTargetStrategy=l,cc._RF.pop()},{"./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)","./SingleRetriever (@tapclap.match-x.engine.retrievers)":"SingleRetriever (@tapclap.match-x.engine.retrievers)"}],"NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"a067e0RditQXLzueq7eYQpQ","NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.NeighborExplodeRetriever=void 0;var c=e("./Matrix (@tapclap.match-x.engine.models)"),s=function(e){function t(n){var o=n.dirs,a=n.chunk,i=r(n,["dirs","chunk"]),c=e.call(this,i)||this;return c._dirs=o||t.DIRECTION_4,c._chunk=a||[],c}return a(t,e),t.prototype.retrieve=function(e){var t,n,o,a,r,s,p=[],l=new c.Matrix(e.rows,e.cols,0);try{for(var m=i(this._chunk),u=m.next();!u.done;u=m.next())l[(f=u.value).row][f.col]=1}catch(C){t={error:C}}finally{try{u&&!u.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}try{for(var d=i(this._chunk),y=d.next();!y.done;y=d.next()){var f=y.value;try{for(var h=(r=void 0,i(this._dirs)),g=h.next();!g.done;g=h.next()){var v=g.value,_=f.row+v[0],b=f.col+v[1];if(e.isContain(_,b)){if(l[_][b])continue;l[_][b]=1,p.push(e.getCell(_,b))}}}catch(w){r={error:w}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}}}catch(S){o={error:S}}finally{try{y&&!y.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return[this.filter(p)]},t.KEY="neighbor",t.DIRECTION_4=[[-1,0],[1,0],[0,-1],[0,1]],t.DIRECTION_8=[[-1,0],[1,0],[0,-1],[0,1],[-1,1],[1,1],[1,-1],[-1,-1]],t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.NeighborExplodeRetriever=s,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)"}],"NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"da32dgCDXVa0qzceTwF9QbW","NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NeighborNoFilterExplodeRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.filter=function(e){return e},t.KEY="neighbor_no_filter",t}(e("./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").NeighborExplodeRetriever);n.NeighborNoFilterExplodeRetriever=r,cc._RF.pop()},{"./NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"NeighborRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"8b98ewBLvFQUaCLO0N/bqRo","NeighborRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.NeighborRetriever=void 0;var o=e("./Matrix (@tapclap.match-x.engine.models)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n,o=void 0===t?{}:t,a=o.chunk,i=void 0===a?[]:a,c=o.dirs,s=void 0===c?r.DIRECTION_4:c;return(n=e.call(this)||this)._chunk=i,n._dirs=s,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.retrieve=function(e){for(var t,n=[],r=new o.Matrix(e.rows,e.cols,0),i=a(this._chunk);!(t=i()).done;){var c=t.value;r[c.row][c.col]=1}for(var s,p=a(this._chunk);!(s=p()).done;)for(var l,m=s.value,u=a(this._dirs);!(l=u()).done;){var d=l.value,y=m.row+d[0],f=m.col+d[1];if(e.isContain(y,f)){if(r[y][f])continue;r[y][f]=1,n.push(e.getCell(y,f))}}return[n]},r}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.NeighborRetriever=s,s.DIRECTION_4=[[-1,0],[1,0],[0,-1],[0,1]],s.DIRECTION_8=[[-1,0],[1,0],[0,-1],[0,1],[-1,1],[1,1],[1,-1],[-1,-1]],cc._RF.pop()},{"./Matrix (@tapclap.match-x.engine.models)":"Matrix (@tapclap.match-x.engine.models)","./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"d0231ZIPpFYvrXmg8cbGXUq","NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NeighborWalkPathStrategy=void 0;var r=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),i=e("./WalkComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t,n){return n.getEnabledComponentByClass(i.WalkComponent)?new r.NeighborRetriever({chunk:[t]}).retrieve(e).flat():[]},t.KEY="neighbor",t}(e("./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkPathStrategy);n.NeighborWalkPathStrategy=c,cc._RF.pop()},{"./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"110a7aG35JbgZB3c7TJQlFW","NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)"),n.__esModule=!0,n.NetworkErrorWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._gateway=t.gateway,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._configureWindow=function(e){var t=this;e.events.on("buttonClick",function(){var n=e.getLayout("footer").getControl("tryAgain");n.disabled=!0,t._caller.has(a.CALLER_DEFAULT)?t._caller.run(a.CALLER_DEFAULT):t._runGatewayQueue().then(function(){return t.closeWindow(e)}).catch(function(){return n.disabled=!1})})},r._runGatewayQueue=function(){return this._gateway.process(!0)},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.NetworkErrorWindowAction=a,a.CALLER_DEFAULT="default",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"NewUserActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"f40f8tPXHZcnZh9qYL6gbgW","NewUserActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NewUserActionCondition=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._newUser=t.newUser,n._userManager=t.userManager,n}return a(t,e),t.prototype.check=function(){var e=this;return Promise.resolve().then(function(){return e._userManager.getCurrentUser().isFirstVisit===e._newUser})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.NewUserActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"21ab89Crhhf3p0kHGTRKRM9","NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.NextMatch3GameAction=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._progress=t.moduleResolvers.progress.get(),n._levels=t.moduleResolvers.levels.get(),n._metaGame=t.gameResolver.get(),n._forceEndHandlers=t.forceEndHandlers||[],n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._hasForceEnd=function(){for(var e,t=o(this._forceEndHandlers);!(e=t()).done;)if(e.value.handle(this._metaGame))return!0;return!1},r._getNextLevel=function(){return this._progress&&this._levels?this._levels.getLevel(this._progress.value):null},r.run=function(){if(this._hasForceEnd())return this._caller.run(a.CALLER_END);var e=this._getNextLevel();return e?this._caller.run(a.CALLER_NEXT,{level:e}):this._caller.run(a.CALLER_END)},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.NextMatch3GameAction=c,c.CALLER_NEXT="next",c.CALLER_END="end",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ce72fgsB7dYeaLpqHAhDz/m","NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)"),n.__esModule=!0,n.NoFundsAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._closeAfter=t.closeAfter,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){var t=this;e.events.on("purchase",function(){t._caller.has(a.CALLER_COINS_SHOP)&&t._caller.run(a.CALLER_COINS_SHOP,{closeAfter:t._closeAfter}).then(function(){t.closeWindow(e)})})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.NoFundsAction=a,a.CALLER_COINS_SHOP="coinsShop",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"NoItemOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2d818m5BphAx56Jcp/K+tlb","NoItemOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.NoItemOfferState=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._spec=t.spec,n._name=t.name,n._userManager=t.userManager,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.resolve=function(){var e=this._userManager.getCurrentUser();return!!e&&!e.items.get(this._spec,this._name)},a}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.NoItemOfferState=a,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"NodeHolder (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p;function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"5d8dfrkehJauJpQE9r1cVBe","NodeHolder (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.NodeHolder=void 0;var u=cc._decorator,d=u.ccclass,y=u.property,f=(o=d("NodeHolder"),a=y(),r=y(cc.Node),o((s=m((c=function(){l(this,"key",s,this),l(this,"node",p,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=m(c.prototype,"node",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.NodeHolder=f,cc._RF.pop()},{}],"NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"760e2XUcANSipYovqsNlG5b","NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.NotReplaceByStartBoosterComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="notReplaceByStartBooster",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.NotReplaceByStartBoosterComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"NotificationAdapter (@tapclap.sdk-x.notification)":[function(e,t,n){"use strict";cc._RF.push(t,"69fe7ht0hlY9aghOm3sanQP","NotificationAdapter (@tapclap.sdk-x.notification)"),n.__esModule=!0,n.NotificationAdapter=void 0;var o=function(){function e(){}var t=e.prototype;return t.canSubscribe=function(){return Promise.reject('Method "canSubscribe" not supported')},t.subscribe=function(){return Promise.reject('Method "subscribe" not supported')},t.unsubscribe=function(){return Promise.reject('Method "unsubscribe" not supported')},e}();n.NotificationAdapter=o,cc._RF.pop()},{}],"NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9dfe9qzz8pd0pvpyVUU2t4t","NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)"),n.__esModule=!0,n.NotificationRequestWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._notificationAdapter=t.notificationAdapter,n._windowTriggerEvent=t.windowTriggerEvent,n._textPrefix=t.textPrefix,n._reason=t.reason||"default",n._storage=t.storage,n._storageKey=t.storageKey,n._cooldownDuration=t.cooldownDuration,n._ignoreCooldown=t.ignoreCooldown,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._configureWindow=function(e){var t=this;this._windowTriggerEvent&&e.events.on(this._windowTriggerEvent,function(){return t._notificationAdapter.subscribe().then(function(){return t.closeWindow(e)}).catch(function(){return t.closeWindow(e)})});var n=e.getLayout("content");n&&(n.setImage(this._reason),n.setText(this._textPrefix+"."+this._reason))},r.run=function(){var t=this;return this._notificationAdapter.canSubscribe().then(function(){return t._storage.getItem(t._storageKey)}).then(function(n){var o=new Date(n||0),a=new Date;if(t._ignoreCooldown||o.getTime()+t._cooldownDuration.getMilliseconds()<a.getTime())return t._storage.setItem(t._storageKey,new Date).then(function(){return e.prototype.run.call(t)})}).catch(function(){})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.NotificationRequestWindowAction=a,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"NumberFormatter (@tapclap.game-kit.ui.number-formatter)":[function(e,t,n){"use strict";cc._RF.push(t,"d98c01vfZpR2q4ljD2vgbA9","NumberFormatter (@tapclap.game-kit.ui.number-formatter)"),n.__esModule=!0,n.NumberFormatter=void 0;var o=function(){function e(){}return e.shortNumber=function(t,n){var o=void 0===n?{}:n,a=o.minDigits,r=void 0===a?e.MIN_SHORT_DIGITS:a,i=o.fixed,c=void 0===i?e.PRECISION_FIXED:i;if(t.toString().length>r){var s=Math.ceil(t.toString().length/e.PRECISION)-1;s>0&&(t=""+Math.floor(t/Math.pow(1e3,s)*Math.pow(10,e.PRECISION_FIXED))/Math.pow(10,e.PRECISION_FIXED).toFixed(c)+e.PRECISION_POSTFIXES[s-1])}return t.toString()},e}();n.NumberFormatter=o,o.MIN_SHORT_DIGITS=4,o.PRECISION=3,o.PRECISION_POSTFIXES="KMG",o.PRECISION_FIXED=1,cc._RF.pop()},{}],"ObjectFactory (@tapclap.utils-js.di)":[function(e,t,n){"use strict";cc._RF.push(t,"53c3b9IRzJIkJheUjFGwEwp","ObjectFactory (@tapclap.utils-js.di)"),n.__esModule=!0,n.ObjectFactory=void 0;var o=e("./InstanceBuilderDI (@tapclap.utils-js.di)"),a=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),this._di=e,this._config=t,this._ctx=n}return e.prototype.create=function(e,t,n){void 0===t&&(t=[]);var a=void 0===n?{}:n,r=a.merge,i=void 0!==r&&r,c=a.rawWrap,s=void 0!==c&&c,p=this._config[e];if(!(p instanceof o.InstanceBuilderDI))throw new Error(e+" must be InstanceBuilderDI");return p=p.snapshot(),t.forEach(function(e,t){p=p.setArg(e,t,i,s)}),this._di.createFromBuilder(p,this._ctx,e)},e}();n.ObjectFactory=a,cc._RF.pop()},{"./InstanceBuilderDI (@tapclap.utils-js.di)":"InstanceBuilderDI (@tapclap.utils-js.di)"}],"ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"36aeeeMkidHT5Yk2FmTt2ob","ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)"),n.__esModule=!0,n.ObjectStorageAdapter=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getData=function(){var e=this;return Promise.resolve().then(function(){return e._storage.getKeys()}).then(function(t){return t.filter(function(t){return 0===t.search(e._getNamespace())}).map(function(t){return t.replace(""+e._getNamespace()+e._storage.separator,"")}).filter(function(e){return"$"!==e[0]})}).then(function(t){var n=t.map(function(t){return e._storage.getItem(e._getKey(t)).then(function(e){var n;return e&&Object(((n={})[t]=e,n))})});return Promise.all(n).then(function(e){return Object.assign.apply(Object,[{}].concat(e))})})},r.setData=function(e){var t=this;return void 0===e&&(e={}),Promise.all(Object.keys(e).map(function(n){return t._storage.setItem(t._getKey(n),e[n])})).then(function(){return t._setUpdatedAt()})},r.getSyncData=function(){return Promise.all([this.getData(),this._getUpdatedAt()]).then(function(e){return{data:e[0],updatedAt:e[1]}})},a}(e("./StorageAdapter (@tapclap.game-kit.data-storage.adapters)").StorageAdapter);n.ObjectStorageAdapter=a,cc._RF.pop()},{"./StorageAdapter (@tapclap.game-kit.data-storage.adapters)":"StorageAdapter (@tapclap.game-kit.data-storage.adapters)"}],"Offer (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"496b5oXZXVZDYop9hBrUJj8","Offer (@tapclap.game-kit.offer-manager)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.Offer=void 0;var a=function(){function e(t){var n=t.id,o=t.type,a=t.payload,r=void 0===a?{}:a,i=t.defaultState,c=void 0===i?e.STATE_AVAILABLE:i,s=t.states,p=void 0===s?{}:s;this._id=n,this._type=o,this._payload=r,this._defaultState=c,this._states=p}return e.prototype._getStates=function(){var t,n,a=[];try{for(var r=o(e.STATES),i=r.next();!i.done;i=r.next()){var c=i.value;this._states[c]&&(a=a.concat(this._states[c]))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return a},e.prototype._resolveState=function(e){var t,n;if(this._states[e]){try{for(var a=o(this._states[e]),r=a.next();!r.done;r=a.next()){var i=r.value;if(i&&!i.resolve())return!1}}catch(c){t={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){var t,n;try{for(var a=o(e.STATES),r=a.next();!r.done;r=a.next()){var i=r.value;if(this._resolveState(i))return i}}catch(c){t={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return this._defaultState},enumerable:!1,configurable:!0}),e.prototype.update=function(){var e=this;this._getStates().forEach(function(t){return t.update(e)})},e.prototype.reset=function(){var e=this;this._getStates().forEach(function(t){return t.reset(e)})},e.TYPE_ACTION="action",e.TYPE_PURCHASE="purchase",e.TYPE_AD="ad",e.TYPE_VIRAL="viral",e.TYPE_EXPAND="expand",e.STATE_AVAILABLE="available",e.STATE_UNAVAILABLE="unavailable",e.STATE_DISABLED="disabled",e.STATES=[e.STATE_DISABLED,e.STATE_UNAVAILABLE,e.STATE_AVAILABLE],e.TIMER_USERITEM="userItem",e}();n.Offer=a,cc._RF.pop()},{}],"OfferFactory (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"eb3ceoeimlR7JK97aa4bKBs","OfferFactory (@tapclap.game-kit.offer-manager)"),n.__esModule=!0,n.OfferFactory=void 0;var o=e("./Offer (@tapclap.game-kit.offer-manager)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(){function e(e,t){this._builderFactory=e,this._stateFactory=t}return e.prototype.create=function(e){var t=e.id,n=e.type,r=e.payload,i=e.defaultState,c=e.states,s={id:t,type:n,defaultState:i,states:{}};if(r){var p=this._builderFactory.create(n);p&&(s.payload=p.build(e.payload))}if(c)for(var l,m=a(o.Offer.STATES);!(l=m()).done;){var u=l.value;if(c[u]){for(var d,y=[],f=a(c[u]);!(d=f()).done;){var h=d.value;y.push(this._stateFactory.create(h.type,[h],{merge:!0}))}s.states[u]=y}}return new o.Offer(s)},e}();n.OfferFactory=c,cc._RF.pop()},{"./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)"}],"OfferIsAvailableActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"ffbf4h9x11U9oEXm2hEBhyl","OfferIsAvailableActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OfferIsAvailableActionCondition=void 0;var r=e("./ActionCondition (@tapclap.game-kit.action-manager)"),i=e("./Offer (@tapclap.game-kit.offer-manager)"),c=function(e){function t(t){var n=t.offerManager,o=t.strategyKey,a=e.call(this)||this;return a._offerManager=n,a._strategyKey=o,a}return a(t,e),t.prototype.check=function(){var e=this._offerManager.getOfferList(this._strategyKey).some(function(e){var t,n,o=e.state===i.Offer.STATE_AVAILABLE;return(null===(t=e.payload)||void 0===t?void 0:t.product)?(null===(n=e.payload)||void 0===n?void 0:n.product.isAvailable)&&o:o});return Promise.resolve(e)},t}(r.ActionCondition);n.OfferIsAvailableActionCondition=c,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)"}],"OfferManager (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"6984dkxpeBfKrNiCDc1kIkZ","OfferManager (@tapclap.game-kit.offer-manager)"),n.__esModule=!0,n.OfferManager=void 0;var o=function(){function e(e){void 0===e&&(e={}),this._strategies=e}var t=e.prototype;return t._getOfferStrategy=function(e){return this._strategies[e]},t.getOfferGrid=function(e){var t=this._getOfferStrategy(e);return t?t.getOffers():[]},t.getOfferList=function(e){return this.getOfferGrid(e).reduce(function(e,t){return e.concat(t)},[])},t.getOfferById=function(e,t){return this.getOfferList(e).find(function(e){return e.id===t})},t.init=function(){return Promise.all(Object.values(this._strategies).map(function(e){return e.init()}))},e}();n.OfferManager=o,cc._RF.pop()},{}],"OfferPayloadBuilder (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"a3271CJAsJfb4AA7qWalCov","OfferPayloadBuilder (@tapclap.game-kit.offer-manager)"),n.__esModule=!0,n.OfferPayloadBuilder=void 0;var o=function(){function e(){}return e.prototype.build=function(e){return e},e}();n.OfferPayloadBuilder=o,cc._RF.pop()},{}],"OfferState (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"fc835iEHpRenIGa358hTkPY","OfferState (@tapclap.game-kit.offer-manager)"),n.__esModule=!0,n.OfferState=void 0;var o=function(){function e(){}var t=e.prototype;return t.update=function(){},t.reset=function(){},t.resolve=function(){return!0},e}();n.OfferState=o,cc._RF.pop()},{}],"OfferStrategy (@tapclap.game-kit.offer-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"3d3felvvXZYkIN+lHz04JLI","OfferStrategy (@tapclap.game-kit.offer-manager)"),n.__esModule=!0,n.OfferStrategy=void 0;var o=function(){function e(){}var t=e.prototype;return t.getOffers=function(){return[]},t.isValid=function(){return!0},t.init=function(){return Promise.resolve()},e}();n.OfferStrategy=o,cc._RF.pop()},{}],"OfferTimer (@tapclap.utils-js.timer)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b1eb6+HIU5BUa10L52zs+Ob","OfferTimer (@tapclap.utils-js.timer)"),n.__esModule=!0,n.OfferTimer=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getFinishDate=function(){},a}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.OfferTimer=a,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"OffersConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"a2f4f1QCxNcGIY/gCM94c3N","OffersConfig (scripts.config)"),n.__esModule=!0,n.SaleUnlimitedLivesOffers=n.SaleOffers=n.PlatformPromoGifts=n.PiggybankOffers=n.ParrotFailWalkOffers=n.MovesOffers=n.LivesShopOffers=n.DailyRewardOffers=n.CommonOffers=n.BoosterPackOffers=n.BoosterOffers=n.BombMovesOffers=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G=e("./Offer (@tapclap.game-kit.offer-manager)"),N=e("./ActionConstants (scripts.config)"),W=[[{type:G.Offer.TYPE_AD,payload:{items:[{spec:"currency",name:"coins",amount:30}]},defaultState:G.Offer.STATE_DISABLED,states:(o={},o[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"shop-coins-30",limit:5,cooldownTime:864e5},{type:"hasAd"}],o)}],[{id:"coins300",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins300"},states:(a={},a[G.Offer.STATE_DISABLED]=[{type:"sale"}],a)},{id:"coins1500",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins1500"},states:(r={},r[G.Offer.STATE_DISABLED]=[{type:"sale"}],r)}],[{id:"coins3000",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins3000"},states:(i={},i[G.Offer.STATE_DISABLED]=[{type:"sale"}],i)},{id:"coins8000",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins8000"},states:(c={},c[G.Offer.STATE_DISABLED]=[{type:"sale"}],c)}]];n.CommonOffers=W;var H=[[{id:"coins300andGift",type:G.Offer.TYPE_PURCHASE,payload:{oldAmount:300,product:"coins300andGift",stickers:[{key:"profit",style:"hit",label:"+50%"}]},defaultState:G.Offer.STATE_DISABLED,states:(s={},s[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleDoubleCoinsDateRange"}],s)}],[{id:"coins1500andGift",type:G.Offer.TYPE_PURCHASE,payload:{oldAmount:1500,product:"coins1500andGift",stickers:[{key:"profit",style:"hit",label:"+50%"}]},defaultState:G.Offer.STATE_DISABLED,states:(p={},p[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleDoubleCoinsDateRange"}],p)}],[{id:"coins3000andGift",type:G.Offer.TYPE_PURCHASE,payload:{oldAmount:3e3,product:"coins3000andGift",stickers:[{key:"profit",style:"hit",label:"+50%"}]},defaultState:G.Offer.STATE_DISABLED,states:(l={},l[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleDoubleCoinsDateRange"}],l)}],[{id:"coins8000andGift",type:G.Offer.TYPE_PURCHASE,payload:{oldAmount:8e3,product:"coins8000andGift",stickers:[{key:"profit",style:"hit",label:"+50%"}]},defaultState:G.Offer.STATE_DISABLED,states:(m={},m[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleDoubleCoinsDateRange"}],m)}]];n.SaleOffers=H;var V=[[{id:"coins300andUnlimitedLives",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins300andUnlimitedLives",stickers:[{key:"profit",style:"best",label:""}]},defaultState:G.Offer.STATE_DISABLED,states:(u={},u[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleUnlimitedLivesDateRange"}],u)}],[{id:"coins1500andUnlimitedLives",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins1500andUnlimitedLives",stickers:[{key:"profit",style:"best",label:""}]},defaultState:G.Offer.STATE_DISABLED,states:(d={},d[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleUnlimitedLivesDateRange"}],d)}],[{id:"coins3000andUnlimitedLives",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins3000andUnlimitedLives",stickers:[{key:"profit",style:"best",label:""}]},defaultState:G.Offer.STATE_DISABLED,states:(y={},y[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleUnlimitedLivesDateRange"}],y)}],[{id:"coins8000andUnlimitedLives",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins8000andUnlimitedLives",stickers:[{key:"profit",style:"best",label:""}]},defaultState:G.Offer.STATE_DISABLED,states:(f={},f[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:17},{type:"saleUnlimitedLivesDateRange"}],f)}]];n.SaleUnlimitedLivesOffers=V;var K=[[{id:"coins300BoosterPack",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins300BoosterPack"},defaultState:G.Offer.STATE_DISABLED,states:(h={},h[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:16}],h)},{id:"coins1500BoosterPack",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins1500BoosterPack"},defaultState:G.Offer.STATE_DISABLED,states:(g={},g[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:16}],g)},{id:"coins3000BoosterPack",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins3000BoosterPack"},defaultState:G.Offer.STATE_DISABLED,states:(v={},v[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:16}],v)},{id:"coins7000BoosterPack",type:G.Offer.TYPE_PURCHASE,payload:{product:"coins7000BoosterPack"},defaultState:G.Offer.STATE_DISABLED,states:(_={},_[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:16}],_)}]];n.BoosterPackOffers=K;var U=[[{id:"breakPiggybank",type:G.Offer.TYPE_PURCHASE,payload:{product:"breakPiggybank"}},{id:"breakPiggybankFinal",type:G.Offer.TYPE_PURCHASE,payload:{product:"breakPiggybankFinal"}}],[{id:"piggybankAd",type:G.Offer.TYPE_AD,payload:{items:[{spec:"piggybank",name:"coins"}]},defaultState:G.Offer.STATE_DISABLED,states:(b={},b[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"piggybank",limit:3,cooldownTime:864e5,delayTime:6e5},{type:"hasAd"}],b)}]];n.PiggybankOffers=U;var Y=[[{type:G.Offer.TYPE_AD,payload:{items:[{spec:"attempts",name:"lives",amount:1}]},defaultState:G.Offer.STATE_DISABLED,states:(C={},C[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"compareItemCount",spec:"attempts",name:"lives",comparer:"<",value:5},{type:"limitPerTime",spec:"adsLimit",name:"livesShop-1",limit:5,cooldownTime:864e5},{type:"hasAd"}],C)},{type:G.Offer.TYPE_PURCHASE,payload:{product:"coins300to5Lives"},defaultState:G.Offer.STATE_UNAVAILABLE,states:(w={},w[G.Offer.STATE_AVAILABLE]=[{type:"compareAttempts",game:"common",module:"attempts",comparer:"=",value:0}],w)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"unlimitedLives"}}],[{type:G.Offer.TYPE_ACTION,payload:{prefabKey:"attemptsFromFriends",label:"social.request.attempts.header",buttonLabel:"social.request.attempts.button",action:{key:N.ACTIONS.WINDOW_MESSAGE_CENTER,options:{currentTabResolverKey:"fromAttemptsOffer"}}},defaultState:G.Offer.STATE_DISABLED,states:(S={},S[G.Offer.STATE_AVAILABLE]=[{type:"hasFeatureFriends"}],S)}]];n.LivesShopOffers=Y;var z=[[{type:G.Offer.TYPE_AD,payload:{items:[{spec:"match3",name:"moves",amount:3}],moves:{amount:3}},defaultState:G.Offer.STATE_UNAVAILABLE,states:(E={},E[G.Offer.STATE_UNAVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"}],E[G.Offer.STATE_AVAILABLE]=[{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"moves-3",limit:1,cooldownTime:864e5},{type:"hasAd"}],E)},{type:G.Offer.TYPE_AD,payload:{items:[{spec:"match3",name:"moves",amount:3}],moves:{amount:3}},defaultState:G.Offer.STATE_UNAVAILABLE,states:(x={},x[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"moves-3",limit:1,cooldownTime:6e5},{type:"hasAd"}],x)},{type:G.Offer.TYPE_PURCHASE,payload:{product:"moves",moves:{amount:5}},states:(A={},A[G.Offer.STATE_AVAILABLE]=[{type:"priceProgression",progression:200}],A)}]];n.MovesOffers=z;var q=[[{type:G.Offer.TYPE_AD,payload:{items:[{spec:"match3",name:"bombMoves",amount:5}],moves:{amount:5}},defaultState:G.Offer.STATE_UNAVAILABLE,states:(O={},O[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"bombMoves-5",limit:2,cooldownTime:864e5},{type:"hasAd"}],O)},{type:G.Offer.TYPE_PURCHASE,payload:{product:"bombMoves",moves:{amount:5}},states:(R={},R[G.Offer.STATE_AVAILABLE]=[{type:"priceProgression",progression:200}],R)}]];n.BombMovesOffers=q;var Z=[[{type:G.Offer.TYPE_AD,payload:{items:[{spec:"match3",name:"parrotFailWalk",amount:1}],moves:{amount:1}},defaultState:G.Offer.STATE_UNAVAILABLE,states:(P={},P[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"compareItemCount",spec:"currency",name:"coins",comparer:"<",value:2e3},{type:"limitPerTime",spec:"adsLimit",name:"parrotFailWalk-1",limit:2,cooldownTime:864e5},{type:"hasAd"}],P)},{type:G.Offer.TYPE_PURCHASE,payload:{product:"parrotFailWalk",moves:{amount:1}},states:(k={},k[G.Offer.STATE_AVAILABLE]=[{type:"priceProgression",progression:200}],k)}]];n.ParrotFailWalkOffers=Z;var X=[[{type:G.Offer.TYPE_PURCHASE,payload:{product:"trowelSet",stickers:[{key:"discount",label:"-10%"}]},defaultState:G.Offer.STATE_DISABLED,states:(T={},T[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:4}],T)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"multiplierSet",stickers:[{key:"discount",label:"-10%"}]},defaultState:G.Offer.STATE_DISABLED,states:(I={},I[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:16}],I)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"cartSet",stickers:[{key:"discount",label:"-10%"}]},defaultState:G.Offer.STATE_DISABLED,states:(M={},M[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:8}],M)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"catSet",stickers:[{key:"discount",label:"-10%"}]},defaultState:G.Offer.STATE_DISABLED,states:(j={},j[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:12}],j)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"trowelCartSet",stickers:[{key:"discount",label:"-10%"}]},defaultState:G.Offer.STATE_DISABLED,states:(L={},L[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:8}],L)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"explorerSet",stickers:[{key:"discount",label:"-15%"}]},defaultState:G.Offer.STATE_DISABLED,states:(F={},F[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:12}],F)}],[{type:G.Offer.TYPE_PURCHASE,payload:{product:"invincibleSet",stickers:[{key:"discount",label:"-20%"}]},defaultState:G.Offer.STATE_DISABLED,states:(D={},D[G.Offer.STATE_AVAILABLE]=[{type:"minProgress",game:"common",module:"progress",value:12}],D)}]];n.BoosterOffers=X;var J=[[{id:"dailyRewardAd",type:G.Offer.TYPE_AD,payload:{items:[{spec:"dailyReward",name:"coins"}]},defaultState:G.Offer.STATE_DISABLED,states:(B={},B[G.Offer.STATE_AVAILABLE]=[{type:"noItem",spec:"tags",name:"payer"},{type:"hasAd"}],B)}]];n.DailyRewardOffers=J;var Q=[[{id:"vkPromoReward",type:G.Offer.TYPE_EXPAND,payload:{items:[{spec:"attempts",name:"unlimited",duration:86400}]},defaultState:G.Offer.STATE_AVAILABLE}]];n.PlatformPromoGifts=Q,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)"}],"OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3f280TyLYFCNqukk5xOT+Fw","OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)"),n.__esModule=!0,n.OffersMetaModule=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._offerManager=t,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.updateState=function(e,t){this._offerManager.getOfferList(e).includes(t)&&t.update()},r.resetState=function(e){this._offerManager.getOfferList(e).forEach(function(e){return e.reset()})},r.getOffers=function(e){return this._offerManager.getOfferList(e)},r.init=function(){return this._offerManager.init()},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.OffersMetaModule=a,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"OffersStrategiesConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"880829FzlteHZpLo/NA35dJ","OffersStrategiesConfig (scripts.config)"),n.__esModule=!0,n.OffersStrategiesConfig=void 0;var o=e("./DI (@tapclap.utils-js.di)"),a=e("./OffersConfig (scripts.config)"),r=e("./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)"),i=[o.DI.instance(r.SimpleOfferStrategy,o.DI.cfg("OfferFactory"),a.BoosterPackOffers),o.DI.instance(r.SimpleOfferStrategy,o.DI.cfg("OfferFactory"),a.CommonOffers),o.DI.instance(r.SimpleOfferStrategy,o.DI.cfg("OfferFactory"),a.SaleOffers),o.DI.instance(r.SimpleOfferStrategy,o.DI.cfg("OfferFactory"),a.SaleUnlimitedLivesOffers)];n.OffersStrategiesConfig=i,cc._RF.pop()},{"./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./OffersConfig (scripts.config)":"OffersConfig (scripts.config)","./SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)":"SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)"}],"OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"e8f6atE7E1WnYSwVXPafTEc","OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnCounterValueChangeGroupComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="onCounterValueChangeGroup",t}(e("./ChangeGroupComponent (@tapclap.match-x.engine.components)").ChangeGroupComponent);n.OnCounterValueChangeGroupComponent=r,cc._RF.pop()},{"./ChangeGroupComponent (@tapclap.match-x.engine.components)":"ChangeGroupComponent (@tapclap.match-x.engine.components)"}],"OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"73c4eVRUkxXyau9c09Jlb32","OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnDeathRecoveryHealthSystemStrategy=void 0;var r=e("./HealthComponent (@tapclap.match-x.engine.components)"),i=e("./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t){var n=t.getEnabledComponentByClass(r.HealthComponent),o=t.getEnabledComponentByClass(i.RecoveryHealthOnDeathComponent);if(n&&n.isDeath&&o){var a=n.getValue();return n.setValue(o.step),{prevValue:a,value:n.getValue(),trigger:i.RecoveryHealthOnDeathComponent.KEY}}},t}(e("./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)").RecoveryHealthSystemStrategy);n.OnDeathRecoveryHealthSystemStrategy=c,cc._RF.pop()},{"./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)","./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)"}],"OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"55069ENKXhZFr/3+qv3CH1g","OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnEmitRecoveryHealthSystemStrategy=void 0;var r=e("./HealthComponent (@tapclap.match-x.engine.components)"),i=e("./RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)"),c=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),s=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype.process=function(e,t){var n=this._world.getState(c.EmitSystem.STATE_EMIT);if((null==n?void 0:n.data.find(function(e){var n=e.emitterEntity;return t===n}))&&t.getEnabledComponentByClass(i.RecoveryHealthOnEmitComponent)){var o=t.getEnabledComponentByClass(r.HealthComponent),a=t.getEnabledComponentByClass(i.RecoveryHealthOnEmitComponent);if(o&&o.isDeath&&a){var s=o.getValue();return o.setValue(a.step),{prevValue:s,value:o.getValue(),trigger:i.RecoveryHealthOnEmitComponent.KEY}}}},t}(e("./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)").RecoveryHealthSystemStrategy);n.OnEmitRecoveryHealthSystemStrategy=s,cc._RF.pop()},{"./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)","./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)"}],"OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"23c87hSwgNXMapS0H3XsIAa","OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnEmptyTrackByProbabilityStrategy=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)"),s=e("./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)"),p=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),l=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),m=e("./WalkOnTrackComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._probabilityFilter=t.probabilityFilter,n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.run=function(e){var t,n,o=this;if(!this._skipOnStates.some(function(e){return o._world.getState(e)})){var a=this._probabilityFilter.filter(e.entities),c=Object.assign({},e);if(Object.entries(a).length>0){c.entities=a;try{for(var p=r(this._world.getComponentsByClass(i.GridComponent)),l=p.next();!l.done;l=p.next()){var m=l.value.grid.findCell(function(e){return o.isEmptyTrack(e.getEntity())});if(m)return m.getEntity().addComponent(s.EmitOnEmptyTrackComponent.KEY,new s.EmitOnEmptyTrackComponent(c)),!0}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}}return!1}},t.prototype.isEmptyTrack=function(e){var t;if(null==e?void 0:e.getComponentByClass(p.StartTrackComponent)){var n=null===(t=e.getComponentByClass(l.TrackStorageComponent))||void 0===t?void 0:t.storage;if(n)return n.every(function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(m.WalkOnTrackComponent))})}return!1},t.KEY="onEmptyTrackByProbabilityStrategy",t}(c.StrategicEmitStrategy);n.OnEmptyTrackByProbabilityStrategy=u,cc._RF.pop()},{"./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)":"EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)":"StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)","./WalkOnTrackComponent (@tapclap.match-x.engine.components)":"WalkOnTrackComponent (@tapclap.match-x.engine.components)"}],"OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"e2901c9rbZWPqmj2E61rDEf","OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnEndCounterEmitProducer=void 0;var i=e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)"),c=e("./EmitOnEndCounterComponent (@tapclap.match-x.engine.components)"),s=e("./CounterComponent (@tapclap.match-x.engine.components)"),p=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=t.gridComponent,o=e.call(this)||this;return o._gridComponent=n,o}return a(t,e),t.prototype.produce=function(e){var t,n,o=[],a=e.getEnabledComponentByClass(p.TurnStateComponent),i=new Set;if(!a)return o;for(var l=this._gridComponent.grid,m=0;m<l.rows;m++)for(var u=0;u<l.cols;u++){var d=l.getCell(m,u);if(d)try{for(var y=(t=void 0,r(d.entities)),f=y.next();!f.done;f=y.next()){var h=f.value;if(!i.has(h)){var g=h.getEnabledComponent(c.EmitOnEndCounterComponent.KEY),v=h.getEnabledComponent(s.CounterComponent.KEY);g&&v&&(null==g?void 0:g.state)===a.state&&g.counterNumber===v.getValue()&&(o.push({trigger:c.EmitOnEndCounterComponent.KEY,grid:l,cell:d,entity:h}),i.add(h))}}}catch(_){t={error:_}}finally{try{f&&!f.done&&(n=y.return)&&n.call(y)}finally{if(t)throw t.error}}}return o},t}(i.EmitProducer);n.OnEndCounterEmitProducer=l,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./EmitOnEndCounterComponent (@tapclap.match-x.engine.components)":"EmitOnEndCounterComponent (@tapclap.match-x.engine.components)","./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"c447amkraxeZZIoBCykEnV5","OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),n.__esModule=!0,n.OnEntityDeathEmitProducer=void 0;var o=e("./EmitOnDeathComponent (@tapclap.match-x.engine.components)"),a=e("./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n;return(n=e.call(this)||this)._turnStateForEmits=t.turnStatesForEmit,n._turnStateComponent=t.turnStateComponent,n._observableComponent=t.observableComponent||o.EmitOnDeathComponent,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.produce=function(e){var t=[],n=e.getState(a.EntityDeathSystem.STATE);if(n&&n.data)for(var o,i=r(n.data);!(o=i()).done;){var c=o.value,s=c.cell,p=c.entity,l=c.grid;p.getEnabledComponentByClass(this._observableComponent)&&t.push({trigger:this._observableComponent.KEY,grid:l,cell:s,entity:p})}return t},i}(e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)").EmitProducer);n.OnEntityDeathEmitProducer=p,cc._RF.pop()},{"./EmitOnDeathComponent (@tapclap.match-x.engine.components)":"EmitOnDeathComponent (@tapclap.match-x.engine.components)","./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)":"EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)"}],"OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"c0cebmKpfVc7JUsJH4lXyRF","OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnEntityEmitAfterEmitProducer=void 0;var i=e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)"),c=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),s=function(e){function t(t){var n=e.call(this)||this;return n._observableComponent=t.observableComponent,n}return a(t,e),t.prototype.produce=function(e){var t,n,o,a=[],i=(null===(o=e.getState(c.EmitSystem.STATE_EMIT))||void 0===o?void 0:o.data.flat())||[];if(i.length)try{for(var s=r(i),p=s.next();!p.done;p=s.next()){var l=p.value,m=l.targetCell,u=l.newEntity,d=l.grid;u.getEnabledComponentByClass(this._observableComponent)&&a.push({trigger:this._observableComponent.KEY,entity:u,cell:m,grid:d})}}catch(y){t={error:y}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},t}(i.EmitProducer);n.OnEntityEmitAfterEmitProducer=s,cc._RF.pop()},{"./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)"}],"OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"29b39HDLItbD5gW1E7u8vyI","OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),n.__esModule=!0,n.OnEntityExplodeEmitProducer=void 0;var o=e("./EmitOnExplodeComponent (@tapclap.match-x.engine.components)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n;return(n=e.call(this)||this)._observableComponent=t.observableComponent||o.EmitOnExplodeComponent,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.produce=function(e){var t=[],n=e.getState(a.ExplodeSystem.STATE);if(n&&n.data)for(var o,i=r(n.data.flat());!(o=i()).done;){var c=o.value,s=c.cell,p=c.entity,l=c.grid;p.getEnabledComponentByClass(this._observableComponent)&&t.push({trigger:this._observableComponent.KEY,grid:l,cell:s,entity:p})}return t},i}(e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)").EmitProducer);n.OnEntityExplodeEmitProducer=p,cc._RF.pop()},{"./EmitOnExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnExplodeComponent (@tapclap.match-x.engine.components)","./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"}],"OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"9f680+NdOdXS7To9YlPiDg1","OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnEntityTriggerEmitProducer=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._observableComponent=t.observableComponent,n}return a(t,e),t.prototype.produce=function(e){var t=this,n=e.getEnabledComponent("tiles").grid,o=[];return n.forEachEntities(function(e,a){e.getEnabledComponentByClass(t._observableComponent)&&o.push({trigger:t._observableComponent.KEY,grid:n,cell:a,entity:e})}),o},t}(e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)").EmitProducer);n.OnEntityTriggerEmitProducer=r,cc._RF.pop()},{"./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)"}],"OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ebbcbcAoUxc27QZrBrE7plS","OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnExplodeCombinationNeighborChangeGroupComponent=void 0;var r=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),i=function(e){function t(t){var n=e.call(this,t)||this;return n._times=t.times||1,n.dirs=t.dirs||r.NeighborRetriever.DIRECTION_4,n}return a(t,e),Object.defineProperty(t.prototype,"canChange",{get:function(){return this._times>0},enumerable:!1,configurable:!0}),t.prototype.reduce=function(){this._times--},t.KEY="onExplodeCombinationNeighborChangeGroup",t}(e("./ChangeGroupComponent (@tapclap.match-x.engine.components)").ChangeGroupComponent);n.OnExplodeCombinationNeighborChangeGroupComponent=i,cc._RF.pop()},{"./ChangeGroupComponent (@tapclap.match-x.engine.components)":"ChangeGroupComponent (@tapclap.match-x.engine.components)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)"}],"OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"a0e21jwM/9UiL2DqlfkS7Lt","OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnExplodeNextOnTrackWalkSystem=void 0;var s=e("./ExplodedByComponent (@tapclap.match-x.engine.components)"),p=e("./WalkComponent (@tapclap.match-x.engine.components)"),l=e("./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)"),m=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._getPossibleCells=function(e,t,n,o,a){var r=this;return this._getPathStrategy(e).process(t,n,o).filter(function(t){return t.isEnabled&&!i(a,[n],e.visitedCells).includes(t)&&r._getReplaceStrategy(e).isValidCell(t,o)})},t.prototype._getEntries=function(){var e,t,n,o,a=[],r=(null===(o=null===(n=this._world.getState(m.ExplodeSystem.STATE))||void 0===n?void 0:n.data)||void 0===o?void 0:o.flat())||[];try{for(var i=c(r),u=i.next();!u.done;u=i.next()){var d=u.value,y=d.entity,f=d.grid,h=y.getComponentByClass(s.ExplodedByComponent);if(h){var g=h.initiatorEntity,v=h.initiatorCell;if(g&&v){var _=g.getComponentByClass(l.WalkOnNextTrackEntityExplodeComponent),b=g.getComponentByClass(p.WalkComponent);_&&b&&a.push({entity:g,cell:v,grid:f,trigger:l.WalkOnNextTrackEntityExplodeComponent.KEY,order:(null==b?void 0:b.order)||0})}}}}catch(C){e={error:C}}finally{try{u&&!u.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return a},t.KEY="onExplodeNextOnTrackWalkSystem",t}(e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)").WalkSystem);n.OnExplodeNextOnTrackWalkSystem=u,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./ExplodedByComponent (@tapclap.match-x.engine.components)":"ExplodedByComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)":"WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)"}],"OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"9520e+m8oBXwac8pCGWmXPY","OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnHealthReduceChangeGroupComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="onHealthReduceChangeGroup",t}(e("./ChangeGroupComponent (@tapclap.match-x.engine.components)").ChangeGroupComponent);n.OnHealthReduceChangeGroupComponent=r,cc._RF.pop()},{"./ChangeGroupComponent (@tapclap.match-x.engine.components)":"ChangeGroupComponent (@tapclap.match-x.engine.components)"}],"OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"88e35rR8/BRILLyVznueMN9","OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnSkipExplodeStateMoveSystem=void 0;var r=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(){return!this._world.getState(r.ExplodeSystem.STATE)&&e.prototype.process.call(this)},t}(e("./MoveSystem (@tapclap.match-x.engine.systems.move-system)").MoveSystem);n.OnSkipExplodeStateMoveSystem=i,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./MoveSystem (@tapclap.match-x.engine.systems.move-system)":"MoveSystem (@tapclap.match-x.engine.systems.move-system)"}],"OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"254cf9EzkFcOrDK2dZebGQg","OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnSpecificTurnStrategicEmitStrategy=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._canEmit=function(){return this._movesReducingSystem.getTurnNumber()===this._value},t}(e("./OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)").OnTurnIntervalStrategicEmitStrategy);n.OnSpecificTurnStrategicEmitStrategy=r,cc._RF.pop()},{"./OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)":"OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)"}],"OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a84d9aVQoBaRaqi4DETxAhh","OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),n.__esModule=!0,n.AfterTutorialWorldEmitProducer=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._tutorialComponent=t.tutorialComponent,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.produce=function(t){return this._tutorialIsActive()?[]:e.prototype.produce.call(this,t)},r._tutorialIsActive=function(){return this._tutorialComponent&&this._tutorialComponent.hasTutorial&&!this._tutorialComponent.isComplete},a}(e("./WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)").WorldEmitProducer);n.AfterTutorialWorldEmitProducer=a,cc._RF.pop()},{"./WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)":"WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)"}],"OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"3ae61+SvNhdy59dbiP/QZZa","OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTrackEmitTargetStrategy=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),s=e("./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),p=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),l=e("./WalkOnTrackComponent (@tapclap.match-x.engine.components)"),m=e("./LockComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._random=t.random,n}return a(t,e),t.prototype.getEmitTarget=function(){var e,t,n=this,o=function(e){var t=[];return e.forEachEntities(function(e){if(n.isEmptyTrack(e)){var o=e.getComponentByClass(c.TrackStorageComponent).storage[0];o.getEntity()||o.entities.every(function(e){return e.getComponentByClass(m.LockComponent)})||t.push(o)}}),{value:a._random.sample(t)}},a=this;try{for(var s=r(this._world.getComponentsByClass(i.GridComponent)),p=s.next();!p.done;p=s.next()){var l=o(p.value.grid);if("object"==typeof l)return l.value}}catch(u){e={error:u}}finally{try{p&&!p.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},t.prototype.isEmptyTrack=function(e){var t;if(e.getComponentByClass(p.StartTrackComponent)){var n=null===(t=e.getComponentByClass(c.TrackStorageComponent))||void 0===t?void 0:t.storage;if(n)return n.every(function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(l.WalkOnTrackComponent))})}return!1},t.KEY="onTrackEmitTargetStrategy",t}(s.EmitTargetStrategy);n.OnTrackEmitTargetStrategy=u,cc._RF.pop()},{"./EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)","./WalkOnTrackComponent (@tapclap.match-x.engine.components)":"WalkOnTrackComponent (@tapclap.match-x.engine.components)"}],"OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"ec3b3crU79f9I8R8W9ASHVM","OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnCountAfterExplodeRecoveryHealthSystemStrategy=void 0;var r=e("./HealthComponent (@tapclap.match-x.engine.components)"),i=e("./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),c=e("./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t){var n=t.getComponentByClass(r.HealthComponent),o=t.getComponentByClass(c.TurnCountAfterExplodeComponent),a=t.getComponentByClass(i.RecoveryHealthOnReachTurnCountAfterExplodeComponent);if(o&&a&&n&&(o.count<a.recoveredAtTurnCount&&(a.recoveredAtTurnCount=0),o.count>a.recoveredAtTurnCount&&o.count%a.turnCountTarget==0&&(n.setValue(n.getValue()+a.step),a.recoveredAtTurnCount=o.count,n.getPrevValue()!==n.getValue())))return{prevValue:n.getPrevValue(),value:n.getValue(),trigger:i.RecoveryHealthOnReachTurnCountAfterExplodeComponent.KEY}},t}(e("./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)").RecoveryHealthSystemStrategy);n.OnTurnCountAfterExplodeRecoveryHealthSystemStrategy=s,cc._RF.pop()},{"./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)","./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"}],"OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"5b64cV1wclSDoQptKcILKKM","OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),n.__esModule=!0,n.OnTurnEmitProducer=void 0;var o=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),a=e("./EmitOnTurnComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n,o=t.gridKeys,a=void 0===o?[]:o,r=t.movesReducingSystem;return(n=e.call(this)||this)._gridKeys=a,n._movesReducingSystem=r,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.produce=function(e){var t=[],n=e.getEnabledComponentByClass(o.TurnStateComponent),i=new Set;if(!n)return t;for(var c,s=r(this._gridKeys);!(c=s()).done;){var p,l=c.value,m=null==(p=e.getEnabledComponent(l))?void 0:p.grid;if(m)for(var u=0;u<m.rows;u++)for(var d=0;d<m.cols;d++){var y=m.getCell(u,d);if(y)for(var f,h=r(y.entities);!(f=h()).done;){var g=f.value;if(!i.has(g)){var v=g.getEnabledComponent(a.EmitOnTurnComponent.KEY);if((null==v?void 0:v.state)===n.state){var _=this._movesReducingSystem.getTurnNumber(),b=v.turnNumber;b&&_%b==0&&(t.push({trigger:a.EmitOnTurnComponent.KEY,grid:m,cell:y,entity:g}),i.add(g))}}}}}return t},i}(e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)").EmitProducer);n.OnTurnEmitProducer=p,cc._RF.pop()},{"./EmitOnTurnComponent (@tapclap.match-x.engine.components)":"EmitOnTurnComponent (@tapclap.match-x.engine.components)","./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"fcc673Ydq9YkbMwHFlYECRZ","OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndAndCounterEndEmitProducer=void 0;var i=e("./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)"),p=e("./CounterComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=e.call(this,t)||this;return n._skipOnStates=[],n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.produce=function(e){var t,n,o=this,a=[];if(this._hasValidTurnState()&&!this._skipOnStates.some(function(e){var t;return null===(t=o._world.getState(e))||void 0===t?void 0:t.data})){var i=function(e){e.forEachEntities(function(t,n){if(t.getEnabledComponentByClass(s.EmitOnTurnEndAndCounterEndComponent)){var o=t.getComponentByClass(p.CounterComponent);o&&o.getValue()===o.getMinValue()&&a.push({trigger:s.EmitOnTurnEndAndCounterEndComponent.KEY,grid:e,cell:n,entity:t})}})};try{for(var l=r(e.getComponentsByClass(c.GridComponent)),m=l.next();!m.done;m=l.next())i(m.value.grid)}catch(u){t={error:u}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}}return a},t}(i.OnTurnEndEmitProducer);n.OnTurnEndAndCounterEndEmitProducer=l,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"}],"OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"0dc67u2elhTbYuGRzgQaKfN","OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndAndDeathEmitProducer=void 0;var i=e("./EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=e("./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),p=e("./GridComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=e.call(this,t)||this;return n._skipOnStates=[],n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.produce=function(e){var t,n,o=this,a=[];if(this._hasValidTurnState()&&!this._skipOnStates.some(function(e){var t;return null===(t=o._world.getState(e))||void 0===t?void 0:t.data})){var s=function(e){e.forEachEntities(function(t,n){if(t.getEnabledComponentByClass(i.EmitOnTurnEndAndDeathComponent)){var o=t.getEnabledComponentByClass(c.HealthComponent);(null==o?void 0:o.isDeath)&&a.push({trigger:i.EmitOnTurnEndAndDeathComponent.KEY,grid:e,cell:n,entity:t})}})};try{for(var l=r(e.getComponentsByClass(p.GridComponent)),m=l.next();!m.done;m=l.next())s(m.value.grid)}catch(u){t={error:u}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}}return a},t}(s.OnTurnEndEmitProducer);n.OnTurnEndAndDeathEmitProducer=l,cc._RF.pop()},{"./EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"}],"OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"f3c025k2tZaP78+z/Pgt82u","OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndAndEmptyTrackEmitProducer=void 0;var i=e("./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),p=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),l=e("./WalkOnTrackComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this,t)||this;return n._skipOnStates=[],n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.produce=function(e){var t,n,o=this,a=[];if(this._hasValidTurnState()&&!this._skipOnStates.some(function(e){var t;return null===(t=o._world.getState(e))||void 0===t?void 0:t.data}))try{for(var s=r(e.getComponentsByClass(c.GridComponent)),p=s.next();!p.done;p=s.next()){var l=p.value.grid,m=l.findCell(function(e){return o.isEmptyTrack(e.getEntity())});m&&a.push({entity:m.getEntity(),cell:m,trigger:i.EmitOnEmptyTrackComponent.KEY,grid:l})}}catch(u){t={error:u}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},t.prototype.isEmptyTrack=function(e){var t;if(null==e?void 0:e.getComponentByClass(s.StartTrackComponent)){var n=null===(t=e.getComponentByClass(p.TrackStorageComponent))||void 0===t?void 0:t.storage;if(n)return n.every(function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(l.WalkOnTrackComponent))})}return!1},t}(e("./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)").OnTurnEndEmitProducer);n.OnTurnEndAndEmptyTrackEmitProducer=m,cc._RF.pop()},{"./EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)":"EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)","./WalkOnTrackComponent (@tapclap.match-x.engine.components)":"WalkOnTrackComponent (@tapclap.match-x.engine.components)"}],"OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"32215XSnmFdDo92+kDYunQ2","OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndAndExplodeEmitProducer=void 0;var i=e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)"),c=e("./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),l=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._skipOnStates=t.skipOnStates,n}return a(t,e),t.prototype.produce=function(e){var t,n,o,a,i,l,m,u=this,d=[],y=null!==(l=null===(i=this._world.getState(p.ExplodeSystem.STATE))||void 0===i?void 0:i.data.flat())&&void 0!==l?l:[];if(y.length>0)try{for(var f=r(y),h=f.next();!h.done;h=f.next())(C=(E=h.value.entity).getComponentByClass(c.EmitOnTurnEndAndExplodeComponent))&&C.emitAmount++}catch(O){t={error:O}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(!this._skipOnStates.some(function(e){var t;return null===(t=u._world.getState(e))||void 0===t?void 0:t.data})){var g=null===(m=e.getComponentByClass(s.ExplodeCollectionComponent))||void 0===m?void 0:m.models,v=new Set;try{for(var _=r(g),b=_.next();!b.done;b=_.next()){var C,w=b.value,S=w.cell,E=w.entity,x=w.grid;if((C=E.getComponentByClass(c.EmitOnTurnEndAndExplodeComponent))&&!v.has(E)){v.add(E);for(var A=0;A<C.emitAmount;A++)d.push({trigger:c.EmitOnTurnEndAndExplodeComponent.KEY,grid:x,cell:S,entity:E});C.emitAmount=0}}}catch(R){o={error:R}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}}return d},t}(i.EmitProducer);n.OnTurnEndAndExplodeEmitProducer=l,cc._RF.pop()},{"./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)","./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"}],"OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"72fdfN05iRbYJYDdW1iNp1w","OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndEmitByGroupNonExplodeProducer=void 0;var i=e("./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)"),p=e("./EmitByGroupComponent (@tapclap.match-x.engine.components)"),l=e("./ExplodeCollectionComponent (@tapclap.match-x.engine.components)"),m=function(e){function t(t){var n=e.call(this,t)||this;return n._world=t.world,n._turnStates=t.turnStates,n}return a(t,e),t.prototype.produce=function(e){var t,n,o=[];if(this._isValidTurnState()){var a=new Set,i=function(t){t.forEachEntities(function(n,r){var i,c=n.getComponentByClass(p.EmitByGroupComponent),m=n.getComponentByClass(s.EmitOnNonGroupExplodeComponent),u=null==c?void 0:c.groupKey;if(c&&m&&!a.has(u)){a.add(u);var d=null===(i=e.getComponentByClass(l.ExplodeCollectionComponent))||void 0===i?void 0:i.models;d&&(d.some(function(e){var t;return(null===(t=e.entity.getComponentByClass(p.EmitByGroupComponent))||void 0===t?void 0:t.groupKey)===u})||o.push({entity:n,cell:r,trigger:p.EmitByGroupComponent.KEY,grid:t}))}})};try{for(var m=r(e.getComponentsByClass(c.GridComponent)),u=m.next();!u.done;u=m.next())i(u.value.grid)}catch(d){t={error:d}}finally{try{u&&!u.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}}return o},t}(i.OnTurnEndEmitProducer);n.OnTurnEndEmitByGroupNonExplodeProducer=m,cc._RF.pop()},{"./EmitByGroupComponent (@tapclap.match-x.engine.components)":"EmitByGroupComponent (@tapclap.match-x.engine.components)","./EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeCollectionComponent (@tapclap.match-x.engine.components)":"ExplodeCollectionComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":"OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)"}],"OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)":[function(e,t,n){"use strict";cc._RF.push(t,"f3c21A1Y2Nc84CR91fhU8Y5","OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndEmitProducer=void 0;var r=e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)"),i=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._turnStates=t.turnStates,n}return a(t,e),t.prototype._isValidTurnState=function(){var e=this._world.getEnabledComponentByClass(i.TurnStateComponent);return this._turnStates.some(function(t){return t===e.state})},t.prototype._hasValidTurnState=function(){var e=this._world.getEnabledComponentByClass(i.TurnStateComponent);return this._turnStates.some(function(t){return e.hasState(t)})},t}(r.EmitProducer);n.OnTurnEndEmitProducer=c,cc._RF.pop()},{"./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"OnTurnEndWalkSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"e9300FniiNchqhQTT6Hbhwi","OnTurnEndWalkSystem (scripts.common.match3-game.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnEndWalkSystem=void 0;var c=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),s=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)"),p=e("./Match3GameConfig (scripts.common.match3-game)"),l=e("./GridComponent (@tapclap.match-x.engine.components)"),m=e("./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)"),u=e("./WalkComponent (@tapclap.match-x.engine.components)"),d=function(e){function t(t){var n=t.order,o=t.skipOnStates,a=r(t,["order","skipOnStates"]),i=e.call(this,a)||this;return i._order=0,i._skipOnStates=[],i._processed=!1,i._order=n,i._skipOnStates=o,i}return a(t,e),t.prototype.process=function(){return!(this._processed||!this._isValidTurnState()||!this._isValidState())&&(this._processed=!0,e.prototype.process.call(this))},t.prototype.preProcess=function(){this._processed=!1},t.prototype._getEntries=function(){var e,t,n=this,o=[],a=function(e){e.forEachEntities(function(t,a){if(t.getEnabledComponentByClass(m.WalkOnTurnEndComponent)){var r=t.getEnabledComponentByClass(u.WalkComponent);r&&n._order===r.order&&o.push({grid:e,cell:a,entity:t,trigger:m.WalkOnTurnEndComponent.KEY,order:r.order})}})};try{for(var r=i(this._world.getEnabledComponentsByClass(l.GridComponent)),c=r.next();!c.done;c=r.next())a(c.value.grid)}catch(s){e={error:s}}finally{try{c&&!c.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return o},t.prototype._isValidTurnState=function(){var e;return null===(e=this._world.getEnabledComponentByClass(c.TurnStateComponent))||void 0===e?void 0:e.hasState(p.TURN_STATES.FINISH)},t.prototype._isValidState=function(){var e=this;return this._skipOnStates.every(function(t){return!e._world.getState(t)})},t.KEY="onTurnEndWalkSystem",t}(s.WalkSystem);n.OnTurnEndWalkSystem=d,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkOnTurnEndComponent (@tapclap.match-x.engine.components)":"WalkOnTurnEndComponent (@tapclap.match-x.engine.components)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)"}],"OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"5ebd5YOabVa2omTowFyJyCK","OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OnTurnIntervalStrategicEmitStrategy=void 0;var r=e("./EmitOnTurnComponent (@tapclap.match-x.engine.components)"),i=function(e){function t(t){var n=t.world,o=t.movesReducingSystem,a=t.value,r=void 0===a?1:a,i=t.skipOnStates,c=void 0===i?[]:i,s=e.call(this)||this;return s._skipOnStates=[],s._world=n,s._movesReducingSystem=o,s._value=r,s._skipOnStates=c,s}return a(t,e),t.prototype.run=function(e){var t=this;if(!this._skipOnStates.some(function(e){return t._world.getState(e)})){var n=this._movesReducingSystem.getTurnNumber(),o=this._movesReducingSystem.getMovesLeft(),a=this._world.getComponentByClass(r.EmitOnTurnComponent);if((!a||void 0===a.turnNumber||a.turnNumber!==n)&&o>0&&n>0&&this._canEmit())return this._world.addComponent(r.EmitOnTurnComponent.KEY,new r.EmitOnTurnComponent(Object.assign({},e,{turnNumber:n}))),!0}return!1},t.prototype._canEmit=function(){return this._movesReducingSystem.getTurnNumber()%this._value==0},t}(e("./StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)").StrategicEmitStrategy);n.OnTurnIntervalStrategicEmitStrategy=i,cc._RF.pop()},{"./EmitOnTurnComponent (@tapclap.match-x.engine.components)":"EmitOnTurnComponent (@tapclap.match-x.engine.components)","./StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)":"StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)"}],"OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2e5dflhINpSMoZWzHxeDCvw","OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)"),n.__esModule=!0,n.OneOfEachComponentSwapTurnResolver=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t=[[]]),(n=e.call(this)||this)._componentGroups=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.resolve=function(e,t,n){for(var o=this,a=function(e,t){void 0===t&&(t=[]);var n=e.getEntity();return!!(n&&t.length>0)&&!!t.find(function(e){return n.getEnabledComponentByClass(e)})},r=0,i=[[t,n],[n,t]];r<i.length;r++)if(i[r].every(function(e,t){return a(e,o._componentGroups[t])}))return{};return null},a}(e("./SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)").SwapTurnResolver);n.OneOfEachComponentSwapTurnResolver=a,a.TYPE="oneForEach",cc._RF.pop()},{"./SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)":"SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)"}],"OpenCommunityUrlAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"09ce7h3uHVTIp9tCUnR9WZU","OpenCommunityUrlAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OpenCommunityUrlAction=void 0;var r=function(e){function t(t){var n=t.url,o=e.call(this)||this;return o._communityUrl=n,o}return a(t,e),t.prototype.run=function(){return cc.sys.openURL(this._communityUrl),Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.OpenCommunityUrlAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b9c60BpKeNeZoiATCO3KEzr","OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),n.__esModule=!0,n.OpenEpisodeAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._sceneManager=t.sceneManager,n._episodes=t.moduleResolvers.episodes.get(),n._progress=t.moduleResolvers.progress.get(),n._scrollToEpisode=t.scrollToEpisode,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this,t=this._sceneManager.getCurrentSceneComponent();if(t&&this._episodes&&this._progress){var n=t.map,o=t.scrollView,a=this._episodes.getCurrentEpisode()-1;return Promise.resolve().then(function(){return n.openEpisode(a)}).then(function(){return e._scrollToEpisode?o.scrollToLevel(a,0,{align:1,timeScale:15}):Promise.resolve()})}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.OpenEpisodeAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"OrientationComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"8c88dZHOPVY2KfbOz2lf19E","OrientationComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.Orientations=void 0;var i,c=e("./Inject (@tapclap.utils-js.inject)"),s=cc._decorator,p=s.ccclass;s.property,function(e){e.LANDSCAPE="LANDSCAPE",e.PORTRAIT="PORTRAIT"}(i=n.Orientations||(n.Orientations={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return a(t,e),n=t,t.prototype.getOrientationConfig=function(){return this.getOrientation()===i.LANDSCAPE?this._landscape:this._portrait},t.prototype.getOrientation=function(){if(Object.keys(n.ORIENTATIONS).includes(this._orientation))return this._orientation;var e=cc.view.getCanvasSize();return e.width>=e.height?i.LANDSCAPE:i.PORTRAIT},t.prototype.getOrientationCases=function(){var e;return(e={})[i.LANDSCAPE]=this._landscape,e[i.PORTRAIT]=this._portrait,e},t.prototype.onLoad=function(){var e=this;cc.find("Canvas").on(cc.Node.EventType.SIZE_CHANGED,function(){cc.isValid(e.node)&&(e.node.emit(n.EVENT_ORIENTATION_CHANGE),e._update(!0))}),this._update()},t.prototype.start=function(){this._update()},t.prototype._update=function(){},t.ORIENTATIONS=i,t.EVENT_ORIENTATION_CHANGE="orientation:change",r([c.Inject("Config.Orientation")],t.prototype,"_orientation",void 0),n=r([p],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)"}],"OrientationFitNodeToTargetComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"63d44vvXtdZcKXTcpfIT3LV","OrientationFitNodeToTargetComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=s.executeInEditMode,d=function(){function e(){this.target=null,this.fitWidth=!1,this.fitHeight=!1,this.preserveRatio=!1,this.preserveTargetSize=!1,this.fitByScale=!1,this.maxScale=1}return r([l({type:cc.Node,visible:!0})],e.prototype,"target",void 0),r([l({visible:function(){return this.target}})],e.prototype,"fitWidth",void 0),r([l({visible:function(){return this.target}})],e.prototype,"fitHeight",void 0),r([l({visible:function(){return this.target}})],e.prototype,"preserveRatio",void 0),r([l({visible:function(){return this.target}})],e.prototype,"preserveTargetSize",void 0),r([l({visible:function(){return this.target}})],e.prototype,"fitByScale",void 0),r([l({visible:function(){return this.target&&this.fitByScale}})],e.prototype,"maxScale",void 0),r([p("OrientationFitNodeToTargetCase")],e)}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=new d,t._portrait=new d,t._initialScale=cc.v2(1,1),t._initialSize=new cc.Size(0,0),t._ratio=1,t}return a(t,e),t.prototype.onLoad=function(){this._init()},t.prototype._update=function(){if(this._initialSize.width>0&&this._initialSize.height>0){var e=this.getOrientationConfig();if(e.target){var t=this.node,n=t.width,o=t.height,a=e.target,r=a.width,i=a.height,c=n,s=o;e.fitWidth&&(c=r,e.preserveRatio&&(s=r/this._ratio),e.preserveTargetSize&&s>i&&(s=i,c=i*this._ratio)),e.fitHeight&&(s=i,e.preserveRatio&&(c=i*this._ratio),e.preserveTargetSize&&c>r&&(c=r,s=r/this._ratio)),e.fitByScale?(e.fitWidth&&e.fitHeight&&(e.preserveTargetSize?this.node.setScale(Math.min(e.maxScale,c/this._initialSize.width,s/this._initialSize.height)):this.node.setScale(Math.min(e.maxScale,Math.max(c/this._initialSize.width,s/this._initialSize.height)))),e.fitWidth&&!e.fitHeight&&this.node.setScale(Math.min(e.maxScale,c/this._initialSize.width)),e.fitHeight&&!e.fitWidth&&this.node.setScale(Math.min(e.maxScale,s/this._initialSize.height))):this.node.setContentSize(c,s)}else this.node.setScale(this._initialScale),this.node.setContentSize(this._initialSize)}},t.prototype._init=function(){0===this._initialSize.width&&0===this._initialSize.height&&(this.node.getScale(this._initialScale),this._initialSize=this.node.getContentSize(),this._ratio=this._initialSize.width/this._initialSize.height)},t.prototype.update=function(){this._init(),this._update()},r([l({type:d,visible:!0})],t.prototype,"_landscape",void 0),r([l({type:d,visible:!0})],t.prototype,"_portrait",void 0),r([p,u,m("Responsive/OrientationFitNodeToTarget")],t)}(c.default);n.default=y,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationHolderComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"27668WtJYZbDo93H+rHn3U2","OrientationHolderComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.OrientationHolderComponent=void 0;var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=null,t._portrait=null,t}return a(t,e),t.prototype.start=function(){cc.find("Canvas").on(cc.Node.EventType.SIZE_CHANGED,this._update.bind(this)),this._update()},t.prototype._update=function(){var e=this.getOrientationConfig();this.node.parent=e},r([l({visible:!0,type:cc.Node})],t.prototype,"_landscape",void 0),r([l({visible:!0,type:cc.Node})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationHolderComponent")],t)}(c.default);n.OrientationHolderComponent=u,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationNodeComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"ad168aHt8BQyKyMT1AQVvKj","OrientationNodeComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.OrientationNodeComponent=void 0;var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=null,t._portrait=null,t}return a(t,e),r([l({visible:!0,type:cc.Node})],t.prototype,"_landscape",void 0),r([l({visible:!0,type:cc.Node})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationNodeComponent")],t)}(c.default);n.OrientationNodeComponent=u,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationRatioDesignResolutionComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"ca741K26S5aEKNFABRu0ODi","OrientationRatioDesignResolutionComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.OrientationRatioDesignResolutionComponent=void 0;var p=s(e("./OrientationComponent (scripts.responsive)")),l=cc._decorator,m=l.ccclass,u=l.property,d=l.menu,y=function(){function e(){this.width=1e3,this.height=1e3,this.fitWidth=!1,this.fitHeight=!1}return c([u()],e.prototype,"width",void 0),c([u()],e.prototype,"height",void 0),c([u()],e.prototype,"fitWidth",void 0),c([u()],e.prototype,"fitHeight",void 0),c([m("OrientationRatioDesignResolutionFitCase")],e)}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=new y,t._portrait=new y,t}return a(t,e),t.prototype._update=function(){var e=this.getOrientationConfig(),t=e.width;switch(e.height,!0){case e.fitWidth&&!e.fitHeight:this.getOrientation()===p.Orientations.PORTRAIT&&(t=Math.min(Math.max(cc.view.getViewportRect().width,1200),1600)),cc.view.setDesignResolutionSize(t,1e3,cc.ResolutionPolicy.FIXED_WIDTH);break;case!e.fitWidth&&e.fitHeight:var n=Math.min(Math.max(cc.view.getViewportRect().height,1600),900);cc.view.setDesignResolutionSize(1e3,n,cc.ResolutionPolicy.FIXED_HEIGHT)}},c([u({visible:!0,type:y})],t.prototype,"_landscape",void 0),c([u({visible:!0,type:y})],t.prototype,"_portrait",void 0),c([m,d("Responsive/OrientationRatioDesignResolutionComponent")],t)}(p.default);n.OrientationRatioDesignResolutionComponent=f,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationScaleComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"c1b7cWmTalbjLWoOmzKOdjT","OrientationScaleComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=1,t._portrait=1,t}return a(t,e),t.prototype._update=function(){cc.isValid(this.node)&&this.node.scale>0&&this.node.setScale(this.getOrientationConfig())},r([l({visible:!0})],t.prototype,"_landscape",void 0),r([l({visible:!0})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationScale")],t)}(c.default);n.default=u,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationSizeComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"9ab11e0aEZc475PRnG6riXq","OrientationSizeComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(){function e(){this.size=new cc.Size(0,0),this.preview=!1}return r([l()],e.prototype,"size",void 0),r([l({serializable:!1})],e.prototype,"preview",void 0),r([p("OrientationSizeCase")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=new u,t._portrait=new u,t}return a(t,e),t.prototype.update=function(){},t.prototype._update=function(){this._updateSize(this.getOrientationConfig())},t.prototype._updateSize=function(e){this.node.width=e.size.width,this.node.height=e.size.height},r([l({visible:!0})],t.prototype,"_landscape",void 0),r([l({visible:!0})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationSize")],t)}(c.default);n.default=d,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationTargetVisibilityComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"d0a5fgpoXBWYoSulEkLQ+2l","OrientationTargetVisibilityComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=null,t._portrait=null,t}return a(t,e),t.prototype.onLoad=function(){this._update(),e.prototype.onLoad.call(this)},t.prototype._update=function(){[this._landscape,this._portrait].forEach(function(e){e&&(e.active=!1)});var e=this.getOrientationConfig();e&&(e.active=!0)},r([l({visible:!0,type:cc.Node})],t.prototype,"_landscape",void 0),r([l({visible:!0,type:cc.Node})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationTargetVisibilityComponent")],t)}(c.default);n.default=u,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationVisibilityComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"e2581X3aHxbO7/jR9vA9evr","OrientationVisibilityComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=!1,t._portrait=!1,t}return a(t,e),t.prototype._update=function(){this.node.active=this.getOrientationConfig()},r([l({visible:!0})],t.prototype,"_landscape",void 0),r([l({visible:!0})],t.prototype,"_portrait",void 0),r([p,m("Responsive/OrientationVisibility")],t)}(c.default);n.default=u,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationWidgetComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"e29cclM/gVSp4v7egY5kqJH","OrientationWidgetComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var c=i(e("./OrientationComponent (scripts.responsive)")),s=cc._decorator,p=s.ccclass,l=s.property,m=s.requireComponent,u=s.menu,d=function(){function e(){this.top=0,this.right=0,this.bottom=0,this.left=0}return r([l()],e.prototype,"top",void 0),r([l()],e.prototype,"right",void 0),r([l()],e.prototype,"bottom",void 0),r([l()],e.prototype,"left",void 0),r([p("OrientationWidgetCase"),m(cc.Widget)],e)}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._landscape=new d,t._portrait=new d,t._initialUpdate=!1,t}return a(t,e),t.prototype.onLoad=function(){cc.find("Canvas").on(cc.Node.EventType.SIZE_CHANGED,this._updateWidget,this),this.getComponent(cc.Widget)||this.addComponent(cc.Widget),this._updateWidget()},t.prototype.onDestroy=function(){cc.find("Canvas").off(cc.Node.EventType.SIZE_CHANGED,this._updateWidget,this)},t.prototype._updateWidget=function(){var e=this.getOrientationConfig(),t=this.getComponent(cc.Widget);t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.isAlignTop=!0,t.isAlignRight=!0,t.isAlignBottom=!0,t.isAlignLeft=!0,t.updateAlignment()},t.prototype.update=function(){this._initialUpdate||(this._updateWidget(),this._initialUpdate=!0)},r([l({type:d,visible:!0})],t.prototype,"_landscape",void 0),r([l({type:d,visible:!0})],t.prototype,"_portrait",void 0),r([p,u("Responsive/OrientationWidget")],t)}(c.default);n.default=y,cc._RF.pop()},{"./OrientationComponent (scripts.responsive)":"OrientationComponent (scripts.responsive)"}],"OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"d35d9MnXF5f4bEwK/wjk4bC","OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OrientationWindowsAppLoaderHandler=void 0;var r=function(e){function t(t){var n=t.orientation,o=e.call(this)||this;return o._orientation=n,o}return a(t,e),t.prototype._getModifiedResourcePath=function(e){return[e,this._orientation.toLowerCase()].filter(function(e){return e}).join("-")},t}(e("./ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)").ReplaceConfigWindowsAppLoaderHandler);n.OrientationWindowsAppLoaderHandler=r,cc._RF.pop()},{"./ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)":"ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)"}],"OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"97dd9eJ09ZflICepFH5Re4e","OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),n.__esModule=!0,n.OutOfMovesStrategy=void 0;var a=function(e){var t,n;function a(t){var n,o=t.reason,a=t.movesComponent;return(n=e.call(this,{reason:o})||this)._movesComponent=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.isLose=function(){return this._movesComponent.getValue()<=0},a}(e("./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)").LoseGameStrategy);n.OutOfMovesStrategy=a,cc._RF.pop()},{"./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"}],"OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"0f60erBGnhW7K8eFbJONXS+","OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.OverEntityColumnGroundSystemStrategy=void 0;var i=e("./DirectionComponent (@tapclap.match-x.engine.components)"),c=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)"),p=e("./GoalCollectorComponent (@tapclap.match-x.engine.components)"),l=e("./GridComponent (@tapclap.match-x.engine.components)"),m=e("./MatrixIteratorFactory (@tapclap.match-x.engine.models)"),u=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=[],a=function(e){var t=e.getComponentByClass(i.DirectionComponent).direction;e.forEachEntities(function(a,r){if(n._isValidEntity(a)){var i=!0;e.forEach(m.MatrixIteratorFactory.createCellIterator(t,r),function(e){e!==r&&(e.entities.find(function(e){var t;return null===(t=e.getComponentByClass(p.GoalCollectorComponent))||void 0===t?void 0:t.goals.find(function(e){return e.isGoal(a)})})||(i=!1))}),i&&o.push({entity:a,cell:r,grid:e})}})};try{for(var c=r(this._world.getComponentsByClass(l.GridComponent)),s=c.next();!s.done;s=c.next())a(s.value.grid)}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}return o},t.prototype._isValidEntity=function(e){return e.getEnabledComponentByClass(c.ExplodeComponent)&&e.getEnabledComponentByClass(s.ExplodeOnGroundComponent)},t}(e("./GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)").GroundSystemStrategy);n.OverEntityColumnGroundSystemStrategy=u,cc._RF.pop()},{"./DirectionComponent (@tapclap.match-x.engine.components)":"DirectionComponent (@tapclap.match-x.engine.components)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)":"ExplodeOnGroundComponent (@tapclap.match-x.engine.components)","./GoalCollectorComponent (@tapclap.match-x.engine.components)":"GoalCollectorComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)":"GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)","./MatrixIteratorFactory (@tapclap.match-x.engine.models)":"MatrixIteratorFactory (@tapclap.match-x.engine.models)"}],"OverallGoal (@tapclap.match-x.engine.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"3cee2tKwIhXHqVJBNCnZoVA","OverallGoal (@tapclap.match-x.engine.goals)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OverallGoal=void 0;var r=function(e){function t(t,n,o){void 0===t&&(t=[]),void 0===n&&(n=0);var a=e.call(this,t,o)||this;return a._total=n,a}return a(t,e),Object.defineProperty(t.prototype,"total",{get:function(){return this._total},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this.count>=this.total},enumerable:!1,configurable:!0}),t}(e("./CompositeGoal (@tapclap.match-x.engine.goals)").CompositeGoal);n.OverallGoal=r,cc._RF.pop()},{"./CompositeGoal (@tapclap.match-x.engine.goals)":"CompositeGoal (@tapclap.match-x.engine.goals)"}],"OverallGoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"f5c1b9CZ9FUmZD99gP/wY+b","OverallGoalCreator (@tapclap.match-x.engine.goals.creators)"),n.__esModule=!0,n.OverallGoalCreator=void 0;var o=e("./CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)"),a=e("./OverallGoal (@tapclap.match-x.engine.goals)"),r=e("./SimpleGoal (@tapclap.match-x.engine.goals)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.create=function(e){var t=e.goals,n=void 0===t?[]:t,o=e.total,i=void 0===o?0:o,c=e.type,s=this._createSubGoals(n),p=i||s.reduce(function(e,t){return e+t.total},0),l=n.map(function(e){var t=e.options;return new r.SimpleGoal([t.entityType],1/0,0)});return new a.OverallGoal(l,p,c)},o}(o.CompositeGoalCreator);n.OverallGoalCreator=c,cc._RF.pop()},{"./CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)":"CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)","./OverallGoal (@tapclap.match-x.engine.goals)":"OverallGoal (@tapclap.match-x.engine.goals)","./SimpleGoal (@tapclap.match-x.engine.goals)":"SimpleGoal (@tapclap.match-x.engine.goals)"}],"ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";cc._RF.push(t,"f4fca5XK3Vf+btwLNhUe/2s","ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),n.__esModule=!0,n.ParallelRadialGameStartAnimatorComponent=void 0;var o,a=e("./RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),r=e("./StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=cc._decorator,m=(0,l.ccclass)(o=(0,l.menu)("Match-X/StartAnimator/RadialGameStartAnimator")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype._showEntities=function(e,t){return void 0===t&&(t=0),this._processCoordinates(e,t,function(t,n,o,a){return new Promise(function(c){for(var s,p=t.getCell(n,o),l=[],m=function(){var t=s.value.getComponent("render").node;if(!t.getComponent(r.StartAnimatorComponent)){var n=new Promise(function(n){var o=cc.sequence([cc.delayTime(a),cc.spawn([cc.scaleTo(e,1,1),cc.fadeIn(0)]),cc.callFunc(n)]);t.runAction(o)});l.push(n)}},u=i(p.entities);!(s=u()).done;)m();Promise.all(l).then(c)})})},o}(a.RadialGameStartAnimatorComponent))||o)||o;n.ParallelRadialGameStartAnimatorComponent=m,cc._RF.pop()},{"./RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","./StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"}],"ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"71d68InGrNVfLM9qLAF2y0K","ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ParrotDestroyAnimationBuilder=void 0;var r=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),i=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),c=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),p=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var t=[],n=null==e?void 0:e.data.find(function(e){var t,n,o=null===(t=e.getEnabledComponentByClass(s.WalkDirectionComponent))||void 0===t?void 0:t.direction;return!(null===(n=e.getEnabledComponentByClass(p.DistanceToGridEdgeComponent))||void 0===n?void 0:n.getDistance(o))});if(n){var o=n.getComponentByClass(i.RenderComponent).node.children[0];o.children[0]&&o.children[1]&&t.push({target:n,animation:new c.FunctionAnimation(function(){o.children[0].active=!1,o.children[1].active=!0})})}return[t]},t}(r.GameActionBuilder);n.ParrotDestroyAnimationBuilder=l,cc._RF.pop()},{"./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)"}],"PatchHelper (@tapclap.utils-js.data)":[function(e,t,n){"use strict";cc._RF.push(t,"0dd54xM3X1MCaLnvbOMerIT","PatchHelper (@tapclap.utils-js.data)"),n.__esModule=!0,n.PatchHelper=void 0;var o=e("./TimeDuration (@tapclap.utils-js.time-duration)"),a=function(){function e(){}return e.diff=function(t,n,o){for(var a=void 0===o?{}:o,r=a.increment,i=void 0===r||r,c=(a.root,[]),s=0,p=Object.entries(t);s<p.length;s++){var l=p[s],m=l[0],u=l[1],d=n[m],y="/"+m;this.isChanged(u,d)&&(void 0===d?c.push({op:"add",path:y,value:u}):c.push({op:"replace",path:y,value:this.getValue(e._normalizeValue(u),e._normalizeValue(d),i)}))}return c},e.isChanged=function(t,n){if(e._normalizeValue(t)!==e._normalizeValue(n))return!0},e.getValue=function(e,t,n){return void 0===n&&(n=!0),n&&"number"==typeof e&&"number"==typeof t?this.getIncrementValue(e,t):e},e._normalizeValue=function(e){return e instanceof o.TimeDuration?e.getDuration():e instanceof Date?e.toISOString():e},e.getIncrementValue=function(e,t){var n=e-t;return(n<0?"-":"+")+"="+Math.abs(n)},e}();n.PatchHelper=a,cc._RF.pop()},{"./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"7b1889ae+xWWKuHYAIuDAPH","PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PathWalkPathStrategy=void 0;var r=e("./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)"),i=e("./TrackComponent (@tapclap.match-x.engine.components)"),c=e("./WalkComponent (@tapclap.match-x.engine.components)"),s=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t,n){var o=this,a=n.getEnabledComponentByClass(c.WalkComponent);if(a){var r=a.path,i=new s.NeighborRetriever({chunk:[t]});return r.includes(t)||r.push(t),i.retrieve(e).flat().filter(function(e){return!r.includes(e)&&o._isValidCell(e)})}return[]},t.prototype._isValidCell=function(e){var t;return!(null===(t=e.getEntity())||void 0===t?void 0:t.getComponentByClass(r.PreventWalkExplodeComponent))&&e.entities.some(function(e){return e.getComponentByClass(i.TrackComponent)})},t.KEY="path",t}(e("./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkPathStrategy);n.PathWalkPathStrategy=p,cc._RF.pop()},{"./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)","./PreventWalkExplodeComponent (@tapclap.match-x.engine.components)":"PreventWalkExplodeComponent (@tapclap.match-x.engine.components)","./TrackComponent (@tapclap.match-x.engine.components)":"TrackComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"Patterns (@tapclap.match-x.engine.chunk-classifier)":[function(e,t,n){"use strict";var o;cc._RF.push(t,"b2b6dnl2KZQHZ7Rr3R4PdP7","Patterns (@tapclap.match-x.engine.chunk-classifier)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Patterns=n.PatternsEnum=void 0,function(e){e.ROW3="row-3",e.ROW4="row-4",e.ROW5="row-5",e.COLUMN3="column-3",e.COLUMN4="column-4",e.COLUMN5="column-5",e.SQUARE="square",e.CORNER="corner",e.CROSS="cross",e.TRIANGLE="triangle"}(o=n.PatternsEnum||(n.PatternsEnum={})),n.Patterns=[{type:o.ROW3,data:[[1,1,1]]},{type:o.ROW4,data:[[1,1,1,1]]},{type:o.ROW5,data:[[1,1,1,1,1]]},{type:o.COLUMN3,data:[[1],[1],[1]]},{type:o.COLUMN4,data:[[1],[1],[1],[1]]},{type:o.COLUMN5,data:[[1],[1],[1],[1],[1]]},{type:o.SQUARE,data:[[1,1],[1,1]]},{type:o.CORNER,data:[[1,1,1],[1,0,0],[1,0,0]]},{type:o.CORNER,data:[[1,0,0],[1,0,0],[1,1,1]]},{type:o.CORNER,data:[[1,1,1],[0,0,1],[0,0,1]]},{type:o.CORNER,data:[[0,0,1],[0,0,1],[1,1,1]]},{type:o.CROSS,data:[[1,1,1],[0,1,0],[0,1,0]]},{type:o.CROSS,data:[[0,0,1],[1,1,1],[0,0,1]]},{type:o.CROSS,data:[[0,1,0],[0,1,0],[1,1,1]]},{type:o.CROSS,data:[[1,0,0],[1,1,1],[1,0,0]]},{type:o.TRIANGLE,data:[[1,1,1],[1,1,0],[1,0,0]]},{type:o.TRIANGLE,data:[[1,0,0],[1,1,0],[1,1,1]]},{type:o.TRIANGLE,data:[[1,1,1],[0,1,1],[0,0,1]]},{type:o.TRIANGLE,data:[[0,0,1],[0,1,1],[1,1,1]]}],cc._RF.pop()},{}],"PaymentProvider (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";cc._RF.push(t,"4acf9sWT/ZVpLv/GrFlM70m","PaymentProvider (@tapclap.sdk-x.payment-service)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PaymentProvider=void 0;var o=e("./Purchase (@tapclap.sdk-x.payment-service)"),a=function(){function e(){}return e.prototype.getType=function(){return this.constructor.PROVIDER_TYPE},e.prototype.init=function(){return Promise.resolve()},e.prototype.getProducts=function(e){return Promise.resolve(e)},e.prototype.getPurchases=function(){return Promise.resolve([])},e.prototype.purchase=function(e){return Promise.resolve(new o.Purchase(this.getType(),e.id))},e.prototype.consume=function(){return Promise.resolve()},e.prototype.isAvailable=function(){return!0},e.PROVIDER_TYPE="unknown",e}();n.PaymentProvider=a,cc._RF.pop()},{"./Purchase (@tapclap.sdk-x.payment-service)":"Purchase (@tapclap.sdk-x.payment-service)"}],"PaymentService (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bd82f3T5XVZoIfI50L5yRbM","PaymentService (@tapclap.sdk-x.payment-service)"),n.__esModule=!0,n.PaymentService=void 0;var c=function(e){var t,n;function a(t,n,o){var a;return(a=e.call(this)||this)._products=t,a._paymentProvider=n,a._purchaseHandler=o,a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._updateProducts=function(e){void 0===e&&(e=[]);for(var t,n=new Map,a=o(this._products);!(t=a()).done;){var r=t.value;r.isAvailable=!1,n.set(r.id,r)}for(var i,c=o(e);!(i=c()).done;){var s=i.value,p=n.get(s.id);p&&(p.isAvailable=!0,p.merge(s))}},r._purchase=function(e){var t=this;return Promise.resolve().then(function(){return t.events.emit(a.EVENT_PURCHASE_BEGIN,e)}).then(function(){return t._paymentProvider.getPurchases()}).then(function(n){var o=n.find(function(t){return t.productId===e.id});return o?Promise.resolve(o):t._paymentProvider.purchase(e)}).then(function(n){return Promise.resolve().then(function(){return t.events.emit(a.EVENT_PURCHASE_COMPLETE,e,n)}).then(function(){return t.events.emit(a.EVENT_PURCHASE_END)}).then(function(){return n})}).catch(function(e){return Promise.resolve().then(function(){return t.events.emit(a.EVENT_PURCHASE_END)}).then(function(){throw e})})},r._consume=function(e,t){var n=this;return Promise.resolve().then(function(){return n.events.emit(a.EVENT_CONSUME_BEGIN,t,e)}).then(function(){return n._purchaseHandler.handle(e,t)}).then(function(o){return n._paymentProvider.consume(e).then(function(){return n.events.emit(a.EVENT_CONSUME_COMPLETE,t,e,o)})}).then(function(){return n.events.emit(a.EVENT_CONSUME_END)}).catch(function(e){return Promise.resolve().then(function(){return n.events.emit(a.EVENT_CONSUME_END)}).then(function(){throw e})})},r.getProducts=function(){return this._products},r.init=function(){var e=this;return Promise.resolve().then(function(){return e._paymentProvider.init()}).then(function(){return e._paymentProvider.getProducts(e._products)}).then(function(t){return e._updateProducts(t)}).then(function(){return e.events.emit(a.EVENT_INIT)})},r.sync=function(){var e=this;return Promise.resolve().then(function(){return e._paymentProvider.getPurchases()}).then(function(t){for(var n,a=[],r=Promise.resolve(),i=function(){var t=n.value,o=e._products.find(function(e){return e.id===t.productId});o&&(a.push(o),r=r.then(function(){return e._consume(t,o)}))},c=o(t);!(n=c()).done;)i();return r.then(function(){return a})})},r.purchase=function(e){var t=this;return Promise.resolve().then(function(){return t.events.emit(a.EVENT_PAYMENT_BEGIN)}).then(function(){return t._purchase(e)}).then(function(n){return t._consume(n,e)}).then(function(){return t.events.emit(a.EVENT_PAYMENT_COMPLETE)}).then(function(){return t.events.emit(a.EVENT_PAYMENT_END)}).then(function(){return e}).catch(function(e){return Promise.resolve().then(function(){return t.events.emit(a.EVENT_PAYMENT_END)}).then(function(){throw e})})},r.isAvailable=function(){return this._paymentProvider.isAvailable()},a}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.PaymentService=c,c.EVENT_INIT="init",c.EVENT_PAYMENT_BEGIN="paymentBegin",c.EVENT_PAYMENT_COMPLETE="paymentComplete",c.EVENT_PAYMENT_END="paymentEnd",c.EVENT_PURCHASE_BEGIN="purchaseBegin",c.EVENT_PURCHASE_COMPLETE="purchaseComplete",c.EVENT_PURCHASE_END="purchaseEnd",c.EVENT_CONSUME_BEGIN="consumeBegin",c.EVENT_CONSUME_COMPLETE="consumeComplete",c.EVENT_CONSUME_END="consumeEnd",cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"PaymentValidationService (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"af21bZMvylTAaPCdD0lCti0","PaymentValidationService (@tapclap.sdk-x.payment-service)"),n.__esModule=!0,n.PaymentValidationService=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._ignorePurchaseTypes=t.ignorePurchaseTypes||[],n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.verify=function(e,t){return this._ignorePurchaseTypes.includes(t.type)?Promise.resolve():this._gateway.post(this._createPath({endpoint:e}),t)},a}(e("./Service (@tapclap.utils-js.service)").Service);n.PaymentValidationService=a,cc._RF.pop()},{"./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)"}],"PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)":[function(e,t,n){"use strict";cc._RF.push(t,"216d78uhlBIGKj2agrUbdtj","PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)"),n.__esModule=!0,n.PerspectiveGridViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./GridViewComponent (@tapclap.match-x.cocos.components.grid)");function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.property,x=(o=E(cc.Integer),a=E(cc.Integer),r=E(cc.Integer),i=E(cc.Integer),c=E(cc.Boolean),s=E(cc.Integer),S((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return v(t=e.call.apply(e,[this].concat(o))||this,"width",m,_(t)),v(t,"height",u,_(t)),v(t,"offset",d,_(t)),v(t,"angle",y,_(t)),v(t,"fixed",f,_(t)),v(t,"ratio",h,_(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n),o.prototype._processNode=function(t,n,o){var a=(90-this.angle)*Math.PI/180,r=this.height/t.rows*(t.rows-n.row-1)/Math.sin(a),i=this.width-2*r*Math.cos(a);this.fixed?(o.width=this.width/t.cols,o.height=this.height/t.rows+n.row/this.ratio*Math.sin(a)):(o.width=i/t.cols,o.height=(o.width+this.offset)*Math.sin(a)),e.prototype._processNode.call(this,t,n,o)},o}(g.GridViewComponent),m=C(l.prototype,"width",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 530}}),u=C(l.prototype,"height",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 350}}),d=C(l.prototype,"offset",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3.5}}),y=C(l.prototype,"angle",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),f=C(l.prototype,"fixed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=C(l.prototype,"ratio",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=l))||p);n.PerspectiveGridViewComponent=x,cc._RF.pop()},{"./GridViewComponent (@tapclap.match-x.cocos.components.grid)":"GridViewComponent (@tapclap.match-x.cocos.components.grid)"}],"PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)":[function(e,t,n){"use strict";cc._RF.push(t,"3692bsg5zlfEpL4iFmC0Wis","PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankFooterWindowLayoutComponent=void 0;var i=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),c=e("./CurrencyFormatter (@tapclap.game-kit.ui.formatters)"),s=e("./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._minCoinsLabel=null,t._breakButton=null,t._adWatchingButton=null,t._coinsForAdWatchingLabel=null,t._defaultOfferLabel="window.piggybank.break",t}var n;return a(t,e),n=t,t.prototype.setMinCoins=function(e){this._minCoinsLabel.string=e.toString()},t.prototype.setCoinsForAdWatching=function(e){this._coinsForAdWatchingLabel.string="+"+e},t.prototype.createPurchaseOffer=function(e){if(this._breakButton)if(null!==e){var t=e.payload.product;this._breakButton.icon=t.currency,this._breakButton.label=t.price,this._breakButton.isIconActive||t.hasPriceWithCurrency||(this._breakButton.label=c.CurrencyFormatter.format(t.price,t.currency))}else this._breakButton.label=this._defaultOfferLabel},t.prototype.handleBreakButtonStatus=function(e,t){e>=t?this._changeBreakButtonToActive():this._changeBreakButtonToInactive()},t.prototype.setActiveAdWatchingButton=function(e){this._adWatchingButton.active=e},t.prototype.emitEventWatchAd=function(){return this.window.events.emit(n.EVENT_WATCH_AD)},t.prototype.emitEventBreak=function(){return this.window.events.emit(n.EVENT_BREAK)},t.prototype._changeBreakButtonToActive=function(){this._breakButton&&(this._breakButton.setInteractable(!0),this._breakButton.style="green")},t.prototype._changeBreakButtonToInactive=function(){this._breakButton&&(this._breakButton.setInteractable(!1),this._breakButton.style="gray")},t.EVENT_BREAK="break",t.EVENT_WATCH_AD="watch-ad",r([m({type:cc.Label,visible:!0})],t.prototype,"_minCoinsLabel",void 0),r([m({type:i.ButtonControlComponent,visible:!0})],t.prototype,"_breakButton",void 0),r([m({type:cc.Node,visible:!0})],t.prototype,"_adWatchingButton",void 0),r([m({type:cc.Label,visible:!0})],t.prototype,"_coinsForAdWatchingLabel",void 0),n=r([l],t)}(s.FooterWindowLayoutComponent);n.PiggybankFooterWindowLayoutComponent=u,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./CurrencyFormatter (@tapclap.game-kit.ui.formatters)":"CurrencyFormatter (@tapclap.game-kit.ui.formatters)","./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"PiggybankForceEndHandler (scripts.meta.modules.piggybank)":[function(e,t,n){"use strict";cc._RF.push(t,"13857jK2KlWpZiYT5ySXfoL","PiggybankForceEndHandler (scripts.meta.modules.piggybank)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankForceEndHandler=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t=e.getModule("piggybank");return!(!t||!t.isActive)&&t.hasReminder()},t}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.PiggybankForceEndHandler=r,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"PiggybankMetaEvent (scripts.meta-events.event)":[function(e,t,n){"use strict";cc._RF.push(t,"9e89707W6ZXJ5FmiZAaofFN","PiggybankMetaEvent (scripts.meta-events.event)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankMetaEvent=void 0;var i=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)"),c=e("./MetaEvent (scripts.meta-events.event)"),s=function(e){function t(t){var n=t.piggybankMetaModule,o=t.progressMetaModule,a=r(t,["piggybankMetaModule","progressMetaModule"]),i=e.call(this,a)||this;return i._piggybankMetaModule=n,i._progressMetaModule=o,i}return a(t,e),t.prototype.isAvailable=function(){return this._progressMetaModule.value>this._availabilityProgress},t.prototype.init=function(){var t=this,n=this._piggybankMetaModule,o=n.breakedAt,a=n.finishingAt,r=new Date;if(a)if(o){var s=new Date(o.getTime()+this._cooldown.getMilliseconds()),p=new Date(s.getTime()+this._duration.getMilliseconds());s<a&&(this._startedAt=p<r?new Date(a.getTime()-this._cooldown.getMilliseconds()-this._duration.getMilliseconds()):s)}else this._startedAt=new Date(a.getTime()-this._cooldown.getMilliseconds()-this._duration.getMilliseconds());return this._piggybankMetaModule.events.on(i.MetaModule.EVENT_CHANGE,function(){t._piggybankMetaModule.breakedAt>t._startedAt&&(t._startedAt=null,t._setState(c.MetaEvent.STATE_COMPLETED),t._piggybankMetaModule.updateState({breakedAt:t._piggybankMetaModule.breakedAt}))}),e.prototype.init.call(this)},t.prototype.run=function(){var t=this;return this.isReady()?(e.prototype.run.call(this),this._piggybankMetaModule.activate().then(function(){return t._piggybankMetaModule.updateState({finishingAt:t.expirationAt}),t._piggybankMetaModule.restart()})):this.isActive()?(this._setState(c.MetaEvent.STATE_ACTIVE),this._piggybankMetaModule.activate()):Promise.resolve()},t.prototype.isReady=function(){return!this._startedAt||e.prototype.isReady.call(this)},t.prototype.restart=function(){var e=this;return Promise.resolve().then(function(){return e._piggybankMetaModule.activate()}).then(function(){return e._piggybankMetaModule.updateState({finishingAt:new Date(0)})}).then(function(){return e._piggybankMetaModule.restart()})},t}(c.MetaEvent);n.PiggybankMetaEvent=s,cc._RF.pop()},{"./MetaEvent (scripts.meta-events.event)":"MetaEvent (scripts.meta-events.event)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"PiggybankMetaModule (scripts.meta.modules.piggybank)":[function(e,t,n){"use strict";cc._RF.push(t,"c1146pNXuRVEqa05yiTiCev","PiggybankMetaModule (scripts.meta.modules.piggybank)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankMetaModule=void 0;var c=function(e){function t(t){var n=t.phases,o=t.storage,a=t.storagePrefixKey,i=t.maxCoins,c=t.minCoins,s=t.rewards,p=r(t,["phases","storage","storagePrefixKey","maxCoins","minCoins","rewards"]),l=e.call(this,p)||this;return l._isCompleted=!1,l._breakedAt=null,l._finishingAt=null,l._active=!1,l._minCoinsReminded=!1,l._maxCoinsReminded=!1,l._currentCoins=0,l._recentlyAddedCoins=0,l._phases=n,l._storage=o,l._storagePrefixKey=a,l._maxCoins=i,l._minCoins=c,l._rewards=s,l}return a(t,e),Object.defineProperty(t.prototype,"coins",{get:function(){return this._currentCoins},set:function(e){this._currentCoins=e,this._saveData()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"recentlyAddedCoins",{get:function(){return this._recentlyAddedCoins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCoins",{get:function(){return this._maxCoins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minCoins",{get:function(){return this._minCoins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rewards",{get:function(){return this._rewards},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakedAt",{get:function(){return this._breakedAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finishingAt",{get:function(){return this._finishingAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMinCoinsReminded",{get:function(){return this._minCoinsReminded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasMaxCoinsReminded",{get:function(){return this._maxCoinsReminded},enumerable:!1,configurable:!0}),t.prototype.init=function(e){var t=this;return e&&(this._currentCoins=e.value,this._breakedAt=e.breakedAt?new Date(e.breakedAt):null,this._finishingAt=e.finishingAt?new Date(e.finishingAt):null),Promise.all([this._storage.getItem(this._storagePrefixKey+":min-coins:reminded"),this._storage.getItem(this._storagePrefixKey+":max-coins:reminded")]).then(function(e){var n=i(e,2),o=n[0],a=n[1];t._minCoinsReminded=o||!1,t._maxCoinsReminded=a||!1}).then(function(){return t.serialize()})},t.prototype.hasReminder=function(){var e=this.coins>=this.minCoins,t=this.coins>=this.maxCoins;return!(!e||t||this.hasMinCoinsReminded)||!(!t||this.hasMaxCoinsReminded)},t.prototype.setFlagMinCoinsReminded=function(e){return this._minCoinsReminded=e,this._storage.setItem(this._storagePrefixKey+":min-coins:reminded",e)},t.prototype.setFlagMaxCoinsReminded=function(e){return this._maxCoinsReminded=e,this._storage.setItem(this._storagePrefixKey+":max-coins:reminded",e)},t.prototype.activate=function(){return this._active=!0,Promise.resolve()},t.prototype.serialize=function(){return{value:this.coins,breakedAt:this.breakedAt,finishingAt:this.finishingAt}},t.prototype.addCoins=function(e){var t=this._rewards[e],n=Math.min(this._currentCoins+t,this.maxCoins);return this._recentlyAddedCoins+=Math.max(n-this._currentCoins,0),this._currentCoins=n,this._saveData()},t.prototype.complete=function(){return this._active=!1,this._breakedAt=new Date,this.emitChange(),this._saveData()},t.prototype.getPhase=function(){var e=this;return this._phases.find(function(t){var n=t.coinsRange;return void 0===n.max?e._currentCoins===n.min:e._currentCoins<=n.max&&e._currentCoins>=n.min})},t.prototype.cleanRecentlyAddedCoins=function(){this._recentlyAddedCoins=0},t.prototype._clean=function(){this._currentCoins=0,this.setFlagMinCoinsReminded(!1),this.setFlagMaxCoinsReminded(!1),this.cleanRecentlyAddedCoins()},t.prototype.updateState=function(e){var t=e.breakedAt,n=e.finishingAt;return t&&(this._breakedAt=t),n&&(this._finishingAt=n),this._saveData()},t.prototype.restart=function(){return this._storage.setItem(this._storagePrefixKey+":tutorial:passed",!1),this._clean(),this.emitChange(),this._saveData()},t.prototype._saveData=function(){return this._service.save(this.serialize())},t.COINS_FOR_LEVEL="coins.for.level",t.COINS_FOR_SPECIAL_LEVEL="coins.for.special.level",t.COINS_FOR_AD_WATCHING="coins.for.ad.watching",t}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.PiggybankMetaModule=c,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"6991fOuYcNSk7Mluh+1/LVi","PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankMetaModuleDevConsoleMenuGenerator=void 0;var r=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),i=e("./PiggybankMetaModule (scripts.meta.modules.piggybank)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._module=null,t}return a(t,e),t.prototype.generate=function(){var e=this;return{reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new r.CallbackDevConsoleCommand({callback:function(){e._module.restart()}})},start:{title:"\u041d\u0430\u0447\u0430\u0442\u044c",command:new c.InputCallbackDevConsoleCommand({placeholder:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",callback:function(){e._module.emitChange()}})},stop:{title:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c",command:new r.CallbackDevConsoleCommand({callback:function(){e._module.complete()}})},"add-coins":{title:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430 \u0437\u0430 \u043e\u0431\u044b\u0447\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c",command:new r.CallbackDevConsoleCommand({callback:function(){e._module.addCoins(i.PiggybankMetaModule.COINS_FOR_LEVEL)}})},"add-coins:special-level":{title:"\u041d\u0430\u0433\u0440\u0430\u0434\u0430 \u0437\u0430 \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c",command:new r.CallbackDevConsoleCommand({callback:function(){e._module.addCoins(i.PiggybankMetaModule.COINS_FOR_SPECIAL_LEVEL)}})},coins:{title:"\u041c\u043e\u043d\u0435\u0442\u044b",command:new c.InputCallbackDevConsoleCommand({placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u043e\u043d\u0435\u0442",callback:function(t){e._module.coins=Number(t)}})}}},t}(e("./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)").MetaModuleDevConsoleMenuGenerator);n.PiggybankMetaModuleDevConsoleMenuGenerator=s,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./PiggybankMetaModule (scripts.meta.modules.piggybank)":"PiggybankMetaModule (scripts.meta.modules.piggybank)"}],"PiggybankNameplate (scripts.meta.modules.piggybank)":[function(e,t,n){"use strict";cc._RF.push(t,"3bb18w9m55Vs52WeTsbiCN4","PiggybankNameplate (scripts.meta.modules.piggybank)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankNameplate=void 0;var r=e("./Nameplate (@tapclap.game-kit.ui.nameplate-manager)"),i=e("./Offer (@tapclap.game-kit.offer-manager)"),c=e("./MetaEvent (scripts.meta-events.event)"),s=function(e){function t(t){var n=t.key,o=t.strategyKey,a=t.offerId,r=t.metaEvent,i=t.piggybankMetaModule,s=t.offerManager,p=e.call(this,{key:n})||this;return p._strategyKey=o,p._offerId=a,p._metaEvent=r instanceof c.MetaEvent?r:null,p._piggybankMetaModule=i,p._offerManager=s,p}return a(t,e),Object.defineProperty(t.prototype,"active",{get:function(){var e,t;return(null===(e=this._metaEvent)||void 0===e?void 0:e.isAvailable())&&(null===(t=this._metaEvent)||void 0===t?void 0:t.isActive())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeLeft",{get:function(){return this._metaEvent.leftTimeDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"badge",{get:function(){var e=this._offerManager.getOfferById(this._strategyKey,this._offerId).state===i.Offer.STATE_AVAILABLE;return this._piggybankMetaModule.coins<this._piggybankMetaModule.maxCoins&&e||this._hasEnoughCoins()},enumerable:!1,configurable:!0}),t.prototype._hasEnoughCoins=function(){return this._piggybankMetaModule.coins>=this._piggybankMetaModule.minCoins},t}(r.Nameplate);n.PiggybankNameplate=s,cc._RF.pop()},{"./MetaEvent (scripts.meta-events.event)":"MetaEvent (scripts.meta-events.event)","./Nameplate (@tapclap.game-kit.ui.nameplate-manager)":"Nameplate (@tapclap.game-kit.ui.nameplate-manager)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)"}],"PiggybankRemindActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"5f764Od0PJXG76Cd47ZyV1j","PiggybankRemindActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankRemindActionCondition=void 0;var i=function(e){function t(t){var n=t.piggybankModuleResolver,o=t.storage,a=t.storagePrefixKey,r=e.call(this)||this;return r._piggybankModule=n.get(),r._storage=o,r._minCoinsRemindedFlagKey=a+":min-coins:reminded",r._maxCoinsRemindedFlagKey=a+":max-coins:reminded",r}return a(t,e),t.prototype.check=function(){var e=this;return Promise.all([this._getMinCoinsRemindedFlag(),this._getMaxCoinsRemindedFlag()]).then(function(t){var n=r(t,2),o=n[0],a=n[1],i=e._piggybankModule.coins>=e._piggybankModule.minCoins,c=e._piggybankModule.coins>=e._piggybankModule.maxCoins;return!i||c||o?!(!c||a||(e._piggybankModule.setFlagMaxCoinsReminded(!0),0)):(e._piggybankModule.setFlagMinCoinsReminded(!0),!0)})},t.prototype._getMinCoinsRemindedFlag=function(){return this._storage.getItem(this._minCoinsRemindedFlagKey)},t.prototype._getMaxCoinsRemindedFlag=function(){return this._storage.getItem(this._maxCoinsRemindedFlagKey)},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.PiggybankRemindActionCondition=i,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"PiggybankReplenishmentAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"0066e8i+sZeaYRXlDdJUuD2","PiggybankReplenishmentAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankReplenishmentAction=void 0;var r=function(e){function t(t){var n=t.piggybankModuleResolver,o=t.rewardKey,a=e.call(this)||this;return a._piggybankModule=n.get(),a._rewardKey=o,a}return a(t,e),t.prototype.run=function(){var e=this;return Promise.resolve().then(function(){e._piggybankModule.isActive&&e._piggybankModule.addCoins(e._rewardKey)})},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.PiggybankReplenishmentAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"PiggybankTutorialWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"1dfe9O4k6xST7mAvF0T/5/f","PiggybankTutorialWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankTutorialWindowAction=void 0;var r=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),i=e("./PiggybankMetaModule (scripts.meta.modules.piggybank)"),c=e("./ActionConstants (scripts.config)"),s=function(e){function t(t){var n=e.call(this,t)||this;return n._piggybankModule=t.piggybankModuleResolver.get(),n._actionManager=t.actionManager,n._hasPiggybankWindowOpened=!!t.hasPiggybankWindowOpened&&t.hasPiggybankWindowOpened,n}return a(t,e),t.prototype._configureWindow=function(e){var t=e.getLayout("content"),n=e.getLayout("footer"),o=this._piggybankModule,a=o.minCoins,r=o.maxCoins,s=o.rewards;t.setLabelsValues("+"+s[i.PiggybankMetaModule.COINS_FOR_LEVEL],"+"+s[i.PiggybankMetaModule.COINS_FOR_SPECIAL_LEVEL]),n.setLabelsValues(a,r),!1===this._hasPiggybankWindowOpened&&this._actionManager.run(c.ACTIONS.WINDOW_PIGGYBANK_CONTENT,{queue:!0})},t}(r.WindowAction);n.PiggybankTutorialWindowAction=s,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./PiggybankMetaModule (scripts.meta.modules.piggybank)":"PiggybankMetaModule (scripts.meta.modules.piggybank)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"PiggybankWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"808caJ4yOVSQqIsDQxIz+hP","PiggybankWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankWindowAction=void 0;var r=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),i=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),c=e("./PiggybankMetaModule (scripts.meta.modules.piggybank)"),s=e("./PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)"),p=e("./ActionConstants (scripts.config)"),l=e("./Offer (@tapclap.game-kit.offer-manager)"),m=function(e){function t(t){var n=e.call(this,t)||this;return n._strategyKey=t.strategyKey,n._piggybankModule=t.piggybankModuleResolver.get(),n._actionManager=t.actionManager,n._user=t.userManager.getCurrentUser(),n._offerManager=t.offerManager,n}return a(t,e),t.prototype._configureWindow=function(e){var n=this,o=e.getLayout("content"),a=e.getLayout("footer"),r=this._piggybankModule,m=r.minCoins,u=r.maxCoins,d=r.rewards,y=this._offerManager.getOfferById(this._strategyKey,"piggybankAd"),f=function(){var e=n._piggybankModule,t=e.coins,r=e.recentlyAddedCoins;a.setActiveAdWatchingButton(t<u&&y.state===l.Offer.STATE_AVAILABLE),a.setMinCoins(m),a.setCoinsForAdWatching(d[c.PiggybankMetaModule.COINS_FOR_AD_WATCHING]),a.handleBreakButtonStatus(t,m),a.createPurchaseOffer(n._getOfferForBreak(n._piggybankModule.getPhase())),o.setProgress({currentCoins:t-r,minCoinsToActive:m,maxCoins:u,isAnimate:!1}),r>0&&(o.setProgress({currentCoins:t,minCoinsToActive:m,maxCoins:u,isAnimate:!0}),o.playAddCoinsAnimation(r))};f(),this._piggybankModule.cleanRecentlyAddedCoins(),this._user.items.once(t.EVENT_ADD_PIGGYBANK_COINS,function(){n._piggybankModule.addCoins(c.PiggybankMetaModule.COINS_FOR_AD_WATCHING),y.update(),f(),n._piggybankModule.cleanRecentlyAddedCoins()}),e.events.once(s.PiggybankFooterWindowLayoutComponent.EVENT_WATCH_AD,function(){n._user.items.delete("piggybank","coins"),n._actionManager.run(p.ACTIONS.WATCH_AD,{items:y.payload.items})}),e.events.on(s.PiggybankFooterWindowLayoutComponent.EVENT_BREAK,function(){var e=n._getOfferForBreak(n._piggybankModule.getPhase());e&&n._actionManager.run(p.ACTIONS.PURCHASE,{product:e.payload.product})}),e.events.on("tutorial",function(){return n._actionManager.run(p.ACTIONS.WINDOW_PIGGYBANK_TUTORIAL,{hasPiggybankWindowOpened:!0})}),e.events.once(i.WindowComponent.EVENT_DESTROY,function(){n._user.items.removeAll(t.EVENT_ADD_PIGGYBANK_COINS)})},t.prototype._getOfferForBreak=function(e){if(void 0===e&&(e=null),null===e)throw new Error("The number of currentCoins is out of range");return null===e.offerId?null:this._offerManager.getOfferById(this._strategyKey,e.offerId)},t.EVENT_ADD_PIGGYBANK_COINS="add:piggybank:coins",t}(r.WindowAction);n.PiggybankWindowAction=m,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)":"PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)","./PiggybankMetaModule (scripts.meta.modules.piggybank)":"PiggybankMetaModule (scripts.meta.modules.piggybank)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"PiggybankWindowLayoutComponent (scripts.windows.layouts.piggybank)":[function(e,t,n){"use strict";cc._RF.push(t,"fd35cMzgIlIB4TNCHO5+e4w","PiggybankWindowLayoutComponent (scripts.windows.layouts.piggybank)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.PiggybankWindowLayoutComponent=void 0;var i=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._progressBar=null,t._piggybankActive=null,t._piggybankInactive=null,t._backgroundActive=null,t._backgroundFinal=null,t._addCoinsAnimation=null,t._addCoinsAnimationLabel=null,t._addCoinsAnimationDelay=0,t}return a(t,e),t.prototype.setProgress=function(e){var t=e.currentCoins,n=e.minCoinsToActive,o=e.maxCoins,a=e.isAnimate,r=void 0!==a&&a;this._progressBar.setProgress(t/o,r,this._addCoinsAnimationDelay),this._progressBar.setTitle(t),this._progressBar.setBarBarrierPosition(n/o),this._handleProgressStatus(t,n,o)},t.prototype.playAddCoinsAnimation=function(e){var t=this;this._addCoinsAnimation.scheduleOnce(function(){t._addCoinsAnimationLabel.string="+"+e,t._addCoinsAnimation.play()},this._addCoinsAnimationDelay)},t.prototype._handleProgressStatus=function(e,t,n){e>=n?(this._changeBackgroundToFinal(),this._changePiggybankToActive()):e>=t?(this._changePiggybankToActive(),this._changeBackgroundToActive()):(this._changePiggybankToInactive(),this._changeBackgroundToInactive())},t.prototype._changePiggybankToActive=function(){this._piggybankActive.enabled=!0,this._piggybankInactive.enabled=!1},t.prototype._changePiggybankToInactive=function(){this._piggybankActive.enabled=!1,this._piggybankInactive.enabled=!0},t.prototype._changeBackgroundToInactive=function(){this._backgroundActive.enabled=!1,this._backgroundFinal.enabled=!1},t.prototype._changeBackgroundToActive=function(){this._backgroundActive.enabled=!0,this._backgroundFinal.enabled=!1},t.prototype._changeBackgroundToFinal=function(){this._backgroundActive.enabled=!1,this._backgroundFinal.enabled=!0},r([p({type:cc.ProgressBar,visible:!0})],t.prototype,"_progressBar",void 0),r([p({type:cc.Sprite,visible:!0})],t.prototype,"_piggybankActive",void 0),r([p({type:cc.Sprite,visible:!0})],t.prototype,"_piggybankInactive",void 0),r([p({type:cc.Sprite,visible:!0})],t.prototype,"_backgroundActive",void 0),r([p({type:cc.Sprite,visible:!0})],t.prototype,"_backgroundFinal",void 0),r([p({type:cc.Animation,visible:!0})],t.prototype,"_addCoinsAnimation",void 0),r([p({type:cc.Label,visible:!0})],t.prototype,"_addCoinsAnimationLabel",void 0),r([p({min:0,visible:!0})],t.prototype,"_addCoinsAnimationDelay",void 0),r([s],t)}(i.WindowLayoutComponent);n.PiggybankWindowLayoutComponent=l,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"59f13A7MGRUG60kUpgDU401","PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.PinataAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),l=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)"),d=e("./HealthComponent (@tapclap.match-x.engine.components)"),y=e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)"),f=e("./HealthViewComponent (scripts.common.components)"),h=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),g=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),v=function(e){function t(t){var n=t.entityType,o=void 0===n?"boss-pinata":n,a=t.state,r=e.call(this)||this;return r._started=!1,r._stateKey=a,r._entityType=o,r}return a(t,e),t.prototype.build=function(e){var t=[];if(!e.data)return[t];switch(this._stateKey){case h.ExplodeSystem.STATE:this._explodeState(e,t);break;case g.EmitSystem.STATE_EMIT:this._emitState(e,t)}return[t]},t.prototype._emitState=function(e,t){var n,o,a=new Set,i=function(n,o){if(o!==u.EmitOnTurnEndAndExplodeComponent.KEY)return{value:void 0};if(n.type!==s._entityType)return{value:void 0};if(a.has(n))return"continue";a.add(n);var r=s._getCounterAnimation(n),i=e.data.filter(function(e){return e.emitterEntity===n}).length,m=s._getTakenHealthAnimation(n,i),d=new p.AnimationFactory(n).createAnimation("emitCandy");t.push(new c.AnimationData(n,new l.GroupAnimation([d,r,m],!1)))},s=this;try{for(var m=r(e.data),d=m.next();!d.done;d=m.next()){var y=d.value,f=i(y.emitterEntity,y.trigger);if("object"==typeof f)return f.value}}catch(h){n={error:h}}finally{try{d&&!d.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}},t.prototype._explodeState=function(e,t){var n,o,a=function(e){if(e.type!==i._entityType)return"continue";e.getEnabledComponent(d.HealthComponent.KEY).isDeath&&t.push(new c.AnimationData(e,new m.FunctionAnimation(function(){var t=e.getEnabledComponentByClass(s.RenderComponent).node,n=t.getChildByName("counter"),o=t.getChildByName("taken-health");n.active=!1,o.active=!1})))},i=this;try{for(var p=r(e.data.flat()),l=p.next();!l.done;l=p.next())a(l.value.entity)}catch(u){n={error:u}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}},t.prototype._getCounterAnimation=function(e){return new m.FunctionAnimation(function(){var t=e.getEnabledComponent(d.HealthComponent.KEY),n=e.getEnabledComponentByClass(s.RenderComponent).node;if(n&&t){var o=n.getComponent(f.HealthViewComponent);o&&o.setValue(Math.max(0,t.getValue()))}})},t.prototype._getTakenHealthAnimation=function(e,t){return new m.FunctionAnimation(function(){var n,o=e.getEnabledComponentByClass(s.RenderComponent).node;if(o){var a=o.getComponent(y.StepCounterViewComponent);a&&(a.setValue(-t),null===(n=new p.AnimationFactory(e).createAnimation("health"))||void 0===n||n.run())}})},t}(i.GameActionBuilder);n.PinataAnimationBuilder=v,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)":"EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./HealthViewComponent (scripts.common.components)":"HealthViewComponent (scripts.common.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)"}],"PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"c9ffaMLWeRbO5jXLfQXGQXX","PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PinataLegacyLevelComponentRetriever=void 0;var r=function(e){function t(t){var n=t.candyWrapperComponentRetriever,o=e.call(this)||this;return o._candyWrapperComponentRetriever=n,o}return a(t,e),t.prototype.retrieve=function(e){if("pinata"===e.bossName){var t=this._candyWrapperComponentRetriever.retrieve(e);return{health:{value:e.bossLife},emitOnTurnEndAndExplode:{type:"random",target:"random",emitCount:1,entities:{candywrapper:{amount:1/0,options:{components:t}}}}}}},t}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.PinataLegacyLevelComponentRetriever=r,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"PipelineProcessSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"e2befD974FTJJ1XGi8y0KR4","PipelineProcessSystem (@tapclap.match-x.engine.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PipelineProcessSystem=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.preProcess=function(){},t.prototype.process=function(){return!1},t.prototype.postProcess=function(){},t}(e("./System (@tapclap.match-x.engine.systems)").System);n.PipelineProcessSystem=r,cc._RF.pop()},{"./System (@tapclap.match-x.engine.systems)":"System (@tapclap.match-x.engine.systems)"}],"PipelineSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"239f2mgU0NU3Kdg14ooJc+8","PipelineSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.PipelineSystem=void 0;var s=function(e){var t,n,a,r;function s(t){var n,o=t.pipeline,a=void 0===o?[]:o,r=t.world;return(n=e.call(this)||this)._pipeline=a,n._loopIndex=0,n._world=r,n}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),s.prototype.process=function(){if(!this._pipeline)throw new Error("Pipeline not defined");this._loopIndex=0;for(var e,t=o(this._pipeline);!(e=t()).done;)e.value.preProcess();var n=!1,a=!1;do{this._world&&this._world.setState(s.STATE,{loopIndex:this._loopIndex}),a=!1;for(var r,i=o(this._pipeline);!(r=i()).done;)r.value.process()&&(a=!0,n=!0);this._loopIndex++}while(a);for(var c,p=o(this._pipeline);!(c=p()).done;)c.value.postProcess(n);return n},a=s,(r=[{key:"pipeline",get:function(){return this._pipeline},set:function(e){this._pipeline=e}}])&&i(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),s}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.PipelineSystem=s,s.KEY="pipeline",s.STATE="pipelineState",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"PlaceNumberComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"c3df2LaP8NXBbRbfIQ70Pjo","PlaceNumberComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.PlaceNumberComponent=n.PlaceNumberStyle=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(){function e(){this.number=0,this.icon=null,this.showNumber=!1}return r([s()],e.prototype,"number",void 0),r([s(cc.SpriteFrame)],e.prototype,"icon",void 0),r([s()],e.prototype,"showNumber",void 0),r([c("PlaceNumberStyle")],e)}();n.PlaceNumberStyle=p;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=0,t._sprite=null,t._label=null,t._numbersStyles=[],t}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){var t=this._numbersStyles.find(function(t){return t.number===Number(e)});this._value=e,this._label.enabled=!1,this._sprite.enabled=!1,(!t||t&&t.showNumber)&&(this._label.enabled=!0,this._label.string=e.toString()),t&&t.icon&&(this._sprite.enabled=!0,this._sprite.spriteFrame=t.icon)},enumerable:!1,configurable:!0}),r([s({visible:!0})],t.prototype,"value",null),r([s({type:cc.Sprite,visible:!0})],t.prototype,"_sprite",void 0),r([s({type:cc.Label,visible:!0})],t.prototype,"_label",void 0),r([s({type:[p],visible:!0})],t.prototype,"_numbersStyles",void 0),r([c],t)}(cc.Component);n.PlaceNumberComponent=l,cc._RF.pop()},{}],"PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"a7b9cGa9aFWnLlByeqBwiZi","PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlanetarySwapAnimation=void 0;var r=function(e){function t(t,n,o,a){void 0===a&&(a=1);var r=e.call(this)||this;return r._entityNode=t,r._targetPosition=n,r._isUpper=o,r._duration=a,r}return a(t,e),t.prototype.run=function(){var t=this,n=this._entityNode.getScale(cc.v2()),o=this._entityNode.zIndex,a=this._isUpper?1.2:.7,r=this._entityNode.zIndex+(this._isUpper?1:-1),i=this._entityNode.getChildByName("inputTarget");i&&(i.active=!1);var c=cc.sequence([cc.callFunc(function(){t._entityNode.zIndex=r}),cc.spawn([cc.moveTo(this._duration,this._targetPosition.x,this._targetPosition.y),cc.sequence([cc.scaleTo(this._duration/2,this._entityNode.scale*a,this._entityNode.scale*a),cc.scaleTo(this._duration/2,n.x,n.y)])]),cc.callFunc(function(){t._entityNode.zIndex=o})]).easing(cc.easeInOut(2));return this.addAction(c,this._entityNode),e.prototype.run.call(this)},t}(e("./ActionAnimation (@tapclap.match-x.cocos.animations)").ActionAnimation);n.PlanetarySwapAnimation=r,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)"}],"PlatformContextActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"942d1Sl7IZSN7x5A/Bb0dB6","PlatformContextActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformContextActionCondition=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._platformLauncher=t.platformLauncher,n._rules=t.rules,n}return a(t,e),t.prototype.check=function(){var e=this;return this._platformLauncher.getContext().then(function(t){return!t||e._rules.platforms.includes(t)})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.PlatformContextActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"0da77M0uGhcWJOuwxiZvCwY","PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformDevConsoleMenuGenerator=void 0;var r=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),i=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=function(e){function t(t){var n=e.call(this)||this;return n._platformStorage=t.platformStorage,n}return a(t,e),t.prototype.generate=function(){var e=this;return{userAgent:{title:"UserAgent",items:[{title:window&&window.navigator&&window.navigator.userAgent}]},platformStorage:{title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",command:new i.CallbackDevConsoleCommand({callback:function(){e._platformStorage.clear()}})}}},t}(r.DevConsoleMenuGenerator);n.PlatformDevConsoleMenuGenerator=c,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"}],"PlatformLauncher (@tapclap.sdk-x.platform-launcher)":[function(e,t,n){"use strict";cc._RF.push(t,"9c7afXG3/1U/b239GYu5fsD","PlatformLauncher (@tapclap.sdk-x.platform-launcher)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformLauncher=void 0;var o=function(){function e(){}return e.prototype.init=function(){return Promise.resolve()},e.prototype.complete=function(){return Promise.resolve()},e.prototype.hasLoadingProgress=function(){return!0},e.prototype.setLoadingProgress=function(){},e.prototype.getContext=function(){return Promise.resolve()},e}();n.PlatformLauncher=o,cc._RF.pop()},{}],"PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"24636LDmjxcv4hrQaQH/PAE","PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformPromoGiftCondition=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.check=function(){return Promise.resolve(!1)},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.PlatformPromoGiftCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"7cdf73mTyNe7pw3iq011XQJ","PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformPromoGiftConfirmationAction=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.run=function(){return Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.PlatformPromoGiftConfirmationAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"PlatformPromoGiftWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"12425M5qaZeNadBbRUtCztx","PlatformPromoGiftWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformPromoGiftWindowAction=void 0;var i=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),c=e("./PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)"),s=function(e){function t(t){var n=e.call(this,t)||this;return n._offerManager=t.offerManager,n._user=t.userManager.getCurrentUser(),n._offerId=t.offerId,n._giftTarget=t.giftTarget,n}return a(t,e),t.prototype._configureWindow=function(e){var n=this,o=e.getLayout("content"),a=this._offerManager.getOfferById("platformPromoGifts",this._offerId),i=r(a.payload.items,1)[0];this._windowComponent=e,o.setReward(i),this._uiManager.addClaimAnimation({node:o.iconNode,target:this._giftTarget}),e.events.once(c.PlatformPromoGiftWindowLayoutComponent.EVENT_GET_GIFT,function(){e.hide(),n._uiManager.playClaimAnimations().then(function(){n._user.items.add(i),n._caller.run(t.CONFIRM_GIFT),n.closeWindow(e),e.events.emit(t.RESOLVE)})})},t.prototype.run=function(){var n=this;return Promise.resolve().then(function(){return e.prototype.run.call(n)}).then(function(){return new Promise(function(e){n._windowComponent.events.once(t.RESOLVE,e)})})},t.CONFIRM_GIFT="confirm-gift",t.RESOLVE="resolve",t}(i.WindowAction);n.PlatformPromoGiftWindowAction=s,cc._RF.pop()},{"./PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)":"PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"b0dadyV6WdXCZb8WmzBe3B1","PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformPromoGiftWindowLayoutComponent=void 0;var i=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),c=e("./IconComponent (@tapclap.game-kit.ui.icons)"),s=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),p=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t._icon=null,t._glow=null,t._glowSpinDuration=0,t._button=null,t._bounceAnimationKeys=[],t._bounceAnimationDelay=0,t._bounceAnimationPause=0,t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"iconNode",{get:function(){return this._icon.node},enumerable:!1,configurable:!0}),t.prototype.start=function(){this._runIdleAnimation()},t.prototype.setReward=function(e){var t=e.spec+":"+e.name;this._icon.icon=t,this._label.string=this._getFormattedLabelValue(e.amount?e.amount:e.duration,e.duration)},t.prototype.emitGettingGift=function(){return this.window.events.emit(n.EVENT_GET_GIFT)},t.prototype._runIdleAnimation=function(){if(cc.tween(this._glow).by(this._glowSpinDuration,{angle:360}).repeatForever().start(),this._bounceAnimationKeys.length>0){var e=cc.tween(this._button).repeatForever(this._bounceAnimationKeys.reduce(function(e,t){return e.to(t.duration,{scale:t.scale},{easing:p.AnimationKey.QUAD_IN_OUT_EASING})},cc.tween()).delay(this._bounceAnimationPause));this.scheduleOnce(function(){return e.start()},this._bounceAnimationDelay)}},t.prototype._getFormattedLabelValue=function(e,t){return t?this._label.node.getComponent(s.I18NLabel).i18n.t("formattedTime",{value:e}):e},r([u({type:cc.Label,visible:!0})],t.prototype,"_label",void 0),r([u({type:c.IconComponent,visible:!0})],t.prototype,"_icon",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_glow",void 0),r([u({visible:!0})],t.prototype,"_glowSpinDuration",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_button",void 0),r([u({type:[p.AnimationKey],visible:!0})],t.prototype,"_bounceAnimationKeys",void 0),r([u({visible:!0})],t.prototype,"_bounceAnimationDelay",void 0),r([u({visible:!0})],t.prototype,"_bounceAnimationPause",void 0),n=r([m],t)}(i.WindowLayoutComponent);n.PlatformPromoGiftWindowLayoutComponent=d,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"PlatformRemoteConfig (scripts.platform)":[function(e,t,n){"use strict";cc._RF.push(t,"5e0b5daZp5ZG5M+G1D6sE5T","PlatformRemoteConfig (scripts.platform)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformRemoteConfig=void 0;var o=function(){function e(e){var t=(void 0===e?{}:e).config;this._config={},this._config=null!=t?t:{}}return e.prototype.init=function(){return Promise.resolve()},e.prototype.fetch=function(){return Promise.resolve()},e.prototype.getBoolean=function(e){return Promise.resolve({key:e,value:this._config[e]})},e.prototype.getInteger=function(e){return this._getValue(e)},e.prototype.getDouble=function(e){return this._getValue(e)},e.prototype.getString=function(e){return this._getValue(e)},e.prototype.getJSON=function(e){return this._getValue(e)},e.prototype._getValue=function(e){return Promise.resolve({key:e,value:this._config[e]})},e}();n.PlatformRemoteConfig=o,cc._RF.pop()},{}],"PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)":[function(e,t,n){"use strict";cc._RF.push(t,"3330dxdbUBKvqZyPozUp7KD","PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)"),n.__esModule=!0,n.PlatformSDKLoader=void 0;var o=e("./ScriptLoader (@tapclap.utils-js.script-loader)"),a=function(){function e(){}return e.loadSDK=function(e,t){return o.ScriptLoader.loadScript(e,t)},e}();n.PlatformSDKLoader=a,cc._RF.pop()},{"./ScriptLoader (@tapclap.utils-js.script-loader)":"ScriptLoader (@tapclap.utils-js.script-loader)"}],"PlatformStorage (@tapclap.game-kit.data-storage)":[function(e,t,n){"use strict";cc._RF.push(t,"e94043DUddY6rGb6Uk6qL4L","PlatformStorage (@tapclap.game-kit.data-storage)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformStorage=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._storageKey=t.storageKey||"storage",n._forcedKeys=t.forcedKeys||[],n._storage=null,n}return a(t,e),t.prototype.getItem=function(e){return this._getStorage().then(function(t){return t[e]})},t.prototype.setItem=function(e,t){var n=this,o=!1;return this._getStorage().then(function(a){void 0===t?delete a[t]:a[e]!==t&&(o=!0,a[e]=t);var r=n._forcedKeys.includes(e);if(o)return n._sendStorage(a,r)})},t.prototype.removeItem=function(e){return this.setItem(e,void 0)},t.prototype.clear=function(){var e=this;return this._sendStorage(null,!0).then(function(){return e._storage={}})},t.prototype.getKeys=function(){return this._getStorage().then(function(e){return Object.keys(e)})},t}(e("./DataStorage (@tapclap.game-kit.data-storage)").DataStorage);n.PlatformStorage=r,cc._RF.pop()},{"./DataStorage (@tapclap.game-kit.data-storage)":"DataStorage (@tapclap.game-kit.data-storage)"}],"PlaySpineAnimationAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"a85darC7CZYR4dXp+u0H8x/","PlaySpineAnimationAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.PlaySpineAnimationAction=void 0;var c=function(e){function t(t){var n,o,a=e.call(this,t)||this,i=t.node,c=void 0===i?"":i,s=t.finishEvent,p=void 0===s?"":s,l=t.spinePrefab,m=t.sceneManager,u=t.mainTrack,d=t.fade,y=void 0===d?{}:d,f=t.callerOptions,h=void 0===f?[]:f,g=t.delay,v=void 0===g?[0,0]:g;a._node=c,a._fade=y,a._delay=v,a._spine=l,a._mainTrack=u,a._finishEvent=p,a._sceneManager=m,a._callerOptions={};try{for(var _=r(h),b=_.next();!b.done;b=_.next()){var C=b.value;a._callerOptions[C]=t[C]}}catch(w){n={error:w}}finally{try{b&&!b.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}return a}return a(t,e),t.prototype.run=function(){var e=this,n=this._sceneManager.getCurrentSceneComponent(),o=this._node&&cc.find(this._node,n.node)||n.node,a=cc.instantiateFrom(this._spine),r=i(this._delay,2),c=r[0],s=r[1];return a.runAction(cc.sequence([cc.delayTime(c),cc.callFunc(function(){return o.addChild(a)})])),new Promise(function(n){var o=a.getComponent(sp.Skeleton);e._setListener(o,function(){o.setEventListener(null),o.setCompleteListener(null),a.runAction(cc.sequence([cc.delayTime(s),cc.callFunc(function(){n(),e._caller.run(t.CALLER_END,e._callerOptions),e._fadeStep(a,t.FADE_AFTER_END)})]))})})},t.prototype._fadeStep=function(e,t){if(this._fade[t]){var n=i(this._fade.afterEnd,2),o=n[0],a=n[1];e.runAction(cc.fadeTo(o,a))}},t.prototype._setListener=function(e,t){var n=this;this._finishEvent?e.setEventListener(function(o,a){n._mainTrack&&e.getCurrent(n._mainTrack)!==o||n._finishEvent===a.data.name&&t()}):e.setCompleteListener(function(o){var a,r=e._startEntry;o===e.getCurrent(null!==(a=n._mainTrack)&&void 0!==a?a:r.trackIndex)&&t()})},t.FADE_AFTER_END="afterEnd",t.CALLER_END="end",t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.PlaySpineAnimationAction=c,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"69b05wDaDNdCaAzDbNewtYN","PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.PopcornAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),d=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./SpineAnimation (@tapclap.match-x.cocos.animations)"),f=e("./Random (@tapclap.utils-js.random)"),h=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=function(e){function t(t){var n=e.call(this)||this;return n._partSpeed=350,n._random=new f.Random,n._maxPartScale=3,n._world=t.world,n._partPrefabPath=t.partPrefabPath,n._explodingPartPrefabPath=t.explodingPartPrefabPath,n._sound=t.sound,n._audioEffectsPlayer=t.audioEffectsPlayer,n}return a(t,e),t.prototype.build=function(e){var t,n,o=this,a=[],i=[],f=function(e,t,n,r){var f=e.getEnabledComponent("render").node,v=g._getTargetsFromBlasted(f,t),_=g._world.getComponent("tiles").grid.getEnabledComponentByClass(s.RenderComponent).node;v.forEach(function(e){var t=e.cell,n=(e.entity,new m.FunctionAnimation(function(){return new Promise(function(e){var n=t.getEnabledComponentByClass(s.RenderComponent).node,a=cc.instantiateFrom(o._partPrefabPath),r=f.parent.convertToWorldSpaceAR(f.position),i=_.convertToNodeSpaceAR(r);i.addSelf(cc.v2(o._random.getInteger(-15,15),o._random.getInteger(20,35))),_.addChild(a),a.setPosition(i),a.setScale(1e-4);var c=n.parent.convertToWorldSpaceAR(n.position),l=_.convertToNodeSpaceAR(c),m=new cc.Vec2;cc.Vec2.subtract(m,i,l);var y=_.convertToNodeSpaceAR(new cc.Vec2(cc.winSize.width,cc.winSize.height)).y,h=new cc.Vec2(i.x,Math.max(l.y,i.y));h.x-=.5*m.x,h.y=cc.misc.clampf(h.y+o._random.getInteger(50,120),-y,y);var g=[i,h,l];new d.GroupAnimation([new u.ActionAnimation(cc.bezierTo(.7,g).easing(cc.easeQuadraticActionOut()),a),new p.ChainAnimation([new u.ActionAnimation(cc.scaleTo(.35,o._maxPartScale),a),new u.ActionAnimation(cc.scaleTo(.7*.4,1),a),new u.ActionAnimation(cc.scaleTo(.7*.1,.001),a),new u.ActionAnimation(cc.callFunc(function(){a.destroy(),e(l)}),a)])],!1).run()}).then(function(e){return new Promise(function(t){var n=cc.instantiateFrom(o._explodingPartPrefabPath);_.addChild(n),n.setPosition(e);var a=n.getChildByName("spine").getComponent(sp.Skeleton);a.setAnimation(0,"particle_blow",!1),t(),a.setCompleteListener(function(){n.destroy()})})})}));i.push(n)});var b=g._getSpine(e),C=n||r,w=C?new l.EventListenAnimation(C,"explode"):new h.DummyAnimation;a.push(new c.AnimationData(e,new d.GroupAnimation([new p.ChainAnimation([w,g._audioEffectsPlayer.create(g._sound,{mergable:0}),new y.SpineAnimation(b,{animationName:"burst",loop:!1,event:"startFly",timeScale:2}),new d.GroupAnimation(i),new l.EventTriggerAnimation(e,"explode")]),new h.DummyAnimation],!!C)))},g=this;try{for(var v=r(e.data.flat().filter(function(e){var t=e.entity;return null==t?void 0:t.type.includes("popcorn")})),_=v.next();!_.done;_=v.next()){var b=_.value;f(b.entity,b.blasted,b.affectedBy,b.blastedBy)}}catch(C){t={error:C}}finally{try{_&&!_.done&&(n=v.return)&&n.call(v)}finally{if(t)throw t.error}}return[a]},t.prototype._getTargetsFromBlasted=function(e,t){var n=[];return t.forEach(function(e){var t=e.cell,o=e.entity;return n.push({cell:t,entity:o})}),n.sort(function(t,n){var o=e.parent.convertToWorldSpaceAR(e.position),a=t.cell.getEnabledComponentByClass(s.RenderComponent).node,r=n.cell.getEnabledComponentByClass(s.RenderComponent).node,i=a.parent.convertToWorldSpaceAR(a.position),c=r.parent.convertToWorldSpaceAR(r.position);return-(cc.Vec2.distance(o,i)-cc.Vec2.distance(o,c))})},t.prototype._getSpine=function(e){return e.getEnabledComponent("render").node.getComponentInChildren(sp.Skeleton)},t}(i.GameActionBuilder);n.PopcornAnimationBuilder=g,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)"}],"PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"ff916SSAmpTtpR4fGvA5cpY","PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PopcornLegacyLevelComponentRetriever=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.charCode="p",t}return a(t,e),t.prototype.retrieve=function(e){var t=this,n={targetsCount:2,targetVar:70,targets:[]};return e.popcornPartsCount&&(n.targetsCount=e.popcornPartsCount),e.popcornTargetVar&&(n.targetVar=e.popcornTargetVar),e.targets&&e.targets.forEach(function(e,o){e.split("").forEach(function(e,a){e===t.charCode&&n.targets.push({row:o,col:a})})}),{explodeRetriever:{options:n}}},t}(e("./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)").LegacyLevelComponentRetriever);n.PopcornLegacyLevelComponentRetriever=r,cc._RF.pop()},{"./LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)":"LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)"}],"PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"26f61wNvq5XzaPIbVvhZo9l","PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.PostProcessGameEventStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.compute=function(){return!0},a}(e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)").GameEventStrategy);n.PostProcessGameEventStrategy=a,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"}],"PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"07a4c2WEXNZS5TsGELHSPAV","PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)"),n.__esModule=!0,n.PostSuperEntityHandler=void 0;var o=function(){function e(){}return e.prototype.handle=function(e){e.cell,e.entity,e.type,e.chunk},e}();n.PostSuperEntityHandler=o,cc._RF.pop()},{}],"PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"0c315fvX3JSjJ9m1bDSQx1s","PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"),n.__esModule=!0,n.PostSuperEntitySystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n,o=t.world,a=(t.config,t.postHandlers),r=void 0===a?[]:a;return(n=e.call(this)||this)._world=o,n._postHandlers=r,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.process=function(){var e=this,t=this._world.getState(a.SuperEntitySystem.STATE);return t&&t.data&&t.data.forEach(function(t){var n=t.cell,o=t.entity,a=t.type,r=t.chunkExplodeModels;e._postHandlers.forEach(function(e){return e.handle({cell:n,entity:o,type:a,chunk:r})})}),!1},o}(o.PipelineProcessSystem);n.PostSuperEntitySystem=i,i.KEY="postSuperEntity",i.STATE="postSuperEntity",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":"SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"}],"PostponeExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"31263MI3Z5eL7hAsuf8tuDe","PostponeExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PostponeExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="postponeExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PostponeExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"0fa4185I1pZTZVZLKVPNN+f","PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PostponeExplodeHandler=void 0;var r=e("./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)"),i=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),c=e("./PostponeExplodeComponent (@tapclap.match-x.engine.components)"),s=e("./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)"),p=e("./HealthComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype._explode=function(e,t){var n=t.getEnabledComponentByClass(i.ExplodeComponent),o=t.getEnabledComponentByClass(c.PostponeExplodeComponent),a=t.getEnabledComponentByClass(p.HealthComponent),r=!a||a.isDeath;return!!(n&&o&&r)&&(o&&(o.enable=!1),t.addComponent(s.ExplodeImmediateOnceComponent.KEY,new s.ExplodeImmediateOnceComponent),!0)},t.prototype._blast=function(e,t){return this._explode(e,t)},t}(r.ExplodeHandler);n.PostponeExplodeHandler=l,cc._RF.pop()},{"./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)":"ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)","./ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)":"ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PostponeExplodeComponent (@tapclap.match-x.engine.components)":"PostponeExplodeComponent (@tapclap.match-x.engine.components)"}],"PostponeGoalComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"26fd10GDMBSN48NJL1cRTZe","PostponeGoalComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PostponeGoalComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="postponeGoal",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PostponeGoalComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PrefabFactory (@tapclap.match-x.cocos.prefab-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"7319csPNRtbCqegh9m42RzR","PrefabFactory (@tapclap.match-x.cocos.prefab-factory)"),n.__esModule=!0,n.PrefabFactory=void 0;var o=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._prefabs=e,this._options=t}var t=e.prototype;return t.createNode=function(e){var t=this._prefabs[e]||this._prefabs[this._options.defaultPrefab];return t?cc.instantiateFrom(t):new cc.Node},t.setPrefabs=function(e){Object.assign(this._prefabs,e)},e}();n.PrefabFactory=o,cc._RF.pop()},{}],"PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)":[function(e,t,n){"use strict";cc._RF.push(t,"9075ewHfjdaMpDkPA9PD1mC","PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.PrefabResourceExtractor=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.extract=function(e){var t=[],n=function(e){var o,a;e instanceof Object&&e.prefab&&t.push(e.prefab);try{for(var i=r(Object.values(e)),c=i.next();!c.done;c=i.next()){var s=c.value;s instanceof Object&&(s.prefab&&t.push(s.prefab),n(s))}}catch(p){o={error:p}}finally{try{c&&!c.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}};return n(e),Array.from(new Set(t))},t}(e("./ResourceExtractor (@tapclap.game-kit.resource-manager)").ResourceExtractor);n.PrefabResourceExtractor=i,cc._RF.pop()},{"./ResourceExtractor (@tapclap.game-kit.resource-manager)":"ResourceExtractor (@tapclap.game-kit.resource-manager)"}],"PrefabResourcesConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"90e34jVewxfDaqZIpD8GxdL","PrefabResourcesConfig (scripts.config)"),n.__esModule=!0,n.PrefabResourcesConfig=void 0;var o=e("./EntitySkinConfig (scripts.config)"),a=Object.assign({"bday-cake":"prefabs-entities/bday-cake/bday-cake",bee:"prefabs-entities/bee/bee",beehive:"prefabs-entities/beehive/beehive","blocker-1":"prefabs-entities/ribbon/ribbon","bombribbons-green":"prefabs-entities/bombribbons/bombribbons-green","bombribbons-orange":"prefabs-entities/bombribbons/bombribbons-orange","bombribbons-pink":"prefabs-entities/bombribbons/bombribbons-pink","bombribbons-violet":"prefabs-entities/bombribbons/bombribbons-violet","bombribbons-white":"prefabs-entities/bombribbons/bombribbons-white","boss-angrybubble":"prefabs-entities/angrybubble/angrybubble","boss-chameleon":"prefabs-entities/chameleon/chameleon","boss-fox":"prefabs-entities/fox/fox","boss-kitty":"prefabs-entities/kitty/kitty","boss-mousy":"prefabs-entities/mousy/mousy","boss-owl":"prefabs-entities/owl/owl","boss-panda":"prefabs-entities/panda/Panda","boss-penguin":"prefabs-entities/penguin/penguin","boss-piggy":"prefabs-entities/piggy/piggy","boss-pinata":"prefabs-entities/pinata/Pinata","boss-raccoon":"prefabs-entities/raccoon/raccoon","boss-nutcracker":"prefabs-entities/nutcracker/nutcracker","bubble-blue":"prefabs-entities/bubblegum/blue","bubble-green":"prefabs-entities/bubblegum/green","bubble-pink":"prefabs-entities/bubblegum/pink","bubble-purple":"prefabs-entities/bubblegum/purple","bubble-violet":"prefabs-entities/bubblegum/violet","bubble-white":"prefabs-entities/bubblegum/white","bubble-yellow":"prefabs-entities/bubblegum/yellow",bubble:"prefabs-entities/bubble/bubble",butterfly:"prefabs-entities/butterfly/butterfly","cake-mini-biscuit":"prefabs-entities/cake-mini/biscuit","cake-mini-syrup":"prefabs-entities/cake-mini/syrup","cake-mini-topping":"prefabs-entities/cake-mini/topping","candy-blue":"prefabs-entities/candy/candy-blue","candy-brown":"prefabs-entities/candy/candy-brown","candy-green":"prefabs-entities/candy/candy-green","candy-orange":"prefabs-entities/candy/candy-orange","candy-pink":"prefabs-entities/candy/candy-pink","candy-purple":"prefabs-entities/candy/candy-purple","candy-violet":"prefabs-entities/candy/candy-violet","candy-white":"prefabs-entities/candy/candy-white","candy-yellow":"prefabs-entities/candy/candy-yellow",candy:"prefabs-entities/finalcandy/Candy",candybox:"prefabs-entities/candybox/candybox",candywrapper:"prefabs-entities/candywrapper/candy-wrapper","caramel-blue":"prefabs-entities/caramel/blue","caramel-brown":"prefabs-entities/caramel/brown","caramel-green":"prefabs-entities/caramel/green","caramel-orange":"prefabs-entities/caramel/orange","caramel-pink":"prefabs-entities/caramel/pink","caramel-purple":"prefabs-entities/caramel/purple","caramel-violet":"prefabs-entities/caramel/violet","caramel-white":"prefabs-entities/caramel/white","caramel-yellow":"prefabs-entities/caramel/yellow",cheese:"prefabs-entities/cheese/cheese",chocolatePot:"prefabs-entities/chocolatepot/ChocolatePot","color-flower":"prefabs-entities/color-flower/color-flower","cookie-1":"prefabs-entities/cookie/cookie-1","cookie-2":"prefabs-entities/cookie/cookie-2","cookie-3":"prefabs-entities/cookie/cookie-3",cotton:"prefabs-entities/cotton/cotton",cracker:"prefabs-entities/cracker/cracker","croissant-blue":"prefabs-entities/croissant/croissant-blue","croissant-brown":"prefabs-entities/croissant/croissant-brown","croissant-green":"prefabs-entities/croissant/croissant-green","croissant-orange":"prefabs-entities/croissant/croissant-orange","croissant-pink":"prefabs-entities/croissant/croissant-pink","croissant-purple":"prefabs-entities/croissant/croissant-purple","croissant-violet":"prefabs-entities/croissant/croissant-violet","croissant-white":"prefabs-entities/croissant/croissant-white","croissant-yellow":"prefabs-entities/croissant/croissant-yellow",cup:"prefabs-entities/cup/tile-cup","cupcake-bottom":"prefabs-entities/cupcake/bottom",cupcake:"prefabs-entities/cupcake/cupcake",coffeebean:"prefabs-entities/coffeebean/tile-coffeebean","fish-green":"prefabs-entities/fish/fish-green","fish-orange":"prefabs-entities/fish/fish-orange","fish-pink":"prefabs-entities/fish/fish-pink","fish-violet":"prefabs-entities/fish/fish-violet","fish-white":"prefabs-entities/fish/fish-white",gum:"prefabs-entities/gum/gum",hamster:"prefabs-entities/hamster/hamster",heart:"prefabs-entities/heart/heart",honeycomb:"prefabs-entities/honeycomb/honeycomb","jarjam-green":"prefabs-entities/jarjam/green","jarjam-orange":"prefabs-entities/jarjam/orange","jarjam-pink":"prefabs-entities/jarjam/pink","jarjam-violet":"prefabs-entities/jarjam/violet","jarjam-white":"prefabs-entities/jarjam/white",jelly:"prefabs-entities/jelly/Jelly","jellybear-green":"prefabs-entities/jellybear/green","jellybear-orange":"prefabs-entities/jellybear/orange","jellybear-pink":"prefabs-entities/jellybear/pink","jellybear-violet":"prefabs-entities/jellybear/violet","jellybear-white":"prefabs-entities/jellybear/white","kitchen-timer":"prefabs-entities/kitchen-timer/kitchen-timer","ladybug-house":"prefabs-entities/ladybug/ladybug-house",ladybug:"prefabs-entities/ladybug/ladybug","lemon-blue":"prefabs-entities/lemon/blue","lemon-purple":"prefabs-entities/lemon/purple","lemon-yellow":"prefabs-entities/lemon/yellow",lollipop:"prefabs-entities/lollipop/lollipop",machinegum:"prefabs-entities/machinegum/machinegum",mixer:"prefabs-entities/mixer/mixer",nut:"prefabs-entities/nut/nut","pacman-finish":"prefabs-entities/pacman/pacman-finish","pacman-track":"prefabs-entities/pacman/pacman-track","pacman-start":"prefabs-entities/pacman/pacman-start",pacman:"prefabs-entities/pacman/pacman","parrot-green":"prefabs-entities/parrot/parrot-green","parrot-orange":"prefabs-entities/parrot/parrot-orange","parrot-pink":"prefabs-entities/parrot/parrot-pink","parrot-violet":"prefabs-entities/parrot/parrot-violet","parrot-white":"prefabs-entities/parrot/parrot-white",peacock:"prefabs-entities/peacock/peacock","pink-jelly":"prefabs-entities/pink-jelly/pink-jelly","popcorn-green":"prefabs-entities/popcorn/popcorn-green","popcorn-orange":"prefabs-entities/popcorn/popcorn-orange","popcorn-pink":"prefabs-entities/popcorn/popcorn-pink","popcorn-violet":"prefabs-entities/popcorn/popcorn-violet","popcorn-white":"prefabs-entities/popcorn/popcorn-white",popcornExplodingPart:"prefabs-entities/popcorn/popcornExplodingPart",popcornPart:"prefabs-entities/popcorn/popcornPart",rabbit:"prefabs-entities/rabbit/rabbit",snail:"prefabs-entities/snail/snail","snowman-bottom":"prefabs-entities/snowman/bottom","snowman-center":"prefabs-entities/snowman/center","snowman-head":"prefabs-entities/snowman/head",strawberry:"prefabs-entities/strawberry/strawberry","super-1":"prefabs-entities/super-1/super-1","sweet-tooth":"prefabs-entities/sweet-tooth/sweet-tooth","task-bday-cake":"prefabs-entities/bday-cake/task-bday-cake","task-bee":"prefabs-entities/bee/task-bee","task-blocker-1":"prefabs-entities/ribbon/task-ribbon","task-boss-angrybubble":"prefabs-entities/angrybubble/task-angrybubble","task-boss-chameleon":"prefabs-entities/chameleon/task-chameleon","task-boss-fox":"prefabs-entities/fox/task-fox","task-boss-kitty":"prefabs-entities/kitty/task-kitty","task-boss-mousy":"prefabs-entities/mousy/task-mousy","task-boss-owl":"prefabs-entities/owl/task-owl","task-boss-panda":"prefabs-entities/panda/task-panda","task-boss-penguin":"prefabs-entities/penguin/task-penguin","task-boss-piggy":"prefabs-entities/piggy/task-piggy","task-boss-pinata":"prefabs-entities/pinata/task-pinata","task-boss-raccoon":"prefabs-entities/raccoon/task-raccoon","task-boss-nutcracker":"prefabs-entities/nutcracker/task-nutcracker","task-butterfly":"prefabs-entities/butterfly/task-butterfly","task-cake-mini":"prefabs-entities/cake-mini/task-cake-mini","task-cheese":"prefabs-entities/cheese/task-cheese","task-color-flower":"prefabs-entities/color-flower/task-color-flower","task-cookie-1":"prefabs-entities/cookie/task-cookie","task-cookie-2":"prefabs-entities/cookie/task-cookie","task-cookie-3":"prefabs-entities/cookie/task-cookie","task-cookie":"prefabs-entities/cookie/task-cookie","task-cracker":"prefabs-entities/cracker/task-cracker","task-croissant":"prefabs-entities/croissant/task-croissant","task-cup":"prefabs-entities/cup/task-cup","task-cupcake":"prefabs-entities/cupcake/task-cupcake","task-entity-1":"prefabs-entities/base/task-violet","task-coffeebean":"prefabs-entities/coffeebean/task-coffeebean","task-entity-2":"prefabs-entities/base/task-green","task-entity-3":"prefabs-entities/base/task-pink","task-entity-4":"prefabs-entities/base/task-orange","task-entity-5":"prefabs-entities/base/task-white","task-entity-6":"prefabs-entities/base/task-blue","task-entity-7":"prefabs-entities/base/task-brown","task-entity-8":"prefabs-entities/base/task-purple","task-entity-9":"prefabs-entities/base/task-yellow","task-fish":"prefabs-entities/fish/task-fish","task-gum":"prefabs-entities/gum/task-gum","task-heart":"prefabs-entities/heart/task-heart","task-honeycomb":"prefabs-entities/honeycomb/task-honeycomb","task-jellybear":"prefabs-entities/jellybear/task-jellybear","task-ladybug":"prefabs-entities/ladybug/task-ladybug","task-lollipop":"prefabs-entities/lollipop/task-lollipop","task-nut":"prefabs-entities/nut/task-nut","task-pacman":"prefabs-entities/pacman/task-pacman","task-parrot":"prefabs-entities/parrot/task-parrot","task-popcorn":"prefabs-entities/popcorn/task-popcorn","task-rabbit":"prefabs-entities/rabbit/task-rabbit","task-snail":"prefabs-entities/snail/task-snail","task-snowman":"prefabs-entities/snowman/task-snowman","task-strawberry":"prefabs-entities/strawberry/task-strawberry","task-super-1":"prefabs-entities/super-1/task-super-1",wall:"prefabs-entities/wall/wall","white-chocolate":"prefabs-entities/white-chocolate/white-chocolate",catinbox:"prefabs-entities/catinbox/catinbox","task-catinbox":"prefabs-entities/catinbox/task-catinbox"},o.EntitySkinConfig.default.entities);n.PrefabResourcesConfig=a,cc._RF.pop()},{"./EntitySkinConfig (scripts.config)":"EntitySkinConfig (scripts.config)"}],"PrefabThemeComponent (@tapclap.game-kit.ui.themes)":[function(e,t,n){"use strict";cc._RF.push(t,"aa53emwkgVYg6SfnvaZQtKa","PrefabThemeComponent (@tapclap.game-kit.ui.themes)"),n.__esModule=!0,n.PrefabThemeComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./ThemeComponent (@tapclap.game-kit.ui.themes)");function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.property,x=w.menu,A=(o=S("PrefabThemeItem"),a=E(),r=E({type:cc.Prefab}),o((s=C((c=function(){b(this,"key",s,this),b(this,"prefab",p,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=C(c.prototype,"prefab",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i),O=(l=x("UI/Themes/PrefabThemeComponent"),m=E({type:cc.Prefab,visible:!0}),u=E({type:[A],visible:!0}),S(d=l((y=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_default",f,v(t)),b(t,"_themes",h,v(t)),t._activeThemeKey=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var a=o.prototype;return a.updatePrefab=function(){!this._activeThemeKey&&this._default&&this._setPrefab(this._default)},a.setTheme=function(e){var t=e?this._getPrefabByThemeKey(e):this._default;return!!t&&(this._setPrefab(t),this._activeThemeKey=e,!0)},a._getPrefabByThemeKey=function(e){var t=this._themes.find(function(t){var n=t.key;return e===n});return t.prefab?t.prefab:null},a._setPrefab=function(e){this.node.removeAllChildren(),this.node.addChild(cc.instantiate(e))},o}(g.ThemeComponent),f=C(y.prototype,"_default",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C(y.prototype,"_themes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=y))||d)||d);n.PrefabThemeComponent=O,cc._RF.pop()},{"./ThemeComponent (@tapclap.game-kit.ui.themes)":"ThemeComponent (@tapclap.game-kit.ui.themes)"}],"PreloadComponent (@tapclap.game-kit.scene-manager.components)":[function(e,t,n){"use strict";var o,a,r,i;function c(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c26a0g7GcFOjpm3tlfREpUS","PreloadComponent (@tapclap.game-kit.scene-manager.components)"),n.__esModule=!0,n.PreloadComponent=void 0;var m,u,d,y,f=cc._decorator,h=f.ccclass,g=(o=(0,f.property)(cc.ProgressBar),h((r=function(e){var t,n,o,a;function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return c(t=e.call.apply(e,[this].concat(o))||this,"progressBar",i,p(t)),t._progress=0,t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),r.prototype._update=function(){this.progressBar.progress=Math.max(this.progressBar.progress,this._progress)},o=r,(a=[{key:"progress",get:function(){return this._progress},set:function(e){this._progress=e,this._update()}}])&&s(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),r}(cc.Component),m=r.prototype,u=[o],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"progressBar",e)||e},y)).initializer&&(Object.defineProperty(m,"progressBar",y),y=null),i=y,a=r))||a);n.PreloadComponent=g,cc._RF.pop()},{}],"PreloadWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"8d92f2w7xdZHLxSwdGdkdqe","PreloadWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreloadWindowAction=void 0;var r=e("./Action (@tapclap.game-kit.action-manager)"),i=e("./WindowLazyLoaderSpinerComponent (scripts.windows.loader)"),c=function(e){function t(t){var n=t.windowKeys,o=t.windowLazyLoader,a=t.backdropManager,r=t.windowManager,i=t.loaderShowDelay,c=t.minLoadTime,s=t.prefab,p=e.call(this)||this;return p._windowKeys=n,p._windowLazyLoader=o,p._backdropManager=a,p._windowManager=r,p._loaderShowDelay=null!=i?i:.5,p._minLoadTime=null!=c?c:1,p._prefab=s,p}return a(t,e),t.prototype.run=function(){var e=this;return new Promise(function(t){for(var n=[],o=0;o<e._windowKeys.length;o++){var a=e._windowKeys[o];e._windowLazyLoader.isLoaded(a)||n.push(e._windowLazyLoader.load(a))}if(0===n.length)return t();e._backdropManager.enable();var r=null,c=e._windowManager.getController(),s=function(){r=cc.instantiateFrom(e._prefab);var t=e._windowManager.getController().node;r.setParent(t),e._backdropManager.restoreHighlight(),e._backdropManager.show(),e._backdropManager.highlight(r),r.getComponent(i.WindowLazyLoaderSpinerComponent).startSpinner()};c.scheduleOnce(s,e._loaderShowDelay);var p=Date.now();Promise.all(n).then(function(){if(c.unschedule(s),e._backdropManager.disable(),r){var n=Date.now()-p,o=n<e._minLoadTime?e._minLoadTime-n:0;c.scheduleOnce(function(){e._backdropManager.hide(),r.destroy(),t()},o)}else t()})})},t}(r.Action);n.PreloadWindowAction=c,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./WindowLazyLoaderSpinerComponent (scripts.windows.loader)":"WindowLazyLoaderSpinerComponent (scripts.windows.loader)"}],"PrepareGoalSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"afe48SOJRde251MPPW0BIpn","PrepareGoalSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.PrepareGoalSystem=void 0;var o=e("./GoalComponent (@tapclap.match-x.engine.components)"),a=e("./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t,n){var o;return(o=e.call(this)||this)._world=t,o._goalFactory=n,o}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var c=i.prototype;return c.process=function(){return this.prepare(),!1},c._processEntityAsCollector=function(){for(var e=this._world.getEnabledComponent("tiles").grid,t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++)for(var o,a=r(e.getCell(t,n).getEntitiesByComponentName("goalCollector"));!(o=a()).done;){var i=o.value,c=i.getEnabledComponent("goalCollector");if(c&&!c.isInited)for(var s,p=r(c.data.goals);!(s=p()).done;){var l=s.value,m=this._goalFactory.create(l.type,l.options);m.collector=i,e.getEnabledComponent("goals").addGoal(m,i),c.addGoal(m)}}},c._processEntityAsGoal=function(){for(var e=this,t=this._getGoals(),n=this._world.getEnabledComponent("tiles").grid,a=0;a<n.rows;a++)for(var r=0;r<n.cols;r++){var i=n.getCell(a,r);i&&i.entities.forEach(function(n){var a=n.getEnabledComponentByClass(o.GoalComponent);a?t.includes(a.goal)||n.removeComponentByClass(o.GoalComponent):e._setGoalComponent(t,n)})}},c._setGoalComponent=function(e,t){for(var n,o=r(e);!(n=o()).done;){var c=n.value;!c.isGoal(t)||c.isCompleted&&c.collector.getComponent("goalCollector")&&!t.getEnabledComponentByClass(a.KeepGoalAfterCompleteComponent)||(this._addGoalComponentToEntity(t,c),this._world.pushState(i.UPDATE_STATE,t))}},c._addGoalComponentToEntity=function(e,t){e.addComponent(o.GoalComponent.KEY,new o.GoalComponent({goal:t}))},c._getGoals=function(){for(var e=[],t=0,n=[this._world.getEnabledComponent("goals"),this._world.getEnabledComponent("tiles").grid.getEnabledComponent("goals")];t<n.length;t++){var o=n[t];o&&(e=e.concat(o.goals))}return e},c.prepare=function(){this._processEntityAsCollector(),this._processEntityAsGoal()},i}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.PrepareGoalSystem=p,p.KEY="prepareGoal",p.UPDATE_STATE="goal",cc._RF.pop()},{"./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)":"KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)":[function(e,t,n){"use strict";cc._RF.push(t,"9f6acrnSxFT/IPxRvU/G7BI","PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.PreserveSceneRatioComponent=void 0;var i=e("./ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.menu,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetNode=null,t._fitNode=null,t._measureNode=null,t._fitWidth=!1,t._fitHeight=!1,t._marginTop=0,t._marginRight=0,t._marginBottom=0,t._marginLeft=0,t._scaleToNodeForReset=[],t._detectAspectRatio=16/9,t}return a(t,e),t.prototype.onLoad=function(){this._targetNode||(this._targetNode=this.node.parent)},t.prototype.fit=function(){var e=cc.view.getFrameSize();if(e.width/e.height>this._detectAspectRatio){this._fitNode.setScale(1),this._scaleToNodeForReset.forEach(function(e){e.node.setScale(1),e.enabled=!1});var t=this._targetNode.getComponent(cc.Widget),n=this._targetNode.getComponent(cc.Layout);if((null==t?void 0:t.enabled)&&t.updateAlignment(),(null==n?void 0:n.enabled)&&n.updateLayout(),this._targetNode&&this._measureNode){var o=this._targetNode.getContentSize(),a=this._measureNode.getContentSize(),r={width:o.width/(a.width+this._marginLeft+this._marginRight),height:o.height/(a.height+this._marginTop+this._marginBottom)},i=1;this._fitWidth&&(i=r.width),this._fitHeight&&(i=r.height),this._fitWidth&&this._fitHeight&&(i=Math.min(r.width,r.height)),this._fitNode.setScale(i)}}else this._fitNode.setScale(1),this._scaleToNodeForReset.forEach(function(e){e.enabled=!0});return!0},t.prototype.lateUpdate=function(){this.fit()},r([p({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430 \u0432 \u0440\u0430\u043c\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043d\u0443\u0436\u043d\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})],t.prototype,"_targetNode",void 0),r([p({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0443\u0436\u043d\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c"})],t.prototype,"_fitNode",void 0),r([p({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u0437\u043c\u0435\u0440\u044f\u0442\u044c \u0434\u043b\u044f \u0432\u043f\u0438\u0441\u044b\u0432\u0430\u043d\u0438\u044f"})],t.prototype,"_measureNode",void 0),r([p({visible:!0,tooltip:"\u0412\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u043f\u043e \u0448\u0438\u0440\u0438\u043d\u0435"})],t.prototype,"_fitWidth",void 0),r([p({visible:!0,tooltip:"\u0412\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c \u043f\u043e \u0432\u044b\u0441\u043e\u0442\u0435"})],t.prototype,"_fitHeight",void 0),r([p({visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_marginTop",void 0),r([p({visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_marginRight",void 0),r([p({visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_marginBottom",void 0),r([p({visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_marginLeft",void 0),r([p({type:i.ScaleNodeToTarget,visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_scaleToNodeForReset",void 0),r([p({visible:!0,tooltip:"\u041e\u0442\u0441\u0442\u0443\u043f\u044b"})],t.prototype,"_detectAspectRatio",void 0),r([s,l("Game-Kit/Canvas/PreserveSceneRatioComponent")],t)}(cc.Component);n.PreserveSceneRatioComponent=m,cc._RF.pop()},{"./ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)":"ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)"}],"PreventBoosterApplyComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"73e70RtfHxTmrO1Ino1O+/h","PreventBoosterApplyComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventBoosterApplyComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventBoosterApplyComponent",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PreventBoosterApplyComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)":[function(e,t,n){"use strict";cc._RF.push(t,"974cbBjhYRbm7RhBKbuVDsR","PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventBoosterApplyWithEmptyGroupComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventBoosterApplyWithEmptyGroup",t}(e("./PreventBoosterApplyComponent (@tapclap.match-x.engine.components)").PreventBoosterApplyComponent);n.PreventBoosterApplyWithEmptyGroupComponent=r,cc._RF.pop()},{"./PreventBoosterApplyComponent (@tapclap.match-x.engine.components)":"PreventBoosterApplyComponent (@tapclap.match-x.engine.components)"}],"PreventCoverComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"340cekqZAVSeKyylBFM6biG","PreventCoverComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventCoverComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventCover",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PreventCoverComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ae946yHf1hacYVURSRc5DPz","PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventExplodeOnSwapComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventExplodeOnSwap",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PreventExplodeOnSwapComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PreventWalkExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"04019KlYchfVKIOlf5Cn7dv","PreventWalkExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventWalkExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventWalkExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PreventWalkExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PreventWalkPathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"de6e5wYQ+5SULVU/IAaVhxJ","PreventWalkPathComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PreventWalkPathComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="preventWalkPath",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.PreventWalkPathComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"98bf5gQPx5Aob2Law3xTot4","PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)"),n.__esModule=!0,n.PriceProgressionOfferState=void 0;var a=function(e){var t,n;function a(t){var n,o=t.progression;return(n=e.call(this)||this)._progression=o,n._defaultPrice=void 0,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getProduct=function(e){return e.payload.product},r.update=function(e){var t=this._getProduct(e);t&&(void 0===this._defaultPrice&&(this._defaultPrice=t.price),t.price+=this._progression)},r.reset=function(e){var t=this._getProduct(e);t&&void 0!==this._defaultPrice&&(t.price=this._defaultPrice)},a}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.PriceProgressionOfferState=a,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"ProbabilityFilter (@tapclap.match-x.engine.helpers)":[function(e,t,n){"use strict";cc._RF.push(t,"ba89cwH7HRbN65PNZHPBMOn","ProbabilityFilter (@tapclap.match-x.engine.helpers)"),n.__esModule=!0,n.ProbabilityFilter=void 0;var o=function(){function e(){}return e.prototype.filter=function(e,t){throw void 0===t&&(t=null),new Error("Method not overrided")},e}();n.ProbabilityFilter=o,cc._RF.pop()},{}],"Product (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";cc._RF.push(t,"ebbd5MmQ3ZViqgZbYEOPEwn","Product (@tapclap.sdk-x.payment-service)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Product=void 0;var o=function(){function e(e){var t;e=Object.assign({hasPriceWithCurrency:!1,prices:{},priceAmounts:{},title:"",description:"",payload:{}},e),this._id=e.id,this._key=e.key,this._type=e.type,this._title=e.title,this._description=e.description,this._currencyType=e.currencyType,this._currency=e.currency,this._hasPriceWithCurrency=e.hasPriceWithCurrency,this._prices=e.prices,this._priceAmounts=e.priceAmounts,this._payload=e.payload,this._isAvailable=!1,this._mergeContent=null!==(t=e.mergeContent)&&void 0!==t&&t,this._priceFormatter=e.priceFormatter}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAvailable",{get:function(){return this._isAvailable},set:function(e){this._isAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._priceFormatter?this._priceFormatter.getPrice({currency:this._currency,amount:this.priceAmount}):this._prices[this._currency]},set:function(e){this._prices[this._currency]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"priceAmount",{get:function(){return this._priceAmounts[this._currency]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currencyType",{get:function(){return this._currencyType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPriceWithCurrency",{get:function(){return this._hasPriceWithCurrency},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currency",{get:function(){return this._currency},enumerable:!1,configurable:!0}),e.prototype.merge=function(e){var t,n;this._currency=e._currency,this._prices=Object.assign(this._prices,e._prices),this._priceAmounts=Object.assign(this._priceAmounts,e._priceAmounts),this._hasPriceWithCurrency=e._hasPriceWithCurrency,this._mergeContent&&(this._title=null!==(t=e.title)&&void 0!==t?t:this._title,this._description=null!==(n=e.description)&&void 0!==n?n:this._description)},e.prototype.serialize=function(){return{id:this.id,key:this.key,type:this.type,currencyType:this.currencyType,currency:this.currency,price:this.price,priceAmount:this.priceAmount}},e.prototype.clone=function(t){var n,o,a,r,i,c,s,p,l,m,u;return void 0===t&&(t={}),new e({id:null!==(n=t.id)&&void 0!==n?n:this._id,title:null!==(o=t.title)&&void 0!==o?o:this._title,currencyType:null!==(a=t.currencyType)&&void 0!==a?a:this._currencyType,description:null!==(r=t.description)&&void 0!==r?r:this._description,currency:null!==(i=t.currency)&&void 0!==i?i:this._currency,key:null!==(c=t.key)&&void 0!==c?c:this._key,type:null!==(s=t.type)&&void 0!==s?s:this._type,prices:null!==(p=t.prices)&&void 0!==p?p:this._prices,priceAmounts:null!==(l=t.priceAmounts)&&void 0!==l?l:this._priceAmounts,hasPriceWithCurrency:null!==(m=t.hasPriceWithCurrency)&&void 0!==m?m:this._hasPriceWithCurrency,payload:null!==(u=t.payload)&&void 0!==u?u:this._payload,mergeContent:t.mergeContent,priceFormatter:t.priceFormatter})},e}();n.Product=o,cc._RF.pop()},{}],"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"853ecyjBvFHUJ9igwpvmC+V","ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.ProductItemComponent=void 0;var o,a,r,i,c=e("./CurrencyFormatter (@tapclap.game-kit.ui.formatters)"),s=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),p=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d,y,f,h,g=cc._decorator,v=g.ccclass,_=(o=(0,g.property)({visible:!0,tooltip:"\u0415\u0441\u043b\u0438 true, \u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043c\u0435\u0442\u043a\u0430 \u0444\u043e\u0440\u043c\u0430\u0442\u0430\n        'currency.USD' \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0442\u0438\u043f\u0430 '{{price}}$'\n        \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0446\u0435\u043d\u044b \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"}),v((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_priceLocalization",i,m(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),o.prototype.setProduct=function(e){var t=this;if(this._button){if(this._button.icon=e.currency,this._button.label=e.price,this._button.isIconActive||e.hasPriceWithCurrency||(this._button.label=c.CurrencyFormatter.format(e.price,e.currency)),this._priceLocalization&&"number"==typeof e.price){var n=this._button.getI18NLabel();n&&n.setString("currency."+e.currency,{price:e.price})}this._button.events.on(p.ButtonControlComponent.EVENT_CLICK,function(){t._windowLayout.window.events.emit(o.EVENT_SELECT_PRODUCT,e,t)})}},o}(s.ShopItemComponent),d=r.prototype,y=[o],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),void 0===(h=y.slice().reverse().reduce(function(e,t){return t(d,"_priceLocalization",e)||e},h)).initializer&&(Object.defineProperty(d,"_priceLocalization",h),h=null),i=h,a=r))||a);n.ProductItemComponent=_,_.EVENT_SELECT_PRODUCT="selectProduct",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./CurrencyFormatter (@tapclap.game-kit.ui.formatters)":"CurrencyFormatter (@tapclap.game-kit.ui.formatters)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)":[function(e,t,n){"use strict";cc._RF.push(t,"deec3NPNStJHr+bZ7cluTNU","ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)"),n.__esModule=!0,n.ProductItemTimeWidgetComponent=void 0;var o,a,r,i,c,s,p=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var y=cc._decorator,f=y.ccclass,h=y.property,g=(o=h({visible:!0}),a=h({type:cc.Node,visible:!0}),f((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_string",c,m(t)),l(t,"_node",s,m(t)),t._offerTimer=null,t._scheduleCallback=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var a=o.prototype;return a.onLoad=function(){var e=this;this._scheduleCallback=function(){if(cc.isValid(e._node)){if(e._offerTimer&&e._offerTimer.getFinishDate()){var t=e._node.getComponent(p.I18NLabel);if(t){var n=(e._offerTimer.getFinishDate()-cc.sys.now())/1e3;n>0?(t.node.active=!0,t.setString(e._string,{value:n})):t.node.active=!1}}}else e.unschedule(e._scheduleCallback)},this._scheduleCallback(),this.schedule(this._scheduleCallback,1,cc.macro.REPEAT_FOREVER)},a.setTimer=function(e){this._offerTimer=e},o}(cc.Component),c=d(i.prototype,"_string",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=d(i.prototype,"_node",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r=i))||r);n.ProductItemTimeWidgetComponent=g,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"ProductsConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"b8dfatpy3RT9oW96LRxfwcE","ProductsConfig (scripts.config)"),n.__esModule=!0,n.RawProducts=n.Products=void 0;var o=e("./Product (@tapclap.sdk-x.payment-service)"),a=[{id:"moves",key:"moves",type:"moves",title:"moves.title",description:"moves.description",currencyType:"game",currency:"coins",prices:{coins:300},payload:{items:[{spec:"match3",name:"moves",amount:5}]}},{id:"bombMoves",key:"bombMoves",type:"bombMoves",title:"bombMoves.title",description:"bombMoves.description",currencyType:"game",currency:"coins",prices:{coins:300},payload:{items:[{spec:"match3",name:"bombMoves",amount:5}]}},{id:"parrotFailWalk",key:"parrotFailWalk",type:"parrotFailWalk",title:"parrotFailWalk.title",description:"parrotFailWalk.description",currencyType:"game",currency:"coins",prices:{coins:300},payload:{items:[{spec:"match3",name:"parrotFailWalk",amount:1}]}},{id:"trowel",key:"trowel",type:"booster",title:"booster.trowel.title",description:"booster.trowel.description",currencyType:"game",currency:"coins",prices:{coins:300},payload:{items:[{spec:"booster",name:"trowel",amount:1}]}},{id:"cat",key:"cat",type:"booster",title:"booster.cat.title",description:"booster.cat.description",currencyType:"game",currency:"coins",prices:{coins:600},payload:{items:[{spec:"booster",name:"cat",amount:1}]}},{id:"cart",key:"cart",type:"booster",title:"booster.cart.title",description:"booster.cart.description",currencyType:"game",currency:"coins",prices:{coins:500},payload:{items:[{spec:"booster",name:"cart",amount:1}]}},{id:"plusone",key:"plusone",type:"booster",title:"booster.plusone.title",description:"booster.plusone.description",currencyType:"game",currency:"coins",prices:{coins:400},payload:{items:[{spec:"booster",name:"plusone",amount:1}]}},{id:"1",key:"coins300",type:"coins",title:"coins300.title",description:"coins300.description",currencyType:"money",currency:"RUB",prices:{RUB:39,USD:1,JPY:300,VK:6},payload:{items:[{spec:"currency",name:"coins",amount:300}]}},{id:"2",key:"coins1500",type:"coins",title:"coins1500.title",description:"coins1500.description",currencyType:"money",currency:"RUB",prices:{RUB:179,USD:4.5,JPY:1400,VK:26},payload:{offerType:"hit",items:[{spec:"currency",name:"coins",amount:1500}]}},{id:"3",key:"coins3000",type:"coins",title:"coins3000.title",description:"coins3000.description",currencyType:"money",currency:"RUB",prices:{RUB:339,USD:8.5,JPY:2600,VK:48},payload:{items:[{spec:"currency",name:"coins",amount:3e3}]}},{id:"4",key:"coins8000",type:"coins",title:"coins8000.title",description:"coins8000.description",currencyType:"money",currency:"RUB",prices:{RUB:779,USD:19,JPY:6400,VK:114},payload:{items:[{spec:"currency",name:"coins",amount:8e3}]}},{id:"5",key:"coins300to5Lives",type:"lives",title:"coins300to5Lives.title",description:"coins300to5Lives.description",currencyType:"game",currency:"coins",prices:{coins:300},payload:{items:[{spec:"attempts",name:"lives",amount:5}]}},{id:"14",key:"unlimitedLives",type:"lives",title:"unlimitedLives.title",description:"unlimitedLives.description",currencyType:"money",currency:"RUB",prices:{RUB:99,USD:2,JPY:1e3,VK:13},payload:{items:[{spec:"attempts",name:"unlimited",duration:"P3D"}]}},{id:"600",key:"noviceSetVK",type:"booster",title:"shopItem.noviceSet.title",description:"noviceSet.description",currencyType:"money",currency:"RUB",prices:{RUB:252,USD:5.99,JPY:900,VK:36},payload:{extra:[{spec:"products",name:"noviceSet"}],items:[{spec:"currency",name:"coins",amount:1500},{spec:"booster",name:"cart",amount:3},{spec:"attempts",name:"unlimited",duration:"P3D"},{spec:"booster",name:"cat",amount:3},{spec:"booster",name:"trowel",amount:3}]}},{id:"68",key:"noviceSet1",type:"booster",title:"shopItem.noviceSet.title",description:"noviceSet.description",currencyType:"money",currency:"RUB",prices:{RUB:252,USD:5.99,JPY:900,VK:10},payload:{extra:[{spec:"products",name:"noviceSet"}],items:[{spec:"currency",name:"coins",amount:1500},{spec:"booster",name:"cart",amount:3},{spec:"attempts",name:"unlimited",duration:"P3D"},{spec:"booster",name:"cat",amount:3},{spec:"booster",name:"trowel",amount:3}]}},{id:"680",key:"noviceSet1",type:"booster",title:"shopItem.noviceSet.title",description:"noviceSet.description",currencyType:"money",currency:"RUB",prices:{RUB:79,USD:1.99,JPY:600,VK:10},payload:{extra:[{spec:"products",name:"noviceSet"}],items:[{spec:"currency",name:"coins",amount:1500},{spec:"booster",name:"cart",amount:3},{spec:"attempts",name:"unlimited",duration:"P3D"},{spec:"booster",name:"cat",amount:3},{spec:"booster",name:"trowel",amount:3}]}},{id:"9001",key:"trowelCartSet",type:"trowelCartSet",title:"shopItem.trowelCartSet.title",description:"shopItem.trowelCartSet.description",currencyType:"game",currency:"coins",prices:{coins:3600},payload:{items:[{spec:"booster",name:"cart",amount:5},{spec:"booster",name:"trowel",amount:5}]}},{id:"9002",key:"trowelSet",type:"trowelSet",title:"shopItem.trowelSet.title",description:"shopItem.trowelSet.description",currencyType:"game",currency:"coins",prices:{coins:1250},payload:{items:[{spec:"booster",name:"trowel",amount:5}]}},{id:"9003",key:"multiplierSet",type:"multiplierSet",title:"shopItem.multiplierSet.title",description:"shopItem.trowelCartSet.description",currencyType:"game",currency:"coins",prices:{coins:1800},payload:{items:[{spec:"booster",name:"plusone",amount:5}]}},{id:"9004",key:"cartSet",type:"cartSet",title:"shopItem.cartSet.title",description:"shopItem.cartSet.description",currencyType:"game",currency:"coins",prices:{coins:2250},payload:{items:[{spec:"booster",name:"cart",amount:5}]}},{id:"9005",key:"catSet",type:"catSet",title:"shopItem.catSet.title",description:"shopItem.catSet.description",currencyType:"game",currency:"coins",prices:{coins:2700},payload:{items:[{spec:"booster",name:"cat",amount:5}]}},{id:"9006",key:"explorerSet",type:"explorerSet",title:"shopItem.explorerSet.title",description:"shopItem.explorerSet.description",currencyType:"game",currency:"coins",prices:{coins:4300},payload:{items:[{spec:"booster",name:"cat",amount:6},{spec:"booster",name:"trowel",amount:6}]}},{id:"9007",key:"invincibleSet",type:"invincibleSet",title:"shopItem.invincibleSet.title",description:"shopItem.invincibleSet.description",currencyType:"game",currency:"coins",prices:{coins:5300},payload:{items:[{spec:"booster",name:"cat",amount:7},{spec:"booster",name:"cart",amount:7}]}},{id:"40",key:"superTile",type:"superTile",title:"startBoosters.superTile.title",description:"startBoosters.superTile.description",currencyType:"game",currency:"coins",prices:{coins:300,USD:1},payload:{items:[{spec:"startbooster",name:"superTile",amount:3}]}},{id:"41",key:"candybomb",type:"candybomb",title:"startBoosters.candybomb.title",description:"startBoosters.candybomb.description",currencyType:"game",currency:"coins",prices:{coins:300,USD:1},payload:{items:[{spec:"startbooster",name:"candybomb",amount:3}]}},{id:"42",key:"addmoves",type:"addmoves",title:"startBoosters.addmoves.title",description:"startBoosters.addmoves.description",currencyType:"game",currency:"coins",prices:{coins:300,USD:.5},payload:{items:[{spec:"startbooster",name:"addmoves",amount:3}]}},{id:"79",key:"coins300andGift",type:"coinsSale",title:"coins300andGift.title",description:"coins300andGift.description",currencyType:"money",currency:"RUB",prices:{RUB:39,USD:1,JPY:300,VK:6},payload:{items:[{spec:"currency",name:"coins",amount:450}]}},{id:"80",key:"coins1500andGift",type:"coinsSale",title:"coins1500andGift.title",description:"coins1500andGift.description",currencyType:"money",currency:"RUB",prices:{RUB:179,USD:4.5,JPY:1400,VK:26},payload:{items:[{spec:"currency",name:"coins",amount:2250}]}},{id:"81",key:"coins3000andGift",type:"coinsSale",title:"coins3000andGift.title",description:"coins3000andGift.description",currencyType:"money",currency:"RUB",prices:{RUB:339,USD:8.5,JPY:2600,VK:48},payload:{items:[{spec:"currency",name:"coins",amount:4500}]}},{id:"82",key:"coins8000andGift",type:"coinsSale",title:"coins8000andGift.title",description:"coins8000andGift.description",currencyType:"money",currency:"RUB",prices:{RUB:779,USD:19,JPY:6400,VK:114},payload:{items:[{spec:"currency",name:"coins",amount:12e3}]}},{id:"60",key:"coins300andUnlimitedLives",type:"coinsSaleAddUnlimited",title:"coins300andUnlimitedLives.title",description:"coins300andUnlimitedLives.description",currencyType:"money",currency:"RUB",prices:{RUB:39,USD:1,JPY:300,VK:6},payload:{items:[{spec:"attempts",name:"unlimited",duration:"PT1H"},{spec:"currency",name:"coins",amount:300}]}},{id:"61",key:"coins1500andUnlimitedLives",type:"coinsSaleAddUnlimited",title:"coins1500andUnlimitedLives.title",description:"coins1500andUnlimitedLives.description",currencyType:"money",currency:"RUB",prices:{RUB:179,USD:4.5,JPY:1400,VK:26},payload:{items:[{spec:"attempts",name:"unlimited",duration:"P1D"},{spec:"currency",name:"coins",amount:1500}]}},{id:"62",key:"coins3000andUnlimitedLives",type:"coinsSaleAddUnlimited",title:"coins3000andUnlimitedLives.title",description:"coins3000andUnlimitedLives.description",currencyType:"money",currency:"RUB",prices:{RUB:339,USD:8.5,JPY:2600,VK:48},payload:{items:[{spec:"attempts",name:"unlimited",duration:"P2D"},{spec:"currency",name:"coins",amount:3e3}]}},{id:"63",key:"coins8000andUnlimitedLives",type:"coinsSaleAddUnlimited",title:"coins8000andUnlimitedLives.title",description:"coins8000andUnlimitedLives.description",currencyType:"money",currency:"RUB",prices:{RUB:779,USD:19,JPY:6400,VK:114},payload:{items:[{spec:"attempts",name:"unlimited",duration:"P3D"},{spec:"currency",name:"coins",amount:8e3}]}},{id:"86",key:"breakPiggybank",type:"coins",title:"breakPiggybank.title",description:"breakPiggybank.description",currencyType:"money",currency:"RUB",prices:{RUB:79,USD:1.99,JPY:600,VK:11},payload:{extra:[{spec:"products",name:"piggybank"}]}},{id:"100",key:"coins300BoosterPack",type:"booster",title:"shopItem.coins300BoosterPack.title",description:"shopItem.coins300BoosterPack.description",currencyType:"money",currency:"RUB",prices:{RUB:65,USD:1.49,JPY:0,VK:10},payload:{items:[{spec:"currency",name:"coins",amount:300},{spec:"startbooster",name:"superTile",amount:1},{spec:"startbooster",name:"candybomb",amount:1},{spec:"startbooster",name:"addmoves",amount:1},{spec:"attempts",name:"unlimited",duration:"PT30M"}]}},{id:"101",key:"coins1500BoosterPack",type:"booster",title:"shopItem.coins1500BoosterPack.title",description:"shopItem.coins1500BoosterPack.description",currencyType:"money",currency:"RUB",prices:{RUB:255,USD:5.99,JPY:0,VK:37},payload:{items:[{spec:"currency",name:"coins",amount:1500},{spec:"startbooster",name:"superTile",amount:3},{spec:"startbooster",name:"candybomb",amount:3},{spec:"startbooster",name:"addmoves",amount:3},{spec:"attempts",name:"unlimited",duration:"PT2H"}]}},{id:"102",key:"coins3000BoosterPack",type:"booster",title:"shopItem.coins3000BoosterPack.title",description:"shopItem.coins3000BoosterPack.description",currencyType:"money",currency:"RUB",prices:{RUB:605,USD:14.99,JPY:0,VK:87},payload:{items:[{spec:"currency",name:"coins",amount:3e3},{spec:"startbooster",name:"candybomb",amount:5},{spec:"booster",name:"trowel",amount:1},{spec:"booster",name:"cart",amount:1},{spec:"booster",name:"cat",amount:1},{spec:"booster",name:"plusone",amount:1},{spec:"attempts",name:"unlimited",duration:"PT12H"}]}},{id:"103",key:"coins7000BoosterPack",type:"booster",title:"shopItem.coins7000BoosterPack.title",description:"shopItem.coins7000BoosterPack.description",currencyType:"money",currency:"RUB",prices:{RUB:1150,USD:24.99,JPY:0,VK:165},payload:{items:[{spec:"currency",name:"coins",amount:7e3},{spec:"startbooster",name:"candybomb",amount:5},{spec:"booster",name:"trowel",amount:2},{spec:"booster",name:"cart",amount:1},{spec:"booster",name:"cat",amount:1},{spec:"booster",name:"plusone",amount:2},{spec:"attempts",name:"unlimited",duration:"PT36H"}]}}],r=a.map(function(e){return new o.Product(e)});n.Products=r;var i=a;n.RawProducts=i,cc._RF.pop()},{"./Product (@tapclap.sdk-x.payment-service)":"Product (@tapclap.sdk-x.payment-service)"}],"ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a8956En44JXU5wssEIDpZcG","ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.ProgressBarAnimation=void 0;var a=function(e){var t,n;function a(t,n,o){var a;return void 0===o&&(o=.5),(a=e.call(this)||this)._progressBar=t,a._value=n,a._speed=o,a}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return cc.tween(this._progressBar).call(this._resolve).to(this._speed,{progress:this._value}).start(),e.prototype.run.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.ProgressBarAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"ProgressBarComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"19627t+FRtbRY8cmfjnAm0R","ProgressBarComponent (scripts.windows.items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ProgressBarComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._titleLabel=null,t._tooltip=null,t._barBarrier=null,t._animationSpeed=0,t._animationEasingCoefficient=0,t._startAnimationEasingPosition=0,t._animationDelay=0,t._actualProgress=0,t._animationPathLength=0,t}return a(t,e),t.prototype.start=function(){this.updateTooltipPosition()},t.prototype.update=function(e){this._playAnimation(e)},t.prototype.setTitle=function(e){null!==this._titleLabel&&(this._titleLabel.string=e.toString())},t.prototype.updateTooltipPosition=function(){var e=this.progress||0;null!==this._tooltip&&this._tooltip.setPosition(this._getProgressPosition(e),this._tooltip.position.y)},t.prototype.setBarBarrierPosition=function(e){null!==this._barBarrier&&this._barBarrier.setPosition(this._getProgressPosition(e),this._barBarrier.position.y)},t.prototype._getProgressPosition=function(e){return this.totalLength/-2+this.totalLength*e},t.prototype.setProgress=function(e,t,n){void 0===t&&(t=!1),t?this._startAnimation(e,n):(this.progress=e,this._actualProgress=0,this.updateTooltipPosition())},t.prototype._startAnimation=function(e,t){var n=this;void 0===t&&(t=0),this.scheduleOnce(function(){n._actualProgress=e,n._animationPathLength=e-n.progress},t+this._animationDelay)},t.prototype._playAnimation=function(e){if(this.progress<this._actualProgress){var t=this._animationPathLength-(this._actualProgress-this.progress),n=this._animationPathLength-this._animationPathLength*this._startAnimationEasingPosition,o=(n-(this._animationPathLength-t))/n;o=o>0?o:0,this.progress+=this._animationSpeed*e*this._animationPathLength/Math.exp(this._animationEasingCoefficient*o)}else this._animationPathLength=0,this._actualProgress>0&&(this.progress=this._actualProgress);this.updateTooltipPosition()},r([s({type:cc.Label,visible:!0})],t.prototype,"_titleLabel",void 0),r([s({type:cc.Node,visible:!0})],t.prototype,"_tooltip",void 0),r([s({type:cc.Node,visible:!0})],t.prototype,"_barBarrier",void 0),r([s({min:0,max:10,slide:!0,visible:!0})],t.prototype,"_animationSpeed",void 0),r([s({min:0,visible:!0})],t.prototype,"_animationEasingCoefficient",void 0),r([s({min:0,max:1,slide:!0,visible:!0})],t.prototype,"_startAnimationEasingPosition",void 0),r([s({min:0,visible:!0})],t.prototype,"_animationDelay",void 0),r([c],t)}(cc.ProgressBar);n.ProgressBarComponent=p,cc._RF.pop()},{}],"ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)":[function(e,t,n){"use strict";cc._RF.push(t,"8d0e5FWnsVHUqYD78aFuVBn","ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)"),n.__esModule=!0,n.ProgressMetaModule=void 0;var o=e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=1,c=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._value=i,n._hasChange=!1,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var c,s,p=o.prototype;return p._setValue=function(e,t){return void 0===t&&(t=!1),e===this._value||(this._value=Math.max(e,i),t)?Promise.resolve():(this._hasChange=!0,this.emitChange(),this.getService().save({value:this.value}))},p.isBegin=function(){return this.hasChange&&this._value===i},p.resetChange=function(){this._hasChange=!1},p.increase=function(){this._setValue(this._value+1)},p.init=function(t){return t&&t.value&&this._setValue(t.value,!0),this._value===i&&(this._hasChange=!0),e.prototype.init.call(this,this.serialize())},p.serialize=function(){return{value:this._value}},p.reset=function(){return this.setValue(0)},p.setValue=function(e){return this._setValue(e,!1)},p.resetState=function(){this.resetChange()},c=o,(s=[{key:"value",get:function(){return this._value}},{key:"hasChange",get:function(){return this._hasChange}}])&&a(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),o}(o.MetaModule);n.ProgressMetaModule=c,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)":[function(e,t,n){"use strict";cc._RF.push(t,"42abf2iYQBVqb7KzKDalGmn","ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ProgressMetaModuleDevConsoleMenuGenerator=void 0;var r=e("./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)"),i=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)"),p=function(e){function t(t){var n=e.call(this,t)||this;return n._instance=s.ProgressMetaModule,n._maxValueResolver=t.maxValueResolver,n}return a(t,e),t.prototype.generate=function(){var e=this;return{reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new i.CallbackDevConsoleCommand({callback:function(){e._module.reset().then(function(){e._module.resetState(),e._restartCurrentMetaGame()})}})},setLevel:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",command:new c.InputCallbackDevConsoleCommand({callback:function(t){Promise.resolve().then(function(){return e._maxValueResolver?e._maxValueResolver.getValue().then(function(e){return Math.min(e+1,t)}):t}).then(function(t){e._module.setValue(t).then(function(){}).catch(function(){}).then(function(){e._module.resetState(),e._restartCurrentMetaGame()})})}})}}},t}(r.MetaModuleDevConsoleMenuGenerator);n.ProgressMetaModuleDevConsoleMenuGenerator=p,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":"MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","./ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)":"ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)"}],"ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b95f8SYppFejY4yD0SlO1VB","ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.ProgressNotChangedGameForceEndHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e){var t=e.getModule("progress");return!!t&&!t.hasChange},a}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.ProgressNotChangedGameForceEndHandler=a,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"PromisifyTween (scripts.utils)":[function(e,t,n){"use strict";cc._RF.push(t,"222d6w99MFdxLRTH+g6oCCi","PromisifyTween (scripts.utils)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PromisifyTween=void 0;var o=function(){function e(){}return e.start=function(e){return new Promise(function(t){return e.call(t).start()})},e.startWithGettingTween=function(e){var t=null;return{promise:new Promise(function(n){return t=e.call(n).start()}),tween:t}},e}();n.PromisifyTween=o,cc._RF.pop()},{}],"ProxyAction (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f751cCkzqhX2YkKQmJfT1+V","ProxyAction (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.ProxyAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._action=t.action,n._actionOptions=t.actionOptions||{},n._actionManager=t.actionManager,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._actionManager.run(this._action,this._actionOptions)},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.ProxyAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)":[function(e,t,n){"use strict";cc._RF.push(t,"f10c2HOg41c7a1prGGby9qe","ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyAnalyticsProvider=void 0;var o=function(){function e(e){this._provider=e.provider}return e.prototype.init=function(){return this._provider.init()},e.prototype.setUserId=function(e){return this._provider.setUserId(e)},e.prototype.logEvent=function(e,t){return this._provider.logEvent(e,t)},e}();n.ProxyAnalyticsProvider=o,cc._RF.pop()},{}],"ProxyPaymentProvider (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";cc._RF.push(t,"c778e/mPlpe7aOkh3XSsWTw","ProxyPaymentProvider (@tapclap.sdk-x.payment-service)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyPaymentProvider=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._paymentProvider=t,n}return a(t,e),t.prototype.getType=function(){return this._paymentProvider.getType()},t.prototype.init=function(){return this._paymentProvider.init()},t.prototype.getProducts=function(e){return this._paymentProvider.getProducts(e)},t.prototype.getPurchases=function(){return this._paymentProvider.getPurchases()},t.prototype.purchase=function(e){return this._paymentProvider.purchase(e)},t.prototype.consume=function(e){return this._paymentProvider.consume(e)},t.prototype.isAvailable=function(){return this._paymentProvider.isAvailable()},t}(e("./PaymentProvider (@tapclap.sdk-x.payment-service)").PaymentProvider);n.ProxyPaymentProvider=r,cc._RF.pop()},{"./PaymentProvider (@tapclap.sdk-x.payment-service)":"PaymentProvider (@tapclap.sdk-x.payment-service)"}],"ProxyRemoteConfig (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"7a7e7gOdS9Q1Kvwa7YU1DGC","ProxyRemoteConfig (@tapclap.sdk-x.remote-config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ProxyRemoteConfig=void 0;var o=function(){function e(e){var t=e.config;this._config=t}return e.prototype.init=function(){return this._config.init()},e.prototype.fetch=function(){return this._config.fetch()},e.prototype.getBoolean=function(e){return this._config.getBoolean(e)},e.prototype.getInteger=function(e){return this._config.getInteger(e)},e.prototype.getDouble=function(e){return this._config.getDouble(e)},e.prototype.getString=function(e){return this._config.getString(e)},e.prototype.getJSON=function(e){return this._config.getJSON(e)},e}();n.ProxyRemoteConfig=o,cc._RF.pop()},{}],"PublicationAction (@tapclap.game-kit.action-manager.actions.publication)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4feeeRy9FhWQoKCKGR6B+5r","PublicationAction (@tapclap.game-kit.action-manager.actions.publication)"),n.__esModule=!0,n.PublicationAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._type=t.type,n._key=t.key,n._shareOptions=t.shareOptions,n._publicationManager=t.publicationManager,n._socialService=t.socialService,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this._socialService.getCurrentAdapter(),t=this._publicationManager.getPublication(this._key,this._shareOptions);if(e&&t)switch(this._type){case a.TYPE_SHARE:return e.share(t);case a.TYPE_REQUEST:}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.PublicationAction=a,a.TYPE_SHARE="share",a.TYPE_REQUEST="request",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"PublicationConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"2bb05Qyrb9ffL9ClI6G7AA+","PublicationConfig (scripts.config)"),n.__esModule=!0,n.ImageMap=void 0;var o="https://static.tapclap.com/static/candyvalley/{{platformPrefix}}/publication",a={};n.ImageMap=a;for(var r=0,i=Object.entries({"meta.common.publications.craft.found":"candy/episode{{episodeNumber}}/{{partNumber}}.png","meta.common.publications.craft.complete":"candy/episode{{episodeNumber}}/4.png","meta.common.publications.dailyReward":"v2/bonus.png","meta.common.publications.episodesStarsReward":"v2/box.png","meta.common.publications.winMatch3Game":"v2/publication.png","meta.common.publications.thousandthsLevel":"v2/{{levelNumber}}lvl.png"});r<i.length;r++){var c=i[r],s=c[0],p=c[1];a[s]=[o,p].join("/")}cc._RF.pop()},{}],"PublicationManager (@tapclap.game-kit.publication-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"55d41ZQ20JUdYVoCKhGQZKz","PublicationManager (@tapclap.game-kit.publication-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PublicationManager=void 0;var o=function(){function e(e){var t=e.resolvers,n=void 0===t?[]:t;this._resolvers=n}return e.prototype.getPublication=function(e,t){void 0===t&&(t={});var n={};return this._resolvers.forEach(function(o){var a=o.resolve(e,t);a&&Object.assign(n,a)}),n},e}();n.PublicationManager=o,cc._RF.pop()},{}],"PublicationResolver (@tapclap.game-kit.publication-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"283e9V1DntTSpDHTf9pOSqH","PublicationResolver (@tapclap.game-kit.publication-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.PublicationResolver=void 0;n.PublicationResolver=function(){},cc._RF.pop()},{}],"PulseFx (@tapclap.game-kit.ui.vfx)":[function(e,t,n){"use strict";var o,a,r,i,c;function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bbbe07HtARFz7S+3ha2FRC+","PulseFx (@tapclap.game-kit.ui.vfx)"),n.__esModule=!0,n.PulseFx=void 0;var m,u,d,y,f=cc._decorator,h=f.ccclass,g=f.property,v=(o=(0,f.menu)("UI-Kit/FX/Pulse"),a=g({visible:!0}),h(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_startOnLoad",c,p(t)),t._action=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var a=o.prototype;return a.onLoad=function(){this._action=cc.sequence([cc.scaleTo(1.02,1.02),cc.scaleTo(.98,.98)]).repeatForever()},a.start=function(){this.node.runAction(this._action)},a.stop=function(){this.node.stopAction(this._action)},o}(cc.Component),m=i.prototype,u=[a],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_startOnLoad",e)||e},y)).initializer&&(Object.defineProperty(m,"_startOnLoad",y),y=null),c=y,r=i))||r)||r);n.PulseFx=v,cc._RF.pop()},{}],"Purchase (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";cc._RF.push(t,"9a0cfbXuslSC4N90VxrnGt+","Purchase (@tapclap.sdk-x.payment-service)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Purchase=void 0;var o=function(){function e(e,t,n,o){void 0===n&&(n={}),void 0===o&&(o=""),this._type=e,this._productId=t,this._payload=n,this._transactionId=o}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"productId",{get:function(){return this._productId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transactionId",{get:function(){return this._transactionId},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{type:this.type,productId:this.productId,payload:this.payload,transactionId:this.transactionId}},e}();n.Purchase=o,cc._RF.pop()},{}],"PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"33162PUTCtdhZtqbGvcyOpI","PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)"),n.__esModule=!0,n.PurchaseAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._paymentService=t.paymentService,n._product=t.product,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this;return this._paymentService&&this._product?Promise.resolve().then(function(){return e._paymentService.purchase(e._product)}):Promise.reject()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.PurchaseAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"PurchaseHandler (@tapclap.sdk-x.payment-service)":[function(e,t,n){"use strict";cc._RF.push(t,"52c0bImGqJZPIlm9n7eHCpY","PurchaseHandler (@tapclap.sdk-x.payment-service)"),n.__esModule=!0,n.PurchaseHandler=void 0;var o=function(){function e(){}return e.prototype.handle=function(){return Promise.resolve()},e}();n.PurchaseHandler=o,cc._RF.pop()},{}],"PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"ecf86lDnNVDBIcfZO+djf3V","PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)"),n.__esModule=!0,n.PurchaseOfferPayloadBuilder=void 0;var o=e("./OfferPayloadBuilder (@tapclap.game-kit.offer-manager)"),a=e("./Offer (@tapclap.game-kit.offer-manager)"),r=e("./UserItemTimer (@tapclap.utils-js.timer)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n,o=t.paymentService,a=t.userManager;return(n=e.call(this)||this)._paymentService=o,n._userManager=a,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c._getProduct=function(e){return this._paymentService.getProducts().find(function(t){return t.key===e})},c._getTimer=function(e){if(e)switch(e.type){case a.Offer.TIMER_USERITEM:return new r.UserItemTimer({userItemManager:this._userManager.getCurrentUser().items,spec:e.spec,name:e.name})}},c.build=function(e){var t=e.product;return Object.assign({},e,{product:this._getProduct(t),timer:this._getTimer(e.timer)})},o}(o.OfferPayloadBuilder);n.PurchaseOfferPayloadBuilder=c,cc._RF.pop()},{"./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./OfferPayloadBuilder (@tapclap.game-kit.offer-manager)":"OfferPayloadBuilder (@tapclap.game-kit.offer-manager)","./UserItemTimer (@tapclap.utils-js.timer)":"UserItemTimer (@tapclap.utils-js.timer)"}],"QueueHttpGateway (@tapclap.game-kit.service-gateway)":[function(e,t,n){"use strict";cc._RF.push(t,"cdeaed+IbFUg5BaSMYaQD1X","QueueHttpGateway (@tapclap.game-kit.service-gateway)"),n.__esModule=!0,n.QueueHttpGateway=void 0;var o=e("./HttpGateway (@tapclap.game-kit.service-gateway)"),a=e("./GatewayRequest (@tapclap.game-kit.service-gateway)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._attempts=0,n._maxAttempts=t.maxAttempts||3,n._delay=t.delay||1e3,n._queue=[],n._queueIsProcessing=!1,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._request=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(o,r){var i=new a.GatewayRequest(e,t);n._queue.push({request:i,resolve:o,reject:r}),n._queueIsProcessing||n.process()})},i.process=function(e){var t=this;return void 0===e&&(e=!1),this._queueIsProcessing=!0,new Promise(function(n){setTimeout(function(){return n(t._processQueue(e))},t._delay*t._attempts)})},i._processQueue=function(e){var t=this;if(void 0===e&&(e=!1),this._queue.length>0){var n=this._queue.slice(0,1)[0],o=n.request,a=n.resolve;return this._processQueueItem(o).then(a).then(function(){return t._attempts=0,t._queue.shift(),t.process()}).catch(function(n){if(t._attempts++,t._errorHandling&&t._attempts>=t._maxAttempts)throw e||t._handleError(n),t._attempts=0,n;return t.process(e)})}return this._queueIsProcessing=!1,Promise.resolve()},i._processQueueItem=function(t){return e.prototype._request.call(this,t.url,t.options)},o}(o.HttpGateway);n.QueueHttpGateway=i,cc._RF.pop()},{"./GatewayRequest (@tapclap.game-kit.service-gateway)":"GatewayRequest (@tapclap.game-kit.service-gateway)","./HttpGateway (@tapclap.game-kit.service-gateway)":"HttpGateway (@tapclap.game-kit.service-gateway)"}],"QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"dfff0nYZg1XPJDwg7e2/9/7","QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)"),n.__esModule=!0,n.QuitFromAppAction=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._socialService=t.socialService,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){this._socialService.getCurrentAdapter().quit()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.QuitFromAppAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";cc._RF.push(t,"c73c8POCbhXabnaj+YyLlBO","RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),n.__esModule=!0,n.RadialGameStartAnimatorComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./Entity (@tapclap.match-x.engine.entities)"),f=e("./DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)");function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var S=cc._decorator,E=S.ccclass,x=S.menu,A=S.property,O=(o=x("Match-X/StartAnimator/RadialGameStartAnimator"),a=A({type:cc.Float,visible:!0}),r=A({type:cc.Float,visible:!0}),i=A({type:cc.Float,visible:!0}),c=A({type:cc.Float,visible:!0}),E(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return _(t=e.call.apply(e,[this].concat(o))||this,"_cellsDuration",l,b(t)),_(t,"_cellsDelay",m,b(t)),_(t,"_entitiesDuration",u,b(t)),_(t,"_entitiesDelayCoef",d,b(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,C(t,n);var a=o.prototype;return a.show=function(){var t=this;return Promise.resolve().then(function(){return t._showCells(t._cellsDuration,t._cellsDelay)}).then(function(){return e.prototype.show.call(t)}).then(function(){return t._showEntities(t._entitiesDuration,t._entitiesDelayCoef)})},a.hide=function(){return e.prototype.hide.call(this)},a._getCenterCells=function(){for(var e=this._game.world.getComponent("tiles").grid,t=[],n=e.rows,o=0,a=e.cols,r=0,i=0;i<e.rows;i++)for(var c=0;c<e.cols;c++)if(e.isContain(i,c)){var s=e.getCell(i,c);s.isEnabled&&(n=Math.min(n,s.row),o=Math.max(o,s.row),a=Math.min(a,s.col),r=Math.max(r,s.col))}for(var p=(o-n)/2,l=(r-a)/2,m=[Math.ceil,Math.floor],u=0,d=m;u<d.length;u++)for(var y,f=d[u],g=h(m);!(y=g()).done;){var v=y.value;t.push([f(p),v(l)])}for(var _=[],b=function(){var e=w[C],t=e[0],n=e[1];_.find(function(e){var o=e[0],a=e[1];return t===o&&n===a})||_.push([t,n])},C=0,w=t;C<w.length;C++)b();return _},a._showCells=function(e,t){return this._processCoordinates(e,t,function(t,n,o,a){return new Promise(function(r){var i=t.getCell(n,o);i.isEnabled?i.getComponent("render").node.runAction(cc.sequence([cc.delayTime(a),cc.spawn([cc.scaleTo(e,1,1),cc.fadeIn(e)]),cc.callFunc(r)])):r()})})},a._showEntities=function(e,t){return void 0===t&&(t=0),this._processCoordinates(e,t,function(t,n,o,a){return new Promise(function(r){for(var i,c=h(t.getCell(n,o).entities);!(i=c()).done;){var s,p=i.value,l=p.getComponent("render").node;(s=p.layer===y.Entity.LAYER_DEFAULT?cc.sequence([cc.delayTime(a),cc.spawn([cc.scaleTo(e,1,1),cc.fadeIn(0)]),cc.callFunc(r)]):cc.sequence([cc.delayTime(a+e),cc.spawn([cc.scaleTo(0,1,1),cc.fadeIn(e)]),cc.callFunc(r)]))&&l.runAction(s)}Promise.all([]).then(r)})})},a._processCoordinates=function(e,t,n){var o=this._game.world.getComponent("tiles").grid,a=[];return function r(i,c){void 0===c&&(c=0);for(var s,p=[],l=[],m=function(){var e=s.value,t=e[0],r=e[1];if(o.isContain(t,r)){p.push(new Promise(function(e){Promise.resolve().then(function(){return n(o,t,r,c)}).then(e)}));for(var i=-1;i<=1;i++)for(var m=-1;m<=1;m++){var u=t+i,d=r+m;o.isContain(u,d)&&l.push([u,d])}}a.push([t,r])},u=h(i);!(s=u()).done;)m();var d=l.filter(function(e){var t=e[0],n=e[1];return!a.find(function(e){var o=e[0],a=e[1];return o===t&&a===n})});return d.length>0&&r(d,c+e*t),Promise.all(p)}(this._getCenterCells())},a.initial=function(){for(var t=this._game.world.getComponent("tiles").grid,n=0;n<t.rows;n++)for(var o=0;o<t.cols;o++)if(t.isContain(n,o)){var a=t.getCell(n,o),r=a.getComponent("render").node;if(a.isEnabled){r.opacity=0,r.scale=0;for(var i,c=h(a.entities);!(i=c()).done;){var s=i.value.getComponent("render").node;s.opacity=0,s.scale=0}}}return e.prototype.initial.call(this)},o}(f.DecoratedGameStartAnimatorComponent),l=w(p.prototype,"_cellsDuration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),m=w(p.prototype,"_cellsDelay",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),u=w(p.prototype,"_entitiesDuration",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),d=w(p.prototype,"_entitiesDelayCoef",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),s=p))||s)||s);n.RadialGameStartAnimatorComponent=O,cc._RF.pop()},{"./DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)"}],"RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"f0fddSQ0qlfGajq+DAkdlQr","RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.RadialSquareExplodeRetriever=void 0;var i=function(e){function t(t){var n=t.radius,o=r(t,["radius"]),a=e.call(this,o)||this;return a._radius=n||1,a}return a(t,e),t.prototype.retrieve=function(e){for(var t=[],n=this.cell.row-this._radius;n<=this.cell.row+this._radius;n++)for(var o=this.cell.col-this._radius;o<=this.cell.col+this._radius;o++)e.isContain(n,o)&&t.push(e.getCell(n,o));return[t]},t.KEY="radialSquare",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.RadialSquareExplodeRetriever=i,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"RadialSquareRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5c98cEJmhdWWacqMomVccDK","RadialSquareRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.RadialSquareRetriever=void 0;var a=function(e){var t,n;function a(t){var n,o=t.cell,a=t.radius,r=void 0===a?1:a;return(n=e.call(this,{cell:o})||this)._radius=r,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){for(var t=[],n=this._cell.row-this._radius;n<=this._cell.row+this._radius;n++)for(var o=this._cell.col-this._radius;o<=this._cell.col+this._radius;o++)e.isContain(n,o)&&t.push(e.getCell(n,o));return[t]},a}(e("./RelativeRetriever (@tapclap.match-x.engine.retrievers)").RelativeRetriever);n.RadialSquareRetriever=a,cc._RF.pop()},{"./RelativeRetriever (@tapclap.match-x.engine.retrievers)":"RelativeRetriever (@tapclap.match-x.engine.retrievers)"}],"Random (@tapclap.utils-js.random)":[function(e,t,n){"use strict";cc._RF.push(t,"e59aftBnBVUeaztQ34FGBiN","Random (@tapclap.utils-js.random)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.Random=void 0;var i=r(e("seedrandom")),c=function(){function e(e){this._rng=e?i.default(e):Math.random}return e.prototype.getNumber=function(){return this._rng()},e.prototype.getInteger=function(e,t){return Math.floor(this.getNumber()*(t-e))+e},e.prototype.getFloat=function(e,t,n){void 0===n&&(n=1);var o=this.getNumber()*(t-e)+e;return n>0&&(o=Math.round(10*o*n)/(10*n)),o},e.prototype.getProbability=function(e){var t=0;for(var n in e)t+=e[n];var o=this.getNumber()*t;for(var n in t=0,e)if((t+=e[n])>o)return n;return""},e.prototype.shuffle=function(e){for(var t,n=e.length-1;n>0;n--){var a=this.getInteger(0,n+1);t=o([e[a],e[n]],2),e[n]=t[0],e[a]=t[1]}return e},e.prototype.sample=function(e){var t=a(e);return t[this.getInteger(0,t.length)]},e.prototype.uid=function(e,t){void 0===e&&(e=8),void 0===t&&(t="0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM");for(var n="",o=0;o<e;o++)n+=t[this.getInteger(0,t.length)];return n},e.prototype.uuid=function(){for(var e=[],t=0;t<=15;t++)e[t]=t.toString(16);var n="";for(t=1;t<=36;t++)n+=9===t||14===t||19===t||24===t?"-":15===t?4:20===t?e[4*this._rng()|8]:e[16*this._rng()|0];return n},e}();n.Random=c,cc._RF.pop()},{seedrandom:4}],"RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"02eb5egD1ZfBIt3OFiKRx7K","RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.RandomByGroupEmitTargetStrategy=void 0;var s=e("./GroupComponent (@tapclap.match-x.engine.components)"),p=e("./Entity (@tapclap.match-x.engine.entities)"),l=e("./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)"),m=e("./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=t.groupMap,o=t.random,a=r(t,["groupMap","random"]),i=e.call(this,a)||this;return i._groupMap={},i._groupMap=n||{},i._random=o,i}return a(t,e),t.prototype.getEmitTarget=function(e){var t=e.entity,n=e.trigger,o=e.grid,a=t.getComponent(n);if(a.hasEntities)for(var r in a.entities)if(a.entities[r].amount>0){var i=r.split("-"),s=i.length>1?i[i.length-1].toUpperCase():null,p=void 0;for(var l in this._groupMap)if(this._groupMap[l]===s){p=+l;break}var m=[];return void 0===p?m.push.apply(m,c(this._getAvailableEntityCells(o))):m.push.apply(m,c(this._getEntityCellsByGroup(o,p))),m.length>0?this._random.sample(m):null}return null},t.prototype._getEntityCellsByGroup=function(e,t){for(var n,o=[],a=p.Entity.LAYER_DEFAULT,r=0;r<e.rows;r++)for(var i=0;i<e.cols;i++)if(e.isContain(r,i)){var c=e.getCell(r,i);if(c.isFill&&!c.getEntity(p.Entity.LAYER_UPPER)){var l=c.getEntity(a)||c.getEntity(),u=null===(n=l.getEnabledComponentByClass(s.GroupComponent))||void 0===n?void 0:n.id,d=l.getEnabledComponentByClass(m.NotReplaceByStartBoosterComponent);this._isCorrectEntity(l)&&!d&&u===t&&o.push(c)}}return o},t.prototype._getAvailableEntityCells=function(e){for(var t,n=[],o=p.Entity.LAYER_DEFAULT,a=0;a<e.rows;a++)for(var r=0;r<e.cols;r++)if(e.isContain(a,r)){var i=e.getCell(a,r);if(i.isFill&&!i.getEntity(p.Entity.LAYER_UPPER)){var c=i.getEntity(o)||i.getEntity(),l=null===(t=c.getEnabledComponentByClass(s.GroupComponent))||void 0===t?void 0:t.id,u=c.getEnabledComponentByClass(m.NotReplaceByStartBoosterComponent);this._isCorrectEntity(c)&&!u&&l&&n.push(i)}}return n},t}(l.ComponentEmitTargetStrategy);n.RandomByGroupEmitTargetStrategy=u,cc._RF.pop()},{"./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)":"NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)"}],"RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"6a029zqrbZcOYu/BfcSG76o","RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.RandomCellExplodeRetriever=void 0;var i=function(e){function t(t){var n=t.random,o=t.targetsCount,a=t.targetVar,i=t.targets,c=r(t,["random","targetsCount","targetVar","targets"]),s=e.call(this,c)||this;return s._targetsCount=o||2,s._targetVar=a||70,s._targets=i||[],s._random=n||null,s}return a(t,e),t.prototype.retrieve=function(e){var t,n,o;if(this.cell){for(var a=[],r=[],i=function(t){for(var n=function(n){if(e.isContain(t,n)){var o=e.getCell(t,n);o.invertedEntities[0]&&(c._targets.some(function(e){return e.row===t&&e.col===n})?r.push(o):a.push(o))}},o=0;o<e.rows;o++)n(o)},c=this,s=0;s<e.rows;s++)i(s);for(var p=this.filter((null===(t=this._random)||void 0===t?void 0:t.shuffle(a))||a),l=this.filter((null===(n=this._random)||void 0===n?void 0:n.shuffle(r))||r),m=[],u=0;u<this._targetsCount;u++){var d=(null===(o=this._random)||void 0===o?void 0:o.getInteger(1,100))||100;l.length>0&&d<this._targetVar?m.push(l.pop()):p.length>0&&m.push(p.pop())}return[m]}return[]},t.KEY="randomCell",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.RandomCellExplodeRetriever=i,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"RandomCellRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0f258B4ggZfZaRhuwu8iZYm","RandomCellRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.RandomCellRetriever=void 0;var a=function(e){var t,n;function a(t,n){var o,a=t.cell,r=n.explodeCount,i=n.random;return(o=e.call(this)||this)._cell=a,o._explodeCount=r,o._random=i,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.retrieve=function(e){if(this._cell){for(var t=this._getEntityType(this._cell),n=[],o=0;o<e.rows;o++)for(var a=0;a<e.rows;a++)if(e.isContain(o,a)){var r,i=e.getCell(o,a),c=this._getEntityType(i),s=null==(r=i.getEntity())?void 0:r.getEnabledComponent("group");c&&c!==t&&s&&0!==s.id&&n.push(i)}for(var p=this._random.shuffle(n),l=[],m=0;m<this._explodeCount;m++)p.length&&l.push(p.pop());return[l]}return[]},r._getEntityType=function(e){if(e){var t=e.getEntity();return null==t?void 0:t.type}return null},a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.RandomCellRetriever=a,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":[function(e,t,n){"use strict";cc._RF.push(t,"fccdcTqFaBYtrjqhW4FBBeW","RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RandomColorGridDataLoaderPostHandler=void 0;var r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./RandomGroupComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.worldGroupsComponent,o=t.random,a=e.call(this)||this;return a._worldGroupsComponent=n,a._random=o,a}return a(t,e),t.prototype.process=function(e){var t=this;e.forEachEntities(function(e){var n=e.getEnabledComponentByClass(i.RandomGroupComponent),o=e.getEnabledComponentByClass(r.GroupComponent);if(o&&0===o.id&&n){var a=n.groups.filter(function(e){return t._worldGroupsComponent.groups.includes(e)});o.id=t._random.sample(a)}})},t}(e("./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)").GridDataLoaderPostHandler);n.RandomColorGridDataLoaderPostHandler=c,cc._RF.pop()},{"./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)":"GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./RandomGroupComponent (@tapclap.match-x.engine.components)":"RandomGroupComponent (@tapclap.match-x.engine.components)"}],"RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"e0e60Bnm/5eGowLev9qmYYh","RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.RandomComponentEmitTargetStrategy=void 0;var s=e("./EmitTargetComponent (@tapclap.match-x.engine.components)"),p=e("./Entity (@tapclap.match-x.engine.entities)"),l=function(e){function t(t){var n=t.random,o=r(t,["random"]),a=e.call(this,o)||this;return a._random=n,a}return a(t,e),t.prototype._getRandomCell=function(e,t,n){void 0===n&&(n=[]);for(var o=n.concat(this._excludedEntityTypes),a=[],r=0;r<e.rows;r++)for(var i=0;i<e.cols;i++)if(e.isContain(r,i)){var c=e.getCell(r,i);if(c.isFill){var s=c.getEntity(t)||c.getEntity();this._isCorrectEntity(s,o)&&a.push(c)}}return a.length>0?this._random.sample(a):null},t.prototype.getEmitTarget=function(e){var t=[],n=e.entity.getComponentByClass(s.EmitTargetComponent),o=p.Entity.LAYER_DEFAULT;return n&&(t.push.apply(t,c(n.excludeEntityTypes)),o=n.layer),this._getRandomCell(e.grid,o,t)},t}(e("./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)").ComponentEmitTargetStrategy);n.RandomComponentEmitTargetStrategy=l,cc._RF.pop()},{"./ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)":"ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","./EmitTargetComponent (@tapclap.match-x.engine.components)":"EmitTargetComponent (@tapclap.match-x.engine.components)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)"}],"RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"903659N9aRWPp1ox9SSJv7B","RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)"),n.__esModule=!0,n.RandomEntityEmitStrategy=void 0;var a=function(e){var t,n;function a(t){var n,o=t.entitySystem;return(n=e.call(this)||this)._entitySystem=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getEmitEntity=function(e){var t=e.entity.getComponent(e.trigger);return t.hasEntities?this._entitySystem.createRandomEntity(t.entities):null},a}(e("./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitStrategy);n.RandomEntityEmitStrategy=a,cc._RF.pop()},{"./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)"}],"RandomGroupComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b9574J3JWJZuKLOd+/lXc+U","RandomGroupComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RandomGroupComponent=void 0;var r=function(e){function t(t){var n=t.groups,o=e.call(this)||this;return o._groups=[],o._groups=n,o}return a(t,e),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!1,configurable:!0}),t.KEY="randomGroup",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.RandomGroupComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"RandomHealthComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3a4ac8HHsxWmaHmY9r5JLxW","RandomHealthComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.RandomHealthComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=void 0===t?{}:t,a=o.from,r=void 0===a?1:a,i=o.to,c=void 0===i?1:i;return o.once,(n=e.call(this)||this)._from=r,n._to=c,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.RandomHealthComponent=r,r.KEY="randomHealth",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":[function(e,t,n){"use strict";cc._RF.push(t,"69ebcEqc3ld9rmAOsMvPlla","RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)"),n.__esModule=!0,n.RandomHealthGridDataLoaderPostHandler=void 0;var o=e("./HealthComponent (@tapclap.match-x.engine.components)"),a=e("./RandomHealthComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n,o=t.random;return(n=e.call(this)||this)._random=o,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.process=function(e){for(var t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++)for(var i,c=r(e.getCell(t,n,!0).getEntitiesByComponentName(a.RandomHealthComponent.KEY));!(i=c()).done;){var s=i.value,p=s.getEnabledComponent(a.RandomHealthComponent.KEY);if(p){var l=s.getEnabledComponent(o.HealthComponent.KEY);l&&l.setValue(this._random.getInteger(p.from,p.to))}}},i}(e("./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)").GridDataLoaderPostHandler);n.RandomHealthGridDataLoaderPostHandler=p,cc._RF.pop()},{"./GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)":"GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./RandomHealthComponent (@tapclap.match-x.engine.components)":"RandomHealthComponent (@tapclap.match-x.engine.components)"}],"RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"64cbfCsD7RVVovrJKQy81mr","RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)"),n.__esModule=!0,n.RandomTurnSelector=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._random=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getTurn=function(e){return e[this._random.getInteger(0,e.length)]},a}(e("./TurnSelector (@tapclap.match-x.engine.systems.turn-system)").TurnSelector);n.RandomTurnSelector=a,cc._RF.pop()},{"./TurnSelector (@tapclap.match-x.engine.systems.turn-system)":"TurnSelector (@tapclap.match-x.engine.systems.turn-system)"}],"RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"4a98ae7IadV/o52uyqVU0XC","RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RandomWalkPathStrategy=void 0;var r=e("./WalkComponent (@tapclap.match-x.engine.components)"),i=e("./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"),c=e("./AllRetriever (@tapclap.match-x.engine.retrievers)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e,t,n){return n.getEnabledComponentByClass(r.WalkComponent)?(new c.AllRetriever).retrieve(e).flat():[]},t.KEY="random",t}(i.WalkPathStrategy);n.RandomWalkPathStrategy=s,cc._RF.pop()},{"./AllRetriever (@tapclap.match-x.engine.retrievers)":"AllRetriever (@tapclap.match-x.engine.retrievers)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)","./WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"babb6lMM4RQtovhfHD2dIO6","RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RandomWalkSortStrategy=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._random=t.random,n}return a(t,e),t.prototype.sort=function(e){return this._random.shuffle(e)},t.KEY="randomWalkSort",t}(e("./WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkSortStrategy);n.RandomWalkSortStrategy=r,cc._RF.pop()},{"./WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"RangeResolver (@tapclap.game-kit.meta-game)":[function(e,t,n){"use strict";cc._RF.push(t,"7432fb3KN9fh5RNuCf/O5Ne","RangeResolver (@tapclap.game-kit.meta-game)"),n.__esModule=!0,n.RangeResolver=void 0;var o=function(){function e(){}return e.prototype.get=function(){return[0,0]},e}();n.RangeResolver=o,cc._RF.pop()},{}],"RawInputHandler (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"00aee5fiqVYMbXE87wV/ckw","RawInputHandler (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.RawInputHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getCell=function(e){return e.data.cell},r._checkInput=function(e,t){return e&&t&&e.type===t.type&&"raw"===e.type},r._doHandle=function(){},r.capture=function(e){return"raw"===e.type},r.handle=function(e,t,n){if(this._checkInput(e,t)){var o=this._getCell(e),a=this._getCell(t);return this._doHandle(o,a,n),!0}return!1},a}(e("./InputHandler (@tapclap.match-x.engine.systems.input-system)").InputHandler);n.RawInputHandler=a,cc._RF.pop()},{"./InputHandler (@tapclap.match-x.engine.systems.input-system)":"InputHandler (@tapclap.match-x.engine.systems.input-system)"}],"RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a915eVOWT1SJo5W55MYXvKo","RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),n.__esModule=!0,n.RawInputTutotialStepStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.start=function(e,t){return this._getStepData(e,t)},r.complete=function(e,t){return t.getState(e.data.input)?this._getStepData(e,t):null},a}(e("./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)").BaseTutorialStepStrategy);n.RawInputTutotialStepStrategy=a,cc._RF.pop()},{"./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"}],"RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"54456jomMVG3LlLcoDb9tvB","RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)"),n.__esModule=!0,n.RawStorageAdapter=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getData=function(){return this._storage.getItem(this._getKey())},r.setData=function(e){var t=this;return void 0===e&&(e={}),Promise.resolve().then(function(){return t._storage.setItem(t._getKey(),e)}).then(function(){return t._setUpdatedAt()})},a}(e("./StorageAdapter (@tapclap.game-kit.data-storage.adapters)").StorageAdapter);n.RawStorageAdapter=a,cc._RF.pop()},{"./StorageAdapter (@tapclap.game-kit.data-storage.adapters)":"StorageAdapter (@tapclap.game-kit.data-storage.adapters)"}],"ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"50d31NyBoVJVp0QX6b+ZgIw","ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)"),n.__esModule=!0,n.ReachGoalRewardContentWindowLayoutComponent=void 0;var o,a,r,i,c,s,p=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),l=e("./ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)"),m=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),u=e("./IconComponent (@tapclap.game-kit.ui.icons)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=cc._decorator,v=g.ccclass,_=g.property,b=(o=_({type:cc.Integer,visible:!0}),a=_({type:cc.Integer,visible:!0}),v((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_layoutBottomPadding",c,y(t)),d(t,"_itemIconSize",s,y(t)),t._items=[],t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=o.prototype;return a._createItem=function(){var e=cc.instantiateFrom(this._options.item.prefab).getComponent(l.ReachGoalRewardItemComponent);if(!e)throw new Error("Not found EpisodesProgressRewardItemComponent in prefab: "+this._options.item.prefab);return e},a.showUnavailableState=function(e){var t=e.value,n=e.maxValue,o=this._createItem();o.setUnavailableState(t,n),this._items.push(o),this._pushToRow(o.node,0)},a.showAvailableState=function(e){for(var t=this,n=function(n){var a=t._createItem();a.setPrizeIcon(e[n]),a.setAvailableState(),a.button.events.on(m.ButtonControlComponent.EVENT_CLICK,function(){return t.window.events.emit(o.EVENT_SELECT_REWARD,n,a)}),t._items.push(a),t._pushToRow(a.node,Math.floor(n/o.ITEM_PER_ROW))},a=0;a<e.length;a++)n(a);this._updateRows()},a.showPrize=function(e,t){return this._items[e].showPrize(t)},a.showRewards=function(e,t,n,o){var a=this;void 0===n&&(n=!1),void 0===o&&(o=!1);var r=this.node.getComponent(cc.Layout),i=null,c=new Promise(function(e){return i=e});return o?(r.paddingBottom=this._layoutBottomPadding,Promise.resolve().then(i)):this.schedule(function e(){r.paddingBottom<a._layoutBottomPadding?r.paddingBottom+=1:(a.unschedule(e),i())},.01),c.then(function(){return a._items[e].showRewards(t.map(function(e){return e.icon.size=a._itemIconSize,e}),n)})},a.getReward=function(e,t){var n=t.map(function(e){return e.name}),o=this._items[e].rewards.node.getComponentsInChildren(u.IconComponent),a=this._items[e].rewards.node.getComponentsInChildren(cc.Label);return n.map(function(e,t){return{type:e,iconNode:o[t].node,labelNode:a[t].node}})},o}(p.RowContentWindowLayoutComponent),c=h(i.prototype,"_layoutBottomPadding",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=h(i.prototype,"_itemIconSize",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),r=i))||r);n.ReachGoalRewardContentWindowLayoutComponent=b,b.ITEM_PER_ROW=3,b.EVENT_SELECT_REWARD="select",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)":"ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)","./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"ReachGoalRewardHeaderWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"7aec5VOpQFOib0wHHzJ9LrF","ReachGoalRewardHeaderWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)"),n.__esModule=!0,n.ReachGoalRewardHeaderWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),u=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),d=e("./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.property,w=(o=C({type:u.I18NLabel,visible:!0}),a=C({type:d.IconTextWidget,visible:!0}),r=C({type:cc.Integer,visible:!0}),b((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_label",s,h(t)),y(t,"_rewards",p,h(t)),y(t,"_itemIconSize",l,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a,r,i=o.prototype;return i.setItems=function(e){var t=this;this._rewards.setItems(e.map(function(e){return e.icon.size=t._itemIconSize,e}))},i.setText=function(e){this._label&&this._label.setString(e)},a=o,(r=[{key:"rewards",get:function(){return this._rewards}}])&&f(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(m.WindowLayoutComponent),s=v(c.prototype,"_label",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v(c.prototype,"_rewards",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=v(c.prototype,"_itemIconSize",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),i=c))||i);n.ReachGoalRewardHeaderWindowLayoutComponent=w,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)":"IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"9d79fEXOVNLlZ4dTUeuXPCB","ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)"),n.__esModule=!0,n.ReachGoalRewardItemComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f=e("./IconComponent (@tapclap.game-kit.ui.icons)"),h=e("./EventEmitter (@tapclap.utils-js.events)"),g=e("./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)"),v=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function _(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var E=cc._decorator,x=E.ccclass,A=E.property,O=(o=A({type:cc.Node,visible:!0}),a=A({type:f.IconComponent,visible:!0}),r=A({type:cc.Node,visible:!0}),i=A({type:cc.Label,visible:!0}),c=A({type:g.IconTextWidget,visible:!0}),x((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return _(t=e.call.apply(e,[this].concat(o))||this,"_defaultIcon",l,C(t)),_(t,"_prizeIcon",m,C(t)),_(t,"_badge",u,C(t)),_(t,"_badgeLabel",d,C(t)),_(t,"_rewards",y,C(t)),t._events=new h.EventEmitter,t._state=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a,r,i=o.prototype;return i.setUnavailableState=function(e,t){this._state=o.STATE_UNAVAILABLE,this._badge.active=!0,this._badgeLabel.string=e+"/"+t},i.setAvailableState=function(){this._state=o.STATE_AVAILABLE},i.setPrizeIcon=function(e){this.prizeIcon=e},i.showPrize=function(e){var t=this;return void 0===e&&(e=!1),this._prizeIcon.node.active?Promise.resolve():(this._prizeIcon.node.active=!0,e?(this._defaultIcon.active=!1,Promise.resolve()):(this._prizeIcon.node.opacity=0,new Promise(function(e){var n=[cc.callFunc(function(){var e=t._defaultIcon.getComponent(cc.Animation);e.play(e.defaultClip.name)}),cc.sequence([cc.delayTime(.5),cc.fadeIn(.5),cc.callFunc(e)])];t._prizeIcon.node.runAction(cc.spawn(n))})))},i.showRewards=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(o){n.rewards.setItems(e),t&&n._rewards.node.runAction(cc.fadeTo(1,100)),o()})},a=o,(r=[{key:"prizeIcon",set:function(e){this._prizeIcon&&this._prizeIcon.setIcon(e,!0)}},{key:"events",get:function(){return this._events}},{key:"button",get:function(){return this.getComponent(v.ButtonControlComponent)}},{key:"rewards",get:function(){return this._rewards}}])&&b(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),l=S(p.prototype,"_defaultIcon",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S(p.prototype,"_prizeIcon",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S(p.prototype,"_badge",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(p.prototype,"_badgeLabel",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S(p.prototype,"_rewards",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=p))||s);n.ReachGoalRewardItemComponent=O,O.STATE_UNAVAILABLE="unavailable",O.STATE_AVAILABLE="available",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)":"IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)"}],"ReceiveItemWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"9ac3avajjpHAb42xnJZpMa0","ReceiveItemWindowLayoutComponent (scripts.windows.layouts)"),n.__esModule=!0,n.ReceiveItemWindowLayoutComponent=void 0;var o,a,r,i,c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=(o=(0,h.property)({type:s.WindowItemComponent,visible:!0}),g((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_item",i,l(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a.setTitle=function(e){this._item.title=e},a.setIcon=function(e,t){this._item.initialize({icon:{prefab:e,key:t}})},a.getItem=function(){return this._item.iconHolder},o}(c.WindowLayoutComponent),u=r.prototype,d=[o],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_item",e)||e},f)).initializer&&(Object.defineProperty(u,"_item",f),f=null),i=f,a=r))||a);n.ReceiveItemWindowLayoutComponent=v,cc._RF.pop()},{"./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"8bb66LGYG1cYqI4UXpxUbMJ","ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReceiveLivesMessageEventHandler=void 0;var r=e("./MessageEventHandler (scripts.message-center.event-handlers)"),i=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),c=e("./ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)"),s=function(e){function t(t){var n=t.messageCenter,o=t.attemptsModuleResolver,a=t.badgeRefresher,r=e.call(this)||this;return r._messageCenter=n,r._attempts=o.get(),r._badgeRefresher=a,r}return a(t,e),t.prototype.handle=function(e){var t=this,n=e.data,o=e.view,a=e.adapter,r=this._attempts.getState(),s=r.getMaxAttempts()-r.getCountAttempts();return Promise.resolve().then(function(){return o.setState(i.MessageItemComponent.STATE_DISABLED)}).then(function(){return t._messageCenter.read(n.messages.map(function(e){return e.message}).slice(0,s)).catch(function(e){throw console.error("messageCenter.read",e),e})}).then(function(){return Promise.resolve().then(function(){return a.updateItem(n)}).catch(function(e){throw console.error("adapter.refresh",e),e})}).then(function(){return o.setState(c.ReceivingLivesMessageItemComponent.STATE_COMPLETE)}).then(function(){return t._badgeRefresher.refresh()}).catch(function(){return o.setState(i.MessageItemComponent.STATE_DEFAULT)})},t}(r.MessageEventHandler);n.ReceiveLivesMessageEventHandler=s,cc._RF.pop()},{"./MessageEventHandler (scripts.message-center.event-handlers)":"MessageEventHandler (scripts.message-center.event-handlers)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)","./ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)":"ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)"}],"ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"96164eHvINS3InExH1bSe6Z","ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ReceivingLivesMessageItemComponent=void 0;var i=e("./AvatarComponent (scripts.common.components)"),c=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._livesNumberLabel=null,t._friendsAvatarsContainer=null,t._avatarPrefab=null,t}return a(t,e),Object.defineProperty(t.prototype,"livesNumber",{set:function(e){this._livesNumberLabel.string=e.toString()},enumerable:!1,configurable:!0}),t.prototype.setAvatars=function(e){var t=this;this._friendsAvatarsContainer.removeAllChildren(),e.slice(0,5).forEach(function(e){var n=cc.instantiate(t._avatarPrefab),o=n.getComponent(i.AvatarComponent);e&&o.setAvatar(e),t._friendsAvatarsContainer.addChild(n)})},t.prototype.setLivesCount=function(e){this.livesNumber=e},t.prototype.init=function(t){e.prototype.init.call(this,t),this.setData(t.data)},t.prototype.setData=function(e){this._data=e,this.setLivesCount(this._data.messages.length),this.setAvatars(this._data.messages.map(function(e){return e.avatar}))},t.prototype.setState=function(t){var n=this._states[t].label;this.label=n,e.prototype.setState.call(this,t)},t.STATE_COMPLETE="complete",r([l({type:cc.Label,visible:!0})],t.prototype,"_livesNumberLabel",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_friendsAvatarsContainer",void 0),r([l({type:cc.Prefab,visible:!0})],t.prototype,"_avatarPrefab",void 0),r([p],t)}(c.MessageItemComponent);n.ReceivingLivesMessageItemComponent=m,cc._RF.pop()},{"./AvatarComponent (scripts.common.components)":"AvatarComponent (scripts.common.components)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)"}],"RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"209cd6bwdFZcKZ2fzboiGxH","RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),s=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),p=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=function(e){function t(t){var n=t.triggers,o=void 0===n?[]:n,a=e.call(this)||this;return a._triggers=o,a}return a(t,e),t.prototype.build=function(e){var t,n,o=[],a=e.data,i=[];try{for(var m=r(a),u=m.next();!u.done;u=m.next()){var d=u.value,y=d.entity,f=d.trigger;if(this._triggers.includes(f)){var h=new c.AnimationFactory(y);h.hasAnimation(s.AnimationResolver.TYPE_RECOVERY)?i.push({target:y,animation:new l.GroupAnimation([new p.DummyAnimation,h.createAnimation(s.AnimationResolver.TYPE_RECOVERY)],!0)}):h.hasAnimation(s.AnimationResolver.TYPE_EXPLODE)&&i.push({target:y,animation:new l.GroupAnimation([new p.DummyAnimation,h.createAnimation(s.AnimationResolver.TYPE_EXPLODE)],!0)})}}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}return o.push(i),o},t}(i.GameActionBuilder);n.RecoveryHealthAnimationBuilder=m,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"RecoveryHealthComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"983cdG94tVfoZ5gn+NmldHr","RecoveryHealthComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthComponent=void 0;var r=function(e){function t(t){var n=(void 0===t?{}:t).recoveryStep,o=void 0===n?1/0:n,a=e.call(this)||this;return a._recoveryStep=o,a}return a(t,e),Object.defineProperty(t.prototype,"step",{get:function(){return this._recoveryStep},enumerable:!1,configurable:!0}),t.KEY="recoveryHealth",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.RecoveryHealthComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f5b1dzsLcBQLoaAqhqnyeXc","RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthOnDeathComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="recoveryHealthOnDeath",t}(e("./RecoveryHealthComponent (@tapclap.match-x.engine.components)").RecoveryHealthComponent);n.RecoveryHealthOnDeathComponent=r,cc._RF.pop()},{"./RecoveryHealthComponent (@tapclap.match-x.engine.components)":"RecoveryHealthComponent (@tapclap.match-x.engine.components)"}],"RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b0875c6hbFal4CGSv2VEpcn","RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthOnEmitComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="recoveryHealthOnEmit",t}(e("./RecoveryHealthComponent (@tapclap.match-x.engine.components)").RecoveryHealthComponent);n.RecoveryHealthOnEmitComponent=r,cc._RF.pop()},{"./RecoveryHealthComponent (@tapclap.match-x.engine.components)":"RecoveryHealthComponent (@tapclap.match-x.engine.components)"}],"RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"7e2a4JNgnVd451Sl7TQ06M+","RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthOnReachTurnCountAfterExplodeComponent=void 0;var r=function(e){function t(t){var n=t.recoveryStep,o=void 0===n?0:n,a=t.turnCountTarget,r=void 0===a?0:a,i=e.call(this,{recoveryStep:o})||this;return i._turnCountTarget=0,i._recoveredAtTurnCount=0,i._turnCountTarget=r,i}return a(t,e),Object.defineProperty(t.prototype,"turnCountTarget",{get:function(){return this._turnCountTarget},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"recoveredAtTurnCount",{get:function(){return this._recoveredAtTurnCount},set:function(e){this._recoveredAtTurnCount=e},enumerable:!1,configurable:!0}),t.KEY="recoveryHealthOnReachTurnCountAfterExplode",t}(e("./RecoveryHealthComponent (@tapclap.match-x.engine.components)").RecoveryHealthComponent);n.RecoveryHealthOnReachTurnCountAfterExplodeComponent=r,cc._RF.pop()},{"./RecoveryHealthComponent (@tapclap.match-x.engine.components)":"RecoveryHealthComponent (@tapclap.match-x.engine.components)"}],"RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)":[function(e,t,n){"use strict";cc._RF.push(t,"005f7QOf4ha5aE82TmzeM3z","RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthStateModel=void 0;var r=function(e){function t(t){var n=t.cell,o=t.entity,a=t.prevValue,r=t.value,i=t.trigger,c=e.call(this,{cell:n,entity:o})||this;return c._prevValue=a,c._value=r,c._trigger=i,c}return a(t,e),Object.defineProperty(t.prototype,"prevValue",{get:function(){return this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),t}(e("./StateModel (@tapclap.match-x.engine.components.state)").StateModel);n.RecoveryHealthStateModel=r,cc._RF.pop()},{"./StateModel (@tapclap.match-x.engine.components.state)":"StateModel (@tapclap.match-x.engine.components.state)"}],"RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)":[function(e,t,n){"use strict";cc._RF.push(t,"46b77GKrytVK60MB1BgRvwl","RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthSystem=void 0;var i=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),c=e("./RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)"),s=e("./GridComponent (@tapclap.match-x.engine.components)"),p=e("./HealthComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=t.world,o=t.strategies,a=void 0===o?[]:o,r=e.call(this)||this;return r._world=n,r._strategies=a,r}return a(t,e),t.prototype.process=function(){var e,n,o=this,a=this._world.getEnabledComponentsByClass(s.GridComponent).map(function(e){return e.grid});try{for(var i=r(a),l=i.next();!l.done;l=i.next())l.value.forEachEntities(function(e,n){var a,i;if(e.getEnabledComponentByClass(p.HealthComponent))try{for(var s=(a=void 0,r(o._strategies)),l=s.next();!l.done;l=s.next()){var m=l.value.process(n,e);m&&o._world.pushState(t.STATE,new c.RecoveryHealthStateModel(Object.assign({cell:n,entity:e},m)))}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}})}catch(m){e={error:m}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!1},t.KEY="recoveryHealthSystem",t.STATE="recoveryHealth",t}(i.PipelineProcessSystem);n.RecoveryHealthSystem=l,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)":"RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)"}],"RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)":[function(e,t,n){"use strict";cc._RF.push(t,"6a4eb10s9JYp7hwgeAWcfad","RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.RecoveryHealthSystemStrategy=void 0;n.RecoveryHealthSystemStrategy=function(){},cc._RF.pop()},{}],"RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1efe8YfnxFXe5GElSWscAVO","RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)"),n.__esModule=!0,n.RecyclerScrollAdapter=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.createViewHolder=function(e,t){var n=this._onCreateViewHolder(e,t);return n.setType(e),n},r.bindViewHolder=function(e,t,n){e.setBindingAdapterPosition(t),this._onBindViewHolder(e,t,n)},r.getItemCount=function(){},r._onCreateViewHolder=function(){},r._onBindViewHolder=function(){},r.onViewAttached=function(){},r.onViewDetached=function(){},r.onViewRecycled=function(){},a}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.RecyclerScrollAdapter=a,a.EVENT_DATASET_CHANGED="dataset_changed",a.EVENT_ITEM_CHANGED="item_changed",a.EVENT_ITEM_INSERTED="item_inserted",a.EVENT_ITEM_MOVED="item_moved",a.EVENT_ITEM_REMOVED="item_removed",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":[function(e,t,n){"use strict";cc._RF.push(t,"69a28zUJGNEm6WNoyFkuDu9","RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),n.__esModule=!0,n.RecyclerScrollStrategy=void 0;var o=function(){function e(e){var t=void 0===e?{}:e,n=t.node,o=t.methods,a=void 0===o?{}:o;this._node=null,this._methods={},this._node=n,this._methods=a}var t=e.prototype;return t.bindEvents=function(){},t.unbindEvents=function(){},e}();n.RecyclerScrollStrategy=o,cc._RF.pop()},{}],"RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ac03f6drf9KGpPvt4I4Bm7z","RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),n.__esModule=!0,n.RecyclerScrollTouchStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.bindEvents=function(){this._node.on(cc.Node.EventType.TOUCH_START,this._methods.start),this._node.on(cc.Node.EventType.TOUCH_MOVE,this._methods.move),this._node.on(cc.Node.EventType.TOUCH_END,this._methods.end),this._node.on(cc.Node.EventType.TOUCH_CANCEL,this._methods.cancel)},r.unbindEvents=function(){this._node.off(cc.Node.EventType.TOUCH_START,this._methods.start),this._node.off(cc.Node.EventType.TOUCH_MOVE,this._methods.move),this._node.off(cc.Node.EventType.TOUCH_END,this._methods.end),this._node.off(cc.Node.EventType.TOUCH_CANCEL,this._methods.cancel)},a}(e("./RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)").RecyclerScrollStrategy);n.RecyclerScrollTouchStrategy=a,cc._RF.pop()},{"./RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"}],"RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":[function(e,t,n){"use strict";cc._RF.push(t,"30bfcMRvohMZZkZ6ff51out","RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),n.__esModule=!0,n.RecyclerScrollViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v=e("./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),_=e("./RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),b=e("./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)");function C(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var A=cc._decorator,O=A.ccclass,R=A.property,P=(o=(0,A.menu)("UI-Kit/ScrollView/RecyclerScrollViewComponent"),a=R({tooltip:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044d\u043a\u0440\u0430\u043d\u043e\u0432 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u043d\u0433\u0430 (\u0441 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b)",visible:!0}),r=R({tooltip:"\u041f\u043e\u0433\u0440\u0435\u0448\u043d\u043e\u0441\u0442\u044c \u0432 \u043f\u0438\u043a\u0441\u0435\u043b\u044f\u0445, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0445\u043e\u043b\u0434\u0435\u0440",visible:!0}),i=R({type:cc.Float,visible:!0,min:0}),c=R({type:cc.Layout,visible:!0}),s=R({visible:!0,type:cc.Node}),p=R({visible:!0}),O(l=o((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return C(t=e.call.apply(e,[this].concat(o))||this,"_retainScreenCount",u,S(t)),C(t,"_holderThreshold",d,S(t)),t._moveLastTime=0,t._recycledHolders=[],t._contentMaxPos=null,t._contentMinPos=null,t._mouseEnterListener=null,t._scrollStrategy=null,t._utilizerEnabled=!0,t._runPromiseResolver=null,C(t,"_scrollSpeed",y,S(t)),C(t,"_layout",f,S(t)),C(t,"_visibleRect",h,S(t)),C(t,"_setScrollRestrictionOnRun",g,S(t)),t._adapter=null,t._scrollRestrictionEnabled=!1,t._observe=!1,t._touchMoveDeltas=[],t._velocity=0,t._direction=0,t._acceleration=0,t._deacceleration=1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,E(t,n);var a,r,i=o.prototype;return i.onLoad=function(){if(!this._contentLayout)throw new Error("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0434\u0443 \u0441 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043e\u043c");void 0!==this._scrollDirection&&(this._createScrollStrategy(),this._bindEvents()),window.scroller=this},i._bindEvents=function(){var e=this;if(this._bindInputEvents(),cc.sys.isBrowser){var t=document.getElementsByTagName("body")[0];this._mouseEnterListener=function(){e._unbindInputEvents(),e._bindInputEvents()},t.addEventListener("mouseenter",this._mouseEnterListener)}this.node.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this)},i._bindInputEvents=function(){this._scrollStrategy.bindEvents()},i._getNulledVec=function(e){var t=this._scrollDirection===cc.Layout.Type.VERTICAL?new cc.Vec2(0,1):new cc.Vec2(1,0);return e.scale(t)},i._getHolderBoundingBox=function(e){var t=e.getBoundingBox(),n=e.parent.convertToWorldSpaceAR(cc.v2(t.x,t.y)),o=this._content.parent.convertToNodeSpaceAR(n);return new cc.Rect(o.x,o.y,t.width,t.height)},i._getNextPosition=function(){var e=this,t=this._getRetainAreaBB(),n={};switch(this._scrollDirection){case cc.Layout.Type.VERTICAL:n.after=new cc.Vec2(t.xMin,t.yMax),n.before=new cc.Vec2(t.xMin,t.yMin);break;case cc.Layout.Type.HORIZONTAL:n.after=new cc.Vec2(t.xMax,t.yMin),n.before=new cc.Vec2(t.xMin,t.yMin)}this._isInverted()&&Object.assign(n,{after:n.before,before:n.after});for(var o=this._getVisibleHoldersInRect(this._getRetainAreaBB()).map(function(t){return e._getHolderComponent(t).getLayoutPosition()}),a=0,r=Object.keys(n);a<r.length;a++){var i=r[a],c=this._getNulledVec(n[i]);if(!this._getRenderedAreaBB().contains(c))switch(i){case"after":var s=o[o.length-1]+1;if(this._adapter.getItemCount()>s)return s;break;case"before":var p=o[0]-1;if(p>-1&&this._adapter.getItemCount()-1>p)return p}}return null},i._createScrollStrategy=function(){this._scrollStrategy=new _.RecyclerScrollTouchStrategy({node:this.node,methods:{start:this._onInputStart.bind(this),move:this._onInputMove.bind(this),end:this._onInputEnd.bind(this),cancel:this._onInputCancel.bind(this)}})},i._getRenderedAreaBB=function(){return this._content.getBoundingBox()},i._getRetainAreaBB=function(){var e=this.node.getBoundingBox();return e[this._coordinateKey]-=e[this._lengthKey]*this._retainScreenCount,e[this._lengthKey]=(2*this._retainScreenCount+1)*e[this._lengthKey],e.height+=2*this._holderThreshold,e.y-=this._holderThreshold,e},i._moveTo=function(e,t,n){if(void 0===n&&(n=null),n&&e){var o=cc.moveTo(e,t).easing(n);o.setTag("_inertia"),this._content.runAction(o)}else this._content.setPosition(t)},i._onInputCancel=function(){this._onInputEnd()},i._onInputEnd=function(){this._velocity=10*this._getVelocity()},i._onInputMove=function(e){var t=this._coordinateKey,n=e["getDelta"+t.toUpperCase()](),o=new cc.Vec2;o[t]=this._content[t]+n,this._pushTouchMoveDelta(n),this._setLastScrollTime(),this._moveTo(0,o)},i._pushTouchMoveDelta=function(e){this._touchMoveDeltas.push({distance:e,time:(new Date).getTime()-this._moveLastTime}),this._touchMoveDeltas.length>o.TOUCH_DELTA_COUNT&&this._touchMoveDeltas.shift()},i._getVelocity=function(){var e=0,t=0;return this._touchMoveDeltas.forEach(function(n){e+=n.distance,t+=n.time}),0===e||0===t?0:e/t},i._onInputStart=function(){this._touchMoveDeltas=[],this._velocity=0},i._onMouseWheel=function(e){var t=Math.max(-50,Math.min(50,e.getScrollY())),n=new cc.Vec2;n[this._coordinateKey]=this._content[this._coordinateKey]+t,this._moveTo(0,n)},i.renderViewAtPosition=function(e,t,n){if(void 0===e&&(e=0),void 0===n&&(n={}),this._getHolderByPosition(e))console.warn("Holder for position "+e+" already in scroll");else{var o=this._createHolder(t,e);this._adapter.bindViewHolder(this._getHolderComponent(o),e,n),this._addHolder(e,o)}},i._createHolder=function(e,t){var n=this._getRecycledHolder(e);return n?(this._adapter.onViewRecycled(this._getHolderComponent(n)),n):this._adapter.createViewHolder(e,t).node},i._renderVisibleArea=function(){var e=this._getNextPosition();null!==e?this.renderViewAtPosition(e):this._runPromiseResolver&&(this._runPromiseResolver(),this._runPromiseResolver=null)},i._utilizeHolders=function(e){var t=this;if(void 0===e&&(e=!1),this._utilizerEnabled||e){var n=this._getVisibleHoldersInRect(this._getRetainAreaBB()),o=this._content.children.filter(function(e){return!n.includes(e)});o.forEach(function(e,n){t._removeHolder(e,n===o.length-1)})}},i._utilizeInvisibleArea=function(){var e=this._retainScreenCount;this._retainScreenCount=0,this._utilizeHolders(!0),this._retainScreenCount=e},i._normalizeHolderPositions=function(){for(var e=this,t=this._getLayoutPositions(),n=this._getVisibleHolder(),o=this._getHolderComponent(n).getLayoutPosition(),a=t.indexOf(o),r=[o],i=o,c=a+1;c<t.length&&t[c]-i==1;c++)i=t[c],r.push(i);for(var s=o,p=a-1;p>=0&&s-t[p]==1;p--)s=t[p],r.push(s);t.filter(function(e){return!r.includes(e)}).forEach(function(t){var n=e._getHolderByPosition(t);n&&e._removeHolder(n)}),this._updateContentPosition(n)},i._removeHolder=function(e,t){void 0===t&&(t=!1);var n=this._getVisibleHolder([e]),o=this._getHolderComponent(e);this._adapter.onViewDetached(o),this._content.removeChild(e),o.isRecyclable()&&this._recycledHolders.push(e),t&&this._updateContentPosition(n)},i._getRecycledHolder=function(e){var t=this,n=this._recycledHolders.find(function(n){return t._getHolderComponent(n).getType()===e});if(n)return this._recycledHolders.splice(this._recycledHolders.indexOf(n),1),n},i._getHolderComponent=function(e){return e.getComponent(v.RecyclerScrollViewHolderComponent)},i._restrictPointToRetainArea=function(e){return null!==this._contentMaxPos&&e[this._coordinateKey]>this._contentMaxPos&&(e[this._coordinateKey]=Math.min(e[this._coordinateKey],this._contentMaxPos)),null!==this._contentMinPos&&e[this._coordinateKey]<this._contentMinPos&&(e[this._coordinateKey]=Math.max(e[this._coordinateKey],this._contentMinPos)),e},i._setLastScrollTime=function(){this._moveLastTime=(new Date).getTime()},i._setScrollRestrictions=function(){this._content[this._lengthKey]>0&&(this._contentMaxPos=this._content[this._lengthKey]/2-this.node[this._lengthKey]/2,this._contentMinPos=-(this._content[this._lengthKey]/2-this.node[this._lengthKey]/2),this._onScrollRestrict())},i._onScrollRestrict=function(){},i._unbindInputEvents=function(){this._scrollStrategy.unbindEvents()},i._addHolder=function(e,t){var n=this._getVisibleHolder(),o=this._getHolderComponent(t);o.setLayoutPosition(e),this._content.insertChild(t,this._getSiblingIndexForChildren(e)),this._updateContentPosition(n),this._adapter.onViewAttached(o)},i._getLayoutPositions=function(){var e=this;return this._content.children.map(function(t){return e._getHolderComponent(t).getLayoutPosition()})},i._getSiblingIndexForChildren=function(e){for(var t=this._getLayoutPositions(),n=0;n<=t.length;n++){var o=t[n-1],a=t[n];if(void 0===o&&(o=-1/0),void 0===a&&(a=1/0),o<e&&e<a)return n}},i._getHolderByPosition=function(e){return this._content.children[this._getLayoutPositions().indexOf(e)]},i._updateContentPosition=function(e){var t=this;if(e){var n=function(){return t._getNulledVec(t._content.convertToNodeSpaceAR(e.parent.convertToWorldSpaceAR(e.getPosition())))},o=n();this._contentLayout.updateLayout();var a=n();this._content.position=this._content.getPosition().add(a.sub(o).negSelf())}this._setScrollRestrictions()},i._getVisibleHolder=function(e){return void 0===e&&(e=[]),this._getVisibleHoldersInRect(this.node.getBoundingBox()).filter(function(t){return!e.includes(t)}).shift()},i._getVisibleHoldersInRect=function(e){var t=this;return this._content.children.filter(function(n){var o=t._getHolderBoundingBox(n);return e.contains(o)||o.contains(e)||e.intersects(o)||o.intersects(e)})},i._unbindFromCurrentAdapter=function(){this._adapter&&(this._adapter.remove(b.RecyclerScrollAdapter.EVENT_ITEM_REMOVED,this._onAdapterItemRemoved),this._adapter.remove(b.RecyclerScrollAdapter.EVENT_DATASET_CHANGED,this._onAdapterDatasetChanged))},i._onAdapterItemRemoved=function(e){this._observe=!1;var t=this._getLayoutPositions().indexOf(e),n=this._content.children[t];this._removeHolder(n,!0),this._content.children.slice(t).forEach(function(e){var t=e.getComponent(v.RecyclerScrollViewHolderComponent).getLayoutPosition();e.getComponent(v.RecyclerScrollViewHolderComponent).setLayoutPosition(t-1)}),this._observe=!0},i._onAdapterDatasetChanged=function(){var e=this,t=this._content.children;t.forEach(function(n,o){e._removeHolder(n,o===t.length-1)}),this._adapter.getItemCount()>0&&this.init()},i.setAdapter=function(e){this._adapter=e,this._adapter.on(b.RecyclerScrollAdapter.EVENT_ITEM_REMOVED,this._onAdapterItemRemoved,this),this._adapter.on(b.RecyclerScrollAdapter.EVENT_DATASET_CHANGED,this._onAdapterDatasetChanged,this)},i.init=function(e){return void 0===e&&(e=0),this._adapter.getItemCount()>0&&(this.renderViewAtPosition(Math.min(this._adapter.getItemCount()-1,e)),this._contentLayout.updateLayout()),Promise.resolve()},i.scrollToPosition=function(e,t){var n=this;return new Promise(function(o){var a=cc.moveTo(e,t).easing(cc.easeElasticInOut(5));n._content.runAction(cc.sequence([a,cc.callFunc(o)]))})},i.scrollToHolder=function(e,t){var n=this,o=void 0===t?{}:t,a=o.target,r=void 0===a?null:a,i=o.align,c=void 0===i?null:i,s=o.force,p=void 0!==s&&s,l=o.timeScale,m=void 0===l?1.2:l;this._disableUtilizer();var u,d,y=this._getHolderByPosition(e),f=!1;if(!y){var h=this._getVisibleHolder(),g=this._getHolderComponent(h).getLayoutPosition()>e?1:-1;u=e+g,d=e,this._getHolderByPosition(u)||(this.renderViewAtPosition(u,v.RecyclerScrollViewHolderComponent.VIEW_TYPE_PLACEHOLDER),f=!0),this.renderViewAtPosition(d,v.RecyclerScrollViewHolderComponent.VIEW_TYPE_REGULAR),y=this._getHolderByPosition(d)}if(y){var _=y.getPosition();if(r){var b=y.convertToNodeSpaceAR(r.parent.convertToWorldSpaceAR(r.getPosition()));_=_.add(b)}if(_=this._getNulledVec(_).negSelf(),c){if(_[this._coordinateKey]+=-c*(y[this._lengthKey]/2-this.node[this._lengthKey]/2),this._visibleRect){var C=this._visibleRect.getBoundingBoxToWorld(),w=c*((this.node[this._lengthKey]-C[this._lengthKey])/2)+this._visibleRect[this._coordinateKey];_[this._coordinateKey]+=c*w}}else this._setScrollRestrictions();var S=Math.abs(this._content[this._coordinateKey]-_[this._coordinateKey])/(this._scrollSpeed*this.node[this._lengthKey])*m;return this.scrollToPosition(p?0:S,_).then(function(){var e=n._getHolderByPosition(u);f&&e&&(n._removeHolder(e),n.renderViewAtPosition(u)),n._normalizeHolderPositions(),n._enableUtilizer()})}return Promise.resolve()},i.update=function(){this._update()},i._update=function(){var e=this._restrictPointToRetainArea(this._content.getPosition());e.equals(this._content.position)||(this._content.stopActionByTag("_inertia"),this._content.setPosition(e)),this._observe&&(this._renderVisibleArea(),this._utilizeHolders()),Math.abs(this._velocity)>.5&&this._processInertiaMove()},i._processInertiaMove=function(){var e=this._content.getPosition();e[this._coordinateKey]+=this._velocity,this._content.setPosition(this._restrictPointToRetainArea(e)),this._velocity-=.05*this._velocity},i._enableUtilizer=function(){this._utilizerEnabled=!0},i._disableUtilizer=function(){this._utilizerEnabled=!1},i._enableScrollRestriction=function(){this._scrollRestrictionEnabled=!0},i._disableScrollRestriction=function(){this._scrollRestrictionEnabled=!1},i._isInverted=function(){return this._contentLayout.type===cc.Layout.Type.HORIZONTAL?this._contentLayout.horizontalDirection===cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._contentLayout.type===cc.Layout.Type.VERTICAL?this._contentLayout.verticalDirection===cc.Layout.VerticalDirection.TOP_TO_BOTTOM:void 0},i.onDestroy=function(){cc.sys.isBrowser&&document.getElementsByTagName("body")[0].removeEventListener("mouseenter",this._mouseEnterListener),this._unbindFromCurrentAdapter()},i.run=function(){var e=this;return this._observe=!0,this._setScrollRestrictionOnRun&&this._setScrollRestrictions(),new Promise(function(t){return e._runPromiseResolver=t})},a=o,(r=[{key:"_scrollDirection",get:function(){return this._contentLayout.type}},{key:"_content",get:function(){return this._layout.node}},{key:"_contentLayout",get:function(){return this._layout}},{key:"_coordinateKey",get:function(){var e;return((e={})[cc.Layout.Type.HORIZONTAL]="x",e[cc.Layout.Type.VERTICAL]="y",e)[this._scrollDirection]}},{key:"_lengthKey",get:function(){var e;return((e={})[cc.Layout.Type.HORIZONTAL]="width",e[cc.Layout.Type.VERTICAL]="height",e)[this._scrollDirection]}}])&&w(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),u=x(m.prototype,"_retainScreenCount",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=x(m.prototype,"_holderThreshold",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=x(m.prototype,"_scrollSpeed",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=x(m.prototype,"_layout",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=x(m.prototype,"_visibleRect",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=x(m.prototype,"_setScrollRestrictionOnRun",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=m))||l)||l);n.RecyclerScrollViewComponent=P,P.TOUCH_DELTA_COUNT=5,cc._RF.pop()},{"./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)":"RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)","./RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"}],"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0b8bbt05RVOPrLByJeZY4+a","RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),n.__esModule=!0,n.RecyclerScrollViewHolderComponent=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("UI-Kit/ScrollView/RecyclerScrollViewHolderComponent")(o=function(e){var t,n;function o(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this)._isRecyclable=!0,t._bindingAdapterPosition=null,t._layoutPosition=null,t._type=o.VIEW_TYPE_REGULAR,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.setIsRecyclable=function(e){this._isRecyclable=e},r.isRecyclable=function(){return this._isRecyclable},r.getLayoutPosition=function(){return this._layoutPosition},r.setLayoutPosition=function(e){this._layoutPosition=e},r.resetLayoutPosition=function(){return this._layoutPosition=null},r.getBindingAdapterPosition=function(){return this._bindingAdapterPosition},r.setBindingAdapterPosition=function(e){this._bindingAdapterPosition=e},r.resetBindingAdapterPosition=function(){this._bindingAdapterPosition=null},r.getType=function(){return this._type},r.setType=function(e){this._type=e},o}(cc.Component))||o)||o;n.RecyclerScrollViewHolderComponent=i,i.VIEW_TYPE_REGULAR=0,i.VIEW_TYPE_PLACEHOLDER=1,cc._RF.pop()},{}],"ReduceCounterComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"1f59d04oLJXFYTN6vgzQxG5","ReduceCounterComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ReduceCounterComponent=void 0;var a=function(e){var t,n;function a(){var t;return t=e.call(this)||this,console.warn("ReduceCounterComponent is deprecated, use ReduceCounterOnTurn instead."),t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ReduceCounterComponent=a,a.KEY="reduceCounter",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"efe09Mn4zlaXpo/FVg+EdD2","ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ReduceCounterOnTurnComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ReduceCounterOnTurnComponent=a,a.KEY="reduceCounterOnTurn",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"c61c8DFLJNZ7ZUYeGacfmqg","ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"),n.__esModule=!0,n.ReduceCounterOnTurnStrategy=void 0;var o=e("./UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"),a=e("./CounterComponent (@tapclap.match-x.engine.components)"),r=e("./ReduceCounterComponent (@tapclap.match-x.engine.components)"),i=e("./ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n,o=t.world,a=t.stateKeys,r=void 0===a?[]:a;return(n=e.call(this,o)||this)._stateKeys=r,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.updateOnProcess=function(){var e=this,t=this._world.getEnabledComponent("tiles").grid,n=this._stateKeys.every(function(t){return e._world.getState(t)});if(t&&n){for(var s=[],p=0;p<t.rows;p++)for(var l=0;l<t.cols;l++){var m=t.getCell(p,l);if(m)for(var u,d=c(m.entities);!(u=d()).done;){var y=u.value,f=y.getEnabledComponent(a.CounterComponent.KEY),h=y.getEnabledComponent(i.ReduceCounterOnTurnComponent.KEY);h||(h=y.getEnabledComponent(r.ReduceCounterComponent.KEY)),f&&h&&(s.push(y),f.setValue(f.getValue()-f.step))}}if(this._world.setState(o.STATE,s),s.length>0)return!0}},o}(o.UpdateCounterStrategy);n.ReduceCounterOnTurnStrategy=m,m.STATE="reduceCounterOnTurn",cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./ReduceCounterComponent (@tapclap.match-x.engine.components)":"ReduceCounterComponent (@tapclap.match-x.engine.components)","./ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)":"ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)","./UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)":"UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"}],"ReduceHealthComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"dea8aqPq/xWobrWUIzgZVK2","ReduceHealthComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReduceHealthComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ReduceHealthComponent=r,r.KEY="reduceHealth",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"3c679y0T0ZSLaPwuABZOROq","ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)"),n.__esModule=!0,n.ReduceHealthHandler=void 0;var o=e("./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)"),a=e("./HealthComponent (@tapclap.match-x.engine.components)"),r=e("./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)"),i=e("./ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)"),c=e("./ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)"),s=e("./CellHealthComponent (@tapclap.match-x.engine.components)"),p=e("./SizeComponent (@tapclap.match-x.engine.components)");function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var m=o.prototype;return m._explode=function(e,t){var n=t.getEnabledComponent(a.HealthComponent.KEY),o=t.getEnabledComponent(s.CellHealthComponent.KEY);if(t.getEnabledComponent(i.ReduceHealthOnExplodeComponent.KEY)){if(n&&n.getValue()-1>=n.getMinValue())return n.setValue(n.getValue()-1),!0;if(o){var r=t.getComponent(p.SizeComponent.KEY);if(r){var c=r.area.indexOf(e),l=[].concat(o.getValues());return l[c]=Math.max(0,l[c]-1),o.setValues(l),!0}}}},m._blast=function(e,t){var n=t.getEnabledComponent(a.HealthComponent.KEY),o=t.getEnabledComponent(s.CellHealthComponent.KEY),i=t.getEnabledComponent(r.ExplodeOnBlastComponent.KEY),l=t.getEnabledComponent(c.ReduceHealthOnBlastComponent.KEY);if(n&&l&&i)return n.setValue(n.getValue()-1),!0;if(o){var m=t.getComponent(p.SizeComponent.KEY);if(m){var u=m.area.indexOf(e),d=[].concat(o.getValues());return d[u]=Math.max(0,d[u]-1),o.setValues(d),!0}}},o}(o.ExplodeHandler);n.ReduceHealthHandler=m,cc._RF.pop()},{"./CellHealthComponent (@tapclap.match-x.engine.components)":"CellHealthComponent (@tapclap.match-x.engine.components)","./ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)":"ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)","./ExplodeOnBlastComponent (@tapclap.match-x.engine.components)":"ExplodeOnBlastComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)","./ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)":"ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)","./SizeComponent (@tapclap.match-x.engine.components)":"SizeComponent (@tapclap.match-x.engine.components)"}],"ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"73069b6qcFZ9r6U3kYNvhAa","ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReduceHealthOnBlastComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="reduceHealthOnBlast",t}(e("./ReduceHealthComponent (@tapclap.match-x.engine.components)").ReduceHealthComponent);n.ReduceHealthOnBlastComponent=r,cc._RF.pop()},{"./ReduceHealthComponent (@tapclap.match-x.engine.components)":"ReduceHealthComponent (@tapclap.match-x.engine.components)"}],"ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a9ec6nbwE1bd4fnOu0c/NQq","ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReduceHealthOnCombinationInCellComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="reduceHealthOnCombinationInCell",t}(e("./ReduceHealthComponent (@tapclap.match-x.engine.components)").ReduceHealthComponent);n.ReduceHealthOnCombinationInCellComponent=r,cc._RF.pop()},{"./ReduceHealthComponent (@tapclap.match-x.engine.components)":"ReduceHealthComponent (@tapclap.match-x.engine.components)"}],"ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"fb1beFp4vJakasM8D1m+O0R","ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReduceHealthOnCombinationNeighborComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="reduceHealthOnCombinationNeighbor",t}(e("./ReduceHealthComponent (@tapclap.match-x.engine.components)").ReduceHealthComponent);n.ReduceHealthOnCombinationNeighborComponent=r,cc._RF.pop()},{"./ReduceHealthComponent (@tapclap.match-x.engine.components)":"ReduceHealthComponent (@tapclap.match-x.engine.components)"}],"ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f97a6DPOFRSMpJHTbbt6Nca","ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReduceHealthOnExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="reduceHealthOnExplode",t}(e("./ReduceHealthComponent (@tapclap.match-x.engine.components)").ReduceHealthComponent);n.ReduceHealthOnExplodeComponent=r,cc._RF.pop()},{"./ReduceHealthComponent (@tapclap.match-x.engine.components)":"ReduceHealthComponent (@tapclap.match-x.engine.components)"}],"RelativeRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2f243N0UIdT+6ET3XOTmLrs","RelativeRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.RelativeRetriever=void 0;var a=function(e){var t,n;function a(t){var n,o=t.cell;return(n=e.call(this)||this)._cell=o,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.RelativeRetriever=a,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"RemoteConfigService (@tapclap.game-kit.config-service)":[function(e,t,n){"use strict";cc._RF.push(t,"5e267JjROJYyZeqTRmQ0i+j","RemoteConfigService (@tapclap.game-kit.config-service)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteConfigService=void 0;var s=c(e("./Fetch (@tapclap.utils-js.fetch)")),p=c(e("merge-options")),l=function(e){function t(t,n){void 0===n&&(n={});var o=e.call(this,n)||this;return o._url=t,o}return a(t,e),t.prototype._fetchConfig=function(){return r(this,void 0,Promise,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.default(this._url)];case 1:return(e=n.sent()).ok?[2,e.json()]:[2,{}];case 2:throw n.sent(),t="Cannot load config "+this._url,cc.error(t),new Error(t);case 3:return[2]}})})},t.prototype.init=function(){return r(this,void 0,Promise,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this._fetchConfig()];case 1:return e=t.sent(),this._config=p.default({},this._config,e),[2]}})})},t}(e("./ConfigService (@tapclap.game-kit.config-service)").ConfigService);n.RemoteConfigService=l,cc._RF.pop()},{"./ConfigService (@tapclap.game-kit.config-service)":"ConfigService (@tapclap.game-kit.config-service)","./Fetch (@tapclap.utils-js.fetch)":"Fetch (@tapclap.utils-js.fetch)","merge-options":3}],"RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"2c0a93LNhVXUqWNM4UO8Qf0","RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveEntityByGroupEffect=void 0;var i=e("./RemoveEntityEffect (@tapclap.match-x.engine.effects)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=e("./RetrieverFactory (@tapclap.match-x.engine.retrievers)"),p=function(e){function t(t){var n=e.call(this,t)||this;return n._retrieverFactory=t.retrieverFactory,n}return a(t,e),t.prototype.apply=function(e){var t,n,o=this._options,a=o.grid,i=o.cell;if(a&&i){var p=[];if(this._canApplyEffect(i)){var l=this._retrieverFactory.createRetriever(s.RetrieverFactory.RETRIEVER_GROUP,Object.assign({cell:i})).retrieve(a);try{for(var m=r(l.flat()),u=m.next();!u.done;u=m.next()){var d=u.value;this._canApplyEffect(d)&&p.push({cell:d,input:this._options})}}catch(y){t={error:y}}finally{try{u&&!u.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}if(p.length)return e.pushState(c.ExplodeSystem.DO_STATE_KEY,p),!0}}return!1},t}(i.RemoveEntityEffect);n.RemoveEntityByGroupEffect=p,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./RemoveEntityEffect (@tapclap.match-x.engine.effects)":"RemoveEntityEffect (@tapclap.match-x.engine.effects)","./RetrieverFactory (@tapclap.match-x.engine.retrievers)":"RetrieverFactory (@tapclap.match-x.engine.retrievers)"}],"RemoveEntityEffect (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"0ab77TQM4Va7YYF1A5kQ75H","RemoveEntityEffect (@tapclap.match-x.engine.effects)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveEntityEffect=void 0;var r=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){var t=this._options.cell;return!(!t||!this._canApplyEffect(t)||(e.pushState(r.ExplodeSystem.DO_STATE_KEY,{cell:t,input:this._options,affectedByBooster:this._options.name}),0))},t}(e("./Effect (@tapclap.match-x.engine.effects)").Effect);n.RemoveEntityEffect=i,cc._RF.pop()},{"./Effect (@tapclap.match-x.engine.effects)":"Effect (@tapclap.match-x.engine.effects)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"}],"RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)":[function(e,t,n){"use strict";cc._RF.push(t,"fe03fuD3MNf7os+9OlIvil7","RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveEntityInColumnEffect=void 0;var r=e("./RemoveEntityEffect (@tapclap.match-x.engine.effects)"),i=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){var t=this._options.grid;if(t){for(var n=[],o=0;t.rows>o;o++){var a=t.getCell(o,this._options.cell.col);this._canApplyEffect(a)&&n.push({cell:a,input:this._options})}if(n.length)return e.pushState(i.ExplodeSystem.DO_STATE_KEY,n),!0}},t}(r.RemoveEntityEffect);n.RemoveEntityInColumnEffect=c,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./RemoveEntityEffect (@tapclap.match-x.engine.effects)":"RemoveEntityEffect (@tapclap.match-x.engine.effects)"}],"RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"28ead4P5kpUNoJsNPDnBmx9","RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveNeighborsOnWalkComponent=void 0;var r=function(e){function t(t){var n=(void 0===t?{asSquare:!1}:t).asSquare,o=e.call(this)||this;return o._asSquare=n,o}return a(t,e),Object.defineProperty(t.prototype,"asSquare",{get:function(){return this._asSquare},enumerable:!1,configurable:!0}),t.KEY="removeNeighborsOnWalk",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.RemoveNeighborsOnWalkComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"8a956faBn9Qnp58PBruc6xf","RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveNeighborsOnWalkSystemHandler=void 0;var c=e("./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)"),s=e("./RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"stateKey",{get:function(){return t.KEY},enumerable:!1,configurable:!0}),t.prototype.handle=function(e){var t,n,o,a,p=[];try{for(var l=r(e),m=l.next();!m.done;m=l.next()){var u=m.value,d=u.grid,y=u.targetCell,f=u.entity,h=f.getComponentByClass(s.RemoveNeighborsOnWalkComponent);if(h){var g=[],v=[[0,-1],[1,0],[0,1],[-1,0]];h.asSquare&&v.push([-1,-1],[1,-1],[1,1],[-1,1]);try{for(var _=(o=void 0,r(v)),b=_.next();!b.done;b=_.next()){var C=i(b.value,2),w=C[0],S=C[1],E=w+y.row,x=S+y.col;if(d.isContain(E,x)){var A=d.getCell(E,x),O=A.getEntity();O&&O.getEnabledComponentByClass(c.CanBeReplacedByWalkComponent)&&(g.push({cell:A,entity:O}),A.setEntity(null,O.layer))}}}catch(R){o={error:R}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}p.push({initiatorEntry:{entity:f,cell:y},targetEntries:g})}}}catch(P){t={error:P}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return p},t.KEY="removeNeighborsOnWalk",t}(e("./RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)").RemoveOnWalkSystemHandler);n.RemoveNeighborsOnWalkSystemHandler=p,cc._RF.pop()},{"./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)","./RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)":"RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)","./RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)":"RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)"}],"RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"ae178UjI7lSbYlwGcm75wkC","RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveOnWalkAnimationBuilder=void 0;var i=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),l=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var t,n,o=[],a=(null==e?void 0:e.data)||[],p=function(e,t){var n=new l.ChainAnimation([new u.GroupAnimation(t.map(function(t,n){var o=t.entity.getComponentByClass(s.RenderComponent).node,a=e.getComponentByClass(s.RenderComponent).node;return new m.FunctionAnimation(function(){return new i.ActionAnimation(cc.sequence([cc.delayTime(n/20),cc.scaleTo(.1,1.2),cc.callFunc(function(){return o.zIndex++}),cc.spawn([cc.moveTo(.2,a.getPosition()),cc.scaleTo(.2,0)]),cc.callFunc(function(){return o.destroy()})]),o).run()})}))]);o.push(new c.AnimationData(e,n))};try{for(var d=r(a),y=d.next();!y.done;y=d.next()){var f=y.value;p(f.initiatorEntry.entity,f.targetEntries)}}catch(h){t={error:h}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return[o]},t}(p.GameActionBuilder);n.RemoveOnWalkAnimationBuilder=d,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b833feXH8NUs4zOsDbNG+TZ","RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveOnWalkSystem=void 0;var i=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),c=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)"),s=function(e){function t(t){var n=t.world,o=t.handlers,a=e.call(this)||this;return a._world=n,a._handlers=o,a}return a(t,e),t.prototype.process=function(){var e,n,o,a=(null===(o=this._world.getState(c.WalkSystem.STATE))||void 0===o?void 0:o.data)||[],i=!1;try{for(var s=r(this._handlers),p=s.next();!p.done;p=s.next()){var l=p.value,m=l.handle(a);m.length>0&&(this._world.setState(t.STATE+":"+l.stateKey,m),i=!0)}}catch(u){e={error:u}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i},t.KEY="RemoveOnWalkSystem",t.STATE="RemoveOnWalkSystemState",t}(i.PipelineProcessSystem);n.RemoveOnWalkSystem=s,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)"}],"RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"0fcd0SnV15YYahlRvIZMhnn","RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.RemoveOnWalkSystemHandler=void 0;n.RemoveOnWalkSystemHandler=function(){},cc._RF.pop()},{}],"RemoveSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"cbba8VlJOFRR4T6Q0yQPjvl","RemoveSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.RemoveSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./SizeComponent (@tapclap.match-x.engine.components)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.process=function(){var e=this._world.getState(a.ExplodeSystem.STATE);if(e&&e.data)for(var t,n=i(e.data.flat());!(t=n()).done;){var c=t.value,s=c.cell,p=c.entity;if(c.remove){var l=[],m=p.getEnabledComponent(r.SizeComponent.KEY);m?l.push.apply(l,m.area):l.push(s);for(var u=0,d=l;u<d.length;u++)d[u].setEntity(null,p.layer);this._world.pushState(o.STATE,{cell:s,entity:p})}}return!1},o}(o.PipelineProcessSystem);n.RemoveSystem=l,l.KEY=Symbol("RemoveSystem.KEY"),l.STATE=Symbol("RemoveSystem.STATE"),cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./SizeComponent (@tapclap.match-x.engine.components)":"SizeComponent (@tapclap.match-x.engine.components)"}],"RenderComponent (@tapclap.match-x.engine.components.render)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ff36bjwmzpYYac8HF+aKn1Y","RenderComponent (@tapclap.match-x.engine.components.render)"),n.__esModule=!0,n.RenderComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=void 0===t?{}:t,a=o.type,r=void 0===a?"entity":a,i=o.decorators,c=void 0===i?[]:i;return(n=e.call(this)||this)._type=r,n._node=null,n._decorators=c,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"type",get:function(){return this._type}},{key:"decorators",get:function(){return this._decorators}},{key:"node",get:function(){return this._node},set:function(e){this._node=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.RenderComponent=r,r.KEY="render",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"RenderSystem (@tapclap.match-x.engine.systems.render-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b4e6b8Y6vNRBLwNJkbcxLxQ","RenderSystem (@tapclap.match-x.engine.systems.render-system)"),n.__esModule=!0,n.RenderSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._world=t,o._renderPipeline=n,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r.setRenderPipeline=function(e){this._renderPipeline=e},r.render=function(e){void 0===e&&(e=!1);var t=this._world.getEnabledComponent("state");if(t)for(var n,a=o(t.states);!(n=a()).done;){var r=n.value,i=this._renderPipeline[r.type];i&&i.render(r),e&&this._world.removeState(r.type)}},r.process=function(){return this.render(),!1},r.postProcess=function(){this.render()},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.RenderSystem=c,c.KEY="render",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"Renderer (@tapclap.match-x.engine.systems.render-system)":[function(e,t,n){"use strict";cc._RF.push(t,"416dbmE3+VYDavloDWG2oJG","Renderer (@tapclap.match-x.engine.systems.render-system)"),n.__esModule=!0,n.Renderer=void 0;var o=function(){function e(){}return e.prototype.render=function(){throw new Error("Method not implemented")},e}();n.Renderer=o,cc._RF.pop()},{}],"ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"7837ft8UL1cvIZu/bBBUrgS","ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceConfigWindowsAppLoaderHandler=void 0;var c=e("./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t,n,o=this,a=e,s=(new c.PrefabResourceExtractor).extract(e),p=new Map,l=[],m=function(e){var t=r(e.split("/")),n=t[0],a=t.slice(1).join("/"),i=Promise.resolve().then(function(){return o._getBundle(n)}).then(function(e){return o._getResourcePath(e,o._getModifiedResourcePath(a),a)}).then(function(e){return p.set(n+"/"+a,n+"/"+e)});l.push(i)};try{for(var u=i(s),d=u.next();!d.done;d=u.next())m(d.value)}catch(y){t={error:y}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return Promise.all(l).then(function(){return o._replaceConfig(a,p)})},t.prototype._getBundle=function(e){return new Promise(function(t,n){var o=cc.assetManager.getBundle(e);o?t(o):cc.assetManager.loadBundle(e,function(e,o){e?n(e):t(o)})})},t.prototype._getModifiedResourcePath=function(e){return e},t.prototype._getResourcePath=function(e,t,n){return void 0===n&&(n=null),e.getInfoWithPath(t)?t:n?this._getResourcePath(e,n):void 0},t.prototype._replaceConfig=function(e,t){var n,o,a,c=this;if("string"==typeof e&&t.has(e))return e.replace(e,t.get(e));if(Array.isArray(e))return e.map(function(e){return c._replaceConfig(e,t)});if(e instanceof Object){var s=Object.assign({},e);try{for(var p=i(Object.entries(s)),l=p.next();!l.done;l=p.next()){var m=r(l.value,2),u=m[0],d=m[1],y=this._replaceConfig(d,t);void 0!==y&&Object.assign(s,((a={})[u]=y,a)),void 0===y&&delete s[u]}}catch(f){n={error:f}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return s}return e},t}(e("./WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)").WindowsAppLoaderHandler);n.ReplaceConfigWindowsAppLoaderHandler=s,cc._RF.pop()},{"./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)":"PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)","./WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)":"WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)"}],"ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"d4323yk3uhT5bSI/1FS0kSF","ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntityByEntityAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),l=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),d=function(e){function t(t){var n=t.triggers,o=void 0===n?[]:n,a=t.fadeOutDuration,r=void 0===a?.75:a,i=t.fadeInDuration,c=void 0===i?.5:i,s=e.call(this)||this;return s._triggers=new Set(o),s._fadeOutDuration=r,s._fadeInDuration=c,s}return a(t,e),t.prototype.build=function(e){var t,n,o=[];if(null==e?void 0:e.data){var a=function(e,t,n,a){if(i._triggers.has(a)){var r=e.getComponentByClass(u.RenderComponent).node,d=t.getComponentByClass(u.RenderComponent).node,y=n.getComponentByClass(u.RenderComponent).node;d.opacity=0,d.setPosition(y.position);var f=new s.ChainAnimation([new l.FunctionAnimation(function(){return d.zIndex=r.zIndex++}),new m.GroupAnimation([new p.ActionAnimation(cc.fadeOut(i._fadeOutDuration/2),r),new p.ActionAnimation(cc.fadeIn(i._fadeInDuration/2),d)],!0),new l.FunctionAnimation(function(){return r.destroy()})]);o.push(new c.AnimationData(t,f))}},i=this;try{for(var d=r(e.data),y=d.next();!y.done;y=d.next()){var f=y.value;a(f.prevEntity,f.entity,f.cell,f.trigger)}}catch(h){t={error:h}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}}return[o]},t}(i.GameActionBuilder);n.ReplaceEntityByEntityAnimationBuilder=d,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ReplaceEntityComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b09caCclgdUa688di9/xnnW","ReplaceEntityComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntityComponent=void 0;var r=function(e){function t(t){var n=t.layers,o=t.strategy,a=e.call(this)||this;return a._layers=n,a._strategy=o,a}return a(t,e),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strategy",{get:function(){return this._strategy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strategyOptions",{get:function(){return this._strategyOptions},enumerable:!1,configurable:!0}),t.KEY="replaceEntity",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ReplaceEntityComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f5d1bDVnCVfN6dYPwdRsP8u","ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntityOnTurnEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="replaceEntityOnTurnEnd",t}(e("./ReplaceEntityComponent (@tapclap.match-x.engine.components)").ReplaceEntityComponent);n.ReplaceEntityOnTurnEndComponent=r,cc._RF.pop()},{"./ReplaceEntityComponent (@tapclap.match-x.engine.components)":"ReplaceEntityComponent (@tapclap.match-x.engine.components)"}],"ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)":[function(e,t,n){"use strict";cc._RF.push(t,"94b04N9InxdfKJHd/7EYqPB","ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntityOnTurnEndSystem=void 0;var i=e("./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.skipOnStates,o=t.startOnStates,a=r(t,["skipOnStates","startOnStates"]),i=e.call(this,a)||this;return i._canProcessing=!1,i._processed=!1,i._startOnStates=o,i._skipOnStates=n,i}return a(t,e),t.prototype.process=function(){var t=this;if(!this._processed&&(this._canProcessing||(this._canProcessing=this._startOnStates.some(function(e){var n;return null===(n=t._world.getState(e))||void 0===n?void 0:n.data})),this._canProcessing&&this._skipOnStates.every(function(e){var n;return!(null===(n=t._world.getState(e))||void 0===n?void 0:n.data)})))return this._processed=!0,e.prototype.process.call(this)},t.prototype.postProcess=function(){this._canProcessing=!1,this._processed=!1},t.prototype._getComponentClass=function(){return i.ReplaceEntityOnTurnEndComponent},t.KEY="replaceEntityOnTurnEnd",t}(e("./ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)").ReplaceEntitySystem);n.ReplaceEntityOnTurnEndSystem=c,cc._RF.pop()},{"./ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)":"ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)","./ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)":"ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)"}],"ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)":[function(e,t,n){"use strict";cc._RF.push(t,"6d3f8tbBqJTGJfOuwMa36tq","ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntitySystem=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.world,o=t.strategyFactory,a=e.call(this)||this;return a._world=n,a._strategyFactory=o,a}return a(t,e),t.prototype.process=function(){var e,n,o=this,a=[];try{for(var c=r(this._world.getComponentsByClass(i.GridComponent)),s=c.next();!s.done;s=c.next())s.value.grid.forEachEntities(function(e,t){var n=o._processEntity(e,t);n&&a.push(n)})}catch(p){e={error:p}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a.length>0&&(this._world.setState(t.STATE,a),!0)},t.prototype._processEntity=function(e,t){var n,o,a=e.getEnabledComponentByClass(this._getComponentClass());if(a){var i=a.strategy,c=a.strategyOptions,s=a.layers;if(s.length>0)try{for(var p=r(s),l=p.next();!l.done;l=p.next()){var m=l.value,u=t.getEntity(m);if(u){var d=this._strategyFactory.create(i,c).process(t,u);if(d)return Object.assign(d,{initiatorCell:u,initiatorEntity:u})}}}catch(y){n={error:y}}finally{try{l&&!l.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}}},t.KEY="replaceEntity",t.STATE="replaceEntity",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ReplaceEntitySystem=c,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)":[function(e,t,n){"use strict";cc._RF.push(t,"73e32HeLYRbeqg5lhpw9VhO","ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceEntitySystemStrategy=void 0;n.ReplaceEntitySystemStrategy=function(){},cc._RF.pop()},{}],"ReplaceOfferStrategy (@tapclap.game-kit.offer-manager.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"150b9IcxRxV3Iz+mBJZOcQl","ReplaceOfferStrategy (@tapclap.game-kit.offer-manager.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceOfferStrategy=void 0;var r=function(e){function t(t){var n=t.factory,o=t.replaceOffers,a=void 0===o?[]:o,r=t.replaceMap,i=void 0===r?{}:r,c=e.call(this)||this;return c._rawOffers=[],c._rawReplaceOffers=[],c._rawReplaceOffers=a,c._factory=n,c._replaceMap=i,c}return a(t,e),t.prototype.replaceOffers=function(e){var t=this;return e.map(function(e){return e.map(function(e){if(t._replaceMap[e.id]){var n=t._replaceOffers.find(function(n){return n.id===t._replaceMap[e.id]});if(n)return n}return e})})},t.prototype.init=function(){var e=this;return this._replaceOffers=this._rawReplaceOffers.map(function(t){return e._factory.create(t)}),Promise.resolve()},t}(e("./OfferStrategy (@tapclap.game-kit.offer-manager)").OfferStrategy);n.ReplaceOfferStrategy=r,cc._RF.pop()},{"./OfferStrategy (@tapclap.game-kit.offer-manager)":"OfferStrategy (@tapclap.game-kit.offer-manager)"}],"ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"dbca20tgfJW36nSHSaShYxF","ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ReplaceWalkReplaceStrategy=void 0;var r=e("./AllowWalkComponent (@tapclap.match-x.engine.components)"),i=e("./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isValidCell=function(e,t){var n=e.getEntity(t.layer);return!!n&&!!n.getComponentByClass(i.CanBeReplacedByWalkComponent)&&!!n.getComponentByClass(r.AllowWalkComponent)},t.KEY="replace",t}(e("./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)").EmptyWalkReplaceStrategy);n.ReplaceWalkReplaceStrategy=c,cc._RF.pop()},{"./AllowWalkComponent (@tapclap.match-x.engine.components)":"AllowWalkComponent (@tapclap.match-x.engine.components)","./CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)":"CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)","./EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"}],"RequestLivesMessageEventHandler (scripts.message-center.event-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"ca0ef/QPz1T3a62dR0tR2af","RequestLivesMessageEventHandler (scripts.message-center.event-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RequestLivesMessageEventHandler=void 0;var r=e("./MessageEventHandler (scripts.message-center.event-handlers)"),i=e("./Message (@tapclap.game-kit.message-center)"),c=e("./CandyvalleyMessageHandler (scripts.message-center)"),s=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),p=function(e){function t(t){var n=t.socialService,o=t.socialRequest,a=t.messageCenter,r=t.userManager,i=t.requestWrapper,c=e.call(this)||this;return c._socialAdapter=n.getCurrentAdapter(),c._socialRequest=o,c._messageCenter=a,c._requestWrapper=i,c._user=r.getCurrentUser(),c}return a(t,e),t.prototype.handle=function(e){var t=this,n=e.data,o=e.view;return Promise.resolve().then(function(){return o.setState(s.MessageItemComponent.STATE_DISABLED)}).then(function(){var e=t._socialAdapter.sendRequest(t._socialRequest,{ids:[n.user.id]});return t._requestWrapper.wrap(e).catch(function(e){throw console.error("socialAdapter.sendRequest",e),e})}).then(function(){return t._messageCenter.send([new i.Message({userFrom:t._user.id,userTo:n.user.id,type:c.CandyvalleyMessageHandler.MESSAGE_REQUEST,updatedAt:(new Date).getMilliseconds()})]).catch(function(e){throw console.error("messageCenter.send",e),e})}).catch(function(){return o.setState(s.MessageItemComponent.STATE_DEFAULT)})},t}(r.MessageEventHandler);n.RequestLivesMessageEventHandler=p,cc._RF.pop()},{"./CandyvalleyMessageHandler (scripts.message-center)":"CandyvalleyMessageHandler (scripts.message-center)","./Message (@tapclap.game-kit.message-center)":"Message (@tapclap.game-kit.message-center)","./MessageEventHandler (scripts.message-center.event-handlers)":"MessageEventHandler (scripts.message-center.event-handlers)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)"}],"ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)":[function(e,t,n){"use strict";cc._RF.push(t,"1e11bRSlkFVtZpfOMZeBT8y","ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)"),n.__esModule=!0,n.ResetDefaultStrategy=void 0;var o=e("./ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)"),a=e("./ResetSystem (@tapclap.match-x.engine.systems.reset-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t,n,o){var a;return void 0===n&&(n=[]),(a=e.call(this,t,n)||this)._componentKey=o,a}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.execute=function(){var e=this,t=this._world.getState(a.ResetSystem.STATE);if(t&&t.data)for(var n,o=r(t.data.filter(function(t){return t.componentKey===e._componentKey}));!(n=o()).done;){var i=n.value;this.applyComponentData(i)}},o}(o.ResetSystemStrategy);n.ResetDefaultStrategy=p,cc._RF.pop()},{"./ResetSystem (@tapclap.match-x.engine.systems.reset-system)":"ResetSystem (@tapclap.match-x.engine.systems.reset-system)","./ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)":"ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)"}],"ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"89feb3qqyFUjoYykG369TZA","ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ResetModulesAction=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._moduleResolvers=t.moduleResolvers,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.run=function(){for(var e,t=o(this._moduleResolvers);!(e=t()).done;){var n=e.value.get();n&&n.resetState()}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.ResetModulesAction=c,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b8cffA5u29erK3x4KBHvAoX","ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ResetOfferStateAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._offers=t.offersModuleResolver.get(),n._offerKey=t.offerKey,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._offerKey&&this._offers&&this._offers&&this._offers.resetState(this._offerKey),e.prototype.run.call(this)},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.ResetOfferStateAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ResetSystem (@tapclap.match-x.engine.systems.reset-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9e78360fEhdyZxdAymxeHTo","ResetSystem (@tapclap.match-x.engine.systems.reset-system)"),n.__esModule=!0,n.ResetSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._strategies=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.process=function(){var e=this._world.getState(a.STATE);if(e&&e.data)for(var t,n=o(this._strategies);!(t=n()).done;){var r=t.value;r.canExecute&&r.execute(e)}},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ResetSystem=c,c.KEY="reset",c.STATE="reset",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"84fbaISeARTB4zGPZIs1lDd","ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)"),n.__esModule=!0,n.ResetSystemStrategy=void 0;var a=function(){function e(e,t){void 0===t&&(t=[]),this._world=e,this._stateKeys=t}var t,n,a=e.prototype;return a.execute=function(){throw new Error('Method "execute" not overrided')},a.applyComponentData=function(e){var t=e.entity.getComponent(e.componentKey);for(var n in e.data)t[n]=e.data[n]},t=e,(n=[{key:"canExecute",get:function(){var e=this;return!this._stateKeys.find(function(t){return e._world.getState(t)})}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.ResetSystemStrategy=a,cc._RF.pop()},{}],"ResizeCanvasToFrameSizeComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"cfa92i25JpSpIwR3ezDpwr1","ResizeCanvasToFrameSizeComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,p=c.menu,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){cc.sys.isBrowser&&(window.onresize=this._update.bind(this)),this._update()},t.prototype._update=function(){var e=cc.view.getCanvasSize(),t=e.width,n=e.height,o=i([cc.view.getScaleX(),cc.view.getScaleY()],2),a=o[0],r=o[1];this.node.width=1*t/a,this.node.height=1*n/r},t.prototype.update=function(){this._update()},r([s,p("Responsive/ResizeCanvasToFrameSize")],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],"ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)":[function(e,t,n){"use strict";cc._RF.push(t,"b92e82sohZOR5NSsv2nF1TE","ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)"),n.__esModule=!0,n.ResizeChildViewComponent=void 0;var o,a,r,i,c,s,p=e("./ViewComponent (@tapclap.match-x.cocos.components)");function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=m(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=cc._decorator,v=g.ccclass,_=g.property,b=(o=_({visible:!0}),a=_({visible:!0,type:[cc.Node]}),v((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_fit",c,y(t)),d(t,"_ignoreNodes",s,y(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=o.prototype;return a.onLoad=function(){this.node.on(cc.Node.EventType.CHILD_ADDED,this.resizeChild.bind(this)),this.resizeChild()},a.resizeChild=function(){for(var e,t=this,n=this.node.getContentSize(),o={width:n.width,height:n.height},a=function(){var n=e.value,a=n.getContentSize(),r=a.width,i=a.height;if(r>o.width||i>o.height||t._fit){var c,s={width:r/i,height:i/r},p=s.width>1?"width":"height",l=s.width>1?"height":"width",m=((c={})[p]=o[p],c[l]=o[p]*s[l],c);Object.entries(m).forEach(function(e){var t=e[0],o=e[1];return n[t]=o})}},r=l(this.node.children.filter(function(e){return!t._ignoreNodes.includes(e)}));!(e=r()).done;)a()},a.update=function(){this.resizeChild()},o}(p.ViewComponent),c=h(i.prototype,"_fit",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=h(i.prototype,"_ignoreNodes",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=i))||r);n.ResizeChildViewComponent=b,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"ResizeInProportionToTargetComponent (scripts.responsive)":[function(e,t,n){"use strict";cc._RF.push(t,"5bda2jYj8lTvaopefd8P94W","ResizeInProportionToTargetComponent (scripts.responsive)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._target=null,t._nodeArea=0,t._targetArea=0,t}return a(t,e),t.prototype.onLoad=function(){var e=this._target.getContentSize(),t=e.width,n=e.height;this._targetArea=t*n},t.prototype._updateNode=function(e,t){var n=this;e.width=e.width*t,e.height=e.height*t;var o=e.getComponent(cc.Label);o&&(o.fontSize=o.fontSize*t,o.lineHeight=o.lineHeight*t),e.children.forEach(function(e){return n._updateNode(e,t)})},t.prototype.update=function(){var e=this._target.width*this._target.height;e!==this._targetArea&&(this._updateNode(this.node,e/this._targetArea),this._targetArea=e)},r([s({type:cc.Node,visible:!0})],t.prototype,"_target",void 0),r([c,p("Responsive/ResizeInProportionToTarget")],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],"ResourceExtractor (@tapclap.game-kit.resource-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"555d9EiJyZNHZSl293VbaqX","ResourceExtractor (@tapclap.game-kit.resource-manager)"),n.__esModule=!0,n.ResourceExtractor=void 0;var o=function(){function e(){}return e.prototype.extract=function(){return[]},e}();n.ResourceExtractor=o,cc._RF.pop()},{}],"ResourceHandler (@tapclap.game-kit.resource-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"e05aedqWZlb35SyRbKqSXjp","ResourceHandler (@tapclap.game-kit.resource-manager)"),n.__esModule=!0,n.ResourceHandler=void 0;var o=function(){function e(){this._handled=[]}var t=e.prototype;return t.isHandled=function(e){return this._handled.includes(e.src)},t.setHandled=function(e){this._handled.push(e)},t.handle=function(t,n){var o=this;void 0===t&&(t=[]);var a=Promise.resolve();switch(n&&n.mode){case e.MODE_FILE:a=this.handleFile(t[0],n);break;default:a=this.handleArray(t,n)}return a.then(function(e){return o.setHandled(n.src),e})},t.handleFile=function(){return[]},t.handleArray=function(){return[]},e}();n.ResourceHandler=o,o.MODE_DIR="DIR",o.MODE_FILE="FILE",cc._RF.pop()},{}],"ResourceLoadTask (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"7ddd5Sp4ypSVp20YqCNla6o","ResourceLoadTask (@tapclap.game-kit.loader)"),n.__esModule=!0,n.ResourceLoadTask=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this)||this)._resource=t,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.load=function(){var e=this;return new Promise(function(t,n){cc.resources.loadDir(e._resource,e._processProgress.bind(e),function(o,a){e._processComplete(o,a).then(t,n)})})},r=c,(i=[{key:"description",get:function(){return"[resource] "+this._resource}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./LoadTask (@tapclap.game-kit.loader)").LoadTask);n.ResourceLoadTask=r,cc._RF.pop()},{"./LoadTask (@tapclap.game-kit.loader)":"LoadTask (@tapclap.game-kit.loader)"}],"ResourceManager (@tapclap.game-kit.resource-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"846aapHNJ9MxYZ8WaNHSmdV","ResourceManager (@tapclap.game-kit.resource-manager)"),n.__esModule=!0,n.ResourceManager=void 0;var o=function(){function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._resources=Object.assign.apply(Object,[{}].concat(t))}return e.prototype.getResource=function(e){return this._resources[e]},e}();n.ResourceManager=o,cc._RF.pop()},{}],"ResourceResolver (@tapclap.game-kit.resource-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"1ab07YUdwpRJJGpiZAWcYtQ","ResourceResolver (@tapclap.game-kit.resource-manager)"),n.__esModule=!0,n.ResourceResolver=void 0;var o=e("./ValueResolver (@tapclap.utils-js.substring-replacer)"),a=e("./SubstringReplacer (@tapclap.utils-js.substring-replacer)"),r=e("./BundleLoadTask (@tapclap.game-kit.loader)"),i=e("./ResourceHandler (@tapclap.game-kit.resource-manager)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var l=function(){function e(e){this._resources=e.resources.map(function(e){return Object.assign({},e)})||[],this._params=e.params||{}}var t=e.prototype;return t.createTasks=function(){var e=this;return Promise.resolve().then(function(){return e._extractParams()}).then(function(t){for(var n,o=new a.SubstringReplacer(t),s=[],p=function(){var e=n.value,a=e.src,c=e.dest,p=e.asFile,l=e.handler,m={src:a=o.replace(a),dest:c=o.replace(c),params:t,mode:p?i.ResourceHandler.MODE_FILE:i.ResourceHandler.MODE_DIR};if(!l||!l.isHandled(m)){var u=new r.BundleLoadTask(a,{asFile:p});u.on(r.BundleLoadTask.EVENT_SUBTASKS_REQUEST,function(e,t){if(l)return l.handle(t,m)}),s.push(u)}},l=c(e._resources);!(n=l()).done;)p();return s})},t._extractParams=function(){for(var e={},t=[],n=function(){var n=r[a],i=n[0],c=n[1],s=c instanceof o.ValueResolver?c.getValue():Promise.resolve(c);s.then(function(t){return e[i]=t},function(){return e[i]=void 0}),t.push(s)},a=0,r=Object.entries(this._params);a<r.length;a++)n();return Promise.all(t).then(function(){return e})},e}();n.ResourceResolver=l,cc._RF.pop()},{"./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./ResourceHandler (@tapclap.game-kit.resource-manager)":"ResourceHandler (@tapclap.game-kit.resource-manager)","./SubstringReplacer (@tapclap.utils-js.substring-replacer)":"SubstringReplacer (@tapclap.utils-js.substring-replacer)","./ValueResolver (@tapclap.utils-js.substring-replacer)":"ValueResolver (@tapclap.utils-js.substring-replacer)"}],"RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":[function(e,t,n){"use strict";cc._RF.push(t,"b57265hRXdOtbzjLMqvISa3","RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),n.__esModule=!0,n.RestorableCountableAttemptsState=void 0;var o=e("./CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),a=e("./Timer (@tapclap.utils-js.timer)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._timer=null,n._restoreTimeout=t.restoreTimeout,t.item.on("change",function(){n._timer=new a.Timer(n._restoreTimeout,t.item.restoredAt),n._updateTimer(t.item.restoredAt)}),n._updateTimer(t.item.restoredAt),n._updateState(),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._updateTimer=function(e){void 0===e&&(e=0),this._timer=new a.Timer(this._restoreTimeout,e),this._timer.events.on(a.Timer.EVENT_COMPLETE,this._updateState.bind(this)),0===e&&(this._item.restoredAt=new Date)},i._updateState=function(){if(!this.isMaxAttempts()){var e=this._timer.getMultipleDurationCount();e>0&&(this._addValue(e),this.isMaxAttempts()||this._updateTimer())}},i.getTimer=function(){return this._timer},i.hasAttempt=function(){return e.prototype.hasAttempt.call(this)},i.decrease=function(){this.isMaxAttempts()&&this._updateTimer(),e.prototype.decrease.call(this)},o}(o.CountableAttemptsState);n.RestorableCountableAttemptsState=i,cc._RF.pop()},{"./CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":"CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","./Timer (@tapclap.utils-js.timer)":"Timer (@tapclap.utils-js.timer)"}],"RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d5a8aANjLxaKYg0pTRrczKX","RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)"),n.__esModule=!0,n.RestorableCountableUserItem=void 0;var r=function(e){var t,n;function r(t){return e.call(this,t,{restoredAt:t.restoredAt?new Date(t.restoredAt):new Date})||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.replace=function(e){return this._instanceAssert(e),this._model.set({amount:e.amount,restoredAt:new Date}),this},s.serialize=function(){return Object.assign(e.prototype.serialize.call(this),{restoredAt:this._model.restoredAt.toString()})},s._instanceAssert=function(e){if(!(e instanceof r))throw new Error("Passed model is not instance of RestorableUserItemModel")},i=r,(c=[{key:"restoredAt",get:function(){return this._model.restoredAt},set:function(e){this._model.set({amount:this._model.amount,restoredAt:e})}},{key:"amount",get:function(){return this._model.amount},set:function(e){this._model.set({amount:e,restoredAt:this._model.restoredAt})}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)").CountableUserItem);n.RestorableCountableUserItem=r,r.KEY="restorableCountable",cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)"}],"Result (@tapclap.match-x.engine.chunk-classifier)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"6056bDz2/dBOYVFsZHIBfqZ","Result (@tapclap.match-x.engine.chunk-classifier)"),n.__esModule=!0,n.Result=void 0;var c=function(){function e(){this._patterns=[]}var t,n;return t=e,(n=[{key:"patterns",get:function(){return this._patterns}},{key:"type",get:function(){return this.isCorrect?this._patterns[this._patterns.length-1].type:""}},{key:"chunk",get:function(){for(var e,t=new Set,n=o(this._patterns);!(e=n()).done;)for(var a,r=o(e.value.chunk);!(a=r()).done;){var i=a.value;t.add(i)}return Array.from(t)}},{key:"isCorrect",get:function(){return this._patterns.length>0}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Result=c,cc._RF.pop()},{}],"Retriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"35d1dDh66Nb9ZbhyK/aqWQ+","Retriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.Retriever=void 0;var o=function(){function e(){}return e.prototype.retrieve=function(){return[]},e}();n.Retriever=o,cc._RF.pop()},{}],"RetrieverFactory (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"144e0EjOcVePJsyniopyPeU","RetrieverFactory (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.RetrieverFactory=void 0;var o=e("./SingleRetriever (@tapclap.match-x.engine.retrievers)"),a=e("./DiagonalRetriever (@tapclap.match-x.engine.retrievers)"),r=e("./CombinationRetriever (@tapclap.match-x.engine.retrievers)"),i=e("./NeighborRetriever (@tapclap.match-x.engine.retrievers)"),c=e("./GroupRetriever (@tapclap.match-x.engine.retrievers)"),s=e("./AllRetriever (@tapclap.match-x.engine.retrievers)"),p=e("./RadialSquareRetriever (@tapclap.match-x.engine.retrievers)"),l=e("./EmptyCellRetriever (@tapclap.match-x.engine.retrievers)"),m=e("./RandomCellRetriever (@tapclap.match-x.engine.retrievers)"),u=function(){function e(e){var t=e.random;this._random=t}return e.prototype.createRetriever=function(t,n){switch(t){case e.RETRIEVER_COMBINATION:return new r.CombinationRetriever(n);case e.RETRIEVER_SINGLE:return new o.SingleRetriever(n);case e.RETRIEVER_DIAGONAL:return new a.DiagonalRetriever(n);case e.RETRIEVER_NEIGHBOR:return new i.NeighborRetriever(n);case e.RETRIEVER_GROUP:return new c.GroupRetriever(n);case e.RETRIEVER_RANDOM_GROUP:return new c.GroupRetriever(n,{allowRandom:!0,random:this._random});case e.RETRIEVER_ALL:return new s.AllRetriever;case e.RETRIEVER_RADIAL_SQUARE:return new p.RadialSquareRetriever(n);case e.RETRIEVER_EMPTY_CELL:return new l.EmptyCellRetriever(n);case e.RETRIEVER_RANDOM_CELL:return new m.RandomCellRetriever(n,{explodeCount:2,random:this._random})}throw new Error("Not found retriever by type: "+t)},e}();n.RetrieverFactory=u,u.RETRIEVER_COMBINATION="combination",u.RETRIEVER_SINGLE="single",u.RETRIEVER_DIAGONAL="diagonal",u.RETRIEVER_NEIGHBOR="neighbor",u.RETRIEVER_GROUP="group",u.RETRIEVER_RANDOM_GROUP="randomGroup",u.RETRIEVER_ALL="all",u.RETRIEVER_RADIAL_SQUARE="radialSquare",u.RETRIEVER_EMPTY_CELL="emptyCell",u.RETRIEVER_RANDOM_CELL="randomCell",cc._RF.pop()},{"./AllRetriever (@tapclap.match-x.engine.retrievers)":"AllRetriever (@tapclap.match-x.engine.retrievers)","./CombinationRetriever (@tapclap.match-x.engine.retrievers)":"CombinationRetriever (@tapclap.match-x.engine.retrievers)","./DiagonalRetriever (@tapclap.match-x.engine.retrievers)":"DiagonalRetriever (@tapclap.match-x.engine.retrievers)","./EmptyCellRetriever (@tapclap.match-x.engine.retrievers)":"EmptyCellRetriever (@tapclap.match-x.engine.retrievers)","./GroupRetriever (@tapclap.match-x.engine.retrievers)":"GroupRetriever (@tapclap.match-x.engine.retrievers)","./NeighborRetriever (@tapclap.match-x.engine.retrievers)":"NeighborRetriever (@tapclap.match-x.engine.retrievers)","./RadialSquareRetriever (@tapclap.match-x.engine.retrievers)":"RadialSquareRetriever (@tapclap.match-x.engine.retrievers)","./RandomCellRetriever (@tapclap.match-x.engine.retrievers)":"RandomCellRetriever (@tapclap.match-x.engine.retrievers)","./SingleRetriever (@tapclap.match-x.engine.retrievers)":"SingleRetriever (@tapclap.match-x.engine.retrievers)"}],"RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)":[function(e,t,n){"use strict";cc._RF.push(t,"2b9d1akQbdY65hB5oLvFFY1","RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)"),n.__esModule=!0,n.RevertSwapSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n,o){var a;return(a=e.call(this)||this)._world=t,a._states=o,a._swapSystem=n,a._doSwap=null,a}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.preProcess=function(){this._doSwap=null},i.process=function(){var e=this,t=this._world.getState(a.SwapSystem.STATE_DO_SWAP),n=this._world.getState(a.SwapSystem.STATE_SWAP);return t&&n&&(this._states.find(function(t){return e._world.getState(t)})||(this._doSwap=t,this._world.setState(o.STATE,!0))),!1},i.postProcess=function(e){if(!e&&this._doSwap){var t=this._doSwap.data,n=t.cellA,o=t.cellB;this._swapSystem.swap(n,o)}},o}(o.PipelineProcessSystem);n.RevertSwapSystem=i,i.KEY="revertSwap",i.STATE="revertSwap",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"9751fNkKiZbNKRb/ULCwLMd","RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)"),n.__esModule=!0,n.RewardAction=void 0;var o=e("./Action (@tapclap.game-kit.action-manager)"),a=e("./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n,o=t.moduleResolver,a=t.caller;return(n=e.call(this)||this)._module=o.get(),n._caller=a,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.run=function(){var e=this;if(!this._module)throw new Error("Module for RewardActon not defined");if(!(this._module instanceof a.RewardMetaModule))throw new Error("Module not instance of RewardMetaModule");return Promise.resolve(this._module.hasReward()).then(function(t){if(t)return e._caller.run("default",Object.assign({},{module:e._module}))})},o}(o.Action);n.RewardAction=i,i.CALLER_DEFAULT="default",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"}],"RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c2dd612ZCxC0JQutGAG6eO0","RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)"),n.__esModule=!0,n.RewardAvailabilityFilter=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.filter=function(e){return e.filter(function(e){var t=e.getProp("availability");return!t||t.isAvailable()})},a}(e("./RewardFilter (@tapclap.game-kit.reward.filters)").RewardFilter);n.RewardAvailabilityFilter=a,cc._RF.pop()},{"./RewardFilter (@tapclap.game-kit.reward.filters)":"RewardFilter (@tapclap.game-kit.reward.filters)"}],"RewardBuilder (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"5a58aZaqrFKHYs6pUUnAAFe","RewardBuilder (@tapclap.game-kit.reward)"),n.__esModule=!0,n.pack=n.item=n.group=n.RewardBuilder=void 0;var o=e("./RewardPack (@tapclap.game-kit.reward)"),a=e("./RewardGroup (@tapclap.game-kit.reward)"),r=e("./RewardItem (@tapclap.game-kit.reward)"),i=e("./DI (@tapclap.utils-js.di)"),c=function(e){return i.DI.instance(o.RewardPack,e)};n.pack=c;var s=function(e,t){return i.DI.instance(a.RewardGroup,e,t)};n.group=s;var p=function(e,t){return i.DI.instance(r.RewardItem,e,t)};n.item=p;var l={pack:c,group:s,item:p};n.RewardBuilder=l,cc._RF.pop()},{"./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./RewardGroup (@tapclap.game-kit.reward)":"RewardGroup (@tapclap.game-kit.reward)","./RewardItem (@tapclap.game-kit.reward)":"RewardItem (@tapclap.game-kit.reward)","./RewardPack (@tapclap.game-kit.reward)":"RewardPack (@tapclap.game-kit.reward)"}],"RewardComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"362f8qDmWtUUIXi7+CszM2F","RewardComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},c=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.RewardComponent=n.AlternativeAnimationSettings=void 0;var s=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(){function e(){this.type="",this.labelAppearanceDelay=0,this.labelDisappearanceDelay=0,this.labelZeroPosition=new cc.Vec2}return i([m()],e.prototype,"type",void 0),i([m()],e.prototype,"labelAppearanceDelay",void 0),i([m()],e.prototype,"labelDisappearanceDelay",void 0),i([m()],e.prototype,"labelZeroPosition",void 0),i([l("AlternativeAnimationSettings")],e)}();n.AlternativeAnimationSettings=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t._showingDelay=0,t._indexCoefficientDelay=0,t._alternativeAnimationSettings=[],t._animationsComponent=null,t}return a(t,e),Object.defineProperty(t.prototype,"showingDelay",{get:function(){return this._showingDelay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indexCoefficientDelay",{get:function(){return this._indexCoefficientDelay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"label",{set:function(e){this._label.node.active=1!==parseInt(e),this._label.string=this._getFormattedLabelValue(e)},enumerable:!1,configurable:!0}),t.prototype.setReward=function(e,t){var n=this;this.label=e.amount?e.amount:e.duration,this._alternativeAnimationSettings.forEach(function(e){var o=e.type,a=c(e,["type"]);t===o&&n._animationsComponent.enableAlternativeLabelSettings(r({labelNode:n._label.node},a))})},t.prototype.prepareRewardNode=function(e){var t=e.getComponent(sp.Skeleton);e.opacity=s.AnimationKey.MAX_OPACITY,t&&(t.animation="preparation")},t.prototype.show=function(e){e.giftBox,e.index},t.prototype.getIconNode=function(){},t.prototype.setAnimationsComponent=function(e){this._animationsComponent=e},t.prototype._getFormattedLabelValue=function(e){return e?"+"===e[0]?e:"+"+e:""},i([m({type:cc.Label,visible:!0})],t.prototype,"_label",void 0),i([m({visible:!0,min:0})],t.prototype,"_showingDelay",void 0),i([m({visible:!0,min:0})],t.prototype,"_indexCoefficientDelay",void 0),i([m({type:[u],visible:!0})],t.prototype,"_alternativeAnimationSettings",void 0),i([l],t)}(cc.Component);n.RewardComponent=d,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)"}],"RewardEmitter (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"93575hy/mNBpYwtjIylGPxR","RewardEmitter (@tapclap.game-kit.reward)"),n.__esModule=!0,n.RewardEmitter=void 0;var o=e("./RewardPack (@tapclap.game-kit.reward)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(){function e(e,t){void 0===e&&(e=[]);var n=void 0===t?{}:t,a=n.itemFilters,r=void 0===a?[]:a,i=n.groupFilters,c=void 0===i?[]:i,s=n.itemFactory;if(!Object.values(e).find(function(e){return e instanceof o.RewardPack}))throw new Error("RewardPack excepted, "+typeof pack+" given");this._packs=e,this._itemFilters=r,this._groupFilters=c,this._itemFactory=s}return e.prototype.getRewards=function(){for(var e=this,t={},n=0,o=Object.keys(this._packs);n<o.length;n++){var r=o[n];t[r]=[];for(var i,c=this._packs[r].groups,s=a(this._groupFilters);!(i=s()).done;)c=i.value.filter(c);for(var p,l=a(c.map(function(e){return e.items}));!(p=l()).done;){for(var m,u=p.value,d=a(this._itemFilters);!(m=d()).done;)u=m.value.filter(u);t[r].push(u.map(function(t){return e._itemFactory.create(t.getRawItem())}))}}return t},e}();n.RewardEmitter=c,cc._RF.pop()},{"./RewardPack (@tapclap.game-kit.reward)":"RewardPack (@tapclap.game-kit.reward)"}],"RewardFilter (@tapclap.game-kit.reward.filters)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"df4a4cductKxYKOSu68ljKI","RewardFilter (@tapclap.game-kit.reward.filters)"),n.__esModule=!0,n.RewardFilter=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.filter=function(e){return void 0===e&&(e=[]),e},a}(e("./Filter (@tapclap.game-kit.filter)").Filter);n.RewardFilter=a,cc._RF.pop()},{"./Filter (@tapclap.game-kit.filter)":"Filter (@tapclap.game-kit.filter)"}],"RewardGroup (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"58a7aaKcudHn45eJ/TJL+eI","RewardGroup (@tapclap.game-kit.reward)"),n.__esModule=!0,n.RewardGroup=void 0;var r=function(e){var t,n,r,i;function c(t,n){var o;if(void 0===t&&(t=[]),void 0===n&&(n={}),o=e.call(this,n)||this,!Array.isArray(t))throw new Error("Items argument in RewardGroup must be array");return o._items=t,o}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"items",get:function(){return this._items}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./RewardProps (@tapclap.game-kit.reward)").RewardProps);n.RewardGroup=r,cc._RF.pop()},{"./RewardProps (@tapclap.game-kit.reward)":"RewardProps (@tapclap.game-kit.reward)"}],"RewardItem (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9897d2dPElDtYlbttYMasEB","RewardItem (@tapclap.game-kit.reward)"),n.__esModule=!0,n.RewardItem=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n={}),(o=e.call(this,n)||this)._rawItem=Object.assign({},t),o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getRawItem=function(){return this._rawItem},a}(e("./RewardProps (@tapclap.game-kit.reward)").RewardProps);n.RewardItem=a,cc._RF.pop()},{"./RewardProps (@tapclap.game-kit.reward)":"RewardProps (@tapclap.game-kit.reward)"}],"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ba4d1idqM9OXIG/UPd1NTfc","RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"),n.__esModule=!0,n.RewardMetaModule=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._rewardEmitter=t.rewardEmitter,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getRewards=function(){return this._rewardEmitter.getRewards()},r.getRewardIndex=function(){return null},r.hasReward=function(){return!1},r.resetReward=function(){},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.RewardMetaModule=a,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"RewardPack (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"d0c07paTtNPZ7M5jywSVH+k","RewardPack (@tapclap.game-kit.reward)"),n.__esModule=!0,n.RewardPack=void 0;var a=function(){function e(e){if(void 0===e&&(e=[]),!Array.isArray(e))throw new Error("Groups argument in RewardPack must be array");this._groups=e}var t,n;return t=e,(n=[{key:"groups",get:function(){return this._groups}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.RewardPack=a,cc._RF.pop()},{}],"RewardProps (@tapclap.game-kit.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"5105204wFhDw4UrVHwzZnfQ","RewardProps (@tapclap.game-kit.reward)"),n.__esModule=!0,n.RewardProps=void 0;var o=function(){function e(e){void 0===e&&(e={}),this._props=e}return e.prototype.getProp=function(e){return this._props[e]},e}();n.RewardProps=o,cc._RF.pop()},{}],"RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)":[function(e,t,n){"use strict";cc._RF.push(t,"51d0flZunxMi6t1aHwf6dJn","RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)"),n.__esModule=!0,n.RewardRandomByWeightFilter=void 0;var o=e("./RewardFilter (@tapclap.game-kit.reward.filters)"),a=e("./Random (@tapclap.utils-js.random)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){var o;return void 0===t&&(t=1),(o=e.call(this)||this)._count=t,o._randomSeed=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.filter=function(e){var t=new a.Random(this._randomSeed),n=e.filter(function(e){return void 0!==e.getProp("weight")&&Number.isInteger(e.getProp("weight"))}),o=[];if(0===n.length)return t.shuffle([].concat(e));for(var r=function(){var e=[];n.forEach(function(t,n){e.push.apply(e,new Array(t.getProp("weight")).fill(n))});var a=t.shuffle(e).pop();o.push.apply(o,n.splice(a,1))},i=0;i<this._count;i++)r();return o},o}(o.RewardFilter);n.RewardRandomByWeightFilter=i,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RewardFilter (@tapclap.game-kit.reward.filters)":"RewardFilter (@tapclap.game-kit.reward.filters)"}],"RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"764dacNme9do5SAoP97Dzgm","RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RewardWindowSceneResourcesResolver=void 0;var r=e("./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),i=e("./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"),c=function(e){function t(t){var n=e.call(this)||this;return n._windowKeys=t.windowKeys,n._rewardModule=t.moduleResolver.get(),n}return a(t,e),t.prototype.getLoadTasks=function(e){return this._rewardModule&&this._rewardModule instanceof i.RewardMetaModule&&this._rewardModule.hasReward()?this._createTasks(this._windowKeys,e.windowConfig):Promise.resolve([])},t}(r.SceneResourcesResolver);n.RewardWindowSceneResourcesResolver=c,cc._RF.pop()},{"./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)","./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"RewardsListComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"35c11iTafxXBoJuAkhXMfvq","RewardsListComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsListComponent=n.DailyRewardPrefabs=void 0;var i=e("./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),c=e("./RewardComponent (scripts.windows.items.daily-reward.reward)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(){function e(){this.key="",this.prefab=null}return r([l()],e.prototype,"key",void 0),r([l(cc.Prefab)],e.prototype,"prefab",void 0),r([p("DailyRewardPrefabs")],e)}();n.DailyRewardPrefabs=m;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._adRewardPrefab=null,t._prefabs=[],t._rewards=[],t}return a(t,e),Object.defineProperty(t.prototype,"rewards",{get:function(){return this._rewards},enumerable:!1,configurable:!0}),t.prototype.createItem=function(e){var t=e.item,n=e.type,o=e.animationsComponent,a=t.spec+":"+t.name,r=cc.instantiateFrom(this._getPrefab(a,n)),i=r.getComponent(c.RewardComponent);return r.parent=this.node,i.setAnimationsComponent(o),i.setReward(t,n),this._rewards.push({component:i,rewardItem:t,itemKey:a,iconNode:i.getIconNode()}),i},t.prototype.showRewards=function(e){var t=[];return this._rewards.forEach(function(n,o){t.push(n.component.show({giftBox:e,index:o}))}),Promise.all(t)},t.prototype._getPrefab=function(e,t){if("ad"===t)return this._adRewardPrefab;var n=this._prefabs.find(function(t){return t.key===e});return n?n.prefab:this._userItemPrefab},r([l({type:cc.Prefab,visible:!0})],t.prototype,"_adRewardPrefab",void 0),r([l({type:[m],visible:!0})],t.prototype,"_prefabs",void 0),r([p],t)}(i.UserItemListComponent);n.RewardsListComponent=u,cc._RF.pop()},{"./RewardComponent (scripts.windows.items.daily-reward.reward)":"RewardComponent (scripts.windows.items.daily-reward.reward)","./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"af76eugiZ5KiZBYTfYnXBfG","RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.RowContentWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.menu,x=w.property,A=(o=E("UI-Kit/WindowManager/RowContentWindowLayoutComponent"),a=x({type:[cc.Node],visible:!0}),r=x({visible:!0}),i=x({visible:!0}),c=x({type:cc.Layout,visible:!0}),S(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return v(t=e.call.apply(e,[this].concat(o))||this,"_rows",l,_(t)),v(t,"_fitWidth",m,_(t)),v(t,"_fitHeight",u,_(t)),v(t,"_contentLayout",d,_(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var a=o.prototype;return a._updateRows=function(){for(var e,t=f(this._rows);!(e=t()).done;){var n=e.value;n.active=!!n.children.find(function(e){return e.active})}this._updateLayout(),this.window.updateTemplate()},a._pushToRow=function(e,t){void 0===t&&(t=0);var n=this._rows[t];n&&(n.addChild(e),this._fitHeight&&(n.height=Math.max(n.height,e.height)),this._fitWidth&&(n.width=Math.max(n.width,e.width)),this._updateLayout())},a._clearRow=function(e){void 0===e&&(e=0);var t=this._rows[e];t&&this._rows[e].destroyAllChildren(),this._fitWidth&&(t.width=0),this._fitHeight&&(t.height=0)},a._getRows=function(){return this._rows},a._updateLayout=function(){var e=this._contentLayout||this.node.getComponent(cc.Layout);e&&e.updateLayout()},o}(y.WindowLayoutComponent),l=C(p.prototype,"_rows",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=C(p.prototype,"_fitWidth",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=C(p.prototype,"_fitHeight",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=C(p.prototype,"_contentLayout",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=p))||s)||s);n.RowContentWindowLayoutComponent=A,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c314cQ8mL5ZKKKBKnjFiZqg","RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)"),n.__esModule=!0,n.RunMetaGameAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._sceneManager=t.sceneManager,n._metaGameManager=t.metaGameManager,n._metaGame=t.metaGame,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this;return this._metaGame&&this._metaGameManager.setCurrentMetaGame(this._metaGame),Promise.resolve().then(function(){return e._metaGameManager.getCurrentMetaGame().getDataToLoad()}).then(function(t){return e._sceneManager.loadScene(e._metaGameManager.getCurrentMetaGame().scene,{},t)})},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.RunMetaGameAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"03605dJIgZXEom21uHISz/r","RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)"),n.__esModule=!0,n.RunMetaGameScenarioAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._scenarioManager=t.scenarioManager,n._scenario=t.scenarioModuleResolver.get(),n._scenarioKey="string"==typeof t.scenario?t.scenario:t.scenario.key,n._scenarioOptions="string"==typeof t.scenario?{}:t.scenario.options||{},n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){if(this._scenarioManager&&this._scenario){var e=this._scenario.getScenario(this._scenarioKey,this._scenarioOptions);return this._scenarioManager.createScenario(e).run()}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.RunMetaGameScenarioAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"RuntimeStorage (@tapclap.game-kit.data-storage)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f59cfLhLARQq5yeTkhSDxMn","RuntimeStorage (@tapclap.game-kit.data-storage)"),n.__esModule=!0,n.RuntimeStorage=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._data=new Map,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.getItem=function(e){var t=this;return Promise.resolve().then(function(){return t._data.get(e)})},s.setItem=function(e,t){var n=this;return Promise.resolve().then(function(){return n._data.set(e,t)})},s.removeItem=function(e){var t=this;return Promise.resolve().then(function(){return t._data.delete(e)})},s.clear=function(){var e=this;return Promise.resolve().then(function(){return e._data=new Map})},s.getKeys=function(){var e=this;return Promise.resolve().then(function(){return Array.from(e._data.keys())})},i=r,(c=[{key:"separator",get:function(){return this._separator}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./DataStorage (@tapclap.game-kit.data-storage)").DataStorage);n.RuntimeStorage=r,cc._RF.pop()},{"./DataStorage (@tapclap.game-kit.data-storage)":"DataStorage (@tapclap.game-kit.data-storage)"}],"SalesOfferState (scripts.offers.states)":[function(e,t,n){"use strict";cc._RF.push(t,"8c0d4Vu0LtZTIq/VcjwGx9c","SalesOfferState (scripts.offers.states)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SalesOfferState=void 0;var i=function(e){function t(t){var n=t.salesOfferStates,o=t.minProgressState,a=e.call(this)||this;return a._salesOfferStates=[],a._minProgressState=null,a._salesOfferStates=n,a._minProgressState=o,a}return a(t,e),t.prototype.resolve=function(){var e,t;if(this._minProgressState&&this._minProgressState.resolve()){try{for(var n=r(this._salesOfferStates),o=n.next();!o.done;o=n.next()){var a=o.value;if(a&&a.resolve())return!0}}catch(i){e={error:i}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!1}return!1},t}(e("./OfferState (@tapclap.game-kit.offer-manager)").OfferState);n.SalesOfferState=i,cc._RF.pop()},{"./OfferState (@tapclap.game-kit.offer-manager)":"OfferState (@tapclap.game-kit.offer-manager)"}],"SameFontSizeComponent (scripts.ui)":[function(e,t,n){"use strict";cc._RF.push(t,"1d48eahj8ReYoRptkS5+thw","SameFontSizeComponent (scripts.ui)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.SameFontSizeComponent=void 0;var s=cc._decorator,p=s.ccclass,l=s.property,m=s.requireComponent,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._key="",t}var n;return a(t,e),n=t,Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),t.prototype.lateUpdate=function(){var e=this,t=cc.director.getScene().getComponentsInChildren(n).filter(function(t){var n=t.key;return e._key===n}).map(function(e){return e.getComponent(cc.Label)}),o=Math.min.apply(Math,c(t.map(function(e){return e.actualFontSize})));t.forEach(function(e){return e.fontSize=o})},r([l({visible:!0})],t.prototype,"_key",void 0),n=r([p,m(cc.Label)],t)}(cc.Component);n.SameFontSizeComponent=u,cc._RF.pop()},{}],"SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"0b2e1Yplm5eeabQ7PbCQh6o","SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.SameGroupFromSetEntityEmitStrategy=void 0;var c=e("./GroupComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(t){var n=t.entitySystem,o=e.call(this)||this;return o._entitySystem=n,o}return a(t,e),t.prototype.getEmitEntity=function(e){var t=this,n=e.entity,o=e.trigger,a=n.getComponent(o);if(a.hasEntities){var s=function(){var e,o,s,p,l;try{for(var m=r(Object.entries(a.entities)),u=m.next();!u.done;u=m.next()){var d=i(u.value,2),y=d[0],f=d[1],h=((s={})[y]=f,s);if((null===(p=t._entitySystem.createRandomEntity(h,!0).getEnabledComponentByClass(c.GroupComponent))||void 0===p?void 0:p.id)===(null===(l=n.getEnabledComponentByClass(c.GroupComponent))||void 0===l?void 0:l.id))return h}}catch(g){e={error:g}}finally{try{u&&!u.done&&(o=m.return)&&o.call(m)}finally{if(e)throw e.error}}}(),p=this._entitySystem.createRandomEntity(s);return Object.assign(a.entities,s),p}return null},t}(e("./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitStrategy);n.SameGroupFromSetEntityEmitStrategy=s,cc._RF.pop()},{"./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)"}],"ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)":[function(e,t,n){"use strict";cc._RF.push(t,"5fb3fHr2VxTRL3FEqtAIIz/","ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ScaleNodeToTarget=void 0;var i,c=cc._decorator,s=c.ccclass,p=c.property,l=c.menu;(function(e){e[e.CONTENT_SIZE=0]="CONTENT_SIZE",e[e.BOUNDING_BOX=1]="BOUNDING_BOX"})(i||(i={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetNode=null,t._targetMethod=0,t._measureNode=null,t._measureMethod=0,t._maxScale=1,t._minScale=1,t._scaleToWidth=!0,t._scaleToHeight=!0,t._scaleByLargerDimension=!1,t._onLoad=!0,t._onUpdate=!1,t._onLateUpdate=!1,t}return a(t,e),t.prototype._process=function(){var e=1,t=this._targetSize.width/this._measureSize.width,n=this._targetSize.height/this._measureSize.height;this._scaleToWidth&&this._scaleToHeight?e=Math[this._scaleByLargerDimension?"max":"min"](t,n):this._scaleToWidth&&!this._scaleToHeight?e=t:!this._scaleToWidth&&this._scaleToHeight&&(e=n),this._scaleTo(e)},t.prototype._scaleTo=function(e){var t=Math.min(this._maxScale,Math.max(this._minScale,e));return this.node.setScale(t),t},Object.defineProperty(t.prototype,"_target",{get:function(){return this._targetNode||this.node.parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_measure",{get:function(){return this._measureNode||this.node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_targetSize",{get:function(){return this._getSizeByMethod(this._target,this._targetMethod)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_measureSize",{get:function(){return this._getSizeByMethod(this._measure,this._measureMethod)},enumerable:!1,configurable:!0}),t.prototype._getSizeByMethod=function(e,t){switch(t){case i.CONTENT_SIZE:var n=e.getContentSize(),o=n.width,a=n.height;return new cc.Size(o,a);case i.BOUNDING_BOX:var r=e.getBoundingBox(),c=(o=r.width,a=r.height,1/this.node.scale);return new cc.Size(o*c,a*c)}},t.prototype.onLoad=function(){this._onLoad&&this._process()},t.prototype.update=function(){this._onUpdate&&this._process()},t.prototype.lateUpdate=function(){this._onLateUpdate&&this._process()},r([p({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u0443\u0434\u0430 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c scalingNode, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0431\u0435\u0440\u0435\u0442\u0441\u044f \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c"})],t.prototype,"_targetNode",void 0),r([p({type:cc.Enum(i),visible:!0})],t.prototype,"_targetMethod",void 0),r([p({type:cc.Node,visible:!0,tooltip:"\u041d\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0438\u0437\u043c\u0435\u0440\u044f\u0442\u044c\u0441\u044f (\u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u0431\u0435\u0440\u0435\u0442\u0441\u044f \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u043d\u043e\u0434\u0430)"})],t.prototype,"_measureNode",void 0),r([p({type:cc.Enum(i),visible:!0})],t.prototype,"_measureMethod",void 0),r([p({visible:!0,min:1,step:.05})],t.prototype,"_maxScale",void 0),r([p({visible:!0,max:1,step:.05})],t.prototype,"_minScale",void 0),r([p({visible:!0})],t.prototype,"_scaleToWidth",void 0),r([p({visible:!0})],t.prototype,"_scaleToHeight",void 0),r([p({visible:function(){return this._scaleToHeight&&this._scaleToWidth}})],t.prototype,"_scaleByLargerDimension",void 0),r([p({visible:!0})],t.prototype,"_onLoad",void 0),r([p({visible:!0})],t.prototype,"_onUpdate",void 0),r([p({visible:!0})],t.prototype,"_onLateUpdate",void 0),r([s,l("UI/Positioning/ScaleNodeToTarget")],t)}(cc.Component);n.ScaleNodeToTarget=m,cc._RF.pop()},{}],"ScaleUIComponent (@tapclap.game-kit.ui.canvas)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"94c75WbufFYT4GFuC5sByKJ","ScaleUIComponent (@tapclap.game-kit.ui.canvas)"),n.__esModule=!0,n.ScaleUIComponent=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("Game-Kit/Canvas/ScaleUIComponent")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.onLoad=function(){var e=this;cc.view.on("canvas-resize",function(){return e.scale()}),this.scale()},r.scale=function(){this.node.width=cc.view.getVisibleSize().width,this.node.height=cc.view.getVisibleSize().height},o}(cc.Component))||o)||o;n.ScaleUIComponent=i,cc._RF.pop()},{}],"Scenario (@tapclap.game-kit.scenario-manager)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"15c81SrKiJAcoOMXZLP4sL9","Scenario (@tapclap.game-kit.scenario-manager)"),n.__esModule=!0,n.Scenario=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t=[]),(n=e.call(this)||this)._actions=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){for(var e=this,t=Promise.resolve(),n=function(n){t=t.then(function(){return e._actions[n].run()})},o=0;o<this._actions.length;o++)n(o);return t},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.Scenario=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ScenarioBuilder (@tapclap.game-kit.scenario-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"d51d9rrf5BIv7kAWhW108Nq","ScenarioBuilder (@tapclap.game-kit.scenario-manager)"),n.__esModule=!0,n.ScenarioBuilder=void 0;var o=e("./Scenario (@tapclap.game-kit.scenario-manager)"),a=e("./Action (@tapclap.game-kit.action-manager)"),r=e("./FunctionAction (@tapclap.game-kit.action-manager.actions)"),i=function(){function e(){this._actions=[]}var t=e.prototype;return t.addAction=function(e){return this._actions.push(e instanceof a.Action?e:new r.FunctionAction(e)),this},t.addGroup=function(e){return this.addAction(function(){return Promise.all(e.map(function(e){return e.run()}))}),this},t.build=function(){var e=[].concat(this._actions);return this._clean(),new o.Scenario(e)},t._clean=function(){this._actions=[]},e}();n.ScenarioBuilder=i,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./FunctionAction (@tapclap.game-kit.action-manager.actions)":"FunctionAction (@tapclap.game-kit.action-manager.actions)","./Scenario (@tapclap.game-kit.scenario-manager)":"Scenario (@tapclap.game-kit.scenario-manager)"}],"ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)":[function(e,t,n){"use strict";cc._RF.push(t,"d2744msVpFWdYbLVCYWti/A","ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)"),n.__esModule=!0,n.ScenarioKeyResolver=void 0;var o=function(){function e(e){var t=e.keys,n=void 0===t?[]:t;this._keys=n}var t=e.prototype;return t._isValidKey=function(e){return!(this._keys.length>0)||this._keys.includes(e)},t.resolve=function(e){return e},e}();n.ScenarioKeyResolver=o,cc._RF.pop()},{}],"ScenarioManager (@tapclap.game-kit.scenario-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"e6b53u8XI1MAKn350wXKhcS","ScenarioManager (@tapclap.game-kit.scenario-manager)"),n.__esModule=!0,n.ScenarioManager=void 0;var o=e("./ScenarioBuilder (@tapclap.game-kit.scenario-manager)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(){function e(e){this._producers=e}return e.prototype.createScenario=function(e){if(e instanceof Array){for(var t,n=new o.ScenarioBuilder,r=a(e);!(t=r()).done;){for(var i,c=[],s=a(t.value);!(i=s()).done;){var p=i.value,l=this._producers[p.type];if(!l)throw new Error("Not found ScenarioProducer: "+p.type);c.push(l.produce(p))}n.addGroup(c)}return n.build()}throw new Error("Scenario config must be an array: "+typeof e)},e}();n.ScenarioManager=c,cc._RF.pop()},{"./ScenarioBuilder (@tapclap.game-kit.scenario-manager)":"ScenarioBuilder (@tapclap.game-kit.scenario-manager)"}],"ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"846d0FmcTJXYL9C1ZddKxMg","ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)"),n.__esModule=!0,n.ScenarioMetaModule=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._scenarios={},n._scenarioKeyResolvers=t.scenarioKeyResolvers,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r.getScenarios=function(){return this._scenarios},r.getScenario=function(e){for(var t,n=e,a=o(this._scenarioKeyResolvers);!(t=a()).done;)n=t.value.resolve(n);return this._scenarios[n]},r.setScenario=function(e,t){this._scenarios[e]=t},a}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.ScenarioMetaModule=c,cc._RF.pop()},{"./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"ScenarioProducer (@tapclap.game-kit.scenario-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"6ccd0ku8DRFqomnOmgKEIbO","ScenarioProducer (@tapclap.game-kit.scenario-manager)"),n.__esModule=!0,n.ScenarioProducer=void 0;var o=e("./Scenario (@tapclap.game-kit.scenario-manager)"),a=function(){function e(){}return e.prototype.produce=function(){return new o.Scenario},e}();n.ScenarioProducer=a,cc._RF.pop()},{"./Scenario (@tapclap.game-kit.scenario-manager)":"Scenario (@tapclap.game-kit.scenario-manager)"}],"ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)":[function(e,t,n){"use strict";cc._RF.push(t,"0b38cnWI11drpLbmK3lr6gJ","ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)"),n.__esModule=!0,n.ScenarioResourceHandler=void 0;var o=e("./BundleLoadTask (@tapclap.game-kit.loader)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._extractors=t.extractors,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var i=r.prototype;return i.handleArray=function(e){for(var t,n=[],o=a(e);!(t=o()).done;)for(var r=t.value,i=0,c=Object.entries(r.json);i<c.length;i++){var s=c[i],p=s[0],l=s[1];this._getModule().setScenario(p,l),n.push.apply(n,this._getAssetTasks(l))}return Promise.resolve(n)},i._getModule=function(){return this._moduleResolver.get()},i._getAssetTasks=function(e){for(var t,n=[],r=a(e);!(t=r()).done;)for(var i,c=a(t.value);!(i=c()).done;)for(var s,p=i.value,l=a(this._extractors);!(s=l()).done;){var m=s.value;n.push.apply(n,m.extract(p))}return n.map(function(e){return new o.BundleLoadTask(e)})},r}(e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)").MetaModuleResourceHandler);n.ScenarioResourceHandler=s,cc._RF.pop()},{"./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"}],"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"beeecWf+qpQCorIyJhtejHc","ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)"),n.__esModule=!0,n.ScenarioTargetResolver=void 0;var o=function(){function e(){}var t=e.prototype;return t.resolveTarget=function(e){return e instanceof cc.Node?[e]:[]},t.resolveTargets=function(e){var t=this;return e.reduce(function(e,n){return e.concat(t.resolveTarget(n))},[])},e}();n.ScenarioTargetResolver=o,cc._RF.pop()},{}],"SceneBadgeComponent (scripts.badges)":[function(e,t,n){"use strict";cc._RF.push(t,"9f31cWSJmlbOpMoB9lyriQR","SceneBadgeComponent (scripts.badges)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SceneBadgeComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isActive=!0,t._label=null,t}return a(t,e),t.prototype._getLabelValue=function(){return""},t.prototype.refresh=function(){this._isActive&&(this.node.active=this._getActivity(),this._label&&this.node.active&&(this._label=this._getLabelValue()))},t.prototype.setActivity=function(e){this._isActive=e,this.node.active=e},t.prototype.onLoad=function(){this.refresh()},r([s({visible:!0,type:cc.Node})],t.prototype,"_label",void 0),r([c],t)}(cc.Component);n.SceneBadgeComponent=p,cc._RF.pop()},{}],"SceneBadgeRefresher (scripts.badges)":[function(e,t,n){"use strict";cc._RF.push(t,"43dcdTluCxeBarshgR5Omov","SceneBadgeRefresher (scripts.badges)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneBadgeRefresher=void 0;var o=function(){function e(e){this._badgeComponentCtor=e}return e.prototype.refresh=function(){cc.director.getScene().getComponentsInChildren(this._badgeComponentCtor).forEach(function(e){return e.refresh()})},e}();n.SceneBadgeRefresher=o,cc._RF.pop()},{}],"SceneComponent (@tapclap.game-kit.scene-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"c9d8fsCUsdPZqdcYt0oYSXr","SceneComponent (@tapclap.game-kit.scene-manager)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SceneComponent=void 0;var i=e("./SceneHolder (@tapclap.game-kit.scene-manager)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._holders=[],t}return a(t,e),t.prototype.getHolder=function(e){var t=this._holders.find(function(t){return t.key===e});return t?t.node:null},t.prototype.init=function(){return Promise.resolve()},t.prototype.run=function(){return Promise.resolve()},r([p({type:[i.SceneHolder],visible:!0})],t.prototype,"_holders",void 0),r([s],t)}(cc.Component);n.SceneComponent=l,cc._RF.pop()},{"./SceneHolder (@tapclap.game-kit.scene-manager)":"SceneHolder (@tapclap.game-kit.scene-manager)"}],"SceneHolder (@tapclap.game-kit.scene-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"f2227f6n8ha66TA39TW8ovP","SceneHolder (@tapclap.game-kit.scene-manager)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SceneHolder=void 0;var a=cc._decorator,r=a.ccclass,i=a.property,c=function(){function e(){this.key="",this.node=null}return o([i()],e.prototype,"key",void 0),o([i(cc.Node)],e.prototype,"node",void 0),o([r("SceneHolder")],e)}();n.SceneHolder=c,cc._RF.pop()},{}],"SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"8e51drfVMxfxY8/zZzePZGq","SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)"),n.__esModule=!0,n.SceneHolderTargetResolver=void 0;var o=e("./SceneComponent (@tapclap.game-kit.scene-manager)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.resolveTarget=function(t){if("string"==typeof t){var n=cc.director.getScene().getComponentInChildren(o.SceneComponent);if(n){var a=n.getHolder(t);if(a)return[a]}}return e.prototype.resolveTarget.call(this,t)},r}(e("./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)").ScenarioTargetResolver);n.SceneHolderTargetResolver=r,cc._RF.pop()},{"./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)"}],"SceneLoadTask (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"94f96coj5FcY41zg86tZxo9","SceneLoadTask (@tapclap.game-kit.loader)"),n.__esModule=!0,n.SceneLoadTask=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this)||this)._name=t,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),c.prototype.load=function(){var e=this;return new Promise(function(t,n){cc.director.preloadScene(e._name,e._processProgress.bind(e),function(o){e._processComplete(o).then(t,n)})})},r=c,(i=[{key:"description",get:function(){return"[scene] "+this._name}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./LoadTask (@tapclap.game-kit.loader)").LoadTask);n.SceneLoadTask=r,cc._RF.pop()},{"./LoadTask (@tapclap.game-kit.loader)":"LoadTask (@tapclap.game-kit.loader)"}],"SceneLoader (@tapclap.game-kit.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"6e08fJONhFFP5pGj8vePk5x","SceneLoader (@tapclap.game-kit.loader)"),n.__esModule=!0,n.SceneLoader=void 0;var o=e("./Loader (@tapclap.game-kit.loader)"),a=e("./SceneLoadTask (@tapclap.game-kit.loader)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n){return e.call(this,[new a.SceneLoadTask(t)].concat(n))||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.load=function(){return e.prototype.load.call(this)},o}(o.Loader);n.SceneLoader=i,cc._RF.pop()},{"./Loader (@tapclap.game-kit.loader)":"Loader (@tapclap.game-kit.loader)","./SceneLoadTask (@tapclap.game-kit.loader)":"SceneLoadTask (@tapclap.game-kit.loader)"}],"SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"68babGZrABF4LuitJbExFS0","SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)"),n.__esModule=!0,n.SceneLoaderBackgroundStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.begin=function(){var e=this;return Promise.resolve().then(function(){return e._sceneLoader.load()})},r.end=function(){return Promise.resolve()},a}(e("./SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)").SceneLoaderStrategy);n.SceneLoaderBackgroundStrategy=a,cc._RF.pop()},{"./SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)"}],"SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bbc09TD6YhIz40b+d5B4ITH","SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)"),n.__esModule=!0,n.SceneLoaderProgressStrategy=void 0;var a=function(e){var t,n;function a(t){var n,o=t.sceneLoader,a=t.transitionFactory,r=t.transition,i=t.preloadSceneName;return(n=e.call(this,{sceneLoader:o,transitionFactory:a,transition:r})||this)._preloadSceneName=i,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.begin=function(){var e=this;return Promise.resolve().then(function(){return e._transition.begin()}).then(function(){return e._runPreloadScene()}).then(function(){return e._transition.end()}).then(function(){return e._sceneLoader.load()}).then(function(){return e._transition.begin()})},r._runPreloadScene=function(){var e=this;return new Promise(function(t){cc.director.loadScene(e._preloadSceneName,function(){var n=cc.director.getScene().getComponentInChildren("PreloadComponent");if(!n)throw new Error("PreloadComponent not found");e._sceneLoader.on("progress",function(e){return n.progress=e}),t()})})},a}(e("./SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)").SceneLoaderTransitionStrategy);n.SceneLoaderProgressStrategy=a,cc._RF.pop()},{"./SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)"}],"SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"99d9fR6aBREb4fgb6OLwBh1","SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)"),n.__esModule=!0,n.SceneLoaderStrategy=void 0;var o=function(){function e(e){var t=e.sceneLoader;this._sceneLoader=t}var t=e.prototype;return t.begin=function(){throw new Error("Method 'load' not overrided")},t.end=function(){},e}();n.SceneLoaderStrategy=o,cc._RF.pop()},{}],"SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"6bf68RsCuRFm4dJVUWRMPnE","SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)"),n.__esModule=!0,n.SceneLoaderStrategyFactory=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./AbstractFactory (@tapclap.utils-js.abstract-factory)").AbstractFactory);n.SceneLoaderStrategyFactory=a,cc._RF.pop()},{"./AbstractFactory (@tapclap.utils-js.abstract-factory)":"AbstractFactory (@tapclap.utils-js.abstract-factory)"}],"SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bf435rGXvVCH7zemtn4E1NU","SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)"),n.__esModule=!0,n.SceneLoaderTransitionStrategy=void 0;var a=function(e){var t,n;function a(t){var n,o=t.sceneLoader,a=t.transitionFactory,r=t.transition;return(n=e.call(this,{sceneLoader:o})||this)._transition=void 0,n._transition=a.create(r),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.begin=function(){var e=this;return Promise.resolve().then(function(){return e._transition.begin()}).then(function(){return e._sceneLoader.load()})},r.end=function(){return this._transition.end()},a}(e("./SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)").SceneLoaderStrategy);n.SceneLoaderTransitionStrategy=a,cc._RF.pop()},{"./SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)":"SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)"}],"SceneManager (@tapclap.game-kit.scene-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"bca5bwmkZpdYafyQYsWwrsq","SceneManager (@tapclap.game-kit.scene-manager)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SceneManager=void 0;var r=e("./SceneLoader (@tapclap.game-kit.loader)"),i=e("./EventEmitter (@tapclap.utils-js.events)"),c=e("./SceneComponent (@tapclap.game-kit.scene-manager)"),s=function(e){function t(t){var n=t.strategyFactory,o=e.call(this)||this;return o._strategyFactory=n,o._currentSceneComponent=null,o}return a(t,e),t.prototype._immediateLoadScene=function(e){var t=this;return new Promise(function(n){cc.director.loadScene(e,function(){t._currentSceneComponent=cc.director.getScene().getComponentInChildren(c.SceneComponent),n()})})},t.prototype.getCurrentSceneComponent=function(){return this._currentSceneComponent},t.prototype.preloadScene=function(e,t){return void 0===t&&(t=[]),new r.SceneLoader(e,t).load()},t.prototype.loadScene=function(e,n,o,a){var i=this;void 0===n&&(n={}),void 0===o&&(o=[]);var c=(void 0===a?{}:a).strategyName,s=void 0===c?"transition":c,p=new r.SceneLoader(e,o),l=this._strategyFactory.create(s,{sceneLoader:p});return Promise.resolve().then(function(){return i.emit(t.EVENTS.TRANSITION_BEGIN)}).then(function(){return i.emit(t.EVENTS.PRELOAD_BEGIN)}).then(function(){return l.begin()}).then(function(){return i.emit(t.EVENTS.PRELOAD_END)}).then(function(){return i._immediateLoadScene(e)}).then(function(){return i.emit(t.EVENTS.SCENE_LOAD,e)}).then(function(){return i.getCurrentSceneComponent().init(n)}).then(function(){return i.emit(t.EVENTS.SCENE_INIT,e)}).then(function(){return l.end()}).then(function(){return i.emit(t.EVENTS.TRANSITION_END)}).then(function(){return i.getCurrentSceneComponent().run()}).then(function(){return i.emit(t.EVENTS.SCENE_RUN,e)}).then(function(){return i.getCurrentSceneComponent()})},t.EVENTS={TRANSITION_BEGIN:"transition.begin",PRELOAD_BEGIN:"preload.begin",PRELOAD_END:"preload.end",SCENE_LOAD:"scene.load",SCENE_INIT:"scene.init",TRANSITION_END:"transition.end",SCENE_RUN:"scene.run"},t}(i.EventEmitter);n.SceneManager=s,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)","./SceneLoader (@tapclap.game-kit.loader)":"SceneLoader (@tapclap.game-kit.loader)"}],"SceneResourcesManager (scripts.scenes.scene-resources)":[function(e,t,n){"use strict";cc._RF.push(t,"faf05HbxkFcxLb3cQMXfshP","SceneResourcesManager (scripts.scenes.scene-resources)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneResourcesManager=void 0;var o=function(){function e(e){this._sceneResourcesResolvers=[],this._sceneResourcesResolvers=e.sceneResourcesResolvers,this._windowFactory=e.windowFactory}return e.prototype.getDataToLoad=function(e){var t=this;return Promise.all(this._sceneResourcesResolvers.map(function(n){return n.getLoadTasks({windowConfig:t._windowFactory.getConfig(),scene:e})})).then(function(e){return e.flat()})},e}();n.SceneResourcesManager=o,cc._RF.pop()},{}],"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"48b22/+LodTGYh68v/kYNRk","SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SceneResourcesResolver=void 0;var o=e("./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"),a=e("./BundleLoadTask (@tapclap.game-kit.loader)"),r=function(){function e(){}return e.prototype._createTasks=function(e,t){if(e.length>0){var n=new o.PrefabResourceExtractor,r=e.map(function(e){return n.extract(t[e])}).flat();return Promise.resolve(r.map(function(e){return new a.BundleLoadTask(e)}))}return Promise.resolve([])},e}();n.SceneResourcesResolver=r,cc._RF.pop()},{"./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)":"PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"}],"SceneTransition (@tapclap.game-kit.scene-manager.transitions)":[function(e,t,n){"use strict";cc._RF.push(t,"9b95eHLXChLM7/8r1ofHKB+","SceneTransition (@tapclap.game-kit.scene-manager.transitions)"),n.__esModule=!0,n.SceneTransition=void 0;var o=e("./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),a=function(){function e(e){var t=e.prefab;this._node=cc.instantiateFrom(t),this._node.setPosition(new cc.Vec2(cc.winSize.width/2,cc.winSize.height/2)),this._transition=this._node.getComponent(o.SceneTransitionComponent)}var t=e.prototype;return t.begin=function(){return cc.game.addPersistRootNode(this._node),this._transition.show()},t.end=function(){var e=this;return this._transition.hide().then(function(){cc.game.removePersistRootNode(e._node),e._node.destroy()})},t.showHint=function(){return Promise.resolve()},t.hideHint=function(){return Promise.resolve()},e}();n.SceneTransition=a,cc._RF.pop()},{"./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":"SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"}],"SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":[function(e,t,n){"use strict";cc._RF.push(t,"b3689U+2yRJ4JvyRLAGnSPu","SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),n.__esModule=!0,n.SceneTransitionComponent=void 0;var o,a=e("./TransitionComponent (@tapclap.game-kit.ui.transition)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var a=o.prototype;return a.show=function(){cc.warn("Override method 'show'")},a.hide=function(){cc.warn("Override method 'hide'")},a.showHint=function(){cc.warn("Override method 'showHint'")},a.hideHint=function(){cc.warn("Override method 'hideHint'")},o}(a.TransitionComponent))||o;n.SceneTransitionComponent=i,cc._RF.pop()},{"./TransitionComponent (@tapclap.game-kit.ui.transition)":"TransitionComponent (@tapclap.game-kit.ui.transition)"}],"SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4d5c0WmavRPhLMj/Mfc8n/9","SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)"),n.__esModule=!0,n.SceneTransitionFactory=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./AbstractFactory (@tapclap.utils-js.abstract-factory)").AbstractFactory);n.SceneTransitionFactory=a,cc._RF.pop()},{"./AbstractFactory (@tapclap.utils-js.abstract-factory)":"AbstractFactory (@tapclap.utils-js.abstract-factory)"}],"ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)":[function(e,t,n){"use strict";cc._RF.push(t,"cd6c9yg6s9MnKVDTLMRlB+V","ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)"),n.__esModule=!0,n.ScoreMetaModule=void 0;var o=e("./FunctionLoadTask (@tapclap.game-kit.loader)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function i(t){var n;if((n=e.call(this,t)||this)._values={},n._prevValues={},n._updates=new Set,n._maxValue=1/0,n._lastChangedLevel=null,n._rangeResolver=null,n._maxValue=t.maxValue||n._maxValue,n._rangeResolver=t.rangeResolver,!n._rangeResolver)throw new Error("Range resolver not defined");return n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var c,s,p=i.prototype;return p.fetchData=function(e,t){var n=this;return this._isDataExist(e,t)?Promise.resolve():this.getService().get({query:{begin:e,end:t}}).then(function(e){Object.assign(n._values,e.values),n.emitChange()})},p.init=function(t){var n=this;return void 0===t&&(t={values:{},updates:[]}),Object.assign(this._values,t.values),Object.assign(this._prevValues,t.values),t.updates&&Array.isArray(t.updates)&&t.updates.forEach(function(e){return n._updates.add(e)}),e.prototype.init.call(this,this.serialize())},p.setValue=function(e,t){var n,o=this;this._prevValues=Object.assign({},this._values),t>(void 0===this._values[e]?0:this._values[e])&&(this._values[e]=t,this._lastChangedLevel=e,this._updates.add(e),this.emitChange(),this.getService().save((n={},n[e]=this._values[e],n)).then(function(){o._updates.delete(e),o.emitChange()}))},p.serialize=function(){return{values:this._values,updates:Array.from(this._updates.values())}},p.getDataToLoad=function(){var t=this,n=this._rangeResolver.get(),a=n[0],r=n[1];if(this._isDataExist(a,r))return e.prototype.getDataToLoad.call(this);var i=new o.FunctionLoadTask(function(){return t.getService().get({query:{begin:a,end:r}}).then(function(e){Object.assign(t._values,e.values),t.emitChange()})},"ScoreMetaModule");return e.prototype.getDataToLoad.call(this,[i])},p._isDataExist=function(e,t){var n=this.getMetaGame().getModule("progress");n&&(t=Math.min(n.value,t));for(var o=e;o<t;o++)if(void 0===this._values[o])return!1;return!0},p.getSumOfRange=function(e,t){return this._getSumOfRange(e,t)},p.getPrevSumOfRange=function(e,t){return this._getSumOfRange(e,t,"prev")},p._getSumOfRange=function(e,t,n){for(var o="prev"===n?this._prevValues:this._values,a=0,r=e;r<=t;r++)Number.isInteger(o[r])&&(a+=o[r]);return a},p.reset=function(){return this._values={},this._prevValues={},this._updates.clear(),this.emitChange(),this._service.reset()},p.resetState=function(){this._prevValues=Object.assign({},this._values),this._lastChangedLevel=null},c=i,(s=[{key:"data",get:function(){return Object.assign({},this._values)}},{key:"maxValue",get:function(){return this._maxValue}},{key:"lastChangeLevel",get:function(){return this._lastChangedLevel}}])&&a(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),i}(e("./MetaModule (@tapclap.game-kit.meta-game.meta-modules)").MetaModule);n.ScoreMetaModule=i,cc._RF.pop()},{"./FunctionLoadTask (@tapclap.game-kit.loader)":"FunctionLoadTask (@tapclap.game-kit.loader)","./MetaModule (@tapclap.game-kit.meta-game.meta-modules)":"MetaModule (@tapclap.game-kit.meta-game.meta-modules)"}],"ScoreSystem (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"232626ZR+9Thaz7wM8NSofZ","ScoreSystem (@tapclap.match-x.engine.systems.score-system)"),n.__esModule=!0,n.ScoreSystem=void 0;var c=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._strategies=n,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.process=function(){var e=this._world.getEnabledComponent("score");if(e){for(var t,n=e.getValue(),r=0,i=o(this._strategies);!(t=i()).done;)r+=t.value.calculate(this._world);r>0&&(e.setValue(r+e.getValue()),this._world.setState(a.KEY,{prevValue:n,targetValue:e.targetValue,value:e.getValue()}))}return!1},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ScoreSystem=c,c.KEY="score",c.STATE="score",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"51ae1XIsjpQho9t91ryiNnL","ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ScoreSystemEntityTypeStrategy=void 0;var i=e("./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n._entityTypeRewardMap=t,n}return a(t,e),t.prototype.calculate=function(e){var t,n,o=e.getState(c.ExplodeSystem.STATE),a=0;if(null==o?void 0:o.data)try{for(var i=r(o.data.flat()),s=i.next();!s.done;s=i.next()){var p=s.value,l=p.entity;p.remove&&(a+=this._entityTypeRewardMap[l.type]||0)}}catch(m){t={error:m}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},t}(i.ScoreSystemStrategy);n.ScoreSystemEntityTypeStrategy=s,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"}],"ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"2eba3R4drFakJCDBjxqH5ex","ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ScoreSystemGoalEntityTypeStrategy=void 0;var i=e("./ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)"),c=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),s=e("./GoalComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.calculate=function(e){var t,n,o=e.getState(c.ExplodeSystem.STATE),a=0;if(null==o?void 0:o.data)try{for(var i=r(o.data.flat()),p=i.next();!p.done;p=i.next()){var l=p.value,m=l.entity;l.remove&&m.getEnabledComponent(s.GoalComponent.KEY)&&(a+=this._entityTypeRewardMap[m.type]||0)}}catch(u){t={error:u}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},t}(i.ScoreSystemEntityTypeStrategy);n.ScoreSystemGoalEntityTypeStrategy=p,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)"}],"ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b4644szIa9U4IuuqhodGxNy","ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)"),n.__esModule=!0,n.ScoreSystemGoalGroupStrategy=void 0;var o=e("./ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./GroupComponent (@tapclap.match-x.engine.components)"),i=e("./GoalComponent (@tapclap.match-x.engine.components)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.calculate=function(e){var t=e.getState(a.ExplodeSystem.STATE),n=0;if(null!=t&&t.data)for(var o,s=c(t.data.flat());!(o=s()).done;){var p=o.value,l=p.entity;p.remove&&l.getEnabledComponent(r.GroupComponent.KEY)&&l.getEnabledComponent(i.GoalComponent.KEY)&&(n+=this._reward)}return n},o}(o.ScoreSystemGroupStrategy);n.ScoreSystemGoalGroupStrategy=m,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)"}],"ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"57d50Fj6TBRXph2VmW8Hn7L","ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)"),n.__esModule=!0,n.ScoreSystemGroupStrategy=void 0;var o=e("./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"),a=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),r=e("./GroupComponent (@tapclap.match-x.engine.components)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n;return void 0===t&&(t=0),(n=e.call(this)||this)._reward=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.calculate=function(e){var t=e.getState(a.ExplodeSystem.STATE),n=0;if(null!=t&&t.data)for(var o,c=i(t.data.flat());!(o=c()).done;){var s=o.value,p=s.entity;s.remove&&p.getEnabledComponent(r.GroupComponent.KEY)&&(n+=this._reward)}return n},o}(o.ScoreSystemStrategy);n.ScoreSystemGroupStrategy=l,cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"}],"ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b59bbwOu4he/4i6Okiz50bM","ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ScoreSystemOnHealthReduceStrategy=void 0;var i=e("./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=e("./AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.calculate=function(e){var t,n,o=e.getState(p.ExplodeSystem.STATE),a=0;if(null==o?void 0:o.data)try{for(var i=r(o.data.flat()),l=i.next();!l.done;l=i.next()){var m=l.value.entity,u=m.getEnabledComponent(s.AddScoreOnValueReduceComponent.KEY),d=u&&m.getEnabledComponent(u.componentKey);d&&u.componentKey===c.HealthComponent.KEY&&null!==d.getPrevValue()&&d.getValue()!==d.getPrevValue()&&(a+=u.getValue())}}catch(y){t={error:y}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},t}(i.ScoreSystemStrategy);n.ScoreSystemOnHealthReduceStrategy=l,cc._RF.pop()},{"./AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)":"AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)":"ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"}],"ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)":[function(e,t,n){"use strict";cc._RF.push(t,"0c16cg0lmxfzKQzSGlz5tTw","ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)"),n.__esModule=!0,n.ScoreSystemStrategy=void 0;var o=function(){function e(){}return e.prototype.calculate=function(){return 0},e}();n.ScoreSystemStrategy=o,cc._RF.pop()},{}],"ScreenLocker (@tapclap.game-kit.ui.screen-locker)":[function(e,t,n){"use strict";cc._RF.push(t,"0cbae1OkKFFmpfETjelhD/R","ScreenLocker (@tapclap.game-kit.ui.screen-locker)"),n.__esModule=!0,n.ScreenLocker=void 0;var o=function(){function e(){}var t=e.prototype;return t.lock=function(){return Promise.resolve()},t.unlock=function(){return Promise.resolve()},e}();n.ScreenLocker=o,cc._RF.pop()},{}],"ScriptLoader (@tapclap.utils-js.script-loader)":[function(e,t,n){"use strict";cc._RF.push(t,"020179IOq1HHaM+00Q1l5YY","ScriptLoader (@tapclap.utils-js.script-loader)"),n.__esModule=!0,n.ScriptLoader=void 0;var o=function(){function e(){}return e.loadScript=function(e,t){return void 0===t&&(t={}),new Promise(function(n,o){var a=document.createElement("script");for(var r in t)a.setAttribute(r,t[r]);a.src=e,a.async=!0,a.addEventListener("load",n),a.addEventListener("error",o),document.body.appendChild(a)})},e}();n.ScriptLoader=o,cc._RF.pop()},{}],"SelectionViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"919a8sGG61Cbad2f6qOffdZ","SelectionViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.SelectionViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d=e("./ViewComponent (@tapclap.match-x.cocos.components)");function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.property,C=(o=b({visible:!0}),a=b({visible:!0}),r=b({visible:!0}),i=b(cc.Node),_((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_duration",p,f(t)),y(t,"_minScale",l,f(t)),y(t,"_maxScale",m,f(t)),y(t,"target",u,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a.onLoad=function(){this.hide()},a.show=function(e){var t=this;return this.target.active=!0,this.target.setPosition(this.node.convertToNodeSpaceAR(e)),new Promise(function(e){t.target.runAction(cc.sequence([cc.scaleTo(t._duration,t._maxScale,t._maxScale).easing(cc.easeElasticInOut(2)),cc.scaleTo(t._duration,t._minScale,t._minScale),cc.callFunc(e)]))})},a.hide=function(){return this.target.active=!1,Promise.resolve()},o}(d.ViewComponent),p=g(s.prototype,"_duration",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),l=g(s.prototype,"_minScale",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=g(s.prototype,"_maxScale",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),u=g(s.prototype,"target",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c);n.SelectionViewComponent=C,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"SendLivesMessageEventHandler (scripts.message-center.event-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"e05ed5EbHxav7nx5O/dF1d0","SendLivesMessageEventHandler (scripts.message-center.event-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SendLivesMessageEventHandler=void 0;var r=e("./MessageEventHandler (scripts.message-center.event-handlers)"),i=e("./Message (@tapclap.game-kit.message-center)"),c=e("./CandyvalleyMessageHandler (scripts.message-center)"),s=e("./MessageItemComponent (scripts.windows.layouts.message-center)"),p=function(e){function t(t){var n=t.socialService,o=t.socialRequest,a=t.messageCenter,r=t.requestWrapper,i=t.badgeRefresher,c=e.call(this)||this;return c._socialAdapter=n.getCurrentAdapter(),c._socialRequest=o,c._messageCenter=a,c._requestWrapper=r,c._badgeRefresher=i,c}return a(t,e),t.prototype.handle=function(e){var t=this,n=e.data,o=e.view,a=e.adapter;return Promise.resolve().then(function(){return o.setState(s.MessageItemComponent.STATE_DISABLED)}).then(function(){var e=t._socialAdapter.sendRequest(t._socialRequest,{ids:[n.message.userFrom]});return t._requestWrapper.wrap(e).catch(function(e){throw console.error("socialAdapter.sendRequest",e),e})}).then(function(){return t._messageCenter.send([new i.Message({userFrom:n.message.userTo,userTo:n.message.userFrom,type:c.CandyvalleyMessageHandler.MESSAGE_RESPONSE,updatedAt:(new Date).getMilliseconds()})]).catch(function(e){throw console.error("messageCenter.send",e),e})}).then(function(){return t._messageCenter.read([n.message]).catch(function(e){throw console.error("messageCenter.read",e),e})}).then(function(){return Promise.resolve().then(function(){return a.removeItem(n)}).catch(function(e){throw console.error("adapter.removeItem",e),e})}).then(function(){return t._badgeRefresher.refresh()}).catch(function(){o.setState(s.MessageItemComponent.STATE_DEFAULT)})},t}(r.MessageEventHandler);n.SendLivesMessageEventHandler=p,cc._RF.pop()},{"./CandyvalleyMessageHandler (scripts.message-center)":"CandyvalleyMessageHandler (scripts.message-center)","./Message (@tapclap.game-kit.message-center)":"Message (@tapclap.game-kit.message-center)","./MessageEventHandler (scripts.message-center.event-handlers)":"MessageEventHandler (scripts.message-center.event-handlers)","./MessageItemComponent (scripts.windows.layouts.message-center)":"MessageItemComponent (scripts.windows.layouts.message-center)"}],"SequenceAction (@tapclap.game-kit.action-manager)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"faa9fspJ5RZwZW14wYXmA5p","SequenceAction (@tapclap.game-kit.action-manager)"),n.__esModule=!0,n.SequenceAction=void 0;var c=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype.run=function(){for(var e,t=this,n=Promise.resolve(),a=function(){var o=e.value;n=n.then(function(){return t._runActionInstance(o)})},r=o(this._builders);!(e=r()).done;)a();return n},a}(e("./CompositeAction (@tapclap.game-kit.action-manager)").CompositeAction);n.SequenceAction=c,cc._RF.pop()},{"./CompositeAction (@tapclap.game-kit.action-manager)":"CompositeAction (@tapclap.game-kit.action-manager)"}],"SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"dfa5cz0WxxZkI8YQo+xLOm4","SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SequentiallyFromEntitiesEmitStrategy=void 0;var r=function(e){function t(t){var n=t.entitySystem,o=e.call(this)||this;return o._entitySystem=n,o}return a(t,e),t.prototype.getEmitEntity=function(e){var t=e.entity,n=e.trigger,o=t.getComponent(n);if(o.hasEntities)for(var a in o.entities){var r=o.entities[a];if(r.amount>0)return r.amount--,this._entitySystem.createEntity(a,r.options)}return null},t}(e("./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)").EmitStrategy);n.SequentiallyFromEntitiesEmitStrategy=r,cc._RF.pop()},{"./EmitStrategy (@tapclap.match-x.engine.systems.emit-system)":"EmitStrategy (@tapclap.match-x.engine.systems.emit-system)"}],"Service (@tapclap.utils-js.service)":[function(e,t,n){"use strict";cc._RF.push(t,"a05dbv8ecBDLK/V76iYL3JA","Service (@tapclap.utils-js.service)"),n.__esModule=!0,n.Service=void 0;var o=e("./URI (@tapclap.utils-js.url)"),a=function(){function e(e){void 0===e&&(e={}),this._gateway=e.gateway,this._root=e.root,this._prefix=e.prefix,this._endpoint=e.endpoint}var t=e.prototype;return t._createPath=function(e){var t=void 0===e?{}:e,n=t.endpoint,a=t.query,r=[this._root,this._prefix,this._endpoint,n].flat();return new o.URI(r,a).create()},t.get=function(e){return this._gateway.get(this._createPath(e))},t.create=function(e,t){return this._gateway.post(this._createPath(t),e)},t.save=function(e,t){return this._gateway.put(this._createPath(t),e)},t.patch=function(e,t){return this._gateway.patch(this._createPath(t),e)},t.reset=function(){return this._gateway.post(this._createPath({endpoint:"reset"}))},e}();n.Service=a,cc._RF.pop()},{"./URI (@tapclap.utils-js.url)":"URI (@tapclap.utils-js.url)"}],"ServiceGateway (@tapclap.game-kit.service-gateway)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b20e8X3yTpQfYU87SeKWnQn","ServiceGateway (@tapclap.game-kit.service-gateway)"),n.__esModule=!0,n.ServiceGateway=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._errorHandler=t.errorHandler,n._errorHandling=t.errorHandling||!1,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.handshake=function(){},r.process=function(e){return void 0===e&&(e=!1),Promise.resolve()},r.get=function(){return Promise.reject({})},r.post=function(e,t){return void 0===t&&(t={}),Promise.reject({})},r.put=function(e,t){return void 0===t&&(t={}),Promise.reject({})},r.patch=function(e,t){return void 0===t&&(t={}),Promise.reject({})},r.delete=function(e,t){return void 0===t&&(t={}),Promise.reject({})},r.setErrorHandling=function(){this._errorHandling=!0},r._handleError=function(e){this._errorHandling&&this._errorHandler&&this._errorHandler.handle(this,e)},a}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.ServiceGateway=a,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)":[function(e,t,n){"use strict";cc._RF.push(t,"683d4/6qyNQhohuGejiqrRL","ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)"),n.__esModule=!0,n.ServiceGatewayErrorHandler=void 0;var o=function(){function e(){}return e.prototype.handle=function(){},e}();n.ServiceGatewayErrorHandler=o,cc._RF.pop()},{}],"ServicesConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"b8ef1o38s9dgq5GYDBMPZyW","ServicesConfig (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ServicesConfig=void 0;var o=e("./AnalyticsService (@tapclap.sdk-x.analytics-service)"),a=e("./ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)"),r=e("./BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)"),i=e("./CompositeRemoteConfig (@tapclap.sdk-x.remote-config)"),c=e("./GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)"),s=e("./ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)"),p=e("./JsonRemoteConfig (@tapclap.sdk-x.remote-config)"),l=e("./DI (@tapclap.utils-js.di)"),m=e("./UserAttributesResolver (scripts.user)"),u=e("./ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)"),d=e("./SyncRemoteConfig (@tapclap.sdk-x.remote-config)");n.ServicesConfig={CommonRemoteConfig:l.DI.singleton(p.JsonRemoteConfig,{httpClient:l.DI.cfg("HttpClient"),url:"./config.json",defaults:{cakeRewardActivity:!1,square:!1,sharingDisabled:!1,saleDoubleCoinsDateRange:{startDate:"2024-05-31T00:00:00",finishDate:"2024-06-02T00:00:01"},saleUnlimitedLivesDateRange:{startDate:"2024-04-26T17:30:00",finishDate:"2024-04-29T17:30:00"},languageSettingsEnabled:!1}}),RemoteConfig:l.DI.singleton(i.CompositeRemoteConfig,{configs:[l.DI.cfg("CommonRemoteConfig"),l.DI.instance(s.ConfigurableGrowthbookRemoteConfig,{config:l.DI.instance(c.GrowthbookRemoteConfig,{httpClient:l.DI.cfg("HttpClient"),syncService:l.DI.instance(r.BackendRemoteConfigFallback,{httpGateway:l.DI.cfg("ServiceGateway"),path:"/features"}),analyticsService:l.DI.cfg("AnalyticsService"),userAttributesResolver:l.DI.instance(m.UserAttributesResolver,{userManager:l.DI.cfg("UserManager"),attributesMap:{id:"id",firstLoginAt:function(e){return["firstVisitAt",e.toISOString()]}}}),analyticsEventOptions:{event:"experiments",map:{experimentId:"experiment_id",variationId:"variation_id"}}}),remoteConfig:l.DI.cfg("CommonRemoteConfig"),apiUrlConfigKey:"growthbookApiUrl",apiKeyConfigKey:"growthbookApiKey"}),l.DI.cfg("PlatformRemoteConfig")]}),SyncRemoteConfig:l.DI.singleton(d.SyncRemoteConfig,{remoteConfig:l.DI.cfg("RemoteConfig"),keys:{sharingDisabled:"boolean",saleDoubleCoinsDateRange:"json",saleUnlimitedLivesDateRange:"json",languageSettingsEnabled:"boolean",friends:"boolean"}}),AnalyticsService:l.DI.singleton(o.AnalyticsService,{provider:l.DI.instance(u.ConfigurableClickhouseAnalyticsProvider,{provider:l.DI.instance(a.ClickhouseAnalyticsProvider,{httpClient:l.DI.cfg("HttpClient")}),remoteConfig:l.DI.cfg("CommonRemoteConfig"),apiUrlConfigKey:"clickhouseApiUrl",eventPrefixConfigKey:"clickhouseEventPrefix"})})},cc._RF.pop()},{"./AnalyticsService (@tapclap.sdk-x.analytics-service)":"AnalyticsService (@tapclap.sdk-x.analytics-service)","./BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)":"BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)","./ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)":"ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)","./CompositeRemoteConfig (@tapclap.sdk-x.remote-config)":"CompositeRemoteConfig (@tapclap.sdk-x.remote-config)","./ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)":"ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)","./ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)":"ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)":"GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)","./JsonRemoteConfig (@tapclap.sdk-x.remote-config)":"JsonRemoteConfig (@tapclap.sdk-x.remote-config)","./SyncRemoteConfig (@tapclap.sdk-x.remote-config)":"SyncRemoteConfig (@tapclap.sdk-x.remote-config)","./UserAttributesResolver (scripts.user)":"UserAttributesResolver (scripts.user)"}],"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"7a1adX9jV9C2qOlGNbfs1g2","ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.ShopItemComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),L=e("./Offer (@tapclap.game-kit.offer-manager)"),F=e("./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)");function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var U=cc._decorator,Y=U.ccclass,z=U.property,q=(o=Y("ShopUserItemListStyle"),a=z({visible:!0}),r=z({visible:!0}),i=z({visible:!0}),o((p=K((s=function(){function e(){H(this,"_count",p,this),H(this,"_scale",l,this),H(this,"_maxInRow",m,this)}var t,n;return t=e,(n=[{key:"count",get:function(){return this._count}},{key:"scale",get:function(){return this._scale}},{key:"maxInRow",get:function(){return this._maxInRow}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"_count",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=K(s.prototype,"_scale",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=K(s.prototype,"_maxInRow",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=s))||c),Z=(u=z({type:j.ButtonControlComponent,visible:!0}),d=z({type:cc.Float,visible:!0}),y=z({type:[cc.Node],visible:!0}),f=z({type:[cc.Node],visible:!0}),h=z({type:[cc.Node],visible:!0}),g=z({visible:!0}),v=z({visible:function(){return this._changeButtonStyleByState}}),_=z({visible:function(){return this._changeButtonStyleByState}}),b=z({type:cc.Node,visible:!0}),C=z({type:[q],visible:!0}),Y((S=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return H(t=e.call.apply(e,[this].concat(o))||this,"_button",E,N(t)),H(t,"_animationDuration",x,N(t)),t._offer=null,t._windowLayout=null,H(t,"_availableState",A,N(t)),H(t,"_unavailableState",O,N(t)),H(t,"_disabledState",R,N(t)),H(t,"_changeButtonStyleByState",P,N(t)),H(t,"_buttonAvailableStyle",k,N(t)),H(t,"_buttonUnavailableStyle",T,N(t)),H(t,"_itemsHolder",I,N(t)),H(t,"_stylesUserItemList",M,N(t)),t._animationIndex=0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,W(t,n);var a=o.prototype;return a.onLoad=function(){this.show()},a._hideStateNodes=function(){[].concat(this._availableState,this._unavailableState,this._disabledState).forEach(function(e){return e.active=!1})},a.show=function(){var e=this;return new Promise(function(t){var n=e.node.scale;e.node.scale=0,e.node.active=!0,e.node.runAction(cc.sequence([cc.delayTime(e._animationIndex*e._animationDuration/4),cc.scaleTo(e._animationDuration,n).easing(cc.easeBackOut()),cc.callFunc(t)]))})},a.hide=function(){var e=this;return this.node.active?new Promise(function(t){e.node.runAction(cc.sequence([cc.delayTime(e._animationIndex*e._animationDuration/4),cc.scaleTo(e._animationDuration,0).easing(cc.easeBackIn()),cc.callFunc(function(){return e.node.active=!1}),cc.callFunc(t)]))}):Promise.resolve()},a.setAvailable=function(e){this.node.active=!0,this._hideStateNodes(),(e?this._availableState:this._unavailableState).forEach(function(e){return e.active=!0}),this._button&&this._changeButtonStyleByState&&(this._button.style=e?this._buttonAvailableStyle:this._buttonUnavailableStyle,this._button.setInteractable(e))},a.setDisabled=function(){this.node.active=!1},a.setOffer=function(e){this._offer=e},a.getOffer=function(){return this._offer},a.updateState=function(){if(this._offer)switch(this._offer.state){case L.Offer.STATE_AVAILABLE:this.setAvailable(!0);break;case L.Offer.STATE_UNAVAILABLE:this.setAvailable(!1);break;case L.Offer.STATE_DISABLED:this.setDisabled()}},a.setWindowLayout=function(e){this._windowLayout=e},a.setAnimationIndex=function(e){this._animationIndex=e},a.getUserItemList=function(){return this._itemsHolder.getComponent(F.UserItemListComponent)},a._setItems=function(e){if(void 0===e&&(e=[]),e&&this._itemsHolder){var t=this.getUserItemList();if(t){var n={},o=this._stylesUserItemList.find(function(t){return t.count===e.length});o&&(n.labelScale=o.scale,n.iconScale=o.scale,t.setMaxItemsInRow(o.maxInRow));for(var a,r=D(e);!(a=r()).done;){var i=a.value;t.createItem(i,n)}t.arrange()}}},o}(cc.Component),E=K(S.prototype,"_button",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=K(S.prototype,"_animationDuration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),A=K(S.prototype,"_availableState",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=K(S.prototype,"_unavailableState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=K(S.prototype,"_disabledState",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=K(S.prototype,"_changeButtonStyleByState",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=K(S.prototype,"_buttonAvailableStyle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=K(S.prototype,"_buttonUnavailableStyle",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=K(S.prototype,"_itemsHolder",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=K(S.prototype,"_stylesUserItemList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=S))||w);n.ShopItemComponent=Z,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"5df554yuYBeyKS4RVK0cbvf","ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopWindowAppLoaderHandler=void 0;var c=function(e){function t(t){var n=t.orientation,o=t.shopPrefabsPath,a=e.call(this)||this;return a._orientation=n,a._shopPrefabsPath=o,a}return a(t,e),t.prototype._getModifiedResourcePath=function(e){if("portrait"===this._orientation.toLowerCase()&&e.includes(this._shopPrefabsPath)){var t=e.split("/"),n=t.pop();return t.pop(),i(t,[n]).join("/")}return e},t}(e("./ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)").ReplaceConfigWindowsAppLoaderHandler);n.ShopWindowAppLoaderHandler=c,cc._RF.pop()},{"./ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)":"ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)"}],"ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"74f7egQN/RK5LhT8lu+lypy","ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.ShopWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),f=e("./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),h=e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),g=e("./Offer (@tapclap.game-kit.offer-manager)"),v=e("./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)"),_=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),b=e("./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),C=e("./StickerListComponent (@tapclap.game-kit.ui.sticker)"),w=e("./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)");function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=E(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function A(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var k=cc._decorator,T=k.ccclass,I=k.property,M=(o=(0,k.menu)("Game-Kit/window-layouts/ShopWindowLayoutComponent"),a=I({type:cc.ScrollView,visible:!0}),r=I({type:w.UserItemListComponent,visible:!0}),i=I({visible:!0}),c=I({visible:!0}),T(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return A(t=e.call.apply(e,[this].concat(o))||this,"_scrollView",l,O(t)),t._items=[],A(t,"_userItemList",m,O(t)),A(t,"_boughtAnimationSpeed",u,O(t)),A(t,"_delayBetweenBoughtItems",d,O(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n);var a=o.prototype;return a._getItemPrefab=function(e){return this._options.items[e].prefab},a._createPurchaseOffer=function(e,t){var n=t.payload,o=n.product,a=n.timer,r=n.stickers;if(o&&o.isAvailable){var i=cc.instantiateFrom(this._getItemPrefab(o.type)),c=i.getComponent(y.ProductItemComponent);if(c){if(c.setWindowLayout(this),c.setProduct(o),a){var s=c.getComponent(v.ProductItemTimeWidgetComponent);s&&s.setTimer(a)}if(r){var p=c.getComponent(C.StickerListComponent);p&&(p.hideStickers(),r.forEach(function(e){var t=e.key,n=e.label,o=e.style;n&&p.setStickerLabel(t,n),o&&p.setStickerStyle(t,o),p.showSticker(t)}))}}return i}return null},a._createAdOffer=function(e,t){var n=t.payload.items;if(Array.isArray(n)&&n.length>0){var o=cc.instantiateFrom(this._getItemPrefab("ad")),a=o.getComponent(f.AdShopItemComponent);return a&&(a.setWindowLayout(this),a.setReward(n[0])),a.schedule(function(){console.log("ad"),a.updateState()},5,cc.macro.REPEAT_FOREVER),o}return null},a._createExpandItem=function(){var e=cc.instantiateFrom(this._getItemPrefab("expand")),t=e.getComponent(b.ExpandShopItemComponent);return t&&t.setWindowLayout(this),e},a._createOffer=function(e,t){switch(t.type){case g.Offer.TYPE_PURCHASE:return this._createPurchaseOffer(e,t);case g.Offer.TYPE_AD:return this._createAdOffer(e,t);case g.Offer.TYPE_EXPAND:return this._createExpandItem(e,t)}return null},a.setOffers=function(e,t){this._items=[];for(var n=0,o=0;o<t.length;o++)for(var a,r=S(t[o]);!(a=r()).done;){var i=a.value,c=this._createOffer(e,i);if(c){var s=c.getComponent(h.ShopItemComponent);s&&(s.setOffer(i),s.updateState(),s.node.active&&s.setAnimationIndex(n++),this._items.push(s)),this._pushToRow(c,o)}}this._updateRows(),this._scrollView&&this._scrollView.scrollToLeft()},a.updateState=function(){for(var e,t=S(this._items);!(e=t()).done;)e.value.updateState();this._updateRows()},a.removeOffers=function(){var e=this,t=[].concat(this._items).reverse().filter(function(e){return e.node.active}).map(function(e,t){return e.setAnimationIndex(t),e.hide()});return Promise.all(t).then(function(){for(var t=0;t<e._getRows().length;t++)e._clearRow(t);e._items=[]})},a.setUserItems=function(e){var t=this;this._userItemList&&(e.forEach(function(e){return t._userItemList.createItem(e)}),this._userItemList.arrange())},a.setUserItemsActive=function(e){this._userItemList&&(this._userItemList.node.active=e)},a.animateBought=function(e){var t=this,n=[];return this._userItemList&&function(){for(var o=t._userItemList.getItems(),a=function(){var e=i[r],a=e[0],c=e[1].iconNode,s=new Promise(function(e){var r=o[a];if(r){var i=cc.instantiate(c),s=c.parent.convertToWorldSpaceAR(c.getPosition()),p=t.node.convertToNodeSpaceAR(s),l=r.iconNode.parent.convertToWorldSpaceAR(r.iconNode.getPosition()),m=t.node.convertToNodeSpaceAR(l),u=new cc.Vec2(p.x,p.y+t.node.height/3);i.setPosition(p),t.node.addChild(i);var d=cc.Vec2.distance(p,m)/t._boughtAnimationSpeed,y=cc.sequence([cc.callFunc(function(){return i.setScale(c.width/i.width)}),cc.delayTime(t._delayBetweenBoughtItems*n.length),cc.spawn([cc.bezierTo(d,[p,u,m]),cc.scaleTo(d,r.iconNode.width/i.width)]),cc.callFunc(function(){e(),t.updateItem(a),i.destroy()})]);i.runAction(y)}else e()});n.push(s)},r=0,i=Object.entries(e.getItems());r<i.length;r++)a()}(),Promise.all(n)},a.update=function(){if(this._contentLayout&&this._scrollView&&(this._scrollView.enabled&&this._contentLayout.node.width<this._scrollView.node.width&&(this._scrollView.node.width=this._contentLayout.node.width,this._scrollView.enabled=!1),!this._scrollView.enabled&&this._contentLayout.node.width>this._scrollView.node.width)){this._scrollView.enabled=!0,this._scrollView.scrollToLeft();var e=this._scrollView.getComponent(cc.Widget);e&&e.updateAlignment()}},a.updateItem=function(e){this._userItemList&&this._userItemList.updateItem(e)},o}(_.RowContentWindowLayoutComponent),l=P(p.prototype,"_scrollView",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=P(p.prototype,"_userItemList",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=P(p.prototype,"_boughtAnimationSpeed",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=P(p.prototype,"_delayBetweenBoughtItems",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),s=p))||s)||s);n.ShopWindowLayoutComponent=M,cc._RF.pop()},{"./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)":"ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)","./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./StickerListComponent (@tapclap.game-kit.ui.sticker)":"StickerListComponent (@tapclap.game-kit.ui.sticker)","./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"}],"ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"1bf534t6SZd6ZaXPlhBwkyc","ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ShowBoosterShopWindowAction=void 0;var o=e("./HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),a=e("./BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),r=e("./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function c(t){var n;return(n=e.call(this,t)||this)._paymentService=t.paymentService,n._booster=t.booster,n}n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=c.prototype;return s._getBoosterProduct=function(){var e=this;return this._paymentService.getProducts().find(function(t){return t.key===e._booster})},s._configureWindow=function(e){var t=this,n=this._getBoosterProduct();if(n){var i=e.getLayout("header",o.HeaderWindowLayoutComponent);i&&i.setTitle(n.title);var s=e.getLayout("content",a.BoosterBuyWindowLayoutComponent);s&&s.setProduct(n);var p=e.getLayout("footer",r.FooterWindowLayoutComponent);if(p){var l=p.getControl("purchase");l&&(l.label=n.price)}this._caller.has(c.CALLER_PURCHASE)&&e.events.on("purchase",function(){return Promise.resolve().then(function(){return t._caller.run(c.CALLER_PURCHASE,{product:n})}).then(function(){return t.closeWindow(e)})})}},c}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowBoosterShopWindowAction=c,c.CALLER_PURCHASE="purchase",cc._RF.pop()},{"./BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowCakeWinLevelWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"76c88+kTXpSY42+PJ0okl6X","ShowCakeWinLevelWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ShowCakeWinLevelWindowAction=void 0;var r=e("./ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),i=function(e){function t(t){var n,o=e.call(this,t)||this;return o._progressModule=t.moduleResolvers.progress.get(),o._cakeRewardModule=t.moduleResolvers.cakeReward.get(),o._sharingDisabled=null===(n=t.sharingDisabled)||void 0===n||n,o}return a(t,e),t.prototype._configureWindow=function(t){var n=t.getLayout("content");if(this._cakeRewardModule){n.setCakeActivity(!1);var o=this._progressModule.hasChange?this._cakeRewardModule.getPrevTask():this._cakeRewardModule.getCurrentTask();o&&this._cakeRewardModule.isActive()&&!this._cakeRewardModule.isCompleted()&&(n.setCakeActivity(!0),n.updateCakeState({phase:this._cakeRewardModule.currentPhaseIndex,prevPhase:this._cakeRewardModule.prevPhaseIndex,value:o.value,prevValue:o.prevValue,totalValue:o.total,animate:this._progressModule.hasChange}))}this._sharingDisabled?n.setShareActivity(!1):n.setShareActivity(!!this._level.number),e.prototype._configureWindow.call(this,t)},t}(r.ShowWinLevelWindowAction);n.ShowCakeWinLevelWindowAction=i,r.ShowWinLevelWindowAction.CALLER_NEXT="next",r.ShowWinLevelWindowAction.CALLER_CLOSE="close",cc._RF.pop()},{"./ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":"ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"}],"ShowCandyvalleyShopWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"29368vs7w5Z4bBZMiD91/al","ShowCandyvalleyShopWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ShowCandyvalleyShopWindowAction=void 0;var i=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),c=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),s=e("./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),p=e("./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),l=e("./ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)"),m=e("./CandyvalleyShopWindowLayoutComponent (scripts.views.shop)"),u=e("./CandyvalleyBarSceneComponent (scripts.scenes)"),d=e("./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),y=e("./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),f=function(e){function t(t){var n,o=e.call(this,t)||this;return o._barMode=u.Bars.all,o._actionManager=t.actionManager,o._offerManager=t.offerManager,o._offerType=t.offerType,o._closeAfter=t.closeAfter,o._userManager=t.userManager,o._showTimer=t.showTimer,o._showMoreOffersButton=t.showMoreOffersButton,o._showAllOffers=t.showAllOffers,o._barMode=null!==(n=t.barMode)&&void 0!==n?n:o._barMode,o._di=t.di,o}return a(t,e),t.prototype._getOffers=function(){return this._offerManager.getOfferGrid(this._offerType)},t.prototype._getAllOffers=function(){return this._offerManager.getOfferGrid(this._offerType+"+")},t.prototype._configureItems=function(e){var n=this,o=e.getLayout("content",m.CandyvalleyShopWindowLayoutComponent);if(o){var a=this._showAllOffers,i=this._getOffers();a||i.flat().some(function(e){var t,n;return(null===(t=e.payload)||void 0===t?void 0:t.product)&&!(null===(n=e.payload)||void 0===n?void 0:n.product.isAvailable)})&&(a=!0),o.setOffers(e,i),e.events.on(c.ProductItemComponent.EVENT_SELECT_PRODUCT,function(t,a){Promise.resolve().then(function(){return n._caller.run(l.ShowShopWindowAction.CALLER_PURCHASE,{product:t,closeAfter:!0})}).then(function(){o.updateState();var e=a.getUserItemList();if(e){var t=e.getItems();return Object.entries(t).forEach(function(e){var t,a,i,c=r(e,2),s=(c[0],null===(t=c[1].node.getComponent(d.UserItemInfoComponent))||void 0===t?void 0:t.getIconNode());n._uiManager.addClaimAnimation({node:s,target:"currency"===n._barMode?null===(a=o.getBar())||void 0===a?void 0:a.currency.getIconNode():null===(i=o.getBar())||void 0===i?void 0:i.attempts.getIconNode()})}),n._uiManager.playClaimAnimations(!1)}}).then(function(){if(n._closeAfter)return n.closeWindow(e)})}),e.events.on(p.ExpandShopItemComponent.EVENT_SELECT,function(){n._caller.has(t.CALLER_SALE_MORE_OFFERS)&&n._caller.run(t.CALLER_SALE_MORE_OFFERS,{showAllOffers:!0}).then(function(){return n.closeWindow(e)})}),e.events.on(y.ActionShopItemComponent.EVENT_SELECT,function(e){n._actionManager.run(e.key,e.options)}),this._caller.has(l.ShowShopWindowAction.CALLER_AD)&&e.events.on(s.AdShopItemComponent.EVENT_SELECT,function(e,t){Promise.resolve().then(function(){return n._caller.run(l.ShowShopWindowAction.CALLER_AD,{items:e})}).then(function(){t.getOffer().update(),o.updateState();var e=t.getUserItemList();if(e){var a=e.getItems();return Object.entries(a).forEach(function(e){var t,a,i=r(e,2),c=(i[0],i[1].node);n._uiManager.addClaimAnimation({node:c,target:"currency"===n._barMode?null===(t=o.getBar())||void 0===t?void 0:t.currency.getIconNode():null===(a=o.getBar())||void 0===a?void 0:a.attempts.getIconNode()})}),n._uiManager.playClaimAnimations(!1)}})}),this._showMoreOffersButton?(o.setMoreOffersButtonActive(!0),e.events.once(m.CandyvalleyShopWindowLayoutComponent.MORE_OFFERS_CLICK,function(){if(n._caller.has(t.CALLER_SALE_MORE_OFFERS))return n._caller.run(t.CALLER_SALE_MORE_OFFERS,{showAllOffers:!0}).then(function(){return n.closeWindow(e)})})):o.setMoreOffersButtonActive(!1)}},t.prototype._configureWindow=function(e){this._configureItems(e);var t=e.getLayout("content",m.CandyvalleyShopWindowLayoutComponent);t.setBarMode(this._barMode),t.initBar()},t.CALLER_PURCHASE="purchase",t.CALLER_AD="ad",t.CALLER_SALE_MORE_OFFERS="sale_more_offers",t}(i.WindowAction);n.ShowCandyvalleyShopWindowAction=f,cc._RF.pop()},{"./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./CandyvalleyBarSceneComponent (scripts.scenes)":"CandyvalleyBarSceneComponent (scripts.scenes)","./CandyvalleyShopWindowLayoutComponent (scripts.views.shop)":"CandyvalleyShopWindowLayoutComponent (scripts.views.shop)","./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)":"ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)","./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"51288FMZk5bNpHN+LJdbZkL","ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),n.__esModule=!0,n.ShowCraftPartWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._caller=t.caller,n._craft=t.moduleResolver.get(),n._metaGame=t.gameResolver.get(),n._levelNumber=t.levelNumber,n._episodeNumber=t.episodeNumber,n._preview=void 0!==t.preview&&t.preview,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){var t=this,n=this._craft.getPartNumber(this._levelNumber)+1,o="meta."+this._metaGame.key+".episodes."+this._episodeNumber+".parts.part"+n,r=e.getLayout("content");if(r.setIcon(this._craft.getPartResource(this._episodeNumber),""+n),r.setTitle(o),this._preview){e.getLayout("footer").getControl("button").label="close";var i=this._getShareControl(e);i&&i.setActive(!1),e.setButtonCloseActive(!0)}e.events.once("close",function(){return t.closeWindow(e)}),e.events.on("primaryButtonClick",function(){if(t._preview)return t.closeWindow(e);t._uiManager.addClaimAnimation({node:r.getItem(),target:"recipe"});var i={partTitle:o,partNumber:n,episodeNumber:t._episodeNumber};return e.hide(),t._uiManager.playClaimAnimations().then(function(){return t.runShare(i)}).then(function(){if(t._craft.isFinalPart(t._levelNumber))return t._caller.run(a.CALLER_FINAL_PART,{levelNumber:t._levelNumber,episodeNumber:t._episodeNumber,prepareState:!0})}).then(function(){return t.closeWindow(e)}).catch(function(){})})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowCraftPartWindowAction=a,a.CALLER_FINAL_PART="default",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d05f02/nldYJLURKiws2zvE","ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)"),n.__esModule=!0,n.ShowCraftWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._caller=t.caller,n._prevWindow=t.prevWindow,n._scrollView=t.scrollView,n._metaGame=t.gameResolver.get(),n._episodes=t.moduleResolvers.episodes.get(),n._craft=t.moduleResolvers.craft.get(),n._episodeNumber=void 0===t.episodeNumber?1:t.episodeNumber,n._levelNumber=void 0===t.levelNumber?1:t.levelNumber,n._prepareState=void 0!==t.prepareState&&t.prepareState,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){var t=this,n=e.getLayout("content"),o=this._getShareControl(e),r=this._episodes.getCurrentEpisode(),i=this._episodes.getCurrentLevel(),c=this._craft.partOnLevels.length,s=this._craft.getOpenedPartsCount(this._levelNumber),p=c+1,l="meta."+this._metaGame.key+".episodes."+this._episodeNumber+".thing",m=!this._prepareState&&(this._episodeNumber<r||this._episodeNumber===r&&c<=s);n.setResource(this._craft.getPartResource(this._episodeNumber)),n.createFinalThing(m?l:"?",Number(m),!m);for(var u=function(o){var a=o+1,i=t._episodeNumber<r||t._episodeNumber===r&&o<s;n.createPart(a.toString(),!i,function(){return e.events.emit("selectPart",o)})},d=0;d<c;d++)u(d);var y=this._prepareState?a.STATE_PREPARE:a.STATE_READY;switch(y){case a.STATE_PREPARE:e.setButtonCloseActive(!1);break;case a.STATE_READY:e.getLayout("footer").getControl("button").label="goToEpisode"}o&&o.setActive(!1),e.events.on("primaryButtonClick",function(){switch(y){case a.STATE_PREPARE:n.finalItem.style=2,n.showFinalThing("meta."+t._metaGame.key+".episodes."+t._episodeNumber+".thing"),y=a.STATE_DONE,e.getLayout("footer").getControl("button").label="continue",o&&o.setActive(!0);break;case a.STATE_DONE:t._uiManager.addClaimAnimation({node:n.getItem(),target:"recipe"});var c=t.runShare({partTitle:l,partNumber:p,episodeNumber:t._episodeNumber});return t._prevWindow&&(c=c.then(function(){return t.closeWindow(t._prevWindow)})),e.hide(),t._uiManager.playClaimAnimations().then(function(){return c}).then(function(){return t.closeWindow(e)}).then(function(){return t._craft.resetThingMustCrafted()});case a.STATE_READY:var s=Promise.resolve();return t._prevWindow&&(s=t.closeWindow(t._prevWindow)),s.then(function(){return t.closeWindow(e)}).then(function(){var e=t._episodeNumber-1,n=t._episodes.getRelativeLevel(i)-1;t._episodeNumber===r?t._scrollView.scrollToLevel(e,n):t._scrollView.scrollToHolder(e,{align:-1})})}}),e.events.on("selectPart",function(e){if(t._episodeNumber<r||t._episodeNumber===r&&parseInt(e)<s)return t._caller.run(a.CALLER_DEFAULT,{episodeNumber:t._episodeNumber,levelNumber:t._craft.partOnLevels[parseInt(e)],preview:!0,queue:!1})})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowCraftWindowAction=a,a.CALLER_DEFAULT="default",a.STATE_PREPARE="prepare",a.STATE_READY="ready",a.STATE_DONE="done",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)":[function(e,t,n){"use strict";cc._RF.push(t,"61d72X9qONZOqH2kuuuMMhV","ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)"),n.__esModule=!0,n.ShowEpisodicWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./Loader (@tapclap.game-kit.loader)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._scrollView=t.scrollView,n._caller=t.caller,n._metaGame=t.gameResolver.get(),n._craft=t.moduleResolvers.craft.get(),n._progress=t.moduleResolvers.progress.get(),n._episodes=t.moduleResolvers.episodes.get(),n._stars=t.moduleResolvers.stars.get(),n._metaI18N=t.moduleResolvers.i18n.get(),n._gameResolver=t.gameResolver,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._showEpisodes=function(e,t){var n=this,o=t.getLayout("content"),r=this._stars.maxValue*this._episodes.getLevelCountPerEpisode(),i=o.getMaxVisibleEpisodesCount(),c=(Math.ceil(e/i)-1)*i+1,s=Math.min(c+i-1,this._episodes.getAvailableEpisodeCount()),p=this._episodes.getEpisodeByLevel(this._progress.value),l={},m=this._stars.fetchData(c,s).then(function(){return l=n._stars.data}).catch(function(){return l=n._stars.data});o.showItems(c,s,p).then(function(){for(var e=function(e){var c=o.items[(e-1)%i];c.setProgress(0,r),c.setSpinner(!0),m=m.then(function(){return n._metaGame.setCurrentEpisode(e),Promise.all([n._metaI18N.getDataToLoad(),n._craft.getDataToLoad()])}).then(function(e){var t=e[0],n=e[1];return a.Loader.load([].concat(t,n))}).then(function(){for(var a=0,i=n._episodes.getAbsoluteLevelRangeByEpisode(e),s=i[0],m=i[1],u=s;u<=m;u++)a+=l[u]||0;c.setNumber(e,p),c.setSpinner(!1),c.setProgress(a,r),c.setIcon(n._craft.getPartResource(e),"4"),c.setIconShadow(e>=p&&n._progress.value<=m,{material:o.shadowMaterial,color:o.shadowColor}),e<=p&&c.events.on("select",function(){return t.events.emit("showCollectItem",e)})}).catch(function(){})},u=c;u<=s;u++)e(u)}).catch(function(){}),o.toggleNavButton("prev",!(1===c)),o.toggleNavButton("next",!(s===this._episodes.getAvailableEpisodeCount()))},i._configureWindow=function(e){var t=this,n=e.getLayout("content"),a=Math.min(this._episodes.getAvailableEpisodeCount(),this._episodes.getEpisodeByLevel(this._progress.value));this._showEpisodes(a,e),e.events.on("prevButtonClick",function(){return a=Math.max(1,a-n.getMaxVisibleEpisodesCount()),t._showEpisodes(a,e)}),e.events.on("nextButtonClick",function(){return a=Math.min(t._episodes.getAvailableEpisodeCount(),a+n.getMaxVisibleEpisodesCount()),t._showEpisodes(a,e)}),e.events.on("showCollectItem",function(n){return t._caller.run(o.CALLER_COLLECT_ITEM,{episodeNumber:n,levelNumber:t._episodes.getRelativeLevel(t._progress.value),scrollView:t._scrollView,prevWindow:e})})},o}(o.WindowAction);n.ShowEpisodicWindowAction=i,i.CALLER_COLLECT_ITEM="default",cc._RF.pop()},{"./Loader (@tapclap.game-kit.loader)":"Loader (@tapclap.game-kit.loader)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"49f8a1eBctQd7o19F+d9YYI","ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ShowExitLevelWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._level=t.level,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){var t=this;e.events.once("stay",this.closeWindow.bind(this,e)),this._caller.has(a.CALLER_EXIT)&&e.events.once("exit",function(){Promise.resolve().then(function(){return t._caller.run(a.CALLER_EXIT,{level:t._level})}).then(function(){return t.closeWindow(e)})})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowExitLevelWindowAction=a,a.CALLER_EXIT="exit",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowFriendsWindowAction (scripts.actions)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"34a6bMqCLlSHo6scWzDSmyX","ShowFriendsWindowAction (scripts.actions)"),n.__esModule=!0,n.ShowFriendsWindowAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._chartModule=t.chartModuleResolver.get(),n._caller=t.caller,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getTop=function(){var e=this;return this._chartModule?Promise.resolve().then(function(){return e._chartModule.sync()}).then(function(){return e._chartModule.getChartBuilder().setAvailableCurrentUser(!0).setLimit(20).build()}):Promise.resolve([])},r._configureWindow=function(e){var t=this,n=e.getLayout("content");this._caller&&e.events.on("invite",function(){return t._caller.run("invite").catch(function(){})}),this._getTop().then(function(e){n.setUsers(e),n.toggleEmptyListMessage(1===e.length)})},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowFriendsWindowAction=a,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"aabc8wsykxUWr1Dbh0Esww7","ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)"),n.__esModule=!0,n.ShowInviteAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._socialService=t.socialService,n._socialRequest=t.socialRequest,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){var e=this._socialService.getCurrentAdapter();return e?e.showInvite(this._socialRequest):Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.ShowInviteAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"ShowLoseLevelBombExplodeWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"55295NwK/RTkJi7pCAOFxu7","ShowLoseLevelBombExplodeWindowAction (scripts.actions)"),n.__esModule=!0,n.ShowLoseLevelBombExplodeWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./Offer (@tapclap.game-kit.offer-manager)"),r=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._offers=t.moduleResolvers.offers.get(),n._level=t.level,n._game=t.game,n._offersKey=t.offersKey,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c._configureWindow=function(e){var t=this,n=this._offers.getOffers(this._offersKey).filter(function(e){return e.state===a.Offer.STATE_AVAILABLE})[0];this._configureControls(e,n),e.events.on("selectOffer",function(){var r=n.payload,i=r.product,c=r.items,s=Promise.resolve();switch(n.type){case a.Offer.TYPE_AD:s=t._caller.run(o.CALLER_WATCH_AD,{items:c});break;case a.Offer.TYPE_PURCHASE:s=t._caller.run(o.CALLER_PURCHASE,{product:i});break;default:s=Promise.reject()}return Promise.resolve().then(function(){return s}).then(function(){return t._game.runPipeline()}).then(function(){return e.playSound("purchaseMoves")}).then(function(){return n.update(),t._caller.run(o.CALLER_CONTINUE,{offer:n,level:t._level,game:t._game})}).then(function(){return t.closeWindow(e)})}),this._caller.has(o.CALLER_EXIT)&&e.events.on(r.WindowComponent.EVENT_CLOSE,function(){return t._caller.run(o.CALLER_EXIT,{level:t._level})})},c._configureControls=function(e,t){var n,o,r=e.getLayout("content"),i=e.getLayout("footer"),c=i.getControl("purchase"),s=i.getControl("ad");switch(r.setMovesCount((null==(n=t.payload)?void 0:null==(o=n.moves)?void 0:o.amount)||0),t.type){case a.Offer.TYPE_AD:c&&(c.node.active=!1);break;case a.Offer.TYPE_PURCHASE:s&&(s.node.active=!1),c.label=t.payload.product.price}},o}(o.WindowAction);n.ShowLoseLevelBombExplodeWindowAction=c,c.CALLER_CONTINUE="continue",c.CALLER_WATCH_AD="ad",c.CALLER_PURCHASE="purchase",c.CALLER_EXIT="exit",cc._RF.pop()},{"./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"6588cpoSyRU2IY8TYKYWsp5","ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ShowLoseLevelWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./Offer (@tapclap.game-kit.offer-manager)"),r=e("./LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),i=e("./BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),c=e("./AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)");function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._offers=t.moduleResolvers.offers.get(),n._attempts=t.moduleResolvers.attempts.get(),n._loseLevelState=t.loseLevelState,n._level=t.level,n._game=t.game,n._offersKey=t.offersKey,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var p=o.prototype;return p._getBeforeLoseStateData=function(){var e={offers:[]};return this._offers&&(e.offers=this._offers.getOffers(this._offersKey)),e},p._getAfterLoseStateData=function(){var e={isCountableAttempts:!1};if(this._attempts){var t=this._attempts.getState();t&&(e.isCountableAttempts=t.getCountAttempts()!==1/0)}return e},p._getInitialState=function(){return void 0!==this._loseLevelState?this._loseLevelState:r.LoseLevelWindowLayoutComponent.STATE_AFTER_LOSE},p._getInitialStateData=function(){switch(this._getInitialState()){case r.LoseLevelWindowLayoutComponent.STATE_BEFORE_LOSE:return this._getBeforeLoseStateData();case r.LoseLevelWindowLayoutComponent.STATE_AFTER_LOSE:return this._getAfterLoseStateData()}return{}},p._configureWindow=function(e){var t=this,n=e.getLayout("content",r.LoseLevelWindowLayoutComponent);n&&(n.setState(this._getInitialState(),this._getInitialStateData(),!0),e.events.on("selectOffer",function(n){var r=n.payload,i=r.moves,c=r.product,s=r.items;if(i){var p=Promise.resolve();switch(n.type){case a.Offer.TYPE_AD:p=t._caller.run(o.CALLER_WATCH_AD,{items:s});break;case a.Offer.TYPE_PURCHASE:p=t._caller.run(o.CALLER_PURCHASE,{product:c});break;default:p=Promise.reject()}return Promise.resolve().then(function(){return p}).then(function(){return t._game.runPipeline()}).then(function(){return e.playSound("purchaseMoves")}).then(function(){return t._caller.run(o.CALLER_CONTINUE,{offer:n,level:t._level,game:t._game})}).then(function(){return t.closeWindow(e)})}}),e.events.once(i.BeforeLoseLevelState.EVENT_DEFEAT,function(){t._caller.has(o.CALLER_DEFEAT)&&t._caller.run(o.CALLER_DEFEAT),n.setState(r.LoseLevelWindowLayoutComponent.STATE_AFTER_LOSE,t._getAfterLoseStateData())}),this._caller.has(o.CALLER_REPEAT)&&e.events.once(c.AfterLoseLevelState.EVENT_TRYAGAIN,function(){return t._caller.run(o.CALLER_REPEAT,{level:t._level})}),this._caller.has(o.CALLER_EXIT)&&e.events.once(c.AfterLoseLevelState.EVENT_EXIT,function(){return t._caller.run(o.CALLER_EXIT,{level:t._level})}))},o}(o.WindowAction);n.ShowLoseLevelWindowAction=p,p.CALLER_CONTINUE="continue",p.CALLER_WATCH_AD="ad",p.CALLER_PURCHASE="purchase",p.CALLER_REPEAT="repeat",p.CALLER_EXIT="exit",p.CALLER_DEFEAT="defeat",cc._RF.pop()},{"./AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowMenuWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"9dc1eOXClZbBJ+cC8Tl9Otm","ShowMenuWindowAction (scripts.actions)"),n.__esModule=!0,n.ShowMenuWindowAction=void 0;var o=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),a=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),r=e("./WindowManager (@tapclap.game-kit.ui.window-manager)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._settings=t.settings,n._music=t.musicModuleResolver.get(),n._socialService=t.socialService,n._sceneManager=t.sceneManager,n._storage=t.storage,n._control=t.control,n._configService=t.configService,n._languageSettingsEnabled=t.languageSettingsEnabled,n._languageControlKey=t.languageControlKey,n._i18n=t.i18n,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),a.prototype._configureWindow=function(e){var t=this,n=e.getLayout("content");if(this._control){var i=n.getControl(this._control.key);i.setActive(!0),i.events.on(o.ButtonControlComponent.EVENT_CLICK,function(){return Promise.resolve().then(function(){return t._caller.run(t._control.caller,t._control.options)}).then(function(){return t.closeWindow(e)})})}for(var c=this._userManager.getCurrentUser().settings,s=this._settings||{},p={music:function(e){t._music&&(e?t._music.resume():t._music.stop())}},l=function(){var e=u[m],t=e[0],a=e[1],r=n.getControl(t);r&&(n.setControlToggled(t,c.get(a)),r.events.on(o.ButtonControlComponent.EVENT_CLICK,function(e){c.set(a,e);var n=p[t];n&&n(e)}))},m=0,u=Object.entries(s);m<u.length;m++)l();var d=this._socialService.getCurrentAdapter();[{controlKey:"community",url:d&&d.getCommunityUrl(),layoutKey:"content",caller:a.CALLER_COMMUNITY},{controlKey:"policy",url:d&&d.getPrivacyPolicyUrl(),caller:a.CALLER_PRIVACY_POLICY,layoutKey:"footer",hideLayout:!0},{controlKey:"terms",url:d&&d.getTermsUrl(),caller:a.CALLER_TERMS,layoutKey:"footer",hideLayout:!0}].forEach(function(n){var a=n.controlKey,r=n.url,i=n.layoutKey,c=n.hideLayout,s=void 0!==c&&c,p=n.caller,l=e.getLayout(i);if(l){var m=l.getControl(a);if(m){if(r)return void m.events.on(o.ButtonControlComponent.EVENT_CLICK,function(){return t._caller.run(p,{url:r})});m.setActive(!1),s&&l.hide()}}});var y=this._actions.find(function(e){return"skins"===e.controlKey}).controlKey;if(y&&(!this._sceneManager.getCurrentSceneComponent().game||!this._configService.getValue("debug"))){var f=n.getControl(y);f&&(f.node.active=!1)}var h=function(){n.setControlLabel(t._languageControlKey,t._i18n.t("languageName"))};h(),this._actions&&this._actions.forEach(function(a){var i=a.controlKey,c=a.event,s=a.caller,p=n.getControl(i),l=t._languageSettingsEnabled&&i===t._languageControlKey;if(p){var m=!0;l&&p.setActive(!0),p.events.on(o.ButtonControlComponent.EVENT_CLICK,function(){l?t._caller.run(s,{changingLanguageCallback:h.bind(t)}):(m&&e.events.emit(c),m=!1,t._windowManager.once(r.WindowManager.EVENT_SHOWN,function(){m=!0}))})}})},a}(a.WindowAction);n.ShowMenuWindowAction=c,c.CALLER_PRIVACY_POLICY="privacyPolicy",c.CALLER_TERMS="terms",c.CALLER_COMMUNITY="community",cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowManager (@tapclap.game-kit.ui.window-manager)":"WindowManager (@tapclap.game-kit.ui.window-manager)"}],"ShowParrotFailWalkWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"a19814KF8dXfZZShLL07ok/","ShowParrotFailWalkWindowAction (scripts.actions)"),n.__esModule=!0,n.ShowParrotFailWalkWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./Offer (@tapclap.game-kit.offer-manager)"),r=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._offers=t.moduleResolvers.offers.get(),n._level=t.level,n._game=t.game,n._offersKey=t.offersKey,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c._configureWindow=function(e){var t=this,n=this._offers.getOffers(this._offersKey).filter(function(e){return e.state===a.Offer.STATE_AVAILABLE})[0];this._configureControls(e,n),e.events.on("selectOffer",function(){var r=n.payload,i=r.product,c=r.items,s=Promise.resolve();switch(n.type){case a.Offer.TYPE_AD:s=t._caller.run(o.CALLER_WATCH_AD,{items:c});break;case a.Offer.TYPE_PURCHASE:s=t._caller.run(o.CALLER_PURCHASE,{product:i});break;default:s=Promise.reject()}return Promise.resolve().then(function(){return s}).then(function(){return e.playSound("purchaseMoves")}).then(function(){return n.update(),t._caller.run(o.CALLER_CONTINUE,{offer:n,level:t._level,game:t._game})}).then(function(){return t.closeWindow(e)}).then(function(){return t._game.runPipeline()})}),this._caller.has(o.CALLER_EXIT)&&e.events.on(r.WindowComponent.EVENT_CLOSE,function(){return t._caller.run(o.CALLER_EXIT,{level:t._level})})},c._configureControls=function(e,t){var n=e.getLayout("footer"),o=n.getControl("purchase"),r=n.getControl("ad");switch(t.type){case a.Offer.TYPE_AD:o&&(o.node.active=!1);break;case a.Offer.TYPE_PURCHASE:r&&(r.node.active=!1),o.label=t.payload.product.price}},o}(o.WindowAction);n.ShowParrotFailWalkWindowAction=c,c.CALLER_CONTINUE="continue",c.CALLER_PURCHASE="purchase",c.CALLER_WATCH_AD="ad",c.CALLER_EXIT="exit",cc._RF.pop()},{"./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"c09b7HjDN1cvp/DgnXm5nV7","ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)"),n.__esModule=!0,n.ShowShopWindowAction=void 0;var o=e("./ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),a=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),r=e("./CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),i=e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),c=e("./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),s=e("./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),p=e("./Offer (@tapclap.game-kit.offer-manager)"),l=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._offerManager=t.offerManager,n._offerType=t.offerType,n._closeAfter=t.closeAfter,n._userManager=t.userManager,n._userItemsConfig=t.userItemsConfig,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var u=a.prototype;return u._getOffers=function(){return this._offerManager.getOfferGrid(this._offerType)},u._getAllOffers=function(){return this._offerManager.getOfferGrid(this._offerType+"+")},u._configureCoins=function(e){var t=this._userManager.getCurrentUser().items.get("currency","coins"),n=e.getLayout("headerContent",r.CoinsWindowLayoutComponent);n&&t&&(n.setCoins(t.amount),n.listenTo(t,"change",function(){n.setCoins(t.amount,!0)}))},u._configureItems=function(e){var t=this,n=e.getLayout("content",o.ShopWindowLayoutComponent);if(n){var r=this._getAllOffers(),p=this._prepareShortOffers(this._getOffers(),r);n.setOffers(e,p),e.events.on(i.ProductItemComponent.EVENT_SELECT_PRODUCT,function(o,r){Promise.resolve().then(function(){return t._caller.run(a.CALLER_PURCHASE,{product:o,closeAfter:!0})}).then(function(){var e=r.getUserItemList();if(e)return n.animateBought(e)}).then(function(){n.updateItem(t._userItemsConfig.currency)}).then(function(){if(t._closeAfter)return t.closeWindow(e);n.updateState()})}),e.events.on(s.ExpandShopItemComponent.EVENT_SELECT,function(){n.removeOffers().then(function(){n.setOffers(e,r)})}),this._caller.has(a.CALLER_AD)&&e.events.on(c.AdShopItemComponent.EVENT_SELECT,function(e,o){Promise.resolve().then(function(){return t._caller.run(a.CALLER_AD,{items:e})}).then(function(){var e=o.getUserItemList();if(e)return n.animateBought(e)}).then(function(){return n.updateState()})})}},u._configureWindow=function(e){var t=this;this._configureCoins(e),this._configureItems(e),this._configureUserItems(e),e.events.on(l.WindowComponent.EVENT_SHOW,function(){t._configureUserItems(e)})},u._configureUserItems=function(e){var t=e.getLayout("content",o.ShopWindowLayoutComponent),n=this._userManager.getCurrentUser(),a=this._userItemsConfig.allowed.map(function(e){var t=e.split(":"),o=t[0],a=t[1];return n.items.get(o,a)}).filter(function(e){return!e.availability||e.availability.isAvailable()});t.setUserItems(a)},u._prepareShortOffers=function(e,t){var n=function(e,t){void 0===t&&(t=[]);var n=[];return e.forEach(function(e){n.push.apply(n,e.filter(function(e){var n=e.payload.product;return!t.includes(e.type)&&(n&&n.isAvailable||!n)}))}),n},o=n(e,[p.Offer.TYPE_EXPAND]),a=n(t,[p.Offer.TYPE_EXPAND]);if(o.length===a.length){for(var r,i=[],c=m(e);!(r=c()).done;){var s=r.value;i.push(s.filter(function(e){return e.type!==p.Offer.TYPE_EXPAND}))}return i}return e},a}(a.WindowAction);n.ShowShopWindowAction=f,f.CALLER_PURCHASE="purchase",f.CALLER_AD="ad",cc._RF.pop()},{"./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./Offer (@tapclap.game-kit.offer-manager)":"Offer (@tapclap.game-kit.offer-manager)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)":[function(e,t,n){"use strict";cc._RF.push(t,"20ea3apt6RedaZ/hUIS+W+G","ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ShowSpecialLevelTutorialWindowAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._level=t.level,n._levels=t.moduleResolvers.levels.get(),n._storage=t.storage,n}return a(t,e),t.prototype._configureWindow=function(n){var o=this;this._caller.has(t.CALLER_PLAY)&&n.events.once("play",function(){o._caller.run(t.CALLER_PLAY,{level:o._level})}),n.events.once("skip",function(){o.closeWindow(n),o._storage.setItem("speciallevel:"+o._level.name+":passed",!0)}),e.prototype._configureWindow.call(this,n)},t.CALLER_PLAY="next",t.CALLER_SKIP="skip",t}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowSpecialLevelTutorialWindowAction=r,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowStartLevelWithBoostersWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"49f2eqeZYlXaodPPEtSw1gP","ShowStartLevelWithBoostersWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ShowStartLevelWithBoostersWindowAction=void 0;var i=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),c=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),s=function(e){function t(t){var n=e.call(this,t)||this;n._progress=null,n._levels=null,n._spendBoosters=[],n._level=t.level,n._progress=t.moduleResolvers.progress.get(),n._levels=t.moduleResolvers.levels.get(),n._startBoostersData=t.startBoostersData;var o=n._resolveWindowKey(t.windowKeyResolvers||[],{level:n._level});return o&&(n._window={key:o}),n}return a(t,e),t.prototype._configureWindow=function(e){var n=this,o=e.getLayout("content");if(o.setLevel(this._level.number,this._level.hard?"hardLevel":"level"),o.setGoals(this._level.goals.map(function(e){return{icon:n._level.resources["task-"+e.entity],label:e.total}})),this._caller.has(t.CALLER_CHECK_ATTEMPTS)&&e.events.on("changeStartBoosterUsing",function(e){e.isBoosterUsing&&!n._spendBoosters.find(function(t){var n=t.spec,o=t.name;return n===e.getSpec()&&o===e.getType()})?n._spendBoosters.push({spec:e.getSpec(),name:e.getType()}):e.isBoosterUsing||(n._spendBoosters=n._spendBoosters.filter(function(t){var n=t.spec,o=t.name;return!(n===e.getSpec()&&o===e.getType())}))}),o.setStartBoosters(this._startBoostersData),this._caller.has(t.CALLER_CLOSE)&&e.events.on(c.WindowComponent.EVENT_CLOSE,function(){return n._caller.run(t.CALLER_CLOSE)}),this._caller.has(t.CALLER_CHECK_ATTEMPTS)&&e.events.on("start",function(){return n._spendBoosters.forEach(function(e){var t=n._startBoostersData.find(function(t){return t.showTutorial&&e.name===t.type});if(t){var o=n._userManager.getCurrentUser().items;o.charge([o.create({spec:"startbooster",name:t.type,amount:1})])}}),n._caller.run(t.CALLER_CHECK_ATTEMPTS,{level:n._level,spendStartBoosters:n._spendBoosters})}),this._caller.has(t.CALLER_PURCHASE_BOOSTER)){var a=!0;e.events.on("purchaseBooster",function(e){if(a)return a=!1,n._caller.run(t.CALLER_PURCHASE_BOOSTER,{booster:e.booster})}),e.events.on(c.WindowComponent.EVENT_SHOW,function(){a=!0,o.updateStartBoosters()})}},t.prototype._resolveWindowKey=function(e,t){var n,o;try{for(var a=r(e),i=a.next();!i.done;i=a.next()){var c=i.value.getKey(t);if(c)return c}}catch(s){n={error:s}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}},t.CALLER_CHECK_ATTEMPTS="checkAttempts",t.CALLER_CLOSE="close",t.CALLER_PURCHASE_BOOSTER="purchaseBooster",t}(i.WindowAction);n.ShowStartLevelWithBoostersWindowAction=s,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ShowUserIdWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"91cd9sI8gFUTIc5AijYlKvo","ShowUserIdWindowAction (scripts.actions)"),n.__esModule=!0,n.ShowUserIdWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._configureWindow=function(e){var t=this._userManager.getCurrentUser();e.getLayout("content").setId(t.id),e.getLayout("footer").getControl("copy").events.on(a.ButtonControlComponent.EVENT_CLICK,this._copyText,this)},i._copyText=function(){var e=this._userManager.getCurrentUser(),t=document.createElement("textarea");t.style.position="fixed",t.style.opacity="0",t.textContent=e.id,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},o}(o.WindowAction);n.ShowUserIdWindowAction=i,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"73efeJO9LdUK7EIOp76trST","ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)"),n.__esModule=!0,n.ShowWebViewWindow=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._url=t.url,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype._configureWindow=function(e){e.getLayout("content").setWebViewUrl(this._url)},a}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowWebViewWindow=a,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";cc._RF.push(t,"6c9e99E4kZUNoIM9z3iFFWI","ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.ShowWinLevelWindowAction=void 0;var o=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this)._game=t.game,n._level=t.level,n._beforeNextGame=t.beforeNextGame,n._stars=t.moduleResolvers.stars.get(),n._score=t.moduleResolvers.score.get(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i._getShareControl=function(e){var t=e.getLayout("content");return t?t.getShareControl():null},i._configureWindow=function(e){var t=this,n=e.getLayout("content"),a=this._game.getScore(),i=this._game.getStars();this._stars?(n.setStarsActive(!0),this._level.number&&this._stars.setValue(this._level.number,i),e.events.on(o.WindowComponent.EVENT_SHOWN,function(){e.node.runAction(cc.sequence([cc.delayTime(.8),cc.callFunc(function(){return n.setStars(i)})]))})):n.setStarsActive(!1),this._score&&(n.setScore(a),this._level.number&&this._score.setValue(this._level.number,a)),this._caller.has(r.CALLER_CLOSE)&&e.events.on(o.WindowComponent.EVENT_CLOSE,function(){return t._caller.run(r.CALLER_CLOSE)}),this._caller.has(r.CALLER_NEXT)&&e.events.once("continue",function(){var e={level:t._level.number,score:a};Promise.resolve().then(function(){return t._beforeNextGame&&t._beforeNextGame()}).then(function(){return t._level.number?t.runShare(e):Promise.resolve()}).then(function(){return t._caller.run(r.CALLER_NEXT,{level:t._level})})})},r}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ShowWinLevelWindowAction=r,r.CALLER_NEXT="next",r.CALLER_CLOSE="close",cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"eb5e9TA/OdRtpBgsBRQCfCB","ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.ShuffleAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),r=e("./SpineAnimation (@tapclap.match-x.cocos.animations)"),i=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)");function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,o=t.spine,a=t.audioEffectsPlayer;return(n=e.call(this)||this)._spine=o,n._audioEffectsPlayer=a,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){for(var t=this,n=[],o=e.data.map(function(e){return{entity:e.entity,cell:e.path[0]}}).sort(function(e,t){var n=e.entity,o=t.entity,a=n.getComponent("render").node.position.mag(),r=o.getComponent("render").node.position.mag();return a<r?-1:a>r?1:0}),p=.75/(o.length+1),l=function(e){var t=o[e],r=t.entity,i=t.cell,c=r.getComponent("render").node,s=i.getComponent("render").node,l=c.zIndex,m=Math.min(1+Math.random(),1.25);n.push({target:r,animation:new a.ActionAnimation(cc.sequence([cc.delayTime(p*e),cc.callFunc(function(){return c.zIndex=c.parent.childrenCount+e}),cc.spawn([cc.bezierTo(.75,[c.position,cc.v2(),s.position]),cc.sequence([cc.scaleTo(.375,m,m),cc.scaleTo(.375,1,1)])]),cc.callFunc(function(){return c.zIndex=l})]).easing(cc.easeSineOut()),c)})},m=0;m<o.length;m++)l(m);return this._spine&&n.push({animation:new s.GroupAnimation([this._audioEffectsPlayer.create("shuffleField"),new i.ChainAnimation([new c.FunctionAnimation(function(){return t._spine.node.active=!0}),new r.SpineAnimation(this._spine,{animationTime:.75+p*o.length,loop:!1}),new c.FunctionAnimation(function(){return t._spine.node.active=!1})])])}),[n]},o}(o.GameActionBuilder);n.ShuffleAnimationBuilder=l,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)"}],"ShuffleComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"93fcaUHA6ZXOJCTFU3fuNQ2","ShuffleComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ShuffleComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ShuffleComponent=a,a.KEY="shuffle",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"216ebNcoGtYeJAbC5lldSSv","ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ShuffleFailLoseGameStrategy=void 0;var r=e("./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),i=e("./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"),c=function(e){function t(t){var n=e.call(this,{reason:t.reason})||this;return n._world=t.world,n}return a(t,e),t.prototype.isLose=function(){var e;return null===(e=this._world.getState(i.ShuffleSystem.STATE_FAIL))||void 0===e?void 0:e.data},t}(r.LoseGameStrategy);n.ShuffleFailLoseGameStrategy=c,cc._RF.pop()},{"./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","./ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"}],"ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)":[function(e,t,n){"use strict";cc._RF.push(t,"1164bv1clRbwqanNWkV2Ygs","ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ShuffleGridOnDeathOnTurnEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="shuffleGridOnDeathOnTurnEnd",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ShuffleGridOnDeathOnTurnEndComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)":[function(e,t,n){"use strict";cc._RF.push(t,"740f3y42XJVw5OhWCwP0x/T","ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ShuffleOnDeathOnEndTurnSystem=void 0;var i=e("./ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)"),c=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),s=e("./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)"),p=function(e){function t(t){var n=t.world,o=t.skipOnStates,a=void 0===o?[]:o,r=t.shuffleSystem,i=e.call(this)||this;return i._shuffleEntity=null,i._skipOnStates=[],i._world=n,i._skipOnStates=a,i._shuffleSystem=r,i}return a(t,e),t.prototype.process=function(){var e,n,o,a,c=this,p=null!==(a=null===(o=this._world.getState(s.EntityDeathSystem.STATE))||void 0===o?void 0:o.data)&&void 0!==a?a:[];try{for(var l=r(p),m=l.next();!m.done;m=l.next()){var u=m.value.entity,d=u.getEnabledComponentByClass(i.ShuffleGridOnDeathOnTurnEndComponent);!this._shuffleEntity&&d&&(this._shuffleEntity=u)}}catch(y){e={error:y}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this._shuffleEntity&&!this._skipOnStates.some(function(e){var t;return null===(t=c._world.getState(e))||void 0===t?void 0:t.data})?(this._world.setState(t.STATE_PREFIX+":"+this._shuffleEntity.type,this._shuffleEntity),this._shuffleEntity=null,this._shuffleSystem.shuffle(!1),!0):!!this._shuffleEntity},t.STATE_PREFIX="shuffleOnDeathOnEndTurn",t.KEY="shuffleOnDeathOnEndTurn",t}(c.PipelineProcessSystem);n.ShuffleOnDeathOnEndTurnSystem=p,cc._RF.pop()},{"./EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)":"EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)":"ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)"}],"ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d93809juY1aH4BD7ejUTWaB","ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)"),n.__esModule=!0,n.ShuffleSystem=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._world=t.world,n._random=t.random,n._gridChecker=t.gridChecker,n._strategy=t.strategy,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.shuffle=function(e){void 0===e&&(e=!1);var t=this._world.getEnabledComponent("tiles");if(!this._strategy)throw new Error("Shuffle strategy not defined");if(t){var n=[],o=0;do{if(n=this._strategy.shuffle(t.grid),o++>a.MAX_SHUFFLE_COUNT){if(e)throw new Error("The maximum number of shuffling attempts has been reached");return this._world.setState(a.STATE_FAIL,!0),void this._world.setState(a.STATE,n)}}while(!this._gridChecker.check(t.grid));e||this._world.setState(a.STATE,n)}},r.process=function(){return this._world.getState(a.STATE_DO_SHUFFLE)&&this.shuffle(),!1},r.postProcess=function(e){if(e){var t=this._world.getEnabledComponent("tiles");if(t){var n=t.grid.getEnabledComponent("turn");n&&!n.currentAvailableTurn&&this.shuffle()}}},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.ShuffleSystem=a,a.KEY="shuffle",a.STATE="shuffle",a.STATE_FAIL="shuffleFail",a.STATE_DO_SHUFFLE="doShuffle",a.MAX_SHUFFLE_COUNT=100,a.STRATEGY_ACTIVE="active",a.STRATEGY_PASSIVE="passive",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)":[function(e,t,n){"use strict";cc._RF.push(t,"6f4388c0FdbZJWBf/DDJgNd","ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)"),n.__esModule=!0,n.ShuffleSystemStrategy=void 0;var o=function(){function e(){}return e.prototype.shuffle=function(){return[]},e}();n.ShuffleSystemStrategy=o,cc._RF.pop()},{}],"SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"44577k3nA1eW48vKIHeZOcu","SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleColumnGroundSystemStrategy=void 0;var s=e("./DirectionComponent (@tapclap.match-x.engine.components)"),p=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),l=e("./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)"),m=e("./GridComponent (@tapclap.match-x.engine.components)"),u=e("./MatrixIteratorFactory (@tapclap.match-x.engine.models)"),d=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._processedColumns=new Set,o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=[];this._processedColumns.clear();var a=function(e){var t=e.getEnabledComponentByClass(s.DirectionComponent);e.forEach(u.MatrixIteratorFactory.createDropIterator(t.direction.inverse(),e),function(a){e.forEach(u.MatrixIteratorFactory.createCellIterator(t.direction.inverse(),a),function(t){o.push.apply(o,i(n._processCell(e,t)))})})};try{for(var r=c(this._world.getComponentsByClass(m.GridComponent)),p=r.next();!p.done;p=r.next())a(p.value.grid)}catch(l){e={error:l}}finally{try{p&&!p.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return o},t.prototype._isValidEntity=function(e){return!(!e.getEnabledComponentByClass(p.ExplodeComponent)||!e.getEnabledComponentByClass(l.ExplodeOnGroundComponent))},t.prototype._processCell=function(e,t){var n=this,o=[];return t.isEnabled&&!this._processedColumns.has(t.col)&&(t.entities.forEach(function(a){n._isValidEntity(a)&&o.push({grid:e,cell:t,entity:a})}),this._processedColumns.add(t.col)),o},t}(e("./GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)").GroundSystemStrategy);n.SimpleColumnGroundSystemStrategy=d,cc._RF.pop()},{"./DirectionComponent (@tapclap.match-x.engine.components)":"DirectionComponent (@tapclap.match-x.engine.components)","./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeOnGroundComponent (@tapclap.match-x.engine.components)":"ExplodeOnGroundComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)":"GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)","./MatrixIteratorFactory (@tapclap.match-x.engine.models)":"MatrixIteratorFactory (@tapclap.match-x.engine.models)"}],"SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)":[function(e,t,n){"use strict";cc._RF.push(t,"c8397NwzKNVoq9n+eCjc2mU","SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleComponentShuffleSystemStrategy=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._random=t.random,n._componentKeys=t.componentKeys,n}return a(t,e),t.prototype.shuffle=function(e){for(var t,n,o,a,i=[],c=[],s=[],p=0;p<e.rows;p++){c.push([]);for(var l=function(t){var n=e.getCell(p,t,!0);n.isFill&&m._componentKeys.every(function(e){return n.getEntity().getEnabledComponent(e)})&&(c[p].push(n),s.push(n.getEntity()),n.setEntity(null))},m=this,u=0;u<e.cols;u++)l(u)}this._random.shuffle(s);try{for(var d=r(c),y=d.next();!y.done;y=d.next()){var f=y.value;try{for(var h=(o=void 0,r(f)),g=h.next();!g.done;g=h.next()){var v=g.value;v.setEntity(s.pop()),v.isFill&&i.push({entity:v.getEntity(),path:[v]})}}catch(_){o={error:_}}finally{try{g&&!g.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}}catch(b){t={error:b}}finally{try{y&&!y.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return i},t}(e("./ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)").ShuffleSystemStrategy);n.SimpleComponentShuffleSystemStrategy=i,cc._RF.pop()},{"./ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)":"ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)"}],"SimpleGoal (@tapclap.match-x.engine.goals)":[function(e,t,n){"use strict";cc._RF.push(t,"863966m0gBXpYLpBoBfSP9E","SimpleGoal (@tapclap.match-x.engine.goals)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleGoal=void 0;var r=function(e){function t(t,n,o,a){void 0===n&&(n=0),void 0===o&&(o=0);var r=e.call(this)||this;return r._total=n,r._count=o,r._entityTypes=Array.isArray(t)?t:[t],r._type=a||r._entityTypes[0],r}return a(t,e),t.prototype.process=function(e,t){if(void 0===t&&(t=1),this.isGoal(e))return this.isCompleted||(this._count=Math.min(Math.max(this._count+t,0),this._total)),!0},t.prototype.isGoal=function(e){return this._entityTypes.includes(e.type)},t.prototype.isGoalByType=function(e){return this._entityTypes.includes(e)},Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this.count>=this.total},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._total},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return"task-"+this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityTypes",{get:function(){return this._entityTypes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"counter",{get:function(){return this.total-this.count},enumerable:!1,configurable:!0}),t}(e("./Goal (@tapclap.match-x.engine.goals)").Goal);n.SimpleGoal=r,cc._RF.pop()},{"./Goal (@tapclap.match-x.engine.goals)":"Goal (@tapclap.match-x.engine.goals)"}],"SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"58dd90NnW9b1o5ZlHVqmESG","SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)"),n.__esModule=!0,n.SimpleGoalCreator=void 0;var o=e("./SimpleGoal (@tapclap.match-x.engine.goals)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.create=function(e){var t=void 0===e?{}:e,n=t.entityTypes,a=t.total,r=t.count,i=t.type;return new o.SimpleGoal(n,a,r,i)},r}(e("./GoalCreator (@tapclap.match-x.engine.goals.creators)").GoalCreator);n.SimpleGoalCreator=r,cc._RF.pop()},{"./GoalCreator (@tapclap.match-x.engine.goals.creators)":"GoalCreator (@tapclap.match-x.engine.goals.creators)","./SimpleGoal (@tapclap.match-x.engine.goals)":"SimpleGoal (@tapclap.match-x.engine.goals)"}],"SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)":[function(e,t,n){"use strict";cc._RF.push(t,"447e5UDWWhWBZ5fNE8C2YN3","SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleGridReadyAfterLockChecker=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._lockSystem=t.lockSystem,n._turnSystem=t.turnSystem,n}return a(t,e),t.prototype.check=function(){return this._lockSystem.process(),this._turnSystem.computeAvailableTurns()},t}(e("./GridChecker (@tapclap.match-x.engine.grid-checkers)").GridChecker);n.SimpleGridReadyAfterLockChecker=r,cc._RF.pop()},{"./GridChecker (@tapclap.match-x.engine.grid-checkers)":"GridChecker (@tapclap.match-x.engine.grid-checkers)"}],"SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"e9233w1ptxX6ov7fPS2oqO+","SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleOfferStrategy=void 0;var r=function(e){function t(t,n){var o=e.call(this)||this;return o._factory=t,o._rawOffers=n,o}return a(t,e),t.prototype.getOffers=function(){return this._offers},t.prototype.init=function(){var e=this;return this._offers=this._rawOffers.map(function(t){return t.map(function(t){return e._factory.create(t)})}),Promise.resolve()},t}(e("./OfferStrategy (@tapclap.game-kit.offer-manager)").OfferStrategy);n.SimpleOfferStrategy=r,cc._RF.pop()},{"./OfferStrategy (@tapclap.game-kit.offer-manager)":"OfferStrategy (@tapclap.game-kit.offer-manager)"}],"SimpleUserItemInfoComponent (scripts.views.user-items)":[function(e,t,n){"use strict";cc._RF.push(t,"57fd9o4SShX355Oddjs55dX","SimpleUserItemInfoComponent (scripts.views.user-items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleUserItemInfoComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.menu,p=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._icon=null,t._valueLabel=null,t._measureLabel=null,t}return a(t,e),t.prototype.setValue=function(e){this._valueLabel&&(this._valueLabel.string=e)},t.prototype.setMeasure=function(e){this._measureLabel&&(this._measureLabel.string=e)},t.prototype.setLabelColor=function(e){this._valueLabel&&(this._valueLabel.node.color=e)},t.prototype.setMeasureColor=function(e){this._measureLabel&&(this._measureLabel.node.color=e)},t.prototype.setLabelStrokeWidth=function(e){this._getLabelOutlines().forEach(function(t){return t.width=e})},t.prototype.setLabelStrokeColor=function(e){this._getLabelOutlines().forEach(function(t){return t.color=e})},t.prototype.getIconNode=function(){return this._icon},t.prototype._getLabelOutlines=function(){return[this._valueLabel,this._measureLabel].filter(function(e){return e}).map(function(e){return e.getComponent(cc.LabelOutline)}).filter(function(e){return e})},r([p({type:cc.Node,visible:!0})],t.prototype,"_icon",void 0),r([p({type:cc.Label,visible:!0})],t.prototype,"_valueLabel",void 0),r([p({type:cc.Label,visible:!0})],t.prototype,"_measureLabel",void 0),r([c,s("Candyvalley/SimpleUserItemInfoComponent")],t)}(cc.Component);n.SimpleUserItemInfoComponent=l,cc._RF.pop()},{}],"SimpleUserItemListComponent (scripts.views.user-items)":[function(e,t,n){"use strict";cc._RF.push(t,"c6bf9cPCW9RSarssnlFPVsu","SimpleUserItemListComponent (scripts.views.user-items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleUserItemListComponent=void 0;var i=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),c=e("./TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),s=e("./TimeDuration (@tapclap.utils-js.time-duration)"),p=e("./SimpleUserItemInfoComponent (scripts.views.user-items)"),l=cc._decorator,m=l.ccclass,u=l.property,d=l.menu,y=function(){function e(){this.key="",this.prefab=null}return r([u()],e.prototype,"key",void 0),r([u(cc.Prefab)],e.prototype,"prefab",void 0),r([m("UserItemPrefab")],e)}(),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._items={},t._userItemPrefabs=[],t}return a(t,e),t.prototype.createItem=function(e){var t,n=e.spec+":"+e.name,o=null===(t=this._userItemPrefabs.find(function(e){return e.key===n}))||void 0===t?void 0:t.prefab;if(o){var a=cc.instantiateFrom(o),r=a.getComponent(p.SimpleUserItemInfoComponent);if(r)if(e instanceof i.CountableUserItem)r.setValue(e.amount),r.setMeasure("");else if(e instanceof c.TimedUserItem){var l=new s.TimeDuration(e.duration);r.setValue(l.getHours()),r.setMeasure("h")}return this._items[n]={node:a,userItem:e,iconNode:r.getIconNode()},this.node.addChild(r.node),r}throw new Error("Prefab for "+n+" not found")},t.prototype.updateItem=function(e){var t=this._items[e],n=t.userItem;n instanceof i.CountableUserItem&&t.node.getComponent(p.SimpleUserItemInfoComponent).setValue(n.amount)},t.prototype.getItems=function(){return this._items},t.prototype.clearItems=function(){this._items={},this.node.destroyAllChildren()},r([u({type:[y],visible:!0})],t.prototype,"_userItemPrefabs",void 0),r([m,d("Candyvalley/SimpleUserItemListComponent")],t)}(cc.Component);n.SimpleUserItemListComponent=f,cc._RF.pop()},{"./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./SimpleUserItemInfoComponent (scripts.views.user-items)":"SimpleUserItemInfoComponent (scripts.views.user-items)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./TimedUserItem (@tapclap.game-kit.user-item-manager.items)":"TimedUserItem (@tapclap.game-kit.user-item-manager.items)"}],"SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":[function(e,t,n){"use strict";cc._RF.push(t,"d190ddrL6pY3Jw+9l/JCQ0q","SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SingleExplodeRetriever=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.retrieve=function(e){if(this.cell){var t=this.cell,n=t.row,o=t.col;if(e.isContain(n,o))return[[e.getCell(n,o)]]}return[]},t.KEY="single",t}(e("./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)").ExplodeRetriever);n.SingleExplodeRetriever=r,cc._RF.pop()},{"./ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)":"ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)"}],"SingleMetaEventBranch (scripts.meta-events.branch)":[function(e,t,n){"use strict";cc._RF.push(t,"08d353hqp9SjLl2orXX8BCM","SingleMetaEventBranch (scripts.meta-events.branch)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SingleMetaEventBranch=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._getActualEvent=function(){return this._events.length>0?this._events[0]:null},t}(e("./MetaEventBranch (scripts.meta-events.branch)").MetaEventBranch);n.SingleMetaEventBranch=r,cc._RF.pop()},{"./MetaEventBranch (scripts.meta-events.branch)":"MetaEventBranch (scripts.meta-events.branch)"}],"SingleRetriever (@tapclap.match-x.engine.retrievers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"4e8bfUUeLpZC6amH78AEbfG","SingleRetriever (@tapclap.match-x.engine.retrievers)"),n.__esModule=!0,n.SingleRetriever=void 0;var a=function(e){var t,n;function a(t){var n,o=(void 0===t?{}:t).cell,a=void 0===o?null:o;return(n=e.call(this)||this)._cell=a,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.retrieve=function(e){if(this._cell){var t=this._cell,n=t.row,o=t.col;if(e.isContain(n,o))return[[e.getCell(n,o)]]}return[]},a}(e("./Retriever (@tapclap.match-x.engine.retrievers)").Retriever);n.SingleRetriever=a,cc._RF.pop()},{"./Retriever (@tapclap.match-x.engine.retrievers)":"Retriever (@tapclap.match-x.engine.retrievers)"}],"SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)":[function(e,t,n){"use strict";cc._RF.push(t,"61448jWjS1AoK6gkFyJqeOE","SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)"),n.__esModule=!0,n.SingleViewDialogComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T=e("./DialogComponent (@tapclap.game-kit.ui.dialogs)"),I=e("./TypableTextComponent (@tapclap.game-kit.ui.typable-text)"),M=e("./SpeakerComponent (@tapclap.game-kit.ui.dialogs)"),j=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function W(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var H=cc._decorator,V=H.ccclass,K=H.menu,U=H.property,Y=(o=V("Hero"),a=U(),r=U(cc.Node),i=U(),o((p=W((s=function(){N(this,"key",p,this),N(this,"node",l,this),N(this,"name",m,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=W(s.prototype,"node",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=W(s.prototype,"name",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=s))||c),z=(u=K("UI-Kit/Dialogs/SingleViewDialogComponent"),d=U({type:[Y],visible:!0}),y=U({type:j.I18NLabel,visible:!0}),f=U({type:I.TypableTextComponent,visible:!0}),h=U({type:cc.Button,visible:!0}),g=U({visible:!0,tooltip:'\u041a\u043b\u0438\u043a \u043f\u043e \u043a\u0430\u043d\u0432\u0430\u0441\u0443 \u043a\u0430\u043a \u043f\u043e \u043a\u043d\u043e\u043f\u043a\u0435 "\u0434\u0430\u043b\u0435\u0435"'}),v=U({visible:!0}),_=U({visible:!0}),b=U({visible:!0}),V(C=u((w=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return N(t=e.call.apply(e,[this].concat(o))||this,"_heroes",S,B(t)),N(t,"_heroName",E,B(t)),N(t,"_text",x,B(t)),N(t,"_buttonNext",A,B(t)),N(t,"_canvasAsButtonNext",O,B(t)),N(t,"_toggleButtonDuration",R,B(t)),N(t,"_hideDuration",P,B(t)),N(t,"_showDuration",k,B(t)),t._currentHero=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,G(t,n);var a=o.prototype;return a.onLoad=function(){this._canvasAsButtonNext&&cc.find("Canvas").on(cc.Node.EventType.TOUCH_END,this.skipSpeech,this,!0)},a._toggleButtonNext=function(e){var t=this;if(this._buttonNext){if(!e)return new Promise(function(e){t._buttonNext.node.runAction(cc.sequence([cc.spawn([cc.scaleTo(t._toggleButtonDuration,0,0),cc.fadeOut(t._toggleButtonDuration)]).easing(cc.easeBackIn()),cc.callFunc(e)]))});this._buttonNext.node.stopAllActions(),this._buttonNext.node.scale=1,this._buttonNext.node.opacity=255}return Promise.resolve()},a.skipSpeech=function(){this._text.isTyping()&&this._text.skip()},a.show=function(){var e=this;return new Promise(function(t){e.node.runAction(cc.sequence([cc.fadeIn(e._showDuration),cc.callFunc(function(){return t()})]))})},a.hide=function(){var e=this;return new Promise(function(t){e.node.runAction(cc.sequence([cc.fadeOut(e._showDuration),cc.callFunc(function(){return t()})]))})},a.setSpeaker=function(e){var t=this._heroes.find(function(t){return t.key===e});if(t){this._currentHero=t.node,this._heroName&&(this._heroName.string=t.name);for(var n,o=L(this._heroes);!(n=o()).done;)n.value.node.active=!1;t.node.active=!0}return Promise.resolve()},a.setEmotion=function(e){if(this._currentHero){var t=this._currentHero.getComponent(M.SpeakerComponent);if(t)return t.setEmotion(e)}return Promise.resolve()},a.setSpeech=function(e){return this._text?this._text.type(e):Promise.resolve()},a.setState=function(e){switch(e){case"show":return this._toggleButtonNext(!0);case"skip":return this._toggleButtonNext(!1)}return Promise.resolve()},o}(T.DialogComponent),S=W(w.prototype,"_heroes",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=W(w.prototype,"_heroName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=W(w.prototype,"_text",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=W(w.prototype,"_buttonNext",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=W(w.prototype,"_canvasAsButtonNext",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=W(w.prototype,"_toggleButtonDuration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=W(w.prototype,"_hideDuration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=W(w.prototype,"_showDuration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=w))||C)||C);n.SingleViewDialogComponent=z,cc._RF.pop()},{"./DialogComponent (@tapclap.game-kit.ui.dialogs)":"DialogComponent (@tapclap.game-kit.ui.dialogs)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./SpeakerComponent (@tapclap.game-kit.ui.dialogs)":"SpeakerComponent (@tapclap.game-kit.ui.dialogs)","./TypableTextComponent (@tapclap.game-kit.ui.typable-text)":"TypableTextComponent (@tapclap.game-kit.ui.typable-text)"}],"SizeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"dd31f2fVqtX26qIOSKG/lFX","SizeComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.SizeComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n;return(n=e.call(this)||this)._rows=t.rows||1,n._cols=t.cols||1,n._head=null,n._area=[],n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"rows",get:function(){return this._rows}},{key:"cols",get:function(){return this._cols}},{key:"head",get:function(){return this._head},set:function(e){this._head=e}},{key:"area",get:function(){return this._area},set:function(e){this._area=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.SizeComponent=r,r.KEY="size",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"SkinsWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"fd185+lfkpe4I6/ApXiRO/r","SkinsWindowAction (scripts.actions)"),n.__esModule=!0,n.SkinsWindowAction=void 0;var o=e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)"),a=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),r=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),i=e("./SkinsWindowLayoutComponent (scripts.windows.layouts)");function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._sceneManager=t.sceneManager,n._backdropManager=t.backdropManager,n._storage=t.storage,n._skinConfig=t.skinConfig,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),o.prototype._configureWindow=function(e){var t=this,n=e.getLayout("content").getComponent(i.SkinsWindowLayoutComponent),o=this._sceneManager.getCurrentSceneComponent();e.events.on(r.WindowComponent.EVENT_SHOWN,function(){t._backdropManager.highlight(o.tiles),t._backdropManager.highlight(o.background)}),e.events.on(r.WindowComponent.EVENT_HIDE,function(){t._backdropManager.unhighlight(o.tiles),t._backdropManager.unhighlight(o.background)});var c=n.skinControls;c.length>0&&c.forEach(function(e){var n=e.key;e.control.events.on(a.ButtonControlComponent.EVENT_CLICK,function(){if(o.game)return t._storage.getItem("skin").then(function(e){return(e||"default").split("|")}).then(function(e){var a={},r=function(e){var n=t._skinConfig[e];n&&(a[n.group]=e)};return e.forEach(r),o.reskin(n).then(function(){return r(n),t._storage.setItem("skin",Object.values(a).join("|"))}).catch(function(e){console.log(e)})})})})},o}(o.WindowAction);n.SkinsWindowAction=s,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./SkinsWindowLayoutComponent (scripts.windows.layouts)":"SkinsWindowLayoutComponent (scripts.windows.layouts)","./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"SkinsWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"d4d70zfO8FZz617+ovHsDhN","SkinsWindowLayoutComponent (scripts.windows.layouts)"),n.__esModule=!0,n.SkinsWindowLayoutComponent=void 0;var o,a,r,i,c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=e("./MenuWindowLayoutComponent (scripts.windows.layouts)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d,y,f,h,g=cc._decorator,v=g.ccclass,_=(o=(0,g.property)({type:[s.MenuControl],visible:!0}),v((r=function(e){var t,n,o,a;function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_skinControls",i,m(t)),t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),o=r,(a=[{key:"skinControls",get:function(){return this._skinControls}}])&&l(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),r}(c.WindowLayoutComponent),d=r.prototype,y=[o],f={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},h={},Object.keys(f).forEach(function(e){h[e]=f[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),void 0===(h=y.slice().reverse().reduce(function(e,t){return t(d,"_skinControls",e)||e},h)).initializer&&(Object.defineProperty(d,"_skinControls",h),h=null),i=h,a=r))||a);n.SkinsWindowLayoutComponent=_,cc._RF.pop()},{"./MenuWindowLayoutComponent (scripts.windows.layouts)":"MenuWindowLayoutComponent (scripts.windows.layouts)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"74185ymubdTS7/WCif+H9/G","SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SkipAfterTurnAnimationComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="skipAfterTurnAnimation",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.SkipAfterTurnAnimationComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"097b8CFifRWk5KvJ1AjVt1/","SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.SkipAnimationBuilder=void 0;var o=e("./AnimationData (@tapclap.match-x.cocos.animations)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function i(t){var n;return(n=e.call(this,t)||this)._gameActionSystem=t.gameActionSystem,n._match3Component=t.match3Component,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),i.prototype.build=function(){var e=this,t=[];return t.push(new o.AnimationData(null,new a.FunctionAnimation(function(){e._match3Component.node.once(cc.Node.EventType.TOUCH_END,function(){e._match3Component.isCompletionFinished()||e._gameActionSystem.skipAnimations()})}))),[t]},i}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.SkipAnimationBuilder=i,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"SliceFilter (@tapclap.game-kit.filter)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"61726uF399Iz4mWrnTC9UUw","SliceFilter (@tapclap.game-kit.filter)"),n.__esModule=!0,n.SliceFilter=void 0;var a=function(e){var t,n;function a(t){var n,o=t.start,a=void 0===o?0:o,r=t.length;return(n=e.call(this)||this)._start=a,n._length=r,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.filter=function(e){return void 0===e&&(e=[]),e.slice(this._start,this._length)},a}(e("./Filter (@tapclap.game-kit.filter)").Filter);n.SliceFilter=a,cc._RF.pop()},{"./Filter (@tapclap.game-kit.filter)":"Filter (@tapclap.game-kit.filter)"}],"SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"338479Iiz1bfoD8r4/pKJqr","SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},r=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.SmoothTransitionAnimation=void 0;var i=e("./PromisifyTween (scripts.utils)"),c=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(){function e(){this._disappearingElementsList=[],this._disposablyDisappearingElementsList=[],this._appearingElementsList=[],this._changingDuration=0,this._currentAppearingAnimationsList=[],this._currentDisappearingAnimationsList=[]}return e.prototype.runTransition=function(e,t){return Promise.all([this.runDisappearing(e,t),this.runAppearing(e)])},e.prototype.runDisappearing=function(e,t){var n=this,o=r(this._disappearingElementsList,this._disposablyDisappearingElementsList);this._currentDisappearingAnimationsList=[];var a=o.map(function(o){var a=n._tweenOpacity(o,c.AnimationKey.MIN_OPACITY,e,t);return o.active=!0,n._currentDisappearingAnimationsList.push(a.tween),a.promise});return Promise.all(a).then(function(e){return n._disposablyDisappearingElementsList.forEach(function(e){e.active=!1}),e})},e.prototype.runAppearing=function(e,t){var n=this;this._currentAppearingAnimationsList=[];var o=this._appearingElementsList.map(function(o){var a=n._tweenOpacity(o,c.AnimationKey.MAX_OPACITY,e,t);return o.active=!0,o.opacity=c.AnimationKey.MIN_OPACITY,n._currentAppearingAnimationsList.push(a.tween),a.promise});return Promise.all(o)},e.prototype.undo=function(){this._appearingElementsList.forEach(function(e){e.opacity=c.AnimationKey.MIN_OPACITY}),this._disappearingElementsList.forEach(function(e){e.opacity=c.AnimationKey.MAX_OPACITY})},e.prototype.stop=function(){var e=function(e){return e.stop()};this._currentAppearingAnimationsList.forEach(e),this._currentDisappearingAnimationsList.forEach(e)},e.prototype._tweenOpacity=function(e,t,n,o){return void 0===n&&(n=0),void 0===o&&(o=c.AnimationKey.QUAD_OUT_EASING),i.PromisifyTween.startWithGettingTween(cc.tween(e).delay(n).to(this._changingDuration,{opacity:t},{easing:o}))},o([l({type:[cc.Node],visible:!0})],e.prototype,"_disappearingElementsList",void 0),o([l({type:[cc.Node],visible:!0})],e.prototype,"_disposablyDisappearingElementsList",void 0),o([l({type:[cc.Node],visible:!0})],e.prototype,"_appearingElementsList",void 0),o([l({visible:!0,min:0})],e.prototype,"_changingDuration",void 0),o([p("SmoothTransitionAnimation")],e)}();n.SmoothTransitionAnimation=m,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"SnailClipIdleViewComponent (scripts.common.match3-game.components.entities.snail)":[function(e,t,n){"use strict";cc._RF.push(t,"cdc42i5kGBco6l+C/ixrhUa","SnailClipIdleViewComponent (scripts.common.match3-game.components.entities.snail)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SnailClipIdleViewComponent=void 0;var i=e("./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=cc._decorator,p=s.ccclass,l=s.menu,m=s.property,u=function(){function e(){this.idleClip=null,this.healthValue=1}return r([m(cc.AnimationClip)],e.prototype,"idleClip",void 0),r([m(cc.Integer)],e.prototype,"healthValue",void 0),r([p("SnailClipIdleViewComponentConfig")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationConfig=[],t._animationClip=null,t._lastHealthValue=0,t._entity=null,t}return a(t,e),t.prototype.run=function(e){var t,n=this;if(this._entity||(this._entity=e),this._lastHealthValue=null===(t=e.getComponentByClass(c.HealthComponent))||void 0===t?void 0:t.getValue(),this._lastHealthValue){var o=this._animationConfig.find(function(e){return e.healthValue===n._lastHealthValue}).idleClip;this.playIdleAnimation(o,e)}},t.prototype.reset=function(){var t;return this._entity&&(null===(t=this._entity.getComponentByClass(c.HealthComponent))||void 0===t?void 0:t.getValue())!==this._lastHealthValue?e.prototype.reset.call(this):Promise.resolve()},r([m({type:[u],visible:!0})],t.prototype,"_animationConfig",void 0),r([m({type:cc.AnimationClip,visible:!1,override:!0})],t.prototype,"_animationClip",void 0),r([p,l("EntityViews/Snail/SnailClipIdleViewComponent")],t)}(i.ClipIdleViewComponent);n.SnailClipIdleViewComponent=d,cc._RF.pop()},{"./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":"ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)"}],"SocialAdapter (@tapclap.sdk-x.social-service)":[function(e,t,n){"use strict";cc._RF.push(t,"f9dacZoEI9cFY/MBGDqnDKP","SocialAdapter (@tapclap.sdk-x.social-service)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SocialAdapter=void 0;var r=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),i=e("./UserInfo (@tapclap.sdk-x.social-service)"),c=function(){function e(e){var t,n,o,a;void 0===e&&(e={}),this._localeMap=e.localeMap||{},this._communityUrl=null!==(t=e.communityUrl)&&void 0!==t?t:"",this._privacyPolicyUrl=null!==(n=e.privacyPolicyUrl)&&void 0!==n?n:"",this._termsUrl=null!==(o=e.termsUrl)&&void 0!==o?o:"",this._shareUrl=null!==(a=e.shareUrl)&&void 0!==a?a:""}return e.prototype.getLocaleMap=function(){return this._localeMap},e.prototype.getType=function(){return this.constructor.ADAPTER_TYPE},e.prototype.init=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.login=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,new r.AuthPayload]})})},e.prototype.logout=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.getUserInfo=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,new i.UserInfo({})]})})},e.prototype.getAppFriends=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,[]]})})},e.prototype.getInvitableFriends=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,[]]})})},e.prototype.getRequestableFriends=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,this.getAppFriends()]})})},e.prototype.showInvite=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.sendRequest=function(e,t){return void 0===t&&(t={}),o(this,void 0,Promise,function(){return a(this,function(){return[2,[]]})})},e.prototype.share=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.prototype.getCommunityUrl=function(){return this._communityUrl},e.prototype.getPrivacyPolicyUrl=function(){return this._privacyPolicyUrl},e.prototype.getTermsUrl=function(){return this._termsUrl},e.prototype.getShareUrl=function(){return this._shareUrl},e.prototype.getLocale=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2,void 0]})})},e.prototype.quit=function(){return o(this,void 0,Promise,function(){return a(this,function(){return[2]})})},e.ADAPTER_TYPE="unknown",e}();n.SocialAdapter=c,cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)","./UserInfo (@tapclap.sdk-x.social-service)":"UserInfo (@tapclap.sdk-x.social-service)"}],"SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"02fd3J1Vc9Fa7Ln29Uhvxsg","SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)"),n.__esModule=!0,n.SocialAdapterLocaleResolver=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._socialService=t.socialService,n._defaultLocale=t.defaultLocale,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.getLocale=function(){var e=this,t=this._socialService.getCurrentAdapter();return Promise.resolve().then(function(){return t.getLocale()}).then(function(t){if(!t&&!e._defaultLocale)throw new Error("SocialAdapter cannot retrieve user locale and default locale not defined");return t||e._defaultLocale})},r.getDefaultLocale=function(){return this._defaultLocale},a}(e("./LocaleResolver (@tapclap.game-kit.locale-resolver)").LocaleResolver);n.SocialAdapterLocaleResolver=a,cc._RF.pop()},{"./LocaleResolver (@tapclap.game-kit.locale-resolver)":"LocaleResolver (@tapclap.game-kit.locale-resolver)"}],"SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"891966NVslOn6gqC64aarmP","SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)"),n.__esModule=!0,n.SocialAuthProvider=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n=""),(o=e.call(this)||this)._socialService=t,o._adapter=n,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._getSocialAdapter=function(){return this._socialService.getAdapter(this._adapter)},r.getType=function(){return this._adapter},r.init=function(){return this._getSocialAdapter().init()},r.signIn=function(){var e=this;return Promise.resolve().then(function(){return e._getSocialAdapter().login()}).then(function(t){return e._socialService.setCurrentAdapter(e._adapter),t})},r.signOut=function(){var e=this;return Promise.resolve().then(function(){return e._getSocialAdapter().logout()}).then(function(){return e._socialService.resetCurrentAdapter()})},a}(e("./AuthProvider (@tapclap.sdk-x.auth-service)").AuthProvider);n.SocialAuthProvider=a,cc._RF.pop()},{"./AuthProvider (@tapclap.sdk-x.auth-service)":"AuthProvider (@tapclap.sdk-x.auth-service)"}],"SocialRequest (@tapclap.sdk-x.social-service)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"a39f4zOcTVMoLeybURLHqVE","SocialRequest (@tapclap.sdk-x.social-service)"),n.__esModule=!0,n.SocialRequest=void 0;var a=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._i18n=e.i18n,this._data={title:null,titleParams:{},message:null,messageParams:{},button:null,buttonParams:{},image:null},this.setData(t)}var t,n,a=e.prototype;return a._getLocalizedContent=function(e,t){return this._i18n.t(e,t)},a.setData=function(e){var t=this;void 0===e&&(e={}),Object.keys(this._data).forEach(function(n){e[n]&&(t._data[n]=e[n])})},a.getData=function(){return this._data},t=e,(n=[{key:"title",get:function(){return this._getLocalizedContent(this._data.title,this._data.titleParams)}},{key:"titleParams",get:function(){return this._data.titleParams}},{key:"message",get:function(){return this._getLocalizedContent(this._data.message,this._data.messageParams)}},{key:"messageParams",get:function(){return this._data.messageParams}},{key:"button",get:function(){return this._getLocalizedContent(this._data.button,this._data.buttonParams)}},{key:"buttonParams",get:function(){return this._data.buttonParams}},{key:"image",get:function(){return this._data.image}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.SocialRequest=a,cc._RF.pop()},{}],"SocialRequestWrapper (scripts.message-center.event-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"58a23uHgPtUtZMhTdm43Nzj","SocialRequestWrapper (scripts.message-center.event-handlers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SocialRequestWrapper=void 0;var o=function(){function e(){}return e.prototype.wrap=function(e){return e},e}();n.SocialRequestWrapper=o,cc._RF.pop()},{}],"SocialService (@tapclap.sdk-x.social-service)":[function(e,t,n){"use strict";cc._RF.push(t,"abd71QZjKJOAbs4NUMxHg2X","SocialService (@tapclap.sdk-x.social-service)"),n.__esModule=!0,n.SocialService=void 0;var o=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=""),this._adapters=e,this._currentAdapterType=t}var t=e.prototype;return t.getAdapters=function(){return this._adapters},t.getAdapter=function(e){return this._adapters.find(function(t){return t.getType()===e})},t.getCurrentAdapter=function(){return this.getAdapter(this._currentAdapterType)},t.setCurrentAdapter=function(e){this._currentAdapterType=e},t.resetCurrentAdapter=function(){this.setCurrentAdapter("")},e}();n.SocialService=o,cc._RF.pop()},{}],"SophieSpineSpeakerComponent (scripts.common.dialogs)":[function(e,t,n){"use strict";cc._RF.push(t,"3484cTl+Y9WqLOfQCp8Rhom","SophieSpineSpeakerComponent (scripts.common.dialogs)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SophieSpineSpeakerComponent=void 0;var c=e("./SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._forceRunningAnimations=[],t}return a(t,e),t.prototype.setEmotion=function(e){var t,n,o=this._animations.find(function(t){return t.key===e});if(o){var a=this.getComponent(sp.Skeleton);try{for(var r=i(o.animations),c=r.next();!c.done;c=r.next()){var s=c.value,p=s.track,l=s.name,m=s.loop;this._forceRunningAnimations.includes(l)?a.setAnimation(p,l,m):a.addAnimation(p,l,m)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this._currentSpeakerAnimation=o}return Promise.resolve()},r([l({type:[cc.String],visible:!0})],t.prototype,"_forceRunningAnimations",void 0),r([p],t)}(c.SpineSpeakerComponent);n.SophieSpineSpeakerComponent=m,cc._RF.pop()},{"./SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)":"SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)"}],"SoundPauseResumeAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"e680cKhCN5QkJhl9amZrKNL","SoundPauseResumeAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SoundPauseResumeAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._type=t.type,n._audioManager=t.audioManager,n}return a(t,e),t.prototype.run=function(){switch(this._type){case t.TYPE_PAUSE:this._audioManager.pauseAll();break;case t.TYPE_RESUME:this._audioManager.resumeAll()}return Promise.resolve()},t.TYPE_PAUSE="pause",t.TYPE_RESUME="resume",t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.SoundPauseResumeAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"SpeakerComponent (@tapclap.game-kit.ui.dialogs)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"45b0dxXgMtOTKTA2PVxv4+j","SpeakerComponent (@tapclap.game-kit.ui.dialogs)"),n.__esModule=!0,n.SpeakerComponent=void 0;var r=cc._decorator,i=(0,r.ccclass)(o=(0,r.menu)("UI-Kit/Dialogs/SpeakerComponent")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.show=function(){return Promise.resolve()},r.hide=function(){return Promise.resolve()},r.setEmotion=function(){return Promise.resolve()},o}(cc.Component))||o)||o;n.SpeakerComponent=i,cc._RF.pop()},{}],"SpecialLevelEndAction (scripts.actions.special-levels)":[function(e,t,n){"use strict";cc._RF.push(t,"532efbc6wRbZLwxS0kXu2vl","SpecialLevelEndAction (scripts.actions.special-levels)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelEndAction=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._level=t.level,n._state=t.state,n._storage=t.storage,n}return a(t,e),t.prototype.run=function(){var e;return(null===(e=this._level)||void 0===e?void 0:e.name)&&(this._level.state=this._state,this._state===t.STATE_EXIT&&this._storage&&this._storage.setItem("rewards_"+this._level.name,!0)),Promise.resolve()},t.STATE_WIN="win",t.STATE_LOSE="lose",t.STATE_EXIT="exit",t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.SpecialLevelEndAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"SpecialLevelRewardWindowAction (scripts.actions.special-levels)":[function(e,t,n){"use strict";cc._RF.push(t,"d494f3NOAFUZqfVLxCg5hDH","SpecialLevelRewardWindowAction (scripts.actions.special-levels)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelRewardWindowAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._module=t.module,n._storage=t.storage,n._rewardIndex=t.rewardIndex,n}return a(t,e),t.prototype._configureWindow=function(e){var t,n=this,o=this._userManager.getCurrentUser(),a=this._module.getRewards(),r=null!==(t=this._rewardIndex)&&void 0!==t?t:this._module.getRewardIndex(),i=a[r],c=e.getLayout("content"),s=i.map(function(e){var t=e.find(function(e){return"booster"===e.spec});return t?t.name:"coins"});e.setButtonCloseActive(!1),c.showAvailableState(s),c.showPrize(0,!0),c.showRewards(0,this._getRewardsIconWithText(i[0]),!1,!0),e.events.once("claim",function(){e.playSound("openBox",{mergable:0});var t=c.getReward(0,i[0]);return t.length&&t.forEach(function(e,t){n._uiManager.addClaimAnimation({node:e.iconNode,target:"coins"===e.type?"coins-bar":"play",stepTime:.8*t,callback:function(){o.items.charge([i[0][t]],{checkpointIndex:r,rewardIndex:t}),n._storage.setItem("speciallevel:"+r+":passed",!0)}})}),n._uiManager.playClaimAnimations().then(function(){n.closeWindow(e)})})},t.prototype._getRewardsIconWithText=function(e){return e.map(function(e){return{icon:{key:e.name},text:e.amount}})},t}(e("./CheckpointRewardUnavailableWindowAction (scripts.actions)").CheckpointRewardUnavailableWindowAction);n.SpecialLevelRewardWindowAction=r,cc._RF.pop()},{"./CheckpointRewardUnavailableWindowAction (scripts.actions)":"CheckpointRewardUnavailableWindowAction (scripts.actions)"}],"SpecialLevelTutorialWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"aecdcw4yp9bHKbaeO02MsFe","SpecialLevelTutorialWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelTutorialWindowLayoutComponent=void 0;var i=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonPlay=null,t.buttonSkip=null,t}return a(t,e),t.prototype.initialize=function(t){var n=this;void 0===t&&(t={}),e.prototype.initialize.call(this,t),this.buttonPlay&&this.buttonPlay.events.on(i.ButtonControlComponent.EVENT_CLICK,function(){return n.window.events.emit("play")}),this.buttonSkip&&this.buttonSkip.events.on(i.ButtonControlComponent.EVENT_CLICK,function(){return n.window.events.emit("skip")})},r([l(i.ButtonControlComponent)],t.prototype,"buttonPlay",void 0),r([l(i.ButtonControlComponent)],t.prototype,"buttonSkip",void 0),r([p],t)}(c.WindowLayoutComponent);n.SpecialLevelTutorialWindowLayoutComponent=m,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)":[function(e,t,n){"use strict";cc._RF.push(t,"9dd64MsHhxYVabvXmBYz4cU","SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelsForceEndHandler=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.handle=function(e){var t,n=e.getModule("levels");return!!(null===(t=null==n?void 0:n.getLastLevel())||void 0===t?void 0:t.name)},t}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.SpecialLevelsForceEndHandler=r,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)":[function(e,t,n){"use strict";cc._RF.push(t,"0f259ecSSJTGot96DMsFjnG","SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelsResourceHandler=void 0;var i=e("./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)"),c=e("./GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),s=e("./EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)"),p=e("./ResourceLoadTask (@tapclap.game-kit.loader)"),l=function(e){function t(t){var n,o=e.call(this)||this;return o._converter=t.converter,o._moduleResolver=t.moduleResolver,o._resourceManager=t.resourceManager,o._taskResourcePrefix=null!==(n=t.taskResourcePrefix)&&void 0!==n?n:"task",o}return a(t,e),t.prototype.handleArray=function(e,t){var n=this;return void 0===e&&(e=[]),void 0===t&&(t={}),this._prepareAssets(e).then(function(e){var t,o,a=n._moduleResolver.get(),i=n._convertLevels(e),c=new Set,s=function(e){e.goals.map(function(t){return e.resources[n._taskResourcePrefix+"-"+t.entity]}).forEach(function(e){return c.add(e)})};try{for(var l=r(Object.values(i)),m=l.next();!m.done;m=l.next())s(m.value)}catch(d){t={error:d}}finally{try{m&&!m.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}a.setData(i);var u=Array.from(c.values()).map(function(e){return new p.ResourceLoadTask(e)});return Promise.resolve(u)})},t.prototype._prepareAssets=function(e){var t,n,o={levels:null,about:null};try{for(var a=r(e),i=a.next();!i.done;i=a.next()){var c=i.value;switch(c.name){case"about":o.about=c.json;break;case"levels":o.levels=c.json}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.about&&o.levels||console.error("No data/about",{resources:e}),Promise.resolve(o)},t.prototype._convertLevels=function(e){var t={};for(var n in e.levels){var o=this._converter.convert(Object.assign({},e,{levelNumber:n}));t[n]=this._createLevel(o,n)}return t},t.prototype._createLevel=function(e,t){var n,o,a,i,p=c.GoalDataExtractor.extract(e,{key:"goals",grid:"tiles"}),l=s.EntityDataExtractor.extract(e,{grids:["tiles"]}),m={};try{for(var u=r(l),d=u.next();!d.done;d=u.next()){var y=d.value;m[y]=this._resourceManager.getResource(y)}}catch(_){n={error:_}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}try{for(var f=r(p),h=f.next();!h.done;h=f.next()){var g=h.value,v=this._taskResourcePrefix+"-"+g.entity;m[v]=this._resourceManager.getResource(v)}}catch(b){a={error:b}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}return{data:e,goals:p,hard:e.hard,name:t,number:0,resources:m}},t}(i.MetaModuleResourceHandler);n.SpecialLevelsResourceHandler=l,cc._RF.pop()},{"./EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","./GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)":"GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","./MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)":"MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)","./ResourceLoadTask (@tapclap.game-kit.loader)":"ResourceLoadTask (@tapclap.game-kit.loader)"}],"SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)":[function(e,t,n){"use strict";cc._RF.push(t,"545ce19OrJfOJnnyZPPLxxG","SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialLevelsRewardMetaModule=void 0;var r=e("./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)"),i=e("./SpecialLevelEndAction (scripts.actions.special-levels)"),c=function(e){function t(t){var n=e.call(this,t)||this;return n._moduleResolver=t.moduleResolver,n}return a(t,e),t.prototype.hasReward=function(){return null!==this.getRewardIndex()},t.prototype.getRewardIndex=function(){var e=this._moduleResolver.get(),t=null==e?void 0:e.getLastLevel(),n=null==t?void 0:t.name;return this._rewardEmitter.getRewards()[n]&&t.state===i.SpecialLevelEndAction.STATE_WIN?n:null},t}(r.RewardMetaModule);n.SpecialLevelsRewardMetaModule=c,cc._RF.pop()},{"./RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)":"RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)","./SpecialLevelEndAction (scripts.actions.special-levels)":"SpecialLevelEndAction (scripts.actions.special-levels)"}],"SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"030b9CRerZa5rpN/qKkBvQE","SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.SpecificInputBoosterGameEventStrategy=void 0;var o=e("./InputSystem (@tapclap.match-x.engine.systems.input-system)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype._isValidInput=function(){var e=this._world.getState(o.InputSystem.STATE),t=e&&e.data;if(t&&t.input&&"booster"===t.input.currentInput.type)return this._config.boosters.includes(t.input.currentInput.data.booster)},r}(e("./SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)").SpecificInputGameEventStrategy);n.SpecificInputBoosterGameEventStrategy=r,cc._RF.pop()},{"./InputSystem (@tapclap.match-x.engine.systems.input-system)":"InputSystem (@tapclap.match-x.engine.systems.input-system)","./SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":"SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"}],"SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"3175cK4DQ1XgKuye/fTXN8f","SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.SpecificInputGameEventStrategy=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._world=void 0,o._config=void 0,o._world=t,o._config=n,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.compute=function(){return this._isValidInput()},r._isValidInput=function(){return!1},a}(e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)").GameEventStrategy);n.SpecificInputGameEventStrategy=a,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"}],"SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"8d6fdyE8LJS7rcrOGhbzvTX","SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"),n.__esModule=!0,n.SpeechTutorialStepStrategy=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.start=function(e,t){return this._getStepData(e,t)},r.complete=function(e,t){return this._getStepData(e,t)},a}(e("./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)").BaseTutorialStepStrategy);n.SpeechTutorialStepStrategy=a,cc._RF.pop()},{"./BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)":"BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)"}],"SpendStartBoostersAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"686f3MhpxFSqIryO59npUxe","SpendStartBoostersAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SpendStartBoostersAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._level=t.level,n._spendStartBoosters=t.spendStartBoosters,n._userManager=t.userManager,n}return a(t,e),t.prototype.run=function(){var e=this._userManager.getCurrentUser().items,n=[];return this._level.data.startBoosters=this._spendStartBoosters.map(function(t){var o=t.spec,a=t.name;return"startbooster"===o&&n.push(e.create({spec:o,name:a,amount:1})),a}),e.spend(n),this._caller.has(t.CALLER_START_MATCH3_GAME)?this._caller.run(t.CALLER_START_MATCH3_GAME,{level:this._level}):Promise.resolve()},t.CALLER_START_MATCH3_GAME="startMatch3",t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.SpendStartBoostersAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"SpineAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"959b0O+ExtaGatni04X2xex","SpineAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.SpineAnimation=void 0;var r=function(e){var t,n;function r(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._target=t,o._options=Object.assign({disable:!0,loop:!1,playOnce:!1,track:0,overrideCurrent:!0,overrideSame:!0},n),o._settledResolve=null,o._settled=new Promise(function(e){o._settledResolve=e}),o}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s._resolveAll=function(){this._resolve(),this._settledResolve()},s.run=function(){var t=this,n=this._target;if(n){var o=this._options.track,a=this._options.animationName||n.defaultAnimation,r=n.getCurrent(o);if(!this._options.overrideCurrent&&r&&!r.isComplete())return Promise.resolve();if(!this._options.overrideSame&&r&&r.animation.name===a&&!r.isComplete())return Promise.resolve();if(this._options.skin&&n.setSkin(this._options.skin),r){if(this._options.playOnce&&r.animation&&r.animation.name===a)return this._promise;r._spineAnimation&&(r._spineAnimation._resolveAll(),r._spineAnimation=null)}if(r=n.setAnimation(o,a,this._options.loop)){r._spineAnimation=this;var i=function(){r._spineAnimation=null};this._options.animationTime?r.timeScale=(r.animationEnd-r.animationStart)/this._options.animationTime:this._options.timeScale&&(r.timeScale*=this._options.timeScale),this._options.loop?(i(),this._resolveAll()):this._options.event?(n.setEventListener(function(e,n){t._options.event===n.data.name&&(i(),t._resolve())}),n.setCompleteListener(function(){t._settledResolve()})):(0===r.animationEnd&&(i(),this._resolveAll()),n.setCompleteListener(function(){i(),t._resolveAll()}))}else cc.warn("Not found track or track is empty by name: "+a),this._resolveAll()}else cc.warn("SpineAnimation target is null"),this._resolveAll();return e.prototype.run.call(this)},i=r,(c=[{key:"settled",get:function(){return this._settled}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.SpineAnimation=r,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"8f18cvG9EtK/IxhGbJE+u6h","SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.SpineAnimationItem=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S=e("./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),E=e("./SpineAnimation (@tapclap.match-x.cocos.animations)");function x(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var k=cc._decorator,T=k.ccclass,I=k.property,M=(o=T("SpineAnimationItem"),a=I({type:sp.SkeletonData}),r=I({displayName:"Skeleton Data",type:sp.SkeletonData}),i=I({displayName:"\u0410\u043d\u0438\u043c\u0430\u0446\u0438\u044f",type:cc.Enum({}),visible:function(){return!!this._skeletonData}}),c=I({visible:!0}),s=I({displayName:"\u0421\u043a\u0438\u043d",type:cc.Enum({}),visible:function(){return!!this._skeletonData&&this._changeSkin}}),p=I({type:cc.Float,visible:!0}),l=I({visible:!0,tooltip:"\u0415\u0441\u043b\u0438 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f \u0443\u0436\u0435 \u043f\u0440\u043e\u0438\u0433\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0442\u043e \u043e\u043d\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u0430"}),m=I({visible:!0}),u=I({type:cc.Integer,visible:!0}),o((y=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._targetNode=null,x(t,"_skeletonData",f,O(t)),x(t,"_animationKey",h,O(t)),x(t,"_changeSkin",g,O(t)),x(t,"_skinKey",v,O(t)),x(t,"_timeScale",_,O(t)),x(t,"_playOnce",b,O(t)),x(t,"_resolveEvent",C,O(t)),x(t,"_track",w,O(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n);var a,r,i=o.prototype;return i._getSkeletonAnimations=function(){return this._skeletonData?Object.keys(this._skeletonData.skeletonJson.animations):[]},i._hasNewSkinsFormat=function(){var e=this._skeletonData.skeletonJson.skeleton.spine.split("."),t=e[0],n=e[1];return 3===parseInt(t)&&parseInt(n)>=8},i._getSkeletonSkins=function(){return this._skeletonData?this._hasNewSkinsFormat()?[].concat(this._skeletonData.skeletonJson.skins.map(function(e){return e.name})):[].concat(Object.keys(this._skeletonData.skeletonJson.skins)):[]},i.create=function(e,t){void 0===t&&(t={});var n=e.getComponent(sp.Skeleton);if(!n){n=e.addComponent(sp.Skeleton);var o=this._skeletonData.getRuntimeData();n.setSkeletonData(o),n.setAnimationStateData(new sp.spine.AnimationStateData(o))}var a={animationName:this._animationKey,event:this._resolveEvent.length>0?this._resolveEvent:void 0,timeScale:this._timeScale,track:this._track,playOnce:this._playOnce};return this._changeSkin&&(a.skin=this._skinKey),new E.SpineAnimation(n,Object.assign(a,t))},i.apply=function(e){if(e){var t=e.getComponent(sp.Skeleton),n=this._skeletonData.getRuntimeData();t.setSkeletonData(n),t.setAnimationStateData(new sp.spine.AnimationStateData(n)),this._skinKey&&this._changeSkin&&(t.defaultSkin=this._skinKey),this._animationKey&&(t.defaultAnimation=this._animationKey)}},a=o,(r=[{key:"targetNode",get:function(){return this._targetNode},set:function(e){if(this._targetNode=e,!this._skeletonData&&this._targetNode){var t=this._targetNode.getComponent(sp.Skeleton);t&&(this.skeletonData=t.skeletonData)}this._targetNode||(this.skeletonData=null)}},{key:"skeletonData",get:function(){if(this._skeletonData){var e=this._getSkeletonAnimations(),t=this._getSkeletonSkins(),n=this.constructor.__attrs__;n.animationIndex$_$enumList=e.map(function(e,t){return{name:e,value:t}}),n.skinIndex$_$enumList=t.map(function(e,t){return{name:e,value:t}})}return this._skeletonData},set:function(e){this._skeletonData=e}},{key:"animationIndex",get:function(){return this._getSkeletonAnimations().indexOf(this._animationKey)},set:function(e){this._skeletonData&&(this._animationKey=Object.keys(this._skeletonData.skeletonJson.animations)[e])}},{key:"skinIndex",get:function(){return this._getSkeletonSkins().indexOf(this._skinKey)},set:function(e){var t;this._skeletonData&&(this._hasNewSkinsFormat()?this._skinKey=null==(t=this._skeletonData.skeletonJson.skins[e])?void 0:t.name:this._skinKey=Object.keys(this._skeletonData.skeletonJson.skins)[e])}}])&&A(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(S.SubAnimationItem),f=P(y.prototype,"_skeletonData",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P(y.prototype,"skeletonData",[r],Object.getOwnPropertyDescriptor(y.prototype,"skeletonData"),y.prototype),h=P(y.prototype,"_animationKey",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P(y.prototype,"animationIndex",[i],Object.getOwnPropertyDescriptor(y.prototype,"animationIndex"),y.prototype),g=P(y.prototype,"_changeSkin",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=P(y.prototype,"_skinKey",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P(y.prototype,"skinIndex",[s],Object.getOwnPropertyDescriptor(y.prototype,"skinIndex"),y.prototype),_=P(y.prototype,"_timeScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=P(y.prototype,"_playOnce",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=P(y.prototype,"_resolveEvent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=P(y.prototype,"_track",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=y))||d);n.SpineAnimationItem=M,cc._RF.pop()},{"./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)","./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"}],"SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"89e452SLT1G5YhVc+lB/ieI","SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.SpineAnimationWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u=e("./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.property,C=(o=(0,v.menu)("UI-Kit/WindowManager/SpineAnimationWindowLayoutComponent"),a=b({type:sp.Skeleton,visible:!0}),r=b({visible:!0}),i=b({visible:!0}),_(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"_spine",p,f(t)),d(t,"_startAnimation",l,f(t)),d(t,"_idleAnimation",m,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a,r,i=o.prototype;return i._doRunAnimation=function(){var e=this;this.spine.node.active=!0,this.spine.setAnimation(0,this.startAnimation,!1),this.spine.setCompleteListener(function(){e.idleAnimation&&e.spine.setAnimation(0,e.idleAnimation,!0),e._resolve()})},i.onLoad=function(){this.spine.node.active=!1,e.prototype.onLoad.call(this)},a=o,(r=[{key:"spine",get:function(){return this._spine}},{key:"startAnimation",get:function(){return this._startAnimation},set:function(e){this._startAnimation=e}},{key:"idleAnimation",get:function(){return this._idleAnimation},set:function(e){this._idleAnimation=e}}])&&y(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(u.AnimationWindowLayoutComponent),p=g(s.prototype,"_spine",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=g(s.prototype,"_startAnimation",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=g(s.prototype,"_idleAnimation",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=s))||c)||c);n.SpineAnimationWindowLayoutComponent=C,cc._RF.pop()},{"./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"}],"SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)":[function(e,t,n){"use strict";cc._RF.push(t,"c8f25z5gTtT1KRMwVyREfH1","SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)"),n.__esModule=!0,n.SpineGroupEntityViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S=e("./GroupEntityViewComponent (@tapclap.match-x.cocos.components)");function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function O(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var R=cc._decorator,P=R.ccclass,k=R.property,T=R.menu,I=(o=P("SpineConfigKeyProperty"),a=k(),r=k(),i=k(),c=k({type:cc.Integer,visible:function(){return this.animName}}),s=k({visible:function(){return this.animName}}),o((m=O((l=function(){A(this,"groupKey",m,this),A(this,"skinKey",u,this),A(this,"animName",d,this),A(this,"animTrack",y,this),A(this,"animLoop",f,this)}).prototype,"groupKey",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=O(l.prototype,"skinKey",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=O(l.prototype,"animName",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=O(l.prototype,"animTrack",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=O(l.prototype,"animLoop",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=l))||p),M=(h=T("Match-X/group-entity-view/SpineGroupEntityViewComponent"),g=k({type:sp.Skeleton,visible:!0}),v=k({type:[I],visible:!0}),P(_=h((b=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return A(t=e.call.apply(e,[this].concat(o))||this,"_spine",C,E(t)),A(t,"_skinGroupMap",w,E(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,x(t,n),o.prototype.setGroup=function(e){if(this._spine){var t=this._skinGroupMap.find(function(t){var n=t.groupKey;return Number(n)===Number(e)});t&&(t.skinKey&&(this._spine.defaultSkin=t.skinKey,this._spine.setSkin(t.skinKey)),t.animName&&(this._spine.defaultAnimation=t.animName,this._spine.setAnimation(t.animTrack,t.animName,t.animLoop)))}return Promise.resolve()},o}(S.GroupEntityViewComponent),C=O(b.prototype,"_spine",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=O(b.prototype,"_skinGroupMap",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=b))||_)||_);n.SpineGroupEntityViewComponent=M,cc._RF.pop()},{"./GroupEntityViewComponent (@tapclap.match-x.cocos.components)":"GroupEntityViewComponent (@tapclap.match-x.cocos.components)"}],"SpineIconComponent (@tapclap.game-kit.ui.icons)":[function(e,t,n){"use strict";cc._RF.push(t,"5b3dcGhm/5Wx4tGnsVm6H1t","SpineIconComponent (@tapclap.game-kit.ui.icons)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SpineIconComponent=void 0;var i=e("./KeyNode (@tapclap.game-kit.ui.common)"),c=e("./IconComponent (@tapclap.game-kit.ui.icons)"),s=cc._decorator,p=s.ccclass,l=s.executeInEditMode,m=s.menu,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._nodes=[],t}return a(t,e),t.prototype.setIcon=function(e){var t;this._icon=e,this._nodes.forEach(function(e){var t=e.node;t&&(t.active=!1)});var n=null===(t=this._nodes.find(function(t){return t.key===e}))||void 0===t?void 0:t.node;n&&(n.active=!0)},r([u({visible:!1,override:!0})],t.prototype,"_icons",void 0),r([u({visible:!1,override:!0})],t.prototype,"_iconSprite",void 0),r([u({type:[i.KeyNode],visible:!0})],t.prototype,"_nodes",void 0),r([p,l,m("UI-Kit/Icons/SpineIconComponent")],t)}(c.IconComponent);n.SpineIconComponent=d,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./KeyNode (@tapclap.game-kit.ui.common)":"KeyNode (@tapclap.game-kit.ui.common)"}],"SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)":[function(e,t,n){"use strict";cc._RF.push(t,"f03ffpiJDVV0IPoGClGUOTh","SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SpineLootBoxView=void 0;var i=e("./LootBoxView (@tapclap.game-kit.ui.loot-box)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._spine=null,t._staticAnimationKey="",t._idleAnimationKey="",t._explodeAnimationKey="",t._explodeAnimationEvent="",t}return a(t,e),t.prototype.animateStatic=function(){this._spine.setAnimation(0,this._staticAnimationKey,!1)},t.prototype.animateIdle=function(){this._spine.setAnimation(0,this._idleAnimationKey,!0)},t.prototype.animateExplode=function(e){var t=this;this._spine.setCompleteListener(function(){t._spine.setCompleteListener(null),t._spine.setAnimation(0,t._explodeAnimationKey,!1)}),this._spine.setEventListener(function(n,o){o.data.name===t._explodeAnimationEvent&&e()})},r([p({type:sp.Skeleton,visible:!0})],t.prototype,"_spine",void 0),r([p({visible:!0})],t.prototype,"_staticAnimationKey",void 0),r([p({visible:!0})],t.prototype,"_idleAnimationKey",void 0),r([p({visible:!0})],t.prototype,"_explodeAnimationKey",void 0),r([p({visible:!0})],t.prototype,"_explodeAnimationEvent",void 0),r([s],t)}(i.LootBoxView);n.SpineLootBoxView=l,cc._RF.pop()},{"./LootBoxView (@tapclap.game-kit.ui.loot-box)":"LootBoxView (@tapclap.game-kit.ui.loot-box)"}],"SpineMixAnimation (@tapclap.match-x.cocos.components.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"dfba93oqdlc1L2QwC9gnhjb","SpineMixAnimation (@tapclap.match-x.cocos.components.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SpineMixAnimation=void 0;var c=cc._decorator,s=c.ccclass,p=c.property,l=function(){function e(){this.fromAnimation="",this.toAnimation="",this.duration=.25}return r([p()],e.prototype,"fromAnimation",void 0),r([p()],e.prototype,"toAnimation",void 0),r([p()],e.prototype,"duration",void 0),r([s("SpineMixAnimationItem")],e)}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.items=[],t}return a(t,e),t.prototype.onLoad=function(){var e,t;try{for(var n=i(this.items),o=n.next();!o.done;o=n.next()){var a=o.value,r=a.fromAnimation,c=a.toAnimation,s=a.duration;this.spine.setMix(r,c,s)}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([p([l])],t.prototype,"items",void 0),r([s],t)}(cc.Component);n.SpineMixAnimation=m,cc._RF.pop()},{}],"SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)":[function(e,t,n){"use strict";cc._RF.push(t,"73637ZkIHVG86jDuyZLMtg8","SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)"),n.__esModule=!0,n.SpineSpeakerComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x=e("./SpeakerComponent (@tapclap.game-kit.ui.dialogs)");function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function I(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var M=cc._decorator,j=M.ccclass,L=M.menu,F=M.requireComponent,D=M.property,B=(o=j("Animation"),a=D(),r=D(),i=D(),o((p=I((s=function(){T(this,"name",p,this),T(this,"loop",l,this),T(this,"track",m,this)}).prototype,"name",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=I(s.prototype,"loop",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=I(s.prototype,"track",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=s))||c),G=(u=j("SpeakerAnimation"),d=D(),y=D([B]),u((g=I((h=function(){T(this,"key",g,this),T(this,"animations",v,this)}).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=I(h.prototype,"animations",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=h))||f),N=(_=L("UI-Kit/Dialogs/SpineSpeakerComponent"),b=F(sp.Skeleton),C=D({type:[G],visible:!0}),j(w=_(w=b((S=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return T(t=e.call.apply(e,[this].concat(o))||this,"_animations",E,P(t)),t._currentSpeakerAnimation=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,k(t,n);var a=o.prototype;return a.onLoad=function(){this.resetAnimations()},a.setEmotion=function(e){var t=this._animations.find(function(t){return t.key===e});if(t){var n=this.getComponent(sp.Skeleton),o=n.getState();if(this._currentSpeakerAnimation)for(var a,r=t.animations.map(function(e){return e.track}),i=A(this._currentSpeakerAnimation.animations.map(function(e){return e.track}));!(a=i()).done;){var c=a.value;r.includes(c)||o&&o.setEmptyAnimation(c,0)}for(var s,p=A(t.animations);!(s=p()).done;){var l=s.value,m=l.track,u=l.name,d=l.loop;n.addAnimation(m,u,d)}this._currentSpeakerAnimation=t}return Promise.resolve()},a.resetAnimations=function(){var e=this.getComponent(sp.Skeleton).getState();e.tracks.forEach(function(t,n){return e.setEmptyAnimation(n,0,0)})},o}(x.SpeakerComponent),E=I(S.prototype,"_animations",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=S))||w)||w)||w);n.SpineSpeakerComponent=N,cc._RF.pop()},{"./SpeakerComponent (@tapclap.game-kit.ui.dialogs)":"SpeakerComponent (@tapclap.game-kit.ui.dialogs)"}],"SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"bba64Z6CTBWCJHIeznNmaIT","SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SpineTrackAnimation=void 0;var c=cc._decorator,s=c.ccclass,p=c.property,l=function(){function e(){this.trackIndex=0,this.animationName="",this.loop=!1,this.delay=0}return r([p(cc.Integer)],e.prototype,"trackIndex",void 0),r([p()],e.prototype,"animationName",void 0),r([p()],e.prototype,"loop",void 0),r([p()],e.prototype,"delay",void 0),r([s("SpineTrackAnimationItem")],e)}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.items=[],t}return a(t,e),t.prototype.onLoad=function(){var e,t;try{for(var n=i(this.items),o=n.next();!o.done;o=n.next()){var a=o.value,r=a.trackIndex,c=a.animationName,s=a.loop,p=a.delay;this.spine.addAnimation(r,c,s,p)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r([p(sp.Skeleton)],t.prototype,"spine",void 0),r([p([l])],t.prototype,"items",void 0),r([s],t)}(cc.Component);n.SpineTrackAnimation=m,cc._RF.pop()},{}],"SpinnerComponent (@tapclap.game-kit.ui.spinner)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"641e5riNvVKWoLPPIpD1p7c","SpinnerComponent (@tapclap.game-kit.ui.spinner)"),n.__esModule=!0,n.SpinnerComponent=void 0;var r=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r.show=function(){return Promise.resolve()},r.hide=function(){return Promise.resolve()},o}(cc.Component))||o;n.SpinnerComponent=r,cc._RF.pop()},{}],"SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"4797b58q8tLErUfZVRCgZLY","SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.SpriteAnimationItem=void 0;var o,a,r,i,c,s,p,l,m,u=e("./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),d=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)");function f(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var _=cc._decorator,b=_.ccclass,C=_.property,w=(o=b("SpriteAnimationItem"),a=C({tooltip:"\u0421\u043f\u0440\u0430\u0439\u0442-\u0444\u0440\u0435\u0439\u043c",type:cc.SpriteFrame,visible:!0}),r=C({tooltip:"\u041e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u043a\u043b\u0438\u043f?",visible:!0}),i=C({type:[cc.Node],tooltip:"\u041d\u043e\u0434\u0430 \u0441 \u043a\u043b\u0438\u043f\u043e\u043c",visible:function(){return this._stopClip}}),o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return f(t=e.call.apply(e,[this].concat(o))||this,"_spriteFrame",p,h(t)),f(t,"_stopClip",l,h(t)),f(t,"_clipNodes",m,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=o.prototype;return a.create=function(e,t){var n=this;return void 0===t&&(t={}),new d.FunctionAnimation(function(){if(t.overrideCurrent){var o=e.getComponent(y.SpriteAtlasAnimationComponent);o&&o.stop(!1)}return n.apply(e)})},a.apply=function(e){var t=e.getComponent(cc.Sprite)||e.addComponent(cc.Sprite);this._stopClip&&this._clipNodes.length>0&&this._clipNodes.forEach(function(e){var t=e.getComponent(cc.Animation);if(t&&t.currentClip){var n=t.getAnimationState(t.currentClip.name);n&&n.stop()}}),t.spriteFrame=this._spriteFrame},o}(u.SubAnimationItem),p=v(s.prototype,"_spriteFrame",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=v(s.prototype,"_stopClip",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=v(s.prototype,"_clipNodes",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=s))||c);n.SpriteAnimationItem=w,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)":"SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)","./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"}],"SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";cc._RF.push(t,"d6f50jQ/NdQ3L7r4nPNocsA","SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.SpriteAtlasAnimation=void 0;var o=e("./Animation (@tapclap.match-x.engine.systems.game-action-system)"),a=e("./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o;return(o=e.call(this)||this)._target=t,o._options=Object.assign({atlas:null,startFrameIndex:0,fps:24,timeScale:1,delay:0,loop:!1,stopOnLastFrame:!1,resolveImmediate:!1,overrideCurrent:!0},n),o._settledResolve=null,o._settled=new Promise(function(e){o._settledResolve=e}),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c,s,p=o.prototype;return p._resolveAll=function(){this._resolve(),this._settledResolve()},p.run=function(){var e,t=this._target.getComponent(a.SpriteAtlasAnimationComponent);if(t&&(!t.isPlayingNow()||this._options.overrideCurrent))return t.animation=this,t.atlas=this._options.atlas,t.startFrameIndex=this._options.startFrameIndex,t.currentFrameIndex=null!=(e=this._options.startFrameIndex)?e:t.currentFrameIndex,t.fps=this._options.fps,t.timeScale=this._options.timeScale,t.delay=this._options.delay,t.loop=this._options.loop,t.stopOnLastFrame=this._options.stopOnLastFrame,this._options.resolveImmediate?(t.run().then(this._settledResolve.bind(this)),this._resolve()):t.run().then(this._resolveAll.bind(this))},p.stop=function(e){void 0===e&&(e=!1);var t=this._target.getComponent(a.SpriteAtlasAnimationComponent);if(t)return t.startFrameIndex=this._options.startFrameIndex,t.stop(e).then(this._resolve.bind(this))},c=o,(s=[{key:"settled",get:function(){return this._settled}},{key:"active",get:function(){var e=this._target.getComponent(a.SpriteAtlasAnimationComponent);return e&&e.animation===this}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),o}(o.Animation);n.SpriteAtlasAnimation=c,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)","./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)":"SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)"}],"SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C;function w(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"2d81eayW65WE6jMiWLYmHA0","SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)"),n.__esModule=!0,n.SpriteAtlasAnimationComponent=void 0;var O=cc._decorator,R=O.property,P=O.ccclass,k=(o=(0,O.requireComponent)(cc.Sprite),a=R({type:cc.SpriteAtlas,visible:!0}),r=R({visible:!0}),i=R({visible:!0}),c=R({visible:!0}),s=R({visible:!0}),p=R({visible:!0}),l=R({visible:!0}),m=R({visible:!0}),P(u=o((d=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return w(t=e.call.apply(e,[this].concat(o))||this,"_atlas",y,E(t)),w(t,"_startFrameIndex",f,E(t)),w(t,"_fps",h,E(t)),w(t,"_timeScale",g,E(t)),w(t,"_delay",v,E(t)),w(t,"_loop",_,E(t)),w(t,"_playOnLoad",b,E(t)),w(t,"_stopOnLastFrame",C,E(t)),t._playCallback=null,t._currentFrameIndex=0,t._playPromiseResolve=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,x(t,n);var a,r,i=o.prototype;return i._setFrame=function(e){this._atlas&&(this.getComponent(cc.Sprite).spriteFrame=this._atlas.getSpriteFrames()[e])},i.onLoad=function(){this._currentFrameIndex=this._startFrameIndex,this._playOnLoad&&this.run()},i.run=function(){var e=this;return new Promise(function(t){e._playPromiseResolve=t,e._playCallback&&e.stop(),e._playCallback=function(){var t=e._atlas.getSpriteFrames();e._currentFrameIndex+1>t.length&&(e._currentFrameIndex=e._startFrameIndex,!e._loop)?e.stop(!e._stopOnLastFrame):e._setFrame(e._currentFrameIndex++)};var n=1/e._fps/e._timeScale,o=e._loop?cc.macro.REPEAT_FOREVER:e._atlas.getSpriteFrames().length,a=e._delay;e.schedule(e._playCallback,n,o,a)})},i.stop=function(e){return void 0===e&&(e=!1),this._playCallback&&(this.unschedule(this._playCallback),this._playCallback=null,this._playPromiseResolve()),e&&(this._setFrame(this._startFrameIndex),this._atlas=null),Promise.resolve()},i.isPlayingNow=function(){return!!this._playCallback},a=o,(r=[{key:"atlas",set:function(e){this._atlas=e}},{key:"startFrameIndex",set:function(e){this._startFrameIndex=e}},{key:"currentFrameIndex",get:function(){return this._currentFrameIndex},set:function(e){this._currentFrameIndex=e}},{key:"animation",get:function(){return this._currentAnimation},set:function(e){this._currentAnimation=e}},{key:"fps",set:function(e){this._fps=e}},{key:"timeScale",set:function(e){this._timeScale=e}},{key:"delay",set:function(e){this._delay=e}},{key:"loop",set:function(e){this._loop=e}},{key:"stopOnLastFrame",set:function(e){this._stopOnLastFrame=e}}])&&S(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),y=A(d.prototype,"_atlas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=A(d.prototype,"_startFrameIndex",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=A(d.prototype,"_fps",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),g=A(d.prototype,"_timeScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=A(d.prototype,"_delay",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=A(d.prototype,"_loop",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=A(d.prototype,"_playOnLoad",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=A(d.prototype,"_stopOnLastFrame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=d))||u)||u);n.SpriteAtlasAnimationComponent=k,cc._RF.pop()},{}],"SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"1db36uklW9bOphID7oPBsZG","SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.SpriteAtlasAnimationItem=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v=e("./SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)"),_=e("./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)");function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var x=cc._decorator,A=x.ccclass,O=x.property,R=(o=A("SpriteAtlasAnimationItem"),a=O({type:cc.SpriteAtlas,visible:!0}),r=O({visible:!0}),i=O({visible:!0}),c=O({visible:!0}),s=O({visible:!0}),p=O({tooltip:"\u0421\u0440\u0430\u0437\u0443 \u0440\u0435\u0437\u043e\u043b\u0432\u0438\u0442\u044c promise",visible:!0}),o((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_atlas",u,w(t)),b(t,"_startFrameIndex",d,w(t)),b(t,"_fps",y,w(t)),b(t,"_timeScale",f,w(t)),b(t,"_stopOnLastFrame",h,w(t)),b(t,"_resolve",g,w(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,S(t,n);var a,r,i=o.prototype;return i.create=function(e,t){return void 0===t&&(t={}),this._createAnimation(e,t)},i.apply=function(e){var t=this._createAnimation(e);t.run(),t.stop()},i._createAnimation=function(e,t){return void 0===t&&(t={}),new v.SpriteAtlasAnimation(e,Object.assign({},t,{atlas:this._atlas,startFrameIndex:this._startFrameIndex,fps:this._fps,timeScale:this._timeScale,stopOnLastFrame:this._stopOnLastFrame,resolveImmediate:this._resolve}))},a=o,(r=[{key:"resolve",set:function(e){this._resolve=e}}])&&C(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(_.SubAnimationItem),u=E(m.prototype,"_atlas",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=E(m.prototype,"_startFrameIndex",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=E(m.prototype,"_fps",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),f=E(m.prototype,"_timeScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=E(m.prototype,"_stopOnLastFrame",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=E(m.prototype,"_resolve",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=m))||l);n.SpriteAtlasAnimationItem=R,cc._RF.pop()},{"./SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)":"SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)","./SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":"SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"}],"SpriteFromEpisodeComponent (scripts.common.match3-game.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f8c24qcChhS/YEycnVRXErH","SpriteFromEpisodeComponent (scripts.common.match3-game.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SpriteFromEpisode=void 0;var i=e("./Match3GameComponent (scripts.scenes.match3-game)"),c=e("./Inject (@tapclap.utils-js.inject)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.match3Game=null,t.sprite=null,t.imgName="game",t.fallbackImgName="bg",t}return a(t,e),t.prototype.start=function(){var e=this;if(this.sprite||(this.sprite=this.node.getComponent(cc.Sprite)),this.match3Game&&this.sprite){var t=this._getResourceRoot(),n=t.split("/")[0],o=t.split("/").slice(1).join("/"),a=cc.assetManager.bundles.get(n).getInfoWithPath(o).uuid,r=cc.assetManager.dependUtil.getDepsRecursively(a).map(function(e){return cc.assetManager.assets.get(e)}).filter(function(e){return e instanceof cc.SpriteFrame}),i=r.find(function(t){return t.name===e.imgName});i||(i=r.find(function(t){return t.name===e.fallbackImgName})),i&&(this.sprite.spriteFrame=new cc.SpriteFrame(i.getTexture()))}},t.prototype._getResourceRoot=function(){var e,t=this._metaGameManager.getCurrentMetaGame(),n=t.getModule("episodes"),o=(null===(e=t.getModule("levels").getLastLevel())||void 0===e?void 0:e.number)||n.getCurrentLevel(),a=Math.min(n.getAvailableEpisodeCount(),Math.ceil(o/n.getLevelCountPerEpisode()));return n.getResource(a)},r([l(i.Match3GameComponent)],t.prototype,"match3Game",void 0),r([l(cc.Sprite)],t.prototype,"sprite",void 0),r([l({tooltip:"In prefab"})],t.prototype,"imgName",void 0),r([l],t.prototype,"fallbackImgName",void 0),r([c.Inject("MetaGameManager")],t.prototype,"_metaGameManager",void 0),r([p],t)}(cc.Component);n.SpriteFromEpisode=m,cc._RF.pop()},{"./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./Match3GameComponent (scripts.scenes.match3-game)":"Match3GameComponent (scripts.scenes.match3-game)"}],"SpriteMorphViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"08e3bRQAvVJ0rQ1DzkGqemO","SpriteMorphViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.SpriteMorphViewComponent=void 0;var o,a,r,i,c,s,p=e("./MorphViewComponent (@tapclap.match-x.cocos.components)");function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var y=cc._decorator,f=y.ccclass,h=y.property,g=(o=h({type:cc.Sprite,visible:!0}),a=h({type:[cc.SpriteFrame],visible:!0}),f((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return l(t=e.call.apply(e,[this].concat(o))||this,"_holder",c,m(t)),l(t,"_spriteFrames",s,m(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),o.prototype.setEntityGroup=function(e){var t=this._spriteFrames[e-1];if(!t)throw new Error("The index: "+e+" is outside the spriteFrames array!");this._holder.spriteFrame=t},o}(p.MorphViewComponent),c=d(i.prototype,"_holder",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=d(i.prototype,"_spriteFrames",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=i))||r);n.SpriteMorphViewComponent=g,cc._RF.pop()},{"./MorphViewComponent (@tapclap.match-x.cocos.components)":"MorphViewComponent (@tapclap.match-x.cocos.components)"}],"SpriteThemeComponent (@tapclap.game-kit.ui.themes)":[function(e,t,n){"use strict";cc._RF.push(t,"a8a84barsRYqqBCar6UDN7J","SpriteThemeComponent (@tapclap.game-kit.ui.themes)"),n.__esModule=!0,n.SpriteThemeComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./ThemeComponent (@tapclap.game-kit.ui.themes)");function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var w=cc._decorator,S=w.ccclass,E=w.property,x=w.menu,A=(o=S("SpriteThemeItem"),a=E(),r=E({type:cc.SpriteFrame}),o((s=C((c=function(){b(this,"key",s,this),b(this,"spriteFrame",p,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=C(c.prototype,"spriteFrame",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i),O=(l=x("UI/Themes/SpriteThemeComponent"),m=E({type:cc.SpriteFrame,visible:!0}),u=E({type:[A],visible:!0}),S(d=l((y=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_default",f,v(t)),b(t,"_themes",h,v(t)),t._activeThemeKey=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var a=o.prototype;return a.onLoad=function(){!this._activeThemeKey&&this._default&&this._setSprite(this._default)},a.setTheme=function(e){var t=e?this._getSpriteByThemeKey(e):this._default;return!!t&&(this._setSprite(t),this._activeThemeKey=e,!0)},a._getSpriteByThemeKey=function(e){var t=this._themes.find(function(t){var n=t.key;return e===n});return t.spriteFrame?t.spriteFrame:null},a._setSprite=function(e){var t=this.node.getComponent(cc.Sprite);t&&(t.spriteFrame=e)},o}(g.ThemeComponent),f=C(y.prototype,"_default",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C(y.prototype,"_themes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=y))||d)||d);n.SpriteThemeComponent=O,cc._RF.pop()},{"./ThemeComponent (@tapclap.game-kit.ui.themes)":"ThemeComponent (@tapclap.game-kit.ui.themes)"}],"SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"97cf1UYTGJXfZ/Zm0ySBqPw","SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),n.__esModule=!0,n.SquirrelThrowNutAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),c=e("./SpineAnimation (@tapclap.match-x.cocos.animations)");function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t.world,n._spine=t.spine,n._startAnimationKey=t.startAnimationKey,n._throwAnimationKey=t.throwAnimationKey,n._throwAnimationEvent=t.throwAnimationEvent,n._finishAnimationKey=t.finishAnimationKey,n._boneKey=t.boneKey,n._speed=void 0===t.speed?1500:t.speed,n._initialScale=null==t.initialScale?1:t.initialScale,n._audioEffectsPlayer=t.audioEffectsPlayer,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.build=function(e){var t=this;if(e&&e.data){for(var n,o=[],p=s(e.data);!(n=p()).done;){var l=n.value,m=l.newEntity,u=l.prevEntity;"emitOnTurn"===l.trigger&&m&&"nut"===m.type&&function(){var e=m.getComponent("render").node,n=u.getComponent("render").node;e.setScale(0);var s=new a.ChainAnimation([new r.FunctionAnimation(function(){t._spine.active=!0,e.setScale(0),e.parent=t._spine.parent}),new c.SpineAnimation(t._spine.getComponent(sp.Skeleton),{animationName:t._startAnimationKey,loop:!1})]),p=new a.ChainAnimation([new c.SpineAnimation(t._spine.getComponent(sp.Skeleton),{animationName:t._throwAnimationKey,loop:!1,event:t._throwAnimationEvent}),new r.FunctionAnimation(function(){if(t._boneKey){var n=t._spine.getComponent(sp.Skeleton).findBone(t._boneKey),o=t._spine.convertToWorldSpaceAR(new cc.Vec2(n.worldX,n.worldY));e.setScale(t._initialScale),e.setPosition(e.parent.convertToNodeSpaceAR(o)),e.angle=n.rotation}}),new r.FunctionAnimation(function(){var o=n.getPosition(),a=n.parent.convertToWorldSpaceAR(o),r=e.getPosition(),c=t._spine.parent.convertToNodeSpaceAR(a),s=cc.Vec2.distance(r,c)/t._speed;return new i.ActionAnimation(cc.spawn([cc.moveTo(s,t._spine.parent.convertToNodeSpaceAR(a)),cc.scaleTo(s,1),cc.rotateTo(s,0)]),e).run().then(function(){return e.parent=n.parent,e.setPosition(o),new i.ActionAnimation(cc.scaleTo(.1,0,0),n).run()},e)})]),l=new a.ChainAnimation([new c.SpineAnimation(t._spine.getComponent(sp.Skeleton),{animationName:t._finishAnimationKey,loop:!1}),new r.FunctionAnimation(function(){t._spine.active=!1})]),d=new a.ChainAnimation([s,p,l]);o.push([{target:t._world,animation:d}])}()}return o}},o}(o.GameActionBuilder);n.SquirrelThrowNutAnimationBuilder=u,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./SpineAnimation (@tapclap.match-x.cocos.animations)":"SpineAnimation (@tapclap.match-x.cocos.animations)"}],"StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"b5fbcNevCFZRLBRkfDglzwI","StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.StarProgressAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),i=e("./AnimationData (@tapclap.match-x.cocos.animations)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._component=t.component,n._checkpoints=t.checkpoints,n._eventOnShowStar=t.eventOnShowStar,n._audioEffectsPlayer=t.audioEffectsPlayer,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.build=function(e){var t=this,n=[],o=[];return e&&e.data&&function(){for(var n,r=e.data,i=r.targetValue,s=r.prevValue,p=r.value,l=function(){var e=n.value,r=i*e;if(s<=r){var c=t._checkpoints.indexOf(e),l=(t._checkpoints[c-1]||0)*i,m=Math.min((p-l)/(r-l),1);if(o.push(new a.FunctionAnimation(function(){s<=r&&p>=r&&t._component.node.once(t._eventOnShowStar,function(){t._audioEffectsPlayer.play("scoreBreakpointReached")}),t._component.setProgress(c,m)})),m<1)return"break"}},m=c(t._checkpoints);!(n=m()).done&&"break"!==l(););}(),o.length>0&&n.push(new i.AnimationData(null,new r.ChainAnimation(o))),[n]},o}(o.GameActionBuilder);n.StarProgressAnimationBuilder=m,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"StarSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"c64acbmPXNX561qHK9bmxm9","StarSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.StarSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./ScoreSystem (@tapclap.match-x.engine.systems.score-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._starsBreakpoints=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.process=function(){var e=this._world.getState(a.ScoreSystem.STATE);if(e&&e.data)for(var t,n=e.data,o=n.prevValue,i=n.targetValue,c=n.value,s=r(this._starsBreakpoints);!(t=s()).done;){var p=t.value,l=i*p;o<l&&l<=c&&this._world.getEnabledComponent("stars").setValue(this._starsBreakpoints.indexOf(p)+1)}},o}(o.PipelineProcessSystem);n.StarSystem=p,p.KEY="star",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./ScoreSystem (@tapclap.match-x.engine.systems.score-system)":"ScoreSystem (@tapclap.match-x.engine.systems.score-system)"}],"StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"561ceU31ONcOqGZwIjFm20Q","StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"),n.__esModule=!0,n.StarsRewardReachedGameForceEndHandler=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.handle=function(e){var t=e.getModule("starsReward");return t&&t.hasReward()},a}(e("./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)").GameForceEndHandler);n.StarsRewardReachedGameForceEndHandler=a,cc._RF.pop()},{"./GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)":"GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)"}],"StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"be9c2huQXZUA44ZtKooMQa1","StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.StartAnimationBuilder=void 0;var c=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./AnimationData (@tapclap.match-x.cocos.animations)"),l=e("./StartSystem (@tapclap.match-x.engine.systems.start-system)"),m=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=function(e){function t(t){var n=e.call(this)||this;return n._startAnimator=t.startAnimator,n._heroAnimation=t.heroAnimation,n._audioEffectsPlayer=t.audioEffectsPlayer,n._backdropManager=t.backdropManager,n._handlers=t.handlers,n}return a(t,e),t.prototype.build=function(e){var t,n=this;if(e){var o=void 0;switch(e.data){case l.StartSystem.STATE_LOAD:o=new s.FunctionAnimation(function(){var e,t;null===(e=n._startAnimator)||void 0===e||e.initial(),null===(t=n._backdropManager)||void 0===t||t.enable(),n._handlers.forEach(function(e){return e.forEach(function(e){return e.initial()})})});break;case l.StartSystem.STATE_START:o=new u.ChainAnimation(i([new m.GroupAnimation([null===(t=this._audioEffectsPlayer)||void 0===t?void 0:t.create("showField"),new s.FunctionAnimation(function(){var e;return null===(e=n._startAnimator)||void 0===e?void 0:e.show()}),new s.FunctionAnimation(function(){var e;return null===(e=n._heroAnimation)||void 0===e?void 0:e.run()})])],this._handlers.map(function(e){return e.map(function(e){return e.run()})}).flat(),[new s.FunctionAnimation(function(){var e;return null===(e=n._backdropManager)||void 0===e?void 0:e.disable()})]))}return o?[[new p.AnimationData(null,o)]]:[]}},t}(c.GameActionBuilder);n.StartAnimationBuilder=d,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./StartSystem (@tapclap.match-x.engine.systems.start-system)":"StartSystem (@tapclap.match-x.engine.systems.start-system)"}],"StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"24ff2ajQMVSV5CXTTjw00Hr","StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StartAnimationHandler=void 0;n.StartAnimationHandler=function(){},cc._RF.pop()},{}],"StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":[function(e,t,n){"use strict";cc._RF.push(t,"6f40fJvfbZUV44efDqqIKBu","StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.StartAnimatorComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=i.menu,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._order=0,t}return a(t,e),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},enumerable:!1,configurable:!0}),r([s({visible:!0})],t.prototype,"_order",void 0),r([c,p("Match-X/StartAnimator/StartAnimator")],t)}(cc.Component);n.StartAnimatorComponent=l,cc._RF.pop()},{}],"StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":[function(e,t,n){"use strict";cc._RF.push(t,"801b0inFe1e45ALyi8Letli","StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterAddMovesAnimationCreator=void 0;var c=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),s=e("./AnimationData (@tapclap.match-x.cocos.animations)"),p=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"),y=e("./CounterAnimation (@tapclap.match-x.cocos.animations)"),f=function(e){function t(t){var n=e.call(this,t)||this;return n._particleDuration=1.5,n._particleLifeTime=4,n._starPrefabPath=t.starPrefabPath,n._movesCounterView=t.movesCounterView,n._progressView=t.progressView,n._audioEffectName=t.audioEffectName||"startBoosterSuperTile",n}return a(t,e),t.prototype.create=function(e){var t=this,n=[];if(e){var o=e.value,a=e.prevValue,r=a-o==1?0:.25,d=this._movesCounterView.node.getChildByName("moves"),f=new m.FunctionAnimation(function(){var e=t._progressView.node.convertToNodeSpaceAR(d.parent.convertToWorldSpaceAR(d.getPosition())),n=cc.instantiateFrom(t._starPrefabPath);n.setPosition(e),t._progressView.node.addChild(n);var o=n.getComponent(cc.ParticleSystem);o.startRadius=0,o.endRadius=0,o.duration=t._particleDuration;for(var a=d.width,r=[],s=function(e){var n=e/3,c=[cc.callFunc(function(){o.startRadius=a*e*1.2,o.endRadius=a*e*2,o.lifeVar=t._particleLifeTime/8}),cc.delayTime(-n*n+n)];r.push.apply(r,i(c))},p=0;p<1;p+=.1)s(p);var m=new u.GroupAnimation([new c.ActionAnimation(cc.sequence(r),n),new l.DummyAnimation],!0);o.resetSystem(),m.run()}),h=new u.GroupAnimation([this._audioEffectsPlayer.create(this._audioEffectName),new p.ChainAnimation([new c.ActionAnimation(cc.sequence(cc.delayTime(.1),cc.scaleTo(.2,2,2),cc.scaleTo(.2,1,1)),d),new y.CounterAnimation(o,a,2*r,function(e){t._movesCounterView.setCount(e.toString())})])],!0);n.push(new s.AnimationData(null,new p.ChainAnimation([f,h])))}return n},t}(d.StartBoosterAnimationCreator);n.StartBoosterAddMovesAnimationCreator=f,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./CounterAnimation (@tapclap.match-x.cocos.animations)":"CounterAnimation (@tapclap.match-x.cocos.animations)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":"StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"}],"StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)":[function(e,t,n){"use strict";cc._RF.push(t,"4060cIu0uxW+7uIxhmX0ONg","StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterAnimationBuilder=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._factory=t.factory,n._prefabs=t.prefabs||{},n._world=t.world,n._movesCounterView=t.movesCounterView,n._progressView=t.progressView,n}return a(t,e),t.prototype.build=function(e){var t=[];if(e&&e.data)for(var n=0;n<e.data.length;n++){var o=e.data[n],a=o.type,r=this._factory.create(a,[{world:this._world,prefab:this._prefabs[a],movesCounterView:this._movesCounterView,progressView:this._progressView}],{merge:!0,rawWrap:!0});t.push(r.create(o))}return t},t}(e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameActionBuilder);n.StartBoosterAnimationBuilder=r,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":[function(e,t,n){"use strict";cc._RF.push(t,"a5962GAZlpU4ZlLVfEkk7Pf","StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterAnimationCreator=void 0;var o=function(){function e(e){this._world=e.world,this._audioEffectsPlayer=e.audioEffectsPlayer}return e.prototype.create=function(){return[]},e}();n.StartBoosterAnimationCreator=o,cc._RF.pop()},{}],"StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":[function(e,t,n){"use strict";cc._RF.push(t,"0554cn9Wb1cAKXvK+muNN9Z","StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterEmitEntityAnimationCreator=void 0;var s=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),p=e("./AnimationData (@tapclap.match-x.cocos.animations)"),l=e("./EmitOnGameStartComponent (@tapclap.match-x.engine.components)"),m=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),u=e("./EmitSystem (@tapclap.match-x.engine.systems.emit-system)"),d=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),h=function(e){function t(t){var n=e.call(this,t)||this;return n._particleDelay=.7,n._particleDuration=1.5,n._particleLifeTime=4,n._starPrefabPath=t.starPrefabPath,n._audioEffectName=t.audioEffectName||"startBoosterSuperTile",n}return a(t,e),t.prototype.create=function(e){var t,n,o=this,a=this._world.getState(u.EmitSystem.STATE_EMIT),r=[];if(a&&a.data&&e.entities){var h=this._world.getComponent("tiles").grid.getComponent(m.RenderComponent.KEY).node,g=function(t,n,a,c){if(c===l.EmitOnGameStartComponent.KEY&&e.entities.includes(n.type)){var u=t.getComponent(m.RenderComponent.KEY).node,g=new y.FunctionAnimation(function(){var e=h.convertToNodeSpaceAR(u.parent.convertToWorldSpaceAR(u.getPosition())),t=cc.instantiateFrom(o._starPrefabPath);t.setPosition(e),h.addChild(t);var n=t.getComponent(cc.ParticleSystem);n.startRadius=0,n.endRadius=0,n.duration=o._particleDuration;for(var a=u.width,r=[],c=function(e){var t=[cc.callFunc(function(){n.startRadius=a*e*1.2,n.endRadius=a*e*2,n.lifeVar=o._particleLifeTime/8}),cc.delayTime(e/3)];r.push.apply(r,i(t))},p=0;p<1;p+=.1)c(p);var l=new f.GroupAnimation([new s.ActionAnimation(cc.sequence(r),t),new d.DummyAnimation],!0);n.resetSystem(),l.run()}),_=n.getComponent(m.RenderComponent.KEY).node,b=a.getComponent(m.RenderComponent.KEY).node,C=_.parent.convertToNodeSpaceAR(u.parent.convertToWorldSpaceAR(u.position));_.setPosition(C),_.scale=0;var w=new f.GroupAnimation([v._audioEffectsPlayer.create(v._audioEffectName),new s.ActionAnimation(cc.sequence(cc.delayTime(v._particleDelay+.15),cc.scaleTo(.2,2,2),cc.scaleTo(.2,1,1)),_),new s.ActionAnimation(cc.sequence(cc.delayTime(v._particleDelay+.15),cc.scaleTo(.1,0,0)),b)],!0);r.push(new p.AnimationData(n,new f.GroupAnimation([g,w])))}},v=this;try{for(var _=c(a.data.flat()),b=_.next();!b.done;b=_.next()){var C=b.value;g(C.targetCell,C.newEntity,C.prevEntity,C.trigger)}}catch(w){t={error:w}}finally{try{b&&!b.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}}return r},t}(e("./StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)").StartBoosterAnimationCreator);n.StartBoosterEmitEntityAnimationCreator=h,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EmitOnGameStartComponent (@tapclap.match-x.engine.components)":"EmitOnGameStartComponent (@tapclap.match-x.engine.components)","./EmitSystem (@tapclap.match-x.engine.systems.emit-system)":"EmitSystem (@tapclap.match-x.engine.systems.emit-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)":"StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)"}],"StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)":[function(e,t,n){"use strict";cc._RF.push(t,"ecc65ilfllX2It7I+J1ZckQ","StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterStrategy=void 0;n.StartBoosterStrategy=function(e){this._world=e.world},cc._RF.pop()},{}],"StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)":[function(e,t,n){"use strict";cc._RF.push(t,"18e76pkd05VyozmmgVjBmPC","StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterSystem=void 0;var r=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),i=e("./StartBoostersComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.world,o=t.strategyFactory,a=t.tutorialComponent,r=t.skipStates,i=e.call(this)||this;return i._world=n,i._strategyFactory=o,i._tutorialComponent=a,i._skipStates=r||[],i}return a(t,e),t.prototype.process=function(){var e=this,t=this._skipStates.some(function(t){return e._world.getState(t)});if(!this._tutorialIsActive()&&!t){var n=this._world.getEnabledComponent(i.StartBoostersComponent.KEY);if(n)for(var o=n.boosters.length-1;o>=0;o--){var a=n.boosters[o];this._strategyFactory.create(a,{startBoosterType:a,world:this._world}).apply()||this.events.emit("compensation:start:booster",a),n.remove(a)}}return!1},t.prototype._tutorialIsActive=function(){return this._tutorialComponent&&this._tutorialComponent.hasTutorial&&!this._tutorialComponent.isComplete},t.KEY="startBoosterSystem",t.STATE="startBooster",t}(r.PipelineProcessSystem);n.StartBoosterSystem=c,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./StartBoostersComponent (@tapclap.match-x.engine.components)":"StartBoostersComponent (@tapclap.match-x.engine.components)"}],"StartBoosterWindowItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"a56f9oh7lJdWo87RpAjwzKg","StartBoosterWindowItemComponent (scripts.windows.items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoosterWindowItemComponent=n.TypeIconsStyle=void 0;var i,c=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),s=e("./TimeDuration (@tapclap.utils-js.time-duration)"),p=e("./Inject (@tapclap.utils-js.inject)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(){function e(){this.backIconFrame=null,this._useIcon=!1,this._useSpine=!1,this.counterIconSpine=null,this.animationName="",this.counterIconFrame=null,this.font=null,this.fontSize=40,this.localPosition=cc.Vec2.ZERO,this.outlineColor=new cc.Color(15,120,164)}return Object.defineProperty(e.prototype,"useIcon",{get:function(){return this._useIcon},set:function(e){this._useIcon=e,this.useSpine&&e&&(this.useSpine=!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useSpine",{get:function(){return this._useSpine},set:function(e){this._useSpine=e,this.useIcon&&e&&(this.useIcon=!1)},enumerable:!1,configurable:!0}),r([u(cc.SpriteFrame)],e.prototype,"backIconFrame",void 0),r([u(cc.Boolean)],e.prototype,"_useIcon",void 0),r([u(cc.Boolean)],e.prototype,"useIcon",null),r([u(cc.Boolean)],e.prototype,"_useSpine",void 0),r([u(cc.Boolean)],e.prototype,"useSpine",null),r([u({type:sp.Skeleton,visible:function(){return this.useSpine}})],e.prototype,"counterIconSpine",void 0),r([u({visible:function(){return this.useSpine}})],e.prototype,"animationName",void 0),r([u({type:cc.SpriteFrame,visible:function(){return this.useIcon}})],e.prototype,"counterIconFrame",void 0),r([u({type:cc.Font,visible:function(){return!this.useIcon&&!this.useSpine}})],e.prototype,"font",void 0),r([u({type:cc.Integer,visible:function(){return!this.useIcon&&!this.useSpine}})],e.prototype,"fontSize",void 0),r([u({visible:function(){return!this.useIcon&&!this.useSpine}})],e.prototype,"localPosition",void 0),r([u({visible:function(){return!this.useIcon&&!this.useSpine}})],e.prototype,"outlineColor",void 0),r([m("BoosterCounterStyle")],e)}(),y=function(){function e(){this.type="",this.disableSpriteFrame=null,this.iconSpine=null,this.iconSpineOffset=new cc.Vec2}return r([u(cc.String)],e.prototype,"type",void 0),r([u(cc.SpriteFrame)],e.prototype,"disableSpriteFrame",void 0),r([u(sp.SkeletonData)],e.prototype,"iconSpine",void 0),r([u(cc.Vec2)],e.prototype,"iconSpineOffset",void 0),r([m("TypeIconsStyle")],e)}();n.TypeIconsStyle=y,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.CHECK=1]="CHECK",e[e.INFINITY=2]="INFINITY",e[e.ENOUGH=3]="ENOUGH",e[e.DISABLE=4]="DISABLE"}(i||(i={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemButton=null,t.tooltipButton=null,t.tooltip=null,t.tutorialShine=null,t.back=null,t.defaultBackSpriteFrame=null,t.disableBackSpriteFrame=null,t.timer=null,t.counter=null,t.defaultBoosterCounterStyle=null,t.infinityBoosterCounterStyle=null,t.checkBoosterCounterStyle=null,t.enoughBoosterCounterStyle=null,t.icon=null,t.iconSpine=null,t.iconStyles=[],t._type="",t._timedItem=null,t._countableItem=null,t._bounceTween=null,t._counterLabelTween=null,t._isBoosterUsing=!1,t._isTimerActive=!1,t._isTooltipShow=!1,t._currentTooltipTween=null,t._scheduleCallback=null,t}return a(t,e),Object.defineProperty(t.prototype,"isBoosterUsing",{get:function(){return this._isBoosterUsing},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){this._countableItem=e.countable,this._timedItem=e.timed,this._type=e.type,this._isAvailability=e.isAvailability,this._availabilityValue=e.availabilityValue,this.node.name+="_"+this._type,this.itemButton.name+="_"+this._type,this.tooltipButton.name+="_"+this._type,e.showTutorial&&this.tutorialShine&&(this.tutorialShine.active=!0),this.updateItem(),this._subscribeToCanvasEvents()},t.prototype.getType=function(){return this._type},t.prototype.getSpec=function(){return this._isTimerActive?"timebooster":"startbooster"},t.prototype.updateItem=function(){var e=this._getStyleType();this._setIconStyle(this._type,e,this._isAvailability);var t=this._isAvailability?this._type:this._availabilityValue.toString(),n=this._isAvailability?"description":"disable";switch(this._setTooltipText(t,n),e){case i.INFINITY:this._initializeTimer(),this.back.spriteFrame=this.defaultBackSpriteFrame,this.tooltipButton.active=!0,this.counter.active=!0,this.iconSpine.setAnimation(1,"activation",!1);break;case i.ENOUGH:this._setCounterValue("+",this.enoughBoosterCounterStyle),this.back.spriteFrame=this.defaultBackSpriteFrame,this.tooltipButton.active=!0,this.counter.active=!0;break;case i.CHECK:this._counterLabelTween&&this._counterLabelTween.stop(),this.iconSpine.setMix("deactivation","activation",.5),this.checkBoosterCounterStyle.counterIconSpine.setAnimation(0,this.checkBoosterCounterStyle.animationName,!1),this.counter.getComponent(cc.Animation).play("counter-hide"),this.tooltipButton.active=!0,this.counter.active=!0;break;case i.DISABLE:this.disableBackSpriteFrame&&(this.back.spriteFrame=this.disableBackSpriteFrame),this.tooltipButton.active=!1,this.counter.active=!1,this.checkBoosterCounterStyle.counterIconSpine.node.active=!1;break;case i.DEFAULT:default:this._setCounterValue(this._countableItem.amount.toString(),this.defaultBoosterCounterStyle),this.back.spriteFrame=this.defaultBackSpriteFrame,this.tooltipButton.active=!0,this.counter.active=!0,this.counter.getComponent(cc.Animation).stop();var o=this.counter.getChildByName("label");o.setScale(1),this._counterLabelTween=new cc.Tween(o).to(.35,{opacity:255},{easing:"quadInOut"}).start(),this.iconSpine.setMix("activation","deactivation",.5),this.checkBoosterCounterStyle.counterIconSpine.setAnimation(0,"deactivation",!1)}},t.prototype.onInput=function(e){e.target===this.tooltipButton||e.target===this.itemButton&&this._getStyleType()===i.DISABLE?(this._playTooltipAnimation(!this._isTooltipShow),this.node.emit("tooltipInput",{event:e,item:this})):e.target===this.itemButton?(this._toggleBoosterUse(),this._playTooltipAnimation(!1),this.node.emit("tooltipInput",{event:e,item:this})):this._playTooltipAnimation(!1)},t.prototype._getStyleType=function(){switch(!0){case!this._isAvailability:return i.DISABLE;case!!this._timedItem&&!this._timedItem.isExpired:return i.INFINITY;case this._isBoosterUsing:return i.CHECK;case this._countableItem.amount>0:return i.DEFAULT;case 0===this._countableItem.amount:return i.ENOUGH;default:return i.DEFAULT}},t.prototype._setIconStyle=function(e,t,n){void 0===n&&(n=!1);var o=this.iconStyles.find(function(t){return t.type===e});if(o)if(this.iconSpine.skeletonData!==o.iconSpine&&(this.iconSpine.skeletonData=o.iconSpine,this.iconSpine.node.setPosition(o.iconSpineOffset)),n)switch(this.iconSpine.node.active=!0,this.icon.node.active=!1,t){case i.CHECK:this._bounceTween&&this._bounceTween.stop(),this.iconSpine.setMix("deactivation","activation",.5),this.iconSpine.setAnimation(1,"activation",!1),this._bounceTween=new cc.Tween(this.iconSpine.node).to(.2,{scale:.855},{easing:"quadInOut"}).to(.2,{scale:1.05*.9},{easing:"quadInOut"}).to(.2,{scale:.9},{easing:"quadInOut"}).start();break;case i.INFINITY:case i.ENOUGH:case i.DEFAULT:default:this.iconSpine.setMix("activation","deactivation",.5),this.iconSpine.addAnimation(0,"idle",!0),this.iconSpine.setAnimation(1,"deactivation",!1),this._bounceTween&&this._bounceTween.stop(),this._bounceTween=new cc.Tween(this.iconSpine.node).to(.2,{scale:.9},{easing:"quadInOut"}).start()}else this.icon.node.active=!0,this.iconSpine.node.active=!1,this.icon.spriteFrame=o.disableSpriteFrame},t.prototype._setTooltipText=function(e,t){var n=this.tooltip.getComponentInChildren(c.I18NLabel);if(n)switch(t){case"description":n.setString("startBoosters."+e+".description");break;case"disable":n.setString("startBoosters.availableFrom",{level:e});break;default:n.string=e}else n.string=e},t.prototype._initializeTimer=function(){var e=this;this._timedItem&&!this._timedItem.isExpired&&(this._scheduleCallback=function(){var t=new Date(e._timedItem.expireAt);if(e._timedItem&&t.getTime()){var n=new s.TimeDuration((t.getTime()-cc.sys.now())/1e3);if(n.getSeconds()>0){e.timer.node.parent.active=!0,e._setCounterValue("\u221e",e.infinityBoosterCounterStyle);var o=e._i18n.t("formattedTime",{value:n.getSeconds()});e.timer.string=o}else e._setCounterValue(e._countableItem.amount.toString(),e.defaultBoosterCounterStyle),e._isTimerActive=!1,e.timer.node.parent.active=!1,e._isBoosterUsing=!1,e.unscheduleAllCallbacks(),e.updateItem()}},this._isTimerActive=!0,this._isBoosterUsing=!0,this._scheduleCallback(),this.schedule(this._scheduleCallback,1,cc.macro.REPEAT_FOREVER),this.node.emit("changeBoosterUsing",{item:this}))},t.prototype._setCounterValue=function(e,t){void 0===t&&(t=this.defaultBoosterCounterStyle);var n,o=this.counter.getComponentInChildren(cc.Label),a=this.counter.getComponentInChildren(cc.LabelOutline),r=this.counter.getComponent(cc.Sprite);if(!o)throw new Error("Not found cc.Label in children of counter");(r.spriteFrame=t.backIconFrame,t.useIcon)?(n=this.counter.getComponentInChildren(cc.Sprite),o.node.active=!1,n.node.active=!0,n.spriteFrame=t.counterIconFrame):(o.font=t.font,o.fontSize=t.fontSize,o.lineHeight=t.fontSize,a.color=t.outlineColor,o.string=e,o.node.setPosition(t.localPosition),o.node.active=!0,(n=this.counter.getComponentInChildren(cc.Sprite)).node.active=!1)},t.prototype._playTooltipAnimation=function(e){this.tooltip&&this._isTooltipShow!==e&&(this._currentTooltipTween&&this._currentTooltipTween.stop(),this._isTooltipShow=e,this._currentTooltipTween=cc.tween(this.tooltip).to(.1,{scale:e?1:0},{easing:"quadIn"}).start())},t.prototype._toggleBoosterUse=function(){this._isTimerActive||(this._countableItem.amount>0?(this._isBoosterUsing=!this._isBoosterUsing,this.updateItem(),this.node.emit("changeBoosterUsing",{item:this})):this.node.emit("purchaseBooster",{booster:this._type}))},t.prototype._subscribeToCanvasEvents=function(){cc.find("Canvas").on(cc.Node.EventType.TOUCH_END,this.onInput,this)},r([u(cc.Node)],t.prototype,"itemButton",void 0),r([u(cc.Node)],t.prototype,"tooltipButton",void 0),r([u(cc.Node)],t.prototype,"tooltip",void 0),r([u(cc.Node)],t.prototype,"tutorialShine",void 0),r([u(cc.Sprite)],t.prototype,"back",void 0),r([u(cc.SpriteFrame)],t.prototype,"defaultBackSpriteFrame",void 0),r([u(cc.SpriteFrame)],t.prototype,"disableBackSpriteFrame",void 0),r([u(cc.Label)],t.prototype,"timer",void 0),r([u(cc.Node)],t.prototype,"counter",void 0),r([u({type:d})],t.prototype,"defaultBoosterCounterStyle",void 0),r([u({type:d})],t.prototype,"infinityBoosterCounterStyle",void 0),r([u({type:d})],t.prototype,"checkBoosterCounterStyle",void 0),r([u({type:d})],t.prototype,"enoughBoosterCounterStyle",void 0),r([u(cc.Sprite)],t.prototype,"icon",void 0),r([u(sp.Skeleton)],t.prototype,"iconSpine",void 0),r([u({type:y})],t.prototype,"iconStyles",void 0),r([p.Inject("I18N")],t.prototype,"_i18n",void 0),r([m],t)}(cc.Component);n.StartBoosterWindowItemComponent=f,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)"}],"StartBoostersComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"55012QDSARcuqJhfocgaeuQ","StartBoostersComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoostersComponent=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._boosters=[],n._boosters=t,n}return a(t,e),Object.defineProperty(t.prototype,"boosters",{get:function(){return this._boosters},enumerable:!1,configurable:!0}),t.prototype.remove=function(e){this._boosters=this._boosters.filter(function(t){return t!==e})},t.KEY="starBoosters",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.StartBoostersComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"3b151LSBTFcSb5xH32ecp6D","StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StartBoostersDataLoader=void 0;var r=e("./StartBoostersComponent (@tapclap.match-x.engine.components)"),i=function(e){function t(t){var n=e.call(this)||this;return n._world=t,n}return a(t,e),t.prototype.load=function(e,t){var n=new r.StartBoostersComponent(t);this._world.addComponent(r.StartBoostersComponent.KEY,n)},t}(e("./DataLoader (@tapclap.match-x.engine.systems.load-system)").DataLoader);n.StartBoostersDataLoader=i,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)","./StartBoostersComponent (@tapclap.match-x.engine.components)":"StartBoostersComponent (@tapclap.match-x.engine.components)"}],"StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"2cb46lqeGNXbKLKe4+L7MXR","StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.StartLevelAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,{caller:t.caller})||this)._progress=t.moduleResolvers.progress.get(),n._levels=t.moduleResolvers.levels.get(),n._levelNumber=t.levelNumber,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){if(this._progress&&this._levels){var e=0;if(this._levelNumber?this._levelNumber<=this._progress.value&&(e=this._levelNumber):e=this._progress.value,e){var t=this._levels.getLevel(e);if(t&&this._caller.has(a.CALLER_START))return this._caller.run(a.CALLER_START,{level:t});if(this._caller.has(a.CALLER_NO_LEVEL))return this._caller.run(a.CALLER_NO_LEVEL)}}return Promise.resolve()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.StartLevelAction=a,a.CALLER_START="start",a.CALLER_NO_LEVEL="noLevel",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e3df68OH35XFLFZkhhvsOto","StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)"),n.__esModule=!0,n.StartLevelWindowKeyResolver=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._windowKey=t.windowKey,n._levels=t.moduleResolvers.levels.get(),n._conditionFunc=t.conditionFunc,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getKey=function(e){if(this._conditionFunc(e))return this._windowKey},a}(e("./WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)").WindowKeyResolver);n.StartLevelWindowKeyResolver=a,cc._RF.pop()},{"./WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)":"WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)"}],"StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"2683azlB4NCV41dgAl8gzSO","StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.StartLevelWindowLayoutComponent=void 0;var o,a=e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"),r=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var r=o.prototype;return r._createItem=function(e){var t=cc.instantiateFrom(this._options.item.prefab).getComponent(a.WindowItemComponent);if(t)return t.initialize(this._options.item),t.setIconFromPrefab(e.icon),t.label=e.label,t;throw new Error("Not found WindowItemComponent in prefab: "+this._options.item.prefab)},r.setLevel=function(e,t){if(e){var n=this.window.getLayout("header");n&&n.setTitle(t,{level:e})}},r.setGoals=function(e){void 0===e&&(e=[]);for(var t,n=i(e);!(t=n()).done;){var o=t.value,a=this._createItem(o);this._pushToRow(a.node)}},o}(r.RowContentWindowLayoutComponent))||o;n.StartLevelWindowLayoutComponent=l,cc._RF.pop()},{"./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"}],"StartLevelWithBoostersWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"26b78JFuDJQxL0hxg/d6ToL","StartLevelWithBoostersWindowLayoutComponent (scripts.windows.layouts)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.StartLevelWithBoostersWindowLayoutComponent=void 0;var c=e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"),s=e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),p=e("./StartBoosterWindowItemComponent (scripts.windows.items)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._startBoostersRowIndex=1,t._boosters=null,t}return a(t,e),t.prototype.setLevel=function(e,t){if(e){var n=this.window.getLayout("header");n&&n.setTitle(t,{level:e})}},t.prototype.setGoals=function(e){var t,n;void 0===e&&(e=[]);try{for(var o=i(e),a=o.next();!a.done;a=o.next()){var r=a.value,c=this._createGoalItem(r);this._pushToRow(c.node,0)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},t.prototype.setStartBoosters=function(e){var t,n;if(void 0===e&&(e=[]),0===e.length){this._clearRow(this._startBoostersRowIndex);var o=this._boosters.getComponent(cc.Layout);o&&(o.paddingBottom=0)}else try{for(var a=i(e),r=a.next();!r.done;r=a.next()){var c=r.value,s=this._createStartBoosterItem(c);this._pushToRow(s.node,this._startBoostersRowIndex)}}catch(p){t={error:p}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t.prototype.updateStartBoosters=function(){for(var e=this._getRows()[this._startBoostersRowIndex].getComponentsInChildren(p.StartBoosterWindowItemComponent),t=0;t<e.length;t++)e[t].updateItem()},t.prototype._createStartBoosterItem=function(e){var t=this,n=cc.instantiateFrom(this._options.itemBooster.prefab),o=n.getComponent(p.StartBoosterWindowItemComponent);if(o)return n.on("changeBoosterUsing",function(e){return t.window.events.emit("changeStartBoosterUsing",e.item)}),n.on("purchaseBooster",function(e){return t.window.events.emit("purchaseBooster",e)}),n.on("tooltipInput",function(e){t._getRows()[t._startBoostersRowIndex].getComponentsInChildren(p.StartBoosterWindowItemComponent).forEach(function(t){t!==e.item&&t.onInput(e.event)})}),o.initialize(e),o;throw new Error("Not found WindowItemComponent in prefab: "+this._options.itemBooster.prefab)},t.prototype._createGoalItem=function(e){var t=cc.instantiateFrom(this._options.itemGoal.prefab).getComponent(c.WindowItemComponent);if(t)return t.initialize(this._options.itemGoal),t.setIconFromPrefab(e.icon),t.label=e.label,t;throw new Error("Not found WindowItemComponent in prefab: "+this._options.itemGoal.prefab)},r([u({type:cc.Node,visible:!0})],t.prototype,"_boosters",void 0),r([m],t)}(s.RowContentWindowLayoutComponent);n.StartLevelWithBoostersWindowLayoutComponent=d,cc._RF.pop()},{"./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./StartBoosterWindowItemComponent (scripts.windows.items)":"StartBoosterWindowItemComponent (scripts.windows.items)","./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"}],"StartMatch3GameAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"af1adZMuBVVTaqMKJKTDlSk","StartMatch3GameAction (scripts.actions)"),n.__esModule=!0,n.StartMatch3GameAction=void 0;var o=e("./BundleLoadTask (@tapclap.game-kit.loader)"),a=e("./Action (@tapclap.game-kit.action-manager)"),r=e("./Match3GameConfig (scripts.common.match3-game)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._sceneManager=t.sceneManager,n._levels=t.levelsModuleResolver.get(),n._level=t.level,n._resourceMap=t.resourceMap,n._remoteConfig=t.remoteConfig,n._storage=t.storage,n._sceneResourcesManager=t.sceneResourcesManager,n._skinConfig=t.skinConfig||{},n._defaultResourcesKeys=t.defaultResourcesKeys||[],n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=a.prototype;return c.run=function(){var e=this;return this._levels&&this._levels.setLastLevel(this._level),Promise.resolve({value:!1}).then(function(t){return t.value||e._storage.getItem("skin")}).catch(function(){return e._storage.getItem("skin")}).then(function(e){return(e||"default").split("|")}).then(function(t){return e._sceneResourcesManager.getDataToLoad("Match3Game").then(function(e){return Promise.resolve({sceneRes:e,skinKeys:t})})}).then(function(t){var n=t.sceneRes,a=t.skinKeys,r=[].concat(a).reverse().find(function(e){return 0===e.search("theme-")}),i=(a=a.filter(function(t){return e._skinConfig[t]})).reduce(function(t,n){return Object.assign(t,e._skinConfig[n].entities||{})},{}),c=a.map(function(t){return e._skinConfig[t].backgroundIndex}).filter(function(e){return void 0!==e}).pop(),s={level:e._level,prefabs:Object.assign({},e._resourceMap,i),backgroundIndex:c,theme:r},p=[].concat(e._getLevelResources(e._level.data),Object.values(i)).map(function(e){return new o.BundleLoadTask(e,{asFile:!0})});p.push.apply(p,n);var l=performance.now();return e._sceneManager.loadScene("Match3Game",s,p,{strategyName:"transition"}).then(function(){console.log("Match3 loading at:",(performance.now()-l)/1e3,"sec")})})},c._getLevelResources=function(e){var t=this,n=new Set,o=[],a=e.tiles,i=e.emitByStrategy;a.cells.forEach(function(e){e.entity&&(n.add(e.entity.type),e.entity.components&&o.push.apply(o,Object.entries(e.entity.components))),e.randomEntities&&Object.entries(e.randomEntities).forEach(function(e){var t=e[0];e[1].options,n.add(t)})}),Object.values(a.defaultComponents).forEach(function(e){o.push.apply(o,Object.entries(e))}),Object.entries(a.probabilities).map(function(e){var t=e[0];e[1].options,n.add(t)}),a.drop.entities.flat().forEach(function(e){n.add(e)}),i.forEach(function(e){var t=e.emitOptions;t.entities&&Object.entries(t.entities).forEach(function(e){var t=e[0];e[1].options,n.add(t)})}),Object.keys(this._resourceMap).filter(function(e){return 0===e.search("candy-")||0===e.search("super-")}).forEach(function(e){n.add(e)}),Array.from(n.values()).forEach(function(e){o.push.apply(o,Object.entries(r.Match3GameConfig.entities[e].components))}),function e(t){t.filter(function(e){var t=e[0],n=e[1];return t.toLowerCase().search("emit")>-1&&void 0!==n.entities}).forEach(function(t){var o=t[1];o.entities&&(Object.keys(o.entities).forEach(function(t){n.has(t)||(n.add(t),e(Object.entries(r.Match3GameConfig.entities[t].components)))}),Object.values(o.entities).forEach(function(t){var n=t.options;n&&n.components&&e(Object.entries(n.components))}))})}(o);var c=[].concat(e.groups);return Array.from(n.values()).find(function(e){return"chocolatePot"===e})&&c.push(r.COLORS.BROWN),Array.from(new Set([].concat(Array.from(n.values()).map(function(e){return t._getResourcesByEntityType(e,c)}).flat(),this._defaultResourcesKeys.map(function(e){return t._resourceMap[e]}))))},c._getResourcesByEntityType=function(e,t){var n=Object.entries(r.COLORS).filter(function(e){e[0];var n=e[1];return t.includes(n)}).map(function(e){return e[0].toLowerCase()}),o=e.split("-"),a=o[0];if(o[1]){var i=Object.entries(this._resourceMap).filter(function(e){return e[0].split("-")[0]===a}).filter(function(e){var t=e[0];return n.includes(t.split("-")[1])}).map(function(e){return e[1]});if(i.push(this._resourceMap[e]),i.length>0)return i}return[this._resourceMap[e]]},a}(a.Action);n.StartMatch3GameAction=c,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./Match3GameConfig (scripts.common.match3-game)":"Match3GameConfig (scripts.common.match3-game)"}],"StartSceneComponent (scripts.scenes.start-scene)":[function(e,t,n){"use strict";cc._RF.push(t,"61777jx+EBKP5ifYDRS17d9","StartSceneComponent (scripts.scenes.start-scene)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.StartSceneComponent=void 0;var p=e("./sha256 (@tapclap.utils-js.crypto)"),l=e("./ActionManager (@tapclap.game-kit.action-manager)"),m=e("./AudioManager (@tapclap.game-kit.audio-manager)"),u=e("./BundleLoadTask (@tapclap.game-kit.loader)"),d=e("./FunctionLoadTask (@tapclap.game-kit.loader)"),y=e("./Loader (@tapclap.game-kit.loader)"),f=e("./SceneLoader (@tapclap.game-kit.loader)"),h=e("./SceneComponent (@tapclap.game-kit.scene-manager)"),g=e("./SceneManager (@tapclap.game-kit.scene-manager)"),v=e("./WindowManager (@tapclap.game-kit.ui.window-manager)"),_=e("./AdService (@tapclap.sdk-x.ad-service)"),b=e("./PaymentService (@tapclap.sdk-x.payment-service)"),C=e("./DI (@tapclap.utils-js.di)"),w=e("./DIInjectRegistry (@tapclap.utils-js.inject.registry)"),S=e("./Inject (@tapclap.utils-js.inject)"),E=e("./URL (@tapclap.utils-js.url)"),x=e("./URLSearchParams (@tapclap.utils-js.url)"),A=e("./ActionConstants (scripts.config)"),O=e("./ApplicationConfig (scripts.config)"),R=e("./AudioConfig (scripts.config)"),P=e("./PrefabResourcesConfig (scripts.config)"),k=e("./UiResourceConfig (scripts.config)"),T=e("./I18NSprite (@tapclap.game-kit.i18n.components)"),I=e("./WindowController (@tapclap.game-kit.ui.window-manager)"),M=e("./BackdropController (@tapclap.game-kit.ui.backdrop)"),j=e("./DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)"),L=e("./LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)"),F=e("./UIController (@tapclap.game-kit.ui)"),D=e("./UserItemManager (@tapclap.game-kit.user-item-manager)"),B=cc._decorator,G=B.ccclass,N=B.property,W=function(e){function t(){var t=e.call(this)||this;return t._progressBar=null,t._logo=null,t._windowControllerPrefab=null,t._backdropControllerPrefab=null,t._logoAppearDuration=1,t._availableAudioFormats=["ogg","mp3"],t._initDI(),t}return a(t,e),t.prototype._initAnalyticsService=function(){var e=this,t=this._userManager.getCurrentUser();return this._analyticsService.init().then(function(){return e._analyticsService.setUserId(p.sha256(String(t.id))),e._utmProvider.getUtm().then(function(n){e._analyticsService.logEvent("application_session",{is_first_visit:Number(t.isFirstVisit),ref:cc.sys.isBrowser&&new E.URL(document.location.href).searchParams.get("entry_point"),utm:t.isFirstVisit?JSON.stringify(n):void 0})})})},t.prototype._signIn=function(){var e=this;return Promise.resolve().then(function(){return e._authService.init()}).then(function(){return e._authService.signUp()})},t.prototype._initStorage=function(){var e=this._userManager.getCurrentUser();this._platformStorage.setPrefix(e.id),this._platformStorage.setItem("levelStartCountPerSession",0)},t.prototype._getAudioLoadTask=function(){var e,t,n=this,o=this._getSupportedAudioFormat(),a=function(e,t){var a=new u.BundleLoadTask(m.AudioManager.formatPathWithExt(t,o),{asFile:!0});a.on(u.BundleLoadTask.EVENT_COMPLETE,function(t,o){t||n._audioManager.registerSource(e,o)}),a.load()};try{for(var r=i(Object.entries(R.AudioConfig)),s=r.next();!s.done;s=r.next()){var p=c(s.value,2);a(p[0],p[1])}}catch(l){e={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return[]},t.prototype._getSupportedAudioFormat=function(){var e=cc.sys.__audioSupport.format.map(function(e){return e.substring(1)});return this._availableAudioFormats.filter(function(t){return e.includes(t)}).shift()},t.prototype._setPiggybankProductToUserCoins=function(){var e=this._userManager.getCurrentUser(),t=this._windowManager,n=this._metaGameManager.getMetaGame().getModule("piggybank"),o=function(o){e.items.delete("products","piggybank"),e.items.add({spec:"currency",name:"coins",amount:n.coins}),n.complete(),o&&t.closeCurrentWindow()};e.items.get("products","piggybank")&&o(!1),e.items.on("add:products:piggybank",function(){return o(!0)})},t.prototype._getLevelParameter=function(){if(cc.sys.isBrowser){var e=new x.URLSearchParams(window.location.search);return parseInt(e.get("level"))}},t.prototype._prepareMetaGame=function(e){var t=this._getLevelParameter();return t?e.getModule("progress").init({value:t}):Promise.resolve()},t.prototype._startApplication=function(e){var t=this._getLevelParameter(),n=e.getModule("music");if(n&&n.play("meta"),this._serviceGateway.setErrorHandling(!0),t){var o=e.getModule("levels");if(o){var a=o.getLevel(t);if(a)return this._actionManager.run(A.ACTIONS.START_MATCH3_GAME,{level:a})}}return this._actionManager.run(A.ACTIONS.RUN_META_GAME,{metaGame:e})},t.prototype._loadApplication=function(){var e=this,t=this._metaGameManager.getMetaGame(),n=new d.FunctionLoadTask(function(){return Promise.resolve().then(function(){return e._paymentService.init().catch(function(t){return e._logError("paymentServiceInit",t)})}).then(function(){return e._paymentService.sync()}).then(function(){return e._setPiggybankProductToUserCoins()}).then(function(){return e._subscribeAdEvents()}).then(function(){return e._subscribeChargeSpendEvents()}).then(function(){return e._offerManager.init().catch(function(t){return e._logError("offerManagerInit",t)})}).then(function(){return e._prepareMetaGame(t).catch(function(t){return e._logError("prepareMetaGame",t)})})},"Application initialization"),o=s(k.UiResourcesConfig,Object.entries(P.PrefabResourcesConfig).filter(function(e){return c(e,1)[0].search("task-")>-1}).map(function(e){return c(e,2)[1]})),a=new f.SceneLoader(t.scene,s([n],this._getAudioLoadTask(),o.map(function(e){return new u.BundleLoadTask(e)})));return a.on(y.Loader.EVENT_ERROR,function(t,n,o){var a=t?{name:"Error in task with descriptions: "+o.description,message:t.message,stack:t.stack}:{name:"unknown error",message:"",stack:""};e._logError("loader",a,!1)}),this._platformLauncher.hasLoadingProgress()?this._progressBar&&a.on(y.Loader.EVENT_PROGRESS,function(t){e._progressBar.progress=Math.max(e._progressBar.progress,t)}):a.on(y.Loader.EVENT_PROGRESS,function(t){e._platformLauncher.setLoadingProgress(t)}),Promise.resolve().then(function(){return a.load().catch(function(t){return e._logError("launcherLoad",t)})}).then(function(){return e._platformLauncher.complete().catch(function(t){return e._logError("launcherComplete",t)})}).then(function(){return e._i18n.init().catch(function(t){return e._logError("I18NInit",t)})}).then(function(){return e._audioManager.play("click",{volume:0})}).then(function(){return e._actionManager.run(A.ACTIONS.DO_SHOW_BANNER_AD).catch(function(t){return e._logError("showBanner",t,!1)}),Promise.resolve()}).then(function(){return e._startApplication(t).catch(function(t){return e._logError("runMetaGame",t)})}).then(function(){return e._tryShowSquareTutorial(t).catch(function(t){return e._logError("checkSquareTutorial",t)})})},t.prototype._tryShowSquareTutorial=function(e){var t=this,n=e.getModule("levels");return e.getModule("progress").value<=3?this._platformStorage.setItem("speciallevel:tutorial-square:passed",!0):this._isNeedSquareTutorial().then(function(e){if(e){var o=n.getLevel("tutorial-square");if(o)return t._actionManager.run(A.ACTIONS.WINDOW_SQUARE_TUTORIAL,{level:o})}return Promise.resolve()})},t.prototype._isNeedSquareTutorial=function(){var e=this,t=this._userManager.getCurrentUser().firstLoginAt,n=new Date("2023-02-03T09:25:00.000Z"),o=new Date("2022-07-26T00:00:00.000Z"),a=Promise.resolve(!1);switch(!0){case t>=n:a=Promise.resolve(!1);break;case t>=o:a=this._remoteConfig.getBoolean("square").then(function(e){return!e.value});break;default:a=Promise.resolve(!0)}return a.then(function(t){return!t||e._platformStorage.getItem("speciallevel:tutorial-square:passed")}).then(function(e){return!e})},t.prototype._createCommonSceneNodes=function(){var e=this,t=this._windowManager,n=this._backdropManager,o=this._lootBoxUnpacker,a=this._backdropControllerPrefab,r=this._windowControllerPrefab;return function(){t.removeAllWindows();var i=cc.instantiate(r);cc.find("Canvas").addChild(i,2),t.setController(i.getComponent(I.WindowController));var c=cc.instantiate(a);cc.find("Canvas").addChild(c,2),n.setController(c.getComponent(M.BackdropController));var s=cc.find("Canvas").getComponentInChildren(L.LootBoxUnpackerView);s&&(s.node.zIndex=3,o.setUnpackerView(s));var p=cc.find("Canvas").getComponentInChildren(F.UIController);p&&(p.getAnimationNode().zIndex=4,e._uiManager.setController(p));var l=cc.find("Canvas").getComponent(j.DevConsoleLauncherComponent);e._configService._config.debug&&l?l.setDevConsole(e._devConsole):l.destroy()}},t.prototype.start=function(){var e,t=this,n=null!==(e=this._configService.getValue("debug"))&&void 0!==e&&e;if(this._configService._config.debug=n,this._sceneManager.on(g.SceneManager.EVENTS.SCENE_LOAD,this._createCommonSceneNodes()),n&&cc.sys.isBrowser){window.di=C.di;try{this._editorController.listen()}catch(r){console.log("[EditorController]",r)}}this._contextManager.setScene("start"),this._actionManager.events.on(l.ActionManager.EVENT_BEFORE_ACTION,function(e){cc.log("ActionManager:",e)}),this._windowManager.on(v.WindowManager.EVENT_OPEN_WINDOWS,function(){return t._backdropManager.show()}),this._windowManager.on(v.WindowManager.EVENT_CLOSE_WINDOWS,function(){return t._backdropManager.hide(.1)}),this._windowManager.on(v.WindowManager.EVENT_SHOW,function(e){return t._contextManager.setWindow(e.key),t._backdropManager.highlight(e)}),this._windowManager.on(v.WindowManager.EVENT_HIDDEN,function(e){return t._contextManager.setWindow(null),t._backdropManager.unhighlight(e)}),this._windowManager.on(v.WindowManager.EVENT_OPEN_WINDOWS,function(){var e=cc.find("Canvas").getComponentInChildren(F.UIController);e&&e.hide()}),this._windowManager.on(v.WindowManager.EVENT_CLOSE_WINDOWS,function(){var e=cc.find("Canvas").getComponentInChildren(F.UIController);e&&e.show()}),this._sceneManager.on(g.SceneManager.EVENTS.SCENE_LOAD,function(e){t._contextManager.setScene(e),t._contextManager.setWindow(null)}),this._paymentService.events.on(b.PaymentService.EVENT_CONSUME_COMPLETE,function(e,n,o){var a,r;if(o&&"money"===e.currencyType){var i=t._metaGameManager.getCurrentMetaGame(),c=(null===(a=null==i?void 0:i.getModule("currentLevel"))||void 0===a?void 0:a.value)||(null===(r=null==i?void 0:i.getModule("progress"))||void 0===r?void 0:r.value);t._analyticsService.logEvent("revenue",{revenue:o.amount,payment_id:o.paymentId,product_id:e.key,context:t._contextManager.getString(),group_tag:i.getProgressGroupTag(c),tag:i.getProgressTag(c)})}t._audioEffectsPlayer.play("purchase")});var o=this._logo.node.scale;this._logo.node.setScale(0);var a=new cc.Tween(this._logo.node).to(this._logoAppearDuration,{scale:o},{easing:"elasticOut"});this._configService.init().then(function(){t._progressBar&&(t._progressBar.node.active=t._platformLauncher.hasLoadingProgress())}).then(function(){return t._platformLauncher.init().catch(function(e){return t._logError("launcherInit",e)})}).then(function(){return t._updateOrientationRestrictions()}).then(function(){return cc.game.emit("canvas-loaded")}).then(function(){return t._signIn().catch(function(e){return t._logError("signIn",e)})}).then(function(){return t._initStorage()}).then(function(){return t._userManager.getCurrentUser().init().catch(function(e){return t._logError("initUser",e)})}).then(function(){return t._remoteConfig.init()}).then(function(){return t._syncRemoteConfig.init()}).then(function(){return t._initAnalyticsService().catch(function(e){return t._logError("initAnalyticsService",e)})}).then(function(){return t._metaGameManager.createMetaGames()}).then(function(){return t._metaGameManager.init().catch(function(e){return t._logError("initMetaGameManager",e)})}).then(function(){return t._metaEventManager.init().catch(function(e){return t._logError("initMetaEventManager",e,!1)})}).then(function(){return t._analyticsService.init().catch(function(e){return t._logError("initAnalyticsService",e)})}).then(function(){return Promise.all([t._I18NAppLoader.load(),t._windowsAppLoader.load()])}).then(function(){var e;return null===(e=t._logo)||void 0===e?void 0:e.render()}).then(function(){a.start()}).then(function(){return t._loadApplication()})},t.prototype._updateOrientationRestrictions=function(){var e,t;if(cc.sys.isBrowser){var n=document.getElementsByTagName("body")[0],o=/Macintosh/i.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1||(null===(t=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.search("iPad;"))>-1,a="env-web",r=cc.macro.ORIENTATION_LANDSCAPE;switch(!0){case o:a="env-ipad",r=cc.macro.ORIENTATION_PORTRAIT;break;case cc.sys.isMobile:a="env-mobile",r=cc.macro.ORIENTATION_PORTRAIT;break;case cc.sys.isBrowser:a="env-web",r=cc.macro.ORIENTATION_LANDSCAPE}cc.view.setOrientation(r),n.classList.add(a),n.classList.add("orientation-"+this._orientation.toLowerCase()),cc.sys.os===cc.sys.OS_IOS&&n.classList.add("os-ios"),cc.sys.os===cc.sys.OS_ANDROID&&n.classList.add("os-android")}return Promise.resolve()},t.prototype._initDI=function(){C.di.configure(O.ApplicationConfig),S.Inject.setRegistry(new w.DIInjectRegistry(C.di))},t.prototype._logError=function(e,t,n){void 0===n&&(n=!0);var o=t||{name:void 0,message:void 0,stack:void 0};if(this._analyticsService.logEvent("errors",{key:e,name:o.name,message:o.message,stack:o.stack,ua:window&&window.navigator.userAgent}),n)throw t},t.prototype._subscribeAdEvents=function(){var e=this,t=[this._rewardedAdService,this._interstitialAdService,this._bannerAdService];return Promise.all(t.map(function(t){return t.init().then(function(){t.events.on(_.AdService.EVENT_AD_START_WATCH,function(){var n=[_.AdService.EVENT_AD_WATCHED,_.AdService.EVENT_AD_FAIL_WATCH],o=[(new Date).toISOString(),t.getProvider().getType(),e._userManager.getCurrentUser().id],a=p.sha256(o.join(":"));e._logAdEvent({adService:t,event:_.AdService.EVENT_AD_START_WATCH,adUid:a,revenue:0});var r=new Map;n.forEach(function(n){var o=function(o){var i;void 0===o&&(o={amount:0}),e._logAdEvent({adService:t,event:n,adUid:a,revenue:null!==(i=o.amount)&&void 0!==i?i:0}),r.forEach(function(e,n){t.events.remove(n,e)}),r.clear()};r.set(n,o),t.events.on(n,o)})})})}))},t.prototype._logAdEvent=function(e){var t=e.adService,n=e.event,o=e.adUid,a=e.revenue,r=this._metaGameManager.getCurrentMetaGame(),i=r.getProgressGroupTag(),c=r.getProgressTag(r.getModule("progress").value);this._analyticsService.logEvent("ad_stats",{provider:t.getProvider().getType(),context:this._contextManager.getString(),event:n,revenue:a,abs_progress:this._metaGameManager.getMetaGame("common").getModule("progress").value,group_tag:"common"===i?"":i,tag:"common"===i?"":c,created_at:(new Date).toISOString(),ad_uid:o})},t.prototype._subscribeChargeSpendEvents=function(){var e=this,t=this._userManager.getCurrentUser().items;return t.on(D.UserItemManager.EVENT_CHARGE,function(t){e._logChargeSpendEvent(Object.assign(t,{type:1}))}),t.on(D.UserItemManager.EVENT_SPEND,function(t){e._logChargeSpendEvent(Object.assign(t,{type:2}))}),Promise.resolve()},t.prototype._logChargeSpendEvent=function(e){var t=this,n=e.items,o=e.product,a=e.type,r=this._metaGameManager.getCurrentMetaGame(),i=r.getProgressGroupTag(),c=r.getProgressTag(r.getModule("progress").value),s=function(e){switch(!0){case"amount"in e:return 1;case"duration"in e:return 2}};n.forEach(function(e){var n={created_at:(new Date).toISOString(),context:t._contextManager.getString(),type:a,product_id:o?o.id:"none",product_price:o?o.price:0,item_spec:e.spec,item_name:e.name,item_type:s(e),item_amount:e.amount||e.duration,abs_progress:t._metaGameManager.getMetaGame("common").getModule("progress").value,group_tag:"common"===i?"":i,tag:"common"===i?"":c};if("piggybank"===e.name){var r=t._metaGameManager.getMetaGame().getModule("piggybank");Object.assign(n,{item_type:1,item_amount:r.coins,item_spec:"currency"})}t._analyticsService.logEvent("charge_spend",n)})},r([N({type:cc.ProgressBar,visible:!0})],t.prototype,"_progressBar",void 0),r([N({type:T.I18NSprite,visible:!0})],t.prototype,"_logo",void 0),r([N({type:cc.Prefab,visible:!0})],t.prototype,"_windowControllerPrefab",void 0),r([N({type:cc.Prefab,visible:!0})],t.prototype,"_backdropControllerPrefab",void 0),r([S.Inject("AnalyticsService")],t.prototype,"_analyticsService",void 0),r([S.Inject("MetaGameManager")],t.prototype,"_metaGameManager",void 0),r([S.Inject("MetaEventManager")],t.prototype,"_metaEventManager",void 0),r([S.Inject("UserManager")],t.prototype,"_userManager",void 0),r([S.Inject("I18N")],t.prototype,"_i18n",void 0),r([S.Inject("ConfigService")],t.prototype,"_configService",void 0),r([S.Inject("RemoteConfig")],t.prototype,"_remoteConfig",void 0),r([S.Inject("ActionManager")],t.prototype,"_actionManager",void 0),r([S.Inject("AudioManager")],t.prototype,"_audioManager",void 0),r([S.Inject("SceneManager")],t.prototype,"_sceneManager",void 0),r([S.Inject("PaymentService")],t.prototype,"_paymentService",void 0),r([S.Inject("OfferManager")],t.prototype,"_offerManager",void 0),r([S.Inject("WindowManager")],t.prototype,"_windowManager",void 0),r([S.Inject("BackdropManager")],t.prototype,"_backdropManager",void 0),r([S.Inject("ContextManager")],t.prototype,"_contextManager",void 0),r([S.Inject("ServiceGateway")],t.prototype,"_serviceGateway",void 0),r([S.Inject("AuthService")],t.prototype,"_authService",void 0),r([S.Inject("UtmProvider")],t.prototype,"_utmProvider",void 0),r([S.Inject("SyncRemoteConfig")],t.prototype,"_syncRemoteConfig",void 0),r([S.Inject("BannerAdService")],t.prototype,"_bannerAdService",void 0),r([S.Inject("RewardedAdService")],t.prototype,"_rewardedAdService",void 0),r([S.Inject("InterstitialAdService")],t.prototype,"_interstitialAdService",void 0),r([S.Inject("PlatformLauncher")],t.prototype,"_platformLauncher",void 0),r([S.Inject("PlatformStorage")],t.prototype,"_platformStorage",void 0),r([S.Inject("AudioEffectsPlayer")],t.prototype,"_audioEffectsPlayer",void 0),r([S.Inject("I18NAppLoader")],t.prototype,"_I18NAppLoader",void 0),r([S.Inject("WindowsAppLoader")],t.prototype,"_windowsAppLoader",void 0),r([S.Inject("EditorController")],t.prototype,"_editorController",void 0),r([S.Inject("DevConsole")],t.prototype,"_devConsole",void 0),r([S.Inject("LootBoxUnpacker")],t.prototype,"_lootBoxUnpacker",void 0),r([S.Inject("UIManager")],t.prototype,"_uiManager",void 0),r([S.Inject("Config.Orientation")],t.prototype,"_orientation",void 0),r([S.Inject("MessageCenter")],t.prototype,"_messageCenter",void 0),r([N({type:cc.Float,visible:!0})],t.prototype,"_logoAppearDuration",void 0),r([G],t)}(h.SceneComponent);n.StartSceneComponent=W,cc._RF.pop()},{"./ActionConstants (scripts.config)":"ActionConstants (scripts.config)","./ActionManager (@tapclap.game-kit.action-manager)":"ActionManager (@tapclap.game-kit.action-manager)","./AdService (@tapclap.sdk-x.ad-service)":"AdService (@tapclap.sdk-x.ad-service)","./ApplicationConfig (scripts.config)":"ApplicationConfig (scripts.config)","./AudioConfig (scripts.config)":"AudioConfig (scripts.config)","./AudioManager (@tapclap.game-kit.audio-manager)":"AudioManager (@tapclap.game-kit.audio-manager)","./BackdropController (@tapclap.game-kit.ui.backdrop)":"BackdropController (@tapclap.game-kit.ui.backdrop)","./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./DI (@tapclap.utils-js.di)":"DI (@tapclap.utils-js.di)","./DIInjectRegistry (@tapclap.utils-js.inject.registry)":"DIInjectRegistry (@tapclap.utils-js.inject.registry)","./DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)","./FunctionLoadTask (@tapclap.game-kit.loader)":"FunctionLoadTask (@tapclap.game-kit.loader)","./I18NSprite (@tapclap.game-kit.i18n.components)":"I18NSprite (@tapclap.game-kit.i18n.components)","./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)","./Loader (@tapclap.game-kit.loader)":"Loader (@tapclap.game-kit.loader)","./LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)":"LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)","./PaymentService (@tapclap.sdk-x.payment-service)":"PaymentService (@tapclap.sdk-x.payment-service)","./PrefabResourcesConfig (scripts.config)":"PrefabResourcesConfig (scripts.config)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)","./SceneLoader (@tapclap.game-kit.loader)":"SceneLoader (@tapclap.game-kit.loader)","./SceneManager (@tapclap.game-kit.scene-manager)":"SceneManager (@tapclap.game-kit.scene-manager)","./UIController (@tapclap.game-kit.ui)":"UIController (@tapclap.game-kit.ui)","./URL (@tapclap.utils-js.url)":"URL (@tapclap.utils-js.url)","./URLSearchParams (@tapclap.utils-js.url)":"URLSearchParams (@tapclap.utils-js.url)","./UiResourceConfig (scripts.config)":"UiResourceConfig (scripts.config)","./UserItemManager (@tapclap.game-kit.user-item-manager)":"UserItemManager (@tapclap.game-kit.user-item-manager)","./WindowController (@tapclap.game-kit.ui.window-manager)":"WindowController (@tapclap.game-kit.ui.window-manager)","./WindowManager (@tapclap.game-kit.ui.window-manager)":"WindowManager (@tapclap.game-kit.ui.window-manager)","./sha256 (@tapclap.utils-js.crypto)":"sha256 (@tapclap.utils-js.crypto)"}],"StartSystem (@tapclap.match-x.engine.systems.start-system)":[function(e,t,n){"use strict";cc._RF.push(t,"092f3u5LiteRqBDPA+nd2pb","StartSystem (@tapclap.match-x.engine.systems.start-system)"),n.__esModule=!0,n.StartSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./LoadSystem (@tapclap.match-x.engine.systems.load-system)"),r=e("./RenderSystem (@tapclap.match-x.engine.systems.render-system)"),i=e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)"),c=e("./TurnSystem (@tapclap.match-x.engine.systems.turn-system)"),s=e("./GoalSystem (@tapclap.match-x.engine.systems)"),p=e("./UpdateMultiplierSystem (@tapclap.match-x.engine.systems)"),l=e("./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./CleanStateSystem (@tapclap.match-x.engine.systems)");function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t){var n,o=t.game,a=t.world;return(n=e.call(this)||this)._game=o,n._world=a,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var d=o.prototype;return d.load=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n){t._game.getSystem(a.LoadSystem.KEY).load(e.levelData),t._game.getSystem(l.GameActionSystem.KEY).events.once("end",n),t._world.setState(o.STATE,o.STATE_LOAD),t._game.getSystem(l.GameActionSystem.KEY).animate(),t._game.getSystem(i.LockSystem.KEY).process(),t._game.getSystem(s.GoalSystem.KEY).prepare(),t._game.getSystem(c.TurnSystem.KEY).computeAvailableTurns(),t._game.getSystem(p.UpdateMultiplierSystem.KEY).process(),t._game.getSystem(r.RenderSystem.KEY).render(!0)})},d.start=function(){var e=this;this._game.getSystem(l.GameActionSystem.KEY).events.once("end",function(){e._game.getSystem(m.CleanStateSystem.KEY).clean(),e._game.getSystem("help").enableHelp(),e._game.getSystem("pipeline").process()}),this._world.setState(o.STATE,o.STATE_START),this._game.getSystem(l.GameActionSystem.KEY).animate()},o}(o.PipelineProcessSystem);n.StartSystem=d,d.KEY="start",d.STATE="startSystem",d.STATE_START="startSystem",d.STATE_LOAD="startSystemLoad",cc._RF.pop()},{"./CleanStateSystem (@tapclap.match-x.engine.systems)":"CleanStateSystem (@tapclap.match-x.engine.systems)","./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","./GoalSystem (@tapclap.match-x.engine.systems)":"GoalSystem (@tapclap.match-x.engine.systems)","./LoadSystem (@tapclap.match-x.engine.systems.load-system)":"LoadSystem (@tapclap.match-x.engine.systems.load-system)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RenderSystem (@tapclap.match-x.engine.systems.render-system)":"RenderSystem (@tapclap.match-x.engine.systems.render-system)","./TurnSystem (@tapclap.match-x.engine.systems.turn-system)":"TurnSystem (@tapclap.match-x.engine.systems.turn-system)","./UpdateMultiplierSystem (@tapclap.match-x.engine.systems)":"UpdateMultiplierSystem (@tapclap.match-x.engine.systems)"}],"StartTrackComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"d6150djf7BR5bRTBc22z20+","StartTrackComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StartTrackComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="startTrack",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.StartTrackComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)":[function(e,t,n){"use strict";cc._RF.push(t,"814428rHFdZcKuY6ZcSOzId","StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)"),n.__esModule=!0,n.StartTutorialAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._scenarioBuilder=t.scenarioBuilder,n._hero=t.hero,n._arrow=t.arrow,n._boostersView=t.boostersView,n._targets=t.targets,n._boosterArrowOffset=t.boosterArrowOffset||cc.v2(0,1),n._boosterArrowAngle=t.boosterArrowAngle||0,n._highlightOnlyCellBody=t.highlightOnlyCellBody||!0,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.build=function(e){var t=this,n=[];if(e){var o=e.data&&e.data.data,i=o.step,c=o.cells,s=o.pointers;if(i){if("speech"===i.type&&i.key&&this._hero)this._scenarioBuilder.addAction(function(){return t._hero.say(i.key,3)});else{if(this._scenarioBuilder.lockInput().showBackdrop().addHighlight(this._targets),i.key&&this._hero&&this._scenarioBuilder.addAction(function(){return t._hero.say(i.key)}),"booster"===i.type){var p=this._boostersView.getViewNode(i.data.booster);p&&(this._scenarioBuilder.addHighlight([p,this._arrow.node]),this._arrow&&this._scenarioBuilder.setTargetPosition([p],this._arrow.node,this._boosterArrowOffset).addAction(function(){return t._arrow.node.angle=t._boosterArrowAngle}).addAction(function(){return t._arrow.show()}),this._scenarioBuilder.addWaitInput([p]),this._arrow&&this._scenarioBuilder.addAction(function(){return t._arrow.hide()}),this._scenarioBuilder.detachInput([p]))}if(c){for(var l,m=[],u=r(c);!(l=u()).done;){var d=l.value,y=d.getComponent("render").node,f=this._highlightOnlyCellBody?y.getChildByName("body"):null;m.push(f||y);for(var h,g=r(d.entities);!(h=g()).done;){var v=h.value;m.push(v.getComponent("render").node)}}if(this._scenarioBuilder.addHighlight(m),"booster"===i.type){var _=0,b=cc.v2(0,1),C=[];if(s.length>0){var w=s[0];b=cc.v2(w.offset.x,w.offset.y),_=Math.sign(-b.x)*b.angle(cc.v2(0,1))*180/Math.PI,C=w.cells.map(function(e){return e.getComponent("render").node})}else 1===c.length&&(C=[m[0]]);C.length>0&&this._arrow&&this._scenarioBuilder.addAction(function(){return t._arrow.node.angle=_}).setTargetPosition(C,this._arrow.node,b).addAction(function(){return t._arrow.show()})}}i.data.waitInputOnCells||"booster"===i.type||(this._scenarioBuilder.attachInput(),this._scenarioBuilder.addWaitInput()),this._scenarioBuilder.unlockInput()}n.push({animation:new a.FunctionAnimation(function(){t._scenarioBuilder.build().run()})})}}return[n]},o}(o.GameActionBuilder);n.StartTutorialAnimationBuilder=p,cc._RF.pop()},{"./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"State (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";cc._RF.push(t,"c4d59wPNOxSComHSZfBXCjJ","State (@tapclap.match-x.engine.models)"),Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0;var o=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=null),this._type=e,this._data=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e}();n.State=o,cc._RF.pop()},{}],"StateComponent (@tapclap.match-x.engine.components.state)":[function(e,t,n){"use strict";cc._RF.push(t,"31dd4ahovFe3ooy4nj+ZYWC","StateComponent (@tapclap.match-x.engine.components.state)"),n.__esModule=!0,n.StateComponent=void 0;var o=e("./Component (@tapclap.match-x.engine.components)"),a=e("./State (@tapclap.match-x.engine.models)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(){var t;return(t=e.call(this)||this)._states=new Map,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c,s,p=o.prototype;return p.reset=function(){this._states.clear()},p.setState=function(e){this._states.set(e.type,e)},p.pushState=function(e){var t=this.getState(e.type,[]);t.data=t.data.concat(e.data)},p.getState=function(e,t){var n=this._states.get(e);if(n)return n;if(t){var o=new a.State(e,t);return this.setState(o),o}return null},p.removeState=function(e){this._states.delete(e)},c=o,(s=[{key:"states",get:function(){return this._states.values()}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),o}(o.Component);n.StateComponent=c,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)","./State (@tapclap.match-x.engine.models)":"State (@tapclap.match-x.engine.models)"}],"StateModel (@tapclap.match-x.engine.components.state)":[function(e,t,n){"use strict";cc._RF.push(t,"a2980fWAgJTkaAihulmEMF0","StateModel (@tapclap.match-x.engine.components.state)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StateModel=void 0;var o=function(){function e(e){var t=e.cell,n=e.entity;this._cell=t,this._entity=n}return Object.defineProperty(e.prototype,"cell",{get:function(){return this._cell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),e}();n.StateModel=o,cc._RF.pop()},{}],"StaticComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"d7db32N83JX5IsZxgZsoaiK","StaticComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StaticComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="static",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.StaticComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"StaticResolveOnce (@tapclap.utils-js.decorators)":[function(e,t,n){"use strict";cc._RF.push(t,"dac26A3IKVeyI1voC+gqGBF","StaticResolveOnce (@tapclap.utils-js.decorators)"),n.__esModule=!0,n.staticResolveOnce=function(){return function(e,t,n){var o=n.value,a=null;return n.value=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null===a&&(a=Promise.resolve().then(function(){return o.apply(e,n)}).catch(function(e){throw a=null,e})),a},n}},cc._RF.pop()},{}],"StatisticComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"287b21oxGxXU5Qivr+1b8bL","StatisticComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.StatisticComponent=void 0;var o,a=(o=e("merge-options"))&&o.__esModule?o:{default:o};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n,o,c;function s(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._data={},t}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o=s,(c=[{key:"data",get:function(){return(0,a.default)({},this._data)},set:function(e){this._data=e}}])&&r(o.prototype,c),Object.defineProperty(o,"prototype",{writable:!1}),s}(e("./Component (@tapclap.match-x.engine.components)").Component);n.StatisticComponent=c,c.KEY="statistic",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)","merge-options":3}],"StatisticSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"949f5yKzUleib/HO6xaMzh4","StatisticSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.StatisticSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.postProcess=function(){var e=this._world.getEnabledComponent("statistic"),t=this._world.getEnabledComponent("score"),n=this._world.getEnabledComponent("stars"),o=this._world.getEnabledComponent("moves"),r=this._world.getState(a.WinLoseSystem.STATE),i={};t&&(i.score=t.getValue()),n&&(i.stars=n.getValue()),o&&(i.moves=o.getValue()),r&&(i.result=r.data.result),e.data=i},o}(o.PipelineProcessSystem);n.StatisticSystem=i,i.KEY="statistic",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"}],"StepCounterViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"60862ckjjtEd5EsTp+X1pDg","StepCounterViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.StepCounterViewComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G,N,W,H,V,K,U=e("./ViewComponent (@tapclap.match-x.cocos.components)");function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var ee=cc._decorator,te=ee.ccclass,ne=ee.property,oe=(o=te("CounterStyle"),a=ne({type:cc.SpriteFrame,visible:!0}),r=ne({visible:!0}),i=ne({visible:!0}),c=ne({visible:!0}),s=ne({visible:function(){return this._blink}}),p=ne({visible:function(){return this._blink}}),l=ne({visible:function(){return this.blinkLabel}}),m=ne({visible:function(){return this.blinkLabel}}),u=ne({tooltip:'\u0424\u043e\u0440\u043c\u0430\u0442\u044b:\n\n            \u2014 start\u2220 \u2192 middle\u2220 \u2192 end\u2220\n            "90:-90:0"\n            \n            \u2014 start\u2220 \u2192 end\u2220\n            "45:0"\n            \n            \u2014 +increment\u2220\n            "33"',visible:function(){return this.rotate}}),d=ne({visible:function(){return this.rotate}}),y=ne({visible:function(){return this.rotate}}),f=ne({visible:function(){return this.scale}}),h=ne({visible:function(){return this.scale}}),g=ne({visible:function(){return this.scale}}),o((b=$((_=function(){function e(){J(this,"_spriteFrame",b,this),J(this,"_color",C,this),J(this,"_count",w,this),J(this,"_blink",S,this),J(this,"_blinkColor",E,this),J(this,"_blinkInterval",x,this),J(this,"blinkLabel",A,this),J(this,"_blinkLabelColor",O,this),J(this,"_blinkLabelInterval",R,this),J(this,"rotate",P,this),J(this,"_rotateDeltas",k,this),J(this,"_rotateSpeed",T,this),J(this,"_rotateInterval",I,this),J(this,"scale",M,this),J(this,"_scaleBy",j,this),J(this,"_scaleSpeed",L,this),J(this,"_scaleInterval",F,this)}var t,n;return t=e,(n=[{key:"spriteFrame",get:function(){return this._spriteFrame}},{key:"color",get:function(){return this._color}},{key:"count",get:function(){return this._count}},{key:"blink",get:function(){return this._blink}},{key:"blinkColor",get:function(){return this._blinkColor}},{key:"blinkInterval",get:function(){return this._blinkInterval}}])&&Q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"_spriteFrame",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=$(_.prototype,"_color",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.Color.WHITE}}),w=$(_.prototype,"_count",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=$(_.prototype,"_blink",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=$(_.prototype,"_blinkColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.Color.WHITE}}),x=$(_.prototype,"_blinkInterval",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),A=$(_.prototype,"blinkLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=$(_.prototype,"_blinkLabelColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cc.Color.WHITE}}),R=$(_.prototype,"_blinkLabelInterval",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),P=$(_.prototype,"rotate",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=$(_.prototype,"_rotateDeltas",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"15:-23:0"}}),T=$(_.prototype,"_rotateSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),I=$(_.prototype,"_rotateInterval",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),M=$(_.prototype,"scale",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=$(_.prototype,"_scaleBy",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),L=$(_.prototype,"_scaleSpeed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=$(_.prototype,"_scaleInterval",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=_))||v),ae=(D=ne({type:[oe],visible:!0}),B=ne({type:cc.Sprite,visible:!0}),G=ne({type:cc.Label,visible:!0}),te((W=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return J(t=e.call.apply(e,[this].concat(o))||this,"_styles",H,Z(t)),J(t,"_holder",V,Z(t)),J(t,"_label",K,Z(t)),t._startHolderColor=cc.Color.WHITE,t._startLabelColor=cc.Color.WHITE,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,X(t,n);var a=o.prototype;return a.onLoad=function(){this._holder&&(this._startHolderColor=this._holder.node.color),this._label&&(this._startLabelColor=this._label.node.color)},a._setStyle=function(e){var t=null,n=[].concat(this._styles);n.sort(function(e,t){return t.count-e.count});for(var o,a=Y(n);!(o=a()).done;){var r=o.value;if(e>=r.count){t=r;break}}if(t){this._label.node.stopAllActions(),t.color&&(this._label.node.color=t.color,this._startLabelColor=t.color),t.blinkLabel&&this._label.node.runAction(this._getBlinkAction(t._blinkLabelInterval/2,t._blinkLabelColor,this._startLabelColor));var i=this._holder&&this._holder.node;i&&(t.spriteFrame&&(this._holder.spriteFrame=t.spriteFrame),i.stopAllActions(),i.scale=1,i.angle=0,i.color=this._startHolderColor,t.scale&&i.runAction(this._getScaleAction(t)),t.rotate&&i.runAction(this._getRotateAction(t)),t.blink&&i.runAction(this._getBlinkAction(t.blinkInterval/2,t.blinkColor,this._startHolderColor)))}},a._getBlinkAction=function(e,t,n){return cc.sequence([cc.tintTo(e,t.r,t.g,t.b),cc.tintTo(e,n.r,n.g,n.b)]).repeatForever()},a._getScaleAction=function(e){var t=e._scaleSpeed/2;return cc.sequence([cc.scaleBy(t,e._scaleBy),cc.scaleBy(t,1/e._scaleBy),cc.delayTime(e._scaleInterval)]).repeatForever()},a._getRotateAction=function(e){var t,n=e._rotateDeltas.split(":"),o=n[0],a=n[1],r=n[2],i=e._rotateSpeed/n.length;switch(n.length){case 3:t=[cc.rotateTo(i,+o),cc.rotateTo(i,+a),cc.rotateTo(i,+r)];break;case 2:t=[cc.rotateTo(i,+o),cc.rotateTo(i,+a)];break;default:t=[cc.rotateBy(i,+o)]}return t.push(cc.delayTime(e._rotateInterval)),cc.sequence(t).repeatForever()},a.setValue=function(e){this._label.string=e.toString(),this._setStyle(e)},o}(U.ViewComponent),H=$(W.prototype,"_styles",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=$(W.prototype,"_holder",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=$(W.prototype,"_label",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=W))||N);n.StepCounterViewComponent=ae,cc._RF.pop()},{"./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)"}],"StickerComponent (@tapclap.game-kit.ui.sticker)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A;function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function k(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"999a6qOrjVPRa4KKxvuG+C/","StickerComponent (@tapclap.game-kit.ui.sticker)"),n.__esModule=!0,n.StickerComponent=void 0;var T=cc._decorator,I=T.ccclass,M=T.menu,j=T.property,L=(o=I("StickerStyle"),a=j(cc.String),r=j(cc.SpriteFrame),i=j(cc.SpriteFrame),c=j(cc.Color),s=j(cc.Color),o((m=k((l=function(){P(this,"key",m,this),P(this,"spriteFrame",u,this),P(this,"icon",d,this),P(this,"labelColor",y,this),P(this,"labelOutlineColor",f,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=k(l.prototype,"spriteFrame",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=k(l.prototype,"icon",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=k(l.prototype,"labelColor",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),f=k(l.prototype,"labelOutlineColor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),p=l))||p),F=(h=M("UI-Kit/Sticker/StickerComponent"),g=j({type:cc.Sprite,visible:!0}),v=j({type:cc.Label,visible:!0}),_=j({type:cc.Sprite,visible:!0}),b=j({type:[L],visible:!0}),I(C=h((w=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return P(t=e.call.apply(e,[this].concat(o))||this,"_sprite",S,O(t)),P(t,"_label",E,O(t)),P(t,"_icon",x,O(t)),P(t,"_styles",A,O(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,R(t,n);var a=o.prototype;return a.setStyle=function(e){var t=this._styles.find(function(t){return t.key===e});if(t){this._sprite.spriteFrame=t.spriteFrame,this._label.node.color=t.labelColor,this._icon&&t.icon&&(this._icon.spriteFrame=t.icon.spriteFrame);var n=this._label.getComponent(cc.LabelOutline);n&&(n.color=t.labelOutlineColor)}},a.setLabel=function(e){this._label.string=e},o}(cc.Component),S=k(w.prototype,"_sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k(w.prototype,"_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=k(w.prototype,"_icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=k(w.prototype,"_styles",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=w))||C)||C);n.StickerComponent=F,cc._RF.pop()},{}],"StickerListComponent (@tapclap.game-kit.ui.sticker)":[function(e,t,n){"use strict";cc._RF.push(t,"42b50i77Gha9acv999M+yqA","StickerListComponent (@tapclap.game-kit.ui.sticker)"),n.__esModule=!0,n.StickerListComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f=e("./StickerComponent (@tapclap.game-kit.ui.sticker)");function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var C=cc._decorator,w=C.ccclass,S=C.menu,E=C.property,x=(o=w("StickerListProperty"),a=S("Game-Kit/UI/Sticker/StickerListComponent"),r=E({visible:!0}),i=E({type:f.StickerComponent,visible:!0}),o(c=a((p=b((s=function(){function e(){v(this,"_key",p,this),v(this,"_component",l,this)}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"component",get:function(){return this._component}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"_key",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=b(s.prototype,"_component",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c),A=(m=E({type:[x],visible:!0}),w((d=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return v(t=e.call.apply(e,[this].concat(o))||this,"_stickers",y,h(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a=o.prototype;return a._getSticker=function(e){return this._stickers.find(function(t){return t.key===e})},a.hideStickers=function(){this._stickers.forEach(function(e){e.component.node.active=!0})},a.showSticker=function(e){var t=this._getSticker(e);return!!t&&(t.component.node.active=!0,!0)},a.setStickerLabel=function(e,t){var n=this._getSticker(e);return!!n&&(n.component.setLabel(t),!0)},a.setStickerStyle=function(e,t){var n=this._getSticker(e);return!!n&&(n.component.setStyle(t),!0)},o}(cc.Component),y=b(d.prototype,"_stickers",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d))||u);n.StickerListComponent=A,cc._RF.pop()},{"./StickerComponent (@tapclap.game-kit.ui.sticker)":"StickerComponent (@tapclap.game-kit.ui.sticker)"}],"StorageAdapter (@tapclap.game-kit.data-storage.adapters)":[function(e,t,n){"use strict";cc._RF.push(t,"dc4bcopE61GGKHKSib64UDj","StorageAdapter (@tapclap.game-kit.data-storage.adapters)"),n.__esModule=!0,n.StorageAdapter=void 0;var o=e("./URI (@tapclap.utils-js.url)"),a=function(){function e(e){void 0===e&&(e={}),this._storage=e.storage,this._root=e.root,this._prefix=e.prefix,this._updatedAtKey=e.updatedAtKey||"updatedAt"}var t=e.prototype;return t.getData=function(){return Promise.resolve()},t.setData=function(){return Promise.resolve()},t.getSyncData=function(){return Promise.all([this.getData(),this._getUpdatedAt()]).then(function(e){return{data:e[0],updatedAt:e[1]}})},t._getKey=function(e){return new o.URI([this._getNamespace(),e],{},{separator:".",isAbsolute:!1}).create()},t._getNamespace=function(){return new o.URI([this._root,this._prefix],{},{separator:".",isAbsolute:!1}).create()},t._getUpdatedAtKey=function(){return this._getKey("$"+this._updatedAtKey)},t._setUpdatedAt=function(){return this._storage.setItem(this._getUpdatedAtKey(),(new Date).toString())},t._getUpdatedAt=function(){return this._storage.getItem(this._getUpdatedAtKey())},e}();n.StorageAdapter=a,cc._RF.pop()},{"./URI (@tapclap.utils-js.url)":"URI (@tapclap.utils-js.url)"}],"StorageFlagActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"c0cf6Oug39dv6fM4xaqXpTD","StorageFlagActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StorageFlagActionCondition=void 0;var r=function(e){function t(t){var n=t.storage,o=t.key,a=t.setFlag,r=void 0===a||a,i=e.call(this)||this;return i._storage=n,i._key=o,i._setFlag=r,i}return a(t,e),t.prototype.check=function(){var e=this;return this._storage.getItem(this._key).then(function(t){var n=void 0===t;return e._setFlag?e._storage.setItem(e._key,!0).then(function(){return n}):n})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.StorageFlagActionCondition=r,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"StorageForcedKeys (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"194d8bwt29Rdq6et26qzVXY","StorageForcedKeys (scripts.config)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StorageForcedKeys=void 0,n.StorageForcedKeys=["speciallevel:tutorial-square:passed","piggybank:tutorial:passed","locale"],cc._RF.pop()},{}],"StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"91b36+SsaVXprRSc5OtekcT","StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StorageItemCompareValueResolver=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._storage=t.storage,n._storageKey=t.storageKey,n._valuePath=t.valuePath||"",n}return a(t,e),t.prototype.resolveValue=function(){var e=this;return this._storage.getItem(this._storageKey).then(function(t){return""===e._valuePath?t:e._valuePath.split(".").reduce(function(e,t){return void 0===t?e:e[t]},t)})},t}(e("./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)").CompareValueResolver);n.StorageItemCompareValueResolver=r,cc._RF.pop()},{"./CompareValueResolver (scripts.action-conditions.compare-value-resolvers)":"CompareValueResolver (scripts.action-conditions.compare-value-resolvers)"}],"StorageStartBoostersTutorialAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"7ea11fZL91TBJ5Dpoa+OnAL","StorageStartBoostersTutorialAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.StorageStartBoostersTutorialAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._userManager=t.userManager,n._progress=t.moduleResolvers.progress.get(),n._storage=t.storage,n}return a(t,e),t.prototype.run=function(){for(var e=this._userManager.getCurrentUser().items,t=e.defaultItems.filter(function(e){return"startbooster"===e.spec}),n=0;n<t.length;n++){var o=e.get("startbooster",t[n].name);o&&this._progress.value>=o.availability.value&&this._storage.setItem("startBoostersTutorial:"+o.name+":passed",!0)}return Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.StorageStartBoostersTutorialAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"c5597Ud5NFSuZUv//Y3ffbN","StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.StrategicEmitStrategy=void 0;n.StrategicEmitStrategy=function(){},cc._RF.pop()},{}],"StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"13ce1x1jUZQRKieX75NLEha","StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.StrategicEmitSystem=void 0;var i=e("./EmitByStrategyComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=t.world,o=t.factory,a=e.call(this)||this;return a._world=n,a._factory=o,a._emitedStrategy=[],a}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=!1,a=this._world.getEnabledComponentByClass(i.EmitByStrategyComponent);if(a)try{for(var c=r(a.strategies.filter(function(e){var t=e.strategyKey;return!n._emitedStrategy.includes(t)})),s=c.next();!s.done;s=c.next()){var p=s.value,l=p.strategyKey,m=p.strategyOptions,u=p.emitOptions,d=this._factory.create(l,m);if(!d)throw new Error('Strategy with key "'+l+'" not defined in factory');d.run(u)&&(this._emitedStrategy.push(l),o=!0)}}catch(y){e={error:y}}finally{try{s&&!s.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}return o},t.prototype.postProcess=function(){this._emitedStrategy=[]},t.KEY="StrategicEmitSystem",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.StrategicEmitSystem=c,cc._RF.pop()},{"./EmitByStrategyComponent (@tapclap.match-x.engine.components)":"EmitByStrategyComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"StrawberryClipIdleViewComponent (scripts.common.match3-game.components.entities.strawberry)":[function(e,t,n){"use strict";cc._RF.push(t,"c337chmC75YfJmheOlCuhmo","StrawberryClipIdleViewComponent (scripts.common.match3-game.components.entities.strawberry)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.StrawberryClipIdleViewComponent=void 0;var i=e("./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)"),c=e("./HealthComponent (@tapclap.match-x.engine.components)"),s=cc._decorator,p=s.ccclass,l=s.menu,m=s.property,u=function(){function e(){this.idleClip=null,this.healthValue=1}return r([m(cc.AnimationClip)],e.prototype,"idleClip",void 0),r([m(cc.Integer)],e.prototype,"healthValue",void 0),r([p("StrawberryClipIdleViewComponentConfig")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationConfig=[],t._animationClip=null,t._lastHealthValue=0,t._entity=null,t}return a(t,e),t.prototype.run=function(e){var t,n=this;if(this._entity||(this._entity=e),this._lastHealthValue=null===(t=e.getComponentByClass(c.HealthComponent))||void 0===t?void 0:t.getValue(),this._lastHealthValue){var o=this._animationConfig.find(function(e){return e.healthValue===n._lastHealthValue}).idleClip;this.playIdleAnimation(o,e)}},t.prototype.reset=function(){var t;return(null===(t=this._entity.getComponentByClass(c.HealthComponent))||void 0===t?void 0:t.getValue())!==this._lastHealthValue?e.prototype.reset.call(this):Promise.resolve()},r([m({type:[u],visible:!0})],t.prototype,"_animationConfig",void 0),r([m({type:cc.AnimationClip,visible:!1,override:!0})],t.prototype,"_animationClip",void 0),r([p,l("EntityViews/Strawberry/StrawberryClipIdleViewComponent")],t)}(i.ClipIdleViewComponent);n.StrawberryClipIdleViewComponent=d,cc._RF.pop()},{"./ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":"ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)"}],"StretchWindowComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"f38185sdedU07vkDbynaO8d","StretchWindowComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.StretchWindowComponent=void 0;var o,a,r,i,c,s=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/WindowManager/StretchWindowComponent"),a=_({type:cc.Node,visible:!0}),g(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_windowBody",c,l(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var a=o.prototype;return a.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._windowBody&&this._getChildsOfLayouts().forEach(function(e){var n=e.getComponent(cc.Widget);n&&!n.target&&(n.target=t._windowBody,n.updateAlignment())})},a.update=function(){if(this._windowBody){var e=0;this._getChildsOfLayouts().forEach(function(t){e=Math.max(e,t.width)}),e>0&&e!==this._windowBody.width&&(this._windowBody.width=e)}},a._getChildsOfLayouts=function(e){void 0===e&&(e=[]);var t=[];return this._layoutHolders.filter(function(e){return e.node}).forEach(function(e){return t.push.apply(t,e.node.children)}),t},o}(s.WindowComponent),u=i.prototype,d=[a],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_windowBody",e)||e},f)).initializer&&(Object.defineProperty(u,"_windowBody",f),f=null),c=f,r=i))||r)||r);n.StretchWindowComponent=b,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)":[function(e,t,n){"use strict";var o;function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"d7d7cHf/qlOnqMmYfp6qumu","SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)"),n.__esModule=!0,n.SubAnimationItem=void 0;var r=(0,cc._decorator.ccclass)("SubAnimationItem")(o=function(){function e(){this._targetNode=null}var t,n,o=e.prototype;return o.create=function(){},o.apply=function(){},t=e,(n=[{key:"targetNode",get:function(){return this._targetNode},set:function(e){this._targetNode=e}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())||o;n.SubAnimationItem=r,cc._RF.pop()},{}],"SubstringReplacer (@tapclap.utils-js.substring-replacer)":[function(e,t,n){"use strict";cc._RF.push(t,"5c024Y7quJTeIvf0pjYC9vm","SubstringReplacer (@tapclap.utils-js.substring-replacer)"),n.__esModule=!0,n.SubstringReplacer=void 0;var o=function(){function e(e){void 0===e&&(e={}),this._values=e}var t=e.prototype;return t.replace=function(e){for(var t=0,n=Object.entries(this._values);t<n.length;t++){var o=n[t],a=o[0],r=o[1];void 0!==r&&(e=e.replace(new RegExp("{{"+a+"}}","g"),r.toString()))}return e},t.setValue=function(e,t){return this._values[e]=t},e}();n.SubstringReplacer=o,cc._RF.pop()},{}],"SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"2f0d70xkuRckIPC/bK6HOZJ","SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)"),n.__esModule=!0,n.SumMultiplierPostSuperEntityHandler=void 0;var o=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),a=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)"),r=e("./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function c(t){var n,o=t.world,a=t.combinationTypes,r=void 0===a?[]:a,i=t.mode,s=void 0===i?c.MODE_REGULAR:i;return(n=e.call(this)||this)._world=o,n._combinationTypes=r,n._mode=s,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),c.prototype.handle=function(e){e.cell;var t=e.entity,n=e.type,i=e.chunk;if(this._combinationTypes.includes(n)){var s=t.getEnabledComponent(o.MultiplierComponent.KEY);if(s){var p=i.map(function(e){return e.entity}).reduce(function(e,t){var n=t.getEnabledComponent(o.MultiplierComponent.KEY);return n?e+n.getValue():e},0)+1;if(p>0){switch(this._mode){case c.MODE_REGULAR:s.setValue(p);break;case c.MODE_PERMANENT:s.setMinValue(p),s.setValue(p)}this._world.pushState(a.MultiplierSystem.STATE,new r.MultiplierSystemModel(t,s.getValue(),s.getMinValue()))}}}},c}(e("./PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)").PostSuperEntityHandler);n.SumMultiplierPostSuperEntityHandler=c,c.MODE_REGULAR="regular",c.MODE_PERMANENT="permanent",cc._RF.pop()},{"./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","./PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)":"PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)"}],"SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)":[function(e,t,n){"use strict";cc._RF.push(t,"ad2b5t68RdV54xd3H7W2ZIu","SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)"),n.__esModule=!0,n.SuperEntitySystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),r=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),i=e("./MergePartComponent (@tapclap.match-x.engine.components)"),c=e("./GoalComponent (@tapclap.match-x.engine.components)"),s=e("./HealthComponent (@tapclap.match-x.engine.components)");function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function o(t){var n,o=t.world,a=t.random,r=t.entitySystem,i=t.config;return t.postHandlers,(n=e.call(this)||this)._world=o,n._random=a,n._entitySystem=r,n._config=i,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var l=o.prototype;return l._getGroup=function(e){for(var t,n=p(e);!(t=n()).done;){var o=t.value.entity.getEnabledComponent("group");if(o)return o.id}return 0},l._getCell=function(e){var t=this._world.getState("swap");if(t)for(var n,o=function(){var t=n.value.cell;if(t.isEnabled&&t.isEmpty&&e.find(function(e){return e.cell===t}))return{v:t}},a=p(t.data);!(n=a()).done;){var r=o();if("object"==typeof r)return r.v}for(var i,c=[],s=p(e);!(i=s()).done;){var l=i.value,m=l.cell,u=l.entity.getEnabledComponent("move");u&&u.path.find(function(e){return!!e})&&c.push({cell:m,direction:u.direction})}return c.length>0?(c.sort(function(e,t){return t.cell.row*t.direction.y+t.cell.col*t.direction.x-(e.cell.row*e.direction.y+e.cell.col*e.direction.x)}),c[this._random.getInteger(0,c.length)].cell):e[this._random.getInteger(0,e.length)].cell},l.process=function(){var e,t,n,l=this._world.getState(a.CombinationSystem.STATE),m=((null==(e=this._world.getState(r.ExplodeSystem.STATE))?void 0:e.data)||[]).flat();if((null==(t=this._world)?void 0:null==(n=t.getComponent("tiles"))?void 0:n.grid).forEachEntities(function(e){return e.removeComponentByClass(i.MergePartComponent)}),l){for(var u,d=[],y=p(l.data.combinations);!(u=y()).done;){var f=u.value,h=f.type,g=f.chunk,v=this._config[h];if(v){var _=v[this._getGroup(g)];if(_){var b=this._getCell(g);if(b&&b.isEnabled&&b.isEmpty){var C=this._entitySystem.createEntity(_);b.setEntity(C),g.filter(function(e){return!e.entity.getComponentByClass(s.HealthComponent)}).forEach(function(e){return e.entity.addComponent(i.MergePartComponent.KEY,new i.MergePartComponent)}),d.push({cell:b,entity:C,type:h,chunkExplodeModels:g.map(function(e){var t=e.entity,n=e.cell,o=m.find(function(e){return t===e.entity}),a=t.getEnabledComponentByClass(c.GoalComponent);return{entity:t,cell:n,remove:o&&o.remove,isGoalTarget:!!a&&!a.goal.isCompleted}})})}}}}d.length>0&&this._world.setState(o.STATE,d)}return!1},o}(o.PipelineProcessSystem);n.SuperEntitySystem=d,d.KEY="superEntity",d.STATE="superEntity",cc._RF.pop()},{"./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GoalComponent (@tapclap.match-x.engine.components)":"GoalComponent (@tapclap.match-x.engine.components)","./HealthComponent (@tapclap.match-x.engine.components)":"HealthComponent (@tapclap.match-x.engine.components)","./MergePartComponent (@tapclap.match-x.engine.components)":"MergePartComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"a38f69VRDxbC6JvzvbUfTag","SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.SuperExplodeAnimationBuilder=void 0;var i=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./ExplodeAnimation (@tapclap.match-x.cocos.animations)"),p=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),l=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),m=e("./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)"),u=e("./GroupComponent (@tapclap.match-x.engine.components)"),d=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),y=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),f=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),h=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=e("./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)"),v=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),_=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),b=e("./Random (@tapclap.utils-js.random)"),C=function(e){function t(t){var n,o,a,r,i,c,s,p=e.call(this)||this;return p._duration=.4,p._particleDelayRange=[.2,1],p._particleDuration=1.5,p._particleLifeTime=4,p._newEntityZIndex=7,p._world=t.world,p._partPrefabPath=t.partPrefabPath,p._starPrefabPath=t.starPrefabPath,p._allowedRetrievers=null!==(n=t.allowedRetrievers)&&void 0!==n?n:[],p._duration=null!==(o=t.duration)&&void 0!==o?o:p._duration,p._backdropFadeDuration=null!==(a=t.backdropFadeDuration)&&void 0!==a?a:p._backdropFadeDuration,p._backdropManager=t.backdropManager,p._particleDelayRange=null!==(r=t.particleDelayRange)&&void 0!==r?r:p._particleDelayRange,p._particleDuration=null!==(i=t.particleDuration)&&void 0!==i?i:p._particleDuration,p._particleLifeTime=null!==(c=t.particleLifeTime)&&void 0!==c?c:p._particleLifeTime,p._random=new b.Random,p._audioEffectsPlayer=t.audioEffectsPlayer,p._partSpeed=450,p._delayBetweenParts=.1,p._colorsMap=null!==(s=t.colorsMap)&&void 0!==s?s:{},p}return a(t,e),t.prototype.build=function(e,t,n){var o,a,y,b=this,C=[],w=(null==t?void 0:t.data)||[],S=(null==n?void 0:n.data)||[],E=((null===(y=null==e?void 0:e.data)||void 0===y?void 0:y.flat())||[]).filter(function(e){var t=e.entity,n=t.getEnabledComponent(m.ExplodeRetrieverComponent.KEY);return"super-1"===t.type&&n&&b._allowedRetrievers.includes(n.type)}),x=function(e,t,n,o,a){if(n&&"super-1"===n.type){var r=new p.AnimationFactory(e);C.push(new c.AnimationData(t,new _.GroupAnimation([new s.ExplodeAnimation(t.getComponent(d.RenderComponent.KEY).node),r.createAnimation(l.AnimationResolver.TYPE_EXPLODE),new g.EventTriggerAnimation(t,"explode")])))}else{var m=t.getEnabledComponent("render").node,y=new p.AnimationFactory(t),E=[],x=[],O=null,R=new Promise(function(e){O=e}),P=new v.FunctionAnimation(function(){return y.createAnimation("explode_wait",{loop:!0}).run(),R}),k=o||n,T=k?new g.EventListenAnimation(k,"explode"):new h.DummyAnimation;C.push(new c.AnimationData(t,new _.GroupAnimation([new f.ChainAnimation([T,y.createAnimation("explode_begin"),P,new _.GroupAnimation([new g.EventTriggerAnimation(t,"explode"),A._audioEffectsPlayer.create("superTileExplode"),y.createAnimation("explode_end"),new h.DummyAnimation],!0)]),new h.DummyAnimation],!!k)));var I=new Map;a.forEach(function(e){var t=e.entity,n=e.cell;return I.set(n,{cell:n,entity:t})}),w.filter(function(e){return e.emitterEntity===t}).forEach(function(e){var t=e.newEntity,n=e.prevEntity,o=e.targetCell;return I.set(o,{cell:o,entity:n,newEntity:t,isEmit:!0})}),S.some(function(e){var n=e.entity;return t===n})&&S.filter(function(e){return e.entity!==t}).forEach(function(e){var t=e.entity,n=e.cell;return I.set(n,{cell:n,entity:t,isSwap:!0})});var M=A._world.getComponent("tiles").grid.getEnabledComponentByClass(d.RenderComponent).node,j=Array.from(I.values());j.sort(function(e,t){var n=e.cell,o=t.cell,a=m.parent.convertToWorldSpaceAR(m.position),r=n.getEnabledComponentByClass(d.RenderComponent).node,i=o.getEnabledComponentByClass(d.RenderComponent).node,c=r.parent.convertToWorldSpaceAR(r.position),s=i.parent.convertToWorldSpaceAR(i.position);return-1*(cc.Vec2.distance(a,c)-cc.Vec2.distance(a,s))}),j.forEach(function(e,n){var o,a,r=e.entity,s=e.cell,p=e.isEmit,l=void 0!==p&&p,y=e.newEntity,h=void 0===y?null:y,g=e.isSwap,S=void 0!==g&&g,A=s.getEnabledComponentByClass(d.RenderComponent).node,O=null===(o=r.getEnabledComponentByClass(d.RenderComponent))||void 0===o?void 0:o.node;l&&((null===(a=null==h?void 0:h.getEnabledComponentByClass(d.RenderComponent))||void 0===a?void 0:a.node).opacity=0);var R=new v.FunctionAnimation(function(){return T.wait.then(function(){var e=cc.instantiateFrom(b._partPrefabPath),t=m.parent.convertToWorldSpaceAR(m.position),o=M.convertToNodeSpaceAR(t);M.addChild(e),e.setPosition(o);var a=r.getEnabledComponentByClass(u.GroupComponent);a&&b._colorsMap[a.id]&&(e.getComponent(cc.MotionStreak).color=b._colorsMap[a.id]);var c=A.parent.convertToWorldSpaceAR(A.position),s=M.convertToNodeSpaceAR(c),p=new cc.Vec2(o.x,s.y);o.x===p.x&&s.x===p.x&&(p.x+=-50),o.y===p.y&&s.y===p.y&&(p.y+=-50);var y=cc.Vec2.distance(o,s)/b._partSpeed;return new f.ChainAnimation([new i.ActionAnimation(cc.delayTime(b._delayBetweenParts*n),e),b._audioEffectsPlayer.create("superTileRotate",{mergable:.2}),new i.ActionAnimation(cc.bezierTo(y,[o,p,s]),e),new v.FunctionAnimation(function(){var t=e.getComponent(cc.ParticleSystem);t.duration=0,t.life=0,t.lifeVar=0})]).run().then(function(){if(l){var e=h.getEnabledComponentByClass(d.RenderComponent).node,t=r.getEnabledComponentByClass(d.RenderComponent).node;return e.setPosition(t.getPosition()),e.opacity=0,e.zIndex=b._newEntityZIndex,new f.ChainAnimation([new _.GroupAnimation([new i.ActionAnimation(cc.sequence([cc.fadeOut(.5),cc.callFunc(function(){return t.destroy()})]),t),new i.ActionAnimation(cc.fadeIn(.5),e)]),new f.ChainAnimation([new i.ActionAnimation(cc.scaleTo(.3,1.5),e),new i.ActionAnimation(cc.scaleTo(.3,1),e)])]).run()}return S&&w.length>0?new f.ChainAnimation([new i.ActionAnimation(cc.delayTime(.5),O),new i.ActionAnimation(cc.scaleTo(.3,1.5),O),new i.ActionAnimation(cc.scaleTo(.3,1),O)]).run():S||l?void 0:new f.ChainAnimation([new i.ActionAnimation(cc.scaleTo(.25,1.25),O),new i.ActionAnimation(cc.scaleTo(.25,1),O)]).run()})}).then(function(){var e=A.parent.convertToWorldSpaceAR(A.position),t=M.convertToNodeSpaceAR(e),n=cc.instantiateFrom(b._starPrefabPath);n.setPosition(t),M.addChild(n),x.push(n)})});C.push(new c.AnimationData(t,R)),E.push(R.wait)}),Promise.all(E).then(O).then(function(){x.forEach(function(e){var t=e.getComponent(cc.ParticleSystem);t.endRadius=1.5*t.endRadius,t.duration=.2,t.emissionRate=3e3,t.totalParticles=400,t.rotatePerS=0,t.rotatePerSVar=0,t.life=.25,t.lifeVar=.5,t.resetSystem()})})}},A=this;try{for(var O=r(E),R=O.next();!R.done;R=O.next()){var P=R.value;x(P.cell,P.entity,P.blastedBy,P.affectedBy,P.blasted)}}catch(k){o={error:k}}finally{try{R&&!R.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}return[C]},t}(y.GameActionBuilder);n.SuperExplodeAnimationBuilder=C,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./EventAnimation (@tapclap.match-x.engine.systems.game-action-system)":"EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","./ExplodeAnimation (@tapclap.match-x.cocos.animations)":"ExplodeAnimation (@tapclap.match-x.cocos.animations)","./ExplodeRetrieverComponent (@tapclap.match-x.engine.components)":"ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupComponent (@tapclap.match-x.engine.components)":"GroupComponent (@tapclap.match-x.engine.components)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"SuperTileTrailComponent (scripts.scenes.match3-game.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c9667fNm0JWWKs1N2AxyC1X","SuperTileTrailComponent (scripts.scenes.match3-game.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.SuperTileTrailComponent=void 0;var i=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.update=function(){if(this._targetPosition){var e=this.node.getPosition();console.log(cc.v2(e).signAngle(this._targetPosition)),this.node.angle=cc.misc.radiansToDegrees(cc.v2(e).signAngle(this._targetPosition))}},t.prototype.setTargetPosition=function(e){this._targetPosition=e},r([i],t)}(cc.Component);n.SuperTileTrailComponent=c,cc._RF.pop()},{}],"SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"8fe563hJFBc+rcAI25JZi/X","SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.SwapAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)"),r=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function o(t){var n,o=t.speed,a=void 0===o?.25:o,r=t.exceptEntityPair,i=void 0===r?[]:r,c=t.audioEffectsPlayer;return(n=e.call(this)||this)._speed=a,n._exceptEntityPair=i,n._audioEffectsPlayer=c,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),o.prototype.build=function(e){for(var t,n=[],o=(null==e?void 0:e.data)||[],c=o[0].entity,s=o[1].entity,p=i(this._exceptEntityPair);!(t=p()).done;){var l=t.value,m=l[0],u=void 0===m?[]:m,d=l[1],y=void 0===d?[]:d;if(u.includes(c.type)&&y.includes(s.type)||u.includes(s.type)&&y.includes(c.type))return[n]}for(var f,h=0,g=i(e.data);!(f=g()).done;){var v=f.value,_=v.cell,b=v.entity,C=_.getComponent("render").node,w=b.getComponent("render").node;n.push({target:b,animation:new r.GroupAnimation([this._audioEffectsPlayer.create("swap"),new a.PlanetarySwapAnimation(w,C.getPosition(),0===h,this._speed)])}),h++}return[n]},o}(o.GameActionBuilder);n.SwapAnimationBuilder=l,cc._RF.pop()},{"./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)":"PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)"}],"SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"c74bcpXHUhc5rsyeJAPy3ab","SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.SwapAttemptsGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)"),r=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=3),(o=e.call(this)||this)._world=void 0,o._attempts=void 0,o._world=t,o._attempts=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.compute=function(){var e=this._world.getState(a.SwapAttemptsSystem.STATE),t=this._world.getState(r.SwapSystem.STATE_SWAP),n=e&&e.data;return t&&t.data&&n.attempts>0&&n.attempts%this._attempts==0},o}(o.GameEventStrategy);n.SwapAttemptsGameEventStrategy=c,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","./SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)":[function(e,t,n){"use strict";cc._RF.push(t,"ff1daCtZcpTBq8PeV71LXT8","SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)"),n.__esModule=!0,n.SwapAttemptsSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),r=e("./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=void 0,n._attempts=0,n._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.process=function(){var e=this._world.getState(a.SwapSystem.STATE_SWAP),t=this._world.getState(r.RevertSwapSystem.STATE);e&&t&&this._attempts++,e&&!t&&(this._attempts=0),this._world.setState(o.STATE,{attempts:this._attempts})},o}(o.PipelineProcessSystem);n.SwapAttemptsSystem=c,c.KEY="swapAttempts",c.STATE="swapAttempts",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)":"RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"SwapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"29beeOn6jpehbnJP29l2Uft","SwapComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwapComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="swap",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.SwapComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"892b1yXPhtWHK9s6u4QzCnG","SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwapCoverEntitySystemStrategy=void 0;var r=e("./ForceSwapCoverComponent (@tapclap.match-x.engine.components)"),i=e("./PreventCoverComponent (@tapclap.match-x.engine.components)"),c=e("./CombinationSystem (@tapclap.match-x.engine.systems)"),s=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.process=function(e){var n,o,a,p=this,l=[],m=(null===(n=e.getState(s.SwapSystem.STATE_SWAP))||void 0===n?void 0:n.data)||[],u=(null===(o=e.getState(c.CombinationSystem.STATE))||void 0===o?void 0:o.data)||[],d=m.map(function(e){return e.cell});if(m.length>0){var y=(null==u?void 0:u.combinations)||[],f=new Set(y.map(function(e){return e.chunk.map(function(e){return e.cell})}).flat()),h=d.find(function(e){return p._hasCoverEntityInCell(e)&&!e.entities.some(function(e){return e.getComponentByClass(i.PreventCoverComponent)})});if(h){var g=d.find(function(e){return e!==h});if(g){var v=null===(a=m.find(function(e){var t=e.cell;return g===t}))||void 0===a?void 0:a.entity;this._canCoverCell(g)&&(f.has(g)||(null==v?void 0:v.getEnabledComponentByClass(r.ForceSwapCoverComponent)))&&l.push({cell:g,fromCell:h,strategyKey:t.KEY})}}}return l},t.KEY="swapCoverEntityStrategy",t}(e("./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)").CoverEntitySystemStrategy);n.SwapCoverEntitySystemStrategy=p,cc._RF.pop()},{"./CombinationSystem (@tapclap.match-x.engine.systems)":"CombinationSystem (@tapclap.match-x.engine.systems)","./CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)":"CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)","./ForceSwapCoverComponent (@tapclap.match-x.engine.components)":"ForceSwapCoverComponent (@tapclap.match-x.engine.components)","./PreventCoverComponent (@tapclap.match-x.engine.components)":"PreventCoverComponent (@tapclap.match-x.engine.components)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"2d1ef7qcR9QrY/UYnkaFVe7","SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwapGumAnimationBuilder=void 0;var r=e("./GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)"),i=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),c=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),l=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"),u=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._createShowAnimation=function(e){var t=e.cell,n=e.entity,o=e.fromCell;if(e.strategyKey===m.SwapCoverEntitySystemStrategy.KEY){var a=o.getEnabledComponentByClass(i.RenderComponent).node,r=t.getEnabledComponentByClass(i.RenderComponent).node,d=a.getPosition(),y=r.getPosition(),f=n.getEnabledComponentByClass(i.RenderComponent).node;f.setPosition(d);var h=y.sub(d).normalize(),g=new c.DummyAnimation;return-1===h.x?f.setAnchorPoint(1,f.anchorY):1===h.x?f.setAnchorPoint(0,f.anchorY):1===h.y?f.setAnchorPoint(f.anchorX,0):-1===h.y&&f.setAnchorPoint(f.anchorX,1),0===h.x&&(g=new p.ActionAnimation(cc.scaleTo(this._duration/2,1,1.5),f)),0===h.y&&(g=new p.ActionAnimation(cc.scaleTo(this._duration/2,1.5,1),f)),new l.GroupAnimation([new s.FunctionAnimation(function(){f.setPosition(d)}),new l.GroupAnimation([new l.GroupAnimation([new u.ChainAnimation([g,new p.ActionAnimation(cc.scaleTo(this._duration/2,1,1).easing(cc.easeBounceIn()),f)]),new p.ActionAnimation(cc.fadeIn(.2),f),new p.ActionAnimation(cc.moveTo(this._duration,y),f)]),new c.DummyAnimation],!0)])}return new c.DummyAnimation},t}(r.GumAnimationBuilder);n.SwapGumAnimationBuilder=d,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)":"SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)"}],"SwapHelpAnimation (@tapclap.match-x.cocos.animations)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a01784QgvxTn6l3dxL/wVZJ","SwapHelpAnimation (@tapclap.match-x.cocos.animations)"),n.__esModule=!0,n.SwapHelpAnimation=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._turn=t,o._options=Object.assign({duration:.4,distance:.15},n),o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.run=function(){var t=this,n=function(e,n){var o=e.getComponent("render").node,r=n.getComponent("render").node;if(cc.isValid(o)&&cc.isValid(r)){var i=r.position.sub(o.position),c=i.normalize(),s=i.mag()*t._options.distance,p=t._options.duration,l=cc.repeatForever(cc.sequence([cc.moveBy(p,c.mul(s)).easing(cc.easeIn(4)),cc.moveBy(2*p,c.mul(-s)),cc.delayTime(3*p)]));l.setTag(a.TAG_SWAP_HELP_ANIMATION),o.runAction(l)}};return n(this._turn.entityA,this._turn.entityB),n(this._turn.entityB,this._turn.entityA),e.prototype.run.call(this)},r.stop=function(){var t=function(e,t){var n=e.getComponent("render").node,o=t.getComponent("render").node;cc.isValid(n)&&cc.isValid(o)&&(o.stopActionByTag(a.TAG_SWAP_HELP_ANIMATION),o.setPosition(n.position))};return t(this._turn.cellA,this._turn.entityA),t(this._turn.cellB,this._turn.entityB),e.prototype.stop.call(this)},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.SwapHelpAnimation=a,a.TAG_SWAP_HELP_ANIMATION=1,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"SwapInputHandler (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";cc._RF.push(t,"1bf8cmgk8JVXLdiFQ8qHcCZ","SwapInputHandler (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.SwapInputHandler=void 0;var o=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i=r.prototype;return i._getDistance=function(e,t){return Math.sqrt(Math.pow(e.row-t.row,2)+Math.pow(e.col-t.col,2))},i._checkInput=function(t,n){return e.prototype._checkInput.call(this,t,n)&&1===this._getDistance(this._getCell(t),this._getCell(n))},i._doHandle=function(e,t,n){n.setState(o.SwapSystem.STATE_DO_SWAP,{cellA:e,cellB:t})},i.capture=function(t,n,o){return!(e.prototype._checkInput.call(this,t,n)&&this._getDistance(t,n)>1&&t.data.move)&&e.prototype.capture.call(this,t,n,o)},r}(e("./RawInputHandler (@tapclap.match-x.engine.systems.input-system)").RawInputHandler);n.SwapInputHandler=r,cc._RF.pop()},{"./RawInputHandler (@tapclap.match-x.engine.systems.input-system)":"RawInputHandler (@tapclap.match-x.engine.systems.input-system)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"SwapMergeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"82e6d0rPxFcpoz70zYsr82n","SwapMergeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwapMergeComponent=void 0;var r=function(e){function t(t){var n=t.removeOtherOnSwap,o=void 0!==n&&n,a=t.removeOneWithSameTag,r=void 0!==a&&a,i=e.call(this)||this;return i._removeOtherOnSwap=o,i._removeOneWithSameTag=r,i}return a(t,e),Object.defineProperty(t.prototype,"removeOtherOnSwap",{get:function(){return this._removeOtherOnSwap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"removeOneWithSameTag",{get:function(){return this._removeOneWithSameTag},enumerable:!1,configurable:!0}),t.KEY="swapMerge",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.SwapMergeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"7802cV8OGVf0Z60R/NhEQEe","SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)"),n.__esModule=!0,n.SwapSpecificEntitiesGameEventStrategy=void 0;var o=e("./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)"),a=e("./SwapSystem (@tapclap.match-x.engine.systems.swap-system)"),r=e("./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=void 0,o._entityTypes=void 0,o._world=t,o._entityTypes=n,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.compute=function(){var e=this,t=this._world.getState(a.SwapSystem.STATE_SWAP),n=this._world.getState(r.RevertSwapSystem.STATE);if(null!=t&&t.data&&!n)return t.data.find(function(t){var n=t.entity;return n&&e._entityTypes.includes(n.type)})},o}(o.GameEventStrategy);n.SwapSpecificEntitiesGameEventStrategy=c,cc._RF.pop()},{"./GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)":"GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","./RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)":"RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)","./SwapSystem (@tapclap.match-x.engine.systems.swap-system)":"SwapSystem (@tapclap.match-x.engine.systems.swap-system)"}],"SwapSystem (@tapclap.match-x.engine.systems.swap-system)":[function(e,t,n){"use strict";cc._RF.push(t,"96611PI7NFXQq7rw8aVwXV3","SwapSystem (@tapclap.match-x.engine.systems.swap-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.SwapSystem=void 0;var i=function(e){function t(t){var n=t.world,o=t.strategies,a=void 0===o?[]:o,r=t.handlers,i=void 0===r?[]:r,c=e.call(this)||this;return c._world=n,c._strategies=a,c._lastMovements=[],c._handlers=i,c}return a(t,e),t.prototype.canSwap=function(e,t){return!!this._findRightStrategy(e,t)},t.prototype.swap=function(e,n,o){void 0===o&&(o=!1);var a=this._findRightStrategy(e,n);if(a){var i=a.calculate(e,n);if(i){var c=r(i,2),s=c[0],p=s.cell,l=s.entity,m=s.remove,u=void 0!==m&&m,d=c[1],y=d.cell,f=d.entity,h=d.remove,g=void 0!==h&&h;return u?p.setEntity(null):p.setEntity(l),g?y.setEntity(null):y.setEntity(f),this._lastMovements=i,o||([l,f].forEach(function(t){return t.events.emit("swap",e,n)}),this._world.setState(t.STATE_SWAP,i),this._handlers.forEach(function(e){return e.process(f,l)})),!0}}return!1},t.prototype.unswap=function(){if(this._lastMovements){var e=r(this._lastMovements,2),t=e[0],n=t.cell,o=t.entity,a=e[1],i=a.cell,c=a.entity;n.setEntity(c),i.setEntity(o)}},t.prototype.process=function(){var e=this._world.getState(t.STATE_DO_SWAP);if(e){var n=e.data,o=n.cellA,a=n.cellB;this.swap(o,a)}return!1},t.prototype._findRightStrategy=function(e,t){return this._strategies.find(function(n){return n.canSwap(e,t)})},t.KEY="swap",t.STATE_SWAP="swap",t.STATE_DO_SWAP="doSwap",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.SwapSystem=i,cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)":[function(e,t,n){"use strict";cc._RF.push(t,"87adf4C6xhe76G7E4A9vl7E","SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SwapSystemHandler=void 0;n.SwapSystemHandler=function(){},cc._RF.pop()},{}],"SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)":[function(e,t,n){"use strict";cc._RF.push(t,"428a9aq7CBTKKesizeW02es","SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SwapSystemStrategy=void 0;n.SwapSystemStrategy=function(){},cc._RF.pop()},{}],"SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)":[function(e,t,n){"use strict";cc._RF.push(t,"d844bF25v5dYbhzlhVjC8aP","SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)"),n.__esModule=!0,n.SwapTurnResolver=void 0;var o=function(){function e(){}var t=e.prototype;return t.getType=function(){return this.constructor.TYPE},t.resolve=function(){return null},e}();n.SwapTurnResolver=o,o.TYPE="unknown",cc._RF.pop()},{}],"SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)":[function(e,t,n){"use strict";cc._RF.push(t,"daa40580yZUy54Uf0R7i8xt","SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)"),n.__esModule=!0,n.SwapTurnStrategy=void 0;var o=e("./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)"),a=e("./Vector2D (@tapclap.match-x.engine.models)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._swapSystem=t,o._resolvers=n,o._turns=[],o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i._compute=function(e){for(var t=[],n=0;n<e.rows;n++)for(var o=0;o<e.cols;o++)for(var i=e.getCell(n,o),c=0,s=[a.Vector2D.RIGHT,a.Vector2D.DOWN];c<s.length;c++){var p=s[c],l=n+p.x,m=o+p.y;if(e.isContain(l,m)){var u=e.getCell(l,m);if(this._swapSystem.canSwap(i,u)){this._swapSystem.swap(i,u,!0);for(var d,y=r(this._resolvers);!(d=y()).done;){var f=d.value,h=f.resolve(e,i,u);h&&t.push({type:"swap",resolver:f.getType(),data:h,grid:e,a:i,b:u})}this._swapSystem.unswap()}}}return t},i.compute=function(e,t){return t&&(this._turns=this._compute(e)),this._turns},o}(o.TurnStrategy);n.SwapTurnStrategy=p,cc._RF.pop()},{"./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)":"TurnStrategy (@tapclap.match-x.engine.systems.turn-system)","./Vector2D (@tapclap.match-x.engine.models)":"Vector2D (@tapclap.match-x.engine.models)"}],"SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"5130ekNcuFdqIqfffiCSk5R","SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SwapWalkReplaceStrategy=void 0;var r=e("./FailWalkComponent (@tapclap.match-x.engine.components)"),i=e("./SwapComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.isValidCell=function(e,t){var n=e.getEntity(t.layer),o=n.getComponentByClass(i.SwapComponent),a=n.getComponentByClass(r.FailWalkComponent);return o&&!a},t.prototype.replaceEntity=function(e,t,n){t.setEntity(n.getEntity(e.layer),e.layer),n.setEntity(e,e.layer)},t.KEY="swap",t}(e("./WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkReplaceStrategy);n.SwapWalkReplaceStrategy=c,cc._RF.pop()},{"./FailWalkComponent (@tapclap.match-x.engine.components)":"FailWalkComponent (@tapclap.match-x.engine.components)","./SwapComponent (@tapclap.match-x.engine.components)":"SwapComponent (@tapclap.match-x.engine.components)","./WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"SyncPipelineSystem (scripts.common.match3-game.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"3e3faZ29HBQBKhw4LbCpbRr","SyncPipelineSystem (scripts.common.match3-game.systems)"),n.__esModule=!0,n.SyncPipelineSystem=void 0;var o=e("./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)"),a=e("./PipelineSystem (@tapclap.match-x.engine.systems)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function i(t){var n,o=t.pipeline,a=void 0===o?[]:o,r=t.world;return(n=e.call(this,{pipeline:a,world:r})||this)._asyncMode=!0,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),i.prototype.process=function(){var e=this;if(!this._pipeline)throw new Error("Pipeline not defined");this._loopIndex=0;for(var t,n=r(this._pipeline);!(t=n()).done;)t.value.preProcess();this._world&&this._world.setState(a.PipelineSystem.STATE,{loopIndex:this._loopIndex});var i=this._pipeline.find(function(e){return e instanceof o.GameActionSystem}),c=function(){if(p)l();else for(var t,n=r(e._pipeline);!(t=n()).done;)t.value.postProcess(s)};i.events.on("skip",function(){e._asyncMode=!1,i.events.remove("end",c),l()});var s=!1,p=!1,l=function t(){p=!1;for(var n,o=r(e._pipeline);!(n=o()).done;)n.value.process()&&(p=!0,s=!0);if(e._loopIndex++,e._asyncMode)return i.events.once("end",c),i.animate(!1),{process:p,success:s};if(p)t();else for(var a,l=r(e._pipeline);!(a=l()).done;)a.value.postProcess(s)};return l(),!1},i}(a.PipelineSystem);n.SyncPipelineSystem=p,cc._RF.pop()},{"./GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)":"GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","./PipelineSystem (@tapclap.match-x.engine.systems)":"PipelineSystem (@tapclap.match-x.engine.systems)"}],"SyncRemoteConfig (@tapclap.sdk-x.remote-config)":[function(e,t,n){"use strict";cc._RF.push(t,"352b0UvBVlTB6hOiE46oeIM","SyncRemoteConfig (@tapclap.sdk-x.remote-config)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.SyncRemoteConfig=void 0;var a=function(){function e(e){var t=e.remoteConfig,n=e.keys;this._remoteConfig=t,this._keys=n,this._config={}}return e.prototype.init=function(){return this.fetch()},e.prototype.fetch=function(){var t=this,n=Object.entries(this._keys).map(function(n){var a=o(n,2),r=a[0],i=a[1],c=e.TYPE_TO_METHOD_MAP[i.toLowerCase()];return t._remoteConfig[c](r).then(function(e){var n=e.value;return t._config[r]=n})});return Promise.all(n).then()},e.prototype.getBoolean=function(e){return this._getValue(e)},e.prototype.getInteger=function(e){return this._getValue(e)},e.prototype.getDouble=function(e){return this._getValue(e)},e.prototype.getString=function(e){return this._getValue(e)},e.prototype.getJSON=function(e){return this._getValue(e)},e.prototype._getValue=function(e){return{key:e,value:this._config[e]}},e.TYPE_TO_METHOD_MAP={boolean:"getBoolean",integer:"getInteger",double:"getDouble",string:"getString",json:"getJSON"},e}();n.SyncRemoteConfig=a,cc._RF.pop()},{}],"SyncRemoteConfigGetter (scripts.getters)":[function(e,t,n){"use strict";cc._RF.push(t,"e0ce0JkD9VUVrAyPZu39i4g","SyncRemoteConfigGetter (scripts.getters)"),Object.defineProperty(n,"__esModule",{value:!0}),n.SyncRemoteConfigGetter=void 0;var o=function(){function e(e){var t=e.remoteConfig,n=e.key,o=e.type;this._remoteConfig=t,this._remoteConfigKey=n,this._type=o}return e.prototype.get=function(){var t,n=e.TYPE_TO_METHOD_MAP[this._type],o=null===(t=this._remoteConfig[n](this._remoteConfigKey))||void 0===t?void 0:t.value;switch(this._type){case"boolean":return new Boolean(o);case"integer":case"double":return new Number(o);case"string":return new String(o)}return o},e.TYPE_TO_METHOD_MAP={boolean:"getBoolean",integer:"getInteger",double:"getDouble",string:"getString",json:"getJSON"},e}();n.SyncRemoteConfigGetter=o,cc._RF.pop()},{}],"SyncService (@tapclap.game-kit.services)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"9bfb54iTWJJeIPrfmnnBhLG","SyncService (@tapclap.game-kit.services)"),n.__esModule=!0,n.SyncService=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._adapter=t.adapter,n._query=t.query||{},n._enableSync=void 0===t.enableSync||t.enableSync,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.get=function(){var e=this;return this._enableSync?Promise.resolve().then(function(){return e._gateway.get(e._createPath({query:e._query}))}).catch(function(){return e._getDataByAdapter()}):this._getDataByAdapter()},r.syncData=function(){var e=this,t=Promise.resolve();return this._enableSync?Promise.resolve().then(function(){return e._getSyncDataByAdapter()}).then(function(t){return e._sendDataToServer(t)}).then(function(t){return e._setDataByAdapter(t)}).catch(function(){return e.get()}).catch(function(){throw new Error("Application can't fetch meta data")}):t.then(function(){return e._getDataByAdapter()})},r._sendDataToServer=function(e){return this._enableSync?this._gateway.put(this._createPath({query:this._query}),e):Promise.resolve()},r.save=function(e){return this._setDataByAdapter(e)},r._getSyncDataByAdapter=function(){return this._adapter?this._adapter.getSyncData().then(function(e){return e}):Promise.resolve()},r._getDataByAdapter=function(){return this._adapter?this._adapter.getData():Promise.resolve()},r._setDataByAdapter=function(e){return this._adapter&&e?this._adapter.setData(e).then(function(){return e}):e},a}(e("./Service (@tapclap.utils-js.service)").Service);n.SyncService=a,cc._RF.pop()},{"./Service (@tapclap.utils-js.service)":"Service (@tapclap.utils-js.service)"}],"System (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"bf4f6HlxNtbBYaqRjL3i4Ru","System (@tapclap.match-x.engine.systems)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.System=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.System=r,cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"TabComponent (scripts.views.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"8b757E68KFdKp3ldqIBnREG","TabComponent (scripts.views.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.TabComponent=void 0;var i=e("./SceneBadgeComponent (scripts.badges)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._badge=null,t}return a(t,e),t.prototype.setBadgeActivity=function(e){this._badge&&this._badge.setActivity(e)},t.prototype.refreshBadge=function(){this._badge&&this._badge.refresh()},r([p({visible:!0,type:i.SceneBadgeComponent})],t.prototype,"_badge",void 0),r([s],t)}(cc.Component);n.TabComponent=l,cc._RF.pop()},{"./SceneBadgeComponent (scripts.badges)":"SceneBadgeComponent (scripts.badges)"}],"TabMessageCenterWindowLayoutComponent (scripts.windows.layouts.message-center)":[function(e,t,n){"use strict";cc._RF.push(t,"9a8c8R541tbz6xfmQcMiIgX","TabMessageCenterWindowLayoutComponent (scripts.windows.layouts.message-center)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.TabMessageCenterWindowLayoutComponent=void 0;var i=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),c=e("./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),s=e("./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"),p=e("./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._scroll=null,t._spinner=null,t._emptyMessageNode=null,t._layoutInited=!1,t._adapterInited=!1,t}return a(t,e),t.prototype.initialize=function(e){this._adapter=e.adapter,this._adapter.setContentConfig(e.adapterOptions.contentConfig),this._adapter.setHolderPrefab(e.adapterOptions.holderPrefab)},t.prototype.onEnable=function(){this._scroll.node.opacity=0,this.initLayout()},t.prototype.initAdapter=function(){var e=this;return this._adapterInitPromise=this._adapterInitPromise||this._adapter.init(),this._adapterInitPromise.then(function(){e._adapter.on(p.RecyclerScrollAdapter.EVENT_ITEM_REMOVED,e._showEmptyMessage,e),e._adapter.on(p.RecyclerScrollAdapter.EVENT_DATASET_CHANGED,e._showEmptyMessage,e),e._scroll.setAdapter(e._adapter),e._adapterInited=!0})},t.prototype.initLayout=function(){var e=this;return this._adapterInitPromise.then(function(){if(e._layoutInited)e._scroll.node.runAction(cc.fadeIn(.5));else{if(e._layoutInited=!0,e._adapter.getItemCount()>0)return e._scroll.init(0),e._scroll.scrollToHolder(0,{force:!0}),e._scroll.run().then(function(){e._spinner.stopSpinner(),e._scroll.node.runAction(cc.fadeIn(.5))});e._spinner.stopSpinner(),e._showEmptyMessage()}})},t.prototype.clickOnInvite=function(){this._window.events.emit("invite")},t.prototype._showEmptyMessage=function(){this._adapter&&0===this._adapter.getItemCount()&&this._emptyMessageNode&&(this._emptyMessageNode.opacity=0,this._emptyMessageNode.active=!0,this._emptyMessageNode.runAction(cc.fadeIn(.5)))},r([u({type:c.RecyclerScrollViewComponent,visible:!0})],t.prototype,"_scroll",void 0),r([u({type:s.WindowLoadSpinnerComponent,visible:!0})],t.prototype,"_spinner",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_emptyMessageNode",void 0),r([m],t)}(i.WindowLayoutComponent);n.TabMessageCenterWindowLayoutComponent=d,cc._RF.pop()},{"./RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)":"RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)","./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)","./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"}],"TagComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"cf967GyL1NcLqIE2hlBLjtR","TagComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TagComponent=void 0;var r=function(e){function t(t){var n=t.value,o=e.call(this)||this;return o._value=n,o}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.KEY="tag",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TagComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TapComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"847c39oooNXbp7P20N4ihCz","TapComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.TapComponent=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TapComponent=a,a.KEY="tap",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"0c28eFo1aFQL6S9YVOxKEXa","TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TapToSkipMessageAnimationBuilder=void 0;var r=e("./AnimationData (@tapclap.match-x.cocos.animations)"),i=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),c=function(e){function t(t){var n=e.call(this,t)||this;return n._transitionComponent=t.transitionComponent,n._uiManager=t.uiManager,n}return a(t,e),t.prototype.build=function(){var e=this,t=[];if(this._transitionComponent){var n=new i.FunctionAnimation(function(){return e._transitionComponent.show()});t.push(new r.AnimationData(null,n))}return t.push(new r.AnimationData(null,new i.FunctionAnimation(function(){return e._uiManager.hideUI(["ui"])}))),[t]},t}(e("./GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)").GameEventActionBuilder);n.TapToSkipMessageAnimationBuilder=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"TargetClipComponent (scripts.common.components.ui-animations)":[function(e,t,n){"use strict";cc._RF.push(t,"f5e893sMBFLIJfJAb+aLCkD","TargetClipComponent (scripts.common.components.ui-animations)"),n.__esModule=!0,n.TargetClipComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_=e("./Random (@tapclap.utils-js.random)");function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var E=cc._decorator,x=E.ccclass,A=E.property,O=(o=A({type:[cc.AnimationClip],visible:!0}),a=A({tooltip:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f\u043c\u0438",visible:!0}),r=A({tooltip:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043c\u0435\u0436\u0434\u0443 \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u044f\u043c\u0438",visible:!0}),i=A({tooltip:"\u0421\u0438\u0434 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438",visible:!0}),c=A({tooltip:"\u041f\u0440\u044f\u0442\u0430\u0442\u044c \u043f\u0440\u0438 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438",visible:!0}),s=A({tooltip:"\u0421\u0442\u0430\u0440\u0442 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435",visible:!0}),p=A({tooltip:"\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u0446\u0435\u043b\u0438 (\u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 TargetClipComponent!)",type:[cc.Node],visible:!0}),x((m=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_clipAnimations",u,C(t)),b(t,"_minDelay",d,C(t)),b(t,"_maxDelay",y,C(t)),b(t,"_randomSeed",f,C(t)),b(t,"_hide",h,C(t)),b(t,"_runOnLoad",g,C(t)),b(t,"_dependentTargets",v,C(t)),t._random=null,t._animationComponent=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a=o.prototype;return a._init=function(){var e=this;this.node.opacity=this._hide?0:255,this._random=new _.Random(this._randomSeed),this._animationComponent=this.node.getComponent(cc.Animation)||this.node.addComponent(cc.Animation),this._animationComponent.on(cc.Animation.EventType.FINISHED,function(){e.node.opacity=e._hide?0:255;var t=e._dependentTargets.filter(function(e){return e&&e.getComponent(o)}).map(function(e){return e.getComponent(o)});t.length>0&&t[e._random.getInteger(0,t.length)].run()})},a.run=function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(this._random.getFloat(this._minDelay,this._maxDelay)),cc.callFunc(function(){e.node.opacity=255;var t=e._random.getInteger(0,e._clipAnimations.length),n=e._clipAnimations[t];e._animationComponent.addClip(n),e._animationComponent.play(n.name)})))},a.onLoad=function(){this._init(),this._runOnLoad&&this.run()},o}(cc.Component),u=S(m.prototype,"_clipAnimations",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=S(m.prototype,"_minDelay",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=S(m.prototype,"_maxDelay",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=S(m.prototype,"_randomSeed",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=S(m.prototype,"_hide",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=S(m.prototype,"_runOnLoad",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=S(m.prototype,"_dependentTargets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=m))||l);n.TargetClipComponent=O,cc._RF.pop()},{"./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"TargetValueComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"08ce3JPQqFXHosWy2HbxiiA","TargetValueComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.TargetValueComponent=void 0;var r=function(e){var t,n,r,i;function c(t){var n,o=t.value,a=void 0===o?0:o,r=t.min,i=void 0===r?0:r,c=t.max,s=void 0===c?0:c,p=t.targetValue,l=void 0===p?0:p;return(n=e.call(this,{value:a,min:i,max:s})||this)._targetValue=l,n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"targetValue",get:function(){return this._targetValue},set:function(e){this._targetValue=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./ValueComponent (@tapclap.match-x.engine.components)").ValueComponent);n.TargetValueComponent=r,cc._RF.pop()},{"./ValueComponent (@tapclap.match-x.engine.components)":"ValueComponent (@tapclap.match-x.engine.components)"}],"TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"0344fe19mZfOZOzhHfszAnY","TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.TargetValueComponentDataLoader=void 0;var a=function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.load=function(t,n){this._world.getEnabledComponent(t).targetValue=n.targetValue,e.prototype.load.call(this,t,n)},a}(e("./ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)").ValueComponentDataLoader);n.TargetValueComponentDataLoader=a,cc._RF.pop()},{"./ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)":"ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)"}],"TextureFiltersComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";cc._RF.push(t,"03c0bRGWfVafIpb/m3Kl92a","TextureFiltersComponent (@tapclap.match-x.cocos.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.TextureFiltersComponent=void 0;var c=cc._decorator,s=c.ccclass,p=c.property,l=function(){function e(){this.texture=null,this.minFilter=cc.Texture2D.Filter.LINEAR,this.magFilter=cc.Texture2D.Filter.LINEAR}return r([p({type:cc.Texture2D})],e.prototype,"texture",void 0),r([p({type:cc.Texture2D.Filter,visible:function(){return this.texture}})],e.prototype,"minFilter",void 0),r([p({type:cc.Texture2D.Filter,visible:function(){return this.texture}})],e.prototype,"magFilter",void 0),r([s("TextureFiltersItem")],e)}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._items=[],t}return a(t,e),t.prototype.start=function(){var e,t;try{for(var n=i(this._items),o=n.next();!o.done;o=n.next()){var a=o.value;a.texture.setFilters(a.minFilter,a.magFilter)}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r([p({type:[l],visible:!0})],t.prototype,"_items",void 0),r([s],t)}(cc.Component);n.TextureFiltersComponent=m,cc._RF.pop()},{}],"ThemeComponent (@tapclap.game-kit.ui.themes)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"44ed9qFoLxSBYu69WV8stlj","ThemeComponent (@tapclap.game-kit.ui.themes)"),n.__esModule=!0,n.ThemeComponent=void 0;var r=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),o.prototype.setTheme=function(){throw new Error("Method not implemented")},o}(cc.Component))||o;n.ThemeComponent=r,cc._RF.pop()},{}],"ThemeControllerComponent (@tapclap.game-kit.ui.themes)":[function(e,t,n){"use strict";cc._RF.push(t,"0786b3aUFdR1ZAqKbPg9C6g","ThemeControllerComponent (@tapclap.game-kit.ui.themes)"),n.__esModule=!0,n.ThemeControllerComponent=void 0;var o,a=e("./ThemeComponent (@tapclap.game-kit.ui.themes)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=cc._decorator,c=(0,i.ccclass)(o=(0,i.menu)("UI/Themes/ThemeControllerComponent")(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),o.prototype.setTheme=function(e){[this.node.getComponent(a.ThemeComponent)].concat(this.node.getComponentsInChildren(a.ThemeComponent)).filter(function(e){return e}).forEach(function(t){return t.setTheme(e)})},o}(cc.Component))||o)||o;n.ThemeControllerComponent=c,cc._RF.pop()},{"./ThemeComponent (@tapclap.game-kit.ui.themes)":"ThemeComponent (@tapclap.game-kit.ui.themes)"}],"ThousandthsLevelRewardContentWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"a8645e4x+9XYIuIqYvzpQ9W","ThousandthsLevelRewardContentWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ThousandthsLevelRewardContentWindowLayoutComponent=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),s=cc._decorator,p=s.ccclass,l=s.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._description=null,t._crownIcon=null,t._crownIcons=[],t}return a(t,e),t.prototype.setDescription=function(e){if(this._description){var t=this._description.getComponent(i.I18NLabel);t&&t.setString("thousandthsLevelReward.description",{level:e})}},t.prototype.setIcon=function(e){this._crownIcons[e]&&this._crownIcon&&(this._crownIcon.spriteFrame=this._crownIcons[e])},r([l({type:cc.Label,visible:!0})],t.prototype,"_description",void 0),r([l({type:cc.Sprite,visible:!0})],t.prototype,"_crownIcon",void 0),r([l({type:cc.SpriteFrame,visible:!0})],t.prototype,"_crownIcons",void 0),r([p],t)}(c.WindowLayoutComponent);n.ThousandthsLevelRewardContentWindowLayoutComponent=m,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"ThousandthsLevelRewardFooterWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)":[function(e,t,n){"use strict";cc._RF.push(t,"fd328Df+ahdpJm6jkC2MIJs","ThousandthsLevelRewardFooterWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ThousandthsLevelRewardFooterWindowLayoutComponent=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=e("./IconComponent (@tapclap.game-kit.ui.icons)"),s=e("./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),p=cc._decorator,l=p.ccclass,m=p.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._description=null,t._prizesRow=null,t._prizes=[],t}return a(t,e),t.prototype.initialize=function(t){void 0===t&&(t={}),e.prototype.initialize.call(this,t),this._setDescription()},t.prototype.setPrizes=function(e){for(var t=0;t<e.length;t++){var n=e[t],o=cc.instantiateFrom(this._options.prizeItem.prefab),a=o.getComponent(c.IconComponent);a.setIcon(n.name),this._prizes.push(a),this._prizesRow.addChild(o),this._prizesRow.height=Math.max(this._prizesRow.height,o.height),this._prizesRow.width=Math.max(this._prizesRow.width,o.width);var r=this._prizesRow.getComponent(cc.Layout);r&&r.updateLayout()}},t.prototype.getPrizes=function(){return this._prizes},t.prototype._setDescription=function(){if(this._description){var e=this._description.getComponent(i.I18NLabel);e&&e.setString("thousandthsLevelReward.footerDescription")}},r([m({type:cc.Label,visible:!0})],t.prototype,"_description",void 0),r([m({type:cc.Node,visible:!0})],t.prototype,"_prizesRow",void 0),r([l],t)}(s.FooterWindowLayoutComponent);n.ThousandthsLevelRewardFooterWindowLayoutComponent=u,cc._RF.pop()},{"./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)"}],"ThousandthsLevelRewardItemComponent (scripts.windows.items)":[function(e,t,n){"use strict";cc._RF.push(t,"4dc032dJFlaRbA3IJg8qwhU","ThousandthsLevelRewardItemComponent (scripts.windows.items)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.ThousandthsLevelRewardItemComponent=void 0;var i=cc._decorator,c=i.ccclass,s=i.property,p=function(){function e(){this.type="",this.spriteFrame=null}return r([s(cc.String)],e.prototype,"type",void 0),r([s(cc.SpriteFrame)],e.prototype,"spriteFrame",void 0),r([c("IconData")],e)}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._icon=null,t._iconsData=[],t}return a(t,e),t.prototype.initialize=function(e){var t,n=null===(t=this._iconsData.find(function(t){return t.type===e}))||void 0===t?void 0:t.spriteFrame;n&&(this._icon.spriteFrame=n)},r([s({type:cc.Sprite,visible:!0})],t.prototype,"_icon",void 0),r([s({type:p,visible:!0})],t.prototype,"_iconsData",void 0),t}(cc.Component);n.ThousandthsLevelRewardItemComponent=l,cc._RF.pop()},{}],"ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"f90228qJL9WY6tjp70JO3QB","ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ThousandthsLevelRewardStrategy=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getPrevValue=function(){return this._getValue(t.VALUE_PREV)},t.prototype.getValue=function(){return this._getValue(t.VALUE_CURRENT)},t.prototype.isAvailable=function(){return this._metaGame.getModule("progress").hasChange},t.prototype._getValue=function(e){void 0===e&&(e="");var n=this._metaGame.getModule("progress");switch(e){case t.VALUE_CURRENT:return n.value-1;case t.VALUE_PREV:return n.value-2;default:throw new Error("ThousandthsLevelRewardStrategy value key "+e+" not found")}},t.VALUE_PREV="prev",t.VALUE_CURRENT="current",t}(e("./CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)").CheckpointRewardStrategy);n.ThousandthsLevelRewardStrategy=r,cc._RF.pop()},{"./CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)":"CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)"}],"ThousandthsLevelRewardWindowAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"08b43CZkchcnJT1TfxMWEZA","ThousandthsLevelRewardWindowAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ThousandthsLevelRewardWindowAction=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._thousandthsLevelReward=t.moduleResolver.get(),n}return a(t,e),t.prototype._configureWindow=function(e){var t=this;if(this._thousandthsLevelReward.hasReward()){var n=this._thousandthsLevelReward.getRewardIndex(),o=this._thousandthsLevelReward.getRewards()[n].flat(),a=e.getLayout("content");a.setDescription(this._thousandthsLevelReward.getCheckpoints()[n]),a.setIcon(n);var r=e.getLayout("footer");r.setPrizes(o),e.events.once("claim",function(){var a=t._userManager.getCurrentUser(),i=r.getPrizes().map(function(e){return e.node});i.length>0&&i.forEach(function(e,r){t._uiManager.addClaimAnimation({node:e,target:"coins"===o[r].name?"coins-bar":"play",callback:function(){a.items.charge([o[r]],{checkpointIndex:n,rewardIndex:r})}})}),e.scheduleOnce(function(){e.hide()},.1),t._uiManager.playClaimAnimations().then(function(){t.runShare({levelNumber:t._thousandthsLevelReward.getCheckpoints()[n]}).then(function(){t.closeWindow(e)})})})}},t}(e("./WindowAction (@tapclap.game-kit.action-manager.actions.window)").WindowAction);n.ThousandthsLevelRewardWindowAction=r,cc._RF.pop()},{"./WindowAction (@tapclap.game-kit.action-manager.actions.window)":"WindowAction (@tapclap.game-kit.action-manager.actions.window)"}],"ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)":[function(e,t,n){"use strict";cc._RF.push(t,"075700t1NZckaGI3DITVDmf","ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)"),n.__esModule=!0,n.ThroughMoveStrategy=void 0;var o=e("./MatrixIteratorFactory (@tapclap.match-x.engine.models)"),a=e("./MoveMatrix (@tapclap.match-x.engine.models)"),r=e("./MoveStrategy (@tapclap.match-x.engine.systems.move-system)"),i=e("./EntityPoolComponent (@tapclap.match-x.engine.components)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._entitySystem=t.entitySystem,n._probabilityFilter=t.probabilityFilter,n._moveMatrix=null,n._random=t.random,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var s=r.prototype;return s._moveIsPossible=function(e,t,n){var a=this;void 0===n&&(n=!1);var r=e.getEnabledComponent("direction"),i=!1,c=!1;return e.forEach(o.MatrixIteratorFactory.createCellIterator(r.direction,t),function(e){if((n||e!==t)&&!i&&!c){if(e.isAvailableForSetEntity)i=!0;else{var o=e.getEntity();o&&o.getEnabledComponent("move")&&(c=!0)}a._moveMatrix.has(e.row,e.col)&&(c=!0)}}),i},s._isThroughCell=function(e){var t=e.getEntity();return(!e.isEnabled||t&&!t.getEnabledComponent("move"))&&!this._moveMatrix.has(e.row,e.col)},s._setEntity=function(e,t){void 0===t&&(t=null),t?this._isThroughCell(e)?this._moveMatrix.set(e.row,e.col,t):e.setEntity(t):this._moveMatrix.has(e.row,e.col)?this._moveMatrix.remove(e.row,e.col):e.setEntity(!1)},s._getEntity=function(e,t){for(var n,o=c(e);!(n=o()).done;){var a=n.value.getComponent(i.EntityPoolComponent.KEY);if(a&&a.hasEntityGroups())return this._random.sample(a.popEntityGroup())}return this._probabilityFilter&&(t=this._probabilityFilter.filter(t,this._moveMatrix)),this._entitySystem.createRandomEntity(t)},s.move=function(e){var t=this,n=e.getEnabledComponent("direction");if(!n)return!1;var a=n.direction,r=!1;return e.forEach(o.MatrixIteratorFactory.createMoveIterator(a,e),function(o){var i=o.getEntity(),c=t._moveMatrix.get(o.row,o.col)||i;if(c){var s=c.getEnabledComponent("move");if(s)if(t._moveIsPossible(e,o)){var p=o.row+a.y,l=o.col+a.x;if(e.isContain(p,l)){var m=e.getCell(p,l);m.isAvailableForSetEntity||t._isThroughCell(m)?(t._setEntity(o,null),t._setEntity(m,c),s.path.push(m),r=!0):s.path.push(null)}s.direction=n.direction}else s.path.push(null)}}),e.forEach(o.MatrixIteratorFactory.createDropIterator(a,e),function(o){var a=o.getEnabledComponent("drop");if(a&&a.hasEntityGroups()){var i=t._random.sample(a.getEntityGroup());if(i){var c=i.getEnabledComponent("move");if(c&&(c.direction=n.direction,t._moveIsPossible(e,o,!0)&&((o.isAvailableForSetEntity||t._isThroughCell(o))&&(t._setEntity(o,i),c.dropped=!0),c.dropped))){c.start=o,a.delay++;for(var s=0;s<a.delay-1;s++)c.path.push(null);c.path.push(o),a.popEntityGroup(),r=!0}}}}),r||this._moveMatrix.count>0},s.drop=function(e){var t=this,n=[],a=e.getEnabledComponent("direction"),r=e.getEnabledComponent("entityProbability");return a&&r&&e.forEach(o.MatrixIteratorFactory.createDropIterator(a.direction,e),function(o){var a=o.getComponent("drop");if(a&&(a.enable=!0,!a.hasEntityGroups()))if(t._moveIsPossible(e,o,!0)){var i=t._getEntity([e,o],r.probabilities);a.pushEntityGroup([i]),n.push({grid:e,cell:o,entity:i})}else a.delay++}),n},s.prepare=function(e){this._moveMatrix=new a.MoveMatrix(e.rows,e.cols);for(var t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++){var o=e.getCell(t,n);if(o.isFill){var r=o.getEntity().getEnabledComponent("move");r&&(r.reset(),r.start=o)}var i=o.getEnabledComponent("drop");i&&(i.delay=0)}},r}(r.MoveStrategy);n.ThroughMoveStrategy=m,cc._RF.pop()},{"./EntityPoolComponent (@tapclap.match-x.engine.components)":"EntityPoolComponent (@tapclap.match-x.engine.components)","./MatrixIteratorFactory (@tapclap.match-x.engine.models)":"MatrixIteratorFactory (@tapclap.match-x.engine.models)","./MoveMatrix (@tapclap.match-x.engine.models)":"MoveMatrix (@tapclap.match-x.engine.models)","./MoveStrategy (@tapclap.match-x.engine.systems.move-system)":"MoveStrategy (@tapclap.match-x.engine.systems.move-system)"}],"TickAnimationComponent (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"1d56fzRPghXt5wlHd0W5+aX","TickAnimationComponent (scripts.windows.items.daily-reward.animation)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.TickAnimationComponent=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),p=e("./BounceAnimation (scripts.windows.items.daily-reward.animation)"),l=cc._decorator,m=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._tick=null,t._shadow=null,t._scaleXAnimation=null,t._positionAnimation=null,t._appearanceDuration=0,t._tickDelayBeforeAppearance=0,t._tickDelayAfterAppearance=0,t._shadowAppearanceDelay=0,t._shortDelayDifference=0,t._idleTickAnimation=null,t._idleShadowAnimation=null,t._activeAnimationsList=[],t}return a(t,e),t.prototype.setDefault=function(){this._tick.opacity=s.AnimationKey.MIN_OPACITY,this._shadow.opacity=s.AnimationKey.MIN_OPACITY,this._activeAnimationsList.forEach(function(e){e.stop()})},t.prototype.runAppearance=function(){var e=this,t={opacity:s.AnimationKey.MAX_OPACITY},n=this._tick.scaleX,o=this._tick.position,a=cc.tween(this._tick).delay(this._tickDelayBeforeAppearance).parallel(cc.tween().to(this._scaleXAnimation.duration,{scaleX:{value:n,progress:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var a=i(t,4),r=a[3];return n+e._scaleXAnimation.getValueByTime(r)}}}),cc.tween().to(this._positionAnimation.duration,{position:{value:o,progress:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=i(t,4),r=a[3];return cc.v2(o.x,o.y-e._positionAnimation.getValueByTime(r))}}}),cc.tween().to(this._appearanceDuration,t)).delay(this._tickDelayAfterAppearance),r=cc.tween(this._shadow).delay(this._shadowAppearanceDelay).to(this._appearanceDuration,t);return Promise.all([c.PromisifyTween.start(a),c.PromisifyTween.start(r)])},t.prototype.runIdle=function(){var e=this,t=this._tick.position,n=cc.tween(this._tick).to(this._idleTickAnimation.duration,{position:{value:t,progress:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var a=i(n,4),r=a[3];return cc.v2(t.x,t.y-e._idleTickAnimation.getValueByTime(r))}}}).repeatForever(),o=this._shadow.scale,a=cc.tween(this._shadow).to(this._idleShadowAnimation.duration,{scale:{value:o,progress:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=i(t,4),r=a[3];return o+e._idleShadowAnimation.getValueByTime(r)}}}).repeatForever();return this._tick.opacity=s.AnimationKey.MAX_OPACITY,this._shadow.opacity=s.AnimationKey.MAX_OPACITY,this._activeAnimationsList=[n.start(),a.start()],this._activeAnimationsList},t.prototype.setShortDelay=function(){this._tickDelayAfterAppearance-=this._shortDelayDifference,this._tickDelayBeforeAppearance-=this._shortDelayDifference,this._shadowAppearanceDelay-=this._shortDelayDifference},r([u({type:cc.Node,visible:!0})],t.prototype,"_tick",void 0),r([u({type:cc.Node,visible:!0})],t.prototype,"_shadow",void 0),r([u({type:p.BounceAnimation,visible:!0})],t.prototype,"_scaleXAnimation",void 0),r([u({type:p.BounceAnimation,visible:!0})],t.prototype,"_positionAnimation",void 0),r([u({visible:!0,min:0})],t.prototype,"_appearanceDuration",void 0),r([u({visible:!0,min:0})],t.prototype,"_tickDelayBeforeAppearance",void 0),r([u({visible:!0,min:0})],t.prototype,"_tickDelayAfterAppearance",void 0),r([u({visible:!0,min:0})],t.prototype,"_shadowAppearanceDelay",void 0),r([u({visible:!0,min:0})],t.prototype,"_shortDelayDifference",void 0),r([u({type:p.BounceAnimation,visible:!0})],t.prototype,"_idleTickAnimation",void 0),r([u({type:p.BounceAnimation,visible:!0})],t.prototype,"_idleShadowAnimation",void 0),r([m],t)}(cc.Component);n.TickAnimationComponent=d,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./BounceAnimation (scripts.windows.items.daily-reward.animation)":"BounceAnimation (scripts.windows.items.daily-reward.animation)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)"}],"TimeDuration (@tapclap.utils-js.time-duration)":[function(e,t,n){"use strict";cc._RF.push(t,"46d41biQXZFrYoAWl2ljbs4","TimeDuration (@tapclap.utils-js.time-duration)"),n.__esModule=!0,n.TimeDuration=void 0;var o=function(){function e(e){this._duration="string"==typeof e?this._parseString(e):e}var t=e.prototype;return t._parseString=function(t){var n=t.match(/^P(?!$)(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?=\d)(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/);if(n){for(var o=0,a=[e.SECONDS_PER_YEAR,e.SECONDS_PER_MONTH,e.SECONDS_PER_WEEK,e.SECONDS_PER_DAY,e.SECONDS_PER_HOUR,e.SECONDS_PER_MINUTE,1],r=1;r<n.length;r++)o+=parseInt(n[r]||0)*a[r-1];return o}throw new Error("Duration isn't formatted by ISO-8601: "+t)},t._getTimeValue=function(e){return Math.floor(this._duration/e)},t.getDuration=function(){return this._duration},t.setDuration=function(e){this._duration=e},t.getMilliseconds=function(){return 1e3*this._duration},t.getSeconds=function(){return this._duration},t.getMinutes=function(){return this._getTimeValue(e.SECONDS_PER_MINUTE)},t.getHours=function(){return this._getTimeValue(e.SECONDS_PER_HOUR)},t.getDays=function(){return this._getTimeValue(e.SECONDS_PER_DAY)},t.getWeeks=function(){return this._getTimeValue(e.SECONDS_PER_WEEK)},t.getMonths=function(){return this._getTimeValue(e.SECONDS_PER_MONTH)},t.getYears=function(){return this._getTimeValue(e.SECONDS_PER_YEAR)},e}();n.TimeDuration=o,o.SECONDS_PER_DAY=86400,o.SECONDS_PER_HOUR=3600,o.SECONDS_PER_MINUTE=60,o.SECONDS_PER_MONTH=2629746,o.SECONDS_PER_WEEK=604800,o.SECONDS_PER_YEAR=31556952,cc._RF.pop()},{}],"TimeValueRewardComponent (scripts.windows.items.daily-reward.reward)":[function(e,t,n){"use strict";cc._RF.push(t,"0d36b9tnllYbZTkVX6KR7RY","TimeValueRewardComponent (scripts.windows.items.daily-reward.reward)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.TimeValueRewardComponent=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=e("./BoosterRewardComponent (scripts.windows.items.daily-reward.reward)"),s=cc._decorator.ccclass,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._getFormattedLabelValue=function(e){return this._label.node.getComponent(i.I18NLabel).i18n.t("dailyReward.timeReward",{minutes:parseInt(e)/60})},r([s],t)}(c.BoosterRewardComponent);n.TimeValueRewardComponent=p,cc._RF.pop()},{"./BoosterRewardComponent (scripts.windows.items.daily-reward.reward)":"BoosterRewardComponent (scripts.windows.items.daily-reward.reward)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)":[function(e,t,n){"use strict";cc._RF.push(t,"4c78aati8VOnJdZ1vD9jC35","TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)"),n.__esModule=!0,n.TimedAttemptsState=void 0;var o=e("./AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)"),a=e("./Timer (@tapclap.utils-js.timer)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this)._timer=new a.Timer(t.item.duration,t.item.startAt),t.item.on("change",function(){n._timer=new a.Timer(t.item.duration,t.item.startAt)}),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.getCountAttempts=function(){return 1/0},i.getTimer=function(){return this._timer},i.isAvailable=function(){return!this._timer.isComplete()},i.hasAttempt=function(){return!this._timer.isComplete()},o}(o.AttemptsState);n.TimedAttemptsState=i,cc._RF.pop()},{"./AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)":"AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)","./Timer (@tapclap.utils-js.timer)":"Timer (@tapclap.utils-js.timer)"}],"TimedUserItem (@tapclap.game-kit.user-item-manager.items)":[function(e,t,n){"use strict";cc._RF.push(t,"f7e1aWXQL1ek4LMTP8Ddbrs","TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),n.__esModule=!0,n.TimedUserItem=void 0;var o=e("./UserItem (@tapclap.game-kit.user-item-manager)"),a=e("./TimeDuration (@tapclap.utils-js.time-duration)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n={}),e.call(this,t,Object.assign({startAt:t.startAt?new Date(t.startAt):new Date,duration:new a.TimeDuration(null!=(o=t.duration)?o:0)},n))||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c,s,p=o.prototype;return p.isAvailable=function(){return e.prototype.isAvailable.call(this)&&!this.isExpired},p.merge=function(e){return this._instanceAssert(e),this.isExpired?this.replace(e):this.duration=this.duration+e.duration,this},p.substract=function(e){return this._instanceAssert(e),this.isExpired||(this.duration=Math.max(0,this.duration-e.duration)),this},p.replace=function(e){return this._instanceAssert(e),this.startAt=e.startAt,this.duration=e.duration,this},p.serialize=function(){return Object.assign(e.prototype.serialize.call(this),{startAt:this.startAt.toString(),duration:this.duration})},p._instanceAssert=function(e){if(!(e instanceof o))throw new Error("Passed model is not instance of TimedUserItemModel")},c=o,(s=[{key:"startAt",get:function(){return this._model.startAt},set:function(e){this._model.startAt=e}},{key:"duration",get:function(){return this._model.duration.getSeconds()},set:function(e){this._model.duration=new a.TimeDuration(e)}},{key:"expireAt",get:function(){return new Date(this.startAt.getTime()+this._model.duration.getMilliseconds())}},{key:"isExpired",get:function(){return this.expireAt.getTime()<=(new Date).getTime()}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),o}(o.UserItem);n.TimedUserItem=c,c.KEY="timed",cc._RF.pop()},{"./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./UserItem (@tapclap.game-kit.user-item-manager)":"UserItem (@tapclap.game-kit.user-item-manager)"}],"Timer (@tapclap.utils-js.timer)":[function(e,t,n){"use strict";cc._RF.push(t,"1f64cJJ3nJdrYpFRvmwUEQX","Timer (@tapclap.utils-js.timer)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.Timer=void 0;var i=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var o=e.call(this)||this;return o._duration=t,o._startTime=o._prepareStartTime(n),o._initTimeout(),o}return a(t,e),t.prototype._initTimeout=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(this._onTimeout.bind(this),1e3*this.getTime()),t._timers.add(this)},t.prototype._prepareStartTime=function(e){return e instanceof Date?e.getTime()/1e3:e||this._getTimeNow()},t.prototype._onTimeout=function(){this.events.emit(t.EVENT_COMPLETE),this.destroy()},t.prototype._getTimeNow=function(){return cc.sys.now()/1e3},t.prototype.destroy=function(){this._timeoutId&&clearTimeout(this._timeoutId),t._timers.delete(this)},t.prototype.isComplete=function(){return 0===this.getTime()},t.prototype.getDuration=function(){return this._duration},t.prototype.getMultipleDurationCount=function(){return Math.floor(Math.abs(this._startTime-this._getTimeNow())/this.getDuration())},t.prototype.getTime=function(){return Math.max(Math.round(this._startTime+this.getDuration()-this._getTimeNow()),0)},t.refresh=function(){var e,t;try{for(var n=r(this._timers),o=n.next();!o.done;o=n.next())o.value._initTimeout()}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.EVENT_COMPLETE="complete",t._timers=new Set,t}(e("./EventObject (@tapclap.utils-js.events)").EventObject);n.Timer=i,cc._RF.pop()},{"./EventObject (@tapclap.utils-js.events)":"EventObject (@tapclap.utils-js.events)"}],"ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"4620fDWNZtW16C11gThkVXF","ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ToggleLockAnimationResolver=void 0;var r=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),i=e("./LockComponent (@tapclap.match-x.engine.components)"),c=e("./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)"),s=function(e){function t(){var t=e.call(this,{defaultTemplate:"$key-$locked"})||this;return t._getters={locked:t._getLocked.bind(t)},t}return a(t,e),t.prototype._getLocked=function(e){var t=e.getComponentByClass(i.LockComponent);if(e.getComponentByClass(c.ToggleLockOnTurnEndComponent))return t?"locked":"unlocked"},t.KEY="toggleLock",t}(r.AnimationResolver);n.ToggleLockAnimationResolver=s,cc._RF.pop()},{"./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)":"ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)"}],"ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"5ace2DXbtJVD4mqmirIdaAS","ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ToggleLockOnTurnEndAnimationBuilder=void 0;var i=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),c=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),s=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(e){var t,n,o=[];if(e.data)try{for(var a=r(e.data),c=a.next();!c.done;c=a.next()){var l=c.value,m=l.key,u=l.entity,d=new i.AnimationFactory(u);o.push({target:u,animation:new p.GroupAnimation([new s.DummyAnimation,d.createAnimation(m)],!0)})}}catch(y){t={error:y}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return[o]},t}(c.GameActionBuilder);n.ToggleLockOnTurnEndAnimationBuilder=l,cc._RF.pop()},{"./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"9d407upeyddPoD52oT1R/o5","ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ToggleLockOnTurnEndComponent=void 0;var r=function(e){function t(t){var n=t.lockCreator,o=e.call(this)||this;return o.lockCreator=n,o}return a(t,e),t.KEY="toggleLockOnTurnEnd",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ToggleLockOnTurnEndComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"2c49esb64ZV3byG/wJRXq/h","ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ToggleLockOnTurnEndSystem=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./LockComponent (@tapclap.match-x.engine.components)"),s=e("./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)"),p=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),l=function(e){function t(t){var n=e.call(this,t.world)||this;return n._entityLockFactory=t.entityLockFactory,n._world=t.world,n._skipOnStates=t.skipOnStates,n._turnStates=t.turnStates,n}return a(t,e),t.prototype.process=function(){var e,n,o=this;if(this._isValidTurnState()&&!this._isSkipOnStates()){var a=function(e){e.forEachEntities(function(n,a){var r=n.getComponentByClass(s.ToggleLockOnTurnEndComponent);r&&(n.getComponentByClass(c.LockComponent)?(o._unlock(e,a,n),o._world.pushState(t.STATE,{key:"unlocked",entity:n})):(o._entityLockFactory.createLock(n,r.lockCreator),o._lock(e,a,n),o._world.pushState(t.STATE,{key:"locked",entity:n})))})};try{for(var p=r(this._world.getEnabledComponentsByClass(i.GridComponent)),l=p.next();!l.done;l=p.next())a(l.value.grid)}catch(m){e={error:m}}finally{try{l&&!l.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}}return!1},t.prototype._isValidTurnState=function(){var e=this._world.getEnabledComponentByClass(p.TurnStateComponent);return!!e&&this._turnStates.includes(e.state)},t.prototype._isSkipOnStates=function(){var e=this;return this._skipOnStates.some(function(t){var n;return null===(n=e._world.getState(t))||void 0===n?void 0:n.data})},t.KEY=Symbol("ToggleLockOnTurnEnd"),t.STATE="ToggleLockOnTurnEndState",t}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.ToggleLockOnTurnEndSystem=l,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)":"ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"TrackComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"a14e15Rk2dZmYOO+5csHzIn","TrackComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TrackComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="track",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TrackComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)":[function(e,t,n){"use strict";cc._RF.push(t,"7ddf6/zmwxYn4/OCc9gxfk0","TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.TrackDataLoaderPostHandler=void 0;var i=e("./FinishTrackComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./StartTrackComponent (@tapclap.match-x.engine.components)"),p=e("./TrackComponent (@tapclap.match-x.engine.components)"),l=e("./TrackStorageComponent (@tapclap.match-x.engine.components)"),m=e("./RetrieverFactory (@tapclap.match-x.engine.retrievers)"),u=function(e){function t(t){var n=e.call(this)||this;return n._world=t.world,n._retrieverFactory=t.retrieverFactory,n}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=function(e){e.forEachEntities(function(t,o){if(t.getComponentByClass(s.StartTrackComponent)){var a=t.getComponentByClass(l.TrackStorageComponent).storage;if(a)for(var r=n._findTrack(o,e,a);r;)a.push(r),r=n._findTrack(r,e,a)}})};try{for(var a=r(this._world.getComponentsByClass(c.GridComponent)),i=a.next();!i.done;i=a.next())o(i.value.grid)}catch(p){e={error:p}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return!1},t.prototype._findTrack=function(e,t,n){return this._retrieverFactory.createRetriever(m.RetrieverFactory.RETRIEVER_NEIGHBOR,{chunk:[e]}).retrieve(t).flat().filter(function(e){return!n.includes(e)&&e.entities.some(function(e){return e.getComponentByClass(p.TrackComponent)})}).find(function(e){return!e.getEntity().getComponentByClass(s.StartTrackComponent)&&!e.getEntity().getComponentByClass(i.FinishTrackComponent)})},t.KEY="trackDataLoaderPostHandler",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.TrackDataLoaderPostHandler=u,cc._RF.pop()},{"./FinishTrackComponent (@tapclap.match-x.engine.components)":"FinishTrackComponent (@tapclap.match-x.engine.components)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./RetrieverFactory (@tapclap.match-x.engine.retrievers)":"RetrieverFactory (@tapclap.match-x.engine.retrievers)","./StartTrackComponent (@tapclap.match-x.engine.components)":"StartTrackComponent (@tapclap.match-x.engine.components)","./TrackComponent (@tapclap.match-x.engine.components)":"TrackComponent (@tapclap.match-x.engine.components)","./TrackStorageComponent (@tapclap.match-x.engine.components)":"TrackStorageComponent (@tapclap.match-x.engine.components)"}],"TrackStorageComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"55b12q0zvBYzqMLwIXnych+","TrackStorageComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TrackStorageComponent=void 0;var r=function(e){function t(){var t=e.call(this)||this;return t._storage=[],t}return a(t,e),Object.defineProperty(t.prototype,"storage",{get:function(){return this._storage},enumerable:!1,configurable:!0}),t.KEY="trackStorage",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TrackStorageComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TransitionComponent (@tapclap.game-kit.ui.transition)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d;function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"0b752sp369J4LZJle/QFCqd","TransitionComponent (@tapclap.game-kit.ui.transition)"),n.__esModule=!0,n.TransitionComponent=void 0;var v=cc._decorator,_=v.ccclass,b=v.property,C=(o=(0,v.menu)("UI-Kit/Transition/TransitionComponent"),a=b({visible:!0}),r=b({visible:!0}),i=b({type:cc.Float,visible:!0}),c=b({type:cc.Float,visible:!0}),_(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_invisibleOnLoad",l,f(t)),y(t,"_disabledOnLoad",m,f(t)),y(t,"_showAnimationDuration",u,f(t)),y(t,"_hideAnimationDuration",d,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a=o.prototype;return a.onLoad=function(){this.reset()},a.disable=function(){this.node.active=!1},a.enable=function(){this.node.active=!0},a.hide=function(){return Promise.resolve()},a.show=function(){return Promise.resolve()},a.reset=function(){this._disabledOnLoad&&this.disable(),this._invisibleOnLoad&&(this.node.opacity=0)},a.isActive=function(){return this.node.active},o}(cc.Component),l=g(p.prototype,"_invisibleOnLoad",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=g(p.prototype,"_disabledOnLoad",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=g(p.prototype,"_showAnimationDuration",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=g(p.prototype,"_hideAnimationDuration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),s=p))||s)||s);n.TransitionComponent=C,cc._RF.pop()},{}],"TranslationHandler (@tapclap.game-kit.translation-handler)":[function(e,t,n){"use strict";cc._RF.push(t,"1f651iOgZJVBKMKjOvklo4w","TranslationHandler (@tapclap.game-kit.translation-handler)"),n.__esModule=!0,n.TranslationHandler=void 0;var o=function(){function e(){}return e.prototype.translate=function(){throw new Error("Not implemented")},e}();n.TranslationHandler=o,cc._RF.pop()},{}],"TurnComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"91cccEnw25VkLWW/OiGX1+7","TurnComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.TurnComponent=void 0;var r=function(e){var t,n,r,i;function c(){var t;return(t=e.call(this)||this)._availableTurns=[],t._currentAvailableTurn=null,t}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r=c,(i=[{key:"availableTurns",get:function(){return this._availableTurns},set:function(e){this._availableTurns=e}},{key:"currentAvailableTurn",get:function(){return this._currentAvailableTurn},set:function(e){this._currentAvailableTurn=e}}])&&o(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),c}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TurnComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"36a69UUPUVZx6+5RsMV3YSP","TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TurnCountAfterExplodeComponent=void 0;var r=function(e){function t(t){var n=(void 0===t?{}:t).count,o=void 0===n?0:n,a=e.call(this)||this;return a._count=0,a._started=!1,a._reseted=!1,a._count=o,a}return a(t,e),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},set:function(e){this._count=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"started",{get:function(){return this._started},set:function(e){this._started=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reseted",{get:function(){return this._reseted},set:function(e){this._reseted=e},enumerable:!1,configurable:!0}),t.KEY="turnCountAfterExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TurnCountAfterExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)":[function(e,t,n){"use strict";cc._RF.push(t,"b3706kiGZlQpKfXXQ9fC7Ns","TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.TurnCountAfterExplodeSystem=void 0;var i=e("./ExplodeComponent (@tapclap.match-x.engine.components)"),c=e("./GridComponent (@tapclap.match-x.engine.components)"),s=e("./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),p=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),l=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)"),m=function(e){function t(t){var n=t.world,o=t.increasingTurnStates,a=void 0===o?[]:o,r=e.call(this)||this;return r._increasingTurnStates=[],r._world=n,r._increasingTurnStates=a,r}return a(t,e),t.prototype.process=function(){return this._resetCounters(),this._increaseCounters(),!1},t.prototype._resetCounters=function(){var e,t,n,o=(null===(n=this._world.getState(l.ExplodeSystem.STATE))||void 0===n?void 0:n.data.flat())||[];try{for(var a=r(o),c=a.next();!c.done;c=a.next()){var p=c.value.entity,m=p.getEnabledComponentByClass(s.TurnCountAfterExplodeComponent);m&&p.getComponentByClass(i.ExplodeComponent)&&(m.count=0,m.reseted=!0)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},t.prototype._increaseCounters=function(){var e,t,n=this._world.getEnabledComponentByClass(p.TurnStateComponent);if(n&&this._increasingTurnStates.some(function(e){return e===n.state}))try{for(var o=r(this._world.getComponentsByClass(c.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t=e.getEnabledComponentByClass(s.TurnCountAfterExplodeComponent);t&&(t.reseted?t.reseted=!1:t.count++)})}catch(i){e={error:i}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.KEY="turnCountAfterExplodeSystem",t}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.TurnCountAfterExplodeSystem=m,cc._RF.pop()},{"./ExplodeComponent (@tapclap.match-x.engine.components)":"ExplodeComponent (@tapclap.match-x.engine.components)","./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)":[function(e,t,n){"use strict";cc._RF.push(t,"2eacafafO9d/LmZg1+EK1Jy","TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.TurnEndLockCreator=void 0;var r=e("./LockComponent (@tapclap.match-x.engine.components)"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.createLock=function(e,t){e.addComponent(r.LockComponent.KEY,new r.LockComponent(t.lock))},t}(e("./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)").EntityLockCreator);n.TurnEndLockCreator=i,cc._RF.pop()},{"./EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)":"EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)","./LockComponent (@tapclap.match-x.engine.components)":"LockComponent (@tapclap.match-x.engine.components)"}],"TurnSelector (@tapclap.match-x.engine.systems.turn-system)":[function(e,t,n){"use strict";cc._RF.push(t,"8215aUx/ANV6I3Zwqcq2v5w","TurnSelector (@tapclap.match-x.engine.systems.turn-system)"),n.__esModule=!0,n.TurnSelector=void 0;var o=function(){function e(){}return e.prototype.getTurn=function(e){return e[0]},e}();n.TurnSelector=o,cc._RF.pop()},{}],"TurnStateComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"b2665cUymxTgq1CntP/Hfqs","TurnStateComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.TurnStateComponent=void 0;var r=function(e){var t,n;function r(){var t;return(t=e.call(this)||this)._state=null,t._stateHistory=new Set,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.setState=function(e){this._state=e,this._stateHistory.add(e)},s.resetState=function(){this._state=null,this._stateHistory.clear()},s.hasState=function(e){return this._stateHistory.has(e)},i=r,(c=[{key:"state",get:function(){return this._state}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TurnStateComponent=r,r.KEY="turnState",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)":[function(e,t,n){"use strict";cc._RF.push(t,"756afbUTwNf/KUgtwnP33Jc","TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)"),n.__esModule=!0,n.TurnStateSystemConfig=n.TurnStateSystem=void 0;var o=e("./TurnStateComponent (@tapclap.match-x.engine.components)"),a=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l=function(){function e(e){var t=void 0===e?{}:e,n=t.includes,o=void 0===n?[]:n,a=t.excludes,r=void 0===a?[]:a,i=t.deps,c=void 0===i?[]:i,s=t.stop,p=void 0!==s&&s;this._includes=o,this._excludes=r,this._deps=c,this._stop=p}var t,n;return t=e,(n=[{key:"includes",get:function(){return this._includes}},{key:"excludes",get:function(){return this._excludes}},{key:"deps",get:function(){return this._deps}},{key:"stop",get:function(){return this._stop}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.TurnStateSystemConfig=l;var m=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._world=t.world,n._states=t.states,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=a.prototype;return i.preProcess=function(){var e=this._world.getEnabledComponentByClass(o.TurnStateComponent);e&&e.resetState()},i.process=function(){var e=this,t=Object.entries(this._states),n=this._world.getEnabledComponentByClass(o.TurnStateComponent),a=Object.keys(this._states),i=a.indexOf(n.state);if(n&&t.length>0)for(var c,s=r(t);!(c=s()).done;){var p=c.value,l=p[0],m=p[1],u=m.includes,d=m.excludes,y=m.deps,f=m.stop;if(0===y.length||y.every(function(e){return n.hasState(e)})){var h=u.every(function(t){return e._world.getState(t)}),g=!d.some(function(t){return e._world.getState(t)});if(h&&g&&i<a.indexOf(l)&&(n.setState(l),f))return!1}}else console.warn("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0445\u043e\u0434\u0430, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f");return!1},a}(a.PipelineProcessSystem);n.TurnStateSystem=m,m.KEY="TurnStateSystem",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./TurnStateComponent (@tapclap.match-x.engine.components)":"TurnStateComponent (@tapclap.match-x.engine.components)"}],"TurnStrategy (@tapclap.match-x.engine.systems.turn-system)":[function(e,t,n){"use strict";cc._RF.push(t,"58370eo+8tX94C/8NZWg7se","TurnStrategy (@tapclap.match-x.engine.systems.turn-system)"),n.__esModule=!0,n.TurnStrategy=void 0;var o=function(){function e(){}return e.prototype.compute=function(){return[]},e}();n.TurnStrategy=o,cc._RF.pop()},{}],"TurnSystem (@tapclap.match-x.engine.systems.turn-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d5febv0IANX0Lw/hXIUpdrF","TurnSystem (@tapclap.match-x.engine.systems.turn-system)"),n.__esModule=!0,n.TurnSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./GridComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t,n,o){var a;return(a=e.call(this)||this)._world=t,a._turnStrategy=n,a._turnSelector=o,a}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i.computeAvailableTurns=function(e){void 0===e&&(e=!0);for(var t,n=!1,o=r(this._world.getEnabledComponentsByClass(a.GridComponent));!(t=o()).done;){var i=t.value;if(i){var c=i.grid,s=c.getEnabledComponent("turn");if(s){var p=this._turnStrategy.compute(c,e);p.length>0&&(n=!0),s.availableTurns=p,s.currentAvailableTurn=this._turnSelector.getTurn(p)}}}return n},i.postProcess=function(e){this.computeAvailableTurns(e)},o}(o.PipelineProcessSystem);n.TurnSystem=p,p.KEY="turn",cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"Tutorial (@tapclap.match-x.engine.systems.tutorial-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"3b894NZvedZ1Iy4EnfNTCXy","Tutorial (@tapclap.match-x.engine.systems.tutorial-system)"),n.__esModule=!0,n.Tutorial=void 0;var a=function(){function e(e){var t=e.key,n=void 0===t?"":t,o=e.steps,a=void 0===o?[]:o;this._key=n,this._steps=a}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"steps",get:function(){return this._steps}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.Tutorial=a,cc._RF.pop()},{}],"TutorialComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"91342Hl6JpQ8JtSQ6e6OT0R","TutorialComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.TutorialComponent=void 0;var r=function(e){var t,n;function r(t){var n,o=t.key,a=void 0===o?"":o,r=t.currenStepIndex,i=void 0===r?0:r,c=t.isComplete,s=void 0!==c&&c;return(n=e.call(this)||this)._key=a,n._currentStepIndex=i,n._isComplete=s,n._tutotial=null,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.setTutorial=function(e){e&&this._key!==e.key&&(this._key=e.key,this._currentStepIndex=0,this._isComplete=!1),this._tutotial=e},s.serialize=function(){return{key:this.key,currentStepIndex:this.currentStepIndex,isComplete:this.isComplete}},i=r,(c=[{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"currentStep",get:function(){return this._tutotial?this._tutotial.steps[this._currentStepIndex]:null}},{key:"currentStepIndex",get:function(){return this._currentStepIndex},set:function(e){this._currentStepIndex=e,this._tutotial&&this._currentStepIndex>=this._tutotial.steps.length&&(this._isComplete=!0)}},{key:"isComplete",get:function(){return this._isComplete},set:function(e){this._isComplete=e}},{key:"hasTutorial",get:function(){return!!this._tutotial&&this._tutotial.steps.length>0}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Component (@tapclap.match-x.engine.components)").Component);n.TutorialComponent=r,r.KEY="tutorial",cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"TutorialConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"bdd7aA9SjZdoKFiHtBSFvfn","TutorialConfig (scripts.config)"),n.__esModule=!0,n.TUTORIALS=void 0,n.TUTORIALS={HARD_LEVEL:"hardLevelTutorial"},cc._RF.pop()},{}],"TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"6c744JAPoNZN5N4sxueFtIs","TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.TutorialDataLoader=void 0;var o=e("./DataLoader (@tapclap.match-x.engine.systems.load-system)"),a=e("./TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)"),r=e("./Tutorial (@tapclap.match-x.engine.systems.tutorial-system)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),o.prototype.load=function(e,t){var n=this._world.getEnabledComponent(e);if(n&&t){var o=t.key,i=void 0===o?"":o,c=t.currentStepIndex,s=void 0===c?0:c,p=t.isComplete,l=void 0!==p&&p,m=t.steps;m instanceof Array&&n.setTutorial(new r.Tutorial({key:i,steps:m.map(function(e){return new a.TutorialStep(e)})})),n.key=i,n.currentStepIndex=s,n.isComplete=l}},o}(o.DataLoader);n.TutorialDataLoader=c,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)","./Tutorial (@tapclap.match-x.engine.systems.tutorial-system)":"Tutorial (@tapclap.match-x.engine.systems.tutorial-system)","./TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)":"TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)"}],"TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"d0746ZBb+1e7bdYBQ1ogmaX","TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)"),n.__esModule=!0,n.TutorialHelpStrategy=void 0;var o=e("./HelpStrategy (@tapclap.match-x.engine.systems.help-system)"),a=e("./TutorialComponent (@tapclap.match-x.engine.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._getCurrentTuturialStep=function(){var e=this._world.getEnabledComponent(a.TutorialComponent.KEY);return e&&e.currentStep},i.hasHelp=function(){var t=this._getCurrentTuturialStep();return t?"booster"!==t.type:e.prototype.hasHelp.call(this)},i.hasDelay=function(){return!this._getCurrentTuturialStep()&&e.prototype.hasDelay.call(this)},o}(o.HelpStrategy);n.TutorialHelpStrategy=i,cc._RF.pop()},{"./HelpStrategy (@tapclap.match-x.engine.systems.help-system)":"HelpStrategy (@tapclap.match-x.engine.systems.help-system)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)"}],"TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d1361dX61lZQqer+ct7i2Lg","TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)"),n.__esModule=!0,n.TutorialInputHandler=void 0;var o=e("./InputHandler (@tapclap.match-x.engine.systems.input-system)"),a=e("./TutorialComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t.world,n._skip=t.skip||!1,n._gridKeys=t.gridKeys,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i._handleRawInput=function(e,t){var n=this,o=e.data.targets,a=this._gridKeys.map(function(e){return n._world.getComponent(e)}).filter(function(e){return e}).map(function(e){return e.grid});if(o)for(var i,c=r(o);!(i=c()).done;){var s=i.value;if(a.includes(t.data.grid)&&s.cells.find(function(e){return!!e.input&&t.data.grid.getCell(e.row,e.col)===t.data.cell}))return!1}return!0},i._handleBoosterInput=function(){return!1},i._handleInput=function(e,t,n){if(this._skip)return!1;var o=n.getEnabledComponent(a.TutorialComponent.KEY);if(o&&o.currentStep){var r=o.currentStep;if(r.type===e.type)switch(e.type){case"raw":return this._handleRawInput(r,e);case"booster":return this._handleBoosterInput(r,e)}return!0}return!1},i.capture=function(e,t,n){return this._handleInput(e,t,n)},i.handle=function(e,t,n){return this._handleInput(e,t,n)},o}(o.InputHandler);n.TutorialInputHandler=p,cc._RF.pop()},{"./InputHandler (@tapclap.match-x.engine.systems.input-system)":"InputHandler (@tapclap.match-x.engine.systems.input-system)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)"}],"TutorialRegistry (@tapclap.match-x.engine.systems.tutorial-system)":[function(e,t,n){"use strict";cc._RF.push(t,"08bc19GmMxSk6P16nG6BfkK","TutorialRegistry (@tapclap.match-x.engine.systems.tutorial-system)"),n.__esModule=!0,n.TutorialRegistry=void 0;var o=e("./Tutorial (@tapclap.match-x.engine.systems.tutorial-system)"),a=e("./TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)"),r=function(){function e(){}var t=e.prototype;return t._getNextTutorialData=function(e){return void 0===e&&(e=""),null},t._getTutorialData=function(){return null},t._createTutorial=function(e){return e&&e.key&&e.steps?new o.Tutorial({key:e.key,steps:e.steps.map(function(e){return new a.TutorialStep(e)})}):null},t.getTutorial=function(e){return this._createTutorial(this._getTutorialData(e))},t.getNextTutorial=function(e){return void 0===e&&(e=""),this._createTutorial(this._getNextTutorialData(e))},e}();n.TutorialRegistry=r,cc._RF.pop()},{"./Tutorial (@tapclap.match-x.engine.systems.tutorial-system)":"Tutorial (@tapclap.match-x.engine.systems.tutorial-system)","./TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)":"TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)"}],"TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"048ffM1o2VOSqH5cx2t1Stf","TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)"),n.__esModule=!0,n.TutorialScenarioBuilder=void 0;var o=e("./ScenarioBuilder (@tapclap.game-kit.scenario-manager)"),a=e("./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._backdropManager=t.backdropManager,n._targetResolver=t.targetResolver||new a.ScenarioTargetResolver,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=o.prototype;return i.showBackdrop=function(){var e=this;return this.addAction(function(){return e._backdropManager.isShown()?Promise.resolve():e._backdropManager.show()}),this},i.hideBackdrop=function(){var e=this;return this.addAction(function(){return e._backdropManager.hide()}),this},i.addHighlight=function(e){var t=this;return this.addAction(function(){for(var n,o=r(t._targetResolver.resolveTargets(e));!(n=o()).done;){var a=n.value;t._backdropManager.highlight(a)}}),this},i.removeHighlight=function(e){var t=this;return this.addAction(function(){for(var n,o=r(t._targetResolver.resolveTargets(e));!(n=o()).done;){var a=n.value;t._backdropManager.unhighlight(a)}}),this},i.setTargetPosition=function(e,t,n){var o=this;return void 0===n&&(n=cc.v2(0,1)),this.addAction(function(){var a=o._targetResolver.resolveTargets(e);if(t&&t.parent){var i=cc.v2(),c=cc.rect();if(a.length>0){c.set(a[0].getBoundingBoxToWorld());for(var s,p=r(a);!(s=p()).done;){var l=s.value;l&&l.parent&&(i.addSelf(l.parent.convertToWorldSpaceAR(l.position)),c.union(c,l.getBoundingBoxToWorld()))}}i.divSelf(a.length);var m=t.getBoundingBoxToWorld(),u=cc.v2(c.width,c.height).addSelf(cc.v2(m.width,m.height)).scaleSelf(cc.v2(.5,.5)).scaleSelf(n);i.addSelf(u),t.position=t.parent.convertToNodeSpaceAR(i)}}),this},i.attachInput=function(e){var t=this;return void 0===e&&(e=[]),this.addAction(function(){for(var n,o=r(t._targetResolver.resolveTargets(e));!(n=o()).done;){var a=n.value;t._backdropManager.attachInput(a)}}),this},i.detachInput=function(e){var t=this;return void 0===e&&(e=[]),this.addAction(function(){for(var n,o=r(t._targetResolver.resolveTargets(e));!(n=o()).done;){var a=n.value;t._backdropManager.detachInput(a)}}),this},i.addDelay=function(e){return void 0===e&&(e=1),this.addAction(function(){return new Promise(function(t){return setTimeout(t,1e3*e)})}),this},i.addWaitInput=function(e){var t=this;return void 0===e&&(e=[]),0===e.length&&(e=[cc.find("Canvas")]),this.addAction(function(){return new Promise(function(n){for(var o,a=t._targetResolver.resolveTargets(e),i=cc.Node.EventType.TOUCH_END,c=function e(){for(var t,o=r(a);!(t=o()).done;)t.value.off(i,e);n()},s=r(a);!(o=s()).done;)o.value.once(i,c,null,!0)})}),this},i.lockInput=function(){return this._backdropManager.enable(),this},i.unlockInput=function(){var e=this;return this.addAction(function(){return e._backdropManager.disable()}),this},o}(o.ScenarioBuilder);n.TutorialScenarioBuilder=p,cc._RF.pop()},{"./ScenarioBuilder (@tapclap.game-kit.scenario-manager)":"ScenarioBuilder (@tapclap.game-kit.scenario-manager)","./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)"}],"TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"10744HdFHhTfbwOdTWYRqZW","TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)"),n.__esModule=!0,n.TutorialStep=void 0;var a=function(){function e(e){var t=void 0===e?{}:e,n=t.key,o=void 0===n?"":n,a=t.type,r=void 0===a?"":a,i=t.async,c=void 0!==i&&i,s=t.completeImmediately,p=void 0!==s&&s,l=t.data,m=void 0===l?{}:l;this._key=o,this._type=r,this._async=c,this._data=m,this._isStarted=!1,this._completeImmediately=p}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._type}},{key:"async",get:function(){return this._async}},{key:"completeImmediately",get:function(){return this._completeImmediately}},{key:"data",get:function(){return this._data}},{key:"isStarted",get:function(){return this._isStarted},set:function(e){this._isStarted=e}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.TutorialStep=a,cc._RF.pop()},{}],"TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)":[function(e,t,n){"use strict";cc._RF.push(t,"16dae8ZbVFeKJhONcLE3x5u","TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)"),n.__esModule=!0,n.TutorialStepStrategy=void 0;var o=function(){function e(){}var t=e.prototype;return t.start=function(){return null},t.complete=function(){return null},e}();n.TutorialStepStrategy=o,cc._RF.pop()},{}],"TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)":[function(e,t,n){"use strict";cc._RF.push(t,"6831aqFtJ5dNp4fvGcIaKeb","TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)"),n.__esModule=!0,n.TutorialSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./TutorialComponent (@tapclap.match-x.engine.components)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(t,n,o){var a;return void 0===n&&(n={}),void 0===o&&(o=null),(a=e.call(this)||this)._world=t,a._strategies=n,a._tutorialRegistry=o,a}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._getTutorial=function(){return this._world.getEnabledComponent(a.TutorialComponent.KEY)},i._getStrategy=function(e){return this._strategies[e.type]},i.setTutorialEnable=function(e){var t=this._world.getComponent(a.TutorialComponent.KEY);t&&(t.enable=e)},i.startTutorial=function(){var e=this._getTutorial();if(e){if(this._tutorialRegistry)if(e.isComplete){var t=this._tutorialRegistry.getNextTutorial(e.key);t&&e.setTutorial(t)}else if(!e.hasTutorial){var n=this._tutorialRegistry.getTutorial(e.key);n?e.setTutorial(n):(e.isComplete=!0,this._world.setState(o.STATE_COMPLETE_TUTORIAL,!0))}var a=e.currentStep;if(a&&!a.isStarted){var r=this._getStrategy(a);if(r){var i=r.start(a,this._world);i&&(a.isStarted=!0,this._world.setState(o.STATE_START_TUTORIAL_STEP,{type:a.type,async:a.async,data:i}),a.completeImmediately&&this.completeTutorial())}}}},i.completeTutorial=function(){var e=this._getTutorial();if(e&&!e.isComplete){var t=e.currentStep;if(t&&t.isStarted){var n=this._getStrategy(t);if(n){var a=n.complete(t,this._world);a&&(e.currentStepIndex++,this._world.setState(o.STATE_COMPLETE_TUTORIAL_STEP,{type:t.type,async:t.async,data:a}),e.isComplete&&this._world.setState(o.STATE_COMPLETE_TUTORIAL,!0))}}}},i.process=function(){return this.completeTutorial(),!1},i.postProcess=function(){this.startTutorial()},o}(o.PipelineProcessSystem);n.TutorialSystem=i,i.KEY="tutorial",i.STATE_START_TUTORIAL_STEP="startTutorialStep",i.STATE_COMPLETE_TUTORIAL_STEP="completeTutorialStep",i.STATE_COMPLETE_TUTORIAL="completeTutorial",cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)"}],"TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"945a74t1dBeF4WETGjw7BLe","TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)"),n.__esModule=!0,n.TutorialTurnStrategy=void 0;var o=e("./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)"),a=e("./TutorialComponent (@tapclap.match-x.engine.components)");function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._world=t,n}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),o.prototype.compute=function(e){var t=[],n=this._world.getEnabledComponent(a.TutorialComponent.KEY);if(n&&n.currentStep){var o=n.currentStep;if("raw"===o.type){var i=o.data,c=i.input,s=i.targets;if(s)for(var p,l=r(s);!(p=l()).done;){var m=p.value,u=this._world.getEnabledComponent(m.grid);if(u&&u.grid===e){var d=m.cells.map(function(t){return t.input&&e.getCell(t.row,t.col)}),y=d[0],f=d[1];y&&f&&t.push({type:c,resolver:"tutorial",data:{},grid:e,a:y,b:f})}}}}return t},o}(o.TurnStrategy);n.TutorialTurnStrategy=p,cc._RF.pop()},{"./TurnStrategy (@tapclap.match-x.engine.systems.turn-system)":"TurnStrategy (@tapclap.match-x.engine.systems.turn-system)","./TutorialComponent (@tapclap.match-x.engine.components)":"TutorialComponent (@tapclap.match-x.engine.components)"}],"TypableTextComponent (@tapclap.game-kit.ui.typable-text)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m;function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"145bab0L21Fr7mJyf1x4VCw","TypableTextComponent (@tapclap.game-kit.ui.typable-text)"),n.__esModule=!0,n.TypableTextComponent=void 0;var h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/TypableText/TypableTextComponent"),a=_({type:cc.Float,visible:!0}),r=_({type:cc.Float,visible:!0,min:0}),i=_({type:cc.Label,visible:!0}),g(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return u(t=e.call.apply(e,[this].concat(o))||this,"_typeDelay",p,d(t)),u(t,"_skipTypeStepMultiplier",l,d(t)),u(t,"_measurer",m,d(t)),t._typeStep=1,t._currentTypeDelay=0,t._currentTypeStep=1,t._label=null,t._text=[],t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var a=o.prototype;return a.onLoad=function(){this._label=this.node.getComponent(cc.Label)},a.isTyping=function(){return this._text.length>0},a.skip=function(){this._currentTypeDelay=0,this._currentTypeStep=this._typeStep*this._skipTypeStepMultiplier},a.type=function(e){var t=this;return this._text=e.split(""),this._label.string="",this._measurer&&(this._label.overflow=cc.Label.Overflow.CLAMP,this._calculateActualFontSize(e)),this._currentTypeDelay=this._typeDelay,this._currentTypeStep=this._typeStep,new Promise(function(e){(function n(){t._text.length>0?t.node.runAction(cc.sequence([cc.delayTime(t._currentTypeDelay),cc.callFunc(function(){t._label.string+=t._text.splice(0,t._currentTypeStep||t._text.length).join("")}),cc.callFunc(n)])):e()})()})},a._calculateActualFontSize=function(e){this._measurer.lineHeight=this._label.lineHeight,this._measurer.fontSize=this._label.fontSize,this._measurer.string=e},a.update=function(){if(this._measurer){this._label.fontSize=this._measurer.actualFontSize;var e=this._measurer.actualFontSize/this._measurer.fontSize;this._label.lineHeight=Math.ceil(this._measurer.lineHeight*e)}},o}(cc.Component),p=f(s.prototype,"_typeDelay",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),l=f(s.prototype,"_skipTypeStepMultiplier",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),m=f(s.prototype,"_measurer",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c);n.TypableTextComponent=b,cc._RF.pop()},{}],"TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p;function l(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function m(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"5af45SicGtJ0ae21kU4sSiS","TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)"),n.__esModule=!0,n.TypeSpriteFrame=void 0;var u=cc._decorator,d=u.ccclass,y=u.property,f=(o=d("TypeSpriteFrame"),a=y(cc.String),r=y(cc.SpriteFrame),o((s=m((c=function(){l(this,"type",s,this),l(this,"spriteFrame",p,this)}).prototype,"type",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=m(c.prototype,"spriteFrame",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.TypeSpriteFrame=f,cc._RF.pop()},{}],"UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"3a03eplUnJTSJssblEXFwds","UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)"),n.__esModule=!0,n.UIAnimationBuilder=void 0;var o=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./AnimationData (@tapclap.match-x.cocos.animations)");function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function o(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._speed=void 0===t.speed?1:t.speed,n._holders=t.holders||[],n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var c=o.prototype;return c.build=function(){return this._createAnimations()},c._createAnimations=function(){var e=this,t=new a.FunctionAnimation(function(){e._holders.forEach(function(e){return e.component.run()})});return[[new r.AnimationData(null,t)]]},o}(o.GameActionBuilder);n.UIAnimationBuilder=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"}],"UIAnimationComponent (@tapclap.game-kit.ui.animations)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m,u,d;function y(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"2145dEZJKpbo6rBpDV2zIEC","UIAnimationComponent (@tapclap.game-kit.ui.animations)"),n.__esModule=!0,n.UIAnimationComponent=void 0;var _=cc._decorator,b=_.ccclass,C=_.property,w=_.menu,S={NONE:0,MOVEOUT:1,FADEOUT:2},E=(o=w("Game-Kit/ui/animations/UIAnimationComponent"),a=C({type:cc.Enum(S),visible:!0}),r=C({visible:function(){return this._type===S.MOVEOUT}}),i=C({visible:function(){return this._type!==S.NONE},type:cc.Float}),c=C({visible:!0}),b(s=o((p=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return y(t=e.call.apply(e,[this].concat(o))||this,"_type",l,h(t)),y(t,"_direction",m,h(t)),y(t,"_speed",u,h(t)),y(t,"_tag",d,h(t)),t._active=!0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,g(t,n);var a,r,i=o.prototype;return i.run=function(e){var t=this;if(void 0===e&&(e=!1),e===this._active)return Promise.resolve();var n=null;switch(this._type){case S.MOVEOUT:var o=new cc.Vec2(this.node.width,this.node.height).multiply(this._direction.mul(e?-1:1));n=cc.moveBy(this._speed,o).easing(cc.easeElasticInOut(1));break;case S.FADEOUT:n=(e?cc.fadeIn:cc.fadeOut)(this._speed)}return n?(this._active=e,n=cc.sequence([cc.callFunc(function(){!e&&t.getComponent(cc.Widget)&&(t.getComponent(cc.Widget).enabled=e)}),n,cc.callFunc(function(){e&&t.getComponent(cc.Widget)&&(t.getComponent(cc.Widget).enabled=e)})]),this._runAction(n)):Promise.resolve()},i.show=function(){return this.run(!0)},i.hide=function(){return this.run(!1)},i._runAction=function(e){var t=this;return new Promise(function(n){t.node.active||n();var o=cc.sequence([e,cc.callFunc(n)]);t.node.runAction(o)})},a=o,(r=[{key:"tag",get:function(){return this._tag}}])&&f(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),l=v(p.prototype,"_type",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=v(p.prototype,"_direction",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Vec2(0,0)}}),u=v(p.prototype,"_speed",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=v(p.prototype,"_tag",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=p))||s)||s);n.UIAnimationComponent=E,cc._RF.pop()},{}],"UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"d30fc/bXVVTLI4PC+/U0skg","UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)"),n.__esModule=!0,n.UIAnimationSceneHolder=void 0;var o,a,r,i,c,s,p,l=e("./UIAnimationComponent (@tapclap.game-kit.ui.animations)");function m(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function u(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var d=cc._decorator,y=d.ccclass,f=d.property,h=(o=y("UIAnimationSceneHolder"),a=f(),r=f(l.UIAnimationComponent),o((s=u((c=function(){m(this,"key",s,this),m(this,"component",p,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=u(c.prototype,"component",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=c))||i);n.UIAnimationSceneHolder=h,cc._RF.pop()},{"./UIAnimationComponent (@tapclap.game-kit.ui.animations)":"UIAnimationComponent (@tapclap.game-kit.ui.animations)"}],"UIController (@tapclap.game-kit.ui)":[function(e,t,n){"use strict";cc._RF.push(t,"1fe67WdebFQVo/1yPysk7ir","UIController (@tapclap.game-kit.ui)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.UIController=n.UIAnimationHolder=void 0;var i=e("./UIAnimationComponent (@tapclap.game-kit.ui.animations)"),c=e("./SceneHolder (@tapclap.game-kit.scene-manager)"),s=cc._decorator,p=s.ccclass,l=s.property,m=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.highlight=null,t}return a(t,e),r([l({type:cc.Node})],t.prototype,"highlight",void 0),r([p("UIAnimationHolder")],t)}(c.SceneHolder);n.UIAnimationHolder=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._holders=[],t._animationNode=null,t}return a(t,e),t.prototype.getHolder=function(e){return this._holders.find(function(t){return t.key===e})||null},t.prototype.addHolder=function(e){this._holders.push(e)},t.prototype.getAnimationNode=function(){return this._animationNode},t.prototype.show=function(e){return void 0===e&&(e=[]),Promise.all(this._getUIElements(e).map(function(e){return e.show()})).then()},t.prototype.hide=function(e){return void 0===e&&(e=[]),Promise.all(this._getUIElements(e).map(function(e){return e.hide()})).then()},t.prototype._getUIElements=function(e){return cc.find("Canvas").getComponentsInChildren(i.UIAnimationComponent).filter(function(e){return e.node.activeInHierarchy}).filter(function(t){var n=t.tag;return!(e.length>0)||e.includes(n)})},r([l({type:[u],visible:!0})],t.prototype,"_holders",void 0),r([l({type:cc.Node,visible:!0})],t.prototype,"_animationNode",void 0),r([p,m("Game-Kit/UI/UIController")],t)}(cc.Component);n.UIController=d,cc._RF.pop()},{"./SceneHolder (@tapclap.game-kit.scene-manager)":"SceneHolder (@tapclap.game-kit.scene-manager)","./UIAnimationComponent (@tapclap.game-kit.ui.animations)":"UIAnimationComponent (@tapclap.game-kit.ui.animations)"}],"UIElement (scripts.common.components)":[function(e,t,n){"use strict";cc._RF.push(t,"6214687fAdUU7pn9USiAgVF","UIElement (scripts.common.components)");var o=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.UIElement=void 0;var a=cc._decorator,r=a.ccclass,i=a.property,c=function(){function e(){this.key="",this.element=null}return o([i()],e.prototype,"key",void 0),o([i(cc.Node)],e.prototype,"element",void 0),o([r("UIElement")],e)}();n.UIElement=c,cc._RF.pop()},{}],"UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"4320ctWrf5RDbIYZ3a+ZdzR","UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.UIHolderKeyResolver=void 0;var o=function(){function e(e){var t=e.aliases,n=void 0===t?{}:t,o=e.defaultHolderKey,a=void 0===o?null:o;this._aliases={},this._aliases=n,this._defaultHolderKey=a}return e.prototype.resolve=function(e){return this._aliases[e]||this._defaultHolderKey},e}();n.UIHolderKeyResolver=o,cc._RF.pop()},{}],"UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"8931b3o2bpfXK5pPNh+M4AK","UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.UIHolderKeyUserItemResolver=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.resolve=function(e){var t=r(e.split(":"),1)[0];return this._aliases[e]?this._aliases[e]:this._aliases[t]?this._aliases[t]:this._defaultHolderKey},t}(e("./UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)").UIHolderKeyResolver);n.UIHolderKeyUserItemResolver=i,cc._RF.pop()},{"./UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)":"UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)"}],"UIManager (@tapclap.game-kit.ui)":[function(e,t,n){"use strict";cc._RF.push(t,"7b567BlwI1bVpSLDjmSJGHP","UIManager (@tapclap.game-kit.ui)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UIManager=void 0;var a=function(){function e(e){this._animations=[],this._backdropManager=e.backdropManager,this._uiController=null,this._animations=[]}return e.prototype.setController=function(e){this._uiController=e},e.prototype.showUI=function(e){return void 0===e&&(e=[]),this._uiController.show(e)},e.prototype.hideUI=function(e){return void 0===e&&(e=[]),this._uiController.hide(e)},e.prototype._getHolder=function(e){return this._uiController.getHolder(e)},e.prototype.addHolder=function(e){return this._uiController.addHolder(e)},e.prototype.addClaimAnimation=function(e){this._animations.push(e)},e.prototype.processAnimation=function(){var e,t,n=this,a=[],r=this._uiController.getAnimationNode(),i=function(e,t,o,i,s,p,l,m,u,d,y,f){var h=p?cc.instantiate(e):e;if(l){for(var g=1,v=e;v&&v!==r;)g*=v.scale,v=v.parent;h.scale=g}else h.scale=e.scale;var _="string"==typeof o&&c._getHolder(o),b={node:_&&_.node||o,highlightNode:_&&_.highlight};if(!(b.node instanceof cc.Node))throw new Error("Target holder not is cc.Node instance");var C=b.node,w=b.highlightNode||b.node,S=h.getBoundingBoxToWorld(),E=C.getBoundingBoxToWorld(),x=e.parent.convertToWorldSpaceAR(e.getPosition()),A=r.convertToNodeSpaceAR(x);h.setPosition(A),p?r.addChild(h):e.parent=r,c._backdropManager.highlight(h);var O=new Promise(function(e){var o=C.parent.convertToWorldSpaceAR(C.getPosition()),a=r.convertToNodeSpaceAR(o),c=new cc.Vec2(A.x+u.x,A.y+u.y),p=cc.Vec2.distance(A,a),l=p/(700*Math.max(Math.exp(7e-4*p)-.6,1)),g=Math.min(h.scale,Math.min(Math.min(1,E.width/S.width),Math.min(1,E.height/S.height))),v=cc.sequence([cc.delayTime(s),cc.callFunc(function(){y&&y(h)}),cc.spawn([cc.callFunc(function(){i&&(n._backdropManager.highlight(w),n._backdropManager.detachInput(w)),t&&h.runAction(cc.sequence([cc.delayTime(l/100*95),cc.fadeOut(l/100*5)]))}),cc.bezierTo(l,[A,c,a]),cc.scaleTo(l,m||g).easing(cc.easeIn(2))]),cc.callFunc(function(){t&&(n._backdropManager.unhighlight(h),h.destroy()),cc.isValid(C)&&(f&&f(),d&&C.runAction(cc.sequence([cc.scaleTo(.15,1.2,1.2),cc.scaleTo(.15,1,1)])),i&&n._backdropManager.unhighlight(w),e())})]);h.runAction(v)});a.push(O)},c=this;try{for(var s=o(this._animations),p=s.next();!p.done;p=s.next()){var l=p.value,m=l.node,u=l.unhighlightNodeAfter,d=void 0===u||u,y=l.target,f=l.highlightTarget,h=void 0===f||f,g=l.stepTime,v=void 0===g?0:g,_=l.clone,b=void 0===_||_,C=l.relativeScale,w=void 0!==C&&C,S=l.scaleTo,E=l.lerpPositionCoefficient,x=void 0===E?cc.v2(0,400):E,A=l.bounceAnimation;i(m,d,y,h,v,b,w,S,x,void 0===A||A,l.onStartAnimationCallback,l.callback)}}catch(O){e={error:O}}finally{try{p&&!p.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return this._animations=[],Promise.all(a)},e.prototype.playClaimAnimations=function(e){var t=this;return void 0===e&&(e=!0),Promise.resolve().then(function(){return e&&t.showUI()}).then(function(){return t.processAnimation()})},e}();n.UIManager=a,cc._RF.pop()},{}],"URI (@tapclap.utils-js.url)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"c5f0aZlXHVCvI7Naz+XuwrF","URI (@tapclap.utils-js.url)"),n.__esModule=!0,n.URI=void 0;var c=function(){function e(e,t,n){void 0===e&&(e=[]),void 0===t&&(t={}),void 0===n&&(n={}),this._options={separator:"/",isAbsolute:!0},this._segments=[],this._queryData={},this._segments=this._normalizeSegments(e),this._queryData=t,Object.assign(this._options,n)}var t,n,a=e.prototype;return a.addSegment=function(e){this._segments=this._segments.concat(this._normalizeSegments(e))},e.createPath=function(t,n,o){return void 0===n&&(n={}),e.create(t,n,o).create()},e.create=function(t,n,o){return void 0===n&&(n={}),new e([t],n,o)},a._normalizeSegments=function(e){for(var t,n=[],a=this.separator,r=new RegExp("\\"+a+"{2,}","gm"),i=new RegExp("^\\"+a,"gm"),c=new RegExp("\\"+a+"$","gm"),s=o(e);!(t=s()).done;){var p=t.value;void 0!==p&&(p=p.toString().replace(r,"/",p).replace(i,"",p).replace(c,"",p),n.push.apply(n,p.split(this.separator)))}return n},a.create=function(){var e=this.query,t=[this.path];return e&&t.push("?",e),t.join("")},t=e,(n=[{key:"separator",get:function(){return this._options.separator}},{key:"path",get:function(){var e=[];this._segments.length>0&&e.push(this._segments.join(this.separator));var t=e.join(this.separator);return(this._options.isAbsolute?this.separator:"")+t}},{key:"query",get:function(){var e=[],t=Object.keys(this._queryData);if(t.length){for(var n,a=o(t);!(n=a()).done;){var r=n.value,i=this._queryData[r];switch(!0){case Array.isArray(i):for(var c,s=o(i);!(c=s()).done;){var p=c.value;e.push([r+"[]",p].join("="))}break;case!Array.isArray(i)&&"object"==typeof i:for(var l=0,m=Object.keys(i);l<m.length;l++){var u=m[l];e.push([r+"["+u+"]",i[u]].join("="))}break;default:i&&e.push([r,i].join("="))}}return e.join("&")}return""}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.URI=c,cc._RF.pop()},{}],"URL (@tapclap.utils-js.url)":[function(e,t,n){"use strict";cc._RF.push(t,"2f927SQ3ohJNrExi3UsjXdi","URL (@tapclap.utils-js.url)"),n.__esModule=!0,n.URL=void 0;var o=e("./URLSearchParams (@tapclap.utils-js.url)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(e){var t=/^(?:(https?:)\/\/?([^:/$]{1,})(?::(\d{1,}))?(?:($|\/(?:[^?#]{0,}))?(?:\?((?:[^#]{1,}))?)?(?:(#(?:.*)?)?|$)))$/gi.exec(e.toString()),n=t[0],a=t[1],r=t[2],i=t[3],c=t[4],s=t[5],p=t[6];this._href=n,this._protocol=a,this._hostname=r,this._port=[80,433].includes(i)?"":i,this._pathname=c||"",this._search=s||"",this._searchParams=new o.URLSearchParams(this._search),this._hash=p||""}var t,n,r=e.prototype;return r.toString=function(){var e="";return this.protocol&&(e+=this.protocol+"//"),this.hostname&&(e+=this.hostname),this.port&&(e+=":"+this.port),this.pathname&&(e+=this.pathname),this.searchParams.toString()&&(e+="?"+this.searchParams.toString()),this.hash&&(e+=this.hash),e},r.toJSON=function(){return JSON.stringify(this.toString())},t=e,(n=[{key:"protocol",get:function(){return this._protocol},set:function(e){this._protocol=e}},{key:"pathname",get:function(){return this._pathname},set:function(e){this._pathname=e}},{key:"hostname",get:function(){return this._hostname},set:function(e){this._hostname=e}},{key:"port",get:function(){return this._port},set:function(e){this._port=e}},{key:"searchParams",get:function(){return this._searchParams}},{key:"href",get:function(){return this._href},set:function(e){this._href=e}},{key:"search",get:function(){return this._search},set:function(e){this._search=e,this._searchParams=new o.URLSearchParams(this._search)}},{key:"hash",get:function(){return this._hash},set:function(e){this._hash=e}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.URL=r,window.URL=r,cc._RF.pop()},{"./URLSearchParams (@tapclap.utils-js.url)":"URLSearchParams (@tapclap.utils-js.url)"}],"URLSearchParams (@tapclap.utils-js.url)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}cc._RF.push(t,"dd8d8HKPWJNA703RVxonUXQ","URLSearchParams (@tapclap.utils-js.url)"),n.__esModule=!0,n.URLSearchParams=void 0;var i=function(){function e(e){if(this._map=new Map,(e=e.replace(/^\?/g,"")).length>0)for(var t,n=o(e.split("&"));!(t=n()).done;){var a=t.value.split("="),r=a[0],i=a[1];this.append(r,i)}}var t=e.prototype;return t.append=function(e,t){var n=this._map.get(e)||[];n.push(t),this._map.set(e,n)},t.delete=function(e){return this._map.delete(e)},t.entries=function(){for(var e,t=[],n=o(this._map.entries());!(e=n()).done;)for(var a,r=e.value,i=r[0],c=o(r[1]);!(a=c()).done;){var s=a.value;t.push([i,s])}return t},t.forEach=function(e){for(var t,n=o(this.entries());!(t=n()).done;){var a=t.value;e(a[0],a[1])}},t.get=function(e){var t=this._map.get(e);return t?t[0]:t},t.getAll=function(e){return this._map.get(e)},t.has=function(e){return this._map.has(e)},t.keys=function(){for(var e,t=[],n=o(this.entries());!(e=n()).done;){var a=e.value[0];t.push(a)}return t},t.set=function(e,t){this.delete(e),this.append(e,t)},t.sort=function(){var e=this.entries();e.sort(function(e,t){var n=e[0],o=t[0];return n.localeCompare(o)}),this._map=new Map;for(var t,n=o(e);!(t=n()).done;){var a=t.value,r=a[0],i=a[1];this.append(r,i)}},t.toString=function(){for(var e,t=[],n=o(this.entries());!(e=n()).done;){var a=e.value;t.push(a.join("="))}return t.join("&")},t.values=function(){for(var e,t=[],n=o(this.entries());!(e=n()).done;){var a=e.value[1];t.push.apply(t,a)}return t},e}();n.URLSearchParams=i,cc._RF.pop()},{}],"UiResourceConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"95e96xDbY5fmou9WFz/vVcU","UiResourceConfig (scripts.config)"),n.__esModule=!0,n.UiResourcesConfig=void 0,n.UiResourcesConfig=["prefabs/ui/Multiplier","prefabs/ui/MultiplierStar","prefabs/ui/SuperPart","prefabs/ui/SuperPart2","prefabs/ui/GoalCounter","prefabs/ui/BoosterButton","prefabs/ui/Avatar","resources/clips/bounce","resources/clips/explode","resources/clips/select","prefabs/windows/win","prefabs/windows/lose","prefabs/boosters/trowel","prefabs/boosters/cat","prefabs/boosters/cart","prefabs/boosters/cat-entity-effect","prefabs/ui/candy-spinner","prefabs-entities/peacock/feather","prefabs-entities/nut/nut-shell-decorator","prefabs-entities/bubblegum/bubblegum-explosion","prefabs/transition/cloud","prefabs/ui/MultiplierHilight","prefabs/ui/LoadWindowSpinner"],cc._RF.pop()},{}],"UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"cad37WaWJlVWos1BUb5XNRE","UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UnlockAfterExplodeComponent=void 0;var r=function(e){function t(t){var n=t.turnCount,o=e.call(this)||this;return o._turnCount=n,o}return a(t,e),Object.defineProperty(t.prototype,"turnCount",{get:function(){return this._turnCount},enumerable:!1,configurable:!0}),t.KEY="unlockOnExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.UnlockAfterExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"ad4d0xv68lYrq3SSEF3zjEM","UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UnlockAfterExplodeSystem=void 0;var i=e("./GridComponent (@tapclap.match-x.engine.components)"),c=e("./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)"),s=e("./UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)"),p=function(e){function t(t){var n=t.world,o=e.call(this,{world:n})||this;return o._world=n,o}return a(t,e),t.prototype.process=function(){var e,t,n=this,o=function(e){e.forEachEntities(function(t,o){var a=t.getEnabledComponentByClass(s.UnlockAfterExplodeComponent),r=t.getComponentByClass(c.TurnCountAfterExplodeComponent);a&&r&&r.count>a.turnCount&&n._unlock(e,o,t)})};try{for(var a=r(this._world.getEnabledComponentsByClass(i.GridComponent)),p=a.next();!p.done;p=a.next())o(p.value.grid)}catch(l){e={error:l}}finally{try{p&&!p.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return!1},t.KEY=Symbol("UnlockAfterExplode"),t}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.UnlockAfterExplodeSystem=p,cc._RF.pop()},{"./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)":"TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","./UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)":"UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)"}],"UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"93c9eutM6dYG6s9tdvCdICp","UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UnlockAnimationBuilder=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.build=function(){return[]},t}(e("./LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)").LockAnimationBuilder);n.UnlockAnimationBuilder=r,cc._RF.pop()},{"./LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)":"LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)"}],"UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"d8a70O8AaddgZ1YVkgJWp10","UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)"),n.__esModule=!0,n.UnlockOnExplodeSystem=void 0;var o=e("./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.process=function(){var e=this._world.getState(o.ExplodeSystem.STATE);if(e&&e.data)for(var t,n=a(e.data.flat());!(t=n()).done;){var r=t.value,i=r.cell,c=r.entity;r.remove&&this._unlock(null,i,c)}return!1},r}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.UnlockOnExplodeSystem=s,s.KEY=Symbol("UnlockOnExplodeSystem.KEY"),cc._RF.pop()},{"./ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)":"ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)"}],"UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)":[function(e,t,n){"use strict";cc._RF.push(t,"11095u+5KhSSLLtFEJuR72j","UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)"),n.__esModule=!0,n.UnlockOnWalkSystem=void 0;var o=e("./WalkSystem (@tapclap.match-x.engine.systems.walk-system)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.process=function(){var e=this._world.getState(o.WalkSystem.STATE);if(e&&e.data)for(var t,n=a(e.data);!(t=n()).done;){var r=t.value,i=r.cell,c=r.entity;this._unlock(null,i,c)}return!1},r}(e("./LockSystem (@tapclap.match-x.engine.systems.lock-system)").LockSystem);n.UnlockOnWalkSystem=s,s.KEY=Symbol("UnlockOnWalkSystem.KEY"),cc._RF.pop()},{"./LockSystem (@tapclap.match-x.engine.systems.lock-system)":"LockSystem (@tapclap.match-x.engine.systems.lock-system)","./WalkSystem (@tapclap.match-x.engine.systems.walk-system)":"WalkSystem (@tapclap.match-x.engine.systems.walk-system)"}],"UpdateCakeRewardMetaModuleAction (scripts.actions)":[function(e,t,n){"use strict";cc._RF.push(t,"b8ca6GFSopZNqLRRnAYEO0A","UpdateCakeRewardMetaModuleAction (scripts.actions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UpdateCakeRewardMetaModuleAction=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._moduleResolver=null,n._moduleResolver=t.moduleResolver,n}return a(t,e),t.prototype.run=function(){var e=this._moduleResolver.get();return e&&e.updatePhaseState(),Promise.resolve()},t}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.UpdateCakeRewardMetaModuleAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"30d56LwGVRY2JhBNNm9ESRZ","UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)"),n.__esModule=!0,n.UpdateCounterStrategy=void 0;var o=function(){function e(e){this._world=e}var t=e.prototype;return t.updateOnProcess=function(){},t.updateOnPostProcess=function(){},t.reset=function(){},e}();n.UpdateCounterStrategy=o,cc._RF.pop()},{}],"UpdateMultiplierSystem (@tapclap.match-x.engine.systems)":[function(e,t,n){"use strict";cc._RF.push(t,"6c180+EeZxQb6n5uzC6q4OI","UpdateMultiplierSystem (@tapclap.match-x.engine.systems)"),n.__esModule=!0,n.UpdateMultiplierSystem=void 0;var o=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),a=e("./MultiplierComponent (@tapclap.match-x.engine.components)"),r=e("./BossMultiplierComponent (@tapclap.match-x.engine.components)"),i=e("./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function o(t,n){var o;return void 0===n&&(n={}),(o=e.call(this)||this)._world=t,o._onlyWorldGoals=void 0===n.onlyWorldGoals||n.onlyWorldGoals,o}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.process=function(){for(var e=this._world.getEnabledComponent("tiles").grid,t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++)for(var o,s=c(e.getCell(t,n).entities);!(o=s()).done;){var p=o.value,l=p.getEnabledComponent("goal");if((!p.getEnabledComponent(r.BossMultiplierComponent.KEY)||!l)&&(!l||l.goal&&l.goal.collector!==this._world)){var m=p.getComponent(a.MultiplierComponent.KEY);m&&(m.reset(),this._world.pushState(i.MultiplierSystem.STATE,{targetEntity:p,value:m.getValue(),minValue:m.getMinValue()})),p.removeComponent(a.MultiplierComponent.KEY)}}return!1},o}(o.PipelineProcessSystem);n.UpdateMultiplierSystem=m,m.KEY="updateMultiplier",cc._RF.pop()},{"./BossMultiplierComponent (@tapclap.match-x.engine.components)":"BossMultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierComponent (@tapclap.match-x.engine.components)":"MultiplierComponent (@tapclap.match-x.engine.components)","./MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)":"MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"e22d2n4yg1bnJGIbRVOTDhP","UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)"),n.__esModule=!0,n.UpdateOfferStateAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._offerKey=t.offerKey,n._offer=t.offer,n._offers=t.offersModuleResolver.get(),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._offerKey&&this._offer&&this._offers&&this._offers.updateState(this._offerKey,this._offer),e.prototype.run.call(this)},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.UpdateOfferStateAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"28eadcfD0RVZK8rc/qXybS7","UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UpdateZIndexAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),p=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),l=function(e){function t(t){var n=t.entityTypes,o=void 0===n?[]:n,a=e.call(this)||this;return a._entityTypes=o,a}return a(t,e),t.prototype.build=function(e){var t,n,o=[];if(!e.data)return[o];var a=function(e){if(!i._entityTypes.includes(e.type))return"continue";var t=e.getComponentByClass(p.RenderComponent).node,n=new s.FunctionAnimation(function(){t.zIndex++});o.push(new c.AnimationData(e,n))},i=this;try{for(var l=r(e.data.flat()),m=l.next();!m.done;m=l.next())a(m.value.entity)}catch(u){t={error:u}}finally{try{m&&!m.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return[o]},t}(i.GameActionBuilder);n.UpdateZIndexAnimationBuilder=l,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"User (@tapclap.game-kit.user-manager)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"0ad36Sork1BXZz6Ot+5BF0H","User (@tapclap.game-kit.user-manager)"),n.__esModule=!0,n.User=void 0;var a=function(){function e(e){void 0===e&&(e={}),this._id=null,this._firstLoginAt=new Date,this._lastLoginAt=new Date,this._isFirstVisit=!1,this._items=e.items,this._settings=e.settings}var t,n;return e.prototype.init=function(){return Promise.all([this._settings.init(),this._items.init()])},t=e,(n=[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"firstLoginAt",get:function(){return this._firstLoginAt},set:function(e){this._firstLoginAt=e}},{key:"lastLoginAt",get:function(){return this._lastLoginAt},set:function(e){this._lastLoginAt=e}},{key:"isFirstVisit",get:function(){return this._isFirstVisit},set:function(e){this._isFirstVisit=e}},{key:"items",get:function(){return this._items}},{key:"settings",get:function(){return this._settings}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.User=a,cc._RF.pop()},{}],"UserAttributesResolver (scripts.user)":[function(e,t,n){"use strict";cc._RF.push(t,"a45eaO2mdNeCZf84+PIWah+","UserAttributesResolver (scripts.user)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.UserAttributesResolver=void 0;var r=function(){function e(e){var t=e.userManager,n=e.attributesMap;this._userManager=t,this._attributesMap=n||{}}return e.prototype.getAttributes=function(){var e,t,n=this._userManager.getCurrentUser(),r={};if(!n)throw new Error("CurrentUser not defined in UserManager");try{for(var i=o(Object.entries(this._attributesMap)),c=i.next();!c.done;c=i.next()){var s=a(c.value,2),p=s[0],l=s[1];switch(typeof l){case"string":r[l]=n[p];break;case"function":var m=a(l(n[p]),2),u=m[0],d=m[1];r[u]=d;break;default:r[p]=n[p]}}}catch(y){e={error:y}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e}();n.UserAttributesResolver=r,cc._RF.pop()},{}],"UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"d3ab90flwFbY6wzPWQSO6h+","UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UserDevConsoleMenuGenerator=void 0;var r=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),i=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),c=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=function(e){function t(t){var n=e.call(this)||this;return n._startScene=t.startScene,n._itemsGenerator=t.itemsGenerator,n._runMetaGameActionKey=t.runMetaGameActionKey,n._userService=t.userService,n._storage=t.storage,n._userManager=t.userManager,n._sceneManager=t.sceneManager,n._actionManager=t.actionManager,n._metaGameManager=t.metaGameManager,n}return a(t,e),t.prototype.generate=function(){var e=this,t=this._itemsGenerator.generate(),n=[];for(var o in t)t[o]&&n.push(t[o]);return{reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new c.CallbackDevConsoleCommand({callback:function(){if(!e._userService)return console.error("userService not passed in UserDevConsoleMenuGenerator options");e._userService.resetUser(e._userManager.getCurrentUser()).finally(function(){return e._storage?e._storage.clear():Promise.resolve()}).finally(function(){return e._sceneManager.loadScene(e._startScene)}).catch(console.error)}})},lastLoginDate:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u0442\u0443 \u043b\u043e\u0433\u0438\u043d\u0430",command:new i.InputCallbackDevConsoleCommand({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434",callback:function(t){return e._userManager.getCurrentUser().lastLoginAt=new Date((new Date).getTime()-864e5*t),e._actionManager.run(e._runMetaGameActionKey,{metaGame:e._metaGameManager.getCurrentMetaGame()})}})},items:{title:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b",items:n}}},t}(r.DevConsoleMenuGenerator);n.UserDevConsoleMenuGenerator=s,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"}],"UserFactory (@tapclap.game-kit.user-service.factory)":[function(e,t,n){"use strict";cc._RF.push(t,"eef13xIhhtXY76RCmbYEQ9i","UserFactory (@tapclap.game-kit.user-service.factory)"),Object.defineProperty(n,"__esModule",{value:!0}),n.UserFactory=void 0;var o="User",a=function(){function e(e){this._di=e.di,this._diInstanceUserKey=e.diInstanceUserKey||o}return e.prototype.create=function(e){var t=this._di.create(this._diInstanceUserKey);return t.id=e.id,t.isFirstVisit=e.isNew||!1,t.firstLoginAt=new Date(e.firstLoginAt),t},e}();n.UserFactory=a,cc._RF.pop()},{}],"UserIdWindowLayoutComponent (scripts.windows.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"af279DyUiZEbY//XYR/Rpdf","UserIdWindowLayoutComponent (scripts.windows.layouts)"),n.__esModule=!0,n.UserIdWindowLayoutComponent=void 0;var o,a,r,i,c=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m,u,d,y,f=cc._decorator,h=f.ccclass,g=(o=(0,f.property)({type:cc.Label,visible:!0}),h((r=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s(t=e.call.apply(e,[this].concat(o))||this,"_label",i,p(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),o.prototype.setId=function(e){this._label.string=e},o}(c.WindowLayoutComponent),m=r.prototype,u=[o],d={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},y={},Object.keys(d).forEach(function(e){y[e]=d[e]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),void 0===(y=u.slice().reverse().reduce(function(e,t){return t(m,"_label",e)||e},y)).initializer&&(Object.defineProperty(m,"_label",y),y=null),i=y,a=r))||a);n.UserIdWindowLayoutComponent=g,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"UserInfo (@tapclap.sdk-x.social-service)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"2f3fbGmi75JybpvDa0qjz9Z","UserInfo (@tapclap.sdk-x.social-service)"),n.__esModule=!0,n.UserInfo=void 0;var a=function(){function e(e){this._data=e}var t,n;return t=e,(n=[{key:"id",get:function(){return this._data.id}},{key:"name",get:function(){return this._data.name}},{key:"photo",get:function(){return this._data.photo}},{key:"sex",get:function(){return this._data.sex||e.SEX_NONE}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.UserInfo=a,a.SEX_MALE="male",a.SEX_FEMALE="female",a.SEX_NONE="none",cc._RF.pop()},{}],"UserItem (@tapclap.game-kit.user-item-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"f6cb2maWalXba0R8KWqPYCl","UserItem (@tapclap.game-kit.user-item-manager)"),n.__esModule=!0,n.UserItem=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)"),a=e("./Model (@tapclap.utils-js.data)");function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(r=e.call(this)||this)._spec=t.spec,r._name=t.name,r._availability=t.availability,r._syncable=void 0===t.syncable||t.syncable,r._model=new a.Model(Object.assign(((o={})[a.Model.UPDATED_AT_KEY]=t[a.Model.UPDATED_AT_KEY],o),n)),r._model.on("change",function(e){r.emit("change",i(r),e.getPrevProperties(),e.getPatchOperations())}),r}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var s,p,l=o.prototype;return l.isAvailable=function(){return!this._availability||this._availability.isAvailable()},l.merge=function(e){return e},l.substract=function(){return null},l.replace=function(e){return e},l.serialize=function(){return{spec:this._spec,name:this._name,updatedAt:this.updatedAt.toISOString()}},s=o,(p=[{key:"type",get:function(){return this.constructor.KEY},set:function(e){this._type=e}},{key:"availability",get:function(){return this._availability}},{key:"spec",get:function(){return this._spec},set:function(e){this._spec=e}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"updatedAt",get:function(){return this._model.updatedAt}},{key:"syncable",get:function(){return this._syncable}}])&&r(s.prototype,p),Object.defineProperty(s,"prototype",{writable:!1}),o}(o.EventEmitter);n.UserItem=s,s.KEY="item",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./Model (@tapclap.utils-js.data)":"Model (@tapclap.utils-js.data)"}],"UserItemActionCondition (scripts.action-conditions)":[function(e,t,n){"use strict";cc._RF.push(t,"34a5c5BMBZTr5fg+fFoLjFt","UserItemActionCondition (scripts.action-conditions)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UserItemActionCondition=void 0;var i=function(e){function t(t){var n=e.call(this)||this;return n._userManager=t.userManager,n._rules=t.rules,n}return a(t,e),t.prototype.check=function(){var e=this;return Promise.resolve().then(function(){var t,n;try{for(var o=r(e._rules),a=o.next();!a.done;a=o.next()){var i=a.value,c=i.spec,s=i.name,p=i.exists,l=e._userManager.getCurrentUser().items.get(c,s);if(Boolean(l)!==p)return!1}}catch(m){t={error:m}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0})},t}(e("./ActionCondition (@tapclap.game-kit.action-manager)").ActionCondition);n.UserItemActionCondition=i,cc._RF.pop()},{"./ActionCondition (@tapclap.game-kit.action-manager)":"ActionCondition (@tapclap.game-kit.action-manager)"}],"UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)":[function(e,t,n){"use strict";function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"de20eN3hdxMkrEpf+iY6fb5","UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)"),n.__esModule=!0,n.UserItemAttemptsMetaModuleService=void 0;var c=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._userManager=t.userManager,n._stateFactory=t.stateFactory,n._propeties=t.properties,n._state=null,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var r=a.prototype;return r._createState=function(e,t){var n=this._userManager.getCurrentUser().items;return this._stateFactory.create(e,[{type:e,item:t,userItemManager:n}],{rawWrap:!0,merge:!0})},r._updateState=function(){for(var e,t=this._userManager.getCurrentUser(),n=o(this._propeties);!(e=n()).done;){var a=e.value,r=a.spec,i=a.name,c=t.items.get(r,i);if(c&&c.isAvailable()){null!==this._state&&this._state.type===i||(this._state=this._createState(i,c));break}}},r.getAttemptsState=function(){return this._updateState(),this._state},a}(e("./AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)").AttemptsMetaModuleService);n.UserItemAttemptsMetaModuleService=c,cc._RF.pop()},{"./AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)":"AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)"}],"UserItemAvailability (@tapclap.game-kit.user-item-manager)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}cc._RF.push(t,"ab826+Xa2hbupFEQEEP+zzA","UserItemAvailability (@tapclap.game-kit.user-item-manager)"),n.__esModule=!0,n.UserItemAvailability=void 0;var a=function(){function e(){}var t,n;return e.prototype.isAvailable=function(){return!0},t=e,(n=[{key:"value",get:function(){throw new Error("Method getValue not implemented")}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();n.UserItemAvailability=a,cc._RF.pop()},{}],"UserItemCollection (@tapclap.game-kit.user-item-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"b283eyp7cVYsb42/b/v6X63","UserItemCollection (@tapclap.game-kit.user-item-manager)"),n.__esModule=!0,n.UserItemCollection=void 0;var o=function(){function e(e){var t=e.factory;this._factory=t,this._items=new Map}var t=e.prototype;return t.get=function(e,t){return this._items.get(this._getKey(e,t))},t.add=function(e){var t=this._items.get(this._getKeyFromItem(e));return t?t.merge(this.createItem(e)):this.set(e)},t.substract=function(e){var t=this._getItem(e);return t?t.substract(this.createItem(e)):null},t.set=function(e){var t=this._getItem(e),n=this.createItem(e);return t?t.replace(n):(this._items.set(this._getKeyFromItem(e),n),n)},t.delete=function(e,t){return this._items.delete(this._getKey(e,t))},t.has=function(e,t){return this._items.has(this._getKey(e,t))},t.values=function(){return this._items.values()},t._getKeyFromItem=function(e){return this._getKey(e.spec,e.name)},t._getKey=function(e,t){return[e,t].join(":")},t._getItem=function(e){return this._items.get(this._getKeyFromItem(e))},t.createItem=function(e){return this._factory.create(e)},e}();n.UserItemCollection=o,cc._RF.pop()},{}],"UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)":[function(e,t,n){"use strict";cc._RF.push(t,"fd145XIFq5Y2o5+vfIXwsB9","UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.UserItemDevConsoleMenuGenerator=void 0;var i=e("./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)"),c=e("./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),s=e("./CountableUserItem (@tapclap.game-kit.user-item-manager.items)"),p=e("./RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)"),l=e("./TimedUserItem (@tapclap.game-kit.user-item-manager.items)"),m=e("./UserItem (@tapclap.game-kit.user-item-manager)"),u=e("./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)"),d=function(e){function t(t){var n=e.call(this)||this;return n._factory=t.factory,n._titles=t.titles,n._excludeKeys=t.excludeKeys||[],n._userManager=t.userManager,n}return a(t,e),t.prototype.generate=function(){var e,t,n={},o=this._factory.getAllItemsData(),a=this._userManager.getCurrentUser(),i=function(e,t,o){var r=e+":"+t;if(d._excludeKeys.includes(r))return"continue";var i={};switch(o){case p.RestorableCountableUserItem:case s.CountableUserItem:i={command:new c.InputCallbackDevConsoleCommand({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",callback:function(n){a.items.add({spec:e,name:t,amount:parseInt(n)},{overwrite:!0})}})};break;case l.TimedUserItem:i={items:{change:{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",command:new c.InputCallbackDevConsoleCommand({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d\u0443\u0442",callback:function(n){a.items.add({spec:e,name:t,startAt:new Date,duration:60*parseInt(n)},{overwrite:!0})}})},reset:{title:"\u0421\u0431\u0440\u043e\u0441",command:new u.CallbackDevConsoleCommand({callback:function(n){a.items.add({spec:e,name:t,startAt:new Date,duration:0},{overwrite:!0}),n.goBack()}})}}};break;case m.UserItem:var y=!!a.items.get(e,t);i={title:(y?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")+" "+d._itemKeyToTitle(r),command:new u.CallbackDevConsoleCommand({callback:function(n){y?a.items.delete(e,t):a.items.add({spec:e,name:t}),n.updateMenu()}})};break;default:cc.warn("Can't find handler for constructor")}i.title||(i.title=d._itemKeyToTitle(r)),i.title&&(n[r]=i)},d=this;try{for(var y=r(o),f=y.next();!f.done;f=y.next()){var h=f.value;i(h.spec,h.name,h.constructor)}}catch(g){e={error:g}}finally{try{f&&!f.done&&(t=y.return)&&t.call(y)}finally{if(e)throw e.error}}return n},t.prototype._itemKeyToTitle=function(e){return this._titles[e]},t}(i.DevConsoleMenuGenerator);n.UserItemDevConsoleMenuGenerator=d,cc._RF.pop()},{"./CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./CountableUserItem (@tapclap.game-kit.user-item-manager.items)":"CountableUserItem (@tapclap.game-kit.user-item-manager.items)","./DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)":"DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","./InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)":"InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","./RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)":"RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)","./TimedUserItem (@tapclap.game-kit.user-item-manager.items)":"TimedUserItem (@tapclap.game-kit.user-item-manager.items)","./UserItem (@tapclap.game-kit.user-item-manager)":"UserItem (@tapclap.game-kit.user-item-manager)"}],"UserItemFactory (@tapclap.game-kit.user-item-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"3282b2rviFTlqFh804JDkld","UserItemFactory (@tapclap.game-kit.user-item-manager)"),n.__esModule=!0,n.UserItemFactory=void 0;var o=e("./UserItem (@tapclap.game-kit.user-item-manager)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var c=function(){function e(e){this._availabilities=e.availabilities,this._patterns=e.patterns}var t=e.prototype;return t.create=function(e){if(e instanceof o.UserItem)return e;var t=this._availabilities[e.spec+":"+e.name],n=this._getPatternData(e);if(!n)throw new Error("UserItem object not resolved: "+JSON.stringify(e));var a=n.constructor,r=n.options;return new a(Object.assign({},e,r,{availability:t}))},t._getPatternData=function(e){for(var t,n=a(this._patterns);!(t=n()).done;){var o=t.value;if(o.patterns.includes(e.spec+":"+e.name))return o}return null},t.getAllItemsData=function(){for(var e,t=[],n=a(this._patterns);!(e=n()).done;)for(var o,r=e.value,i=r.patterns,c=r.constructor,s=a(i);!(o=s()).done;){var p=o.value.split(":"),l=p[0],m=p[1];t.push({spec:l,name:m,constructor:c})}return t},e}();n.UserItemFactory=c,cc._RF.pop()},{"./UserItem (@tapclap.game-kit.user-item-manager)":"UserItem (@tapclap.game-kit.user-item-manager)"}],"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":[function(e,t,n){"use strict";cc._RF.push(t,"22302jmXi1CLqitNmjuTb8u","UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),n.__esModule=!0,n.UserItemInfoComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b=e("./IconComponent (@tapclap.game-kit.ui.icons)");function C(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var x=cc._decorator,A=x.ccclass,O=x.menu,R=x.property,P=(o=O("UI-Kit/UserItem/UserItemInfoComponent"),a=R({type:cc.Node,visible:!0}),r=R({type:b.IconComponent,visible:!0}),i=R({type:cc.Label,visible:!0}),c=R({type:cc.Label,visible:!0}),s=R({type:cc.Node,visible:!0}),p=R({type:cc.Node,visible:!0}),l=R({type:cc.Node,visible:!0}),A(m=o((u=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return C(t=e.call.apply(e,[this].concat(o))||this,"_iconHolder",d,w(t)),C(t,"_icon",y,w(t)),C(t,"_valueLabel",f,w(t)),C(t,"_measureLabel",h,w(t)),C(t,"_multiplySign",g,w(t)),C(t,"_iconSpacing",v,w(t)),C(t,"_highlight",_,w(t)),t._fixedHeight=!1,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,S(t,n);var a=o.prototype;return a.setIcon=function(e){this._icon&&(this._icon.icon=e)},a.setValue=function(e){this._valueLabel&&(this._valueLabel.string=e)},a.setMeasure=function(e){this._measureLabel&&(this._measureLabel.string=e)},a.setLabelColor=function(e){this._valueLabel&&(this._valueLabel.node.color=e)},a.setMeasureColor=function(e){this._measureLabel&&(this._measureLabel.node.color=e)},a.setMultiplySignColor=function(e){this._multiplySign&&(this._multiplySign.color=e)},a.setIconSpacing=function(e){this._iconSpacing&&(this._iconSpacing.width=e)},a.hideMultiplySign=function(){this._multiplySign&&(this._multiplySign.active=!1)},a.showMultiplySign=function(){this._multiplySign&&(this._multiplySign.active=!0)},a.showHightlight=function(){this._highlight.active=!0},a.hideHightlight=function(){this._highlight.active=!1},a.setLabelStrokeWidth=function(e){this._getLabelOutlines().forEach(function(t){return t.width=e})},a.setLabelStrokeColor=function(e){this._getLabelOutlines().forEach(function(t){return t.color=e})},a.setIconScale=function(e){this._iconHolder.width=this._iconHolder.width*e,this._iconHolder.height=this._iconHolder.height*e,this._highlight&&(this._highlight.width=this._highlight.width*e,this._highlight.height=this._highlight.height*e)},a.setLabelScale=function(e){this._measureLabel.fontSize=this._measureLabel.fontSize*e,this._measureLabel.lineHeight=this._measureLabel.lineHeight*e,this._valueLabel.fontSize=this._valueLabel.fontSize*e,this._valueLabel.lineHeight=this._valueLabel.lineHeight*e},a.setFixedHeight=function(e){this._fixedHeight=e},a.setWidth=function(e){this.node.getComponent(cc.Layout).resizeMode=cc.Layout.ResizeMode.NONE,this.node.width=e},a.getIconNode=function(){return this._icon.node},a._getLabelOutlines=function(){return[this._valueLabel,this._multiplySign,this._measureLabel].filter(function(e){return e}).map(function(e){return e.getComponent(cc.LabelOutline)}).filter(function(e){return e})},a.update=function(){this._fixedHeight||(this.node.height=Math.max.apply(Math,this.node.children.map(function(e){return e.height})))},o}(cc.Component),d=E(u.prototype,"_iconHolder",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E(u.prototype,"_icon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=E(u.prototype,"_valueLabel",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=E(u.prototype,"_measureLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=E(u.prototype,"_multiplySign",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E(u.prototype,"_iconSpacing",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E(u.prototype,"_highlight",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=u))||m)||m);n.UserItemInfoComponent=P,cc._RF.pop()},{"./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)"}],"UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)":[function(e,t,n){"use strict";cc._RF.push(t,"9750brHAMteNJMLaALqqwsa","UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),n.__esModule=!0,n.UserItemStyleProperty=n.UserItemListComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G,N,W,H,V,K,U,Y,z=e("./TimeDuration (@tapclap.utils-js.time-duration)"),q=e("./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),Z=e("./NumberFormatter (@tapclap.game-kit.ui.number-formatter)");function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var te=cc._decorator,ne=te.ccclass,oe=te.property,ae=te.menu,re=(o=ne("UserItemStyleProperty"),a=oe({visible:!0}),r=oe({type:cc.Prefab,visible:!0}),i=oe({visible:!0}),c=oe({visible:!0}),s=oe({visible:!0}),p=oe({visible:!0}),l=oe({visible:!0}),m=oe({visible:!0}),u=oe({visible:!0}),d=oe({visible:!0}),y=oe({visible:!0}),f=oe({visible:!0}),h=oe({visible:!0}),g=oe({visible:!0}),v=oe({visible:!0}),o((C=ee((b=function(){function e(){Q(this,"_key",C,this),Q(this,"_userItemPrefab",w,this),Q(this,"_fixedHeight",S,this),Q(this,"_width",E,this),Q(this,"_iconScale",x,this),Q(this,"_labelScale",A,this),Q(this,"_labelColor",O,this),Q(this,"_labelStrokeWidth",R,this),Q(this,"_labelStrokeColor",P,this),Q(this,"_shortNumber",k,this),Q(this,"_aloneInRow",T,this),Q(this,"_hideMultiplySign",I,this),Q(this,"_iconSpacing",M,this),Q(this,"_verticalPadding",j,this),Q(this,"_highlight",L,this)}var t,n;return t=e,(n=[{key:"key",get:function(){return this._key}},{key:"options",get:function(){return{userItemPrefab:this._userItemPrefab,width:this._width,fixedHeight:this._fixedHeight,iconScale:this._iconScale,labelScale:this._labelScale,labelColor:this._labelColor,labelStrokeWidth:this._labelStrokeWidth,labelStrokeColor:this._labelStrokeColor,aloneInRow:this._aloneInRow,hideMultiplySign:this._hideMultiplySign,iconSpacing:this._iconSpacing,verticalPadding:this._verticalPadding,shortNumber:this._shortNumber,highlight:this._highlight}}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"_key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=ee(b.prototype,"_userItemPrefab",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=ee(b.prototype,"_fixedHeight",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=ee(b.prototype,"_width",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=ee(b.prototype,"_iconScale",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=ee(b.prototype,"_labelScale",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=ee(b.prototype,"_labelColor",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color(255,255,255,255)}}),R=ee(b.prototype,"_labelStrokeWidth",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),P=ee(b.prototype,"_labelStrokeColor",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color(255,255,255,255)}}),k=ee(b.prototype,"_shortNumber",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=ee(b.prototype,"_aloneInRow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=ee(b.prototype,"_hideMultiplySign",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=ee(b.prototype,"_iconSpacing",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=ee(b.prototype,"_verticalPadding",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=ee(b.prototype,"_highlight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=b))||_);n.UserItemStyleProperty=re;var ie=(F=ae("Game-Kit/UI/UserItem/UserItemListComponent"),D=oe({visible:!0}),B=oe({type:cc.Prefab,visible:!0}),G=oe({type:re,visible:!0}),N=oe({type:[re],visible:!0}),ne(W=F((H=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return Q(t=e.call.apply(e,[this].concat(o))||this,"_maxItemsInRow",V,X(t)),t._items={},Q(t,"_userItemPrefab",K,X(t)),Q(t,"_defaultStyle",U,X(t)),Q(t,"_styles",Y,X(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,J(t,n);var a=o.prototype;return a.createItem=function(e,t){void 0===t&&(t={});var n=e.spec+":"+e.name,o=this._styles.find(function(e){return e.key===n}),a=Object.assign({},this._defaultStyle.options,o?o.options:{},t),r=cc.instantiateFrom(a.userItemPrefab||this._userItemPrefab),i=r.getComponent(q.UserItemInfoComponent);if(i){if(i.setIcon(n),Number.isInteger(e.amount))i.setValue(a.shortNumber?Z.NumberFormatter.shortNumber(e.amount):e.amount),i.setMeasure("");else if(e.duration){var c=new z.TimeDuration(e.duration);c.getHours()>0?(i.setValue(c.getHours()),i.setMeasure("h")):(i.setValue(c.getMinutes()),i.setMeasure("m"))}a.fixedHeight&&i.setFixedHeight(a.fixedHeight),a.width&&i.setWidth(a.width),a.labelColor&&(i.setLabelColor(a.labelColor),i.setMeasureColor(a.labelColor)),a.hideMultiplySign&&i.hideMultiplySign(),a.labelStrokeColor&&i.setLabelStrokeColor(a.labelStrokeColor),void 0!==a.labelStrokeWidth&&i.setLabelStrokeWidth(a.labelStrokeWidth),a.iconScale&&i.setIconScale(a.iconScale),a.labelScale&&i.setLabelScale(a.labelScale),a.iconSpacing&&i.setIconSpacing(a.iconSpacing),a.highlight?i.showHightlight():i.hideHightlight()}return this._items[n]={node:r,userItem:e,iconNode:i.getIconNode(),options:a},i},a.arrange=function(){this.node.destroyAllChildren();for(var e=new cc.Node,t=this._maxItemsInRow,n=Object.values(this._items),o=0,a=n;o<a.length;o++){var r=a[o],i=r.node,c=r.options;c.verticalPadding&&0!==c.verticalPadding&&(i.height+=c.verticalPadding),e.addChild(i),(c.aloneInRow||e.children.length===t||n[n.length-1]===r)&&(this.node.addChild(e),e=new cc.Node)}},a.update=function(){var e=this,t={};this.node.children.forEach(function(n){t[n.children.length]=t[n.children.length]||[],n.children.forEach(function(o,a){var r=o.getComponent(cc.Layout);r&&r.updateLayout();var i=Object.values(e._items).find(function(e){return e.node===o});i&&!i.options.aloneInRow&&(t[n.children.length][a]=Math.max(t[n.children.length][a]||0,o.width))});var o=t[n.children.length].reduce(function(e,t){return e+t},0);n.width=o,n.height=Math.max.apply(Math,n.children.map(function(e){return e.height}));var a=-n.width/2;n.children.forEach(function(o,r){var i=t[n.children.length][r],c=Object.values(e._items).find(function(e){return e.node===o});c&&!c.options.aloneInRow&&(o.x=a+i/2-(i-o.width)/2,a+=i)})})},a.updateItem=function(e){var t=this._items[e];t&&t.node.getComponent(q.UserItemInfoComponent).setValue(t.options.shortNumber?Z.NumberFormatter.shortNumber(t.userItem.amount):t.userItem.amount)},a.setMaxItemsInRow=function(e){this._maxItemsInRow=e},a.getItems=function(){return this._items},o}(cc.Component),V=ee(H.prototype,"_maxItemsInRow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),K=ee(H.prototype,"_userItemPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ee(H.prototype,"_defaultStyle",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=ee(H.prototype,"_styles",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=H))||W)||W);n.UserItemListComponent=ie,cc._RF.pop()},{"./NumberFormatter (@tapclap.game-kit.ui.number-formatter)":"NumberFormatter (@tapclap.game-kit.ui.number-formatter)","./TimeDuration (@tapclap.utils-js.time-duration)":"TimeDuration (@tapclap.utils-js.time-duration)","./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"}],"UserItemManager (@tapclap.game-kit.user-item-manager)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"d9543vYIhFdx6xlqC2EWmGz","UserItemManager (@tapclap.game-kit.user-item-manager)"),n.__esModule=!0,n.UserItemManager=void 0;var r=function(e){var t,n;function r(t){var n,o=t.itemCollection,a=t.defaultItems,r=void 0===a?[]:a,i=t.service,c=t.itemService;return(n=e.call(this)||this)._defaultItems=r,n._items=o,n._service=i,n._itemService=c,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.create=function(e){return this._items.createItem(e)},s.add=function(e,t){var n=void 0===t?{}:t,o=n.overwrite,a=void 0!==o&&o,r=n.silent,i=void 0!==r&&r,c=!this._items.has(e.spec,e.name);if(a){var s=this._items.set(e);return c&&s.on("change",this._onItemChange.bind(this)),i||this._sync(s),s}var p=this._items.add(e);return c&&(p.on("change",this._onItemChange.bind(this)),this._onItemAdd(p)),p},s.substract=function(e){return this._items.substract(e)},s.get=function(e,t){return this._items.get(e,t)},s.delete=function(e,t){this._items.delete(e,t)&&this._sync()},s.init=function(){var e=this;return Promise.resolve().then(function(){return e._service.syncData()}).then(function(t){void 0===t&&(t=[]),t&&t.length>0&&t.forEach(function(t){try{e.add(t,{silent:!0,overwrite:!0})}catch(n){console.error(n.message)}}),e._defaultItems.forEach(function(t){e.get(t.spec,t.name)||e.add(t)}),e._sync()})},s._sync=function(){this._service.save(this.serialize())},s._onItemChange=function(e,t,n){e.syncable&&(this._itemService.patch(n,{endpoint:[e.spec,e.name]}),this._sync()),this.emit("change",e),this.emit("change:"+e.spec+":"+e.name,e)},s._onItemAdd=function(e){e.syncable&&(this._service.create(e.serialize()),this._sync()),this.emit("add",e),this.emit("add:"+e.spec+":"+e.name,e)},s.serialize=function(){return Array.from(this._items.values()).map(function(e){return e.serialize()})},s.charge=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e){return n.add(e)}),this.emit(r.EVENT_CHARGE,Object.assign({items:e.map(function(e){return e.serialize()})},t))},s.spend=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e){return n.substract(e)}),this.emit(r.EVENT_SPEND,Object.assign({items:e.map(function(e){return e.serialize()})},t))},i=r,(c=[{key:"defaultItems",get:function(){return this._defaultItems}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.UserItemManager=r,r.EVENT_CHARGE="charge",r.EVENT_SPEND="spend",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"UserItemTimer (@tapclap.utils-js.timer)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"95177lHE0ZG+o3BBsvw8gzI","UserItemTimer (@tapclap.utils-js.timer)"),n.__esModule=!0,n.UserItemTimer=void 0;var a=function(e){var t,n;function a(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._userItemManager=t.userItemManager,n._spec=t.spec,n._name=t.name,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.getFinishDate=function(){var e=this._userItemManager.get(this._spec,this._name);if(e&&void 0!==e.expireAt)return e.expireAt},a}(e("./OfferTimer (@tapclap.utils-js.timer)").OfferTimer);n.UserItemTimer=a,cc._RF.pop()},{"./OfferTimer (@tapclap.utils-js.timer)":"OfferTimer (@tapclap.utils-js.timer)"}],"UserManager (@tapclap.game-kit.user-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"a7c58oxU5hWdIXMazBloyAT","UserManager (@tapclap.game-kit.user-manager)"),Object.defineProperty(n,"__esModule",{value:!0}),n.UserManager=void 0;var o=function(){function e(){this._currentUser=null}return e.prototype.setCurrentUser=function(e){this._currentUser=e},e.prototype.getCurrentUser=function(){if(!this._currentUser)throw new Error("Not current user");return this._currentUser},e}();n.UserManager=o,cc._RF.pop()},{}],"UserService (@tapclap.game-kit.user-service)":[function(e,t,n){"use strict";cc._RF.push(t,"cd1afPnbJdWH7nS+sGKWVJ2","UserService (@tapclap.game-kit.user-service)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UserService=void 0;var r=e("./URI (@tapclap.utils-js.url)"),i={auth:"/auth",users:"/users",reset:"/user/reset"},c=function(){function e(e){this._gateway=e.gateway,this._paths=Object.assign({},i,e.paths)}return e.prototype._createPath=function(e,t){return r.URI.createPath(e,t)},e.prototype.auth=function(e){return o(this,void 0,Promise,function(){var t;return a(this,function(n){switch(n.label){case 0:return[4,this._gateway.post(this._createPath(this._paths.auth),e)];case 1:return t=n.sent(),[2,this._gateway.handshake(t)]}})})},e.prototype.getUser=function(){return this._gateway.get(this._createPath(this._paths.users))},e.prototype.resetUser=function(e){return this._gateway.delete(this._createPath(this._paths.reset,{id:e.id}))},e.prototype.getUsers=function(e){return void 0===e&&(e=[]),this._gateway.get(this._createPath(this._paths.users,{ids:e}))},e}();n.UserService=c,cc._RF.pop()},{"./URI (@tapclap.utils-js.url)":"URI (@tapclap.utils-js.url)"}],"UserSettings (@tapclap.game-kit.user-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"21433+HSQNMK4v80kcFWKOQ","UserSettings (@tapclap.game-kit.user-manager)"),n.__esModule=!0,n.UserSettings=void 0;var o=function(){function e(e){var t=e.service,n=e.settings,o=void 0===n?{}:n;this._service=t,this._settings=new Map(Object.entries(o))}var t=e.prototype;return t.get=function(e){return this._settings.get(e)},t.set=function(e,t){this._settings.set(e,t),this._service.save(Object.fromEntries(Array.from(this._settings.entries())))},t.init=function(){var e=this;return this._service.syncData().then(function(t){void 0===t&&(t={}),"object"==typeof t&&null!==t&&Object.entries(t).forEach(function(t){var n=t[0],o=t[1];return e._settings.set(n,o)})})},e}();n.UserSettings=o,cc._RF.pop()},{}],"ValueComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"a5219uLQO1XlJazKSiN9r8i","ValueComponent (@tapclap.match-x.engine.components)"),n.__esModule=!0,n.ValueComponent=void 0;var r=function(e){var t,n;function r(t){var n,o=void 0===t?{}:t,a=o.value,r=void 0===a?0:a,i=o.min,c=void 0===i?0:i,s=o.max,p=void 0===s?0:s;return(n=e.call(this)||this)._value=r,n._minValue=c,n._maxValue=Math.max(r,p),n._modifiers=[],n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var i,c,s=r.prototype;return s.getValue=function(){var e=this;return this._value+Math.round(this._modifiers.reduce(function(t,n){return t+n.getValue(e._value)},0))},s.getNormalizeValue=function(){return this.getValue()/this.getMaxValue()},s.setValue=function(e){this._value=Math.max(Math.min(e,this.getMaxValue()),this.getMinValue())},s.getMaxValue=function(){return this._maxValue},s.setMaxValue=function(e){this._maxValue=e},s.getMinValue=function(){return this._minValue},s.setMinValue=function(e){this._minValue=e},i=r,(c=[{key:"modifiers",get:function(){return this._modifiers}}])&&o(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),r}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ValueComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"5aee6q15FdTT5H/XOJ9ORuC","ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)"),n.__esModule=!0,n.ValueComponentDataLoader=void 0;var a=function(e){var t,n;function a(t,n){var o,a=(void 0===n?{}:n).overrideMaxValue,r=void 0!==a&&a;return(o=e.call(this)||this)._world=t,o._overrideMaxValue=r,o}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.load=function(e,t){var n=this._world.getEnabledComponent(e);void 0!==t.min&&n.setMinValue(t.min),void 0!==t.max&&n.setMaxValue(t.max),void 0!==t.value&&(this._overrideMaxValue&&n.setMaxValue(t.value),n.setValue(t.value)),this._world.setState("load."+e,n)},a}(e("./DataLoader (@tapclap.match-x.engine.systems.load-system)").DataLoader);n.ValueComponentDataLoader=a,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)"}],"ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"18af3mc3L1Z872zZ/DVS6hd","ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.ValueComponentRatioAnimationResolver=void 0;var i=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),c=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),s=e("./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)"),p=function(e){function t(t){var n=t.componentKey,o=e.call(this,{defaultTemplate:"$key-$current"})||this;return o._componentKey=n,o._getters={current:o._getIndex.bind(o)},o}return a(t,e),t.prototype._getIndex=function(e,t){var n=e.getEnabledComponent(this._componentKey),o=n.getValue(),a=n.getMaxValue(),c=n.getMinValue(),p=o/a,l=e.getComponent(i.RenderComponent.KEY).node.getComponent(s.AnimationFactoryComponent).items;return o===c+1&&l.find(function(e){return e.key===t+"-last"})?"last":l.reduce(function(e,n){var o=r(n.key.split("-"),2),a=o[0],i=o[1];return p<=Number(i)&&a===t?i:e},"1")},t}(c.AnimationResolver);n.ValueComponentRatioAnimationResolver=p,cc._RF.pop()},{"./AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)":"AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"ValueResolver (@tapclap.utils-js.substring-replacer)":[function(e,t,n){"use strict";cc._RF.push(t,"6c10czsB1tXgK78YFrfZ7oj","ValueResolver (@tapclap.utils-js.substring-replacer)"),n.__esModule=!0,n.ValueResolver=void 0;var o=function(){function e(){}return e.prototype.getValue=function(){throw new Error("Method ValueResolver.getValue not implemented")},e}();n.ValueResolver=o,cc._RF.pop()},{}],"Vector2D (@tapclap.match-x.engine.models)":[function(e,t,n){"use strict";cc._RF.push(t,"6943f395O9Ur7QeeCO88sBt","Vector2D (@tapclap.match-x.engine.models)"),Object.defineProperty(n,"__esModule",{value:!0}),n.Vector2D=void 0;var o=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.x===e.x&&this.y===e.y},e.prototype.isZero=function(){return this.isEqual(e.ZERO)},e.prototype.inverse=function(){return new e(-1*this.x,-1*this.y)},e.prototype.clone=function(){return new e(this.x,this.y)},Object.defineProperty(e.prototype,"alias",{get:function(){for(var t in e.ALIASES)if(e.ALIASES[t].isEqual(this))return t;return null},enumerable:!1,configurable:!0}),e.ZERO=new e,e.DOWN=new e(0,1),e.UP=new e(0,-1),e.RIGHT=new e(1,0),e.LEFT=new e(-1,0),e.ALIASES={ZERO:e.ZERO,DOWN:e.DOWN,UP:e.UP,LEFT:e.LEFT,RIGHT:e.RIGHT},e}();n.Vector2D=o,cc._RF.pop()},{}],"VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"45887FuItJY/o98XIfbwNay","VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)"),n.__esModule=!0,n.VendorPaymentProvider=void 0;var a=function(e){var t,n;function a(t,n,o){var a;return void 0===o&&(o=!1),(a=e.call(this,t)||this)._screenLocker=n,a._unlockByConsume=o,a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.purchase=function(t){var n=this;return Promise.resolve().then(function(){return n._screenLocker.lock()}).then(function(){return e.prototype.purchase.call(n,t)}).then(function(e){return Promise.resolve().then(function(){if(!n._unlockByConsume)return n._screenLocker.unlock()}).then(function(){return e})}).catch(function(e){return n._screenLocker.unlock().then(function(){throw e})})},r.consume=function(t){var n=this;return this._unlockByConsume?Promise.resolve().then(function(){return e.prototype.consume.call(n,t)}).then(function(){return n._screenLocker.unlock()}).catch(function(e){return n._screenLocker.unlock().then(function(){throw e})}):e.prototype.consume.call(this,t)},a}(e("./ProxyPaymentProvider (@tapclap.sdk-x.payment-service)").ProxyPaymentProvider);n.VendorPaymentProvider=a,cc._RF.pop()},{"./ProxyPaymentProvider (@tapclap.sdk-x.payment-service)":"ProxyPaymentProvider (@tapclap.sdk-x.payment-service)"}],"ViewComponent (@tapclap.match-x.cocos.components)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ac573y3kgNMobYrqzZ7h+T1","ViewComponent (@tapclap.match-x.cocos.components)"),n.__esModule=!0,n.ViewComponent=void 0;var r=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),o}(cc.Component))||o;n.ViewComponent=r,cc._RF.pop()},{}],"ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)":[function(e,t,n){"use strict";cc._RF.push(t,"a7f21OxZ0VVvrkLHZY9ac6w","ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewIdleAnimationHandler=void 0;var o=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),a=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),r=e("./IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)"),i=e("./AnimationData (@tapclap.match-x.cocos.animations)"),c=function(){function e(){}return e.prototype.schedule=function(e){return this._getAnimationData("run",e)},e.prototype.reset=function(e){return this._getAnimationData("reset",e)},e.prototype._getAnimationData=function(e,t){var n=this._getIdleViewComponent(t);if(n){var o=new a.FunctionAnimation(function(){return n[e](t)});return new i.AnimationData(null,o)}return null},e.prototype._getIdleViewComponent=function(e){return e.getEnabledComponentByClass(o.RenderComponent).node.getComponent(r.IdleViewComponent)},e}();n.ViewIdleAnimationHandler=c,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)":"IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)"}],"VisibilityByShareComponent (scripts.common.components.visibility)":[function(e,t,n){"use strict";cc._RF.push(t,"80e3cfla91UiLf5COguOiw6","VisibilityByShareComponent (scripts.common.components.visibility)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.VisibilityByShareComponent=void 0;var i=e("./Inject (@tapclap.utils-js.inject)"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.menu,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._targetNode=null,t._parentLayout=null,t}return a(t,e),t.prototype.onLoad=function(){this._targetNode.active=!this._sharingDisabled,this._parentLayout&&this._parentLayout.updateLayout()},r([i.Inject("SharingDisabled")],t.prototype,"_sharingDisabled",void 0),r([p({type:cc.Node,visible:!0})],t.prototype,"_targetNode",void 0),r([p({type:cc.Layout,visible:!0})],t.prototype,"_parentLayout",void 0),r([s,l("Candyvalley/Visibility/VisibilityByShareComponent")],t)}(cc.Component);n.VisibilityByShareComponent=m,cc._RF.pop()},{"./Inject (@tapclap.utils-js.inject)":"Inject (@tapclap.utils-js.inject)"}],"WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"c3cdaPsApBfzKBVE4SnGI+C","WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.WaitAnimation=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._animation=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._animation?this._animation.wait.then(this._resolve):this._resolve(),this._promise},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.WaitAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)":[function(e,t,n){"use strict";cc._RF.push(t,"9f004o+P9RZiIK1Mx7rMwmu","WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)"),n.__esModule=!0,n.WaitCloseWindowsAction=void 0;var o=e("./WindowManager (@tapclap.game-kit.ui.window-manager)");function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this)._windowManager=t.windowManager,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n),r.prototype.run=function(){var e=this;return this._windowManager&&this._windowManager.getWindowCount()>0?new Promise(function(t){return e._windowManager.once(o.WindowManager.EVENT_CLOSE_WINDOWS,t)}):Promise.resolve()},r}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.WaitCloseWindowsAction=r,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./WindowManager (@tapclap.game-kit.ui.window-manager)":"WindowManager (@tapclap.game-kit.ui.window-manager)"}],"WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"85262dvRQVYSqSbfU16iEVH","WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"),n.__esModule=!0,n.WaitPromiseAnimation=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._targetPromise=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.run=function(){return this._targetPromise?this._targetPromise.then(this._resolve):this._resolve(),this._promise},a}(e("./Animation (@tapclap.match-x.engine.systems.game-action-system)").Animation);n.WaitPromiseAnimation=a,cc._RF.pop()},{"./Animation (@tapclap.match-x.engine.systems.game-action-system)":"Animation (@tapclap.match-x.engine.systems.game-action-system)"}],"WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"9e46djpTWBc0JscqCHRLDk6","WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.WalkAnimationBuilder=void 0;var i=e("./AnimationFactory (@tapclap.match-x.engine.animation-factory)"),c=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),s=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),p=e("./Entity (@tapclap.match-x.engine.entities)"),l=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),m=e("./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)"),u=e("./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)"),d=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),y=e("./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)"),f=e("./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)"),h=e("./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"),g=e("./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),v=e("./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)"),_=e("./ActionAnimation (@tapclap.match-x.cocos.animations)"),b=e("./AnimationData (@tapclap.match-x.cocos.animations)"),C=e("./MoveAnimation (@tapclap.match-x.cocos.animations)"),w=e("./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)"),S=function(e){function t(t){var n=t.speed,o=void 0===n?1:n,a=e.call(this)||this;return a._speed=1,a._speed=o,a}return a(t,e),t.prototype.build=function(e){var t,n,o=this,a=[],l=0;if(e&&e.data){var S=function(e,t,n,r,S,x){var A=t.getEnabledComponentByClass(s.RenderComponent).node,O=n.map(function(e){return e.getEnabledComponentByClass(s.RenderComponent).node}),R=new i.AnimationFactory(t),P=R.createAnimation(c.AnimationResolver.TYPE_WALK+":before")||new u.DummyAnimation,k=new y.GroupAnimation([new y.GroupAnimation([R.createAnimation(c.AnimationResolver.TYPE_WALK)||new u.DummyAnimation,new u.DummyAnimation],!0),new C.MoveAnimation(A,O,{x:0,y:0},!1,.15*E._speed)]),T=R.createAnimation(c.AnimationResolver.TYPE_WALK+":after")||new u.DummyAnimation;if(A){var I=null;switch(x){case g.ReplaceWalkReplaceStrategy.KEY:I=new d.FunctionAnimation(function(){var e=S.getEnabledComponentByClass(s.RenderComponent).node,t=A.zIndex;return new m.ChainAnimation([new d.FunctionAnimation(function(){A.zIndex=e.zIndex+1}),P,k,new y.GroupAnimation([T,new m.ChainAnimation([new _.ActionAnimation(cc.scaleTo(.25,0,0),e),new d.FunctionAnimation(function(){A.zIndex=t})]),new u.DummyAnimation],!0)]).run()});break;case v.SwapWalkReplaceStrategy.KEY:I=new d.FunctionAnimation(function(){l++;var n=e.getEnabledComponentByClass(s.RenderComponent).node,a=r.getEnabledComponentByClass(s.RenderComponent).node,i=t.getComponentByClass(s.RenderComponent).node,c=S.getComponentByClass(s.RenderComponent).node,u=i.zIndex,f=c.zIndex,h=p.Entity.LAYER_UPPER+1;return new m.ChainAnimation([new _.ActionAnimation(cc.delayTime(l/2),n),new d.FunctionAnimation(function(){i.zIndex=h,c.zIndex=h}),P,new y.GroupAnimation([new w.PlanetarySwapAnimation(c,n.getPosition(),!1,o._speed/4.8),new w.PlanetarySwapAnimation(i,a.getPosition(),!0,o._speed/4.8)]),new d.FunctionAnimation(function(){i.zIndex=u,c.zIndex=f}),T]).run()});break;default:I=new m.ChainAnimation([P,k,T])}a.push(new b.AnimationData(t,new m.ChainAnimation([I,new y.GroupAnimation([new h.WaitPromiseAnimation(I.settled),R.createAnimation(c.AnimationResolver.TYPE_STATIC)||new u.DummyAnimation,new u.DummyAnimation],!0)]))),a.push(new b.AnimationData(S,new f.WaitAnimation(I)))}},E=this;try{for(var x=r(e.data),A=x.next();!A.done;A=x.next()){var O=A.value;S(O.cell,O.entity,O.path,O.targetCell,O.targetEntity,O.replaceStrategyKey)}}catch(R){t={error:R}}finally{try{A&&!A.done&&(n=x.return)&&n.call(x)}finally{if(t)throw t.error}}}return[a]},t}(l.GameActionBuilder);n.WalkAnimationBuilder=S,cc._RF.pop()},{"./ActionAnimation (@tapclap.match-x.cocos.animations)":"ActionAnimation (@tapclap.match-x.cocos.animations)","./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./AnimationFactory (@tapclap.match-x.engine.animation-factory)":"AnimationFactory (@tapclap.match-x.engine.animation-factory)","./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)":"ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","./DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)":"DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)":"GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","./MoveAnimation (@tapclap.match-x.cocos.animations)":"MoveAnimation (@tapclap.match-x.cocos.animations)","./PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)":"PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)":"SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","./WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)","./WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)":"WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)"}],"WalkComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c10a6kq9o1WcbcyULGrj3+h","WalkComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkComponent=void 0;var r=function(e){function t(t){var n=t.pathStrategyKey,o=t.replaceStrategyKey,a=t.rememberVisitedCells,r=void 0!==a&&a,i=t.movesCount,c=void 0===i?1:i,s=t.sort,p=t.order,l=void 0===p?0:p,m=e.call(this)||this;return m._path=[],m._visitedCells=[],m._rememberVisitedCells=!1,m._movesCount=1,m._pathStrategyKey=n,m._replaceStrategyKey=o,m._rememberVisitedCells=r,m._movesCount=c,m._sort=s,m._order=l,m}return a(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(e){this._path=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visitedCells",{get:function(){return this._visitedCells},set:function(e){this._visitedCells=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathStrategyKey",{get:function(){return this._pathStrategyKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"replaceStrategyKey",{get:function(){return this._replaceStrategyKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rememberVisitedCells",{get:function(){return this._rememberVisitedCells},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movesCount",{get:function(){return this._movesCount},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._path=[]},Object.defineProperty(t.prototype,"sort",{get:function(){return this._sort},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},enumerable:!1,configurable:!0}),t.KEY="walk",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkDirectionComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"8b981jfH3FbI7FoLBxBEzO2","WalkDirectionComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkDirectionComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkDirection",t}(e("./DirectionComponent (@tapclap.match-x.engine.components)").DirectionComponent);n.WalkDirectionComponent=r,cc._RF.pop()},{"./DirectionComponent (@tapclap.match-x.engine.components)":"DirectionComponent (@tapclap.match-x.engine.components)"}],"WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"d6d5bP+tY5Ztpzg5dlKEpzk","WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.WalkDirectionWalkSortStrategy=void 0;var i=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),c=function(e){function t(t){var n=e.call(this)||this;return n._sorters=t.sorters,n}return a(t,e),t.prototype.sort=function(e){var t,n,o,a=Object.fromEntries(Object.keys(this._sorters).map(function(e){return[e,[]]}));try{for(var c=r(e),s=c.next();!s.done;s=c.next()){var p=s.value,l=p.grid,m=p.cell,u=p.entity,d=p.trigger,y=null===(o=u.getComponentByClass(i.WalkDirectionComponent))||void 0===o?void 0:o.direction;y&&a[y.alias].push({grid:l,cell:m,entity:u,trigger:d})}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var f in this._sorters)a[f].sort(this._sorters[f]);return Object.values(a).flat()},t.KEY="walkDirectionWalkSort",t}(e("./WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)").WalkSortStrategy);n.WalkDirectionWalkSortStrategy=c,cc._RF.pop()},{"./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)","./WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)":"WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)"}],"WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)":[function(e,t,n){"use strict";cc._RF.push(t,"e7096+iMYpft6nZJeAbnJUJ","WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkDistanceToGridEdgeAnimationResolver=void 0;var r=e("./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)"),i=e("./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)"),c=e("./WalkDirectionComponent (@tapclap.match-x.engine.components)"),s=e("./AnimationResolver (@tapclap.match-x.engine.animation-factory)"),p=function(e){function t(t){var n,o=e.call(this,t)||this;return o._templates=((n={})[s.AnimationResolver.TYPE_IDLE]="$key-$current",n),o._getters={current:o._getIndex.bind(o)},o}return a(t,e),t.prototype._getIndex=function(e){var n,o,a=null===(n=e.getEnabledComponentByClass(c.WalkDirectionComponent))||void 0===n?void 0:n.direction,s=e.getEnabledComponentByClass(r.DistanceToGridEdgeAnimationComponent),p=null===(o=e.getComponentByClass(i.DistanceToGridEdgeComponent))||void 0===o?void 0:o.getDistance(a),l=!1;switch(s.comparer){case r.DistanceToGridEdgeAnimationComponentComparer.LESS:l=p<s.value;break;case r.DistanceToGridEdgeAnimationComponentComparer.MORE:l=p>s.value;break;case r.DistanceToGridEdgeAnimationComponentComparer.EQUAL:l=p===s.value}return(p||0===p)&&l?p.toString():t.KEY_ANY},t.KEY_ANY="any",t}(s.AnimationResolver);n.WalkDistanceToGridEdgeAnimationResolver=p,cc._RF.pop()},{"./AnimationResolver (@tapclap.match-x.engine.animation-factory)":"AnimationResolver (@tapclap.match-x.engine.animation-factory)","./DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)","./DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)":"DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","./WalkDirectionComponent (@tapclap.match-x.engine.components)":"WalkDirectionComponent (@tapclap.match-x.engine.components)"}],"WalkFinishComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ef4942b2uRQj59pnhqLHuEK","WalkFinishComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkFinishComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkFinish",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkFinishComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkOnExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f6dc0ssaJFfG7jmw9kjFubJ","WalkOnExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkOnExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkOnExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkOnExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f247dq8XgVVvo5x0aucdc67","WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkOnNextTrackEntityExplodeComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkOnNextTrackEntityExplode",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkOnNextTrackEntityExplodeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkOnTrackComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"ce7b8XFsC1a4aA/jwj7AqC7","WalkOnTrackComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkOnTrackComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkOnTrack",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkOnTrackComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"26b4f9T9AlYl4PMSXjI0H2g","WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkOnTrackEntityTypeComponent=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._type=t.type,n}return a(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),t.KEY="walkOnTrackEntityType",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkOnTrackEntityTypeComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkOnTurnEndComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"2b2d89o2OlST6eeq1p6a4Pp","WalkOnTurnEndComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkOnTurnEndComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkOnTurnEnd",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkOnTurnEndComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkPathComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"5e860MXh6NSzKXMFQpRTDpz","WalkPathComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WalkPathComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="walkPath",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WalkPathComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)":[function(e,t,n){"use strict";cc._RF.push(t,"f0261F2+WVR3puQ8YFX3P0q","WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WalkPathStrategy=void 0;n.WalkPathStrategy=function(){},cc._RF.pop()},{}],"WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)":[function(e,t,n){"use strict";cc._RF.push(t,"2ab7ezfOfZSbZCwCHr7Gxwt","WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WalkReplaceStrategy=void 0;n.WalkReplaceStrategy=function(){},cc._RF.pop()},{}],"WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)":[function(e,t,n){"use strict";cc._RF.push(t,"67061lwZRdTX4hIaZj23tSS","WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WalkSortStrategy=void 0;n.WalkSortStrategy=function(){},cc._RF.pop()},{}],"WalkSystem (@tapclap.match-x.engine.systems.walk-system)":[function(e,t,n){"use strict";cc._RF.push(t,"419baEs35Na/qSXdF1SbXuM","WalkSystem (@tapclap.match-x.engine.systems.walk-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.WalkSystem=void 0;var s=e("./WalkComponent (@tapclap.match-x.engine.components)"),p=e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)"),l=e("./FailWalkComponent (@tapclap.match-x.engine.components)"),m=e("./PreventWalkPathComponent (@tapclap.match-x.engine.components)"),u=function(e){function t(t){var n=t.world,o=t.triggerStrategies,a=void 0===o?[]:o,r=t.pathStrategies,i=void 0===r?{}:r,c=t.replaceStrategies,s=void 0===c?{}:c,p=t.sortStrategies,l=void 0===p?{}:p,m=t.random,u=e.call(this)||this;return u._world=n,u._triggerStrategies=a,u._pathStrategies=i,u._replaceStrategies=s,u._sortStrategies=l,u._random=m,u}return a(t,e),t.prototype.process=function(){var e,n,o,a,c=this,p=this._getEntries(),m={};if(p.length>0){var u=Object.fromEntries(Object.keys(this._sortStrategies).map(function(e){return[e,[]]}));for(var d in p.forEach(function(e){return u[e.entity.getComponentByClass(s.WalkComponent).sort].push(e)}),this._sortStrategies)u[d]=this._sortStrategies[d].sort(u[d]);for(var y=Object.values(u).flat(),f=!0;f;){f=!1;var h=function(e,t,n,o){var a,i,c=[],p=n.getEnabledComponentByClass(s.WalkComponent);if(p){for(var u=t,d=0;d<p.movesCount;d++){var h=g._getPossibleCells(p,e,u,n,c);h.length>0&&(n.removeComponentByClass(l.FailWalkComponent),u=g._random.sample(h),c.push(u),f=!0)}try{for(var v=(a=void 0,r(c)),_=v.next();!_.done;_=v.next()){var b=_.value;p.rememberVisitedCells&&p.visitedCells.push(b);var C=b.getEntity(n.layer);g._getReplaceStrategy(p).replaceEntity(n,t,b),m[o]=m[o]||[],c.find(function(e){return e.getEntity(n.layer)===n})||(c.length=0,c.push(t)),m[o].push({grid:e,cell:t,entity:n,path:c,targetCell:b,targetEntity:C,replaceStrategyKey:p.replaceStrategyKey})}}catch(w){a={error:w}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}c.length>0&&(y=y.filter(function(e){return e.entity!==n}))}},g=this;try{for(var v=(e=void 0,r(y)),_=v.next();!_.done;_=v.next()){var b=_.value;h(b.grid,b.cell,b.entity,b.trigger)}}catch(O){e={error:O}}finally{try{_&&!_.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}}y.forEach(function(e){var n=e.entity;n.addComponent(l.FailWalkComponent.KEY,new l.FailWalkComponent),c._world.pushState(t.STATE_FAIL,n)});try{for(var C=r(Object.entries(m)),w=C.next();!w.done;w=C.next()){var S=i(w.value,2),E=S[0],x=S[1];this._world.setState(t.STATE+":"+E,x)}}catch(R){o={error:R}}finally{try{w&&!w.done&&(a=C.return)&&a.call(C)}finally{if(o)throw o.error}}var A=Object.values(m).flat();return A.length>0&&A.forEach(function(e){return c._world.pushState(t.STATE,e)}),Object.values(m).length>0}return!1},t.prototype._getPathStrategy=function(e){var t=this._pathStrategies[e.pathStrategyKey];if(!t)throw new Error("WalkPathStrategy with key '"+e.pathStrategyKey+"' is not defined");return t},t.prototype._getReplaceStrategy=function(e){var t=this._replaceStrategies[e.replaceStrategyKey];if(!t)throw new Error("WalkReplaceStrategy with key '"+e.replaceStrategyKey+"' is not defined");return t},t.prototype._getPossibleCells=function(e,t,n,o,a){var r=this;return this._getPathStrategy(e).process(t,n,o).filter(function(t){return t.isEnabled&&!c(a,[n],e.visitedCells).includes(t)&&r._getReplaceStrategy(e).isValidCell(t,o)&&!t.entities.find(function(e){return e.getEnabledComponentByClass(m.PreventWalkPathComponent)})})},t.KEY="walkSystem",t.STATE="walkSystem",t.STATE_CHANGE_STAGE="walkSystemChangeStage",t.STATE_FAIL="walkSystemFail",t}(p.PipelineProcessSystem);n.WalkSystem=u,cc._RF.pop()},{"./FailWalkComponent (@tapclap.match-x.engine.components)":"FailWalkComponent (@tapclap.match-x.engine.components)","./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)","./PreventWalkPathComponent (@tapclap.match-x.engine.components)":"PreventWalkPathComponent (@tapclap.match-x.engine.components)","./WalkComponent (@tapclap.match-x.engine.components)":"WalkComponent (@tapclap.match-x.engine.components)"}],"WalkTriggerStrategy (@tapclap.match-x.engine.systems.walk-system)":[function(e,t,n){"use strict";cc._RF.push(t,"07caefnVeVd9LsyG1oxlA17","WalkTriggerStrategy (@tapclap.match-x.engine.systems.walk-system)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WalkTriggerStrategy=void 0;var o=function(){function e(){}return e.KEY=null,e}();n.WalkTriggerStrategy=o,cc._RF.pop()},{}],"WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"f87ffFE+VpbvpriiPofunHT","WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)"),n.__esModule=!0,n.WatchAdAction=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this,t)||this)._userManager=t.userManager,n._adService=t.adService,n._items=t.items,n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r._claimReward=function(){var e=this._userManager.getCurrentUser();Array.isArray(this._items)&&e.items.charge(this._items.map(function(t){return e.items.create(t)}),{source:"ad",provider:this._adService.getProvider().getType()})},r.run=function(){var e=this;return this._adService.hasAd()?Promise.resolve().then(function(){return e._adService.watchAd()}).then(function(){return e._claimReward()}):Promise.reject()},a}(e("./Action (@tapclap.game-kit.action-manager)").Action);n.WatchAdAction=a,cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)"}],"WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"93403vsdo1fDrsr+TZk6FZR","WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.WebViewWindowLayoutComponent=void 0;var o,a,r,i,c,s=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function p(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var u,d,y,f,h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/WindowManager/WebViewWindowLayoutComponent"),a=_({type:cc.WebView,visible:!0}),g(r=o((i=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return p(t=e.call.apply(e,[this].concat(o))||this,"_webView",c,l(t)),t}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n),o.prototype.setWebViewUrl=function(e){console.log(this._webView),this._webView.url=e},o}(s.WindowLayoutComponent),u=i.prototype,d=[a],y={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},f={},Object.keys(y).forEach(function(e){f[e]=y[e]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),void 0===(f=d.slice().reverse().reduce(function(e,t){return t(u,"_webView",e)||e},f)).initializer&&(Object.defineProperty(u,"_webView",f),f=null),c=f,r=i))||r)||r);n.WebViewWindowLayoutComponent=b,cc._RF.pop()},{"./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":[function(e,t,n){"use strict";cc._RF.push(t,"471231VIIBEm5ec6vLK7VCM","WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),n.__esModule=!0,n.WinLevelWindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),v=e("./CheckboxControlComponent (@tapclap.game-kit.ui.controls)"),_=e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)");function b(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var E=cc._decorator,x=E.ccclass,A=E.property,O=(o=A({type:cc.Label,visible:!0}),a=A({type:cc.Node,visible:!0}),r=A({type:[cc.Node],visible:!0}),i=A({type:v.CheckboxControlComponent,visible:!0}),c=A({type:cc.Float,visible:!0}),s=A({type:_.ButtonControlComponent,visible:!0}),x((l=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return b(t=e.call.apply(e,[this].concat(o))||this,"_scoreLabel",m,C(t)),b(t,"_starsHolder",u,C(t)),b(t,"_stars",d,C(t)),b(t,"_shareControl",y,C(t)),b(t,"_duration",f,C(t)),b(t,"_continueButton",h,C(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,w(t,n);var a=o.prototype;return a.setStarsActive=function(e){this._starsHolder&&(this._starsHolder.active=e)},a.setStars=function(e){for(var t=0;t<this._stars.length;t++)this._animateStar(t,t<e)},a.setScore=function(e){this._scoreLabel&&(this._scoreLabel.string=e)},a.getShareControl=function(){return this._shareControl},a._animateStar=function(e,t,n){var o=this;void 0===n&&(n=!1);var a=this._stars[e];if(n||!t)a.active=t;else{var r=new cc.Vec2(a.scaleX,a.scaleY);a.setScale(5,5),a.opacity=0,a.active=!0,a.runAction(cc.sequence([cc.delayTime(.5*e),cc.spawn([cc.callFunc(function(){return o._window.playSound("star"+(e+1))}),cc.fadeIn(.25*this._duration),cc.scaleTo(this._duration,r.x,r.y).easing(cc.easeElasticOut(1.5))])]))}},a.initialize=function(t){var n=this;void 0===t&&(t={}),e.prototype.initialize.call(this,t),this._continueButton&&this._continueButton.events.on(_.ButtonControlComponent.EVENT_CLICK,function(){return n.window.events.emit("continue")})},o}(g.WindowLayoutComponent),m=S(l.prototype,"_scoreLabel",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S(l.prototype,"_starsHolder",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(l.prototype,"_stars",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=S(l.prototype,"_shareControl",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S(l.prototype,"_duration",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),h=S(l.prototype,"_continueButton",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=l))||p);n.WinLevelWindowLayoutComponent=O,cc._RF.pop()},{"./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./CheckboxControlComponent (@tapclap.game-kit.ui.controls)":"CheckboxControlComponent (@tapclap.game-kit.ui.controls)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"ff4cdrG+WtXNLGB6txSdOyV","WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)"),n.__esModule=!0,n.WinLoseSystem=void 0;var a=function(e){var t,n;function a(t,n){var o;return void 0===n&&(n=[]),(o=e.call(this)||this)._world=t,o._loseStrategies=n,o}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var r=a.prototype;return r.process=function(){var e=this._process(),t=e.result,n=e.reason;null!==t&&this._world.setState(a.PRE_STATE,{result:t,reason:n})},r.postProcess=function(){var e=this._process(),t=e.result,n=e.reason;null!==t&&this._world.setState(a.STATE,{result:t,reason:n})},r._process=function(){var e=null,t=null;if(this._world.getEnabledComponent("goals").isAllGoalsCompleted)e=a.RESULT.WIN;else{var n=this._loseStrategies.find(function(e){return e.isLose()});n&&(e=a.RESULT.LOSE,t=n.reason)}return{result:e,reason:t}},a}(e("./PipelineProcessSystem (@tapclap.match-x.engine.systems)").PipelineProcessSystem);n.WinLoseSystem=a,a.KEY="winLose",a.PRE_STATE="preWinLose",a.STATE="winLose",a.RESULT={WIN:"win",LOSE:"lose"},cc._RF.pop()},{"./PipelineProcessSystem (@tapclap.match-x.engine.systems)":"PipelineProcessSystem (@tapclap.match-x.engine.systems)"}],"WindowAction (@tapclap.game-kit.action-manager.actions.window)":[function(e,t,n){"use strict";cc._RF.push(t,"67521Y0rlNTY6LS8iLrgSxm","WindowAction (@tapclap.game-kit.action-manager.actions.window)"),n.__esModule=!0,n.WindowAction=void 0;var o=e("./Action (@tapclap.game-kit.action-manager)"),a=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),r=e("./CheckboxControlComponent (@tapclap.game-kit.ui.controls)");function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l={handleEventClose:!0},m=function(e){var t,n;function o(t){var n;return(n=e.call(this,Object.assign({},l,t))||this)._windowManager=t.windowManager,n._userManager=t.userManager,n._i18n=t.i18n,n._window="string"==typeof t.window?{key:t.window}:t.window,n._queue=t.queue,n._handleEventClose=void 0===t.handleEventClose||t.handleEventClose,n._actions=t.actions,n._canShare=!1,n._uiManager=t.uiManager,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var c=o.prototype;return c._createWindow=function(){return this._windowManager.create(this._window.key,this._window.options||{})},c._getShareControl=function(e){var t=e.getLayout("footer");return t?t.getControl("share"):null},c._prepareShareControl=function(e){var t=this,n=this._getShareControl(e),o=this._userManager.getCurrentUser().settings;n&&(this._canShare=o.get("share"),n.isChecked=this._canShare,n.events.on(r.CheckboxControlComponent.EVENT_CHANGE,function(e){o.set("share",e),t._canShare=e}))},c._prepareWindow=function(e){var t=this;if(this._prepareShareControl(e),this._handleEventClose&&e.events.once(a.WindowComponent.EVENT_CLOSE,function(){t.closeWindow(e)}),this._actions)for(var n,o=function(){var o=n.value,a=o.caller,r=o.event,i=o.closeWindow,c=o.once;r&&e.events[c?"once":"on"].call(e.events,r,function(){return Promise.resolve().then(function(){return t._caller.run(a)}).then(function(){return i?t.closeWindow(e):Promise.resolve()})})},r=i(this._actions);!(n=r()).done;)o()},c._configureWindow=function(){},c.openWindow=function(e){return this._windowManager.open(e)},c.queueWindow=function(e){return this._windowManager.queue(e)},c.closeWindow=function(e){return this._windowManager.close(e)},c.runShare=function(e){return void 0===e&&(e={}),this._canShare&&this._caller&&this._caller.has(o.CALLER_PUBLICATION)?this._caller.run(o.CALLER_PUBLICATION,{shareOptions:e}):Promise.resolve()},c.run=function(){if(!this._windowManager)throw new Error("WindowManager not defined for ShowWindowAction");var e=this._createWindow();return this._prepareWindow(e),this._configureWindow(e),this._queue?this.queueWindow(e):this.openWindow(e)},o}(o.Action);n.WindowAction=m,m.CALLER_PUBLICATION="publication",cc._RF.pop()},{"./Action (@tapclap.game-kit.action-manager)":"Action (@tapclap.game-kit.action-manager)","./CheckboxControlComponent (@tapclap.game-kit.ui.controls)":"CheckboxControlComponent (@tapclap.game-kit.ui.controls)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"WindowAnimationComponent (scripts.windows.items.daily-reward.animation)":[function(e,t,n){"use strict";cc._RF.push(t,"2dcf8T7ODhTC5DwWiXiL32i","WindowAnimationComponent (scripts.windows.items.daily-reward.animation)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.WindowAnimationComponent=void 0;var c=e("./PromisifyTween (scripts.utils)"),s=e("./AnimationKey (scripts.windows.items.daily-reward.animation)"),p=e("./BounceAnimation (scripts.windows.items.daily-reward.animation)"),l=e("./DailyRewardWindowComponent (scripts.windows.items.daily-reward)"),m=e("./Random (@tapclap.utils-js.random)"),u=cc._decorator,d=u.ccclass,y=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._windowDisappearanceDuration=0,t._closeButtonAppearanceDuration=0,t._targetsAppearanceDuration=0,t._targetsDisappearanceDuration=0,t._targetsDisappearanceDelay=0,t._titleOpacityDelay=0,t._titleOpacityDuration=0,t._titlePositionAnimation=null,t._titleAngleAnimation=null,t._rewardTargetAnimationKeys=[],t._livesBarGettingRewardAnimation=null,t._coinsBarGettingRewardAnimation=null,t._playButtonGettingRewardAnimation=null,t._gettingRewardAnimationRange=0,t._random=null,t._targetsAnimationsList=[],t}return a(t,e),t.prototype.onLoad=function(){var e;this._random=new m.Random,this._targetsAnimationsList=((e={})[l.TargetsList.livesBar]=this._livesBarGettingRewardAnimation,e[l.TargetsList.coinsBar]=this._coinsBarGettingRewardAnimation,e[l.TargetsList.playButton]=this._playButtonGettingRewardAnimation,e)},t.prototype.runWindowDisappearing=function(e){return this._runDisappearing(e,this._windowDisappearanceDuration)},t.prototype.runCloseButtonAppearing=function(e){return this._runAppearing(e,this._closeButtonAppearanceDuration)},t.prototype.runCloseButtonDisappearing=function(e){return this._runDisappearing(e,this._windowDisappearanceDuration)},t.prototype.runTargetsAppearing=function(e){return this._runAppearing(e,this._targetsAppearanceDuration)},t.prototype.runTargetsDisappearing=function(e){return this._runDisappearing(e,this._targetsDisappearanceDuration,this._targetsDisappearanceDelay)},t.prototype.runContentAppearing=function(e){var t=[],n=e.defaultItemsNumber/2,o=1,a=!1;return e.items.forEach(function(e,r){e.setDefault(),e.runIdleAnimatinos(),!1===a&&o===n+1&&(o=1,a=!0);var i=e.runAppearingAnimation(r,n,o++).then(function(){e.runAvailableItemIdle()});t.push(i)}),Promise.all(t)},t.prototype.runTitleAppearing=function(e){var t=this;e.opacity=s.AnimationKey.MIN_OPACITY;var n=e.position,o=e.angle,a=cc.tween(e).parallel(cc.tween().delay(this._titleOpacityDelay).to(this._titleOpacityDuration,{opacity:s.AnimationKey.MAX_OPACITY}),cc.tween().to(this._titlePositionAnimation.duration,{position:{value:n,progress:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var a=i(e,4),r=a[3];return cc.v2(n.x,n.y+t._titlePositionAnimation.getValueByTime(r))}}}),cc.tween().to(this._titleAngleAnimation.duration,{angle:{value:o,progress:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=i(e,4),r=a[3];return o+t._titleAngleAnimation.getValueByTime(r)}}}));return c.PromisifyTween.start(a)},t.prototype.runRewardTargetAnimation=function(e){var t=i(this._rewardTargetAnimationKeys,2),n=t[0],o=t[1],a=cc.tween(e).to(n.duration,{scale:n.scale}).to(o.duration,{scale:o.scale});return c.PromisifyTween.start(a)},t.prototype.runGettingReward=function(e){var t=this._targetsAnimationsList[e],n=cc.instantiate(t.node),o=n.getComponent(sp.Skeleton);n.parent=t.node.parent,n.active=!0,n.angle=this._random.getFloat(-this._gettingRewardAnimationRange,this._gettingRewardAnimationRange),o.animation="razlet"},t.prototype._runAppearing=function(e,t,n){void 0===n&&(n=0);var o=cc.tween(e).delay(n).to(t,{opacity:s.AnimationKey.MAX_OPACITY});return c.PromisifyTween.start(o)},t.prototype._runDisappearing=function(e,t,n){void 0===n&&(n=0);var o=cc.tween(e).delay(n).to(t,{opacity:s.AnimationKey.MIN_OPACITY});return c.PromisifyTween.start(o)},r([y({visible:!0,min:0})],t.prototype,"_windowDisappearanceDuration",void 0),r([y({visible:!0,min:0})],t.prototype,"_closeButtonAppearanceDuration",void 0),r([y({visible:!0,min:0})],t.prototype,"_targetsAppearanceDuration",void 0),r([y({visible:!0,min:0})],t.prototype,"_targetsDisappearanceDuration",void 0),r([y({visible:!0,min:0})],t.prototype,"_targetsDisappearanceDelay",void 0),r([y({visible:!0,min:0})],t.prototype,"_titleOpacityDelay",void 0),r([y({visible:!0,min:0})],t.prototype,"_titleOpacityDuration",void 0),r([y({type:p.BounceAnimation,visible:!0})],t.prototype,"_titlePositionAnimation",void 0),r([y({type:p.BounceAnimation,visible:!0})],t.prototype,"_titleAngleAnimation",void 0),r([y({type:[s.AnimationKey],visible:!0})],t.prototype,"_rewardTargetAnimationKeys",void 0),r([y({type:sp.Skeleton,visible:!0})],t.prototype,"_livesBarGettingRewardAnimation",void 0),r([y({type:sp.Skeleton,visible:!0})],t.prototype,"_coinsBarGettingRewardAnimation",void 0),r([y({type:sp.Skeleton,visible:!0})],t.prototype,"_playButtonGettingRewardAnimation",void 0),r([y({visible:!0,min:0})],t.prototype,"_gettingRewardAnimationRange",void 0),r([d],t)}(cc.Component);n.WindowAnimationComponent=f,cc._RF.pop()},{"./AnimationKey (scripts.windows.items.daily-reward.animation)":"AnimationKey (scripts.windows.items.daily-reward.animation)","./BounceAnimation (scripts.windows.items.daily-reward.animation)":"BounceAnimation (scripts.windows.items.daily-reward.animation)","./DailyRewardWindowComponent (scripts.windows.items.daily-reward)":"DailyRewardWindowComponent (scripts.windows.items.daily-reward)","./PromisifyTween (scripts.utils)":"PromisifyTween (scripts.utils)","./Random (@tapclap.utils-js.random)":"Random (@tapclap.utils-js.random)"}],"WindowButtonComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"f86608kpMNE2ZbsmL+iqVAA","WindowButtonComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowButtonComponent=void 0;var o,a,r,i,c,s,p,l,m=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),u=e("./WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=cc._decorator,v=g.ccclass,_=g.property,b=(o=_(m.WindowComponent),a=_(),r=_({type:[u.WindowEventArgumentsProperty]}),v((c=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return d(t=e.call.apply(e,[this].concat(o))||this,"windowComponent",s,y(t)),d(t,"eventName",p,y(t)),d(t,"args",l,y(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var a=o.prototype;return a.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onClick.bind(this))},a.onClick=function(){var e;(e=this.windowComponent).onButtonClick.apply(e,[this.eventName].concat(this.args.map(function(e){return e.value})))},o}(cc.Component),s=h(c.prototype,"windowComponent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h(c.prototype,"eventName",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=h(c.prototype,"args",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=c))||i);n.WindowButtonComponent=b,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)","./WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)":"WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)"}],"WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"0ab73mdrO5Q7pOjv7n6miDe","WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WindowByConditionalSceneResourcesResolver=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._windowKeys=t.windowKeys,n._conditionalAction=t.conditionalAction,n}return a(t,e),t.prototype.getLoadTasks=function(e){var t=this;return Promise.resolve().then(function(){return t._conditionalAction.check()}).then(function(n){return n?t._createTasks(t._windowKeys,e.windowConfig):Promise.resolve([])})},t}(e("./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)").SceneResourcesResolver);n.WindowByConditionalSceneResourcesResolver=r,cc._RF.pop()},{"./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"WindowComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"399f40nhCxM+oV174QdBkWo","WindowComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S=e("./EventEmitter (@tapclap.utils-js.events)"),E=e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)");function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function P(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var k=cc._decorator,T=k.ccclass,I=k.menu,M=k.property,j=(o=T("WindowLayoutHolder"),a=M({visible:!0}),r=M({type:cc.Enum({Node:0,SubLayout:1})}),i=M({type:cc.Node,visible:function(){return 0===this.type}}),c=M({visible:function(){return 1===this.type}}),o((l=P((p=function(){R(this,"key",l,this),R(this,"type",m,this),R(this,"node",u,this),R(this,"parent",d,this)}).prototype,"key",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=P(p.prototype,"type",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=P(p.prototype,"node",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=P(p.prototype,"parent",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=p))||s),L=(y=I("UI-Kit/WindowManager/WindowComponent"),f=M({visible:!0}),h=M({type:cc.Node,visible:function(){return!!this._hasButtonClose}}),g=M({type:[j],visible:!0}),T(v=y((_=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._events=new S.EventEmitter,R(t,"_hasButtonClose",b,A(t)),R(t,"_buttonClose",C,A(t)),R(t,"_layoutHolders",w,A(t)),t._layouts={},t._audioEffectsPlayer=null,t._audio={},t._key=null,t._initialScale=0,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,O(t,n);var a,r,i=o.prototype;return i.onLoad=function(){this._initialScale=this.node.scale},i._getLayoutHolder=function(e){return this._layoutHolders.find(function(t){return t.key===e})},i.playSound=function(e){this._audio[e]&&this._audioEffectsPlayer.play(this._audio[e])},i.show=function(){var e=this;return new Promise(function(t){e.node.scale=0,e.playSound("open"),e.node.runAction(cc.sequence([cc.scaleTo(.25,e._initialScale,e._initialScale).easing(cc.easeBackOut()),cc.callFunc(t)]))})},i.hide=function(){var e=this;return new Promise(function(t){e.playSound("close"),e.node.runAction(cc.sequence([cc.scaleTo(.25,0,0).easing(cc.easeBackIn()),cc.callFunc(t)]))})},i.emitEventClose=function(){return this.events.emit(o.EVENT_CLOSE)},i.setButtonCloseActive=function(e){this._hasButtonClose&&this._buttonClose&&(this._buttonClose.active=e)},i.updateTemplate=function(){},i.getLayout=function(e,t){void 0===t&&(t=null);var n=this._layouts[e];return t?n instanceof t&&n:n},i.setLayout=function(e,t){if(this._layouts[e]=t,t){t.window=this;var n=this._getLayoutHolder(e);if(n){if(0===n.type)n.node.addChild(t.node);else if(1===n.type){var o=this.getLayout(n.parent);o&&o.hasSubLayout?o.subLayout.addChild(t.node):cc.warn("Not found subLayout by key: "+e)}}else cc.warn("Not found layout holder by key: "+e)}},i.initialize=function(e,t){if(void 0===t&&(t={}),this._key=e,this._audio=t.audio,this._audioEffectsPlayer=t.audioEffectsPlayer,t.width&&(this.node.width=t.width),t.height&&(this.node.height=t.height),void 0!==t.buttonClose&&this.setButtonCloseActive(!!t.buttonClose),t.layouts)for(var n=0,o=Object.entries(t.layouts);n<o.length;n++){var a=o[n],r=a[0],i=a[1],c=cc.instantiateFrom(i.prefab).getComponent(E.WindowLayoutComponent);if(!c)throw new Error("Not found WindowLayoutComponent in prefab: "+i.prefab);if(c.window=this,c.initialize(i),this.setLayout(r,c),void 0!==i.active&&!i.active){var s=this._getLayoutHolder(r);s&&(s.node.active=!1)}}},a=o,(r=[{key:"key",get:function(){return this._key}},{key:"events",get:function(){return this._events}}])&&x(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),b=P(_.prototype,"_hasButtonClose",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=P(_.prototype,"_buttonClose",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P(_.prototype,"_layoutHolders",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=_))||v)||v);n.WindowComponent=L,L.EVENT_CLOSE=1,L.EVENT_SHOW=2,L.EVENT_SHOWN=3,L.EVENT_HIDE=4,L.EVENT_HIDDEN=5,L.EVENT_TOUCH_END="touchEnd",L.EVENT_DESTROY="destroy",cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"}],"WindowConfig (scripts.config)":[function(e,t,n){"use strict";cc._RF.push(t,"0f8c7KbRz9bWbMBJDFKlp6N","WindowConfig (scripts.config)"),n.__esModule=!0,n.WindowConfig=void 0,n.WindowConfig={common:{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/common/window",buttonClose:!0,layouts:{header:{prefab:"prefabs/windows/templates/common/header"},content:{prefab:"prefabs/windows/templates/common/content"},footer:{prefab:"prefabs/windows/templates/common/footer"}}},modern:{parent:"common",loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/modern/window",layouts:{header:{prefab:"prefabs/windows/templates/modern/header"}}},fullscreen:{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/fullscreen/window",buttonClose:!1},"fullscreen-wo-header":{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/fullscreen-wo-header/window",buttonClose:!1},book:{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/book/window",buttonClose:!0,layouts:{header:{prefab:"prefabs/windows/templates/book/header"},content:{prefab:"prefabs/windows/templates/book/content"},footer:{prefab:"prefabs/windows/templates/book/footer"}}},"cake-reward":{prefab:"prefabs/windows/templates/cake-reward/window",buttonClose:!0,layouts:{header:{title:"window.cakeReward.title",prefab:"prefabs/windows/templates/cake-reward/header"},content:{prefab:"prefabs/windows/templates/cake-reward/content"}}},piggybank:{parent:"modern",additionalButton:{prefab:"prefabs/controls/information",events:{click:"tutorial"}},layouts:{header:{title:"window.piggybank.title"},headerContent:{prefab:"prefabs/windows/layouts/piggybank/description"},content:{prefab:"prefabs/windows/layouts/piggybank/content"},footer:{prefab:"prefabs/windows/layouts/piggybank/footer"}}},"piggybank-tutorial":{parent:"modern",layouts:{header:{title:"window.piggybankTutorial.title"},headerContent:{prefab:"prefabs/windows/layouts/piggybank-tutorial/description"},content:{prefab:"prefabs/windows/layouts/piggybank-tutorial/content"},footer:{prefab:"prefabs/windows/layouts/piggybank-tutorial/footer"}}},menu:{parent:"common",layouts:{header:{title:"menu"},content:{prefab:"prefabs/windows/layouts/menu"},footer:{prefab:"prefabs/windows/templates/common/footer-vertical",controls:{policy:{prefab:"prefabs/controls/label-button",width:500,label:"privacyPolicy"},terms:{prefab:"prefabs/controls/label-button",width:500,label:"termsOfService"}}}}},"language-settings":{parent:"modern",layouts:{header:{title:"language"},content:{prefab:"prefabs/windows/layouts/language-settings",languageButton:{prefab:"prefabs/controls/button",style:"blue",width:300,height:82}}}},dailyReward:{prefab:"prefabs/windows/templates/daily-reward/window",buttonClose:!1,align:"top",layouts:{content:{prefab:"prefabs/windows/templates/daily-reward/layout",items:{default:{prefab:"prefabs/windows/templates/daily-reward/items/default",icon:{prefab:"prefabs/icons/prizes"}},final:{prefab:"prefabs/windows/templates/daily-reward/items/final",icon:{prefab:"prefabs/icons/prizes"}},ad:{prefab:"prefabs/windows/templates/daily-reward/items/ad",icon:{prefab:"prefabs/icons/prizes"}}}}}},episodes:{parent:"book",layouts:{header:{title:"recipes"},content:{prefab:"prefabs/windows/episodes-book/content-layout",item:{prefab:"prefabs/windows/episodes-book/book-item"}},footer:{active:!1}}},craft:{parent:"common",layouts:{header:{title:"getItem"},content:{prefab:"prefabs/windows/layouts/collect-item",item:{prefab:"prefabs/windows/items/collect-thing-item"}},footer:{spacing:20,controls:{button:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"primaryButtonClick"},label:"cook"},share:{prefab:"prefabs/controls/checkbox",events:{click:"share"},label:"share"}}}}},craftPart:{parent:"common",buttonClose:!1,layouts:{header:{title:"itemFound"},content:{prefab:"prefabs/windows/layouts/receive-item"},footer:{spacing:20,controls:{button:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"primaryButtonClick"},label:"claim"},share:{prefab:"prefabs/controls/checkbox",events:{click:"share"},label:"share"}}}},audio:{open:"openCraftWindow"}},boosterShop:{loadForScenes:["MetaGameCommon","Match3Game"],parent:"common",layouts:{header:{title:"header"},content:{prefab:"prefabs/windows/layouts/booster-buy"},footer:{spacing:20,controls:{purchase:{prefab:"prefabs/controls/buy-button",width:240,events:{click:"purchase"},label:"purchase"}}}}},friends:{parent:"common",layouts:{header:{title:"friends"},content:{prefab:"prefabs/windows/layouts/friends",item:{prefab:"prefabs/windows/items/friend-item"}},footer:{controls:{invite:{prefab:"prefabs/controls/button",style:"blue",width:300,events:{click:"invite"},label:"invite"}}}}},"message-center":{prefab:"prefabs/windows/templates/message-center/window",buttonClose:!0,layouts:{content:{prefab:"prefabs/windows/templates/message-center/content",defaultTabKey:"friends",tabsButtonPrefab:{prefab:"prefabs/windows/templates/message-center/tabs/tab-button"},tabs:{friends:{badge:!1,prefab:"prefabs/windows/templates/message-center/tabs/friends-tab-layout",label:"friends",icon:"friends",contentHolder:{prefab:"prefabs/windows/templates/message-center/scroll-holder"},content:[{prefab:"prefabs/windows/templates/message-center/items/common",type:"common",states:{default:{elements:["place-number","level","coin","avatar"],controls:[{key:"request-lives",prefab:"prefabs/controls/message-button",style:"request-lives",label:"window.messageCenter.ask",events:{click:"request-lives"}}]},disabled:{elements:["place-number","level","coin","avatar"],controls:[{key:"request-lives",prefab:"prefabs/controls/message-button",style:"request-lives-complete",grayscale:!0,label:"window.messageCenter.ask",events:{click:"request-lives"}}]}}}]},messages:{badge:!0,prefab:"prefabs/windows/templates/message-center/tabs/mail-tab-layout",label:"window.messageCenter.mail",icon:"mail",contentHolder:{prefab:"prefabs/windows/templates/message-center/scroll-holder"},content:[{prefab:"prefabs/windows/templates/message-center/items/common",type:"common",states:{default:{elements:["caption","avatar"],caption:"window.messageCenter.askForLive",controls:[{key:"send-lives",prefab:"prefabs/controls/message-button",style:"send-lives",events:{click:"send-lives"},label:"window.messageCenter.send"}]},disabled:{elements:["caption","avatar"],additionalInformation:"window.messageCenter.askForLive",controls:[{key:"send-lives",prefab:"prefabs/controls/message-button",grayscale:!0,style:"send-lives-complete",label:"window.messageCenter.send"}]}}},{prefab:"prefabs/windows/templates/message-center/items/receive-lives",type:"pinned",states:{default:{label:"window.messageCenter.friendsSentLives",controls:[{key:"receive-lives",prefab:"prefabs/controls/message-button",style:"receive-lives",events:{click:"receive-lives"},label:"claim"}]},disabled:{label:"window.messageCenter.friendsSentLives",controls:[{key:"receive-lives",prefab:"prefabs/controls/message-button",style:"receive-lives-unavailable",grayscale:!0,label:"claim"}]},complete:{label:"window.messageCenter.friendsSentLives",controls:[{key:"receive-lives",prefab:"prefabs/controls/message-button",style:"receive-lives-complete",label:"window.messageCenter.received"}]}}}]}}}}},startLevel:{parent:"common",layouts:{header:{title:"level"},content:{prefab:"prefabs/windows/start-level/start-level",item:{prefab:"prefabs/windows/start-level/start-level-goal-item",icon:{prefab:"prefabs/icons/empty"}}},footer:{controls:{start:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"start"},label:"start"}}}}},startLevelWithBoosters:{parent:"common",prefab:"prefabs/windows/templates/start-level-with-boosters/window",layouts:{header:{prefab:"prefabs/windows/templates/common/header-transparent",title:"level"},content:{prefab:"prefabs/windows/start-level/start-level-with-boosters",itemGoal:{prefab:"prefabs/windows/start-level/start-level-goal-item",icon:{prefab:"prefabs/icons/empty"}},itemBooster:{prefab:"prefabs/windows/start-level/start-level-booster-item",icon:{prefab:"prefabs/icons/empty"}}},footer:{prefab:"prefabs/windows/templates/common/footer-transparent",controls:{start:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"start"},label:"start"}}}}},startHardLevel:{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/templates/start-hard-level/window",layouts:{header:{prefab:"prefabs/windows/templates/start-hard-level/header",title:"level"},content:{prefab:"prefabs/windows/start-level/start-level-with-boosters",itemGoal:{prefab:"prefabs/windows/start-level/start-level-goal-item",icon:{prefab:"prefabs/icons/empty"}},itemBooster:{prefab:"prefabs/windows/start-level/start-level-booster-item",icon:{prefab:"prefabs/icons/empty"}}},footer:{prefab:"prefabs/windows/templates/common/footer-transparent",controls:{start:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"start"},label:"start"}}}}},episodesStarsRewardAvailable:{parent:"common",layouts:{header:{title:"episodesStarsReward.title"},headerContent:{prefab:"prefabs/windows/layouts/episodes-stars-reward/header"},content:{prefab:"prefabs/windows/layouts/episodes-stars-reward/content",item:{prefab:"prefabs/windows/items/episodes-stars-reward-item"}},footer:{prefab:"prefabs/windows/templates/common/footer",controls:{claimButton:{prefab:"prefabs/controls/button",style:"green",width:350,events:{click:"claim"},label:"claimPrize"},completeButton:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"complete"},label:"complete"},share:{prefab:"prefabs/controls/checkbox",events:{click:"share"},label:"share"}}}},audio:{open:"openStarsRewardWindow",openBox:"openStarsRewardBox"}},episodesStarsRewardUnavailable:{parent:"common",layouts:{header:{title:"episodesStarsReward.title"},headerContent:{prefab:"prefabs/windows/layouts/episodes-stars-reward/header"},content:{prefab:"prefabs/windows/layouts/episodes-stars-reward/content",item:{prefab:"prefabs/windows/items/episodes-stars-reward-item"}},footer:{prefab:"prefabs/windows/templates/common/footer",controls:{closeButton:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"close"},label:"ok"}}}}},specialLevelsPrize:{parent:"common",layouts:{header:{title:"episodesStarsReward.title"},headerContent:{prefab:"prefabs/windows/layouts/special-levels/header"},content:{prefab:"prefabs/windows/layouts/episodes-stars-reward/content",item:{prefab:"prefabs/windows/items/episodes-stars-reward-item"}},footer:{prefab:"prefabs/windows/templates/common/footer",controls:{claimButton:{prefab:"prefabs/controls/button",style:"green",width:350,events:{click:"claim"},label:"claimPrize"}}}}},exitLevel:{loadForScenes:["Match3Game"],parent:"common",layouts:{header:{title:"wantExit"},content:{prefab:"prefabs/windows/layouts/exit-level",spacing:20,controls:{exit:{prefab:"prefabs/controls/button",style:"red",width:240,events:{click:"exit"},label:"exit"},stay:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"stay"},label:"stay"}}}}},shop:{parent:"fullscreen-wo-header",buttonClose:!0,align:"top",layouts:{content:{prefab:"prefabs/windows/shop/prefabs/shop-layout",items:{"ad-coins":{prefab:"prefabs/windows/shop/prefabs/items/small/shop-item-ad-coins"},"ad-lives":{prefab:"prefabs/windows/shop/prefabs/items/shop-item-ad-lives"},coins:{prefab:"prefabs/windows/shop/prefabs/items/small/shop-item"},coinsSale:{prefab:"prefabs/windows/shop/prefabs/items/small/shop-item-coins-sale"},coinsSaleAddUnlimited:{prefab:"prefabs/windows/shop/prefabs/items/small/shop-item-coins-sale-add"},lives:{prefab:"prefabs/windows/shop/prefabs/items/shop-item"},booster:{prefab:"prefabs/windows/shop/prefabs/items/shop-item-bundle"},attemptsFromFriends:{prefab:"prefabs/windows/shop/prefabs/items/shop-item-attempts-from-friends"}}}}},winLevel:{loadForScenes:["Match3Game"],parent:"fullscreen-wo-header",buttonClose:!0,layouts:{content:{prefab:"prefabs/windows/win-level/content-layout"}},audio:{open:"openWinGameWindow",star1:"reachLevelStar1",star2:"reachLevelStar2",star3:"reachLevelStar3"}},loseLevel:{loadForScenes:["Match3Game"],parent:"fullscreen-wo-header",layouts:{content:{prefab:"prefabs/windows/lose-level/layouts/lose-level-default"}},audio:{open:"openLoseGameWindow",purchaseMoves:"purchaseMovesWhenLose"}},"tutorial-square":{loadForScenes:["Match3Game"],parent:"fullscreen",layouts:{content:{prefab:"prefabs/windows/layouts/special-levels/tutorial-square"}}},bombExplodeLevel:{parent:"common",layouts:{header:{title:"match3.bombExplodeWindow.title"},content:{prefab:"prefabs/windows/lose-level/layouts/lose-level-explode-bomb"},footer:{spacing:20,controls:{purchase:{prefab:"prefabs/controls/buy-button",width:240,events:{click:"selectOffer"},label:"purchase"},ad:{prefab:"prefabs/controls/ad-button",width:240,events:{click:"selectOffer"},label:"free"}}}},audio:{open:"openLoseGameWindow",purchaseMoves:"purchaseMovesWhenLose"}},parrotFailWalk:{parent:"common",layouts:{header:{title:"match3.parrotFailWalkWindow.title"},content:{prefab:"prefabs/windows/lose-level/layouts/lose-level-parrot-fail-walk"},footer:{spacing:20,controls:{purchase:{prefab:"prefabs/controls/buy-button",width:240,events:{click:"selectOffer"},label:"purchase"},ad:{prefab:"prefabs/controls/ad-button",width:240,events:{click:"selectOffer"},label:"free"}}}},audio:{open:"openLoseGameWindow",purchaseMoves:"purchaseMovesWhenLose"}},noFunds:{loadForScenes:["MetaGameCommon","Match3Game"],parent:"common",buttonClose:!0,layouts:{header:{title:"noFunds.title"},content:{prefab:"prefabs/windows/layouts/no-funds"},footer:{controls:{purchase:{prefab:"prefabs/controls/button",style:"green",width:240,events:{click:"purchase"},label:"purchase"}}}}},connectionLost:{loadForScenes:["MetaGameCommon","Match3Game"],parent:"common",buttonClose:!1,layouts:{header:{title:"connectionLost"},content:{prefab:"prefabs/windows/layouts/connection-lost"},footer:{spacing:20,controls:{tryAgain:{prefab:"prefabs/controls/button",style:"blue",fontSize:30,width:350,events:{click:"buttonClick"},label:"tryAgain"}}}}},sessionExpired:{parent:"common",buttonClose:!1,layouts:{header:{title:"sessionError"},content:{prefab:"prefabs/windows/layouts/session-expired"},footer:{spacing:20,controls:{tryAgain:{prefab:"prefabs/controls/button",style:"blue",fontSize:30,width:350,events:{click:"buttonClick"},label:"exit"}}}}},userId:{parent:"common",buttonClose:!0,layouts:{header:{title:"window.userId.title"},content:{prefab:"prefabs/windows/layouts/user-id"},footer:{spacing:20,controls:{copy:{prefab:"prefabs/controls/button",style:"blue",fontSize:30,width:350,events:{click:"buttonClick"},label:"window.userId.copy"}}}}},notificationRequest:{loadForScenes:["MetaGameCommon","Match3Game"],parent:"common",buttonClose:!0,layouts:{header:{prefab:"prefabs/windows/templates/common/header-transparent",title:"window.notificationRequest.title"},content:{prefab:"prefabs/windows/layouts/image"},footer:{spacing:20,controls:{tryAgain:{prefab:"prefabs/controls/button",style:"green",fontSize:30,width:350,events:{click:"buttonClick"},label:"window.notificationRequest.subscribe"}}}}},webView:{parent:"fullscreen-wo-header",buttonClose:!0,layouts:{content:{prefab:"prefabs/windows/layouts/webview"}}},thousandthsLevelReward:{parent:"modern",layouts:{header:{title:"thousandthsLevelReward.title"},content:{prefab:"prefabs/windows/layouts/thousandths-level-reward/content",title:"thousandthsLevelReward.description"},footer:{prefab:"prefabs/windows/layouts/thousandths-level-reward/footer",desctiption:"thousandthsLevelReward.footerDescription",prizeItem:{prefab:"prefabs/windows/layouts/thousandths-level-reward/item"},controls:{share:{prefab:"prefabs/controls/checkbox",events:{click:"share"},label:"share"},claimButton:{prefab:"prefabs/controls/button",style:"green",width:250,events:{click:"claim"},label:"thousandthsLevelReward.claimPrize"}}}}},"platform-promo-gift":{loadForScenes:["MetaGameCommon"],prefab:"prefabs/windows/platform-promo-gift/window",buttonClose:!1,layouts:{content:{prefab:"prefabs/windows/platform-promo-gift/content"}}}},cc._RF.pop()},{}],"WindowController (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"b58ea1S4aVM45KZ48ZOLf5v","WindowController (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowController=void 0;var o,a=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=(0,cc._decorator.ccclass)(o=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i._appendWindow=function(e){null===e.node.parent&&this.node.addChild(e.node)},i.show=function(e){var t=this;return Promise.resolve().then(function(){return t._appendWindow(e)}).then(function(){return e.events.emit(a.WindowComponent.EVENT_SHOW)}).then(function(){return e.show()}).then(function(){return e.events.emit(a.WindowComponent.EVENT_SHOWN)}).then(function(){var n=function(){return e.events.emit(a.WindowComponent.EVENT_TOUCH_END)};t.node.on(cc.Node.EventType.TOUCH_END,n),e.events.on(a.WindowComponent.EVENT_HIDE,function(){t.node.off(cc.Node.EventType.TOUCH_END,n)})})},i.hide=function(e){return Promise.resolve().then(function(){return e.events.emit(a.WindowComponent.EVENT_HIDE)}).then(function(){return e.hide()}).then(function(){return e.events.emit(a.WindowComponent.EVENT_HIDDEN)})},i.open=function(e){return this.show(e)},i.close=function(e){return this.hide(e).then(function(){return e.events.emit(a.WindowComponent.EVENT_DESTROY),e.node.destroy()})},o}(cc.Component))||o;n.WindowController=i,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";var o,a,r,i,c;function s(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}cc._RF.push(t,"ae88fBeGA9MoasGNxicr7rI","WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowEventArgumentsProperty=void 0;var p,l,m,u,d=cc._decorator,y=d.ccclass,f=d.property,h=(o=y("WindowEventArguments"),a=f(cc.String),o((p=(i=function(){s(this,"value",c,this)}).prototype,l=[a],m={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}},u={},Object.keys(m).forEach(function(e){u[e]=m[e]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),void 0===(u=l.slice().reverse().reduce(function(e,t){return t(p,"value",e)||e},u)).initializer&&(Object.defineProperty(p,"value",u),u=null),c=u,r=i))||r);n.WindowEventArgumentsProperty=h,cc._RF.pop()},{}],"WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"07eaaSdMFtCeJ8KT74v7xwf","WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowEventHandlerComponent=void 0;var o=e("./EventEmitter (@tapclap.utils-js.events)");function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n,i,c;function s(){var t;return(t=e.call(this)||this)._events=new o.EventEmitter,t}return n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),i=s,(c=[{key:"events",get:function(){return this._events}}])&&a(i.prototype,c),Object.defineProperty(i,"prototype",{writable:!1}),s}(cc.Component);n.WindowEventHandlerComponent=i,cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"WindowFactory (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"fd26ds69PddJ7S3AlnRn6YT","WindowFactory (@tapclap.game-kit.ui.window-manager)");var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.WindowFactory=void 0;var a=o(e("merge-options")),r=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),i=function(){function e(e,t,n){void 0===e&&(e={}),void 0===n&&(n={}),this._windows={},this._defaultOptions={},this._windows=e,this._audioEffectsPlayer=t,this._defaultOptions=n}return e.prototype._createWindow=function(e,t){var n=cc.instantiateFrom(t.prefab).getComponent(r.WindowComponent);if(n)return n.initialize(e,t),n;throw new Error("Not found WindowComponent in prefab: "+t.prefab)},e.prototype.create=function(e,t){void 0===t&&(t={});var n=this._windows[e];if(n){if(n.parent){if(!this._windows[n.parent])throw new Error("Not found parent window path by key: "+n.parent);n=a.default({},this._windows[n.parent],n)}return this._createWindow(e,a.default({},{audioEffectsPlayer:this._audioEffectsPlayer},this._defaultOptions,n,t))}throw new Error("Not found window path by key: "+e)},e.prototype.setConfig=function(e){this._windows=e},e.prototype.getConfig=function(){return this._windows},e}();n.WindowFactory=i,cc._RF.pop()},{"./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)","merge-options":3}],"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":[function(e,t,n){"use strict";cc._RF.push(t,"f1a2bd2CeJDLb38Fcv/vhoG","WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"),n.__esModule=!0,n.WindowItemComponent=void 0;var o,a,r,i,c,s,p,l,m,u,d,y,f,h,g,v,_,b,C,w,S,E,x,A,O,R,P,k,T,I,M,j,L,F,D,B,G,N,W,H=e("./IconComponent (@tapclap.game-kit.ui.icons)"),V=e("./I18NLabel (@tapclap.game-kit.i18n.components)");function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function q(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var Z=cc._decorator,X=Z.ccclass,J=Z.property,Q=(o=X("WindowItemStyle"),a=J(cc.Color),r=J(cc.Color),i=J(cc.SpriteFrame),c=J(cc.SpriteFrame),o((l=q((p=function(){z(this,"color",l,this),z(this,"outline",m,this),z(this,"header",u,this),z(this,"icon",d,this)}).prototype,"color",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),m=q(p.prototype,"outline",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new cc.Color}}),u=q(p.prototype,"header",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=q(p.prototype,"icon",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=p))||s),$=(y=J({type:cc.Sprite,visible:!0}),f=J({type:cc.Label,visible:!0}),h=J({type:cc.Label,visible:!0}),g=J({type:V.I18NLabel,visible:!0}),v=J({type:cc.Node,visible:!0}),_=J({type:cc.Node,visible:!0}),b=J({type:H.IconComponent,visible:!0}),C=J({type:Q,visible:!0}),w=J({type:Q,visible:!0}),S=J({type:Q,visible:!0}),E=J({type:cc.Enum({Unavailable:0,Available:1,Received:2})}),x=J({type:cc.Enum({Unavailable:0,Available:1,Received:2})}),A=J({visible:function(){return!!this._title}}),O=J({visible:function(){return!!this._label}}),R=J({visible:function(){return!!this._icon}}),X((k=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return z(t=e.call.apply(e,[this].concat(o))||this,"_header",T,U(t)),z(t,"_title",I,U(t)),z(t,"_label",M,U(t)),z(t,"_i18nLabel",j,U(t)),z(t,"_iconHolder",L,U(t)),z(t,"_iconStyle",F,U(t)),z(t,"_icon",D,U(t)),z(t,"_unavailableStyle",B,U(t)),z(t,"_availableStyle",G,U(t)),z(t,"_receivedStyle",N,U(t)),z(t,"_style",W,U(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,Y(t,n);var a,r,i=o.prototype;return i.setIconFromPrefab=function(e){this._iconHolder&&this._iconHolder.addChild(cc.instantiateFrom(e))},i.initialize=function(e){if(e.icon&&this._iconHolder){var t=cc.instantiateFrom(e.icon.prefab),n=t.getComponent(H.IconComponent);n&&(n.initialize(e.icon),this._iconHolder.addChild(t),this._icon=n,e.icon.key&&(this.icon=e.icon.key))}e.clickHandler&&this.node.on(cc.Node.EventType.TOUCH_END,e.clickHandler)},i.setIconShadow=function(e,t){void 0===t&&(t={}),this._icon.setShadow(e,t)},a=o,(r=[{key:"style",get:function(){return this._style},set:function(e){this._style=e;var t=this._unavailableStyle;switch(e){case o.ITEM_RECEIVED:t=this._receivedStyle;break;case o.ITEM_AVAILABLE:t=this._availableStyle}if(this._header&&(this._header.spriteFrame=t.header),this._title){this._title.node.color=t.color;var n=this._title.getComponent(cc.LabelOutline);n&&(n.color=t.outline)}if(this._iconStyle){var a=this._iconStyle.getComponent(cc.Sprite);a&&(a.spriteFrame=t.icon),this._iconStyle===this._iconHolder&&t.icon&&this._icon&&(this._icon.icon="")}}},{key:"title",get:function(){return this._title?this._title.string:""},set:function(e){var t=this._title.node.getComponent(V.I18NLabel);t?t.setString(e):this._title.string=e}},{key:"label",get:function(){return this._label?this._label.string:""},set:function(e){if(e=e||"",this._label){var t=this._label.node.getComponent(V.I18NLabel);t?t.setString(e):this._label.string=e,this._label.string=e}}},{key:"icon",get:function(){return this._icon?this._icon.icon:""},set:function(e){this._icon&&(this._icon.icon=e.toString())}},{key:"iconComponent",get:function(){return this._icon}},{key:"iconHolder",get:function(){return this._iconHolder}}])&&K(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),T=q(k.prototype,"_header",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=q(k.prototype,"_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=q(k.prototype,"_label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=q(k.prototype,"_i18nLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=q(k.prototype,"_iconHolder",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=q(k.prototype,"_iconStyle",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=q(k.prototype,"_icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=q(k.prototype,"_unavailableStyle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Q}}),G=q(k.prototype,"_availableStyle",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Q}}),N=q(k.prototype,"_receivedStyle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Q}}),W=q(k.prototype,"_style",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q(k.prototype,"style",[x],Object.getOwnPropertyDescriptor(k.prototype,"style"),k.prototype),q(k.prototype,"title",[A],Object.getOwnPropertyDescriptor(k.prototype,"title"),k.prototype),q(k.prototype,"label",[O],Object.getOwnPropertyDescriptor(k.prototype,"label"),k.prototype),q(k.prototype,"icon",[R],Object.getOwnPropertyDescriptor(k.prototype,"icon"),k.prototype),P=k))||P);n.WindowItemComponent=$,$.ITEM_RECEIVED=2,$.ITEM_AVAILABLE=1,$.ITEM_UNAVAILABLE=0,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)"}],"WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)":[function(e,t,n){"use strict";cc._RF.push(t,"f509890VxVZsrUrWj2jv9I4","WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)"),n.__esModule=!0,n.WindowKeyResolver=void 0;var o=function(){function e(){}return e.prototype.getKey=function(){},e}();n.WindowKeyResolver=o,cc._RF.pop()},{}],"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";cc._RF.push(t,"e575dC2gt1AzrhHAflMJz5U","WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowLayoutComponent=void 0;var o,a,r,i,c,s,p,l,m=(o=e("merge-options"))&&o.__esModule?o:{default:o},u=e("./ControlComponent (@tapclap.game-kit.ui.controls)");function d(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var v=cc._decorator,_=v.ccclass,b=v.menu,C=v.property,w=(a=b("UI-Kit/WindowManager/WindowLayoutComponent"),r=C({visible:!0}),i=C({type:cc.Node,visible:function(){return!!this._hasSubLayout}}),_(c=a((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._options={},t._window=null,d(t,"_hasSubLayout",p,f(t)),d(t,"_subLayout",l,f(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var a,r,i=o.prototype;return i._instantiateLayout=function(e,t,n,a){var r=cc.instantiateFrom(t.prefab);e.addChild(r),void 0!==a&&r.setSiblingIndex(a);var i=r.getComponent(o);i.window=this._window,i.initialize(t),n&&i.setContent(n);var c=e.getComponent(cc.Layout);return c&&c.updateLayout(),i},i._replaceLayout=function(e,t,n,o){var a=o.getSiblingIndex(),r=e.getComponent(cc.Layout);r&&(r.enabled=!1),o.destroy();var i=this._instantiateLayout(e,t,n,a);return r&&(r.enabled=!0),i},i._clearRoot=function(e){e.destroyAllChildren();var t=e.getComponent(cc.Layout);t&&t.updateLayout()},i._instantiateControl=function(e,t){var n=this,o=cc.instantiateFrom(t.prefab),a=o.getComponent(u.ControlComponent);return a.initialize(t),t.events&&Object.entries(t.events).forEach(function(e){var t=e[0],o=e[1];a.events.on(t,n._window.events.emit.bind(n._window.events,o))}),e.height=Math.max(e.height,o.height),e.width=Math.max(e.width,o.width),e.addChild(o),a},i.initialize=function(e){void 0===e&&(e={}),this._options=(0,m.default)(this._options,e)},i.setContent=function(){throw new Error("Method not implemented")},a=o,(r=[{key:"hasSubLayout",get:function(){return this._hasSubLayout}},{key:"subLayout",get:function(){return this._subLayout}},{key:"window",get:function(){return this._window},set:function(e){this._window=e}}])&&y(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),o}(cc.Component),p=g(s.prototype,"_hasSubLayout",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=g(s.prototype,"_subLayout",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c)||c);n.WindowLayoutComponent=w,cc._RF.pop()},{"./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","merge-options":3}],"WindowLazyLoader (scripts.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"80228Y7NOlVcpbwIzsCWKtz","WindowLazyLoader (scripts.loader)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WindowLazyLoader=void 0;var o=e("./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"),a=e("./BundleLoadTask (@tapclap.game-kit.loader)"),r=e("./Loader (@tapclap.game-kit.loader)"),i=function(){function e(e){var t,n=e.windowFactory;for(var o in this._loadInfo={},this._progress=0,this._windowConfig=n.getConfig(),this._windowConfig)(null===(t=this._windowConfig[o])||void 0===t?void 0:t.loadImmediatly)?this._loadInfo[o]=!0:this._loadInfo[o]=!1}return e.prototype.isLoaded=function(e){if(Object.prototype.hasOwnProperty.call(this._loadInfo,e))return this._loadInfo[e];throw new Error("Not found window info by key: "+e)},e.prototype.load=function(e){var t=this;if(this.isLoaded(e))return Promise.resolve();this._progress=0;var n=(new o.PrefabResourceExtractor).extract(this._windowConfig[e]),i=new r.Loader(n.map(function(e){return new a.BundleLoadTask(e)}));return i.on(r.Loader.EVENT_COMPLETE,function(){t._loadInfo[e]=!0}),i.on(r.Loader.EVENT_PROGRESS,function(e){t._progress=e}),i.on(r.Loader.EVENT_ERROR,function(e,t,n){throw e?{name:"Error in task with descriptions: "+n.description,message:e.message,stack:e.stack}:{name:"unknown error",message:"",stack:""}}),i.load()},e.prototype.getProgress=function(){return this._progress},e}();n.WindowLazyLoader=i,cc._RF.pop()},{"./BundleLoadTask (@tapclap.game-kit.loader)":"BundleLoadTask (@tapclap.game-kit.loader)","./Loader (@tapclap.game-kit.loader)":"Loader (@tapclap.game-kit.loader)","./PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)":"PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)"}],"WindowLazyLoaderSpinerComponent (scripts.windows.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"1970bbytUldPYB3r1n++e/Q","WindowLazyLoaderSpinerComponent (scripts.windows.loader)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0}),n.WindowLazyLoaderSpinerComponent=void 0;var i=e("./I18NLabel (@tapclap.game-kit.i18n.components)"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadText=null,t._spinnerAnimation=null,t._spinner=null,t._startOnLoad=!0,t}return a(t,e),t.prototype.onLoad=function(){this._loadText.setString("loading"),this._startOnLoad&&this.startSpinner()},t.prototype.startSpinner=function(){this._spinner&&(this._spinner.active=!0,this._spinnerAnimation.play())},t.prototype.stopSpinner=function(){this._spinner&&(this._spinnerAnimation.stop(),this._spinner.active=!1)},r([p({type:i.I18NLabel,visible:!0})],t.prototype,"_loadText",void 0),r([p({type:cc.Animation,visible:!0})],t.prototype,"_spinnerAnimation",void 0),r([p({type:cc.Node,visible:!0})],t.prototype,"_spinner",void 0),r([p({visible:!0})],t.prototype,"_startOnLoad",void 0),r([s],t)}(cc.Component);n.WindowLazyLoaderSpinerComponent=l,cc._RF.pop()},{"./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)"}],"WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)":[function(e,t,n){"use strict";var o,a,r,i,c,s,p,l,m;function u(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,o,a){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}cc._RF.push(t,"dbfd7pQhjlOtI92EcqOZgJE","WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"),n.__esModule=!0,n.WindowLoadSpinnerComponent=void 0;var h=cc._decorator,g=h.ccclass,v=h.menu,_=h.property,b=(o=v("UI-Kit/Spinner/WindowLoadSpinnerComponent"),a=_({type:cc.Float,visible:!0}),r=_({type:cc.Node,visible:!0}),i=_({visible:!0}),g(c=o((s=function(e){var t,n;function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return u(t=e.call.apply(e,[this].concat(o))||this,"_duration",p,d(t)),u(t,"_spinner",l,d(t)),u(t,"_startOnLoad",m,d(t)),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var a=o.prototype;return a.onLoad=function(){this._startOnLoad&&this.startSpinner()},a.startSpinner=function(){this._spinner&&(this._spinner.active=!0,this._spinner.runAction(cc.repeatForever(cc.rotateBy(this._duration,-360))))},a.stopSpinner=function(){this._spinner&&(this._spinner.stopAllActions(),this._spinner.active=!1)},o}(cc.Component),p=f(s.prototype,"_duration",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),l=f(s.prototype,"_spinner",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f(s.prototype,"_startOnLoad",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=s))||c)||c);n.WindowLoadSpinnerComponent=b,cc._RF.pop()},{}],"WindowManager (@tapclap.game-kit.ui.window-manager)":[function(e,t,n){"use strict";var o;function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"8375dkRmxVMLoVphKtPBW2G","WindowManager (@tapclap.game-kit.ui.window-manager)"),n.__esModule=!0,n.WindowManager=void 0;var r=function(e){var t,n;function o(t){var n;return(n=e.call(this)||this)._windows=[],n._controller=null,n._windowActionPromise=Promise.resolve(),n._windowFactory=t,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var r=o.prototype;return r._getCurrentWindow=function(){return this._windows[0]},r._runWindowAction=function(e,t){var n=this;if(e){var a=o.ACTION_EVENTS[t],r=a.begin,i=a.end;this._windowActionPromise=this._windowActionPromise.then(function(){return Promise.resolve().then(function(){return n.emit(r,e)}).then(function(){return n._controller[t].call(n._controller,e)}).then(function(){return n.emit(i,e)})})}return this._windowActionPromise},r._runWindowEvent=function(e){var t=this;this._windowActionPromise=this._windowActionPromise.then(function(){return t.emit(e)})},r._emitEventOnNoWindows=function(e){0===this._windows.length&&this._runWindowEvent(e)},r.setController=function(e){this._controller=e},r.getController=function(){return this._controller},r.queue=function(e){0===this._windows.length?this.open(e):e instanceof Array?this._windows=[].concat(this._windows,e):this._windows.push(e)},r.open=function(e){this._emitEventOnNoWindows(o.EVENT_OPEN_WINDOWS);var t=this._getCurrentWindow();return e instanceof Array?this._windows=[].concat(e,this._windows):this._windows.unshift(e),t&&this._runWindowAction(t,o.ACTION_HIDE),this._runWindowAction(e,o.ACTION_SHOW)},r.close=function(e){var t=this._windows.indexOf(e);-1!==t&&this._windows.splice(t,1);var n=this._runWindowAction(e,o.ACTION_CLOSE);if(0===t){var a=this._getCurrentWindow();a&&this._runWindowAction(a,o.ACTION_SHOW)}return this._emitEventOnNoWindows(o.EVENT_CLOSE_WINDOWS),n},r.create=function(e,t){return this._windowFactory.create(e,t)},r.removeAllWindows=function(){this._windows=[],this._windowActionPromise=Promise.resolve()},r.getWindowCount=function(){return this._windows.length},r.closeCurrentWindow=function(){var e=this._getCurrentWindow();return e?this.close(e):Promise.resolve()},o}(e("./EventEmitter (@tapclap.utils-js.events)").EventEmitter);n.WindowManager=r,r.ACTION_CLOSE="close",r.ACTION_HIDE="hide",r.ACTION_SHOW="show",r.EVENT_OPEN_WINDOWS="openWindows",r.EVENT_CLOSE_WINDOWS="closeWindows",r.EVENT_SHOW="show",r.EVENT_SHOWN="shown",r.EVENT_HIDE="hide",r.EVENT_HIDDEN="hidden",r.ACTION_EVENTS=((o={})[r.ACTION_CLOSE]={begin:r.EVENT_HIDE,end:r.EVENT_HIDDEN},o[r.ACTION_HIDE]={begin:r.EVENT_HIDE,end:r.EVENT_HIDDEN},o[r.ACTION_SHOW]={begin:r.EVENT_SHOW,end:r.EVENT_SHOWN},o),cc._RF.pop()},{"./EventEmitter (@tapclap.utils-js.events)":"EventEmitter (@tapclap.utils-js.events)"}],"WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"582c1fGYwRdULLjPV0D/tCJ","WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WindowTargetResolver=void 0;var r=e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),i=function(e){function t(t){var n=e.call(this)||this;return n._windowManager=null,n._windowManager=t.windowManager,n}return a(t,e),t.prototype.resolveTarget=function(t){var n=this._windowManager.getController().node.getComponentsInChildren(r.WindowComponent).find(function(e){return e.key===t.key});return n?t.name?[this._findNode(t.name,n.node)]:[n.node]:e.prototype.resolveTarget.call(this,t)},t.prototype._findNode=function(e,t){if(t.name==e)return t;for(var n=0;n<t.children.length;n++){var o=this._findNode(e,t.children[n]);if(o)return o}},t}(e("./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)").ScenarioTargetResolver);n.WindowTargetResolver=i,cc._RF.pop()},{"./ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)":"ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)"}],"WindowsAppLoader (scripts.loader)":[function(e,t,n){"use strict";cc._RF.push(t,"300964t75xSGrYePk6qDIfT","WindowsAppLoader (scripts.loader)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.WindowsAppLoader=void 0;var i=function(e){function t(t){var n=t.windowsConfig,o=t.windowFactory,a=t.handlers,r=e.call(this)||this;return r._windowsConfig=n,r._windowFactory=o,r._handlers=a,r}return a(t,e),t.prototype.load=function(){var e,t,n=this,o=Promise.resolve(this._windowsConfig),a=function(e){o=o.then(function(t){return e.handle(t)})};try{for(var i=r(this._handlers),c=i.next();!c.done;c=i.next())a(c.value)}catch(s){e={error:s}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o.then(function(e){n._windowFactory.setConfig(e)})},t}(e("./AppLoader (scripts.loader)").AppLoader);n.WindowsAppLoader=i,cc._RF.pop()},{"./AppLoader (scripts.loader)":"AppLoader (scripts.loader)"}],"WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)":[function(e,t,n){"use strict";cc._RF.push(t,"efa4esCgdVT3LsDle920CtI","WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)"),Object.defineProperty(n,"__esModule",{value:!0}),n.WindowsAppLoaderHandler=void 0;n.WindowsAppLoaderHandler=function(){},cc._RF.pop()},{}],"WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":[function(e,t,n){"use strict";cc._RF.push(t,"b24e7gnnWJXV7eOhDjHVJmi","WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WindowsSceneResourcesResolver=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._metaGame=t.gameResolver.get(),n}return a(t,e),t.prototype.getLoadTasks=function(e){var t=e.scene||this._metaGame.scene.split("/").pop(),n=[];for(var o in e.windowConfig)e.windowConfig[o].loadForScenes&&e.windowConfig[o].loadForScenes.includes(t)&&n.push(o);return this._createTasks(n,e.windowConfig)},t}(e("./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)").SceneResourcesResolver);n.WindowsSceneResourcesResolver=r,cc._RF.pop()},{"./SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)":"SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)"}],"World (@tapclap.match-x.engine.entities)":[function(e,t,n){"use strict";cc._RF.push(t,"d8970TDJblT2o6hf9jtY7rP","World (@tapclap.match-x.engine.entities)"),n.__esModule=!0,n.World=void 0;var o=e("./Entity (@tapclap.match-x.engine.entities)"),a=e("./State (@tapclap.match-x.engine.models)");function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var i=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=o.prototype;return i.lockInput=function(){var e=this.getComponent("input");e&&e.lock()},i.unlockInput=function(){var e=this.getComponent("input");e&&e.unlock()},i.resetLock=function(){var e=this.getComponent("input");e&&e.resetLock()},i.setState=function(e,t){void 0===e&&(e=""),void 0===t&&(t=null);var n=this.getEnabledComponent("state");n&&n.setState(new a.State(e,t))},i.pushState=function(e,t){void 0===e&&(e=""),void 0===t&&(t=null);var n=this.getEnabledComponent("state");n&&n.pushState(new a.State(e,t))},i.getState=function(e,t){void 0===t&&(t=null);var n=this.getEnabledComponent("state");return n?n.getState(e,t):null},i.resetState=function(){var e=this.getEnabledComponent("state");e&&e.reset()},i.removeState=function(e){var t=this.getEnabledComponent("state");t&&t.removeState(e)},o}(o.Entity);n.World=i,cc._RF.pop()},{"./Entity (@tapclap.match-x.engine.entities)":"Entity (@tapclap.match-x.engine.entities)","./State (@tapclap.match-x.engine.models)":"State (@tapclap.match-x.engine.models)"}],"WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)":[function(e,t,n){"use strict";cc._RF.push(t,"89e63so6LlfrIN49kAoFYaS","WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WorldEmitProducer=void 0;var r=function(e){function t(t){var n=t.emitComponent,o=t.gridComponent,a=t.skipStates,r=e.call(this)||this;return r._emitComponent=n,r._gridComponent=o,r._skipStates=a||[],r}return a(t,e),t.prototype.produce=function(e){var t=this._skipStates.some(function(t){return e.getState(t)}),n=e.getEnabledComponentByClass(this._emitComponent);return!t&&n?[{trigger:this._emitComponent.KEY,entity:e,cell:null,grid:e.getComponentByClass(this._gridComponent).grid}]:[]},t}(e("./EmitProducer (@tapclap.match-x.engine.systems.emit-system)").EmitProducer);n.WorldEmitProducer=r,cc._RF.pop()},{"./EmitProducer (@tapclap.match-x.engine.systems.emit-system)":"EmitProducer (@tapclap.match-x.engine.systems.emit-system)"}],"WorldGroupsComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"60280GywplR6YKslM326JgJ","WorldGroupsComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(n,"__esModule",{value:!0}),n.WorldGroupsComponent=void 0;var c=function(e){function t(t){var n=t.groups,o=void 0===n?[]:n,a=e.call(this)||this;return a._groups=[],a._groups=o,a}return a(t,e),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},set:function(e){this._groups=i(e)},enumerable:!1,configurable:!0}),t.KEY="worldGroups",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.WorldGroupsComponent=c,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)":[function(e,t,n){"use strict";cc._RF.push(t,"c78dcOMvetdlb+ChjvPHdGh","WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WorldGroupsDataLoader=void 0;var r=function(e){function t(t,n){var o=e.call(this)||this;return o._world=t,o._componentClass=n,o}return a(t,e),t.prototype.load=function(e,t){var n=this._world.getComponentByClass(this._componentClass);n&&(n.groups=t)},t}(e("./DataLoader (@tapclap.match-x.engine.systems.load-system)").DataLoader);n.WorldGroupsDataLoader=r,cc._RF.pop()},{"./DataLoader (@tapclap.match-x.engine.systems.load-system)":"DataLoader (@tapclap.match-x.engine.systems.load-system)"}],"WorldRenderer (@tapclap.match-x.cocos.renderers)":[function(e,t,n){"use strict";function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}cc._RF.push(t,"bfe3dNieNVcP7ajYXuTKzrr","WorldRenderer (@tapclap.match-x.cocos.renderers)"),n.__esModule=!0,n.WorldRenderer=void 0;var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this)._node=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),a.prototype.render=function(e){var t=e.data.getEnabledComponent("render");t&&(t.node=this._node)},a}(e("./Renderer (@tapclap.match-x.engine.systems.render-system)").Renderer);n.WorldRenderer=a,cc._RF.pop()},{"./Renderer (@tapclap.match-x.engine.systems.render-system)":"Renderer (@tapclap.match-x.engine.systems.render-system)"}],"YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":[function(e,t,n){"use strict";cc._RF.push(t,"9aad2K3g6pTDqsQBbD7JOcN","YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesAdProvider=void 0;var r=function(e){function t(t){var n=e.call(this)||this;return n._sdk=t.sdk,n}return a(t,e),t.prototype._doInit=function(){return Promise.resolve()},t.prototype.loadAd=function(){return Promise.resolve()},t.PROVIDER_TYPE="yandex-games",t}(e("./BaseAdProvider (@tapclap.sdk-x.ad-service.providers)").BaseAdProvider);n.YandexGamesAdProvider=r,cc._RF.pop()},{"./BaseAdProvider (@tapclap.sdk-x.ad-service.providers)":"BaseAdProvider (@tapclap.sdk-x.ad-service.providers)"}],"YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)":[function(e,t,n){"use strict";cc._RF.push(t,"8342drL/tNWfqYsWL1S0zpL","YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesAuthProvider=void 0;var s=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),p=function(e){function t(n){var o,a=e.call(this)||this;return a._sdk=n.sdk,a._providerType=n.providerType||t.PROVIDER_TYPE,a._requireAuth=null===(o=n.requireAuth)||void 0===o||o,a}return a(t,e),t.prototype._signIn=function(){return i(this,void 0,Promise,function(){return c(this,function(){return[2,this._createAuthPayload()]})})},t.prototype._createAuthPayload=function(e){return new s.AuthPayload({type:t.PROVIDER_TYPE,userId:this._sdk.getPlayerID(),payload:r({signature:this._sdk.getSignature()},e)})},t.prototype.getType=function(){return this._providerType},t.prototype.signIn=function(){return i(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._sdk.initPlayer()];case 1:if(e.sent(),!this._sdk.isAuthorized()){if(this._requireAuth)throw new Error("Not user id");return[2,this._signIn()]}return[2,this._createAuthPayload()]}})})},t.PROVIDER_TYPE="yandex-games",t.AUTH_PAYLOAD_TYPE="yandex-games",t}(e("./AuthProvider (@tapclap.sdk-x.auth-service)").AuthProvider);n.YandexGamesAuthProvider=p,cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)","./AuthProvider (@tapclap.sdk-x.auth-service)":"AuthProvider (@tapclap.sdk-x.auth-service)"}],"YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":[function(e,t,n){"use strict";cc._RF.push(t,"81536f4K1dXnqV/LZfCIJOK","YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesInterstitialAdProvider=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._doShowAd=function(){return this._sdk.showInterstitialAd()},t.PROVIDER_TYPE="yandex-games:interstitial",t}(e("./YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)").YandexGamesAdProvider);n.YandexGamesInterstitialAdProvider=r,cc._RF.pop()},{"./YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":"YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)"}],"YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)":[function(e,t,n){"use strict";cc._RF.push(t,"29e36Mg0epUNpkEo7RBpYNX","YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var a,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(t,n,i):a(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesLauncher=void 0;var s=e("./StaticResolveOnce (@tapclap.utils-js.decorators)"),p=e("./PlatformLauncher (@tapclap.sdk-x.platform-launcher)"),l=e("./PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)"),m=function(e){function t(t){var n=e.call(this)||this;return n._sdk=t.sdk,n._sdkScript=t.sdkScript||"./games/sdk/v2",n}return a(t,e),t.prototype._loadSDKScript=function(){return l.PlatformSDKLoader.loadSDK(this._sdkScript)},t.prototype.init=function(){return i(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._loadSDKScript()];case 1:return e.sent(),[4,this._sdk.init()];case 2:return e.sent(),[2]}})})},t.prototype.complete=function(){return i(this,void 0,Promise,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._sdk.ready()];case 1:return e.sent(),[2]}})})},r([s.staticResolveOnce()],t.prototype,"_loadSDKScript",null),t}(p.PlatformLauncher);n.YandexGamesLauncher=m,cc._RF.pop()},{"./PlatformLauncher (@tapclap.sdk-x.platform-launcher)":"PlatformLauncher (@tapclap.sdk-x.platform-launcher)","./PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)":"PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)","./StaticResolveOnce (@tapclap.utils-js.decorators)":"StaticResolveOnce (@tapclap.utils-js.decorators)"}],"YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)":[function(e,t,n){"use strict";cc._RF.push(t,"1316dQnfTFRcbyElKSQHTQ7","YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesPaymentProvider=void 0;var c=e("./PaymentProvider (@tapclap.sdk-x.payment-service)"),s=e("./Purchase (@tapclap.sdk-x.payment-service)"),p=e("./Product (@tapclap.sdk-x.payment-service)"),l=function(e){function t(t){var n=e.call(this)||this;return n._isAvailable=!1,n._sdk=t.sdk,n}return a(t,e),t.prototype._createPurchase=function(e,t,n){return new s.Purchase(this.getType(),e,{signature:t,purchaseToken:n},n)},t.prototype.getProducts=function(){return r(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._sdk.getCatalog()];case 1:return[2,e.sent().map(function(e){var t,n;return new p.Product({id:e.id,hasPriceWithCurrency:!0,currency:e.priceCurrencyCode,prices:(t={},t[e.priceCurrencyCode]=e.price,t),priceAmounts:(n={},n[e.priceCurrencyCode]=Number(e.priceValue),n)})})]}})})},t.prototype.getPurchases=function(){return r(this,void 0,Promise,function(){var e,t=this;return i(this,function(n){switch(n.label){case 0:return[4,this._sdk.getPurchases()];case 1:return[2,(e=n.sent()).map(function(n){return t._createPurchase(n.productID,e.signature,n.purchaseToken)})]}})})},t.prototype.purchase=function(e){return r(this,void 0,Promise,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this._sdk.purchase({id:e.id})];case 1:return t=n.sent(),[2,this._createPurchase(t.productID,t.signature,t.purchaseToken)]}})})},t.prototype.consume=function(e){return this._sdk.consumePurchase(e.payload)},t.prototype.isAvailable=function(){return this._isAvailable},t.prototype.init=function(){return r(this,void 0,Promise,function(){var t;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sdk.initPayments()];case 1:return n.sent(),this._isAvailable=!0,[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[4,e.prototype.init.call(this)];case 4:return n.sent(),[2]}})})},t.PROVIDER_TYPE="yandex-games",t}(c.PaymentProvider);n.YandexGamesPaymentProvider=l,cc._RF.pop()},{"./PaymentProvider (@tapclap.sdk-x.payment-service)":"PaymentProvider (@tapclap.sdk-x.payment-service)","./Product (@tapclap.sdk-x.payment-service)":"Product (@tapclap.sdk-x.payment-service)","./Purchase (@tapclap.sdk-x.payment-service)":"Purchase (@tapclap.sdk-x.payment-service)"}],"YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)":[function(e,t,n){"use strict";cc._RF.push(t,"8c030NLxDtQzrTvOusvBO0S","YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{s(o.next(e))}catch(t){r(t)}}function c(e){try{s(o.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,c)}s((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(e){return function(t){return s([e,t])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(c){r=[6,c],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesPlatformSDK=void 0;var r=function(){function e(e){var t;void 0===e&&(e={}),this._scopes=null!==(t=e.scopes)&&void 0!==t&&t}return e.prototype.init=function(){return o(this,void 0,Promise,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this,[4,YaGames.init()];case 1:return e._ysdk=t.sent(),[2]}})})},e.prototype.ready=function(){return o(this,void 0,Promise,function(){return a(this,function(e){switch(e.label){case 0:return[4];case 1:return e.sent(),[2]}})})},e.prototype.initPlayer=function(){return o(this,void 0,Promise,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this,[4,this._ysdk.getPlayer({scopes:this._scopes,signed:!0})];case 1:return e._player=t.sent(),[2]}})})},e.prototype.isAuthorized=function(){return this._player.getMode()!==e.AUTH_MODE_LITE},e.prototype.getSignature=function(){return this._player.signature},e.prototype.openAuthDialog=function(){return o(this,void 0,Promise,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._ysdk.auth.openAuthDialog()];case 1:return e.sent(),[2]}})})},e.prototype.getPlayerID=function(){return this._player.getUniqueID()},e.prototype.getPlayerName=function(){return this._player.getName()},e.prototype.getPlayerAvatar=function(e){return null},e.prototype.setPlayerData=function(e,t){return void 0===t&&(t=!1),this._player.setData(e,t)},e.prototype.getPlayerData=function(e){return this._player.getData(e)},e.prototype.initPayments=function(){return o(this,void 0,Promise,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this,[4,this._ysdk.getPayments({signed:!0})];case 1:return e._payments=t.sent(),[2]}})})},e.prototype.getCatalog=function(){return this._payments.getCatalog()},e.prototype.getPurchases=function(){return this._payments.getPurchases()},e.prototype.purchase=function(e){return this._payments.purchase(e)},e.prototype.consumePurchase=function(e){return this._payments.consumePurchase(e.purchaseToken)},e.prototype.showRewardedVideo=function(){var e=this;return new Promise(function(t,n){var o=!1;e._ysdk.adv.showRewardedVideo({callbacks:{onRewarded:function(){return o=!0},onClose:function(){return o?t():n()},onError:n}})})},e.prototype.showInterstitialAd=function(){var e=this;return new Promise(function(t,n){e._ysdk.adv.showFullscreenAdv({callbacks:{onClose:function(e){return e?t():n()},onError:n}})})},e.prototype.showBannerAd=function(){return o(this,void 0,Promise,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this._ysdk.adv.getBannerAdvStatus()];case 1:return(e=t.sent()).stickyAdvIsShowing||e.reason?[3,3]:[4,this._ysdk.adv.showBannerAdv()];case 2:e=t.sent(),t.label=3;case 3:if(!e.stickyAdvIsShowing)throw new Error(e.reason);return[2]}})})},e.prototype.getLocale=function(){var e,t,n;return null===(n=null===(t=null===(e=this._ysdk)||void 0===e?void 0:e.environment)||void 0===t?void 0:t.i18n)||void 0===n?void 0:n.lang},e.prototype.copyClipboard=function(e){this._ysdk.clipboard.writeText(e)},e.prototype.initLeaderboard=function(){return o(this,void 0,Promise,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=this,[4,this._ysdk.getLeaderboards()];case 1:return e._leaderboard=t.sent(),[2]}})})},e.prototype.setLeaderboardScore=function(e,t,n){return this._leaderboard.setLeaderboardScore(e,t,n)},e.prototype.getLeaderboardEntries=function(e,t){return this._leaderboard.getLeaderboardEntries(e,t)},e.prototype.isAvailableMethod=function(e){return this._ysdk.isAvailableMethod(e)},e.AUTH_MODE_LITE="lite",e}();n.YandexGamesPlatformSDK=r,cc._RF.pop()},{}],"YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":[function(e,t,n){"use strict";cc._RF.push(t,"ebd53Fs0OlXZZsJ5nZXlsRf","YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesRewardedAdProvider=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._doShowAd=function(){return this._sdk.showRewardedVideo()},t.PROVIDER_TYPE="yandex-games:rewarded",t}(e("./YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)").YandexGamesAdProvider);n.YandexGamesRewardedAdProvider=r,cc._RF.pop()},{"./YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)":"YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)"}],"YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)":[function(e,t,n){"use strict";cc._RF.push(t,"6234fu+aBha7aIVH5MP2nDH","YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesSocialAdapter=void 0;var r=e("./SocialAdapter (@tapclap.sdk-x.social-service)"),i=e("./AuthPayload (@tapclap.sdk-x.auth-payload)"),c=e("./UserInfo (@tapclap.sdk-x.social-service)"),s=function(e){function t(t){var n,o=e.call(this,t)||this;return o._sdk=t.sdk,o._avatarSize=null!==(n=t.avatarSize)&&void 0!==n?n:"medium",o}return a(t,e),t.prototype.login=function(){return Promise.resolve(new i.AuthPayload({type:t.ADAPTER_TYPE}))},t.prototype.getUserInfo=function(){return Promise.resolve(new c.UserInfo({id:this._sdk.getPlayerID(),name:this._sdk.getPlayerName(),photo:this._sdk.getPlayerAvatar(this._avatarSize),sex:c.UserInfo.SEX_NONE}))},t.prototype.getLocale=function(){var e=this._sdk.getLocale();return Promise.resolve(this._localeMap[e]||e)},t.ADAPTER_TYPE="local-yandex-games",t}(r.SocialAdapter);n.YandexGamesSocialAdapter=s,cc._RF.pop()},{"./AuthPayload (@tapclap.sdk-x.auth-payload)":"AuthPayload (@tapclap.sdk-x.auth-payload)","./SocialAdapter (@tapclap.sdk-x.social-service)":"SocialAdapter (@tapclap.sdk-x.social-service)","./UserInfo (@tapclap.sdk-x.social-service)":"UserInfo (@tapclap.sdk-x.social-service)"}],"YandexGamesStorage (@tapclap.game-kit.data-storage)":[function(e,t,n){"use strict";cc._RF.push(t,"d992cBbQ1JZXInweOqOfIBx","YandexGamesStorage (@tapclap.game-kit.data-storage)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.YandexGamesStorage=void 0;var r=function(e){function t(t){var n=e.call(this,t)||this;return n._sdk=t.sdk,n}return a(t,e),t.prototype._getStorage=function(){var e=this,t=this._getKey(this._storageKey);return this._sdk.getPlayerData([t]).then(function(n){return e._storage=(null==n?void 0:n[t])||{}})},t.prototype._sendStorage=function(e,t){var n;return this._sdk.setPlayerData(((n={})[this._getKey(this._storageKey)]=e,n),t)},t}(e("./PlatformStorage (@tapclap.game-kit.data-storage)").PlatformStorage);n.YandexGamesStorage=r,cc._RF.pop()},{"./PlatformStorage (@tapclap.game-kit.data-storage)":"PlatformStorage (@tapclap.game-kit.data-storage)"}],"ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)":[function(e,t,n){"use strict";cc._RF.push(t,"7e8c6eCAudSxrK5Qm8QIFbx","ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.ZIndexAnimationBuilder=void 0;var i=e("./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)"),c=e("./AnimationData (@tapclap.match-x.cocos.animations)"),s=e("./GridComponent (@tapclap.match-x.engine.components)"),p=e("./ZIndexComponent (@tapclap.match-x.engine.components)"),l=e("./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)"),m=e("./RenderComponent (@tapclap.match-x.engine.components.render)"),u=function(e){function t(t){var n=t.world,o=e.call(this)||this;return o._world=n,o}return a(t,e),t.prototype.build=function(){var e=this;return[[new c.AnimationData(null,new l.FunctionAnimation(function(){var t,n;try{for(var o=r(e._world.getComponentsByClass(s.GridComponent)),a=o.next();!a.done;a=o.next())a.value.grid.forEachEntities(function(e){var t=e.getEnabledComponentByClass(p.ZIndexComponent);t&&(e.getEnabledComponentByClass(m.RenderComponent).node.zIndex=t.value)})}catch(i){t={error:i}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}))]]},t}(i.GameActionBuilder);n.ZIndexAnimationBuilder=u,cc._RF.pop()},{"./AnimationData (@tapclap.match-x.cocos.animations)":"AnimationData (@tapclap.match-x.cocos.animations)","./FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)":"FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","./GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)":"GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","./GridComponent (@tapclap.match-x.engine.components)":"GridComponent (@tapclap.match-x.engine.components)","./RenderComponent (@tapclap.match-x.engine.components.render)":"RenderComponent (@tapclap.match-x.engine.components.render)","./ZIndexComponent (@tapclap.match-x.engine.components)":"ZIndexComponent (@tapclap.match-x.engine.components)"}],"ZIndexComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"6a3d4g5IfxZ+puGUOysIB20","ZIndexComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ZIndexComponent=void 0;var r=function(e){function t(t){var n=t.value,o=void 0===n?0:n,a=e.call(this)||this;return a._value=o,a}return a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!1,configurable:!0}),t.KEY="zIndex",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.ZIndexComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":[function(e,t,n){"use strict";cc._RF.push(t,"2e5b932goha1KwbV6AQHRY2","ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"),n.__esModule=!0,n.ZeroCounterStrategy=void 0;var o=e("./CounterComponent (@tapclap.match-x.engine.components)");function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n,o=t.world,a=t.entityTypes,r=t.reason;return(n=e.call(this,{reason:r})||this)._world=o,n._entityTypes=a,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r.prototype.isLose=function(){var e=this,t=this._world.getEnabledComponent("tiles").grid;if(t)for(var n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++){var i=t.getCell(n,r);if(i)for(var c,s=function(){var t=c.value,n=t.getEnabledComponent(o.CounterComponent.KEY);if(n&&0===n.getValue()&&e._entityTypes.find(function(e){return e===t.type}))return{v:!0}},p=a(i.entities);!(c=p()).done;){var l=s();if("object"==typeof l)return l.v}}return!1},r}(e("./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)").LoseGameStrategy);n.ZeroCounterStrategy=s,cc._RF.pop()},{"./CounterComponent (@tapclap.match-x.engine.components)":"CounterComponent (@tapclap.match-x.engine.components)","./LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)":"LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)"}],"growthbook.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)":[function(e,t,n){"use strict";cc._RF.push(t,"7bd1e0/MKRdh7O5gjsUs8ut","growthbook.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"index (scripts)":[function(e,t,n){"use strict";cc._RF.push(t,"7eddd0g7hRQL7UT+wYZFE0T","index (scripts)"),Object.defineProperty(n,"__esModule",{value:!0}),e("./BoosterViewComponent (@tapclap.match-x.cocos.components)"),e("./CellBorderBuilderComponent (@tapclap.match-x.cocos.components)"),e("./CellViewComponent (@tapclap.match-x.cocos.components)"),e("./EntityViewComponent (@tapclap.match-x.cocos.components)"),e("./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)"),e("./GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)"),e("./SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)"),e("./SelectionViewComponent (@tapclap.match-x.cocos.components)"),e("./SpriteMorphViewComponent (@tapclap.match-x.cocos.components)"),e("./StepCounterViewComponent (@tapclap.match-x.cocos.components)"),e("./ViewComponent (@tapclap.match-x.cocos.components)"),e("./ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)"),e("./GridViewComponent (@tapclap.match-x.cocos.components.grid)"),e("./PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)"),e("./BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)"),e("./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)"),e("./RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),e("./ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)"),e("./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)"),e("./SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)"),e("./TextureFiltersComponent (@tapclap.match-x.cocos.components)"),e("./SpineMixAnimation (@tapclap.match-x.cocos.components.animations)"),e("./DevConsoleComponent (@tapclap.game-kit.devconsole.components)"),e("./DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)"),e("./DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)"),e("./I18NComponent (@tapclap.game-kit.i18n.components)"),e("./I18NLabel (@tapclap.game-kit.i18n.components)"),e("./I18NNodeSize (@tapclap.game-kit.i18n.components)"),e("./I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)"),e("./I18NProperty (@tapclap.game-kit.i18n.components)"),e("./I18NSprite (@tapclap.game-kit.i18n.components)"),e("./I18NSpriteProperty (@tapclap.game-kit.i18n.components)"),e("./ApplicationInstanceComponent (@tapclap.game-kit.application.components)"),e("./SceneComponent (@tapclap.game-kit.scene-manager)"),e("./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),e("./MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)"),e("./PreloadComponent (@tapclap.game-kit.scene-manager.components)"),e("./UIAnimationComponent (@tapclap.game-kit.ui.animations)"),e("./ArrowComponent (@tapclap.game-kit.ui.arrow)"),e("./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),e("./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)"),e("./BackdropController (@tapclap.game-kit.ui.backdrop)"),e("./CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)"),e("./ScaleUIComponent (@tapclap.game-kit.ui.canvas)"),e("./FitContentComponent (@tapclap.game-kit.ui.canvas)"),e("./PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)"),e("./KeySpriteFrame (@tapclap.game-kit.ui.common)"),e("./ButtonControlComponent (@tapclap.game-kit.ui.controls)"),e("./CheckboxControlComponent (@tapclap.game-kit.ui.controls)"),e("./ControlComponent (@tapclap.game-kit.ui.controls)"),e("./DialogComponent (@tapclap.game-kit.ui.dialogs)"),e("./SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)"),e("./SpeakerComponent (@tapclap.game-kit.ui.dialogs)"),e("./SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)"),e("./HeroBalloonComponent (@tapclap.game-kit.ui.hero)"),e("./HeroComponent (@tapclap.game-kit.ui.hero)"),e("./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)"),e("./IconComponent (@tapclap.game-kit.ui.icons)"),e("./LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)"),e("./MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)"),e("./BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)"),e("./ScreenLocker (@tapclap.game-kit.ui.screen-locker)"),e("./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),e("./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)"),e("./IconSpinnerComponent (@tapclap.game-kit.ui.spinner)"),e("./SpinnerComponent (@tapclap.game-kit.ui.spinner)"),e("./StickerComponent (@tapclap.game-kit.ui.sticker)"),e("./FadeTransitionComponent (@tapclap.game-kit.ui.transition)"),e("./TransitionComponent (@tapclap.game-kit.ui.transition)"),e("./TypableTextComponent (@tapclap.game-kit.ui.typable-text)"),e("./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)"),e("./AnimatedLayout (@tapclap.game-kit.ui.layouts)"),e("./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)"),e("./LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)"),e("./BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)"),e("./FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)"),e("./WindowButtonComponent (@tapclap.game-kit.ui.window-manager)"),e("./WindowComponent (@tapclap.game-kit.ui.window-manager)"),e("./StretchWindowComponent (@tapclap.game-kit.ui.window-manager)"),e("./WindowController (@tapclap.game-kit.ui.window-manager)"),e("./WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)"),e("./WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)"),e("./WindowFactory (@tapclap.game-kit.ui.window-manager)"),e("./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)"),e("./WindowManager (@tapclap.game-kit.ui.window-manager)"),e("./PulseFx (@tapclap.game-kit.ui.vfx)"),e("./UIManager (@tapclap.game-kit.ui)"),e("./UIController (@tapclap.game-kit.ui)"),e("./ThemeControllerComponent (@tapclap.game-kit.ui.themes)"),e("./PrefabThemeComponent (@tapclap.game-kit.ui.themes)"),e("./SpriteThemeComponent (@tapclap.game-kit.ui.themes)"),e("./KeyNode (@tapclap.game-kit.ui.common)"),e("./SpineIconComponent (@tapclap.game-kit.ui.icons)"),e("./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)"),e("./LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)"),e("./SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)"),e("./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)"),e("./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)"),e("./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)"),e("./LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)"),e("./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)"),e("./ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)"),e("./ApplicationConfig (scripts.config)"),e("./MessageCenterSceneBadgeComponent (scripts.badges)"),e("./TabComponent (scripts.views.message-center)"),e("./SameFontSizeComponent (scripts.ui)"),cc._RF.pop()},{"./ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./AnimatedLayout (@tapclap.game-kit.ui.layouts)":"AnimatedLayout (@tapclap.game-kit.ui.layouts)","./AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./ApplicationConfig (scripts.config)":"ApplicationConfig (scripts.config)","./ApplicationInstanceComponent (@tapclap.game-kit.application.components)":"ApplicationInstanceComponent (@tapclap.game-kit.application.components)","./ArrowComponent (@tapclap.game-kit.ui.arrow)":"ArrowComponent (@tapclap.game-kit.ui.arrow)","./AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./BackdropController (@tapclap.game-kit.ui.backdrop)":"BackdropController (@tapclap.game-kit.ui.backdrop)","./BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)":"BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)","./BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)":"BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)","./BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./BoosterViewComponent (@tapclap.match-x.cocos.components)":"BoosterViewComponent (@tapclap.match-x.cocos.components)","./BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":"BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","./BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ButtonControlComponent (@tapclap.game-kit.ui.controls)":"ButtonControlComponent (@tapclap.game-kit.ui.controls)","./CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)":"CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)","./CellBorderBuilderComponent (@tapclap.match-x.cocos.components)":"CellBorderBuilderComponent (@tapclap.match-x.cocos.components)","./CellViewComponent (@tapclap.match-x.cocos.components)":"CellViewComponent (@tapclap.match-x.cocos.components)","./CheckboxControlComponent (@tapclap.game-kit.ui.controls)":"CheckboxControlComponent (@tapclap.game-kit.ui.controls)","./ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ControlComponent (@tapclap.game-kit.ui.controls)":"ControlComponent (@tapclap.game-kit.ui.controls)","./DevConsoleComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleComponent (@tapclap.game-kit.devconsole.components)","./DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)","./DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)":"DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)","./DialogComponent (@tapclap.game-kit.ui.dialogs)":"DialogComponent (@tapclap.game-kit.ui.dialogs)","./EntityViewComponent (@tapclap.match-x.cocos.components)":"EntityViewComponent (@tapclap.match-x.cocos.components)","./ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./FadeTransitionComponent (@tapclap.game-kit.ui.transition)":"FadeTransitionComponent (@tapclap.game-kit.ui.transition)","./FitContentComponent (@tapclap.game-kit.ui.canvas)":"FitContentComponent (@tapclap.game-kit.ui.canvas)","./FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)":"FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)","./FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","./GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)":"GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)","./GridViewComponent (@tapclap.match-x.cocos.components.grid)":"GridViewComponent (@tapclap.match-x.cocos.components.grid)","./GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)":"GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","./HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./HeroBalloonComponent (@tapclap.game-kit.ui.hero)":"HeroBalloonComponent (@tapclap.game-kit.ui.hero)","./HeroComponent (@tapclap.game-kit.ui.hero)":"HeroComponent (@tapclap.game-kit.ui.hero)","./I18NComponent (@tapclap.game-kit.i18n.components)":"I18NComponent (@tapclap.game-kit.i18n.components)","./I18NLabel (@tapclap.game-kit.i18n.components)":"I18NLabel (@tapclap.game-kit.i18n.components)","./I18NNodeSize (@tapclap.game-kit.i18n.components)":"I18NNodeSize (@tapclap.game-kit.i18n.components)","./I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)":"I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)","./I18NProperty (@tapclap.game-kit.i18n.components)":"I18NProperty (@tapclap.game-kit.i18n.components)","./I18NSprite (@tapclap.game-kit.i18n.components)":"I18NSprite (@tapclap.game-kit.i18n.components)","./I18NSpriteProperty (@tapclap.game-kit.i18n.components)":"I18NSpriteProperty (@tapclap.game-kit.i18n.components)","./IconComponent (@tapclap.game-kit.ui.icons)":"IconComponent (@tapclap.game-kit.ui.icons)","./IconSpinnerComponent (@tapclap.game-kit.ui.spinner)":"IconSpinnerComponent (@tapclap.game-kit.ui.spinner)","./IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)":"IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)","./ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./KeyNode (@tapclap.game-kit.ui.common)":"KeyNode (@tapclap.game-kit.ui.common)","./KeySpriteFrame (@tapclap.game-kit.ui.common)":"KeySpriteFrame (@tapclap.game-kit.ui.common)","./LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)":"LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)","./LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)":"LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","./LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)":"LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)","./LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)":"LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)","./LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)":"LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)","./LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)":"LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","./MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)":"MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)","./MessageCenterSceneBadgeComponent (scripts.badges)":"MessageCenterSceneBadgeComponent (scripts.badges)","./MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":"MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","./ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","./PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)":"PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)","./PrefabThemeComponent (@tapclap.game-kit.ui.themes)":"PrefabThemeComponent (@tapclap.game-kit.ui.themes)","./PreloadComponent (@tapclap.game-kit.scene-manager.components)":"PreloadComponent (@tapclap.game-kit.scene-manager.components)","./PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)":"PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)","./ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)":"ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)","./PulseFx (@tapclap.game-kit.ui.vfx)":"PulseFx (@tapclap.game-kit.ui.vfx)","./RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)":"RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","./RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","./RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)":"RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","./ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)":"ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)","./RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./SameFontSizeComponent (scripts.ui)":"SameFontSizeComponent (scripts.ui)","./ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)":"ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)","./ScaleUIComponent (@tapclap.game-kit.ui.canvas)":"ScaleUIComponent (@tapclap.game-kit.ui.canvas)","./SceneComponent (@tapclap.game-kit.scene-manager)":"SceneComponent (@tapclap.game-kit.scene-manager)","./SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)":"SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","./ScreenLocker (@tapclap.game-kit.ui.screen-locker)":"ScreenLocker (@tapclap.game-kit.ui.screen-locker)","./SelectionViewComponent (@tapclap.match-x.cocos.components)":"SelectionViewComponent (@tapclap.match-x.cocos.components)","./ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)":"SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)","./SpeakerComponent (@tapclap.game-kit.ui.dialogs)":"SpeakerComponent (@tapclap.game-kit.ui.dialogs)","./SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)":"SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)","./SpineIconComponent (@tapclap.game-kit.ui.icons)":"SpineIconComponent (@tapclap.game-kit.ui.icons)","./SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)":"SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)","./SpineMixAnimation (@tapclap.match-x.cocos.components.animations)":"SpineMixAnimation (@tapclap.match-x.cocos.components.animations)","./SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)":"SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)","./SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)":"SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)","./SpinnerComponent (@tapclap.game-kit.ui.spinner)":"SpinnerComponent (@tapclap.game-kit.ui.spinner)","./SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)":"SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)","./SpriteMorphViewComponent (@tapclap.match-x.cocos.components)":"SpriteMorphViewComponent (@tapclap.match-x.cocos.components)","./SpriteThemeComponent (@tapclap.game-kit.ui.themes)":"SpriteThemeComponent (@tapclap.game-kit.ui.themes)","./StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./StepCounterViewComponent (@tapclap.match-x.cocos.components)":"StepCounterViewComponent (@tapclap.match-x.cocos.components)","./StickerComponent (@tapclap.game-kit.ui.sticker)":"StickerComponent (@tapclap.game-kit.ui.sticker)","./StretchWindowComponent (@tapclap.game-kit.ui.window-manager)":"StretchWindowComponent (@tapclap.game-kit.ui.window-manager)","./TabComponent (scripts.views.message-center)":"TabComponent (scripts.views.message-center)","./TextureFiltersComponent (@tapclap.match-x.cocos.components)":"TextureFiltersComponent (@tapclap.match-x.cocos.components)","./ThemeControllerComponent (@tapclap.game-kit.ui.themes)":"ThemeControllerComponent (@tapclap.game-kit.ui.themes)","./TransitionComponent (@tapclap.game-kit.ui.transition)":"TransitionComponent (@tapclap.game-kit.ui.transition)","./TypableTextComponent (@tapclap.game-kit.ui.typable-text)":"TypableTextComponent (@tapclap.game-kit.ui.typable-text)","./UIAnimationComponent (@tapclap.game-kit.ui.animations)":"UIAnimationComponent (@tapclap.game-kit.ui.animations)","./UIController (@tapclap.game-kit.ui)":"UIController (@tapclap.game-kit.ui)","./UIManager (@tapclap.game-kit.ui)":"UIManager (@tapclap.game-kit.ui)","./UserItemInfoComponent (@tapclap.game-kit.ui.user-item)":"UserItemInfoComponent (@tapclap.game-kit.ui.user-item)","./UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)":"UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)","./ViewComponent (@tapclap.match-x.cocos.components)":"ViewComponent (@tapclap.match-x.cocos.components)","./WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)":"WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","./WindowButtonComponent (@tapclap.game-kit.ui.window-manager)":"WindowButtonComponent (@tapclap.game-kit.ui.window-manager)","./WindowComponent (@tapclap.game-kit.ui.window-manager)":"WindowComponent (@tapclap.game-kit.ui.window-manager)","./WindowController (@tapclap.game-kit.ui.window-manager)":"WindowController (@tapclap.game-kit.ui.window-manager)","./WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)":"WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)","./WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)":"WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)","./WindowFactory (@tapclap.game-kit.ui.window-manager)":"WindowFactory (@tapclap.game-kit.ui.window-manager)","./WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)","./WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)":"WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)","./WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)":"WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)","./WindowManager (@tapclap.game-kit.ui.window-manager)":"WindowManager (@tapclap.game-kit.ui.window-manager)"}],"isExplodedComponent (@tapclap.match-x.engine.components)":[function(e,t,n){"use strict";cc._RF.push(t,"c9941G7dwNYULgrxuRiiuIW","isExplodedComponent (@tapclap.match-x.engine.components)");var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.IsExplodedComponent=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.KEY="isExploded",t}(e("./Component (@tapclap.match-x.engine.components)").Component);n.IsExplodedComponent=r,cc._RF.pop()},{"./Component (@tapclap.match-x.engine.components)":"Component (@tapclap.match-x.engine.components)"}],"mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)":[function(e,t,n){"use strict";cc._RF.push(t,"f405dTAN0BflI9C1wNpzORQ","mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)");var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};Object.defineProperty(n,"__esModule",{value:!0}),n.evalCondition=void 0;var r={};function i(e,t){var n,r;if("$or"in t)return d(e,t.$or);if("$nor"in t)return!d(e,t.$nor);if("$and"in t)return y(e,t.$and);if("$not"in t)return!i(e,t.$not);try{for(var p=o(Object.entries(t)),l=p.next();!l.done;l=p.next()){var m=a(l.value,2),u=m[0];if(!s(m[1],c(e,u)))return!1}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}return!0}function c(e,t){for(var n=t.split("."),o=e,a=0;a<n.length;a++){if(!(o&&"object"==typeof o&&n[a]in o))return null;o=o[n[a]]}return o}function s(e,t){if("string"==typeof e)return t+""===e;if("number"==typeof e)return 1*t===e;if("boolean"==typeof e)return!!t===e;if(Array.isArray(e)||!p(e))return JSON.stringify(t)===JSON.stringify(e);for(var n in e)if(!u(n,t,e[n]))return!1;return!0}function p(e){var t=Object.keys(e);return t.length>0&&t.filter(function(e){return"$"===e[0]}).length===t.length}function l(e){if(null===e)return"null";if(Array.isArray(e))return"array";var t=typeof e;return["string","number","boolean","object","undefined"].includes(t)?t:"unknown"}function m(e,t){if(!Array.isArray(e))return!1;for(var n=p(t)?function(e){return s(t,e)}:function(e){return i(e,t)},o=0;o<e.length;o++)if(e[o]&&n(e[o]))return!0;return!1}function u(e,t,n){switch(e){case"$eq":return t===n;case"$ne":return t!==n;case"$lt":return t<n;case"$lte":return t<=n;case"$gt":return t>n;case"$gte":return t>=n;case"$exists":return n?null!==t:null===t;case"$in":return n.includes(t);case"$nin":return!n.includes(t);case"$not":return!s(n,t);case"$size":return!!Array.isArray(t)&&s(n,t.length);case"$elemMatch":return m(t,n);case"$all":if(!Array.isArray(t))return!1;for(var o=0;o<n.length;o++){for(var a=!1,i=0;i<t.length;i++)if(s(n[o],t[i])){a=!0;break}if(!a)return!1}return!0;case"$regex":try{return(c=n,r[c]||(r[c]=new RegExp(c.replace(/([^\\])\//g,"$1\\/"))),r[c]).test(t)}catch(p){return!1}case"$type":return l(t)===n;default:return console.error("Unknown operator: "+e),!1}var c}function d(e,t){if(!t.length)return!0;for(var n=0;n<t.length;n++)if(i(e,t[n]))return!0;return!1}function y(e,t){for(var n=0;n<t.length;n++)if(!i(e,t[n]))return!1;return!0}n.evalCondition=i,cc._RF.pop()},{}],"mongrule.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)":[function(e,t,n){"use strict";cc._RF.push(t,"8514czLLBRVdZcrGEfocbXQ","mongrule.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],"sha256 (@tapclap.utils-js.crypto)":[function(require,module,exports){"use strict";cc._RF.push(module,"58595wciDxa7JRVGzYOvmFa","sha256 (@tapclap.utils-js.crypto)"),function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var o=OUTPUT_TYPES[n];t[o]=createOutputMethod(o,e)}return t},nodeWrap=function nodeWrap(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,o){return new HmacSha256(n,t,!0).update(o)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var o=OUTPUT_TYPES[n];t[o]=createHmacOutputMethod(o,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var o,a=typeof e;if("string"===a){var r,i=[],c=e.length,s=0;for(o=0;o<c;++o)(r=e.charCodeAt(o))<128?i[s++]=r:r<2048?(i[s++]=192|r>>6,i[s++]=128|63&r):r<55296||r>=57344?(i[s++]=224|r>>12,i[s++]=128|r>>6&63,i[s++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),i[s++]=240|r>>18,i[s++]=128|r>>12&63,i[s++]=128|r>>6&63,i[s++]=128|63&r);e=i}else{if("object"!==a)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var p=[],l=[];for(o=0;o<64;++o){var m=e[o]||0;p[o]=92^m,l[o]=54^m}Sha256.call(this,t,n),this.update(l),this.oKeyPad=p,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var o,a,r=0,i=e.length,c=this.blocks;r<i;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),t)for(a=this.start;r<i&&a<64;++r)c[a>>2]|=e[r]<<SHIFT[3&a++];else for(a=this.start;r<i&&a<64;++r)(o=e.charCodeAt(r))<128?c[a>>2]|=o<<SHIFT[3&a++]:o<2048?(c[a>>2]|=(192|o>>6)<<SHIFT[3&a++],c[a>>2]|=(128|63&o)<<SHIFT[3&a++]):o<55296||o>=57344?(c[a>>2]|=(224|o>>12)<<SHIFT[3&a++],c[a>>2]|=(128|o>>6&63)<<SHIFT[3&a++],c[a>>2]|=(128|63&o)<<SHIFT[3&a++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++r)),c[a>>2]|=(240|o>>18)<<SHIFT[3&a++],c[a>>2]|=(128|o>>12&63)<<SHIFT[3&a++],c[a>>2]|=(128|o>>6&63)<<SHIFT[3&a++],c[a>>2]|=(128|63&o)<<SHIFT[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=c[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,o,a,r,i,c,s,p=this.h0,l=this.h1,m=this.h2,u=this.h3,d=this.h4,y=this.h5,f=this.h6,h=this.h7,g=this.blocks;for(e=16;e<64;++e)t=((a=g[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,n=((a=g[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,g[e]=g[e-16]+t+g[e-7]+n<<0;for(s=l&m,e=0;e<64;e+=4)this.first?(this.is224?(r=300032,h=(a=g[0]-1413257819)-150054599<<0,u=a+24177077<<0):(r=704751109,h=(a=g[0]-210244248)-1521486534<<0,u=a+143694565<<0),this.first=!1):(t=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),o=(r=p&l)^p&m^s,h=u+(a=h+(n=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&y^~d&f)+K[e]+g[e])<<0,u=a+(t+o)<<0),t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=(i=u&p)^u&l^r,f=m+(a=f+(n=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&y)+K[e+1]+g[e+1])<<0,t=((m=a+(t+o)<<0)>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),o=(c=m&u)^m&p^i,y=l+(a=y+(n=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&h^~f&d)+K[e+2]+g[e+2])<<0,t=((l=a+(t+o)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=(s=l&m)^l&u^c,d=p+(a=d+(n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&f^~y&h)+K[e+3]+g[e+3])<<0,p=a+(t+o)<<0;this.h0=this.h0+p<<0,this.h1=this.h1+l<<0,this.h2=this.h2+m<<0,this.h3=this.h3+u<<0,this.h4=this.h4+d<<0,this.h5=this.h5+y<<0,this.h6=this.h6+f<<0,this.h7=this.h7+h<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3,a=this.h4,r=this.h5,i=this.h6,c=this.h7,s=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i];return this.is224||(s+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[15&c]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,o=this.h3,a=this.h4,r=this.h5,i=this.h6,c=this.h7,s=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i];return this.is224||s.push(c>>24&255,c>>16&255,c>>8&255,255&c),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))}(),cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t){"use strict";cc._RF.push(t,"28568xhGplLcozv1L5hTglg","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"07545TloDtLlJ8sRalS1emr","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t){"use strict";cc._RF.push(t,"a32a57ZIMhIub6OCzyKh6hz","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}],"util (@tapclap.sdk-x.remote-config.growthbook.sdk)":[function(e,t,n){"use strict";cc._RF.push(t,"74b994T0Wdc0aeqh+qCh0Bh","util (@tapclap.sdk-x.remote-config.growthbook.sdk)");var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,a,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};function a(e){for(var t=2166136261,n=e.length,o=0;o<n;o++)t^=e.charCodeAt(o),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function r(e){return a(e)%1e3/1e3}function i(e){return e<=0?[]:new Array(e).fill(1/e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isIncluded=n.getQueryStringOverride=n.getBucketRanges=n.getUrlRegExp=n.chooseVariation=n.inNamespace=n.getEqualWeights=n.hash=void 0,n.hash=r,n.getEqualWeights=i,n.inNamespace=function(e,t){var n=r(e+"__"+t[0]);return n>=t[1]&&n<t[2]},n.chooseVariation=function(e,t){for(var n=0;n<t.length;n++)if(e>=t[n][0]&&e<t[n][1])return n;return-1},n.getUrlRegExp=function(e){try{var t=e.replace(/([^\\])\//g,"$1\\/");return new RegExp(t)}catch(n){return void console.error(n)}},n.getBucketRanges=function(e,t,n){void 0===t&&(t=1),t<0?t=0:t>1&&(t=1);var o=i(e);(n=n||o).length!==e&&(n=o);var a=n.reduce(function(e,t){return t+e},0);(a<.99||a>1.01)&&(n=o);var r=0;return n.map(function(e){var n=r;return r+=e,[n,n+t*e]})},n.getQueryStringOverride=function(e,t,n){if(!t)return null;var a=t.split("?")[1];if(!a)return null;var r=a.replace(/#.*/,"").split("&").map(function(e){return e.split("=",2)}).filter(function(t){return o(t,1)[0]===e}).map(function(e){var t=o(e,2)[1];return parseInt(t)});return r.length>0&&r[0]>=0&&r[0]<n?r[0]:null},n.isIncluded=function(e){try{return e()}catch(t){return console.error(t),!1}},cc._RF.pop()},{}]},{},["AbstractFactory (@tapclap.utils-js.abstract-factory)","Action (@tapclap.game-kit.action-manager)","ActionAnimation (@tapclap.match-x.cocos.animations)","ActionCaller (@tapclap.game-kit.action-manager)","ActionCondition (@tapclap.game-kit.action-manager)","ActionConditionsConfig (scripts.config)","ActionConfig (scripts.config)","ActionConstants (scripts.config)","ActionDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","ActionManager (@tapclap.game-kit.action-manager)","ActionScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","ActionShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","ActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","AdContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","AdGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","AdProvider (@tapclap.sdk-x.ad-service)","AdRevenue (@tapclap.sdk-x.ad-service)","AdRewardComponent (scripts.windows.items.daily-reward.reward)","AdService (@tapclap.sdk-x.ad-service)","AdShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","AddComponentsCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","AddComponentsLayersCompletionSystemAction (scripts.common.match3-game.actions)","AddMovesComponent (@tapclap.match-x.engine.components)","AddMovesOnExplodeComponent (@tapclap.match-x.engine.components)","AddMultiplierMinValueEffect (scripts.common.match3-game.effects)","AddParrotOnGridAnimationBuilder (scripts.scenes.match3-game.animations.builders)","AddScoreOnValueReduceComponent (@tapclap.match-x.engine.components)","AffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system)","AfterExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","AfterLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","AfterTurnAnimationBuilder (scripts.scenes.match3-game.animations.builders)","AllExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","AllRetriever (@tapclap.match-x.engine.retrievers)","AllowWalkComponent (@tapclap.match-x.engine.components)","AlreadyCompletedLevelActionCondition (scripts.action-conditions)","AnalyticsService (@tapclap.sdk-x.analytics-service)","AngrybubbleHealthLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","AnimatedLayout (@tapclap.game-kit.ui.layouts)","Animation (@tapclap.match-x.engine.systems.game-action-system)","AnimationComponent (@tapclap.match-x.engine.components)","AnimationComponentCreator (@tapclap.match-x.engine.components.render)","AnimationCreator (@tapclap.match-x.cocos.animations.creators)","AnimationData (@tapclap.match-x.cocos.animations)","AnimationFactory (@tapclap.match-x.engine.animation-factory)","AnimationFactoryComponent (@tapclap.match-x.cocos.components.animation-factory)","AnimationItem (@tapclap.match-x.cocos.components.animation-factory)","AnimationKey (scripts.windows.items.daily-reward.animation)","AnimationResolver (@tapclap.match-x.engine.animation-factory)","AnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","AppLoader (scripts.loader)","ApplicationConfig (scripts.config)","ApplicationConfigShortcuts (scripts.config)","ApplicationInstanceComponent (@tapclap.game-kit.application.components)","ApplicationPaymentProvider (@tapclap.game-kit.payment)","ApplicationPurchaseHandler (@tapclap.game-kit.payment)","ApplicationServerConfig (scripts.config)","ArrowComponent (@tapclap.game-kit.ui.arrow)","ArrowScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","AttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","AttemptsMetaModule (@tapclap.game-kit.meta-game.meta-modules.attempts)","AttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts)","AttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts)","AudioComponent (@tapclap.match-x.engine.components)","AudioConfig (scripts.config)","AudioEffectsPlayer (@tapclap.match-x.engine.systems.game-action-system)","AudioEngine (@tapclap.game-kit.audio-manager)","AudioManager (@tapclap.game-kit.audio-manager)","AuthPayload (@tapclap.sdk-x.auth-payload)","AuthProvider (@tapclap.sdk-x.auth-service)","AuthService (@tapclap.sdk-x.auth-service)","AutoCombinationGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","AutoGoalCreator (@tapclap.match-x.engine.goals.creators)","AvatarComponent (scripts.common.components)","BackdropController (@tapclap.game-kit.ui.backdrop)","BackdropManager (@tapclap.game-kit.ui.backdrop)","BackdropScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","BackdropScreenLocker (@tapclap.game-kit.ui.screen-locker)","BackendRemoteConfigFallback (@tapclap.sdk-x.remote-config)","BackgroundAnimationComponent (scripts.windows.items.daily-reward.animation)","BadgeComponent (scripts.common.components)","BadgeView (@tapclap.game-kit.ui.nameplate-manager.views)","BaseAdProvider (@tapclap.sdk-x.ad-service.providers)","BaseAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","BaseAuthHandler (@tapclap.sdk-x.auth-service.handlers)","BaseCustomWindowComponent (@tapclap.game-kit.ui.window-manager)","BaseScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","BaseTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","BeforeLoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","BirthdayCakeExplodeAnimationCreator (scripts.scenes.match3-game.animations.creators)","BirthdayCakeViewComponent (scripts.common.match3-game.components)","BlastMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","BombAnimationBuilder (scripts.scenes.match3-game.animations.builders)","BombMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","BombRibbonsEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)","BombRibbonsEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","BombRibbonsEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)","BombRibbonsLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","BombRibbonsSpineViewComponent (scripts.entity-view-components)","BombRibbonsViewComponent (scripts.entity-view-components)","BombribbonsAnimationBuilder (scripts.scenes.match3-game.animations.builders)","Booster (@tapclap.match-x.engine.boosters)","BoosterAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","BoosterAnimationCreator (@tapclap.match-x.cocos.animations.creators)","BoosterBuyWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","BoosterCartAnimationCreator (scripts.scenes.match3-game.animations.creators)","BoosterCatAnimationCreator (scripts.scenes.match3-game.animations.creators)","BoosterCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","BoosterFactory (@tapclap.match-x.engine.boosters)","BoosterInputHandler (@tapclap.match-x.engine.boosters)","BoosterRewardComponent (scripts.windows.items.daily-reward.reward)","BoosterTrowelAnimationCreator (scripts.scenes.match3-game.animations.creators)","BoosterTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","BoosterViewComponent (@tapclap.match-x.cocos.components)","BoostersViewComponent (@tapclap.match-x.cocos.components)","BorderGameStartDecorator (@tapclap.match-x.cocos.components.start-animators.decorators)","BorderGridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","BossEntityDropComponent (@tapclap.match-x.engine.components.entity-drop)","BossMultiplierComponent (@tapclap.match-x.engine.components)","BounceAnimation (scripts.windows.items.daily-reward.animation)","BundleLoadTask (@tapclap.game-kit.loader)","BundleShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","ButtonControlComponent (@tapclap.game-kit.ui.controls)","CakeLevelWindowLayoutComponent (scripts.windows.layouts.win-level)","CakeRewardForceEndHandler (scripts.meta.modules.daily-cake)","CakeRewardItemComponent (scripts.windows.items)","CakeRewardMetaEvent (scripts.meta-events.event)","CakeRewardMetaModule (scripts.meta.modules.daily-cake)","CakeRewardNameplate (scripts.meta.modules.daily-cake)","CakeRewardWindowAction (scripts.actions)","CakeView (scripts.views.cake-reward)","CakeWindowLayoutComponent (scripts.windows.layouts.cake-reward)","CallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","CanBeCoveredComponent (@tapclap.match-x.engine.components)","CanBeReplacedByEmitComponent (@tapclap.match-x.engine.components)","CanBeReplacedByWalkComponent (@tapclap.match-x.engine.components)","CandyExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","CandySpinnerComponent (scripts.common.spinner)","CandyWrapperLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","CandyboxEmitStrategy (scripts.common.match3-game.systems.emit-system.emit-stategies)","CandyboxEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","CandyvalleyBarSceneComponent (scripts.scenes)","CandyvalleyBarTimerComponent (scripts.scenes)","CandyvalleyBoosterViewComponent (scripts.common.match3-game.components)","CandyvalleyLegacyLevelConverter (scripts.common.match3-game.level-converters)","CandyvalleyMessageHandler (scripts.message-center)","CandyvalleyMessageService (scripts.message-center)","CandyvalleyMoveAnimationBuilder (scripts.scenes.match3-game.animations.builders)","CandyvalleyOfferOldAmountComponent (scripts.views.shop)","CandyvalleyRunMetaGameAction (scripts.actions)","CandyvalleySelectionAnimationBuilder (scripts.scenes.match3-game.animations.builders)","CandyvalleyShopWindowLayoutComponent (scripts.views.shop)","CandyvalleyUserAuthHandler (scripts.auth-service)","CanvasDesignResolutionGuard (@tapclap.game-kit.ui.canvas)","Cell (@tapclap.match-x.engine.entities)","CellBorderBuilderComponent (@tapclap.match-x.cocos.components)","CellComparer (@tapclap.match-x.engine.cell-comparer)","CellHealthComponent (@tapclap.match-x.engine.components)","CellRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","CellViewComponent (@tapclap.match-x.cocos.components)","ChainAnimation (@tapclap.match-x.engine.systems.game-action-system)","ChainIdleAnimationGameActionBuilder (@tapclap.match-x.cocos.animations.builders.chain-idle)","ChameleonAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ChameleonEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","ChameleonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","ChameleonSpineViewComponent (scripts.entity-view-components)","ChameleonViewComponent (scripts.entity-view-components)","ChangeEntityGroupAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ChangeEntityGroupOnCombinationNeighborSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","ChangeEntityGroupOnCounterValueChangeSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","ChangeEntityGroupOnHealthReduceSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","ChangeEntityGroupSystem (@tapclap.match-x.engine.systems.change-entity-group-system)","ChangeGoalComponent (@tapclap.match-x.engine.components)","ChangeGoalSystem (scripts.common.match3-game.systems.change-goal-system)","ChangeGroupComponent (@tapclap.match-x.engine.components)","ChangeRetrieverOnSwapWithComponent (@tapclap.match-x.engine.components)","ChangeRetrieverOnSwapWithSystem (@tapclap.match-x.engine.systems)","ChangeSkinBeforeCollectEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ChangeSkinBeforeCollectEntityComponent (@tapclap.match-x.engine.components)","ChartBuilder (@tapclap.game-kit.meta-game.meta-modules.chart)","ChartItem (@tapclap.game-kit.meta-game.meta-modules.chart)","ChartMetaModule (@tapclap.game-kit.meta-game.meta-modules.chart)","ChartMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.chart)","CheckApplicationPurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)","CheckAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","CheckAttemptsForLevelWithBoostersAction (scripts.actions)","CheckNewEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","CheckStartBoostersAction (scripts.actions)","CheckStartBoostersTutorialAction (scripts.actions)","CheckboxControlComponent (@tapclap.game-kit.ui.controls)","CheckpointRewardAvailableWindowAction (scripts.actions)","CheckpointRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)","CheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward)","CheckpointRewardUnavailableWindowAction (scripts.actions)","ChefCakeView (scripts.views.cake-reward)","ChocolatePotAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ChocolatePotLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","ChunkClassifier (@tapclap.match-x.engine.chunk-classifier)","CleanStateSystem (@tapclap.match-x.engine.systems)","ClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)","ClipAnimation (@tapclap.match-x.cocos.animations)","ClipAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","ClipAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","ClipFunctionResolverComponent (@tapclap.match-x.cocos.components.animations)","ClipIdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","CocosAudioEngine (@tapclap.game-kit.audio-manager.engines)","CocosPolyfills (@tapclap.utils-js.cocos-polyfills)","CoinsBarComponent (@tapclap.game-kit.ui.coins-bar)","CoinsRewardComponent (scripts.windows.items.daily-reward.reward)","CoinsWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","CollectItemWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","CollectorGoalEntityProbabiltyFilter (@tapclap.match-x.engine.helpers.probability-filters)","CollectorRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","ColorFlowerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","ColorFlowerLeafSpineViewComponent (scripts.entity-view-components)","ColorFlowerLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","ColorFlowerPetalSpineViewComponent (scripts.entity-view-components)","ColorFlowerSpineViewComponent (scripts.entity-view-components)","CombinationComponent (@tapclap.match-x.engine.components)","CombinationCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","CombinationExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","CombinationMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","CombinationRetriever (@tapclap.match-x.engine.retrievers)","CombinationSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)","CombinationSystem (@tapclap.match-x.engine.systems)","CombinationsPrioritiesComponent (@tapclap.match-x.engine.components)","CommonMetaDevConsoleMenuGenerator (scripts.devconsole.generators)","CommonMetaGameConfig (scripts.config.meta-games)","CommonProgressCompareValueResolver (scripts.action-conditions.compare-value-resolvers)","CommonRewardConfig (scripts.config.meta-games.common)","CommonShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","CompareAttemptsOfferState (@tapclap.game-kit.offer-manager.states)","CompareItemCountOfferState (@tapclap.game-kit.offer-manager.states)","CompareValueActionCondition (scripts.action-conditions)","CompareValueResolver (scripts.action-conditions.compare-value-resolvers)","CompensationStartBoostersAction (scripts.actions)","CompleteTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)","CompletionSystem (@tapclap.match-x.engine.systems.completion-system)","CompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","Component (@tapclap.match-x.engine.components)","ComponentClassRegister (@tapclap.match-x.engine.components)","ComponentCreator (@tapclap.match-x.engine.components)","ComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","ComponentFactory (@tapclap.match-x.engine.components)","ComponentInjectEntityCreateHandler (@tapclap.match-x.engine.systems.entity-system.entity-create-handlers)","ComponentShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system.strategies)","ComponentSwapStrategySystem (@tapclap.match-x.engine.systems.swap-system.strategies)","CompositeAction (@tapclap.game-kit.action-manager)","CompositeActionCondition (@tapclap.game-kit.action-manager.action-conditions)","CompositeAnimation (@tapclap.match-x.engine.systems.game-action-system)","CompositeDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","CompositeEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","CompositeGoal (@tapclap.match-x.engine.goals)","CompositeGoalCreator (@tapclap.match-x.engine.goals.creators)","CompositeProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","CompositeRemoteConfig (@tapclap.sdk-x.remote-config)","CompositeReplaceOfferStrategy (scripts.offers)","CompositeTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","CompositeTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)","CompositeTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)","ConditionalAction (@tapclap.game-kit.action-manager)","ConfigService (@tapclap.game-kit.config-service)","ConfigurableClickhouseAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers.clickhouse)","ConfigurableGrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)","ContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","ContentWindowLayoutComponent (scripts.windows.layouts)","ContextManager (@tapclap.game-kit.context-manager)","ControlComponent (@tapclap.game-kit.ui.controls)","CottonEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","CountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","CountableMetaTask (@tapclap.game-kit.meta-task-manager.tasks)","CountableUserItem (@tapclap.game-kit.user-item-manager.items)","CounterAnimation (@tapclap.match-x.cocos.animations)","CounterComponent (@tapclap.match-x.engine.components)","CounterRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","CounterSystem (@tapclap.match-x.engine.systems.counter-system)","CoverComponent (@tapclap.match-x.engine.components.cover)","CoverEntitySystem (@tapclap.match-x.engine.systems.cover-entity-system)","CoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system)","CoverGoalCreator (@tapclap.match-x.engine.goals.creators)","CraftMetaModule (@tapclap.game-kit.meta-game.meta-modules.craft)","CraftResourceHandler (@tapclap.game-kit.meta-game.meta-modules.craft)","CraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","CraftWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","CurrencyFormatter (@tapclap.game-kit.ui.formatters)","CurrencyPaymentProvider (@tapclap.sdk-x.payment-service)","CurrentEpisodeNumberScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario.scenario-key-resolvers)","CurrentEpisodeTranslationSegmentProvider (@tapclap.game-kit.meta-game.meta-modules.i18n.translation-providers)","CurrentGroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)","CurrentLevelMetaModule (@tapclap.game-kit.meta-game.meta-modules.current-level)","DI (@tapclap.utils-js.di)","DIConfig (scripts.config)","DIInjectRegistry (@tapclap.utils-js.inject.registry)","DailyRewardAdItemComponent (scripts.windows.items.daily-reward)","DailyRewardDefaultItemComponent (scripts.windows.items.daily-reward)","DailyRewardFinalItemComponent (scripts.windows.items.daily-reward)","DailyRewardItemComponent (scripts.windows.items.daily-reward)","DailyRewardWindowAction (scripts.actions)","DailyRewardWindowComponent (scripts.windows.items.daily-reward)","DailyRewardWindowLayoutComponent (scripts.windows.items.daily-reward)","DataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","DataHandler (scripts.utils.data-handler)","DataLoader (@tapclap.match-x.engine.systems.load-system)","DataStorage (@tapclap.game-kit.data-storage)","DateRangeOfferState (scripts.offers.states)","DeathMultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","DeathTester (@tapclap.match-x.engine.systems.explode-system.testers)","DebugLevelNumber (scripts.scenes)","DecorAnimationBuilder (scripts.scenes.match3-game.animations.builders)","DecoratedGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","DecreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","DefaultAuthStorage (@tapclap.sdk-x.auth-service.storage)","DefaultContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","DefaultGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","DefaultHttpGatewayErrorHandler (@tapclap.game-kit.service-gateway.handlers)","DefaultsRemoteConfig (scripts.config)","DestinationPostfixScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)","DestroyAfterEmitComponent (@tapclap.match-x.engine.components)","DestroyAfterEmitSystem (@tapclap.match-x.engine.systems.destroy-system)","DestroyAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","DestroySystem (@tapclap.match-x.engine.systems)","DevConsole (@tapclap.game-kit.devconsole)","DevConsoleButtonComponent (scripts.devconsole)","DevConsoleCommand (@tapclap.game-kit.devconsole)","DevConsoleComponent (@tapclap.game-kit.devconsole.components)","DevConsoleConfig (scripts.config)","DevConsoleItemComponent (@tapclap.game-kit.devconsole.components)","DevConsoleLauncherComponent (@tapclap.game-kit.devconsole.components)","DevConsoleMenuGenerator (@tapclap.game-kit.devconsole)","DiagonalExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","DiagonalRetriever (@tapclap.match-x.engine.retrievers)","DialogComponent (@tapclap.game-kit.ui.dialogs)","DialogScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)","DialogScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","DialogYandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)","DimensionsComponent (@tapclap.match-x.engine.components)","DimensionsGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","DirectionComponent (@tapclap.match-x.engine.components)","DirectionWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","DistanceToGridEdgeAnimationComponent (@tapclap.match-x.engine.components)","DistanceToGridEdgeComponent (@tapclap.match-x.engine.components)","DistanceToGridEdgeSystem (@tapclap.match-x.engine.systems.distance-to-grid-edge-system)","DoubleExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","DragComponent (@tapclap.match-x.engine.components)","DropAfterComponent (@tapclap.match-x.engine.components.entity-drop)","DropAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","DropComponent (@tapclap.match-x.engine.components)","DummyAnimation (@tapclap.match-x.engine.systems.game-action-system)","DurationFormatter (@tapclap.game-kit.ui.formatters)","EditorController (scripts.editor)","Effect (@tapclap.match-x.engine.effects)","EffectFactory (@tapclap.match-x.engine.effects)","EffectVerifier (@tapclap.match-x.engine.effects)","EmitAfterEmitComponent (@tapclap.match-x.engine.components)","EmitAfterEmitSystem (scripts.common.match3-game.systems)","EmitAfterRemoveComponent (@tapclap.match-x.engine.components.entity-drop)","EmitAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","EmitAnimationComponent (@tapclap.match-x.engine.components)","EmitAnimationCreator (@tapclap.match-x.cocos.animations.creators)","EmitBeforeExplodeSystem (scripts.common.match3-game.systems)","EmitBeforeMoveSystem (scripts.common.match3-game.systems)","EmitBeforeWalkSystem (scripts.common.match3-game.systems)","EmitByGroupComponent (@tapclap.match-x.engine.components)","EmitByStrategyComponent (@tapclap.match-x.engine.components)","EmitByStrategyDataLoader (@tapclap.match-x.engine.systems.load-system)","EmitComponent (@tapclap.match-x.engine.components)","EmitEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","EmitEntityByEntityAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","EmitEntityCompletionSystemAction (@tapclap.match-x.engine.systems.completion-system.actions)","EmitInGridEdgeComponent (@tapclap.match-x.engine.components)","EmitMultiplierOnDeathComponent (@tapclap.match-x.engine.components)","EmitOnConfigurationsComponent (@tapclap.match-x.engine.components)","EmitOnDeathBeforeMoveComponent (@tapclap.match-x.engine.components)","EmitOnDeathComponent (@tapclap.match-x.engine.components)","EmitOnEmptyTrackComponent (@tapclap.match-x.engine.components)","EmitOnEndCounterComponent (@tapclap.match-x.engine.components)","EmitOnExplodeBeforeMoveComponent (@tapclap.match-x.engine.components)","EmitOnExplodeComponent (@tapclap.match-x.engine.components)","EmitOnGameCompletionComponent (@tapclap.match-x.engine.components)","EmitOnGameStartComponent (@tapclap.match-x.engine.components)","EmitOnNonExplodeComponent (@tapclap.match-x.engine.components)","EmitOnSwapBeforeExplodeComponent (@tapclap.match-x.engine.components)","EmitOnTurnComponent (@tapclap.match-x.engine.components)","EmitOnTurnEndAndCounterEndComponent (@tapclap.match-x.engine.components)","EmitOnTurnEndAndDeathComponent (@tapclap.match-x.engine.components)","EmitOnTurnEndAndExplodeComponent (@tapclap.match-x.engine.components)","EmitOnTurnEndComponent (@tapclap.match-x.engine.components)","EmitProducer (@tapclap.match-x.engine.systems.emit-system)","EmitStageComponent (@tapclap.match-x.engine.components)","EmitStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)","EmitStrategy (@tapclap.match-x.engine.systems.emit-system)","EmitSystem (@tapclap.match-x.engine.systems.emit-system)","EmitTargetComponent (@tapclap.match-x.engine.components)","EmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system)","EmitValidator (@tapclap.match-x.engine.systems.emit-system)","EmitterComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","EmitterGroupIdEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","EmptyCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","EmptyCellRetriever (@tapclap.match-x.engine.retrievers)","EmptyEntityGridDataLoaderPostHandler (scripts.common.match3-game.gridDataLoaderPostHandlers)","EmptyGroupEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","EmptyNextTrackWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","EmptyWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","Engine (@tapclap.match-x.engine)","Entity (@tapclap.match-x.engine.entities)","EntityAsGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","EntityByGoalProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","EntityClassRegister (@tapclap.match-x.engine.entities)","EntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)","EntityComponentSetComponent (@tapclap.match-x.engine.components)","EntityCountLimitComponent (@tapclap.match-x.engine.components)","EntityCreateHandler (@tapclap.match-x.engine.systems.entity-system)","EntityDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","EntityDeathSystem (@tapclap.match-x.engine.systems.entity-death-system)","EntityDestroyPoolComponent (@tapclap.match-x.engine.components)","EntityDropAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)","EntityDropSystem (@tapclap.match-x.engine.systems.entity-drop-system)","EntityDropSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system)","EntityEmitAfterRemoveSystemStrategy (@tapclap.match-x.engine.systems.entity-drop-system.strategies)","EntityFactory (@tapclap.match-x.engine.entities)","EntityGroupReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity.strategy)","EntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory)","EntityLockFactory (@tapclap.match-x.engine.systems.lock-system.lock-factory)","EntityPoolComponent (@tapclap.match-x.engine.components)","EntityPrefixComponent (@tapclap.match-x.engine.components)","EntityProbability (@tapclap.match-x.engine.models)","EntityProbabilityComponent (@tapclap.match-x.engine.components)","EntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","EntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)","EntityRenderer (@tapclap.match-x.cocos.renderers)","EntityShakeAnimation (@tapclap.match-x.cocos.animations)","EntitySkinConfig (scripts.config)","EntityStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)","EntitySystem (@tapclap.match-x.engine.systems.entity-system)","EntityTypeGroupsComponent (@tapclap.match-x.engine.components)","EntityViewComponent (@tapclap.match-x.cocos.components)","EntityWrapperContentComponent (@tapclap.match-x.engine.components)","EpisodeEndedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","EpisodeStarsCheckpointRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)","EpisodeTargetResolver (scripts.scenes.meta-game.episodic.target-resolvers)","EpisodeWindowItemComponent (scripts.windows.items)","EpisodesMetaModule (@tapclap.game-kit.meta-game.meta-modules.episodes)","EpisodesMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.episodes)","EpisodesResourceHandler (@tapclap.game-kit.meta-game.meta-modules.episodes)","EpisodicAvatarComponent (scripts.scenes.meta-game.episodic.components)","EpisodicEpisodeComponent (scripts.scenes.meta-game.episodic.components)","EpisodicEpisodeHolderComponent (scripts.scenes.meta-game.episodic.components)","EpisodicEpisodeNumberValueResolver (scripts.scenes.meta-game.episodic.value-resolvers)","EpisodicLastEpisodeComponent (scripts.scenes.meta-game.episodic.components)","EpisodicLevelComponent (scripts.scenes.meta-game.episodic.components)","EpisodicMapComponent (scripts.scenes.meta-game.episodic.components)","EpisodicMaxAvailableLevelResolver (scripts.scenes.meta-game.episodic.value-resolvers)","EpisodicMetaGame (scripts.scenes.meta-game.episodic)","EpisodicRangeResolver (scripts.scenes.meta-game.episodic.range-resolvers)","EpisodicSceneComponent (scripts.scenes.meta-game.episodic.components)","EpisodicScrollAdapter (scripts.scenes.meta-game.episodic.components)","EpisodicScrollViewComponent (scripts.scenes.meta-game.episodic.components)","EpisodicStarsRewardComponent (scripts.scenes.meta-game.episodic.components)","EpisodicWindowLayoutComponent (scripts.windows.layouts)","EqualTagExplodeSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","EventAnimation (@tapclap.match-x.engine.systems.game-action-system)","EventComponent (@tapclap.match-x.engine.components)","EventEmitter (@tapclap.utils-js.events)","EventListener (@tapclap.utils-js.events)","EventObject (@tapclap.utils-js.events)","ExpandShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","ExplodeAffectNeighborsComponent (@tapclap.match-x.engine.components)","ExplodeAnimation (@tapclap.match-x.cocos.animations)","ExplodeAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","ExplodeAnimationComponent (@tapclap.match-x.engine.components)","ExplodeAnimationCreator (@tapclap.match-x.cocos.animations.creators)","ExplodeAsCombinationComponent (@tapclap.match-x.engine.components)","ExplodeBeforeEmitOnEmptyTrackSystem (scripts.common.match3-game.systems)","ExplodeBlastAsCombinationComponent (@tapclap.match-x.engine.components)","ExplodeCollectionComponent (@tapclap.match-x.engine.components)","ExplodeCollectionSystem (@tapclap.match-x.engine.systems)","ExplodeCollectorSystem (@tapclap.match-x.engine.systems)","ExplodeComponent (@tapclap.match-x.engine.components)","ExplodeCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","ExplodeDeathEntityComponent (@tapclap.match-x.engine.components)","ExplodeDeathEntitySystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeHandler (@tapclap.match-x.engine.systems.explode-system)","ExplodeImmediateComponent (@tapclap.match-x.engine.components)","ExplodeImmediateOnceAfterChangeGroupComponent (@tapclap.match-x.engine.components)","ExplodeImmediateOnceAfterChangeGroupSystem (@tapclap.match-x.engine.systems.after-change-group-system)","ExplodeImmediateOnceComponent (@tapclap.match-x.engine.components)","ExplodeImmediateSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeJarjamAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ExplodeLayerOnExplodeComponent (@tapclap.match-x.engine.components)","ExplodeLayerOnRemoveComponent (@tapclap.match-x.engine.components)","ExplodeNextOnTrackOnExplodeComponent (@tapclap.match-x.engine.components)","ExplodeNextOnTrackOnExplodeSystem (@tapclap.match-x.engine.systems)","ExplodeOnBlastComponent (@tapclap.match-x.engine.components)","ExplodeOnBlastNeighborComponent (@tapclap.match-x.engine.components)","ExplodeOnCombinationComponent (@tapclap.match-x.engine.components)","ExplodeOnCombinationNeighborComponent (@tapclap.match-x.engine.components)","ExplodeOnCombinationSystem (@tapclap.match-x.engine.systems)","ExplodeOnCompletedGoalComponent (@tapclap.match-x.engine.components)","ExplodeOnCounterEndComponent (@tapclap.match-x.engine.components)","ExplodeOnCounterEndSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeOnDeathComponent (@tapclap.match-x.engine.components)","ExplodeOnEndTurnComponent (@tapclap.match-x.engine.components)","ExplodeOnExplodeNeighborComponent (@tapclap.match-x.engine.components)","ExplodeOnGroundComponent (@tapclap.match-x.engine.components)","ExplodeOnSwapComponent (@tapclap.match-x.engine.components)","ExplodeOnSwapSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeOnTapComponent (@tapclap.match-x.engine.components)","ExplodeOnTurnStateSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeOneCellComponent (@tapclap.match-x.engine.components)","ExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","ExplodeRetrieverComponent (@tapclap.match-x.engine.components)","ExplodeSelfOnNextTrackFinishAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ExplodeSelfOnNextTrackFinishComponent (@tapclap.match-x.engine.components)","ExplodeStateModel (@tapclap.match-x.engine.systems.explode-system)","ExplodeSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodeTester (@tapclap.match-x.engine.systems.explode-system.testers)","ExplodeWalkReplaceSystem (@tapclap.match-x.engine.systems.explode-system)","ExplodedByComponent (@tapclap.match-x.engine.components)","FacebookInstantLauncher (@tapclap.sdk-x.platform-launcher.launchers.facebook)","FactoryIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)","FadeOutEntityRenderGameActionBuilder (@tapclap.match-x.cocos.animations.builders)","FadeTransitionComponent (@tapclap.game-kit.ui.transition)","FadeUIScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","FailWalkComponent (@tapclap.match-x.engine.components)","FailWalkInGridEdgeLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","FailWalkLoseGameComponent (@tapclap.match-x.engine.components)","FailWalkLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","FeatureOfferState (scripts.offers.states)","Fetch (@tapclap.utils-js.fetch)","FetchStorageService (scripts.service)","Filter (@tapclap.game-kit.filter)","FinalAnimationCleanerBuilder (@tapclap.match-x.cocos.animations.builders)","FinalContentAnimationComponent (scripts.windows.items.daily-reward.animation.content)","FinalGiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","FinalUIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","FinishMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)","FinishTrackComponent (@tapclap.match-x.engine.components)","FireworkComponent (@tapclap.game-kit.ui.animations)","FitContentComponent (@tapclap.game-kit.ui.canvas)","FlexItemComponent (scripts.common.components.flex)","FlexLayoutComponent (scripts.common.components.flex)","FlyOffOnDeathAnimationCreator (scripts.scenes.match3-game.animations.creators)","FlyOffOnDeathComponent (@tapclap.match-x.engine.components)","FooterWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","ForceSwapCoverComponent (@tapclap.match-x.engine.components)","FriendItemComponent (scripts.windows.layouts.message-center)","FriendWindowItemComponent (scripts.windows.items)","FriendsScrollAdapter (scripts.windows.scroll-adapters)","FullscreenWindowComponent (@tapclap.game-kit.ui.window-manager)","FunctionAction (@tapclap.game-kit.action-manager.actions)","FunctionAnimation (@tapclap.match-x.engine.systems.game-action-system)","FunctionAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","FunctionLoadTask (@tapclap.game-kit.loader)","GameActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","GameActionSystem (@tapclap.match-x.engine.systems.game-action-system)","GameCompletionGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","GameEventActionBuilder (@tapclap.match-x.engine.systems.game-action-system.builders)","GameEventModel (@tapclap.match-x.engine.systems.game-event-system)","GameEventStrategy (@tapclap.match-x.engine.systems.game-event-system)","GameEventSystem (@tapclap.match-x.engine.systems.game-event-system)","GameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","GameOverAnimationBuilder (scripts.scenes.match3-game.animations.builders)","GameOverCallbackGameActionBuilder (scripts.scenes.match3-game.animations.builders)","GameOverSystem (@tapclap.match-x.engine.systems)","GameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","GameStartDecorator (@tapclap.match-x.cocos.components.start-animators)","GameWinCongratulationsAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","GatewayRequest (@tapclap.game-kit.service-gateway)","GetterToDateRange (scripts.getters)","GetterToValue (@tapclap.utils-js.getters)","GiftBoxAnimationComponent (scripts.windows.items.daily-reward.animation.gift-box)","Goal (@tapclap.match-x.engine.goals)","GoalAmountComponent (@tapclap.match-x.engine.components)","GoalAmountRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","GoalAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","GoalAnimationComponent (@tapclap.match-x.engine.components)","GoalCollectionComponent (@tapclap.match-x.engine.components)","GoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","GoalCollectorAnimationCreator (@tapclap.match-x.cocos.animations.creators)","GoalCollectorComponent (@tapclap.match-x.engine.components)","GoalCompleteGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","GoalComponent (@tapclap.match-x.engine.components)","GoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)","GoalCreator (@tapclap.match-x.engine.goals.creators)","GoalDataExtractor (@tapclap.game-kit.meta-game.meta-modules.levels.data-extractors)","GoalDataLoader (@tapclap.match-x.engine.systems.load-system)","GoalFactory (@tapclap.match-x.engine.goals)","GoalStartAnimationHandler (scripts.common.match3-game.start-animation-handlers)","GoalSystem (@tapclap.match-x.engine.systems)","GoalsBarRenderer (@tapclap.match-x.cocos.renderers)","Grid (@tapclap.match-x.engine.entities)","GridChecker (@tapclap.match-x.engine.grid-checkers)","GridComponent (@tapclap.match-x.engine.components)","GridDataLoader (@tapclap.match-x.engine.systems.load-system)","GridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system)","GridEntityCountLimitProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","GridEntityRenderer (@tapclap.match-x.cocos.renderers)","GridRandomEntityComponent (@tapclap.match-x.engine.components)","GridReadyAfterLockChecker (@tapclap.match-x.engine.grid-checkers)","GridRenderer (@tapclap.match-x.cocos.renderers)","GridViewComponent (@tapclap.match-x.cocos.components.grid)","GridViewDecoratorComponent (@tapclap.match-x.cocos.components.grid.decorators)","GroundSystem (@tapclap.match-x.engine.systems.ground-system)","GroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system)","GroupAffectNeighborStrategy (@tapclap.match-x.engine.systems.explode-system.strategies)","GroupAnimation (@tapclap.match-x.engine.systems.game-action-system)","GroupComponent (@tapclap.match-x.engine.components)","GroupEntityMapComponent (@tapclap.match-x.engine.components)","GroupEntityRenderDecorator (@tapclap.match-x.cocos.renderers.decorators)","GroupEntityViewComponent (@tapclap.match-x.cocos.components)","GroupExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","GroupRetriever (@tapclap.match-x.engine.retrievers)","GrowthBook (@tapclap.sdk-x.remote-config.growthbook.sdk)","GrowthbookRemoteConfig (@tapclap.sdk-x.remote-config.growthbook)","GumAnimationBuilder (scripts.scenes.match3-game.animations.builders)","GumGoalAnimationBuilder (scripts.scenes.match3-game.animations.builders)","HasAdActionCondition (scripts.action-conditions)","HasAdOfferState (@tapclap.game-kit.offer-manager.states)","HasNotAttemptsActionCondition (@tapclap.game-kit.action-manager.action-conditions)","HeaderWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","HealthAnimationBuilder (scripts.scenes.match3-game.animations.builders)","HealthAnimationResolver (@tapclap.match-x.engine.animation-factory)","HealthComponent (@tapclap.match-x.engine.components)","HealthRenderDecorator (scripts.scenes.match3-game.renderers.decorators)","HealthSystem (@tapclap.match-x.engine.systems.health-system)","HealthSystemStateModel (@tapclap.match-x.engine.systems.health-system)","HealthViewComponent (scripts.common.components)","HeartClipIdleViewComponent (scripts.common.match3-game.components.entities.heart)","HeartGroupEntityViewComponent (scripts.common.match3-game.components.entities.heart)","HelpAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","HelpAnimationFactory (@tapclap.match-x.cocos.animations)","HelpStrategy (@tapclap.match-x.engine.systems.help-system)","HelpSystem (@tapclap.match-x.engine.systems.help-system)","HeroAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","HeroBalloonComponent (@tapclap.game-kit.ui.hero)","HeroCandyThrowAnimationBuilder (scripts.scenes.match3-game.animations.builders)","HeroComponent (@tapclap.game-kit.ui.hero)","HeroEntityThrowAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","HeroScheduleWaitingAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","HighlightScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","HttpClient (@tapclap.utils-js.http-client)","HttpGateway (@tapclap.game-kit.service-gateway)","I18N (@tapclap.game-kit.i18n)","I18NAppLoader (scripts.loader)","I18NComponent (@tapclap.game-kit.i18n.components)","I18NDateTemplateParser (@tapclap.game-kit.i18n.parsers)","I18NDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","I18NLabel (@tapclap.game-kit.i18n.components)","I18NNodeSize (@tapclap.game-kit.i18n.components)","I18NNodeSizeProperty (@tapclap.game-kit.i18n.components)","I18NParamsTemplateParser (@tapclap.game-kit.i18n.parsers)","I18NPluralTemplateParser (@tapclap.game-kit.i18n.parsers)","I18NProperty (@tapclap.game-kit.i18n.components)","I18NRegexpTemplateParser (@tapclap.game-kit.i18n)","I18NResourceHandler (@tapclap.game-kit.meta-game.meta-modules.i18n)","I18NSexTemplateParser (@tapclap.game-kit.i18n.parsers)","I18NSprite (@tapclap.game-kit.i18n.components)","I18NSpriteProperty (@tapclap.game-kit.i18n.components)","I18NTemplateParser (@tapclap.game-kit.i18n)","I18NTimeTemplateParser (@tapclap.game-kit.i18n.parsers)","I18NTranslationHandler (@tapclap.game-kit.translation-handler.i18n)","IAnalyticsProvider (@tapclap.sdk-x.analytics-service)","IAuthHandler (@tapclap.sdk-x.auth-service)","IAuthStorage (@tapclap.sdk-x.auth-service)","IGetter (@tapclap.utils-js.getters)","IGoalCollectionViewComponent (@tapclap.match-x.cocos.components.goals)","IGoalCounterViewComponent (@tapclap.match-x.cocos.components.goals)","IIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)","IMetaTask (@tapclap.game-kit.meta-task-manager)","IPriceFormatter (@tapclap.sdk-x.payment-service.price-formatter)","IRemoteConfig (@tapclap.sdk-x.remote-config)","IRemoteConfigFallback (@tapclap.sdk-x.remote-config)","IUserAttributesResolver (@tapclap.sdk-x.remote-config.growthbook)","IUserFactory (@tapclap.game-kit.user-service)","IUtmProvider (@tapclap.sdk-x.utm)","IconComponent (@tapclap.game-kit.ui.icons)","IconSpinnerComponent (@tapclap.game-kit.ui.spinner)","IconTextWidget (@tapclap.game-kit.ui.icon-text-widget)","IdleAnimationSystem (@tapclap.match-x.engine.systems.idle-animation-system)","IdleAnimator (@tapclap.match-x.cocos.components.animation-factory)","IdleViewComponent (@tapclap.match-x.cocos.components.idle-view-components)","ImagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)","ImageWindowItemComponent (scripts.windows.items)","ImageWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","InCombinationComponent (@tapclap.match-x.engine.components)","InGridEdgeEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","IncreaseAttemptsAction (@tapclap.game-kit.action-manager.actions.match3-game)","IncreaseDropAfterRemoveCounterProbabilityFilter (scripts.common.match3-game.entity-probability-filter)","IncreaseLevelStartCountAction (scripts.actions)","IncreaseProgressByLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)","InheritGroupOnSwapComponent (@tapclap.match-x.engine.components)","InheritGroupSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","InitialRandomProbabilityFilter (@tapclap.match-x.engine.helpers.probability-filters)","Inject (@tapclap.utils-js.inject)","Input (@tapclap.match-x.engine.systems.input-system)","InputCallbackDevConsoleCommand (@tapclap.game-kit.devconsole.commands)","InputComponent (@tapclap.match-x.engine.components)","InputHandler (@tapclap.match-x.engine.systems.input-system)","InputHandlerComponent (@tapclap.match-x.engine.components)","InputHandlerEffectVerifier (@tapclap.match-x.engine.effects.verifiers)","InputLockAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","InputScenarioProducer (@tapclap.game-kit.scenario-manager.producers)","InputSystem (@tapclap.match-x.engine.systems.input-system)","InstanceBuilderDI (@tapclap.utils-js.di)","InstanceContainerDI (@tapclap.utils-js.di)","InstanceFunctionDI (@tapclap.utils-js.di)","InstanceObjectDI (@tapclap.utils-js.di)","InstanceRawDI (@tapclap.utils-js.di)","InstanceReferenceDI (@tapclap.utils-js.di)","InteractiveScrollbarComponent (scripts.common.scroll)","InterstitialAdCondition (scripts.action-conditions)","InterstitialAdConditionAction (scripts.action-conditions)","IntervalRewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.interval-reward)","IntervalRewardMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.interval-reward)","JarjamSpineViewComponent (scripts.entity-view-components)","JarjamViewComponent (scripts.entity-view-components)","JsonRemoteConfig (@tapclap.sdk-x.remote-config)","KawaseBlurComponent (scripts.common.components)","KeepGoalAfterCompleteComponent (@tapclap.match-x.engine.components)","KeyNode (@tapclap.game-kit.ui.common)","KeySpriteFrame (@tapclap.game-kit.ui.common)","KitchenTimerEntityComponentLevelRetriever (scripts.common.match3-game.component-level-retrievers)","KitchenTimerEntityRenderDecorator (scripts.common.match3-game.entity-decorators)","LabelStyleWidget (@tapclap.game-kit.ui.label-style-widget)","LabelsWindowLayoutComponent (scripts.windows.layouts)","LanguageSettingsWindowAction (scripts.actions)","LanguageSettingsWindowLayoutComponent (scripts.windows.layouts)","LastLevelInEpisodeActionCondition (@tapclap.game-kit.action-manager.action-conditions)","LegacyEntityRetriever (@tapclap.match-x.engine.level-converter)","LegacyEpisodicLevelsResourceHandler (@tapclap.game-kit.meta-game.meta-modules.levels)","LegacyLevelComponentRetriever (@tapclap.match-x.engine.level-converter)","LegacyLevelConverter (@tapclap.match-x.engine.level-converter)","LegacyLevelConverterV2 (@tapclap.match-x.engine.level-converter)","LemonLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","LevelConverter (@tapclap.match-x.engine.level-converter)","LevelConverterConfig (scripts.config)","LevelHasPartForCraftGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","LevelIsHardActionCondition (scripts.action-conditions)","LevelIsHardAndNeedTutorialGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","LevelStartCountActionCondition (scripts.action-conditions)","LevelsMetaModule (@tapclap.game-kit.meta-game.meta-modules.levels)","LimitOfferState (@tapclap.game-kit.offer-manager.states)","LimitPerTimeOfferState (@tapclap.game-kit.offer-manager.states)","LivesAttemptsBarComponent (@tapclap.game-kit.ui.attempts-bar)","LoadSystem (@tapclap.match-x.engine.systems.load-system)","LoadTask (@tapclap.game-kit.loader)","Loader (@tapclap.game-kit.loader)","LocalConfig (scripts.config)","LocalConfig.yandex.app (scripts.config)","LocalStorage (@tapclap.game-kit.data-storage)","LocaleResolver (@tapclap.game-kit.locale-resolver)","LocaleResolver (@tapclap.sdk-x.locale-resolver)","LockAnimationBuilder (scripts.scenes.match3-game.animations.builders)","LockAnimationResolver (scripts.common.match3-game.animation-resolvers)","LockComponent (@tapclap.match-x.engine.components)","LockEmitInGridEdgeComponent (@tapclap.match-x.engine.components)","LockExplodeForTurnCountEntityLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","LockInputAction (@tapclap.game-kit.action-manager.actions.ui)","LockOnExplodeComponent (@tapclap.match-x.engine.components)","LockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","LockOnFailWalkInGridEdgeComponent (@tapclap.match-x.engine.components)","LockOnFailWalkInGridEdgeSystem (@tapclap.match-x.engine.systems.lock-system)","LockOnWalkFinishComponent (@tapclap.match-x.engine.components)","LockOnWalkFinishSystem (@tapclap.match-x.engine.systems.lock-system)","LockSystem (@tapclap.match-x.engine.systems.lock-system)","LogMatch3GameLoseAction (scripts.actions)","LootBoxUnpacker (@tapclap.game-kit.ui.loot-box)","LootBoxUnpackerView (@tapclap.game-kit.ui.loot-box)","LootBoxView (@tapclap.game-kit.ui.loot-box)","LoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","LoseLevelBombExplodeWindowLayoutComponent (scripts.views.lose-level)","LoseLevelParrotFailWalkLayoutComponent (scripts.views.lose-level)","LoseLevelState (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","LoseLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts.lose-level)","LoseReasonWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","MachineGumLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","ManageComponentsOnSwapComponent (@tapclap.match-x.engine.components)","ManageComponentsSwapSystemHandler (@tapclap.match-x.engine.systems.swap-system.handlers)","MaskRenderComponent (@tapclap.game-kit.ui.maskrenderer.components)","Match3Game (scripts.common.match3-game)","Match3GameComponent (scripts.scenes.match3-game)","Match3GameConfig (scripts.common.match3-game)","Match3GameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","Matrix (@tapclap.match-x.engine.models)","MatrixIterator (@tapclap.match-x.engine.models)","MatrixIteratorFactory (@tapclap.match-x.engine.models)","MemoryAuthStorage (@tapclap.sdk-x.auth-service.storage)","MenuWindowLayoutComponent (scripts.windows.layouts)","MergeComponent (@tapclap.match-x.engine.components)","MergePartComponent (@tapclap.match-x.engine.components)","Message (@tapclap.game-kit.message-center)","MessageCenter (@tapclap.game-kit.message-center)","MessageCenterDevConsoleMenuGenerator (scripts.devconsole.generators)","MessageCenterLayoutComponent (scripts.windows.layouts.message-center)","MessageCenterSceneBadgeComponent (scripts.badges)","MessageCenterScrollAdapter (scripts.windows.scroll-adapters)","MessageCenterWindowAction (scripts.actions)","MessageEventHandler (scripts.message-center.event-handlers)","MessageHandler (@tapclap.game-kit.message-center)","MessageItemComponent (scripts.windows.layouts.message-center)","MessageLimits (@tapclap.game-kit.message-center)","MessagePublicationResolver (@tapclap.game-kit.publication-manager.resolvers)","MessageRequest (@tapclap.game-kit.message-center)","MessageService (@tapclap.game-kit.message-center)","MessagesScrollAdapter (scripts.windows.scroll-adapters)","MetaActionDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","MetaActionsDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","MetaEvent (scripts.meta-events.event)","MetaEventBranch (scripts.meta-events.branch)","MetaEventBranchDataHandler (scripts.utils.data-handler)","MetaEventConfig (scripts.config)","MetaEventDataHandler (scripts.utils.data-handler)","MetaEventGetter (scripts.getters)","MetaEventManager (scripts.meta-events)","MetaEventsDevConsoleMenuGenerator (scripts.devconsole.generators)","MetaGame (@tapclap.game-kit.meta-game)","MetaGameConfig (scripts.config)","MetaGameDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","MetaGameManager (@tapclap.game-kit.meta-game)","MetaGameOfferState (@tapclap.game-kit.offer-manager.states)","MetaGameResolver (@tapclap.game-kit.meta-game)","MetaGamesDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","MetaModule (@tapclap.game-kit.meta-game.meta-modules)","MetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","MetaModuleGetter (@tapclap.game-kit.getters)","MetaModuleResolver (@tapclap.game-kit.meta-game)","MetaModuleResourceHandler (@tapclap.game-kit.meta-game.meta-modules)","MetaObjectFactory (scripts.utils)","MetaProgressAvailability (@tapclap.game-kit.user-item-manager.availability)","MetaTaskAction (@tapclap.game-kit.meta-task-manager)","MetaTaskConfig (scripts.config)","MetaTaskManager (@tapclap.game-kit.meta-task-manager)","MinProgressOfferState (@tapclap.game-kit.offer-manager.states)","MixerAnimationBuilder (scripts.scenes.match3-game.animations.builders)","MixerMovesLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","MockAdProvider (@tapclap.sdk-x.ad-service.providers.mock)","MockNotificationAdapter (scripts.social-service.adapters)","MockPaymentProvider (@tapclap.sdk-x.payment-service.providers.mock)","MockPaymentValidationService (@tapclap.sdk-x.payment-service.validation)","MockSocialAdapter (@tapclap.sdk-x.social-service.adapters.mock)","MockUtmProvider (@tapclap.sdk-x.utm.providers)","Model (@tapclap.utils-js.data)","ModernWindowComponent (scripts.windows.layouts)","ModifyEntityComponent (@tapclap.match-x.engine.components)","ModifyEntityOnChangeGroupComponent (@tapclap.match-x.engine.components)","ModifyEntityOnChangeGroupSystem (@tapclap.match-x.engine.systems.modify-entity-system)","ModifyEntityOnDeathComponent (@tapclap.match-x.engine.components)","ModifyEntityOnDeathSystem (@tapclap.match-x.engine.systems.modify-entity-system)","ModifyEntitySystem (@tapclap.match-x.engine.systems.modify-entity-system)","MorphComponent (@tapclap.match-x.engine.components)","MorphOnCounterValueComponent (@tapclap.match-x.engine.components)","MorphViewComponent (@tapclap.match-x.cocos.components)","MotionClipSceneTransitionComponent (scripts.scenes)","MotionSceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","MoveAnimation (@tapclap.match-x.cocos.animations)","MoveComponent (@tapclap.match-x.engine.components)","MoveMatrix (@tapclap.match-x.engine.models)","MoveStrategy (@tapclap.match-x.engine.systems.move-system)","MoveSystem (@tapclap.match-x.engine.systems.move-system)","MoveToGoalAnimation (@tapclap.match-x.cocos.animations)","MovesCountGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","MovesCounterRenderer (@tapclap.match-x.cocos.renderers)","MovesCounterStartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system.starategies)","MovesCounterViewComponent (@tapclap.match-x.cocos.components)","MovesCounterWithInitiatorAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","MovesReducingByEntityCount (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","MovesReducingByExplodeEntityStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","MovesReducingByStateStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","MovesReducingStrategy (@tapclap.match-x.engine.systems.moves-reducing-system.strategies)","MovesReducingSystem (@tapclap.match-x.engine.systems.moves-reducing-system)","MultipleProgressStarViewComponent (@tapclap.match-x.cocos.components)","MultiplierAnimationBuilder (scripts.scenes.match3-game.animations.builders)","MultiplierComponent (@tapclap.match-x.engine.components)","MultiplierHoldComponent (@tapclap.match-x.engine.components)","MultiplierOnBlastComponent (@tapclap.match-x.engine.components)","MultiplierOnCombinationComponent (@tapclap.match-x.engine.components)","MultiplierStarAnimation (scripts.scenes.match3-game.animations)","MultiplierSystem (@tapclap.match-x.engine.systems.multiplier-system)","MultiplierSystemModel (@tapclap.match-x.engine.systems.multiplier-system)","MultiplierSystemStrategy (@tapclap.match-x.engine.systems.multiplier-system.strategies)","MultiplierViewComponent (@tapclap.match-x.cocos.components)","MusicMetaModule (@tapclap.game-kit.meta-game.meta-modules.music)","Nameplate (@tapclap.game-kit.ui.nameplate-manager)","NameplateListView (@tapclap.game-kit.ui.nameplate-manager.views)","NameplateManager (@tapclap.game-kit.ui.nameplate-manager)","NameplateView (@tapclap.game-kit.ui.nameplate-manager.views)","NeedPiggybankTutorialActionCondition (scripts.action-conditions)","NeedShowCakeRewardWindowActionCondition (scripts.meta.modules.daily-cake)","NeedTutorialForHardLevelActionCondition (@tapclap.game-kit.action-manager.action-conditions)","NeighborCellsComponent (@tapclap.match-x.engine.components)","NeighborEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","NeighborExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","NeighborNoFilterExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","NeighborRetriever (@tapclap.match-x.engine.retrievers)","NeighborWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","NetworkErrorWindowAction (@tapclap.game-kit.action-manager.actions.network)","NewUserActionCondition (scripts.action-conditions)","NextMatch3GameAction (@tapclap.game-kit.action-manager.actions.match3-game)","NoFundsAction (@tapclap.game-kit.action-manager.actions.purchase)","NoItemOfferState (@tapclap.game-kit.offer-manager.states)","NodeHolder (@tapclap.match-x.cocos.components)","NotReplaceByStartBoosterComponent (@tapclap.match-x.engine.components)","NotificationAdapter (@tapclap.sdk-x.notification)","NotificationRequestWindowAction (@tapclap.game-kit.action-manager.actions.notifications)","NumberFormatter (@tapclap.game-kit.ui.number-formatter)","ObjectFactory (@tapclap.utils-js.di)","ObjectStorageAdapter (@tapclap.game-kit.data-storage.adapters)","Offer (@tapclap.game-kit.offer-manager)","OfferFactory (@tapclap.game-kit.offer-manager)","OfferIsAvailableActionCondition (scripts.action-conditions)","OfferManager (@tapclap.game-kit.offer-manager)","OfferPayloadBuilder (@tapclap.game-kit.offer-manager)","OfferState (@tapclap.game-kit.offer-manager)","OfferStrategy (@tapclap.game-kit.offer-manager)","OfferTimer (@tapclap.utils-js.timer)","OffersConfig (scripts.config)","OffersMetaModule (@tapclap.game-kit.meta-game.meta-modules.offers)","OffersStrategiesConfig (scripts.config)","OnCounterValueChangeGroupComponent (@tapclap.match-x.engine.components)","OnDeathRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","OnEmitRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","OnEmptyTrackByProbabilityStrategy (scripts.common.match3-game.systems.strategies)","OnEndCounterEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnEntityDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnEntityEmitAfterEmitProducer (scripts.common.match3-game.systems.emit-producers)","OnEntityExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnEntityTriggerEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnExplodeCombinationNeighborChangeGroupComponent (@tapclap.match-x.engine.components)","OnExplodeNextOnTrackWalkSystem (scripts.common.match3-game.systems)","OnHealthReduceChangeGroupComponent (@tapclap.match-x.engine.components)","OnSkipExplodeStateMoveSystem (scripts.common.match3-game.systems)","OnSpecificTurnStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)","OnStartWorldEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTrackEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","OnTurnCountAfterExplodeRecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system.strategies)","OnTurnEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndAndCounterEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndAndDeathEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndAndEmptyTrackEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndAndExplodeEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndEmitByGroupNonExplodeProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndEmitProducer (@tapclap.match-x.engine.systems.emit-system.emit-producers)","OnTurnEndWalkSystem (scripts.common.match3-game.systems)","OnTurnIntervalStrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system.strategies)","OneOfEachComponentSwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy.resolvers)","OpenCommunityUrlAction (scripts.actions)","OpenEpisodeAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","OrientationComponent (scripts.responsive)","OrientationFitNodeToTargetComponent (scripts.responsive)","OrientationHolderComponent (scripts.responsive)","OrientationNodeComponent (scripts.responsive)","OrientationRatioDesignResolutionComponent (scripts.responsive)","OrientationScaleComponent (scripts.responsive)","OrientationSizeComponent (scripts.responsive)","OrientationTargetVisibilityComponent (scripts.responsive)","OrientationVisibilityComponent (scripts.responsive)","OrientationWidgetComponent (scripts.responsive)","OrientationWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)","OutOfMovesStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","OverEntityColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)","OverallGoal (@tapclap.match-x.engine.goals)","OverallGoalCreator (@tapclap.match-x.engine.goals.creators)","ParallelRadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","ParrotDestroyAnimationBuilder (scripts.scenes.match3-game.animations.builders)","PatchHelper (@tapclap.utils-js.data)","PathWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","Patterns (@tapclap.match-x.engine.chunk-classifier)","PaymentProvider (@tapclap.sdk-x.payment-service)","PaymentService (@tapclap.sdk-x.payment-service)","PaymentValidationService (@tapclap.sdk-x.payment-service)","PerspectiveGridViewComponent (@tapclap.match-x.cocos.components.grid)","PiggybankFooterWindowLayoutComponent (scripts.windows.layouts.piggybank)","PiggybankForceEndHandler (scripts.meta.modules.piggybank)","PiggybankMetaEvent (scripts.meta-events.event)","PiggybankMetaModule (scripts.meta.modules.piggybank)","PiggybankMetaModuleDevConsoleMenuGenerator (scripts.devconsole.generators)","PiggybankNameplate (scripts.meta.modules.piggybank)","PiggybankRemindActionCondition (scripts.action-conditions)","PiggybankReplenishmentAction (scripts.actions)","PiggybankTutorialWindowAction (scripts.actions)","PiggybankWindowAction (scripts.actions)","PiggybankWindowLayoutComponent (scripts.windows.layouts.piggybank)","PinataAnimationBuilder (scripts.scenes.match3-game.animations.builders)","PinataLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","PipelineProcessSystem (@tapclap.match-x.engine.systems)","PipelineSystem (@tapclap.match-x.engine.systems)","PlaceNumberComponent (scripts.windows.layouts.message-center)","PlanetarySwapAnimation (@tapclap.match-x.cocos.animations)","PlatformContextActionCondition (scripts.action-conditions)","PlatformDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","PlatformLauncher (@tapclap.sdk-x.platform-launcher)","PlatformPromoGiftCondition (@tapclap.game-kit.platform-promo.conditions)","PlatformPromoGiftConfirmationAction (@tapclap.game-kit.platform-promo.actions)","PlatformPromoGiftWindowAction (scripts.actions)","PlatformPromoGiftWindowLayoutComponent (scripts.windows.layouts)","PlatformRemoteConfig (scripts.platform)","PlatformSDKLoader (@tapclap.sdk-x.platform-launcher)","PlatformStorage (@tapclap.game-kit.data-storage)","PlaySpineAnimationAction (scripts.actions)","PopcornAnimationBuilder (scripts.scenes.match3-game.animations.builders)","PopcornLegacyLevelComponentRetriever (scripts.common.match3-game.component-retrievers)","PostProcessGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","PostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system)","PostSuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)","PostponeExplodeComponent (@tapclap.match-x.engine.components)","PostponeExplodeHandler (@tapclap.match-x.engine.systems.explode-system.handlers)","PostponeGoalComponent (@tapclap.match-x.engine.components)","PrefabFactory (@tapclap.match-x.cocos.prefab-factory)","PrefabResourceExtractor (@tapclap.game-kit.resource-manager.extractors)","PrefabResourcesConfig (scripts.config)","PrefabThemeComponent (@tapclap.game-kit.ui.themes)","PreloadComponent (@tapclap.game-kit.scene-manager.components)","PreloadWindowAction (scripts.actions)","PrepareGoalSystem (@tapclap.match-x.engine.systems)","PreserveSceneRatioComponent (@tapclap.game-kit.ui.canvas)","PreventBoosterApplyComponent (@tapclap.match-x.engine.components)","PreventBoosterApplyWithEmptyGroupComponent (@tapclap.match-x.engine.components.prevent-booster-apply)","PreventCoverComponent (@tapclap.match-x.engine.components)","PreventExplodeOnSwapComponent (@tapclap.match-x.engine.components)","PreventWalkExplodeComponent (@tapclap.match-x.engine.components)","PreventWalkPathComponent (@tapclap.match-x.engine.components)","PriceProgressionOfferState (@tapclap.game-kit.offer-manager.states)","ProbabilityFilter (@tapclap.match-x.engine.helpers)","Product (@tapclap.sdk-x.payment-service)","ProductItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","ProductItemTimeWidgetComponent (@tapclap.game-kit.ui.widgets)","ProductsConfig (scripts.config)","ProgressBarAnimation (@tapclap.match-x.engine.systems.game-action-system)","ProgressBarComponent (scripts.windows.items)","ProgressMetaModule (@tapclap.game-kit.meta-game.meta-modules.progress)","ProgressMetaModuleDevConsoleMenuGenerator (@tapclap.game-kit.meta-game.meta-modules.progress)","ProgressNotChangedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","PromisifyTween (scripts.utils)","ProxyAction (@tapclap.game-kit.action-manager)","ProxyAnalyticsProvider (@tapclap.sdk-x.analytics-service.providers)","ProxyPaymentProvider (@tapclap.sdk-x.payment-service)","ProxyRemoteConfig (@tapclap.sdk-x.remote-config)","PublicationAction (@tapclap.game-kit.action-manager.actions.publication)","PublicationConfig (scripts.config)","PublicationManager (@tapclap.game-kit.publication-manager)","PublicationResolver (@tapclap.game-kit.publication-manager)","PulseFx (@tapclap.game-kit.ui.vfx)","Purchase (@tapclap.sdk-x.payment-service)","PurchaseAction (@tapclap.game-kit.action-manager.actions.purchase)","PurchaseHandler (@tapclap.sdk-x.payment-service)","PurchaseOfferPayloadBuilder (@tapclap.game-kit.offer-manager.builders)","QueueHttpGateway (@tapclap.game-kit.service-gateway)","QuitFromAppAction (@tapclap.game-kit.action-manager.actions.app)","RadialGameStartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","RadialSquareExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","RadialSquareRetriever (@tapclap.match-x.engine.retrievers)","Random (@tapclap.utils-js.random)","RandomByGroupEmitTargetStrategy (scripts.common.match3-game.systems.emit-system.target-strategies)","RandomCellExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","RandomCellRetriever (@tapclap.match-x.engine.retrievers)","RandomColorGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","RandomComponentEmitTargetStrategy (@tapclap.match-x.engine.systems.emit-system.emit-target-strategies)","RandomEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","RandomGroupComponent (@tapclap.match-x.engine.components)","RandomHealthComponent (@tapclap.match-x.engine.components)","RandomHealthGridDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","RandomTurnSelector (@tapclap.match-x.engine.systems.turn-system.selectors)","RandomWalkPathStrategy (@tapclap.match-x.engine.systems.walk-system.path-strategies)","RandomWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)","RangeResolver (@tapclap.game-kit.meta-game)","RawInputHandler (@tapclap.match-x.engine.systems.input-system)","RawInputTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","RawStorageAdapter (@tapclap.game-kit.data-storage.adapters)","ReachGoalRewardContentWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)","ReachGoalRewardHeaderWindowLayoutComponent (scripts.windows.layouts.reach-goal-reward)","ReachGoalRewardItemComponent (scripts.windows.items.reach-goal-reward)","ReceiveItemWindowLayoutComponent (scripts.windows.layouts)","ReceiveLivesMessageEventHandler (scripts.message-center.event-handlers)","ReceivingLivesMessageItemComponent (scripts.windows.layouts.message-center)","RecoveryHealthAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","RecoveryHealthComponent (@tapclap.match-x.engine.components)","RecoveryHealthOnDeathComponent (@tapclap.match-x.engine.components)","RecoveryHealthOnEmitComponent (@tapclap.match-x.engine.components)","RecoveryHealthOnReachTurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","RecoveryHealthStateModel (@tapclap.match-x.engine.systems.recovery-health-system)","RecoveryHealthSystem (@tapclap.match-x.engine.systems.recovery-health-system)","RecoveryHealthSystemStrategy (@tapclap.match-x.engine.systems.recovery-health-system)","RecyclerScrollAdapter (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.adapters)","RecyclerScrollStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","RecyclerScrollTouchStrategy (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","RecyclerScrollViewComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","RecyclerScrollViewHolderComponent (@tapclap.game-kit.ui.scroll-view.recycler-scroll-view.components)","ReduceCounterComponent (@tapclap.match-x.engine.components)","ReduceCounterOnTurnComponent (@tapclap.match-x.engine.components)","ReduceCounterOnTurnStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)","ReduceHealthComponent (@tapclap.match-x.engine.components)","ReduceHealthHandler (@tapclap.match-x.engine.systems.explode-system.handlers)","ReduceHealthOnBlastComponent (@tapclap.match-x.engine.components)","ReduceHealthOnCombinationInCellComponent (@tapclap.match-x.engine.components)","ReduceHealthOnCombinationNeighborComponent (@tapclap.match-x.engine.components)","ReduceHealthOnExplodeComponent (@tapclap.match-x.engine.components)","RelativeRetriever (@tapclap.match-x.engine.retrievers)","RemoteConfigService (@tapclap.game-kit.config-service)","RemoveEntityByGroupEffect (@tapclap.match-x.engine.effects)","RemoveEntityEffect (@tapclap.match-x.engine.effects)","RemoveEntityInColumnEffect (@tapclap.match-x.engine.effects)","RemoveNeighborsOnWalkComponent (@tapclap.match-x.engine.components)","RemoveNeighborsOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)","RemoveOnWalkAnimationBuilder (scripts.scenes.match3-game.animations.builders)","RemoveOnWalkSystem (@tapclap.match-x.engine.systems.remove-system)","RemoveOnWalkSystemHandler (@tapclap.match-x.engine.systems.remove-system.remote-on-walk-system-handlers)","RemoveSystem (@tapclap.match-x.engine.systems)","RenderComponent (@tapclap.match-x.engine.components.render)","RenderSystem (@tapclap.match-x.engine.systems.render-system)","Renderer (@tapclap.match-x.engine.systems.render-system)","ReplaceConfigWindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)","ReplaceEntityByEntityAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ReplaceEntityComponent (@tapclap.match-x.engine.components)","ReplaceEntityOnTurnEndComponent (@tapclap.match-x.engine.components)","ReplaceEntityOnTurnEndSystem (@tapclap.match-x.engine.systems.replace-entity)","ReplaceEntitySystem (@tapclap.match-x.engine.systems.replace-entity)","ReplaceEntitySystemStrategy (@tapclap.match-x.engine.systems.replace-entity)","ReplaceOfferStrategy (@tapclap.game-kit.offer-manager.strategies)","ReplaceWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","RequestLivesMessageEventHandler (scripts.message-center.event-handlers)","ResetDefaultStrategy (@tapclap.match-x.engine.systems.reset-system)","ResetModulesAction (@tapclap.game-kit.action-manager.actions.match3-game)","ResetOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)","ResetSystem (@tapclap.match-x.engine.systems.reset-system)","ResetSystemStrategy (@tapclap.match-x.engine.systems.reset-system)","ResizeCanvasToFrameSizeComponent (scripts.responsive)","ResizeChildViewComponent (@tapclap.match-x.cocos.components.view)","ResizeInProportionToTargetComponent (scripts.responsive)","ResourceExtractor (@tapclap.game-kit.resource-manager)","ResourceHandler (@tapclap.game-kit.resource-manager)","ResourceLoadTask (@tapclap.game-kit.loader)","ResourceManager (@tapclap.game-kit.resource-manager)","ResourceResolver (@tapclap.game-kit.resource-manager)","RestorableCountableAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","RestorableCountableUserItem (@tapclap.game-kit.user-item-manager.items)","Result (@tapclap.match-x.engine.chunk-classifier)","Retriever (@tapclap.match-x.engine.retrievers)","RetrieverFactory (@tapclap.match-x.engine.retrievers)","RevertSwapSystem (@tapclap.match-x.engine.systems.swap-system)","RewardAction (@tapclap.game-kit.action-manager.actions.meta.reward)","RewardAvailabilityFilter (@tapclap.game-kit.reward.filters)","RewardBuilder (@tapclap.game-kit.reward)","RewardComponent (scripts.windows.items.daily-reward.reward)","RewardEmitter (@tapclap.game-kit.reward)","RewardFilter (@tapclap.game-kit.reward.filters)","RewardGroup (@tapclap.game-kit.reward)","RewardItem (@tapclap.game-kit.reward)","RewardMetaModule (@tapclap.game-kit.meta-game.meta-modules.reward)","RewardPack (@tapclap.game-kit.reward)","RewardProps (@tapclap.game-kit.reward)","RewardRandomByWeightFilter (@tapclap.game-kit.reward.filters)","RewardWindowSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","RewardsListComponent (scripts.windows.items.daily-reward.reward)","RowContentWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","RunMetaGameAction (@tapclap.game-kit.action-manager.actions.meta)","RunMetaGameScenarioAction (@tapclap.game-kit.action-manager.actions.meta.scenario)","RuntimeStorage (@tapclap.game-kit.data-storage)","SalesOfferState (scripts.offers.states)","SameFontSizeComponent (scripts.ui)","SameGroupFromSetEntityEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","ScaleNodeToTarget (@tapclap.game-kit.ui.positioning)","ScaleUIComponent (@tapclap.game-kit.ui.canvas)","Scenario (@tapclap.game-kit.scenario-manager)","ScenarioBuilder (@tapclap.game-kit.scenario-manager)","ScenarioKeyResolver (@tapclap.game-kit.meta-game.meta-modules.scenario)","ScenarioManager (@tapclap.game-kit.scenario-manager)","ScenarioMetaModule (@tapclap.game-kit.meta-game.meta-modules.scenario)","ScenarioProducer (@tapclap.game-kit.scenario-manager)","ScenarioResourceHandler (@tapclap.game-kit.meta-game.meta-modules.scenario)","ScenarioTargetResolver (@tapclap.game-kit.scenario-manager)","SceneBadgeComponent (scripts.badges)","SceneBadgeRefresher (scripts.badges)","SceneComponent (@tapclap.game-kit.scene-manager)","SceneHolder (@tapclap.game-kit.scene-manager)","SceneHolderTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","SceneLoadTask (@tapclap.game-kit.loader)","SceneLoader (@tapclap.game-kit.loader)","SceneLoaderBackgroundStrategy (@tapclap.game-kit.scene-manager.strategies)","SceneLoaderProgressStrategy (@tapclap.game-kit.scene-manager.strategies)","SceneLoaderStrategy (@tapclap.game-kit.scene-manager.strategies)","SceneLoaderStrategyFactory (@tapclap.game-kit.scene-manager.strategies)","SceneLoaderTransitionStrategy (@tapclap.game-kit.scene-manager.strategies)","SceneManager (@tapclap.game-kit.scene-manager)","SceneResourcesManager (scripts.scenes.scene-resources)","SceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","SceneTransition (@tapclap.game-kit.scene-manager.transitions)","SceneTransitionComponent (@tapclap.game-kit.scene-manager.components)","SceneTransitionFactory (@tapclap.game-kit.scene-manager.transitions)","ScoreMetaModule (@tapclap.game-kit.meta-game.meta-modules.score)","ScoreSystem (@tapclap.match-x.engine.systems.score-system)","ScoreSystemEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)","ScoreSystemGoalEntityTypeStrategy (@tapclap.match-x.engine.systems.score-system)","ScoreSystemGoalGroupStrategy (@tapclap.match-x.engine.systems.score-system)","ScoreSystemGroupStrategy (@tapclap.match-x.engine.systems.score-system)","ScoreSystemOnHealthReduceStrategy (@tapclap.match-x.engine.systems.score-system)","ScoreSystemStrategy (@tapclap.match-x.engine.systems.score-system)","ScreenLocker (@tapclap.game-kit.ui.screen-locker)","ScriptLoader (@tapclap.utils-js.script-loader)","SelectionViewComponent (@tapclap.match-x.cocos.components)","SendLivesMessageEventHandler (scripts.message-center.event-handlers)","SequenceAction (@tapclap.game-kit.action-manager)","SequentiallyFromEntitiesEmitStrategy (@tapclap.match-x.engine.systems.emit-system.emit-strategies)","Service (@tapclap.utils-js.service)","ServiceGateway (@tapclap.game-kit.service-gateway)","ServiceGatewayErrorHandler (@tapclap.game-kit.service-gateway)","ServicesConfig (scripts.config)","ShopItemComponent (@tapclap.game-kit.ui.window-manager.items.shop)","ShopWindowAppLoaderHandler (scripts.loader.window-app-loader-handlers)","ShopWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","ShowBoosterShopWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","ShowCakeWinLevelWindowAction (scripts.actions)","ShowCandyvalleyShopWindowAction (scripts.actions)","ShowCraftPartWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","ShowCraftWindowAction (@tapclap.game-kit.action-manager.actions.meta.craft)","ShowEpisodicWindowAction (@tapclap.game-kit.action-manager.actions.meta.episodes)","ShowExitLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","ShowFriendsWindowAction (scripts.actions)","ShowInviteAction (@tapclap.game-kit.action-manager.actions.request)","ShowLoseLevelBombExplodeWindowAction (scripts.actions)","ShowLoseLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","ShowMenuWindowAction (scripts.actions)","ShowParrotFailWalkWindowAction (scripts.actions)","ShowShopWindowAction (@tapclap.game-kit.action-manager.actions.shop)","ShowSpecialLevelTutorialWindowAction (scripts.actions.special-levels.windows)","ShowStartLevelWithBoostersWindowAction (scripts.actions)","ShowUserIdWindowAction (scripts.actions)","ShowWebViewWindow (@tapclap.game-kit.action-manager.actions.webview)","ShowWinLevelWindowAction (@tapclap.game-kit.action-manager.actions.match3-game)","ShuffleAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","ShuffleComponent (@tapclap.match-x.engine.components)","ShuffleFailLoseGameStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","ShuffleGridOnDeathOnTurnEndComponent (@tapclap.match-x.engine.components.shuffle)","ShuffleOnDeathOnEndTurnSystem (@tapclap.match-x.engine.systems.shuffle-system)","ShuffleSystem (@tapclap.match-x.engine.systems.shuffle-system)","ShuffleSystemStrategy (@tapclap.match-x.engine.systems.shuffle-system)","SimpleColumnGroundSystemStrategy (@tapclap.match-x.engine.systems.ground-system.strategies)","SimpleComponentShuffleSystemStrategy (scripts.common.match3-game.systems.strategies.shuffle-system)","SimpleGoal (@tapclap.match-x.engine.goals)","SimpleGoalCreator (@tapclap.match-x.engine.goals.creators)","SimpleGridReadyAfterLockChecker (scripts.common.match3-game.grid-checkers)","SimpleOfferStrategy (@tapclap.game-kit.offer-manager.strategies)","SimpleUserItemInfoComponent (scripts.views.user-items)","SimpleUserItemListComponent (scripts.views.user-items)","SingleExplodeRetriever (@tapclap.match-x.engine.retrievers.explode-retrievers)","SingleMetaEventBranch (scripts.meta-events.branch)","SingleRetriever (@tapclap.match-x.engine.retrievers)","SingleViewDialogComponent (@tapclap.game-kit.ui.dialogs)","SizeComponent (@tapclap.match-x.engine.components)","SkinsWindowAction (scripts.actions)","SkinsWindowLayoutComponent (scripts.windows.layouts)","SkipAfterTurnAnimationComponent (@tapclap.match-x.engine.components)","SkipAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","SliceFilter (@tapclap.game-kit.filter)","SmoothTransitionAnimation (scripts.windows.items.daily-reward.animation)","SnailClipIdleViewComponent (scripts.common.match3-game.components.entities.snail)","SocialAdapter (@tapclap.sdk-x.social-service)","SocialAdapterLocaleResolver (@tapclap.game-kit.locale-resolver.resolvers)","SocialAuthProvider (@tapclap.sdk-x.auth-service.providers)","SocialRequest (@tapclap.sdk-x.social-service)","SocialRequestWrapper (scripts.message-center.event-handlers)","SocialService (@tapclap.sdk-x.social-service)","SophieSpineSpeakerComponent (scripts.common.dialogs)","SoundPauseResumeAction (scripts.actions)","SpeakerComponent (@tapclap.game-kit.ui.dialogs)","SpecialLevelEndAction (scripts.actions.special-levels)","SpecialLevelRewardWindowAction (scripts.actions.special-levels)","SpecialLevelTutorialWindowLayoutComponent (scripts.windows.layouts)","SpecialLevelsForceEndHandler (scripts.meta.modules.levels-special)","SpecialLevelsResourceHandler (scripts.meta.modules.levels-special)","SpecialLevelsRewardMetaModule (scripts.meta.modules.levels-special)","SpecificInputBoosterGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","SpecificInputGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","SpeechTutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system.strategies)","SpendStartBoostersAction (scripts.actions)","SpineAnimation (@tapclap.match-x.cocos.animations)","SpineAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","SpineAnimationWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","SpineGroupEntityViewComponent (@tapclap.match-x.cocos.components.group-entity-view)","SpineIconComponent (@tapclap.game-kit.ui.icons)","SpineLootBoxView (@tapclap.game-kit.ui.loot-box.loot-box-views)","SpineMixAnimation (@tapclap.match-x.cocos.components.animations)","SpineSpeakerComponent (@tapclap.game-kit.ui.dialogs)","SpineTrackAnimation (@tapclap.match-x.cocos.components.animations)","SpinnerComponent (@tapclap.game-kit.ui.spinner)","SpriteAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","SpriteAtlasAnimation (@tapclap.match-x.cocos.animations)","SpriteAtlasAnimationComponent (@tapclap.match-x.cocos.components.animations)","SpriteAtlasAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","SpriteFromEpisodeComponent (scripts.common.match3-game.components)","SpriteMorphViewComponent (@tapclap.match-x.cocos.components)","SpriteThemeComponent (@tapclap.game-kit.ui.themes)","SquirrelThrowNutAnimationBuilder (scripts.scenes.match3-game.animations.builders)","StarProgressAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","StarSystem (@tapclap.match-x.engine.systems)","StarsRewardReachedGameForceEndHandler (@tapclap.game-kit.action-manager.actions.match3-game.force-end-handlers)","StartAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","StartAnimationHandler (@tapclap.match-x.cocos.animations.builders)","StartAnimatorComponent (@tapclap.match-x.cocos.components.start-animators)","StartBoosterAddMovesAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)","StartBoosterAnimationBuilder (scripts.scenes.match3-game.animations.builders.start-booster)","StartBoosterAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)","StartBoosterEmitEntityAnimationCreator (scripts.scenes.match3-game.animations.creators.start-booster)","StartBoosterStrategy (@tapclap.match-x.engine.systems.start-booster-system)","StartBoosterSystem (@tapclap.match-x.engine.systems.start-booster-system)","StartBoosterWindowItemComponent (scripts.windows.items)","StartBoostersComponent (@tapclap.match-x.engine.components)","StartBoostersDataLoader (@tapclap.match-x.engine.systems.load-system)","StartLevelAction (@tapclap.game-kit.action-manager.actions.match3-game)","StartLevelWindowKeyResolver (@tapclap.game-kit.action-manager.actions.match3-game.start-level-action)","StartLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","StartLevelWithBoostersWindowLayoutComponent (scripts.windows.layouts)","StartMatch3GameAction (scripts.actions)","StartSceneComponent (scripts.scenes.start-scene)","StartSystem (@tapclap.match-x.engine.systems.start-system)","StartTrackComponent (@tapclap.match-x.engine.components)","StartTutorialAnimationBuilder (@tapclap.match-x.cocos.animations.builders.tutorial)","State (@tapclap.match-x.engine.models)","StateComponent (@tapclap.match-x.engine.components.state)","StateModel (@tapclap.match-x.engine.components.state)","StaticComponent (@tapclap.match-x.engine.components)","StaticResolveOnce (@tapclap.utils-js.decorators)","StatisticComponent (@tapclap.match-x.engine.components)","StatisticSystem (@tapclap.match-x.engine.systems)","StepCounterViewComponent (@tapclap.match-x.cocos.components)","StickerComponent (@tapclap.game-kit.ui.sticker)","StickerListComponent (@tapclap.game-kit.ui.sticker)","StorageAdapter (@tapclap.game-kit.data-storage.adapters)","StorageFlagActionCondition (scripts.action-conditions)","StorageForcedKeys (scripts.config)","StorageItemCompareValueResolver (scripts.action-conditions.compare-value-resolvers)","StorageStartBoostersTutorialAction (scripts.actions)","StrategicEmitStrategy (@tapclap.match-x.engine.systems.strategic-emit-system)","StrategicEmitSystem (@tapclap.match-x.engine.systems.strategic-emit-system)","StrawberryClipIdleViewComponent (scripts.common.match3-game.components.entities.strawberry)","StretchWindowComponent (@tapclap.game-kit.ui.window-manager)","SubAnimationItem (@tapclap.match-x.cocos.components.animation-factory)","SubstringReplacer (@tapclap.utils-js.substring-replacer)","SumMultiplierPostSuperEntityHandler (@tapclap.match-x.engine.systems.super-entity-system.post-handlers)","SuperEntitySystem (@tapclap.match-x.engine.systems.super-entity-system)","SuperExplodeAnimationBuilder (scripts.scenes.match3-game.animations.builders)","SuperTileTrailComponent (scripts.scenes.match3-game.components)","SwapAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","SwapAttemptsGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","SwapAttemptsSystem (@tapclap.match-x.engine.systems.swap-system)","SwapComponent (@tapclap.match-x.engine.components)","SwapCoverEntitySystemStrategy (@tapclap.match-x.engine.systems.cover-entity-system.strategies)","SwapGumAnimationBuilder (scripts.scenes.match3-game.animations.builders)","SwapHelpAnimation (@tapclap.match-x.cocos.animations)","SwapInputHandler (@tapclap.match-x.engine.systems.input-system)","SwapMergeComponent (@tapclap.match-x.engine.components)","SwapSpecificEntitiesGameEventStrategy (@tapclap.match-x.engine.systems.game-event-system.strategies)","SwapSystem (@tapclap.match-x.engine.systems.swap-system)","SwapSystemHandler (@tapclap.match-x.engine.systems.swap-system)","SwapSystemStrategy (@tapclap.match-x.engine.systems.swap-system)","SwapTurnResolver (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)","SwapTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies.swap-turn-strategy)","SwapWalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system.replace-strategies)","SyncPipelineSystem (scripts.common.match3-game.systems)","SyncRemoteConfig (@tapclap.sdk-x.remote-config)","SyncRemoteConfigGetter (scripts.getters)","SyncService (@tapclap.game-kit.services)","System (@tapclap.match-x.engine.systems)","TabComponent (scripts.views.message-center)","TabMessageCenterWindowLayoutComponent (scripts.windows.layouts.message-center)","TagComponent (@tapclap.match-x.engine.components)","TapComponent (@tapclap.match-x.engine.components)","TapToSkipMessageAnimationBuilder (scripts.scenes.match3-game.animations.builders)","TargetClipComponent (scripts.common.components.ui-animations)","TargetValueComponent (@tapclap.match-x.engine.components)","TargetValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)","TextureFiltersComponent (@tapclap.match-x.cocos.components)","ThemeComponent (@tapclap.game-kit.ui.themes)","ThemeControllerComponent (@tapclap.game-kit.ui.themes)","ThousandthsLevelRewardContentWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)","ThousandthsLevelRewardFooterWindowLayoutComponent (scripts.windows.layouts.thousandths-level-reward)","ThousandthsLevelRewardItemComponent (scripts.windows.items)","ThousandthsLevelRewardStrategy (@tapclap.game-kit.meta-game.meta-modules.checkpoint-reward.strategies)","ThousandthsLevelRewardWindowAction (scripts.actions)","ThroughMoveStrategy (@tapclap.match-x.engine.systems.move-system)","TickAnimationComponent (scripts.windows.items.daily-reward.animation)","TimeDuration (@tapclap.utils-js.time-duration)","TimeValueRewardComponent (scripts.windows.items.daily-reward.reward)","TimedAttemptsState (@tapclap.game-kit.meta-game.meta-modules.attempts.states)","TimedUserItem (@tapclap.game-kit.user-item-manager.items)","Timer (@tapclap.utils-js.timer)","ToggleLockAnimationResolver (scripts.common.match3-game.animation-resolvers)","ToggleLockOnTurnEndAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ToggleLockOnTurnEndComponent (@tapclap.match-x.engine.components)","ToggleLockOnTurnEndSystem (@tapclap.match-x.engine.systems.lock-system)","TrackComponent (@tapclap.match-x.engine.components)","TrackDataLoaderPostHandler (@tapclap.match-x.engine.systems.load-system.GridDataLoaderPostHandlers)","TrackStorageComponent (@tapclap.match-x.engine.components)","TransitionComponent (@tapclap.game-kit.ui.transition)","TranslationHandler (@tapclap.game-kit.translation-handler)","TurnComponent (@tapclap.match-x.engine.components)","TurnCountAfterExplodeComponent (@tapclap.match-x.engine.components)","TurnCountAfterExplodeSystem (@tapclap.match-x.engine.systems.turn-count-after-explode-system)","TurnEndLockCreator (@tapclap.match-x.engine.systems.lock-system.lock-factory.creators)","TurnSelector (@tapclap.match-x.engine.systems.turn-system)","TurnStateComponent (@tapclap.match-x.engine.components)","TurnStateSystem (@tapclap.match-x.engine.systems.turn-state-system)","TurnStrategy (@tapclap.match-x.engine.systems.turn-system)","TurnSystem (@tapclap.match-x.engine.systems.turn-system)","Tutorial (@tapclap.match-x.engine.systems.tutorial-system)","TutorialComponent (@tapclap.match-x.engine.components)","TutorialConfig (scripts.config)","TutorialDataLoader (@tapclap.match-x.engine.systems.load-system)","TutorialHelpStrategy (@tapclap.match-x.engine.systems.help-system.strategies)","TutorialInputHandler (@tapclap.match-x.engine.systems.input-system)","TutorialRegistry (@tapclap.match-x.engine.systems.tutorial-system)","TutorialScenarioBuilder (@tapclap.game-kit.scenario-manager.builders)","TutorialStep (@tapclap.match-x.engine.systems.tutorial-system)","TutorialStepStrategy (@tapclap.match-x.engine.systems.tutorial-system)","TutorialSystem (@tapclap.match-x.engine.systems.tutorial-system)","TutorialTurnStrategy (@tapclap.match-x.engine.systems.turn-system.strategies)","TypableTextComponent (@tapclap.game-kit.ui.typable-text)","TypeSpriteFrame (@tapclap.match-x.cocos.components.properties)","UIAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","UIAnimationComponent (@tapclap.game-kit.ui.animations)","UIAnimationSceneHolder (@tapclap.game-kit.scene-manager)","UIController (@tapclap.game-kit.ui)","UIElement (scripts.common.components)","UIHolderKeyResolver (@tapclap.game-kit.ui.ui-manager)","UIHolderKeyUserItemResolver (@tapclap.game-kit.ui.ui-manager)","UIManager (@tapclap.game-kit.ui)","URI (@tapclap.utils-js.url)","URL (@tapclap.utils-js.url)","URLSearchParams (@tapclap.utils-js.url)","UiResourceConfig (scripts.config)","UnlockAfterExplodeComponent (@tapclap.match-x.engine.components)","UnlockAfterExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","UnlockAnimationBuilder (scripts.scenes.match3-game.animations.builders)","UnlockOnExplodeSystem (@tapclap.match-x.engine.systems.lock-system)","UnlockOnWalkSystem (@tapclap.match-x.engine.systems.lock-system)","UpdateCakeRewardMetaModuleAction (scripts.actions)","UpdateCounterStrategy (@tapclap.match-x.engine.systems.counter-system.strategies)","UpdateMultiplierSystem (@tapclap.match-x.engine.systems)","UpdateOfferStateAction (@tapclap.game-kit.action-manager.actions.match3-game)","UpdateZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)","User (@tapclap.game-kit.user-manager)","UserAttributesResolver (scripts.user)","UserDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","UserFactory (@tapclap.game-kit.user-service.factory)","UserIdWindowLayoutComponent (scripts.windows.layouts)","UserInfo (@tapclap.sdk-x.social-service)","UserItem (@tapclap.game-kit.user-item-manager)","UserItemActionCondition (scripts.action-conditions)","UserItemAttemptsMetaModuleService (@tapclap.game-kit.meta-game.meta-modules.attempts.services)","UserItemAvailability (@tapclap.game-kit.user-item-manager)","UserItemCollection (@tapclap.game-kit.user-item-manager)","UserItemDevConsoleMenuGenerator (@tapclap.game-kit.devconsole.generators)","UserItemFactory (@tapclap.game-kit.user-item-manager)","UserItemInfoComponent (@tapclap.game-kit.ui.user-item)","UserItemListComponent (@tapclap.game-kit.ui.window-manager.items.shop)","UserItemManager (@tapclap.game-kit.user-item-manager)","UserItemTimer (@tapclap.utils-js.timer)","UserManager (@tapclap.game-kit.user-manager)","UserService (@tapclap.game-kit.user-service)","UserSettings (@tapclap.game-kit.user-manager)","ValueComponent (@tapclap.match-x.engine.components)","ValueComponentDataLoader (@tapclap.match-x.engine.systems.load-system)","ValueComponentRatioAnimationResolver (@tapclap.match-x.engine.animation-factory)","ValueResolver (@tapclap.utils-js.substring-replacer)","Vector2D (@tapclap.match-x.engine.models)","VendorPaymentProvider (@tapclap.sdk-x.payment-service.providers)","ViewComponent (@tapclap.match-x.cocos.components)","ViewIdleAnimationHandler (@tapclap.match-x.cocos.animations.builders.chain-idle)","VisibilityByShareComponent (scripts.common.components.visibility)","WaitAnimation (@tapclap.match-x.engine.systems.game-action-system)","WaitCloseWindowsAction (@tapclap.game-kit.action-manager.actions.window)","WaitPromiseAnimation (@tapclap.match-x.engine.systems.game-action-system)","WalkAnimationBuilder (@tapclap.match-x.cocos.animations.builders)","WalkComponent (@tapclap.match-x.engine.components)","WalkDirectionComponent (@tapclap.match-x.engine.components)","WalkDirectionWalkSortStrategy (@tapclap.match-x.engine.systems.walk-system.sort-strategies)","WalkDistanceToGridEdgeAnimationResolver (@tapclap.match-x.engine.animation-factory)","WalkFinishComponent (@tapclap.match-x.engine.components)","WalkOnExplodeComponent (@tapclap.match-x.engine.components)","WalkOnNextTrackEntityExplodeComponent (@tapclap.match-x.engine.components)","WalkOnTrackComponent (@tapclap.match-x.engine.components)","WalkOnTrackEntityTypeComponent (@tapclap.match-x.engine.components)","WalkOnTurnEndComponent (@tapclap.match-x.engine.components)","WalkPathComponent (@tapclap.match-x.engine.components)","WalkPathStrategy (@tapclap.match-x.engine.systems.walk-system)","WalkReplaceStrategy (@tapclap.match-x.engine.systems.walk-system)","WalkSortStrategy (@tapclap.match-x.engine.systems.walk-system)","WalkSystem (@tapclap.match-x.engine.systems.walk-system)","WalkTriggerStrategy (@tapclap.match-x.engine.systems.walk-system)","WatchAdAction (@tapclap.game-kit.action-manager.actions.ad)","WebViewWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","WinLevelWindowLayoutComponent (@tapclap.game-kit.ui.window-manager.layouts)","WinLoseSystem (@tapclap.match-x.engine.systems.win-lose-system)","WindowAction (@tapclap.game-kit.action-manager.actions.window)","WindowAnimationComponent (scripts.windows.items.daily-reward.animation)","WindowButtonComponent (@tapclap.game-kit.ui.window-manager)","WindowByConditionalSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","WindowComponent (@tapclap.game-kit.ui.window-manager)","WindowConfig (scripts.config)","WindowController (@tapclap.game-kit.ui.window-manager)","WindowEventArgumentsProperty (@tapclap.game-kit.ui.window-manager)","WindowEventHandlerComponent (@tapclap.game-kit.ui.window-manager)","WindowFactory (@tapclap.game-kit.ui.window-manager)","WindowItemComponent (@tapclap.game-kit.ui.window-manager.components)","WindowKeyResolver (@tapclap.game-kit.action-manager.actions.window)","WindowLayoutComponet (@tapclap.game-kit.ui.window-manager)","WindowLazyLoader (scripts.loader)","WindowLazyLoaderSpinerComponent (scripts.windows.loader)","WindowLoadSpinnerComponent (@tapclap.game-kit.ui.window-manager.components)","WindowManager (@tapclap.game-kit.ui.window-manager)","WindowTargetResolver (@tapclap.game-kit.scenario-manager.target-resolvers)","WindowsAppLoader (scripts.loader)","WindowsAppLoaderHandler (scripts.loader.window-app-loader-handlers)","WindowsSceneResourcesResolver (scripts.scenes.scene-resources.scene-resources-resolvers)","World (@tapclap.match-x.engine.entities)","WorldEmitProducer (@tapclap.match-x.engine.systems.emit-system)","WorldGroupsComponent (@tapclap.match-x.engine.components)","WorldGroupsDataLoader (@tapclap.match-x.engine.systems.load-system)","WorldRenderer (@tapclap.match-x.cocos.renderers)","YandexGamesAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)","YandexGamesAuthProvider (@tapclap.sdk-x.auth-service.providers)","YandexGamesInterstitialAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)","YandexGamesLauncher (@tapclap.sdk-x.platform-launcher.launchers.yandex-games)","YandexGamesPaymentProvider (@tapclap.sdk-x.payment-service.providers.yandex-games)","YandexGamesPlatformSDK (@tapclap.sdk-x.platform-sdk)","YandexGamesRewardedAdProvider (@tapclap.sdk-x.ad-service.providers.yandex-games)","YandexGamesSocialAdapter (scripts.social-service.adapters.yandex)","YandexGamesStorage (@tapclap.game-kit.data-storage)","ZIndexAnimationBuilder (scripts.scenes.match3-game.animations.builders)","ZIndexComponent (@tapclap.match-x.engine.components)","ZeroCounterStrategy (@tapclap.match-x.engine.systems.win-lose-system.lose-strategies)","growthbook.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)","index (scripts)","isExplodedComponent (@tapclap.match-x.engine.components)","mongrule (@tapclap.sdk-x.remote-config.growthbook.sdk)","mongrule.types (@tapclap.sdk-x.remote-config.growthbook.sdk.types)","sha256 (@tapclap.utils-js.crypto)","util (@tapclap.sdk-x.remote-config.growthbook.sdk)","use_reversed_rotateTo","use_v2.1-2.2.1_cc.Toggle_event","use_v2.1.x_cc.Action"]);